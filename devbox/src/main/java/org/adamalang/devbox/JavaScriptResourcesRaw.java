/*
* Adama Platform and Language
* Copyright (C) 2021 - 2023 by Adama Platform Initiative, LLC
* 
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.
* 
* You should have received a copy of the GNU Affero General Public License
* along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/
package org.adamalang.devbox;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class JavaScriptResourcesRaw {
  public static final String TREE = new String(Base64.getDecoder().decode(make_tree()), StandardCharsets.UTF_8);
  private static String make_tree() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIGEgc2ltcGxpZmllZCBwdWIvc3ViIGRpZmZlcmVudGlhbCB0cmVlICovCmZ1bmN0aW9uIEFkYW1h");
    sb.append("VHJlZSgpIHsKICB2YXIgaWQgPSAwOwoKICB2YXIgcm9vdCA9IHt9OwogIHZhciBhbGxfc3Vic2NyaXB0");
    sb.append("aW9ucyA9IHt9OwogIHZhciBzZXR0bGVJZCA9IDA7CiAgdmFyIHNldHRsZW1lbnRzID0ge307CgogIC8v");
    sb.append("IGludm9rZSBhbGwgdGhlIHNldHRsZSBzdWJzY3JpcHRpb25zCiAgdmFyIHNldHRsZSA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgdmFyIGF4ZSA9IFtdOwogICAgZm9yICh2YXIgayBpbiBzZXR0bGVtZW50cykgewogICAg");
    sb.append("ICB2YXIgcmVzdWx0ID0gc2V0dGxlbWVudHNba10oKTsKICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAg");
    sb.append("ICAvLyBpZiB0aGUgcmVzdWx0IGlzbid0IHRydWUsIHRoZW4gdW5zdWJzY3JpYmUKICAgICAgICBheGUu");
    sb.append("cHVzaChrKTsKICAgICAgfQogICAgfQogICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgZGVsZXRlIHNldHRsZW1lbnRzW2tdOwogICAgfQogIH07CgogIHZhciBjbG9uZV9v");
    sb.append("YmplY3QgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7CiAgICAg");
    sb.append("IHZhciBuZXh0ID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2JqLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgbmV4dC5wdXNoKGNsb25lX29iamVjdChvYmpba10pKTsKICAgICAgfQogICAgICByZXR1");
    sb.append("cm4gbmV4dDsKICAgIH0gZWxzZSBpZiAodHlwZW9mIChvYmopID09ICJvYmplY3QiKSB7CiAgICAgIHZh");
    sb.append("ciBuZXh0ID0ge307CiAgICAgIGZvciAoa2V5IGluIG9iaikgewogICAgICAgIGlmIChrZXlbMF0gPT0g");
    sb.append("IiMiIHx8IGtleSA9PSAiX19rZXkiIHx8IGtleSA9PSAiQG8iIHx8IGtleSA9PSAiQHMiKSBjb250aW51");
    sb.append("ZTsKICAgICAgICBuZXh0W2tleV0gPSBjbG9uZV9vYmplY3Qob2JqW2tleV0pOwogICAgICB9CiAgICAg");
    sb.append("IHJldHVybiBuZXh0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwoKICB0");
    sb.append("aGlzLm51a2UgPSBmdW5jdGlvbiAoKSB7CiAgICBhbGxfc3Vic2NyaXB0aW9ucyA9IHt9OwogIH07Cgog");
    sb.append("IHRoaXMuY29weSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBjbG9uZV9vYmplY3Qocm9vdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdHIgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocm9v");
    sb.append("dCk7CiAgfTsKCiAgdGhpcy5yYXcgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcm9vdDsKICB9OwoK");
    sb.append("ICAvLyBmaWx0ZXIgdGhlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIG9uZXMgdGhhdCBoYXZlIHRoZSBrZXkK");
    sb.append("ICB2YXIgc3ViID0gZnVuY3Rpb24gKHMsIGtleSkgewogICAgLy8gaWYgd2UgaGF2ZSBub3RoaW5nLCB0");
    sb.append("aGVuIHdlIHJldHVybiBub3RoaW5nCiAgICBpZiAocy5sZW5ndGggPT0gMCkgewogICAgICByZXR1cm4g");
    sb.append("czsKICAgIH0KICAgIC8vIG1ha2UgYSBuZXcgYXJyYXkKICAgIHZhciBuID0gW107CiAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IHMubGVuZ3RoOyBrKyspIHsgLy8gc3VjaCB0aGF0IGV2ZXJ5IGVsZW1lbnQKICAg");
    sb.append("ICAgaWYgKGtleSBpbiBzW2tdKSB7IC8vIHdoaWNoIGNvbnRhaW5zIHRoZSBrZXkKICAgICAgICBuLnB1");
    sb.append("c2goc1trXVtrZXldKTsgLy8gaXMgYWRkZWQgdG8gdGhlIG5ldyBhcnJheQogICAgICB9CiAgICB9CiAg");
    sb.append("ICByZXR1cm4gbjsKICB9OwoKICAvLyBmaXJlIGV2ZW50cyBhdCB0aGUgY3VycmVudCBzdWJzY3JpcHRp");
    sb.append("b24KICB2YXIgZmlyZSA9IGZ1bmN0aW9uIChzLCB2YWx1ZSwgZXZlbnRzKSB7CiAgICAvLyBmb3IgZWFj");
    sb.append("aCBzdWJzY3JpcHRpb24KICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgewogICAg");
    sb.append("ICB2YXIgdiA9IHNbal07CiAgICAgIC8vIGlmIGl0IGhhcyBldmVudHMKICAgICAgaWYgKCJAZSIgaW4g");
    sb.append("dikgewogICAgICAgIC8vIGZpcmUgZWFjaCBldmVudAogICAgICAgIHZhciBldnRzID0gdlsiQGUiXTsK");
    sb.append("ICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV2dHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGV2");
    sb.append("ZW50cy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5mKHRoaXMudik7CiAgICAgICAg");
    sb.append("ICB9LmJpbmQoeyBmOiBldnRzW2tdLCB2OiB2YWx1ZSB9KSk7CiAgICAgICAgfQogICAgICB9CiAgICB9");
    sb.append("CiAgfTsKCiAgdmFyIHdlYXZlID0gZnVuY3Rpb24gKHMsIGNhbGxiYWNrLCBrZXkpIHsKICAgIGlmIChB");
    sb.append("cnJheS5pc0FycmF5KGNhbGxiYWNrKSkgewogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhbGxiYWNr");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgd2VhdmUocywgY2FsbGJhY2tba10sIGtleSk7CiAgICAgIH0K");
    sb.append("ICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxsYmFjaykgPT0gImZ1bmN0aW9uIikgewogICAgICBpZiAo");
    sb.append("IShrZXkgaW4gcykpIHsKICAgICAgICBzW2tleV0gPSB7fTsKICAgICAgfQogICAgICB2YXIgc2sgPSBz");
    sb.append("W2tleV07CiAgICAgIGlmICghKCJAZSIgaW4gc2spKSB7CiAgICAgICAgc2tbIkBlIl0gPSBbY2FsbGJh");
    sb.append("Y2tdOwogICAgICB9IGVsc2UgewogICAgICAgIHNrWyJAZSJdLnB1c2goY2FsbGJhY2spOwogICAgICB9");
    sb.append("CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09ICJvYmplY3QiKSB7CiAgICAgIGlmICgh");
    sb.append("KGtleSBpbiBzKSkgewogICAgICAgIHNba2V5XSA9IHt9OwogICAgICB9CiAgICAgIHZhciBzayA9IHNb");
    sb.append("a2V5XTsKICAgICAgZm9yICh2YXIgY2sgaW4gY2FsbGJhY2spIHsKICAgICAgICBpZiAoY2sgPT0gIkBl");
    sb.append("IikgewogICAgICAgICAgd2VhdmUocywgY2FsbGJhY2tbY2tdLCBrZXkpOwogICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICB3ZWF2ZShzaywgY2FsbGJhY2tbY2tdLCBjayk7CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICB9CiAgfTsKCiAgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhZGRpdGlvbgogIHZhciBmaXJlX2FkZCA9");
    sb.append("IGZ1bmN0aW9uIChzLCBrZXkpIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykg");
    sb.append("eyAvLyBmb3IgZWFjaCBzdWJzY3JpcHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIisi");
    sb.append("IGluIHYpIHsgLy8gaWYgdGhlIHN1YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gYWRkIG5ldyBv");
    sb.append("YmplY3RzCiAgICAgICAgdmFyIHZhID0gdlsiKyJdOwogICAgICAgIGlmICgiQGUiIGluIHZhKSB7IC8v");
    sb.append("IGlmIGFyZSBldmVudHMgYXNzb2NpYXRlZCB0byAnKycKICAgICAgICAgIHZhciBldmEgPSB2YVsiQGUi");
    sb.append("XTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZhLmxlbmd0aDsgaysrKSB7IC8vIGZvciBl");
    sb.append("YWNoICcrJyBhYmlsaXR5CiAgICAgICAgICAgIHdlYXZlKHYsIGV2YVtrXShrZXkpLCBrZXkpOwogICAg");
    sb.append("ICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIGZpcmUgYSBkZWxldGUgbWVz");
    sb.append("c2FnZSBmb3IgdGhlIGdpdmVuIGtleQogIHZhciBmaXJlX2RlbCA9IGZ1bmN0aW9uIChzLCBrZXkpIHsK");
    sb.append("ICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgeyAvLyBmb3IgZWFjaCBzdWJzY3Jp");
    sb.append("cHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIi0iIGluIHYpIHsgLy8gaWYgdGhlIHN1");
    sb.append("YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gZGVsZXRlIHByaW9yIGtleXMKICAgICAgICB2YXIg");
    sb.append("dmEgPSB2WyItIl07CiAgICAgICAgaWYgKCJAZSIgaW4gdmEpIHsgLy8gaWYgYXJlIGV2ZW50cyBhc3Nv");
    sb.append("Y2lhdGVkIHRvICctJwogICAgICAgICAgdmFyIGV2YSA9IHZhWyJAZSJdOwogICAgICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBldmEubGVuZ3RoOyBrKyspIHsgLy8gZm9yIGVhY2ggJy0nIGFiaWxpdHkKICAg");
    sb.append("ICAgICAgICAgZXZhW2tdKGtleSk7IC8vIGV2YWx1YXRlIHRoZSAnLScKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBhIGRlbGV0ZSBvZiBhIHRyZWUgaGFzIGJlZW4gZGV0");
    sb.append("ZWN0ZWQsIGxldCdzCiAgdmFyIGRlbCA9IGZ1bmN0aW9uIChzKSB7CiAgICAvLyBpZiB0aGUgc3Vic2Ny");
    sb.append("aXB0aW9ucyBpcyBhbiBhcnJheSwgdGhlbiBkZWxldGUgYWxsIGNoaWxkcmVuCiAgICBpZiAoQXJyYXku");
    sb.append("aXNBcnJheShzKSkgewogICAgICB2YXIgbiA9IHMubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IG47IGsrKykgewogICAgICAgIGRlbChzW2tdKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBl");
    sb.append("b2YgKHMpID09ICJvYmplY3QiKSB7IC8vIG90aGVyd2lzZSwgaXRlcmF0ZSBvdmVyIHRoZSBrZXlzCiAg");
    sb.append("ICAgIGZvciAodmFyIGtleSBpbiBzKSB7CiAgICAgICAgaWYgKCEoa2V5ID09ICcrJyB8fCBrZXkgPT0g");
    sb.append("Jy0nKSkgewogICAgICAgICAgdmFyIGNoID0gc1trZXldOwogICAgICAgICAgaWYgKGtleSA9PSAiQGUi");
    sb.append("KSB7IC8vIHdlIGhhdmUgZXZlbnRzLCBzbyBsZXQncyBzZW5kIHRob3NlIGV2ZW50cy4uLgogICAgICAg");
    sb.append("ICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY2hb");
    sb.append("al0obnVsbCk7IC8vIGEgbnVsbCB0byBpbmRpY2F0ZSBkZWxldGlvbgogICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICB9IGVsc2UgeyAvLyByZWN1cnNlIGludG8gdGhlIGNoaWxkIGZpZWxkCiAgICAgICAgICAgIGRl");
    sb.append("bChjaCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gZGVsZXRl");
    sb.append("IHRoZSBnaXZlbiBrZXkgd2l0aGluIHRoZSBzdWJzY3JpcHRpb24KICB2YXIgZGVsX2tleSA9IGZ1bmN0");
    sb.append("aW9uIChzLCBrZXkpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHMpKSB7IC8vIGlmIHdlIGhhdmUgYW4g");
    sb.append("YXJyYXkgb2Ygc3Vic2NyaXB0aW9ucywgdGhlbiBzaW1wbHkgcmVwZWF0CiAgICAgIHZhciBuID0gcy5s");
    sb.append("ZW5ndGg7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgZGVsX2tleShz");
    sb.append("W2tdLCBrZXkpOyAvLyBmb3IgZWFjaCBlbGVtZW50CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9m");
    sb.append("IChzKSA9PSAib2JqZWN0IikgeyAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWJjcmlwdGlvbiBjYWxs");
    sb.append("YmFjawogICAgICBpZiAoa2V5IGluIHMpIHsgLy8gaWYgdGhlIGtleSBpcyBpbiB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIGNhbGxiYWNrCiAgICAgICAgZGVsZXRlIHNba2V5XTsgLy8gZGVsZXRlIGl0CiAgICAgIH0KICAg");
    sb.append("IH0KICB9OwoKICAvLyBtZXJnZSB0aGUgZ2l2ZW4gZGVsdGEgaW50byB0aGUgdHJlZSBhbmQgZmlyZSBz");
    sb.append("dWJzY3JpcHRpb25zIChzKQogIHZhciBtZXJnZSA9IGZ1bmN0aW9uICh0cmVlLCBkZWx0YSwgcywgZXZl");
    sb.append("bnRzLCBvcHRpbWFsKSB7CiAgICBpZiAob3B0aW1hbCAmJiBzLmxlbmd0aCA9PSAwKSB7CiAgICAgIC8v");
    sb.append("IG5vIHZhbHVlIGluIG1lcmdpbmcgYWdhaW5zdCBhIGZhdXggdHJlZSB3aXRob3V0IHN1YnNjcmlwdGlv");
    sb.append("bnMKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yICh2YXIga2V5IGluIGRlbHRhKSB7IC8vIGZvciBl");
    sb.append("YWNoIGJpdCBvZiBkYXRhIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgZUtleSA9ICIjIiArIGtleTsg");
    sb.append("Ly8gY29tcHV0ZSB0aGUgc2VjcmV0IGRhdGEgcGF0aAogICAgICB2YXIgcHJpb3IgPSB0cmVlW2tleV07");
    sb.append("IC8vIGZpbmQgdGhlIHByaW9yIHN0YXRlIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgbmV4dCA9IGRl");
    sb.append("bHRhW2tleV07IC8vIGJyaW5nIHRoZSBjaGFuZ2UgcHJlc2VudCBmb3IgdGhlIGN1cnJlbnQga2V5CiAg");
    sb.append("ICAgIGlmIChuZXh0ID09IG51bGwpIHsgLy8gdGhlIGl0ZW0gaXMgZ29pbmcgcG9vZgogICAgICAgIC8v");
    sb.append("IHRoZSBwcmlvciB2YWx1ZSBpcyBhbiBhcnJheSwgc28gd2UgbWF5IGhhdmUgc29tZSBzcGVjaWFsIHRo");
    sb.append("aW5ncyBhc3NvY2lhdGUgd2l0aCBpdAogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByaW9yKSkgeyAv");
    sb.append("LyBVTlRFU1QKICAgICAgICAgIGlmIChlS2V5IGluIHRyZWUpIHsKICAgICAgICAgICAgZGVsKHN1Yihz");
    sb.append("LCBlS2V5KSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWxldGUgdHJlZVtlS2V5XTsKICAgICAgICB9");
    sb.append("CiAgICAgICAgZGVsKHN1YihzLCBrZXkpKTsgLy8gaXNzdWUgYSBkZWxldGUgZm9yIGFsbCB0aGUgc3Vi");
    sb.append("c2NyaXB0aW9ucyBmb3IgdGhlIGtpZAogICAgICAgIGRlbGV0ZSB0cmVlW2tleV07IC8vIGRlbGV0ZSB0");
    sb.append("aGUgZGF0YSBpbiB0aGUgdHJlZQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0eXBlb2YgKG5leHQp");
    sb.append("ID09ICJvYmplY3QiICYmICFBcnJheS5pc0FycmF5KG5leHQpKSB7IC8vIGlmIHRoZSBkZWx0YSBpcyBh");
    sb.append("biBvYmplY3QKICAgICAgICAgIHZhciBhcnIgPSBBcnJheS5pc0FycmF5KHByaW9yKSB8fCAiQG8iIGlu");
    sb.append("IG5leHQgfHwgIkBzIiBpbiBuZXh0OyAvLyBkZXRlY3QgaWYgd2UgbmVlZCB0byB1c2UgYXJyYXkgbG9n");
    sb.append("aWMKICAgICAgICAgIGlmIChhcnIpIHsgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhcnJheQogICAgICAg");
    sb.append("ICAgICBpZiAoIShrZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSB0cmVlIGhhcyBh");
    sb.append("biBlbXB0eSBhcnJheQogICAgICAgICAgICAgIHRyZWVba2V5XSA9IFtdOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgIGlmICghKGVLZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSBzZWNy");
    sb.append("ZXQgZGF0YSBleGlzdHMgYXMgd2VsbAogICAgICAgICAgICAgIHRyZWVbZUtleV0gPSB7fTsKICAgICAg");
    sb.append("ICAgICAgICBpZiAoIkBvIiBpbiBuZXh0KSB7IC8vIGlmIHdlIGhhdmUgYSBidW5jaCBvZiBrZXlzLCB0");
    sb.append("aGVuIGxldCdzIG1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSB0aGF0IGZvciBtYWtlX2RlbHRhCiAgICAgICAg");
    sb.append("ICAgICAgICB0cmVlW2VLZXldWyJAbyJdID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("ICAgdHJlZVtlS2V5XS5fX2tleSA9IGtleTsgLy8gYW5ub3RhdGUgdGhlIG5ldyBpdGVtIHdpdGggdGhl");
    sb.append("IGdpdmVuIGtleQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBlQmFzZSA9IHRyZWVbZUtleV07");
    sb.append("IC8vIGdldCB0aGUgc2VjcmV0IChhbmQgcmVhbCkgZGF0YSBmb3IgdGhlIG9iamVjdCBpbiBxdWVzdGlv");
    sb.append("bgogICAgICAgICAgICB2YXIgZVN1YiA9IHN1YihzLCBrZXkpOyAvLyBzY29wZSB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIHRvIHRoZSBrZXkKICAgICAgICAgICAgdmFyIG9yZGVyaW5nID0gbnVsbDsgLy8gZGV0ZWN0aW9u");
    sb.append("IG9mIGlmIHdlIGhhdmUgQG8gb3JkZXJpbmcgdG8gcmVvcmRlciB0aGUgdmFsdWVzCiAgICAgICAgICAg");
    sb.append("IHZhciByZXNpemUgPSBudWxsOyAvLyBkZXRlY3Rpb24gb2YgYW4gYXJyYXkgd2l0aG91dCBfX2tleQog");
    sb.append("ICAgICAgICAgICB2YXIgZGVsYXkgPSB7fTsgLy8gd2UgZGVsYXkgYWxsIGV2ZW50cyBzdWNoIHRoYXQg");
    sb.append("dGhlIGFycmF5IGNhbiBiZSBidWlsdCBmb3IgaW5saW5lIG1ha2VfZGVsdGEgY2FsbHMgdG8gd29yawog");
    sb.append("ICAgICAgICAgICBmb3IgKHZhciBhS2V5IGluIG5leHQpIHsgLy8gZm9yIGVhY2ggZmllbGQgd2l0aGlu");
    sb.append("IHRoZSBkaWZmZXJlbmNlCiAgICAgICAgICAgICAgdmFyIHZhbCA9IG5leHRbYUtleV07CiAgICAgICAg");
    sb.append("ICAgICAgaWYgKGFLZXkgPT0gIkBvIikgeyAvLyB0aGUgdmFsdWUgaXMgYSBuZXcgb3JkZXJpbmcgb2Yg");
    sb.append("dGhlIGFycmF5CiAgICAgICAgICAgICAgICBvcmRlcmluZyA9IHZhbDsKICAgICAgICAgICAgICB9IGVs");
    sb.append("c2UgaWYgKGFLZXkgPT0gIkBzIikgeyAvLyB0aGUgdmFsdWUgaXMgYSByZXNpemUgb2YgdGhlIGFycmF5");
    sb.append("CiAgICAgICAgICAgICAgICByZXNpemUgPSB2YWw7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwg");
    sb.append("PT0gbnVsbCkgeyAvLyBkZWxldGUgdGhlIGVsZW1lbnQKICAgICAgICAgICAgICAgIGlmIChhS2V5IGlu");
    sb.append("IGVCYXNlKSB7IC8vIGlmIGl0IGV4aXN0cyB3aXRoaW4gdGhlIHNlY3JldCBrZXkKICAgICAgICAgICAg");
    sb.append("ICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICAgIGRlbChz");
    sb.append("dWIoZVN1YiwgeCkpOyAvLyBpc3N1ZSBkZWxldGVzCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVC");
    sb.append("YXNlW3hdOyAvLyBkZWxldGUgdGhlIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgZGVsX2tleShlU3Vi");
    sb.append("LCB4KTsgLy8gZGVsZXRlIHRoZSBrZXlzIGZyb20gdGhlIG9iamVjdAogICAgICAgICAgICAgICAgICAg");
    sb.append("IGZpcmVfZGVsKGVTdWIsIHgpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHdlIGhhdmUgZGF0YQogICAgICAgICAgICAgICAgaWYgKCEo");
    sb.append("YUtleSBpbiBlQmFzZSkpIHsgLy8gdGhlIGRhdGEgZGlkbid0IGV4aXN0LCBzbyBmaXJlIGFuIGFkZGl0");
    sb.append("aW9uIHRvIGV4dGVuZCB0aGUgc3Vic2NyaXB0aW9ucwogICAgICAgICAgICAgICAgICBmaXJlX2FkZChl");
    sb.append("U3ViLCBhS2V5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBuVmFsID0gbmV4");
    sb.append("dFthS2V5XTsgLy8gZ2V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKG5W");
    sb.append("YWwpID09ICJvYmplY3QiKSB7IC8vIGlmIHRoZSBuZXcgdmFsdWUgaXMgYW4gb2JqZWN0CiAgICAgICAg");
    sb.append("ICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRoZW4gbWFrZSBzdXJlIHRoZSBuZXcg");
    sb.append("aXRlbSBpcyB3aXRoaW4gdGhlIHNlY3JldCB0cmVlCiAgICAgICAgICAgICAgICAgICAgZUJhc2VbYUtl");
    sb.append("eV0gPSB7fTsKICAgICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XS5fX2tleSA9IGFLZXk7CiAgICAg");
    sb.append("ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkg");
    sb.append("ewogICAgICAgICAgICAgICAgICAgIG1lcmdlKGVCYXNlW3hdLCBuZXh0W3hdLCBzdWIoZVN1YiwgeCks");
    sb.append("IGV2ZW50cywgb3B0aW1hbCk7IC8vIHJlY3Vyc2U6IG1lcmdlIHRoZSBkaWZmZXJlbmNlIGludG8gdGhl");
    sb.append("IHNlY3JldCB0cmVlIGFuZCBwdWJsaXNoIHRvIGFsbCBlbGVtZW50IHN1YnNjcmlwdGlvbnMKICAgICAg");
    sb.append("ICAgICAgICAgICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAg");
    sb.append("ICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIHNldCB0aGUg");
    sb.append("dmFsdWUgaW50byB0aGUgdHJlZQogICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XSA9IG5WYWw7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIGRlbGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAg");
    sb.append("ICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAgICAgICAgICAg");
    sb.append("IH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBhbmQgdGVsbCBldmVyeW9uZSB0");
    sb.append("aGUgbmV3IHZhbHVlIGZvciB0aGlzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIHZhciBiZWZvcmUgPSB0cmVlW2tleV07IC8vIHN0YXNoIGEgcG9pbnRlciB0byB0aGUgYXJyYXkK");
    sb.append("ICAgICAgICAgICAgdmFyIGRlbGF5T3JkZXIgPSBbXTsKCiAgICAgICAgICAgIGlmIChvcmRlcmluZyAh");
    sb.append("PSBudWxsKSB7IC8vIGFuIG9yZGVyaW5nIGNoYW5nZSBpcyBoYXBwZW5pbmcKICAgICAgICAgICAgICB2");
    sb.append("YXIgYWZ0ZXIgPSBbXTsgLy8gd2Ugd2lsbCByZWJ1aWxkIHRoZSBhcnJheSBoZXJlCiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOyAvLyBhbmQgcmVjb3JkIHRoZSBrZXlzIGhlcmUKICAgICAgICAgICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IG9yZGVyaW5nLmxlbmd0aDsgaysrKSB7IC8vIGZvciBlYWNoIG9yZGVy");
    sb.append("aW5nIGluc3RydWN0aW9uCiAgICAgICAgICAgICAgICB2YXIgaW5zdHIgPSBvcmRlcmluZ1trXTsKICAg");
    sb.append("ICAgICAgICAgICAgIHZhciB0eXBlX2luc3RyID0gdHlwZW9mIChpbnN0cik7CiAgICAgICAgICAgICAg");
    sb.append("ICBpZiAodHlwZV9pbnN0ciA9PSAic3RyaW5nIiB8fCB0eXBlX2luc3RyID09ICJudW1iZXIiKSB7IC8v");
    sb.append("IGlmIHRoZSBpbnN0cnVjdGlvbiByZWZlcnMgdG8gYW4gaXRlbQogICAgICAgICAgICAgICAgICBhZnRl");
    sb.append("ci5wdXNoKGVCYXNlW2luc3RyXSk7IC8vIHB1c2ggdGhlIGl0ZW0gaW50byB0aGUgbmV3IGFycmF5CiAg");
    sb.append("ICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgaW5zdHIpOyAvLyByZWNvcmQgdGhlIGtleSBvZiB0");
    sb.append("aGUgaXRlbQogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCB0aGUgaW5zdHJ1Y3Rp");
    sb.append("b24gaXMgYSByYW5nZQogICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBpbnN0clswXTsKICAgICAg");
    sb.append("ICAgICAgICAgICAgdmFyIGVuZCA9IGluc3RyWzFdOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBq");
    sb.append("ID0gc3RhcnQ7IGogPD0gZW5kOyBqKyspIHsgLy8gaXRlcmF0ZSBvdmVyIHRoZSByYW5nZSBhbmQgY29w");
    sb.append("eQogICAgICAgICAgICAgICAgICAgIGlmIChiZWZvcmVbal0pIHsKICAgICAgICAgICAgICAgICAgICAg");
    sb.append("IGFmdGVyLnB1c2goYmVmb3JlW2pdKTsgLy8gdGhlIGl0ZW1zIGZyb20gdGhlIHByZXZpb3VzIGNvcHkK");
    sb.append("ICAgICAgICAgICAgICAgICAgICAgIG1zZy5wdXNoKGJlZm9yZVtqXS5fX2tleSk7IC8vIGFuZCBhbm5v");
    sb.append("dGF0ZSB0aGUga2V5cwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWxheU9yZGVyLnB1c2go");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgIn4iKSwgbXNnLCBldmVu");
    sb.append("dHMpOyAvLyB0ZWxsIHN1YnNjcmlwdGlvbnMgYWJvdXQgdGhlIG5ldyBvcmRlcmluZwogICAgICAgICAg");
    sb.append("ICAgIH0pOwogICAgICAgICAgICAgIHRyZWVba2V5XSA9IGFmdGVyOwogICAgICAgICAgICB9IGVsc2Ug");
    sb.append("aWYgKHJlc2l6ZSAhPSBudWxsKSB7IC8vIGFsdGVybmF0aXZlbHksIGFuIGFycmF5IHdpdGhvdXQga2V5");
    sb.append("cyBpcyBiZWluZyByZXNpemVkCiAgICAgICAgICAgICAgdmFyIGFmdGVyID0gW107CiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOwogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcmVzaXplOyBr");
    sb.append("KyspIHsgLy8gd2UgcmVidWlsZCB0aGUgYXJyYXkKICAgICAgICAgICAgICAgIGFmdGVyW2tdID0gZUJh");
    sb.append("c2VbIiIgKyBrXTsKICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgayk7CiAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgIGRlbGF5T3JkZXIucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAg");
    sb.append("ICBmaXJlKHN1YihlU3ViLCAifiIpLCBtc2csIGV2ZW50cyk7IC8vIHRlbGwgc3Vic2NyaXB0aW9ucyBh");
    sb.append("Ym91dCB0aGUgbmV3IG9yZGVyaW5nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdHJlZVtr");
    sb.append("ZXldID0gYWZ0ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChhS2V5IGluIGRlbGF5KSB7");
    sb.append("CiAgICAgICAgICAgICAgZGVsYXlbYUtleV0oYUtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBkZWxheU9yZGVyLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAg");
    sb.append("ZGVsYXlPcmRlcltrXSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpcmUoZVN1YiwgdHJlZVtr");
    sb.append("ZXldLCBldmVudHMpOyAvLyB0ZWxsIGV2ZXJ5b25lIGFib3V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghKGtleSBpbiB0cmVlKSB8fCB0eXBlb2YgKHRyZWVba2V5");
    sb.append("XSkgIT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgICB0cmVlW2tleV0gPSB7fTsKICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICB2YXIgZSA9IHN1YihzLCBrZXkpOwogICAgICAgICAgICBtZXJnZSh0cmVlW2tl");
    sb.append("eV0sIG5leHQsIGUsIGV2ZW50cywgb3B0aW1hbCk7CiAgICAgICAgICAgIGZpcmUoZSwgdHJlZVtrZXld");
    sb.append("LCBldmVudHMpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7IC8vIG5vdCBhbiBvYmplY3QsIHNv");
    sb.append("IGl0IGlzIGEgdmFsdWUKICAgICAgICAgIHRyZWVba2V5XSA9IG5leHQ7IC8vIHN0YXNoIHRoZSBuZXcg");
    sb.append("dmFsdWUKICAgICAgICAgIGZpcmUoc3ViKHMsIGtleSksIG5leHQsIGV2ZW50cyk7IC8vIGFuZCB0ZWxs");
    sb.append("IGV2ZXJ5b25lIGFib3V0IGl0CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmaXJlKHMsIHRyZWUs");
    sb.append("IGV2ZW50cyk7CiAgfTsKCiAgdmFyIGZpcmVfZXZlbnRzID0gZnVuY3Rpb24gKGV2ZW50cykgewogICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBldmVudHMubGVuZ3RoOyBrKyspIHsKICAgICAgZXZlbnRzW2tdKCk7");
    sb.append("CiAgICB9CiAgfTsKCiAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICB0aGlzLnVwZGF0");
    sb.append("ZXMgPSAwOwogIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhKSB7CiAgICB0aGlzLnVwZGF0ZV9p");
    sb.append("bl9wcm9ncmVzcyA9IHRydWU7CiAgICB0aGlzLnVwZGF0ZXMrKzsKICAgIHZhciBhcnIgPSBbXTsgLy8g");
    sb.append("Y29udmVydCB0aGUgc3Vic2NyaXB0aW9ucyBpbnRvIGFuIGFycmF5CiAgICBmb3IgKHZhciBrIGluIGFs");
    sb.append("bF9zdWJzY3JpcHRpb25zKSB7CiAgICAgIGFyci5wdXNoKGFsbF9zdWJzY3JpcHRpb25zW2tdKTsKICAg");
    sb.append("IH0KICAgIHZhciBldmVudHMgPSBbXTsKICAgIG1lcmdlKHJvb3QsIGRlbHRhLCBhcnIsIGV2ZW50cywg");
    sb.append("ZmFsc2UpOyAvLyBleGVjdXRlIHRoZSBtZXJnZSBhbmQgZmlyZSBldmVudHMKICAgIGZpcmVfZXZlbnRz");
    sb.append("KGV2ZW50cyk7CiAgICB3aGlsZSAodGhpcy5zdWJzY3JpYmVfZGVsYXkubGVuZ3RoID4gMCkgewogICAg");
    sb.append("ICB2YXIgY29weSA9IHRoaXMuc3Vic2NyaWJlX2RlbGF5OwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eSA9IFtdOwogICAgICB2YXIgZmxhdCA9IFtdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNvcHku");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICBpZiAoIWNvcHlba10uYWJvcnRlZCkgewogICAgICAgICAgZmxh");
    sb.append("dC5wdXNoKGNvcHlba10uc3ViKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZXZlbnRzID0gW107CiAg");
    sb.append("ICAgIG1lcmdlKHt9LCBtYWtlX29wdGltYWxfZGVsdGEocm9vdCwgZmxhdCksIGZsYXQsIGV2ZW50cywg");
    sb.append("dHJ1ZSk7IC8vIGV4ZWN1dGUgdGhlIG1lcmdlIGFuZCBmaXJlIGV2ZW50cwogICAgICBmaXJlX2V2ZW50");
    sb.append("cyhldmVudHMpOwogICAgfQogICAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICAgIHNl");
    sb.append("dHRsZSgpOwogIH07CgogIC8vIGZpeCB0aGUgY2FsbGJhY2sgc3RydWN0dXJlIGZyb20gdGhlIHVzZXIn");
    sb.append("cyBoYXBweSBsYW5kIHRvIHRoZSByaWdvciBvZiB0aGUgZm9ybWF0IG5lZWRlZAogIHZhciB0cmFuc2Zv");
    sb.append("cm1fY2FsbGJhY2tfaW50b19zdWIgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHN1YikgewogICAgaWYgKEFy");
    sb.append("cmF5LmlzQXJyYXkoY2FsbGJhY2spKSB7IC8vIGlmIHRoZSBjYWxsYmFjayBpcyBhbiBhcnJheSwgdGhl");
    sb.append("biBmbGF0dGVuIHRoZSBhcnJheSBpbnRvIHRoZSBuZXcgb2JqZWN0CiAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgY2FsbGJhY2subGVuZ3RoOyBrKyspIHsKICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50");
    sb.append("b19zdWIoY2FsbGJhY2tba10sIHN1Yik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxs");
    sb.append("YmFjaykgPT0gIm9iamVjdCIpIHsgLy8gb2gsIHRoZSBjYWxsYmFjayBpcyBhbiBvYmplY3QKICAgICAg");
    sb.append("Zm9yICh2YXIga2V5IGluIGNhbGxiYWNrKSB7IC8vIGl0ZXJhdGUgb3ZlciBlYWNoIGtleQogICAgICAg");
    sb.append("IGlmIChrZXkgPT0gIkBlIikgeyAvLyBmb3JjZSB0aGUgZnVuY3Rpb25zIHRvIG1lcmdlIHRvZ2V0aGVy");
    sb.append("CiAgICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIoY2FsbGJhY2tba2V5XSwgc3ViKTsK");
    sb.append("ICAgICAgICB9IGVsc2UgeyAvLyBub3JtYWwgZmxvdwogICAgICAgICAgaWYgKCEoa2V5IGluIHN1Yikp");
    sb.append("IHsgLy8gZGl2ZSBpbnRvIHRoZSBvYmplY3QgYW5kIG1ha2Ugc3VyZSB0aGUgc3Vic2NyaXB0aW9uIGhh");
    sb.append("cyB0aGUgZmllbGQKICAgICAgICAgICAgc3ViW2tleV0gPSB7fTsKICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IHRyYW5zZm9ybV9jYWxsYmFja19pbnRvX3N1YihjYWxsYmFja1trZXldLCBzdWJba2V5XSk7IC8vIHJl");
    sb.append("Y3Vyc2UgYW5kIHBhaXIgdGhlIGV2ZW50cyB0byB0aGUgbmV3IHN1YnNjcmlwdGlvbgogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgKGNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iKSB7IC8v");
    sb.append("IGl0J3MgYSBmdW5jdGlvbgogICAgICBpZiAoISgiQGUiIGluIHN1YikpIHsgLy8gbGV0J3MgZW5zdXJl");
    sb.append("IHRoZXJlIGlzIGFuIGV2ZW50IGxpc3QKICAgICAgICBzdWJbIkBlIl0gPSBbY2FsbGJhY2tdOwogICAg");
    sb.append("ICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIGp1c3QgYWRkIGl0CiAgICAgICAgc3ViWyJAZSJdLnB1c2go");
    sb.append("Y2FsbGJhY2spOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gY29udmVydCB0aGUgdHJlZSB0byBhIGRl");
    sb.append("bHRhOyB0aGlzIHRyZWUgaXMgYXNzdW1lZCB0byBoYXZlIGJlZW4gbWVyZ2VkIGFscmVhZHkKICB2YXIg");
    sb.append("bWFrZV9kZWx0YSA9IGZ1bmN0aW9uIChzdCkgewogICAgdmFyIGRlbHRhID0ge307IC8vIHRoZSBkZWx0");
    sb.append("YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsgaW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhp");
    sb.append("biB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19r");
    sb.append("ZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQogICAgICB2YXIgdiA9IHN0W2tdOwogICAgICBpZiAo");
    sb.append("KCIjIiArIGspIGluIHN0KSB7IC8vIHRoZSByZXN1bHQgaXMgYW4gYXJyYXkKICAgICAgICB2YXIgcHYg");
    sb.append("PSBzdFsnIycgKyBrXTsKICAgICAgICB2YXIgZCA9IHt9OwogICAgICAgIGlmICgiQG8iIGluIHB2KSB7");
    sb.append("IC8vIGFuZCB3ZSBoYXZlIGEgc3BlY2lmaWMgb3JkZXJpbmcgdG8gbWVtb2l6ZQogICAgICAgICAgdmFy");
    sb.append("IG8gPSBbXTsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgeyAvLyBj");
    sb.append("b3B5IHRoZSBlbGVtZW50cyBmcm9tIHRoZSBhcnJheQogICAgICAgICAgICB2YXIgdmogPSB2W2pdOwog");
    sb.append("ICAgICAgICAgICBpZiAodmopIHsKICAgICAgICAgICAgICBkW3ZqLl9fa2V5XSA9IG1ha2VfZGVsdGEo");
    sb.append("dmopOyAvLyB1c2luZyB0aGUgX19rZXkgZW1iZWRkZWQgaW4gdGhlIG9iamVjdAogICAgICAgICAgICAg");
    sb.append("IG8ucHVzaCh2W2pdLl9fa2V5KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZFsi");
    sb.append("QG8iXSA9IG87CiAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlOyByZWNvcmQgdGhlIHNpemUgYXMg");
    sb.append("d2UgcmVjdXJzZQogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7CiAg");
    sb.append("ICAgICAgICAgIGRbIiIgKyBqXSA9IG1ha2VfZGVsdGEocHZbal0pOwogICAgICAgICAgfQogICAgICAg");
    sb.append("ICAgZFsiQHMiXSA9IHYubGVuZ3RoOwogICAgICAgIH0KICAgICAgICBkZWx0YVtrXSA9IGQ7CiAgICAg");
    sb.append("IH0gZWxzZSBpZiAodHlwZW9mICh2KSA9PSAib2JqZWN0IikgeyAvLyBpdCdzIGp1c3QgYW4gb2JqZWN0");
    sb.append("LCBzbyByZWN1cnNlIGRpcmVjdGx5CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHsKICAgICAg");
    sb.append("ICAgIHZhciBkID0ge307CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHYubGVuZ3RoOyBqKysp");
    sb.append("IHsKICAgICAgICAgICAgZFsiIiArIGpdID0gbWFrZV9kZWx0YSh2W2pdKTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIGRbIkBzIl0gPSB2Lmxlbmd0aDsKICAgICAgICAgIGRlbHRhW2tdID0gZDsKICAgICAgICB9");
    sb.append("IGVsc2UgewogICAgICAgICAgZGVsdGFba10gPSBtYWtlX2RlbHRhKHYpOwogICAgICAgIH0KICAgICAg");
    sb.append("fSBlbHNlIHsgLy8gZmluYWxseSwgaXQgaXMgYSB2YWx1ZSBzbyBqdXN0IHNldCBpdAogICAgICAgIGRl");
    sb.append("bHRhW2tdID0gdjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGRlbHRhOwogIH07CiAgdGhpcy5NYWtl");
    sb.append("RGVsdGEgPSBtYWtlX2RlbHRhOwoKICB2YXIgbWFrZV9vcHRpbWFsX2RlbHRhID0gZnVuY3Rpb24oc3Qs");
    sb.append("IHN1YnMpIHsKICAgIHZhciBmaWx0ZXIgPSB7fTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc3Vicy5s");
    sb.append("ZW5ndGg7IGsrKykgewogICAgICB2YXIgcyA9IHN1YnNba107CiAgICAgIGlmICh0eXBlb2YocykgPT0g");
    sb.append("ImZ1bmN0aW9uIikgewogICAgICAgIC8vIGZhbGxiYWNrIHdoZW4gdGhlIGhpZ2ggbGV2ZWwgaXMgYSBm");
    sb.append("dW5jdGlvbiAod2UgbmVlZCBpdCBhbGwhKQogICAgICAgIHJldHVybiBtYWtlX2RlbHRhKHN0KTsKICAg");
    sb.append("ICAgfSBlbHNlIGlmICh0eXBlb2YocykgPT0gIm9iamVjdCIpIHsKICAgICAgICBmb3IgKHZhciBqIGlu");
    sb.append("IHMpIHsKICAgICAgICAgIGZpbHRlcltqXSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAg");
    sb.append("ICB2YXIgbmV3X3N0ID0ge307IC8vIHRoZSBkZWx0YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsg");
    sb.append("aW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhpbiB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09");
    sb.append("ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19rZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQog");
    sb.append("ICAgICBpZiAoayBpbiBmaWx0ZXIpIHsKICAgICAgICBuZXdfc3Rba10gPSBzdFtrXTsKICAgICAgICBp");
    sb.append("ZiAoKCIjIiArIGspIGluIHN0KSB7CiAgICAgICAgICBuZXdfc3RbIiMiICsga10gPSBzdFsiIyIgKyBr");
    sb.append("XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtYWtlX2RlbHRhKG5ld19zdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdWJzY3JpYmVfZGVsYXkgPSBbXTsKCiAgLy8gYHN1YnNjcmliZWAgdGhlIGdpdmVu");
    sb.append("IHN0cnVjdHVyYWwgY2FsbGJhY2sKICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykg");
    sb.append("ewogICAgdmFyIHN1YiA9IHt9OwogICAgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViKGNhbGxiYWNr");
    sb.append("LCBzdWIpOyAgLy8gdHJhbnNmb3JtIHRoZSBjYWxsYmFjayBpbnRvIGEgc2FmZSBjYWxsYmFjawogICAg");
    sb.append("dmFyIFMgPSAiIiArIGlkKys7IC8vIGNyZWF0ZSBhbiBpZCBmb3IgdGhlIHN1YnNjcmlwdGlvbgogICAg");
    sb.append("YWxsX3N1YnNjcmlwdGlvbnNbU10gPSBzdWI7IC8vIHJlY29yZCB0aGUgc3Vic2NyaXB0aW9uCiAgICBp");
    sb.append("ZiAodGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MpIHsKICAgICAgdmFyIHNtID0ge307CiAgICAgIHNtLnN1");
    sb.append("YiA9IHN1YjsKICAgICAgc20uYWJvcnRlZCA9IGZhbHNlOwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eS5wdXNoKHNtKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHNtLmFib3J0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIGRlbGV0ZSBhbGxfc3Vic2NyaXB0aW9uc1tTXTsKICAgICAgfTsKICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHZhciBkZWx0YSA9IG1ha2Vfb3B0aW1hbF9kZWx0YShyb290LCBbc3ViXSk7CiAgICAg");
    sb.append("IHZhciBldmVudHMgPSBbXTsKICAgICAgbWVyZ2Uoe30sIGRlbHRhLCBbc3ViXSwgZXZlbnRzLCB0cnVl");
    sb.append("KTsgLy8gZXhlY3V0ZSB0aGUgY2FsbGJhY2sgbm93IG9uIGEgY2FsbGJhY2sgb2YgYWxsIGRhdGEgdG8g");
    sb.append("ZmlyZSBldmVudHMgYW5kIGZpbGwgdGhlIHN1YnNjcmlwdGlvbiBvYmplY3QKICAgICAgZmlyZV9ldmVu");
    sb.append("dHMoZXZlbnRzKTsKICAgICAgaWYgKHRoaXMudXBkYXRlcyA+IDApIHsKICAgICAgICBzZXR0bGUoKTsK");
    sb.append("ICAgICAgfQogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyAvLyByZXR1cm4gYSBtZXRob2QgdG8gdW5z");
    sb.append("dWJzY3JpYmUKICAgICAgICBkZWxldGUgYWxsX3N1YnNjcmlwdGlvbnNbU107CiAgICAgIH07CiAgICB9");
    sb.append("CiAgfTsKCiAgdGhpcy5hZGRfb25fc2V0dGxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBp");
    sb.append("ZCA9IHNldHRsZUlkKys7CiAgICBzZXR0bGVtZW50c1tpZF0gPSBjYWxsYmFjazsKICB9Owp9");
    return sb.toString();
  }
  public static final String DEBUGGER = new String(Base64.getDecoder().decode(make_debugger()), StandardCharsets.UTF_8);
  private static String make_debugger() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIFRoZSBBbWF6aW5nIEludGVybmFsIERlYnVnZ2VyIGZvciBSeEhUTUwgQ29ubmVjdGlvbiAqLwpB");
    sb.append("ZGFtYS5EZWJ1Z2dlciA9IChmdW5jdGlvbigpIHsKICB2YXIgc2VsZiA9IHt9OwogIHNlbGYuc2hvd24g");
    sb.append("PSBmYWxzZTsKICB2YXIgY29ubmVjdGlvbnMgPSB7fTsKICB2YXIgY3VycmVudCA9IG51bGw7CgogIC8q");
    sb.append("KiBIZWxwZXIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCAqLwogIHZhciBudWtl");
    sb.append("ID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAg");
    sb.append("d2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0g");
    sb.append("cGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwoKICAvKiogSGVscGVyIHwgY3JlYXRlIGEgc2ltcGxl");
    sb.append("IGVsZW1lbnQgd2l0aCB0aGUgZ2l2ZW4gY29udGVudCBhcyB0aGUgaW5uZXJIVE1MICovCiAgdmFyIHNp");
    sb.append("bXBsZSA9IGZ1bmN0aW9uKHRhZywgY29udGVudCkgewogICAgdmFyIGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KHRhZyk7CiAgICBkLmlubmVySFRNTCA9IGNvbnRlbnQ7CiAgICByZXR1cm4gZDsKICB9Cgog");
    sb.append("IHZhciBidXR0b25TdHlsZSA9ICJiYWNrZ3JvdW5kOiMzMzM7IGJvcmRlcjogMXB4IHNvbGlkICNmMDA7");
    sb.append("IGNvbG9yOiNmZmY7IHBhZGRpbmc6M3B4OyBtYXJnaW46M3B4OyBib3JkZXItcmFkaXVzOiAzcHg7IjsK");
    sb.append("ICB2YXIgaW5wdXRTdHlsZSA9ICJiYWNrZ3JvdW5kOiNlZWU7IGNvbG9yOiMwMDA7IjsKICB2YXIgcGx1");
    sb.append("c1NWRyA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9u");
    sb.append("ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjNzdk");
    sb.append("NjU2XCIgc3R5bGU9XCJ3aWR0aDoxOHB4OyBoZWlnaHQ6MThweDtcIj48cGF0aCBzdHJva2UtbGluZWNh");
    sb.append("cD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTEyIDl2Nm0zLTNIOW0xMiAw");
    sb.append("YTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+PC9zdmc+IjsKICB2YXIgbWludXNTVkcgPSAi");
    sb.append("PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3");
    sb.append("Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2YwMFwiIHN0eWxl");
    sb.append("PVwid2lkdGg6MThweDsgaGVpZ2h0OjE4cHg7XCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwi");
    sb.append("IHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk0xNSAxMkg5bTEyIDBhOSA5IDAgMTEtMTggMCA5");
    sb.append("IDkgMCAwMTE4IDB6XCIgLz48L3N2Zz4iOwoKICAvLyB3ZSBhcmUgZ29pbmcgdG8gY3JlYXRlIGEgZG9j");
    sb.append("dW1lbnQKICB2YXIgdmlld0pzb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICB2YXIg");
    sb.append("dmlld0NoYW5uZWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgogIHZpZXdKc29uLnN0");
    sb.append("eWxlID0gImZvbnQtZmFtaWx5OiBcIkpldEJyYWlucyBNb25vXCIsIHNvdXJjZS1jb2RlLXBybywgTWVu");
    sb.append("bG8sIE1vbmFjbywgQ29uc29sYXMsIG1vbm9zcGFjZTsgZm9udC1zaXplOiAxNHB4OyBjb2xvcjogI2Zm");
    sb.append("ZjsgYmFja2dyb3VuZC1jb2xvcjogIzAwMDsgd2lkdGg6MTAwJSIKICB2aWV3Q2hhbm5lbHMuc3R5bGUg");
    sb.append("PSAiZm9udC1mYW1pbHk6IFwiSmV0QnJhaW5zIE1vbm9cIiwgc291cmNlLWNvZGUtcHJvLCBNZW5sbywg");
    sb.append("TW9uYWNvLCBDb25zb2xhcywgbW9ub3NwYWNlOyBmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjZmZmOyBi");
    sb.append("YWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB3aWR0aDoxMDAlIgoKICAvKiogUmVmbGVjdGlvbiB8IGdpdmVu");
    sb.append("IGEgcmVmbGVjdGVkIHR5cGUsIGV4dHJhY3QgdGhlIHN0cnVjdHVyZSB0eXBlICoqLwogIHZhciBleHRy");
    sb.append("YWN0U3RydWN0dXJlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIHR5cGVzKSB7CiAgICBpZiAodHlwZS5uYXR1");
    sb.append("cmUgPT0gInJlYWN0aXZlX3JlZiIgfHwgdHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV9yZWYiKSB7CiAgICAg");
    sb.append("IHJldHVybiBleHRyYWN0U3RydWN0dXJlVHlwZSh0eXBlc1t0eXBlLnJlZl0sIHR5cGVzKTsKICAgIH0K");
    sb.append("ICAgIGlmICh0eXBlLm5hdHVyZSA9PSAicmVhY3RpdmVfcmVjb3JkIiB8fCB0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIHJldHVybiB0eXBlOwogICAgfQogICAgcmV0dXJuIG51bGw7");
    sb.append("CiAgfQoKICAvKiogVHJlZVZpZXcgfCBHaXZlbiBhIHR5cGUgKGFuZCBhIHR5cGUgZm9yZXN0KSBjcmVh");
    sb.append("dGUgYSAnbmFtZWQnIGRvbSBlbGVtZW50CiAgICogIGFsb25nIHdpdGggYW4gdXBkYXRlIGRlbHRhLiBU");
    sb.append("aGUgdXBkYXRlIGRlbHRhIGlzIGEgZnVuY3Rpb25hbCAob3Igc3RydWN0dXJhbCBmdW5jdGlvbmFsKQog");
    sb.append("ICAqICBjbG9zdXJlIHRoYXQgd2lsbCB1cGRhdGUgdGhlIGRvbSBlbGVtZW50IHN1Y2ggdGhhdCBpdCBj");
    sb.append("YW4gYmUgYXR0YWNoZWQgdG8gYW4gQWRhbWEgVHJlZSAqLwogIHZhciBjb252ZXJ0VHlwZVRvRG9tRGVs");
    sb.append("dGEgPSBmdW5jdGlvbih0eXBlLCB0eXBlcykgewogICAgaWYgKHR5cGUubmF0dXJlID09ICJyZWFjdGl2");
    sb.append("ZV9yZWYiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfcmVmIikgewogICAgICAvLyBnbyB0byB0aGUg");
    sb.append("Zm9yZXN0IGFuZCB0dXJuIHRoZSByZWYgaW50byBhIG1hbmlmZXN0ZWQgdHlwZQogICAgICByZXR1cm4g");
    sb.append("Y29udmVydFR5cGVUb0RvbURlbHRhKHR5cGVzW3R5cGUucmVmXSwgdHlwZXMpOwogICAgfQogICAgaWYg");
    sb.append("KHR5cGUubmF0dXJlID09ICJuYXRpdmVfbWF5YmUiIHx8IHR5cGUubmF0dXJlID09ICJyZWFjdGl2ZV9t");
    sb.append("YXliZSIpIHsKICAgICAgLy8gYSBtYXliZSBpcyBqdXN0IGEgd3JhcHBlciBhcm91bmQgYW5vdGhlciB0");
    sb.append("eXBlIHRoYXQgY2FuIG51bGwgb3V0CiAgICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJzcGFuIik7CiAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZS50eXBl");
    sb.append("LCB0eXBlcyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOiBkb20sCiAgICAgICAgbmFtZTogIm1h");
    sb.append("eWJlJmx0OyIgKyByZXN1bHQubmFtZSArICImZ3Q7IiwKICAgICAgICB1cGRhdGU6IFtyZXN1bHQudXBk");
    sb.append("YXRlLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgbnVrZShkb20pOwogICAgICAgICAgaWYgKHZh");
    sb.append("bHVlID09IG51bGwpIHsKICAgICAgICAgICAgZG9tLmlubmVySFRNTCA9ICI8aT5udWxsPC9pPiI7CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb20uYXBwZW5kKHJlc3VsdC5kb20pOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH1dCiAgICAgIH07CiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0gIm5hdGl2");
    sb.append("ZV9saXN0IiB8fCB0eXBlLm5hdHVyZSA9PSAibmF0aXZlX2FycmF5IikgewogICAgICAvLyB0aGlzIGlz");
    sb.append("IHRoZSBtb3N0IGNvbXBsZXggdHlwZSBhcyBpdCByZXF1aXJlcyBhIGRpZmZlcmVudGlhbCBzdHJ1Y3R1");
    sb.append("cmUuCgogICAgICAvLyB3ZSBjcmVhdGUgYSBkdW1teSB0byBnZXQgdGhlIG5hbWUgb2YgdGhlIHR5cGUK");
    sb.append("ICAgICAgdmFyIGR1bW15ID0gY29udmVydFR5cGVUb0RvbURlbHRhKHR5cGUudHlwZSwgdHlwZXMpOwoK");
    sb.append("ICAgICAgLy8gc28sIHdlIGhhdmUgdHdvIGNvbnNpZGVyYXRpb25zLiBGaXJzdCwgaXMgdGhpcyBhIGxp");
    sb.append("c3Qgb2Ygc3RydWN0dXJlcyBPUiBhIGxpc3Qgb2YgdmFsdWVzLgogICAgICB2YXIgcmVjb3JkVHlwZSA9");
    sb.append("IGV4dHJhY3RTdHJ1Y3R1cmVUeXBlKHR5cGUudHlwZSwgdHlwZXMpOwogICAgICBpZiAocmVjb3JkVHlw");
    sb.append("ZSAhPSBudWxsKSB7CiAgICAgICAgLy8gaXQgaXMgYSBsaXN0IG9mIHN0cnVjdHVyZXMsIHNvIHdlIHdh");
    sb.append("bnQgdG8gY3JlYXRlIGEgbmljZSBsb29raW5nIHRhYmxlIHdpdGggcGFnaW5hdGlvbiEKICAgICAgICB2");
    sb.append("YXIgdGFibGVDb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB2");
    sb.append("YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICB0YWJs");
    sb.append("ZUNvbnRyb2xzLmFwcGVuZChzaG93aGlkZSk7CgogICAgICAgIHZhciB0YWJsZUhvbGRlciA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CiAgICAgICAgdGFibGVDb250cm9scy5hcHBlbmQodGFi");
    sb.append("bGVIb2xkZXIpOwogICAgICAgIHZhciB0YWJsZUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo");
    sb.append("InRoZWFkIik7CiAgICAgICAgdGFibGVIb2xkZXIuYXBwZW5kKHRhYmxlSGVhZGVyKTsKICAgICAgICB2");
    sb.append("YXIgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5hcHBlbmQoaGVhZGVyUm93KTsKICAgICAgICB2YXIgY29sb3JTdHlsZSA9ICJib3JkZXI6IDFw");
    sb.append("eCBzb2xpZCAjM2I1NGRhOyI7CiAgICAgICAgZm9yICh2YXIgZmllbGROYW1lIGluIHJlY29yZFR5cGUu");
    sb.append("ZmllbGRzKSB7CiAgICAgICAgICB2YXIgZmllbGQgPSByZWNvcmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVd");
    sb.append("OwogICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBmaWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgIGNv");
    sb.append("bnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21E");
    sb.append("ZWx0YShmaWVsZC50eXBlLCB0eXBlcyk7CiAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJ0ZCIpOwogICAgICAgICAgdGQuaW5uZXJIVE1MID0gcmVzdWx0Lm5hbWUgKyAiICIgKyBm");
    sb.append("aWVsZE5hbWU7CiAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kKHRkKTsKICAgICAgICAgIHRkLnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZSArICJwYWRkaW5nLWxlZnQ6IDAuNWVtOyBwYWRkaW5nLXJpZ2h0OiAwLjVlbTsi");
    sb.append("CiAgICAgICAgfQogICAgICAgIHRhYmxlSG9sZGVyLnN0eWxlID0gY29sb3JTdHlsZSArICJwYWRkaW5n");
    sb.append("OiAwLjVlbTsgbWFyZ2luOjAuNWVtOyBkaXNwbGF5Om5vbmUiCiAgICAgICAgaGVhZGVyUm93LnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZTsKICAgICAgICB2YXIgdGFibGVCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgidGJvZHkiKTsKICAgICAgICB0YWJsZUhvbGRlci5hcHBlbmQodGFibGVCb2R5KTsKICAgICAgICB2");
    sb.append("YXIgcm93c0J5S2V5ID0ge307CiAgICAgICAgdmFyIHBhZ2luZyA9IHsKICAgICAgICAgIHNob3duOmZh");
    sb.append("bHNlLAogICAgICAgICAgb3JkZXI6W10sCiAgICAgICAgICBwYWdlOiAwLAogICAgICAgICAgcGFnZV9s");
    sb.append("aW1pdDogMTAsCiAgICAgICAgfTsKICAgICAgICB2YXIgY29udHJvbGxlciA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB0YWJsZUNvbnRyb2xzLmFwcGVuZChjb250cm9sbGVyKTsK");
    sb.append("ICAgICAgICBwYWdpbmcucmVmb3JtID1mdW5jdGlvbigpIHsKICAgICAgICAgIG51a2UodGFibGVCb2R5");
    sb.append("KTsKICAgICAgICAgIHZhciBzdGFydCA9IE1hdGgubWluKHRoaXMucGFnZSAqIHRoaXMucGFnZV9saW1p");
    sb.append("dCwgdGhpcy5vcmRlci5sZW5ndGggLSB0aGlzLnBhZ2VfbGltaXQpOwogICAgICAgICAgZm9yICh2YXIg");
    sb.append("YXQgPSBzdGFydDsgYXQgPCBzdGFydCArIHBhZ2luZy5wYWdlX2xpbWl0OyBhdCsrKSB7CiAgICAgICAg");
    sb.append("ICAgIHZhciByb3cgPSByb3dzQnlLZXlbcGFnaW5nLm9yZGVyW2F0XV07CiAgICAgICAgICAgIGlmIChy");
    sb.append("b3cpIHsKICAgICAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kKHJvdyk7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIG51a2UoY29udHJvbGxlcik7CiAgICAgICAgICBpZiAodGhpcy5zaG93");
    sb.append("bikgewogICAgICAgICAgICB2YXIgcGFnZXMgPSB0aGlzLm9yZGVyLmxlbmd0aCAvIHRoaXMucGFnZV9s");
    sb.append("aW1pdDsKICAgICAgICAgICAgaWYgKHBhZ2VzID4gMSkgewogICAgICAgICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgcGFnZXM7IGsrKykgewogICAgICAgICAgICAgICAgdmFyIGdvdG9QYWdlID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgICAgICAgICBnb3RvUGFnZS5zdHlsZSA9");
    sb.append("IGJ1dHRvblN0eWxlOwogICAgICAgICAgICAgICAgZ290b1BhZ2UuaW5uZXJIVE1MID0gIltQRzoiICsg");
    sb.append("ayArICJdIjsKICAgICAgICAgICAgICAgIGdvdG9QYWdlLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIHRoaXMucGFnaW5nLnBhZ2UgPSB0aGlzLnBnOwogICAgICAgICAgICAgICAg");
    sb.append("ICB0aGlzLnBhZ2luZy5yZWZvcm0oKTsKICAgICAgICAgICAgICAgIH0uYmluZCh7cGFnaW5nOiB0aGlz");
    sb.append("LCBwZzoga30pOwogICAgICAgICAgICAgICAgY29udHJvbGxlci5hcHBlbmQoZ290b1BhZ2UpOwogICAg");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2hvd2hpZGUuaW5u");
    sb.append("ZXJIVE1MID0gdGhpcy5zaG93biA/IG1pbnVzU1ZHIDogcGx1c1NWRzsKICAgICAgICAgIHNob3doaWRl");
    sb.append("Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5zaG93biA9ICF0aGlzLnNob3du");
    sb.append("OwogICAgICAgICAgICBpZiAodGhpcy5zaG93bikgewogICAgICAgICAgICAgIHRhYmxlSG9sZGVyLnN0");
    sb.append("eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMu");
    sb.append("cmVmb3JtKCk7CiAgICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgICAgfS5iaW5kKHBhZ2luZyk7CgoK");
    sb.append("ICAgICAgICByZXR1cm4gewogICAgICAgICAgZG9tOiB0YWJsZUNvbnRyb2xzLAogICAgICAgICAgbmFt");
    sb.append("ZTogImxpc3QmbHQ7IiArIGR1bW15Lm5hbWUgKyAiJmd0OyIsCiAgICAgICAgICB1cGRhdGU6IHsKICAg");
    sb.append("ICAgICAgICAgJysnOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgdmFyIHJvdyA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7CiAgICAgICAgICAgICAgcm93c0J5S2V5W2tleV0gPSByb3c7");
    sb.append("CiAgICAgICAgICAgICAgdmFyIGRlbHRhID0ge307CiAgICAgICAgICAgICAgZm9yICh2YXIgZmllbGRO");
    sb.append("YW1lIGluIHJlY29yZFR5cGUuZmllbGRzKSB7CiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSByZWNv");
    sb.append("cmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBm");
    sb.append("aWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShmaWVsZC50");
    sb.append("eXBlLCB0eXBlcyk7CiAgICAgICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJ0ZCIpOwogICAgICAgICAgICAgICAgdGQuc3R5bGUgPSBjb2xvclN0eWxlICsgInBhZGRpbmc6IDAu");
    sb.append("MjVlbTsgdGV4dC1hbGlnbjp0b3AiOwogICAgICAgICAgICAgICAgdGQuYXBwZW5kKHJlc3VsdC5kb20p");
    sb.append("OwogICAgICAgICAgICAgICAgcm93LmFwcGVuZCh0ZCk7CiAgICAgICAgICAgICAgICBkZWx0YVtmaWVs");
    sb.append("ZE5hbWVdID0gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJu");
    sb.append("IGRlbHRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnLSc6IGZ1bmN0aW9uIChrZXkpIHsKICAg");
    sb.append("ICAgICAgICAgICB2YXIgZG9tID0gcm93c0J5S2V5W2tleV07CiAgICAgICAgICAgICAgdGFibGVCb2R5");
    sb.append("LnJlbW92ZShkb20pOwogICAgICAgICAgICAgIGRlbGV0ZSByb3dzQnlLZXlba2V5XTsKICAgICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAgICAgICBpZiAo");
    sb.append("b3JkZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcGFnaW5nLm9yZGVyID0gb3JkZXI7CiAgICAg");
    sb.append("ICAgICAgICAgICBwYWdpbmcucmVmb3JtKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIG5vdCBhIHJlY29yZCwg");
    sb.append("c28gd2UgdXNlIGEgc2ltcGxlIGxpc3QKICAgICAgICB2YXIgbGlzdEhvbGRlciA9IGRvY3VtZW50LmNy");
    sb.append("ZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHZhciBkb21CeUtleSA9IHt9OwogICAgICAgIHJldHVy");
    sb.append("biB7CiAgICAgICAgICBkb206IGxpc3RIb2xkZXIsCiAgICAgICAgICBuYW1lOiAibGlzdDwiICsgZHVt");
    sb.append("bXkubmFtZSArICI+IiwKICAgICAgICAgIHVwZGF0ZTogewogICAgICAgICAgICAnKyc6IGZ1bmN0aW9u");
    sb.append("IChrZXkpIHsKICAgICAgICAgICAgICB2YXIgaXRlbUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoInNwYW4iKTsKICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udmVydFR5cGVUb0RvbURlbHRh");
    sb.append("KHR5cGUudHlwZSwgdHlwZXMpOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHJlc3VsdC5k");
    sb.append("b20pOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHNpbXBsZSgic3BhbiIsICIsICIpKTsK");
    sb.append("ICAgICAgICAgICAgICBkb21CeUtleVtrZXldID0gaXRlbUhvbGRlcjsKICAgICAgICAgICAgICByZXR1");
    sb.append("cm4gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJy0nOiBmdW5jdGlvbiAo");
    sb.append("a2V5KSB7CiAgICAgICAgICAgICAgdmFyIGRvbSA9IGRvbUJ5S2V5W2tleV07CiAgICAgICAgICAgICAg");
    sb.append("bGlzdEhvbGRlci5yZW1vdmUoZG9tKTsKICAgICAgICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsK");
    sb.append("ICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlLm5hdHVy");
    sb.append("ZSA9PSAicmVhY3RpdmVfdmFsdWUiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfdmFsdWUiKSB7CiAg");
    sb.append("ICAgIC8vIGl0J3MganVzdCBkYXRhLCBzbyBjcmVhdGUgYSBzaW5nbGUgbm9kZSB0byBkcmF3IGl0CiAg");
    sb.append("ICAgIHZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICBpdGVtLmlu");
    sb.append("bmVySFRNTCA9ICJudWxsIjsKICAgICAgaXRlbS5zdHlsZSA9ICJjb2xvcjogIzc3YTVmZjsiOwogICAg");
    sb.append("ICB2YXIgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZTsgfTsK");
    sb.append("ICAgICAgaWYgKHR5cGUudHlwZSA9PSAic3RyaW5nIikgewogICAgICAgIGl0ZW0uc3R5bGUgPSAiY29s");
    sb.append("b3I6ICM3N2Q2NTYiOwogICAgICAgIHVwZGF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW0uaW5uZXJI");
    sb.append("VE1MID0gIlwiIiArIHZhbHVlICsgIlwiIjsgfTsKICAgICAgfSBlbHNlIGlmICh0eXBlLnR5cGUgPT0g");
    sb.append("InByaW5jaXBhbCIpIHsKICAgICAgICBpdGVtLnN0eWxlID0gImNvbG9yOiAjQkE4M0ZGOyI7CiAgICAg");
    sb.append("ICAgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZSAhPSBudWxs");
    sb.append("ID8gKHZhbHVlLmFnZW50ICsgIkAiICsgdmFsdWUuYXV0aG9yaXR5KSA6ICJudWxsIjsgfTsKICAgICAg");
    sb.append("fSBlbHNlIGlmICh0eXBlLnR5cGUgPT0gImJvb2wiKSB7CiAgICAgICAgaXRlbS5zdHlsZSA9ICJjb2xv");
    sb.append("cjogI0U4M0IzQjsiOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOml0ZW0sCiAgICAg");
    sb.append("ICAgbmFtZTogdHlwZS50eXBlLAogICAgICAgIHVwZGF0ZTogdXBkYXRlCiAgICAgIH07CiAgICB9CiAg");
    sb.append("ICBpZiAodHlwZS5uYXR1cmUgPT0gInJlYWN0aXZlX3JlY29yZCIgfHwgdHlwZS5uYXR1cmUgPT0gIm5h");
    sb.append("dGl2ZV9tZXNzYWdlIikgewogICAgICAvLyBpdCdzIGEgc3RydWN0dXJlLCBzbyBsZXQncyBjcmVhdGUg");
    sb.append("YSByZWNvcmQgdGhhdCBjYW4gc2hvdy9oaWRlCiAgICAgIHZhciBvYmpfaG9sZGVyID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICB2YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJidXR0b24iKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoc2hvd2hpZGUpOwogICAgICBv");
    sb.append("YmpfaG9sZGVyLnNob3dHcm91cCA9IHR5cGUubmFtZSAhPSAiUm9vdCI7CgogICAgICB2YXIgZ3JvdXAg");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoZ3Jv");
    sb.append("dXApOwogICAgICBncm91cC5hcHBlbmQoc2ltcGxlKCJkaXYiLCAieyIpKTsKICAgICAgdmFyIGNoaWxk");
    sb.append("cmVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKICAgICAgZ3JvdXAuYXBwZW5kKGNoaWxk");
    sb.append("cmVuKTsKICAgICAgZ3JvdXAuYXBwZW5kKHNpbXBsZSgiZGl2IiwgIn0iKSk7CiAgICAgIGdyb3VwLnN0");
    sb.append("eWxlID0gInBhZGRpbmctbGVmdDoxMHB4IjsKICAgICAgY2hpbGRyZW4uc3R5bGUgPSAicGFkZGluZy1s");
    sb.append("ZWZ0OjEwcHg7IjsKICAgICAgc2hvd2hpZGUub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgIG9i");
    sb.append("al9ob2xkZXIuc2hvd0dyb3VwID0gISBvYmpfaG9sZGVyLnNob3dHcm91cDsKICAgICAgICBpZiAob2Jq");
    sb.append("X2hvbGRlci5zaG93R3JvdXApIHsKICAgICAgICAgIGdyb3VwLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAg");
    sb.append("ICAgICAgIHNob3doaWRlLmlubmVySFRNTCA9IG1pbnVzU1ZHOwogICAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgICBncm91cC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgc2hvd2hpZGUuaW5uZXJI");
    sb.append("VE1MID0gcGx1c1NWRzsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNob3doaWRlLm9uY2xpY2soKTsK");
    sb.append("CiAgICAgIHZhciBkZWx0YSA9IHt9OwogICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gdHlwZS5maWVs");
    sb.append("ZHMpIHsKICAgICAgICB2YXIgZmllbGQgPSB0eXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgIGlm");
    sb.append("ICgicHJpdmF0ZSIgPT0gZmllbGQucHJpdmFjeSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAg");
    sb.append("fQogICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEoZmllbGQudHlwZSwgdHlw");
    sb.append("ZXMpOwogICAgICAgIHZhciBmaWVsZERvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7CiAg");
    sb.append("ICAgICAgZmllbGREb20uYXBwZW5kKHNpbXBsZSgic3BhbiIsICBmaWVsZC5wcml2YWN5ICsgIiAiICsg");
    sb.append("cmVzdWx0Lm5hbWUgKyAiICIgKyBmaWVsZE5hbWUgKyAiID0gIikpOwogICAgICAgIGZpZWxkRG9tLmFw");
    sb.append("cGVuZChyZXN1bHQuZG9tKTsKICAgICAgICBjaGlsZHJlbi5hcHBlbmQoZmllbGREb20pOwogICAgICAg");
    sb.append("IGRlbHRhW2ZpZWxkTmFtZV0gPSByZXN1bHQudXBkYXRlOwogICAgICB9CiAgICAgIHJldHVybiB7CiAg");
    sb.append("ICAgICAgZG9tOiBvYmpfaG9sZGVyLAogICAgICAgIG5hbWU6IHR5cGUubmFtZSwKICAgICAgICB1cGRh");
    sb.append("dGU6ZGVsdGEKICAgICAgfTsKICAgIH0KICAgIHZhciB1bmtub3duID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICB1bmtub3duLmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KHR5cGUpOwog");
    sb.append("ICAgcmV0dXJuIHtkb206IHVua25vd24sIHVwZGF0ZTogZnVuY3Rpb24oKSB7fX07CiAgfTsKCiAgc2Vs");
    sb.append("Zi5mb3JtSWRHZW4gPSAwOwogIHZhciBuZXh0Rm9ybUlkID0gZnVuY3Rpb24oKSB7CiAgICBzZWxmLmZv");
    sb.append("cm1JZEdlbisrOwogICAgcmV0dXJuIHNlbGYuZm9ybUlkR2VuOwogIH07CiAgdmFyIGZpbGxPdXRGb3Jt");
    sb.append("Rm9yVHlwZSA9IGZ1bmN0aW9uKGRvbSwgbmFtZSwgdHlwZSwgdHlwZXMpIHsKICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX3JlZiIpIHsKICAgICAgZmlsbE91dEZvcm1Gb3JUeXBlKGRvbSwgbmFtZSwg");
    sb.append("dHlwZXNbdHlwZS5yZWZdLCB0eXBlcyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIGZvciAodmFyIGZpZWxkIGluIHR5cGUuZmll");
    sb.append("bGRzKSB7CiAgICAgICAgdmFyIGZpZWxkVHlwZSA9IHR5cGUuZmllbGRzW2ZpZWxkXS50eXBlOwogICAg");
    sb.append("ICAgIHZhciBmaWVsZEhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAg");
    sb.append("IGZpbGxPdXRGb3JtRm9yVHlwZShmaWVsZEhvbGRlciwgbmFtZSA9PSAiIiA/IGZpZWxkIDogKG5hbWUg");
    sb.append("KyAiLiIgKyBmaWVsZCksIGZpZWxkVHlwZSwgdHlwZXMpOwogICAgICAgIGRvbS5hcHBlbmQoZmllbGRI");
    sb.append("b2xkZXIpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX2FycmF5IikgewogICAgICAvLyBUT0RPCiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0g");
    sb.append("Im5hdGl2ZV9tYXliZSIpIHsKICAgICAgdmFyIG1heWJlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVs");
    sb.append("Iik7CiAgICAgIGxhYmVsLmlubmVySFRNTCA9ICJlbmFibGUgIiArIG5hbWU7CiAgICAgIHZhciBjaGVj");
    sb.append("a2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGNoZWNrYm94LnR5cGUg");
    sb.append("PSAiY2hlY2tib3giOwogICAgICBjaGVja2JveC5pZCA9IG5leHRGb3JtSWQoKTsKICAgICAgY2hlY2ti");
    sb.append("b3gubmFtZSA9ICIiOwogICAgICBsYWJlbC5odG1sRm9yID0gY2hlY2tib3guaWQ7CiAgICAgIHZhciBt");
    sb.append("YXliZVZhbHVlUmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBtYXli");
    sb.append("ZVZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGZpbGxPdXRGb3JtRm9y");
    sb.append("VHlwZShtYXliZVZhbHVlLCBuYW1lLCB0eXBlLnR5cGUsIHR5cGVzKTsKICAgICAgbWF5YmVIb2xkZXIu");
    sb.append("YXBwZW5kKGxhYmVsKTsKICAgICAgbWF5YmVIb2xkZXIuYXBwZW5kKGNoZWNrYm94KTsKICAgICAgbWF5");
    sb.append("YmVIb2xkZXIuYXBwZW5kKG1heWJlVmFsdWVSZWYpOwogICAgICBkb20uYXBwZW5kKG1heWJlSG9sZGVy");
    sb.append("KTsKICAgICAgY2hlY2tib3gub25jaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBudWtlKG1heWJl");
    sb.append("VmFsdWVSZWYpOwogICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7CiAgICAgICAgICBtYXliZVZh");
    sb.append("bHVlUmVmLmFwcGVuZChtYXliZVZhbHVlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybjsK");
    sb.append("ICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAibmF0aXZlX3ZhbHVlIikgewogICAgICB2YXIgbGFi");
    sb.append("ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwogICAgICB2YXIgaW5wdXQgPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoKICAgICAgaW5wdXQuaWQgPSAiZGVidWdnZXJfZm9y");
    sb.append("bV9pZF8iICsgbmV4dEZvcm1JZCgpOwogICAgICBsYWJlbC5pbm5lckhUTUwgPSBuYW1lOwogICAgICBp");
    sb.append("bnB1dC5uYW1lID0gbmFtZTsKICAgICAgaW5wdXQuc3R5bGUgPSBpbnB1dFN0eWxlOwogICAgICBpbnB1");
    sb.append("dC50eXBlID0gInRleHQiOwogICAgICBsYWJlbC5mb3JIdG1sID0gaW5wdXQuaWQ7CiAgICAgIGRvbS5h");
    sb.append("cHBlbmQobGFiZWwpOwogICAgICBkb20uYXBwZW5kKGlucHV0KTsKICAgICAgcmV0dXJuOwogICAgfQog");
    sb.append("ICAgZG9tLmlubmVySFRNTCA9IG5hbWUgKyAiLS0+IiArIEpTT04uc3RyaW5naWZ5KHR5cGUpOwogIH07");
    sb.append("CgogIHZhciBtYWtlQ2hhbm5lbERlYnVnZ2VyID0gZnVuY3Rpb24oY2hhbm5lbHMsIHR5cGVzLCBjb25u");
    sb.append("ZWN0aW9uKSB7CiAgICB2YXIgc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3Qi");
    sb.append("KTsKICAgIHNlbGVjdG9yLnN0eWxlID0gImJhY2tncm91bmQ6ICMzMzM7IGNvbG9yOiNmZmY7IjsKICAg");
    sb.append("IHZpZXdDaGFubmVscy5hcHBlbmQoc2VsZWN0b3IpOwogICAgdmFyIGZvcm1Ib2xkZXIgPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHZpZXdDaGFubmVscy5hcHBlbmQoZm9ybUhvbGRlcik7");
    sb.append("CiAgICB2YXIgY2hvb3NlID0gZnVuY3Rpb24oY2hhbm5lbCkgewogICAgICBudWtlKGZvcm1Ib2xkZXIp");
    sb.append("OwogICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTsKICAgICAgZm9y");
    sb.append("bUhvbGRlci5hcHBlbmQoZm9ybSk7CiAgICAgIHZhciB0eXBlID0gdHlwZXNbY2hhbm5lbHNbY2hhbm5l");
    sb.append("bF1dOwogICAgICBmaWxsT3V0Rm9ybUZvclR5cGUoZm9ybSwgIiIsIHR5cGUsIHR5cGVzKTsKCiAgICAg");
    sb.append("IHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgYnV0dG9u");
    sb.append("LnN0eWxlID0gYnV0dG9uU3R5bGU7CiAgICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQp");
    sb.append("IHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciBtZXNzYWdlID0gUnhI");
    sb.append("VE1MLkJ1aWxkRm9ybU9iamVjdChmb3JtKTsKICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlNlbmRp");
    sb.append("bmciOwogICAgICAgIGNvbnNvbGUubG9nKGNoYW5uZWwgKyAiOiIgKyBKU09OLnN0cmluZ2lmeShtZXNz");
    sb.append("YWdlKSk7CiAgICAgICAgY29ubmVjdGlvbi5zZW5kKGNoYW5uZWwsIG1lc3NhZ2UsIHsKICAgICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlN1Y2Nl");
    sb.append("c3MhIFNlbmQgQW5vdGhlciEiOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9u");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIltGYWlsZWQ6IiArIHJlYXNv");
    sb.append("biArICJdLCBUcnkgQWdhaW4iOwogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICB9OwogICAgICBi");
    sb.append("dXR0b24uaW5uZXJIVE1MID0gIlNlbmQiOwogICAgICBmb3JtLmFwcGVuZChidXR0b24pOwogICAgICAv");
    sb.append("LyBCdWlsZEZvcm1PYmplY3QKICAgIH07CiAgICB2YXIgZmlyc3QgPSBudWxsOwogICAgdmFyIGNoYW5u");
    sb.append("ZWxzU29ydGVkID0gW107CiAgICBmb3IgKHZhciBjaCBpbiBjaGFubmVscykgewogICAgICBjaGFubmVs");
    sb.append("c1NvcnRlZC5wdXNoKGNoKTsKICAgIH0KICAgIGNoYW5uZWxzU29ydGVkLnNvcnQoKTsKICAgIGZvciAo");
    sb.append("dmFyIGsgaW4gY2hhbm5lbHNTb3J0ZWQpIHsKICAgICAgdmFyIGNoID0gY2hhbm5lbHNTb3J0ZWRba107");
    sb.append("CiAgICAgIGlmIChmaXJzdCA9PSBudWxsKSB7CiAgICAgICAgZmlyc3QgPSBjaDsKICAgICAgfQogICAg");
    sb.append("ICB2YXIgbXNnVHlwZSA9IGNoYW5uZWxzW2NoXTsKICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQuaW5uZXJIVE1MID0gY2ggKyAiIDogIiArIG1zZ1R5");
    sb.append("cGU7CiAgICAgIG9wdC5sYWJlbCA9IGNoICsgIiA6ICIgKyBtc2dUeXBlOwogICAgICBvcHQudmFsdWUg");
    sb.append("PSBjaDsKICAgICAgc2VsZWN0b3IuYXBwZW5kKG9wdCk7CiAgICAgIHNlbGVjdG9yLm9uY2hhbmdlID0g");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICAgICAgY2hvb3NlKHNlbGVjdG9yLnZhbHVlKTsKICAgICAgfTsKICAgIH0K");
    sb.append("CiAgICBpZiAoZmlyc3QgIT0gbnVsbCkgewogICAgICBjaG9vc2UoZmlyc3QpOwogICAgfQogIH07Cgog");
    sb.append("IHZhciByZW5kZXIgPSBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tuYW1l");
    sb.append("XTsKICAgIGlmIChjby5yZW5kZXJlZCA9PSBjby5ib3VuZCkgewogICAgICByZXR1cm47CiAgICB9CiAg");
    sb.append("ICBjby5yZW5kZXJlZCA9IGNvLmJvdW5kOwogICAgY28uZGVidWdfdHJlZS5udWtlKCk7CiAgICBudWtl");
    sb.append("KHZpZXdKc29uKTsKICAgIG51a2Uodmlld0NoYW5uZWxzKTsKCiAgICB2YXIgaGFuZGxlciA9IHsKICAg");
    sb.append("ICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAvLyBoYW5kbGUgdGhlIGRhdGEg");
    sb.append("aW5zcGVjdG9yIHRhYgogICAgICAgIHZhciByZWZsZWN0aW9uID0gcGF5bG9hZC5yZWZsZWN0aW9uOwog");
    sb.append("ICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEocmVmbGVjdGlvbi50eXBlc1si");
    sb.append("X19Sb290Il0sIHJlZmxlY3Rpb24udHlwZXMpOwogICAgICAgIHZpZXdKc29uLmFwcGVuZChyZXN1bHQu");
    sb.append("ZG9tKTsKICAgICAgICBjby5kZWJ1Z190cmVlLnN1YnNjcmliZShyZXN1bHQudXBkYXRlKTsKICAgICAg");
    sb.append("ICAvLyBoYW5kbGUgdGhlIGNoYW5uZWxzIHRhYgogICAgICAgIG1ha2VDaGFubmVsRGVidWdnZXIocmVm");
    sb.append("bGVjdGlvbi5jaGFubmVscywgcmVmbGVjdGlvbi50eXBlcywgY28ucHRyKTsKICAgICAgfSwKICAgICAg");
    sb.append("ZmFpbHVyZTogZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0gIltG");
    sb.append("QUlMRUQgVE8gR0VUIFNDSEVNQToiICsgcmVhc29uICsgIl0iOwogICAgICAgIHZpZXdDaGFubmVscy5p");
    sb.append("bm5lckhUTUwgPSAiW0ZBSUxFRCBUTyBHRVQgU0NIRU1BOiIgKyByZWFzb24gKyAiXSI7CiAgICAgIH0K");
    sb.append("ICAgIH07CiAgICBpZiAoY28udmlhX2JpbGxpbmcpIHsKICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0g");
    sb.append("IkJpbGlsbmcgZG9jdW1lbnQgbm90IHN1cHBvcnRlZCI7CiAgICAgIHZpZXdDaGFubmVscy5pbm5lckhU");
    sb.append("TUwgPSB2aWV3SnNvbi5pbm5lckhUTUw7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChjby52aWFf");
    sb.append("ZG9tYWluKSB7CiAgICAgIGNvLnJhdy5Eb21haW5SZWZsZWN0KGNvLmlkZW50aXR5LCBjby5kb21haW4s");
    sb.append("IGhhbmRsZXIpOwogICAgfSBlbHNlIHsKICAgICAgY28ucmF3LlNwYWNlUmVmbGVjdChjby5pZGVudGl0");
    sb.append("eSwgY28uc3BhY2UsIGNvLmtleSwgaGFuZGxlcik7CiAgICB9CiAgfTsKCiAgdmFyIGNvbm5lY3Rpb25T");
    sb.append("ZWxlY3RvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwogIGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMzMzOyBjb2xvcjogI2ZmZiI7CiAgdmFyIHN3aXRjaF90");
    sb.append("b19jb25uZWN0aW9uID0gZnVuY3Rpb24obmFtZSkgewogICAgY3VycmVudCA9IG5hbWU7CiAgICBudWtl");
    sb.append("KHZpZXdDaGFubmVscyk7CiAgICBudWtlKHZpZXdKc29uKTsKICAgIGNvbm5lY3Rpb25zW25hbWVdLnJl");
    sb.append("bmRlcmVkID0gIiI7CiAgICByZW5kZXIobmFtZSk7CiAgfTsKICBjb25uZWN0aW9uU2VsZWN0b3Iub25j");
    sb.append("aGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgIHN3aXRjaF90b19jb25uZWN0aW9uKGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci52YWx1ZSk7CiAgfTsKICB2YXIgcmVmcmVzaF9zZWxlY3QgPSBmdW5jdGlvbigpIHsKICAgIG51");
    sb.append("a2UoY29ubmVjdGlvblNlbGVjdG9yKTsKICAgIGZvciAodmFyIG5hbWUgaW4gY29ubmVjdGlvbnMpIHsK");
    sb.append("ICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQu");
    sb.append("dmFsdWUgPSBuYW1lOwogICAgICBvcHQuaW5uZXJUZXh0ID0gbmFtZTsKICAgICAgY29ubmVjdGlvblNl");
    sb.append("bGVjdG9yLmFwcGVuZENoaWxkKG9wdCk7CiAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHsKICAgICAg");
    sb.append("ICBzd2l0Y2hfdG9fY29ubmVjdGlvbihuYW1lKTsKICAgICAgICBjb25uZWN0aW9uU2VsZWN0b3IudmFs");
    sb.append("dWUgPSBuYW1lOwogICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi50b2dnbGUgPSBmdW5jdGlvbigpIHsK");
    sb.append("ICAgIGlmIChzZWxmLnNob3duKSB7CiAgICAgIHRyeSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1v");
    sb.append("dmVDaGlsZChzZWxmLnJvb3QpOwogICAgICB9IGNhdGNoIChub3RwcmVzZW50KSB7CiAgICAgICAgc2Vs");
    sb.append("Zi5zaG93biA9ICFzZWxmLnNob3duOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHNlbGYucm9v");
    sb.append("dCk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgc2VsZi5yb290ID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGRlYnVnZ2VyUG9zaXRpb24gPSBsb2NhbFN0b3JhZ2Uu");
    sb.append("Z2V0SXRlbSgiQWRhbWFEZWJ1Z2dlclBvc2l0aW9uIik7CiAgICAgIGlmICghZGVidWdnZXJQb3NpdGlv");
    sb.append("biB8fCBkZWJ1Z2dlclBvc2l0aW9uID09ICIiKSB7CiAgICAgICAgZGVidWdnZXJQb3NpdGlvbiA9ICJ0");
    sb.append("b3A6MHB4OyBsZWZ0OjBweDt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiOwogICAgICB9CiAgICAgIHNl");
    sb.append("bGYucm9vdC5zdHlsZSA9ICJwb3NpdGlvbjphYnNvbHV0ZTsiICsgZGVidWdnZXJQb3NpdGlvbiArICI7");
    sb.append("YmFja2dyb3VuZDogIzAwMDtib3JkZXI6MXB4IHNvbGlkIHJlZDt6LWluZGV4OjEwMDA7IG92ZXJmbG93");
    sb.append("OnNjcm9sbCI7CiAgICAgIHZhciB0aXRsZUJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIp");
    sb.append("OwogICAgICB0aXRsZUJhci5pbm5lckhUTUwgPSAiQWRhbWEgRGVidWdnZXIiOwogICAgICB0aXRsZUJh");
    sb.append("ci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMjIyOyBjb2xvcjogIzBmMDsgY3Vyc29yOm1vdmU7IHdpZHRo");
    sb.append("OjEwMCU7IGZvbnQtdmFyaWFudDogc21hbGwtY2FwczsgcGFkZGluZzoycHg7IHRleHQtYWxpZ246IGNl");
    sb.append("bnRlcjsiOwogICAgICB0aXRsZUJhci5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAg");
    sb.append("ZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICB2YXIgcmVjdCA9IHNlbGYucm9vdC5nZXRCb3VuZGlu");
    sb.append("Z0NsaWVudFJlY3QoKTsKICAgICAgICB2YXIgc3RhcnQgPSB7eDogZXYuY2xpZW50WCwgeTogZXYuY2xp");
    sb.append("ZW50WX07CiAgICAgICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uKG54KSB7CiAgICAgICAgICBzZWxmLnJv");
    sb.append("b3Quc3R5bGUubGVmdCA9IChyZWN0LmxlZnQgKyBueC5jbGllbnRYIC0gc3RhcnQueCkgKyAicHgiOwog");
    sb.append("ICAgICAgICAgc2VsZi5yb290LnN0eWxlLnRvcCA9IChyZWN0LnRvcCArIG54LmNsaWVudFkgLSBzdGFy");
    sb.append("dC55KSArICJweCI7CiAgICAgICAgfTsKICAgICAgICB3aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlv");
    sb.append("bihueCkgewogICAgICAgICAgdXBkYXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVt");
    sb.append("KCJBZGFtYURlYnVnZ2VyUG9zaXRpb24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0");
    sb.append("OiIrc2VsZi5yb290LnN0eWxlLmxlZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAg");
    sb.append("ICB9OwogICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbihueCkgewogICAgICAgICAgdXBk");
    sb.append("YXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJBZGFtYURlYnVnZ2VyUG9zaXRp");
    sb.append("b24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0OiIrc2VsZi5yb290LnN0eWxlLmxl");
    sb.append("ZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAgICAgIHdpbmRvdy5vbm1vdXNlbW92");
    sb.append("ZSA9IGZ1bmN0aW9uKCkge307CiAgICAgICAgICB3aW5kb3cub25tb3VzZXVwID0gZnVuY3Rpb24oKSB7");
    sb.append("fTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzZWxmLnJvb3Qu");
    sb.append("YXBwZW5kQ2hpbGQodGl0bGVCYXIpOwogICAgICBzZWxmLnJvb3QuYXBwZW5kQ2hpbGQoY29ubmVjdGlv");
    sb.append("blNlbGVjdG9yKTsKICAgICAgc2VsZi5yb290LmFwcGVuZENoaWxkKHZpZXdKc29uKTsKICAgICAgc2Vs");
    sb.append("Zi5yb290LmFwcGVuZENoaWxkKHZpZXdDaGFubmVscyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5k");
    sb.append("Q2hpbGQoc2VsZi5yb290KTsKICAgIH0KICAgIHNlbGYuc2hvd24gPSAhc2VsZi5zaG93bjsKICB9OwoK");
    sb.append("ICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oY29ubmVjdGlvbikgewogICAgY29ubmVjdGlvbnNbY29u");
    sb.append("bmVjdGlvbi5uYW1lXSA9IGNvbm5lY3Rpb247CiAgICBjb25uZWN0aW9uLmRlYnVnX3RyZWUgPSBuZXcg");
    sb.append("QWRhbWFUcmVlKCk7CiAgICBjb25uZWN0aW9uLmRlYnVnZ2luZyA9ICI/IjsKICAgIHJlZnJlc2hfc2Vs");
    sb.append("ZWN0KCk7CiAgICByZXR1cm4gZnVuY3Rpb24ocGF5bG9hZCkgewogICAgICBpZiAoY29ubmVjdGlvbi5i");
    sb.append("b3VuZCAhPSBjb25uZWN0aW9uLmRlYnVnZ2luZyAmJiBjdXJyZW50ID09IGNvbm5lY3Rpb24ubmFtZSkg");
    sb.append("ewogICAgICAgIHJlbmRlcihjb25uZWN0aW9uLm5hbWUpOwogICAgICB9CiAgICAgIGlmICgiZGF0YSIg");
    sb.append("aW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgIGNvbm5lY3Rpb24uZGVidWdfdHJlZS51cGRhdGUocGF5");
    sb.append("bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgfQogICAgICAvKgogICAgICBpZiAoIm91dHN0YW5kaW5nIiBp");
    sb.append("biBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBjby5vbmRlY2lkZShwYXlsb2FkLmRlbHRhLm91dHN0");
    sb.append("YW5kaW5nKTsKICAgICAgfQogICAgICBpZiAoJ3ZpZXdzdGF0ZScgaW4gcGF5bG9hZC5kZWx0YSkgewov");
    sb.append("LyAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLnZpZXdzdGF0ZSk7CiAg");
    sb.append("ICAgIH0KICAgICAgaWYgKCdnb3RvJyBpbiBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBzZWxmLmdv");
    sb.append("dG8ocGF5bG9hZC5kZWx0YS5nb3RvKTsKICAgICAgfQogICAgICAqLwogICAgfQogIH07CiAgcmV0dXJu");
    sb.append("IHNlbGY7Cn0pKCk7");
    return sb.toString();
  }
  public static final String RXHTML = new String(Base64.getDecoder().decode(make_rxhtml()), StandardCharsets.UTF_8);
  private static String make_rxhtml() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIFJ4SFRNTCA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB7fTsKCiAgdmFyIHRlbXBsYXRl");
    sb.append("cyA9IHt9OwogIHZhciByb3V0ZXIgPSB7fTsKCiAgdmFyIGRlZmF1bHRFbmRwb2ludCA9IC8qRU5EUE9J");
    sb.append("TlQ9WyovQWRhbWEuUHJvZHVjdGlvbi8qXSovOwogIC8vIFRPRE86IGNoZWNrIGZvciBvdmVycmlkZSBl");
    sb.append("bmRwb2ludAoKICAvLyBUaGlzIHN0cmFuZ2UgZXNjYXBpbmcgaXMgZm9yIGRldmVsb3BlciBtb2RlIHRv");
    sb.append("IHByb3h5IHRvIGxvY2FsaG9zdC4KICB2YXIgY29ubmVjdGlvbiA9IG5ldyBBZGFtYS5Db25uZWN0aW9u");
    sb.append("KGRlZmF1bHRFbmRwb2ludCk7CiAgdmFyIGNvbm5lY3Rpb25zID0ge307CiAgc2VsZi5jb25uZWN0aW9u");
    sb.append("ID0gY29ubmVjdGlvbjsKICBzZWxmLmJ1bXAgPSBmdW5jdGlvbihtKSB7CiAgICBjb25uZWN0aW9uLmJ1");
    sb.append("bXAobSk7CiAgfTsKCiAgdmFyIGNvbm5lY3Rpb25Nb25pdG9yRG9tID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgY29ubmVjdGlvbi5vbnN0YXR1c2NoYW5nZSA9IGZ1bmN0aW9uIChzdGF0dXMp");
    sb.append("IHsKICAgIHZhciBpY29uID0gZnVuY3Rpb24gKGNvbG9yKSB7IHJldHVybiAiPHN2ZyB4bWxucz1cImh0");
    sb.append("dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0");
    sb.append("XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiIiArIGNvbG9yICsgIlwiIHN0eWxlPVwid2lk");
    sb.append("dGg6MTZweDsgaGVpZ2h0OjE2cHhcIj48cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tl");
    sb.append("LWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTguMjg4IDE1LjAzOGE1LjI1IDUuMjUgMCAwMTcuNDI0IDBN");
    sb.append("NS4xMDYgMTEuODU2YzMuODA3LTMuODA4IDkuOTgtMy44MDggMTMuNzg4IDBNMS45MjQgOC42NzRjNS41");
    sb.append("NjUtNS41NjUgMTQuNTg3LTUuNTY1IDIwLjE1MiAwTTEyLjUzIDE4LjIybC0uNTMuNTMtLjUzLS41M2Eu");
    sb.append("NzUuNzUgMCAwMTEuMDYgMHpcIiAvPjwvc3ZnPlxuIjsgfTsKICAgIGlmICghc3RhdHVzKSB7CiAgICAg");
    sb.append("IGNvbm5lY3Rpb25Nb25pdG9yRG9tLnRpdGxlID0gImRpc2Nvbm5lY3RlZCI7CiAgICAgIGNvbm5lY3Rp");
    sb.append("b25Nb25pdG9yRG9tLmlubmVySFRNTCA9IGljb24oInJlZCIpOwogICAgICBjb25uZWN0aW9uLm9ucGlu");
    sb.append("ZyA9IGZ1bmN0aW9uIChfMSwgXzIpIHsgfTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbm5lY3Rpb24ub25w");
    sb.append("aW5nID0gZnVuY3Rpb24gKF8sIGxhdGVuY3kpIHsKICAgICAgICBjb25uZWN0aW9uTW9uaXRvckRvbS50");
    sb.append("aXRsZSA9ICJjb25uZWN0ZWQ7IGxhdGVuY3k9IiArIGxhdGVuY3kgKyAibXMiOwogICAgICAgIGlmIChs");
    sb.append("YXRlbmN5ID49IDEwMCkgewogICAgICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20uaW5uZXJIVE1MID0g");
    sb.append("aWNvbigib3JhbmdlIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbm5lY3Rpb25Nb25pdG9y");
    sb.append("RG9tLmlubmVySFRNTCA9IGljb24oImdyZWVuIik7CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH07");
    sb.append("CiAgY29ubmVjdGlvbk1vbml0b3JEb20uc3R5bGUgPSAicG9zaXRpb246Zml4ZWQ7IGJvdHRvbTowcHg7");
    sb.append("IHJpZ2h0OjBweCI7CiAgY29ubmVjdGlvbk1vbml0b3JEb20uY2xhc3NOYW1lID0gImFkYW1hLWRlYnVn");
    sb.append("Z2VyIgogIGlmIChBZGFtYS5EZWJ1Z2dlcikgewogICAgY29ubmVjdGlvbk1vbml0b3JEb20ub25jbGlj");
    sb.append("ayA9IEFkYW1hLkRlYnVnZ2VyLnRvZ2dsZTsKICB9CiAgY29ubmVjdGlvbi5zdGFydCgpOwogIGNvbm5l");
    sb.append("Y3Rpb24ua2VlcGFsaXZlKCk7CgogIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0");
    sb.append("aW9uKGV2ZW50KSB7CiAgICB2YXIgcGF5bG9hZCA9IHt9OwogICAgcGF5bG9hZC5tZXNzYWdlID0gZXZl");
    sb.append("bnQubWVzc2FnZTsKICAgIHBheWxvYWQuZmlsZW5hbWUgPSBldmVudC5maWxlbmFtZTsKICAgIHBheWxv");
    sb.append("YWQubGluZW5vID0gZXZlbnQubGluZW5vOwogICAgcGF5bG9hZC5jb2xubyA9IGV2ZW50LmNvbG5vOwog");
    sb.append("ICAgcGF5bG9hZC5maWxlbmFtZSA9IGV2ZW50LmZpbGVuYW1lOwogICAgY29ubmVjdGlvbi5sb2coIndp");
    sb.append("bmRvdy5lcnJvciIsIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTsKICB9KTsKCiAgY29ubmVjdGlvbi5i");
    sb.append("dW1wKCJyeGh0bWwiKTsKCiAgdmFyIHJvb3RSZXBsYWNlID0gIi8iOwogIHZhciBmaXhQYXRoID0gZnVu");
    sb.append("Y3Rpb24gKHBhdGgpIHsKICAgIHJldHVybiBwYXRoOwogIH07CiAgaWYgKHdpbmRvdy5sb2NhdGlvbi5o");
    sb.append("b3N0bmFtZS5lbmRzV2l0aCgiLmFkYW1hLXBsYXRmb3JtLmNvbSIpICYmICF3aW5kb3cubG9jYXRpb24u");
    sb.append("aG9zdG5hbWUuZW5kc1dpdGgoImlkZS5hZGFtYS1wbGF0Zm9ybS5jb20iKSkgewogICAgLy8gdGhpcyBl");
    sb.append("eGlzdHMgaWYgc29tZW9uZSBpcyB0cnlpbmcgdG8gdXNlIHRoZSBnbG9iYWwgZG9tYWluIGZvciB0aGVp");
    sb.append("ciBzaXRlCiAgICB2YXIgcGFydHMgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoIi8iKTsK");
    sb.append("ICAgIHJvb3RSZXBsYWNlID0gW3BhcnRzWzBdLCBwYXJ0c1sxXSwgcGFydHNbMl0sICIiXS5qb2luKCIv");
    sb.append("Iik7CiAgICB2YXIgb2Zmc2V0ID0gcGFydHNbMF0ubGVuZ3RoICsgcGFydHNbMV0ubGVuZ3RoICsgcGFy");
    sb.append("dHNbMl0ubGVuZ3RoICsgMjsKICAgIGZpeFBhdGggPSBmdW5jdGlvbiAocGF0aCkgewogICAgICByZXR1");
    sb.append("cm4gcGF0aC5zdWJzdHJpbmcob2Zmc2V0KTsKICAgIH07CiAgfQoKICB2YXIgZml4SHJlZiA9IGZ1bmN0");
    sb.append("aW9uIChocmVmKSB7CiAgICBpZiAoIWhyZWYpIHsKICAgICAgcmV0dXJuICIjIjsKICAgIH0KICAgIGlm");
    sb.append("IChocmVmLnN0YXJ0c1dpdGgoIi8iKSkgewogICAgICByZXR1cm4gcm9vdFJlcGxhY2UgKyBocmVmLnN1");
    sb.append("YnN0cmluZygxKTsKICAgIH0KICAgIHJldHVybiBocmVmOwogIH07CgogIHZhciBnZXRfY29ubmVjdGlv");
    sb.append("bl9vYmogPSBmdW5jdGlvbiAobmFtZSkgewogICAgaWYgKG5hbWUgaW4gY29ubmVjdGlvbnMpIHsKICAg");
    sb.append("ICAgcmV0dXJuIGNvbm5lY3Rpb25zW25hbWVdOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG9iaiA9IHsK");
    sb.append("ICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIHB0cjogbnVsbCwKICAgICAgICB0cmVlOiBuZXcgQWRh");
    sb.append("bWFUcmVlKCksCiAgICAgICAgb3V0c3RhbmRpbmc6IHt9LAogICAgICAgIGRlY2lzaW9uczoge30sCiAg");
    sb.append("ICAgICAgY2hvaWNlX3N1YnM6IHt9LAogICAgICAgIHJlc2V0czoge30sCiAgICAgICAgY29ubmVjdGlv");
    sb.append("bl9ldmVudHM6IHt9LAogICAgICAgIHN5bmNfZXZlbnRzOiB7fSwKICAgICAgICBpZDogMCwKICAgICAg");
    sb.append("ICBjb25uZWN0aW9uX3N0YXRlOiBmYWxzZSwKICAgICAgICBjaG9pY2VzOiB7fSwKICAgICAgICBib3Vu");
    sb.append("ZDogIiIsCiAgICAgICAgdmlld3N0YXRlX3NlbnQ6IHRydWUsCiAgICAgICAgdmlld3N0YXRlX2Nsb25l");
    sb.append("OiAiIiwKICAgICAgICBoYXNfZmlsdGVyOiBmYWxzZSwKICAgICAgICBzeW5jZWQ6IGZhbHNlLAogICAg");
    sb.append("ICAgIGZpbHRlcjoge30sCiAgICAgICAgdnNzZXE6IDAsCiAgICAgICAgZGVidWdnZXI6IGZ1bmN0aW9u");
    sb.append("IChkZWx0YSkgeyB9LAogICAgICAgIHJhdzogY29ubmVjdGlvbgogICAgICB9OwogICAgICBvYmoubnVr");
    sb.append("ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmNvbm5lY3Rpb25fZXZlbnRzID0ge307CiAgICAg");
    sb.append("ICAgdGhpcy5zeW5jX2V2ZW50cyA9IHt9OwogICAgICAgIHRoaXMuY2hvaWNlX3N1YnMgPSB7fTsKICAg");
    sb.append("ICAgfS5iaW5kKG9iaik7CiAgICAgIGlmIChBZGFtYS5EZWJ1Z2dlcikgewogICAgICAgIG9iai5kZWJ1");
    sb.append("Z2dlciA9IEFkYW1hLkRlYnVnZ2VyLnJlZ2lzdGVyKG9iaik7CiAgICAgIH0KICAgICAgb2JqLnN5bmMg");
    sb.append("PSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHN5bmNlZCA9IHRoaXMuY29ubmVjdGlvbl9zdGF0ZSAm");
    sb.append("JiB0aGlzLnZpZXdzdGF0ZV9zZW50OwogICAgICAgIGlmICh0aGlzLnN5bmNlZCA9PSBzeW5jZWQpIHsK");
    sb.append("ICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5zeW5jZWQgPSBzeW5jZWQ7CiAg");
    sb.append("ICAgICAgdmFyIGF4ZSA9IFtdOwogICAgICAgIGZvciAodmFyIHN1YiBpbiBvYmouc3luY19ldmVudHMp");
    sb.append("IHsKICAgICAgICAgIGlmICghKG9iai5zeW5jX2V2ZW50c1tzdWJdKHN5bmNlZCkpKSB7CiAgICAgICAg");
    sb.append("ICAgIGF4ZS5wdXNoKHN1Yik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgYXhlLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBkZWxldGUgb2JqLnN5bmNfZXZlbnRz");
    sb.append("W2F4ZVtrXV07CiAgICAgICAgfQogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1YnNjcmliZV9z");
    sb.append("eW5jID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSAiLXwiICsgdGhpcy5pZCsr");
    sb.append("OwogICAgICAgIHRoaXMuc3luY19ldmVudHNbc10gPSBjYWxsYmFjazsKICAgICAgICBjYWxsYmFjayh0");
    sb.append("aGlzLnN5bmNlZCk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0");
    sb.append("aGlzLnN5bmNfZXZlbnRzW3NdOwogICAgICAgIH0uYmluZCh0aGlzKTsKICAgICAgfTsKICAgICAgb2Jq");
    sb.append("LnNldF9jb25uZWN0ZWQgPSBmdW5jdGlvbiAoY3MpIHsKICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9u");
    sb.append("X3N0YXRlID09IGNzKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuY29u");
    sb.append("bmVjdGlvbl9zdGF0ZSA9IGNzOwogICAgICAgIHZhciBheGUgPSBbXTsKICAgICAgICBmb3IgKHZhciBz");
    sb.append("dWIgaW4gb2JqLmNvbm5lY3Rpb25fZXZlbnRzKSB7CiAgICAgICAgICBpZiAoIShvYmouY29ubmVjdGlv");
    sb.append("bl9ldmVudHNbc3ViXShjcykpKSB7CiAgICAgICAgICAgIGF4ZS5wdXNoKHN1Yik7CiAgICAgICAgICB9");
    sb.append("CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXhlLmxlbmd0aDsgaysrKSB7CiAg");
    sb.append("ICAgICAgICBkZWxldGUgb2JqLmNvbm5lY3Rpb25fZXZlbnRzW2F4ZVtrXV07CiAgICAgICAgfQogICAg");
    sb.append("ICAgIHRoaXMuc3luYygpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLmNvbm5lY3RlZCA9IGZ1");
    sb.append("bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHZhciBzID0gIi18IiArIHRoaXMuaWQrKzsKICAgICAg");
    sb.append("ICB0aGlzLmNvbm5lY3Rpb25fZXZlbnRzW3NdID0gY2FsbGJhY2s7CiAgICAgICAgY2FsbGJhY2sodGhp");
    sb.append("cy5jb25uZWN0aW9uX3N0YXRlKTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAg");
    sb.append("ZGVsZXRlIHRoaXMuY29ubmVjdGlvbl9ldmVudHNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAg");
    sb.append("ICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1YnNjcmliZV9hbnkgPSBmdW5jdGlvbiAoY2FsbGJhY2sp");
    sb.append("IHsKICAgICAgICB2YXIgcyA9ICItfCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhpcy5kZWNpc2lvbnNb");
    sb.append("c10gPSBjYWxsYmFjazsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGVsZXRl");
    sb.append("IHRoaXMuZGVjaXNpb25zW3NdOwogICAgICAgIH0uYmluZCh0aGlzKTsKICAgICAgfS5iaW5kKG9iaik7");
    sb.append("CiAgICAgIG9iai5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoY2hhbm5lbCwgY2FsbGJhY2spIHsKICAgICAg");
    sb.append("ICB2YXIgcyA9IGNoYW5uZWwgKyAifCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhpcy5kZWNpc2lvbnNb");
    sb.append("c10gPSBjYWxsYmFjazsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGVsZXRl");
    sb.append("IHRoaXMuZGVjaXNpb25zW3NdOwogICAgICAgIH0uYmluZCh0aGlzKTsKICAgICAgfS5iaW5kKG9iaik7");
    sb.append("CiAgICAgIG9iai5zdWJzY3JpYmVfcmVzZXQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICAgICB2");
    sb.append("YXIgZHIgPSAicmVzZXR8IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLnJlc2V0c1tkcl0gPSBjYWxs");
    sb.append("YmFjazsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGVsZXRlIHRoaXMucmVz");
    sb.append("ZXRzW2RyXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmou");
    sb.append("c3Vic2NyaWJlX2Nob2ljZSA9IGZ1bmN0aW9uIChjaGFubmVsLCBjYWxsYmFjaykgewogICAgICAgIHZh");
    sb.append("ciBzID0gY2hhbm5lbCArICJ8IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLmNob2ljZV9zdWJzW3Nd");
    sb.append("ID0gY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0");
    sb.append("aGlzLmNob2ljZV9zdWJzW3NdOwogICAgICAgIH0uYmluZCh0aGlzKTsKICAgICAgfS5iaW5kKG9iaik7");
    sb.append("CiAgICAgIG9iai5vbmNob2ljZXMgPSBmdW5jdGlvbiAoY2hhbm5lbCwgY2hvaWNlKSB7CiAgICAgICAg");
    sb.append("dmFyIGF4ZSA9IFtdOwogICAgICAgIGZvciAodmFyIHN1YiBpbiBvYmouY2hvaWNlX3N1YnMpIHsKICAg");
    sb.append("ICAgICAgIGlmIChzdWIuc3RhcnRzV2l0aChjaGFubmVsICsgInwiKSkgewogICAgICAgICAgICBpZiAo");
    sb.append("IW9iai5jaG9pY2Vfc3Vic1tzdWJdKGNob2ljZSkpIHsKICAgICAgICAgICAgICBheGUucHVzaChzdWIp");
    sb.append("OwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgYXhlLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBkZWxldGUgb2JqLmNob2ljZV9zdWJzW2F4");
    sb.append("ZVtrXV07CiAgICAgICAgfQogICAgICB9OwogICAgICBvYmoub25kZWNpZGUgPSBmdW5jdGlvbiAob3V0");
    sb.append("c3RhbmRpbmcpIHsKICAgICAgICB2YXIgYXhlUmVzZXQgPSBbXTsKICAgICAgICBmb3IgKHZhciBkciBp");
    sb.append("biBvYmoucmVzZXRzKSB7CiAgICAgICAgICB2YXIgciA9IG9iai5yZXNldHNbZHJdOwogICAgICAgICAg");
    sb.append("aWYgKCEocigpKSkgewogICAgICAgICAgICBheGVSZXNldC5wdXNoKGRyKTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGVSZXNldC5sZW5ndGg7IGsrKykgewog");
    sb.append("ICAgICAgICAgZGVsZXRlIG9iai5yZXNldHNbYXhlUmVzZXRba11dOwogICAgICAgIH0KICAgICAgICBm");
    sb.append("b3IgKHZhciBjaCBpbiBvYmoub3V0c3RhbmRpbmcpIHsKICAgICAgICAgIG9iai5vdXRzdGFuZGluZ1tj");
    sb.append("aF0gPSB7IG9wdGlvbnM6IFtdIH07CiAgICAgICAgfQogICAgICAgIHZhciBuID0gb3V0c3RhbmRpbmcu");
    sb.append("bGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgICB2YXIg");
    sb.append("byA9IG91dHN0YW5kaW5nW2tdOwogICAgICAgICAgb2JqLm91dHN0YW5kaW5nW28uY2hhbm5lbF0gPSBv");
    sb.append("OwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBjaCBpbiBvYmoub3V0c3RhbmRpbmcpIHsKICAgICAg");
    sb.append("ICAgIHZhciBvdXQgPSBvYmoub3V0c3RhbmRpbmdbY2hdOwogICAgICAgICAgdmFyIGF4ZSA9IFtdOwog");
    sb.append("ICAgICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5kZWNpc2lvbnMpIHsKICAgICAgICAgICAgaWYgKHN1");
    sb.append("Yi5zdGFydHNXaXRoKGNoICsgInwiKSB8fCBzdWIuc3RhcnRzV2l0aCgiLXwiKSkgewogICAgICAgICAg");
    sb.append("ICAgIGlmICghb2JqLmRlY2lzaW9uc1tzdWJdKG91dCwgY2gpKSB7CiAgICAgICAgICAgICAgICBheGUu");
    sb.append("cHVzaChzdWIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAg");
    sb.append("ICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgZGVsZXRl");
    sb.append("IG9iai5kZWNpc2lvbnNbYXhlW2tdXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICAg");
    sb.append("IGNvbm5lY3Rpb25zW25hbWVdID0gb2JqOwogICAgICByZXR1cm4gb2JqOwogICAgfQogIH07CiAgc2Vs");
    sb.append("Zi5nZXRDb25uZWN0aW9uQnlOYW1lID0gZ2V0X2Nvbm5lY3Rpb25fb2JqOwoKICBzZWxmLm1ha2UgPSBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICByZXR1cm4gbmV3IEFkYW1hVHJlZSgpOwogIH07CgogIC8vIEhFTFBFUiB8");
    sb.append("IHN1YnNjcmliZSB0aGUgZ2l2ZW4gJ3N1YicgdG8gY2hhbmdlcyB3aXRoaW4gc3RhdGUgZm9yIHRoZSBn");
    sb.append("aXZlbiBmaWVsZCBuYW1lZCBuYW1lCiAgdmFyIHN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFt");
    sb.append("ZSwgc3ViKSB7CiAgICB2YXIgc3MgPSBzZWxmLnBJKHN0YXRlLCBuYW1lKTsKICAgIHZhciBzID0gc3Nb");
    sb.append("c3MuY3VycmVudF07CiAgICBpZiAocyA9PSBudWxsKSB7CiAgICAgIGNvbnNvbGUuZXJyb3Ioc3MuY3Vy");
    sb.append("cmVudCArICIgaXMgbm90IGF2YWlsYWJsZTsgdW5hYmxlIHRvIHN1YnNjcmliZS4iKTsKICAgICAgcmV0");
    sb.append("dXJuOwogICAgfQogICAgaWYgKCJAZSIgaW4gcy5kZWx0YSkgewogICAgICBzLmRlbHRhWyJAZSJdLnB1");
    sb.append("c2goc3ViKTsKICAgIH0gZWxzZSB7CiAgICAgIHMuZGVsdGFbIkBlIl0gPSBbc3ViXTsKICAgIH0KICB9");
    sb.append("OwogIHNlbGYuc3Vic2NyaWJlID0gc3Vic2NyaWJlOwoKICAvLyBIRUxQRVIgfCBjcmVhdGUgZnJlc2gg");
    sb.append("c3RhdGUKICB2YXIgZnJlc2ggPSBmdW5jdGlvbiAod2hlcmUpIHsKICAgIHJldHVybiB7CiAgICAgIHRy");
    sb.append("ZWU6IG5ldyBBZGFtYVRyZWUoKSwKICAgICAgZGVsdGE6IHt9LAogICAgICBwYXJlbnQ6IG51bGwsCiAg");
    sb.append("ICAgIHBhdGg6IG51bGwsCiAgICAgIHdoZXJlOiB3aGVyZQogICAgfTsKICB9OwogIHNlbGYuZnJlc2gg");
    sb.append("PSBmcmVzaDsKCiAgLy8gSEVMUEVSOiByZW1vdmUgcG90ZW50aWFsbHkgc2Vuc2l0aXZlIGluZm9ybWF0");
    sb.append("aW9uIGZyb20gYW4gb2JqZWN0CiAgdmFyIHNhZmVfZmlsdGVyID0gZnVuY3Rpb24obykgewogICAgaWYg");
    sb.append("KCdwYXNzd29yZCcgaW4gbykgewogICAgICBkZWxldGUgb1sncGFzc3dvcmQnXTsKICAgIH0KICAgIGlm");
    sb.append("ICgnb25lX3RpbWVfcGFzc3dvcmQnIGluIG8pIHsKICAgICAgZGVsZXRlIG9bJ29uZV90aW1lX3Bhc3N3");
    sb.append("b3JkJ107CiAgICB9CiAgICByZXR1cm4gbzsKICB9CgogIC8vIEhFTFBFUiB8IGNyZWF0ZSBhIG5ldyBk");
    sb.append("ZWx0YSBjb3B5IGZyb20gdGhlIGdpdmVuIHNwZWNpZmljIHN0YXRlIChpLmUuIGVpdGhlciBkYXRhIG9y");
    sb.append("IHZpZXcpCiAgdmFyIG5ld19kZWx0YV9jb3B5ID0gZnVuY3Rpb24gKHNzKSB7CiAgICBpZiAoc3MgPT0g");
    sb.append("bnVsbCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHZhciBwYXJlbnQgPSBudWxsOwogICAg");
    sb.append("aWYgKHNzLnBhcmVudCAhPSBudWxsKSB7CiAgICAgIHBhcmVudCA9IG5ld19kZWx0YV9jb3B5KHNzLnBh");
    sb.append("cmVudCk7CiAgICB9CiAgICB2YXIgbmV3X2RlbHRhID0ge307CiAgICBpZiAocGFyZW50ICE9IG51bGwp");
    sb.append("IHsKICAgICAgcGFyZW50LmRlbHRhW3NzLnBhdGhdID0gbmV3X2RlbHRhOwogICAgfQogICAgcmV0dXJu");
    sb.append("IHsgdHJlZTogc3MudHJlZSwgcGFyZW50OiBwYXJlbnQsIGRlbHRhOiBuZXdfZGVsdGEsIHBhdGg6IHNz");
    sb.append("LnBhdGggfTsKICB9OwogIHNlbGYubWFrZURlbHRhQ29weSA9IG5ld19kZWx0YV9jb3B5OwoKICAvLyBI");
    sb.append("RUxQRVIgfCBjb25zdHJ1Y3QgYSBwYXRoIHRvCiAgdmFyIHBhdGhfdG8gPSBmdW5jdGlvbiAoc3MsIG9i");
    sb.append("aikgewogICAgaWYgKHNzLnBhcmVudCAhPSBudWxsKSB7CiAgICAgIHZhciBwZWVsID0ge307CiAgICAg");
    sb.append("IHBlZWxbc3MucGF0aF0gPSBvYmo7CiAgICAgIHJldHVybiBwYXRoX3RvKHNzLnBhcmVudCwgcGVlbCk7");
    sb.append("CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gb2JqOwogICAgfQogIH07CiAgc2VsZi5wYXRoVG8gPSBw");
    sb.append("YXRoX3RvOwoKICAvLyBIRUxQRVIgfCBnZXQgdGhlIHJvb3Qgb2YgdGhlIHNwZWNpZmljIHN0YXRlIChp");
    sb.append("LmUuIGVpdGhlciB0aGUgZGF0YSdzIHJvb3Qgb3IgdGhlIHZpZXcncyByb290KQogIHZhciByb290X29m");
    sb.append("ID0gZnVuY3Rpb24gKHNzKSB7CiAgICB2YXIgeCA9IHNzOwogICAgd2hpbGUgKHgucGFyZW50ICE9IG51");
    sb.append("bGwpIHsKICAgICAgeCA9IHgucGFyZW50OwogICAgfQogICAgcmV0dXJuIHg7CiAgfTsKICBzZWxmLnJv");
    sb.append("b3RPZiA9IHJvb3Rfb2Y7CgogIC8vIEhFTFBFUiB8IHJlbW92ZSBhbGwgdGhlIGNoaWxkcmVuIGZyb20g");
    sb.append("dGhlIGdpdmVuIERPTSBub2RlCiAgdmFyIG51a2UgPSBmdW5jdGlvbiAocGFyZW50KSB7CiAgICB2YXIg");
    sb.append("bGFzdCA9IHBhcmVudC5sYXN0Q2hpbGQ7CiAgICB3aGlsZSAobGFzdCkgewogICAgICBwYXJlbnQucmVt");
    sb.append("b3ZlQ2hpbGQobGFzdCk7CiAgICAgIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAgfQogIH07CiAg");
    sb.append("c2VsZi5udWtlID0gbnVrZTsKCiAgLy8gSEVMUEVSOiBkZWJvdW5jZSB0aGUgZ2l2ZW4gZnVuY3Rpb25h");
    sb.append("bCB3aGVuIHJhcGlkIGZ1bmN0aW9uIHNwcmVhZCBpcyBleHBlY3RlZAogIHZhciBkZWJvdW5jZSA9IGZ1");
    sb.append("bmN0aW9uIChtcywgZm9vKSB7CiAgICB2YXIgc3RhdHVzID0geyBpbmZsaWdodDogZmFsc2UsIHRpbWVv");
    sb.append("dXQ6IG51bGwgfTsKICAgIHN0YXR1cy5pbmZsaWdodCA9IGZhbHNlOwogICAgcmV0dXJuIGZ1bmN0aW9u");
    sb.append("ICgpIHsKICAgICAgaWYgKCFzdGF0dXMuaW5mbGlnaHQpIHsKICAgICAgICBzdGF0dXMuaW5mbGlnaHQg");
    sb.append("PSB0cnVlOwogICAgICAgIHN0YXR1cy50aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgICAgc3RhdHVzLmluZmxpZ2h0ID0gZmFsc2U7CiAgICAgICAgICBzdGF0dXMudGlt");
    sb.append("ZW91dCA9IG51bGw7CiAgICAgICAgICBmb28oKTsKICAgICAgICB9LCBtcyAvKiBtcyAqLyk7IC8vIGRl");
    sb.append("Ym91bmNlIHRoZSBwYXJhbWV0ZXJzCiAgICAgIH0KICAgIH07CiAgfTsKICBzZWxmLmRlYm91bmNlID0g");
    sb.append("ZGVib3VuY2U7CgogIC8vIEhFTFBFUiB8IHByZXBhcmUgYSBmcmVlIHVuc3Vic2NyaWJlIG9iamVjdAog");
    sb.append("IHZhciBtYWtlX3Vuc3ViID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgX19kYXRhOiBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgIH0sIF9fdmlldzogZnVuY3Rpb24gKCkgewogICAgICB9CiAgICB9Owog");
    sb.append("IH07CgogIC8vIEhFTFBFUiB8IGF1Z21lbnQgYW4gZXhpc3Rpbmcgb2JqZWN0IHdpdGggdW5zdWJzY3Jp");
    sb.append("YmUgZGF0YQogIHZhciBhZGRfdW5zdWIgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBvYmouX19kYXRhID0g");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgfTsKICAgIG9iai5fX3ZpZXcgPSBmdW5jdGlvbiAoKSB7CiAgICB9Owog");
    sb.append("IH07CgogIC8vIEhFTFBFUiB8IGZpcmUgdGhlIHVuc3Vic2NyaWJlIGNhbGxzIHdpdGhpbiBhbiBvYmpl");
    sb.append("Y3QKICB2YXIgZmlyZV91bnN1YiA9IGZ1bmN0aW9uICh1bnN1YikgewogICAgdW5zdWIuX19kYXRhKCk7");
    sb.append("CiAgICB1bnN1Yi5fX3ZpZXcoKTsKICB9OwoKICB2YXIgaXNFbXB0eURlbHRhID0gZnVuY3Rpb24oZGVs");
    sb.append("dGEpIHsKICAgIGlmICh0eXBlb2YoZGVsdGEpID09ICJmdW5jdGlvbiIpIHsKICAgICAgcmV0dXJuIGZh");
    sb.append("bHNlOwogICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGRlbHRhKSkgewogICAgICBmb3IgKHZhciBq");
    sb.append("ID0gMDsgaiA8IGRlbHRhLmxlbmd0aDsgaisrKSB7CiAgICAgICAgaWYgKCFpc0VtcHR5RGVsdGEoZGVs");
    sb.append("dGFbal0pKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVs");
    sb.append("c2UgaWYgKHR5cGVvZihkZWx0YSkgPT0gIm9iamVjdCIpIHsKICAgICAgZm9yICh2YXIgayBpbiBkZWx0");
    sb.append("YSkgewogICAgICAgIGlmICghaXNFbXB0eURlbHRhKGRlbHRhW2tdKSkgewogICAgICAgICAgcmV0dXJu");
    sb.append("IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvLyBI");
    sb.append("RUxQRVIgfCBzdWJzY3JpYmUgdG8gc3RhdGUgYW5kIHBvcHVsYXRlIHVuc3Vic2NyaWJlIG9iamVjdAog");
    sb.append("IHZhciBzdWJzY3JpYmVfc3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUsIHVuc3ViKSB7CiAgICAvLyAgJiYg");
    sb.append("IWlzRW1wdHlEZWx0YShzdGF0ZS5kYXRhKQogICAgdW5zdWIuX19kYXRhID0gZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgfTsKICAgIHVuc3ViLl9fdmlldyA9IGZ1bmN0aW9uICgpIHsKICAgIH07CgogICAgaWYgKHN0YXRl");
    sb.append("LmRhdGEgIT0gbnVsbCkgewogICAgICB2YXIgZGVsdGEgPSByb290X29mKHN0YXRlLmRhdGEpLmRlbHRh");
    sb.append("OwogICAgICBpZiAoIWlzRW1wdHlEZWx0YShkZWx0YSkpIHsKICAgICAgICB1bnN1Yi5fX2RhdGEgPSBz");
    sb.append("dGF0ZS5kYXRhLnRyZWUuc3Vic2NyaWJlKGRlbHRhKTsKICAgICAgfQogICAgfQogICAgLy8gICYmICFp");
    sb.append("c0VtcHR5RGVsdGEoc3RhdGUudmlldykKICAgIGlmIChzdGF0ZS52aWV3ICE9IG51bGwpIHsKICAgICAg");
    sb.append("dmFyIGRlbHRhID0gcm9vdF9vZihzdGF0ZS52aWV3KS5kZWx0YTsKICAgICAgaWYgKCFpc0VtcHR5RGVs");
    sb.append("dGEoZGVsdGEpKSB7CiAgICAgICAgdW5zdWIuX192aWV3ID0gc3RhdGUudmlldy50cmVlLnN1YnNjcmli");
    sb.append("ZShkZWx0YSk7CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBSVU5USU1FIHwgU3dpdGNoIHRvIHRoZSB2");
    sb.append("aWV3IG9iamVjdAogIHNlbGYucFYgPSBmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiB7IHNlcnZp");
    sb.append("Y2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJl");
    sb.append("bnQ6ICJ2aWV3IiB9OwogIH07CiAgc2VsZi5uZXdTdGF0ZVZpZXdPZiA9IHNlbGYucFY7CgogIC8vIFJV");
    sb.append("TlRJTUUgfCBTd2l0Y2ggdG8gdGhlIGRhdGEgb2JqZWN0CiAgc2VsZi5wRCA9IGZ1bmN0aW9uIChzdGF0");
    sb.append("ZSkgewogICAgcmV0dXJuIHsgc2VydmljZTogc3RhdGUuc2VydmljZSwgZGF0YTogc3RhdGUuZGF0YSwg");
    sb.append("dmlldzogc3RhdGUudmlldywgY3VycmVudDogImRhdGEiIH07CiAgfTsKICBzZWxmLm5ld1N0YXRlRGF0");
    sb.append("YU9mID0gc2VsZi5wRDsKCiAgLy8gUlVOVElNRSB8IFN3aXRjaCB0byB0aGUgcm9vdCBvYmplY3QgLyAo");
    sb.append("Um9vdCkKICBzZWxmLnBSID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICB2YXIgbmV4dCA9IHsgc2Vydmlj");
    sb.append("ZTogc3RhdGUuc2VydmljZSwgZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVu");
    sb.append("dDogc3RhdGUuY3VycmVudCB9OwogICAgdmFyIHByaW9yID0gbmV4dFtzdGF0ZS5jdXJyZW50XTsKICAg");
    sb.append("IHdoaWxlIChwcmlvciAhPSBudWxsKSB7CiAgICAgIG5leHRbc3RhdGUuY3VycmVudF0gPSBwcmlvcjsK");
    sb.append("ICAgICAgcHJpb3IgPSBwcmlvci5wYXJlbnQ7CiAgICB9CiAgICByZXR1cm4gbmV4dDsKICB9OwogIHNl");
    sb.append("bGYubmV3U3RhdGVSb290T2YgPSBzZWxmLnBSOwoKICAvLyBSVU5USU1FIHwgLi4vIChVcCkKICBzZWxm");
    sb.append("LnBVID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICB2YXIgbmV4dCA9IHsgc2VydmljZTogc3RhdGUuc2Vy");
    sb.append("dmljZSwgZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogc3RhdGUuY3Vy");
    sb.append("cmVudCB9OwogICAgdmFyIHByaW9yID0gbmV4dFtzdGF0ZS5jdXJyZW50XTsKICAgIGlmIChwcmlvci5w");
    sb.append("YXJlbnQgIT0gbnVsbCkgewogICAgICBuZXh0W3N0YXRlLmN1cnJlbnRdID0gcHJpb3IucGFyZW50Owog");
    sb.append("ICAgfQogICAgcmV0dXJuIG5leHQ7CiAgfTsKICBzZWxmLm5ld1N0YXRlUGFyZW50T2YgPSBzZWxmLnBV");
    sb.append("OwoKICAvLyBSVU5USU1FIHwgZGl2ZSBvbmUgbGV2ZWwgSW50byBwYXRoMS9wYXRoMi8uLi4uL3BhdGhO");
    sb.append("CiAgc2VsZi5wSSA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSkgewogICAgdmFyIHByaW9yID0gc3RhdGVb");
    sb.append("c3RhdGUuY3VycmVudF07CiAgICBpZiAocHJpb3IgPT0gbnVsbCkgewogICAgICBjb25zb2xlLmVycm9y");
    sb.append("KHN0YXRlLmN1cnJlbnQgKyAiIGlzIG5vdCBwcmVzZW50Iik7CiAgICAgIHJldHVybiBzdGF0ZTsKICAg");
    sb.append("IH0KICAgIGlmICghKG5hbWUgaW4gcHJpb3IuZGVsdGEpKSB7CiAgICAgIHByaW9yLmRlbHRhW25hbWVd");
    sb.append("ID0ge307CiAgICB9CiAgICB2YXIgbmV4dCA9IHsgc2VydmljZTogc3RhdGUuc2VydmljZSwgZGF0YTog");
    sb.append("c3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogc3RhdGUuY3VycmVudCB9OwogICAg");
    sb.append("bmV4dFtzdGF0ZS5jdXJyZW50XSA9IHsKICAgICAgdHJlZTogcHJpb3IudHJlZSwKICAgICAgZGVsdGE6");
    sb.append("IHByaW9yLmRlbHRhW25hbWVdLAogICAgICBwYXJlbnQ6IHByaW9yLAogICAgICBwYXRoOiBuYW1lCiAg");
    sb.append("ICB9OwogICAgaWYgKG5leHQuY3VycmVudCA9PSAiZGF0YSIpIHsKICAgICAgbmV4dC5kYXRhLmNvbm5l");
    sb.append("Y3Rpb24gPSBwcmlvci5jb25uZWN0aW9uOwogICAgfQogICAgcmV0dXJuIG5leHQ7CiAgfTsKICBzZWxm");
    sb.append("Lm5ld1N0YXRlRGl2ZUludG8gPSBzZWxmLnBJOwoKICAvLyBSVU5USU1FIHwgZXh0ZW5kIHRoZSBnaXZl");
    sb.append("biBzdGF0ZSB3aXRoIHRoZSB2aWV3IGhhdmluZyBhIHNlcGFyYXRlIGNoaWxkCiAgc2VsZi5wRVYgPSBm");
    sb.append("dW5jdGlvbiAoc3RhdGUsIG5hbWUpIHsKICAgIGlmICghKG5hbWUgaW4gc3RhdGUudmlldy5kZWx0YSkp");
    sb.append("IHsKICAgICAgc3RhdGUudmlldy5kZWx0YVtuYW1lXSA9IHt9OwogICAgfQogICAgcmV0dXJuIHsKICAg");
    sb.append("ICAgc2VydmljZTogc3RhdGUuc2VydmljZSwKICAgICAgZGF0YTogc3RhdGUuZGF0YSwKICAgICAgdmll");
    sb.append("dzogewogICAgICAgIHRyZWU6IHN0YXRlLnZpZXcudHJlZSwKICAgICAgICBkZWx0YTogc3RhdGUudmll");
    sb.append("dy5kZWx0YVtuYW1lXSwKICAgICAgICBwYXJlbnQ6IHN0YXRlLnZpZXcsCiAgICAgICAgcGF0aDogbmFt");
    sb.append("ZQogICAgICB9LAogICAgICBjdXJyZW50OiBzdGF0ZS5jdXJyZW50CiAgICB9OwogIH07CiAgc2VsZi5u");
    sb.append("ZXdTdGF0ZUNyZWF0ZVZpZXdDaGlsZCA9IHNlbGYucEVWOwoKICBzZWxmLnBJRSA9IGZ1bmN0aW9uIChz");
    sb.append("dGF0ZSwgbmFtZSwgZXhwYW5kVmlldykgewogICAgdmFyIG5leHQgPSBzZWxmLnBJKHN0YXRlLCBuYW1l");
    sb.append("KTsKICAgIGlmIChleHBhbmRWaWV3KSB7CiAgICAgIHJldHVybiBzZWxmLnBFVihuZXh0LCBuYW1lKTsK");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBuZXh0OwogICAgfQogIH07CgogIHZhciBmb3JrID0gZnVu");
    sb.append("Y3Rpb24gKHByaW9yU3RhdGUpIHsKICAgIHZhciBzdGF0ZSA9IHsKICAgICAgc2VydmljZTogcHJpb3JT");
    sb.append("dGF0ZS5zZXJ2aWNlLAogICAgICBkYXRhOiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLmRhdGEpLAog");
    sb.append("ICAgICB2aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICBjdXJyZW50OiBw");
    sb.append("cmlvclN0YXRlLmN1cnJlbnQKICAgIH07CiAgICBpZiAoc3RhdGUuZGF0YSAhPSBudWxsKSB7CiAgICAg");
    sb.append("IHN0YXRlLmRhdGEuY29ubmVjdGlvbiA9IHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uOwogICAgfQog");
    sb.append("ICAgcmV0dXJuIHN0YXRlOwogIH07CgogIC8vIFJVTlRJTUUgfCBzdWJzY3JpYmUgYmV0d2VlbiB0aGUg");
    sb.append("c3RhdGUgYW5kIHRoZSBvYmplY3QuCiAgLy8gV2hlbiB0aGUgbWVtYmVyIGZpZWxkIHdpdGhpbiBzdGF0");
    sb.append("ZSBvZiBuYW1lIGNoYW5nZXMsIGNvcHkgdGhhdCB2YWx1ZSBpbnRvIHRoZSBvYmogYW5kIHJ1biByZWNv");
    sb.append("bXB1dGUoKQogIHNlbGYuWSA9IGZ1bmN0aW9uIChzdGF0ZSwgb2JqLCBuYW1lLCByZWNvbXB1dGUpIHsK");
    sb.append("ICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAg");
    sb.append("ICAgIHJlY29tcHV0ZSgpOwogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9");
    sb.append("OwoKICBzZWxmLlkyID0gZnVuY3Rpb24gKHN0YXRlLCByLCBrZXksIG5hbWUsIHJlY29tcHV0ZSkgewog");
    sb.append("ICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgb2JqID0gci5fW2tleV07CiAg");
    sb.append("ICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICByZWNvbXB1dGUob2JqKTsKICAgICAgcmV0dXJuIHRy");
    sb.append("dWU7CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJ");
    sb.append("TUU6IGJ1aWxkIGFuIHJ4b2JqCiAgc2VsZi5SWCA9IGZ1bmN0aW9uICh2YXJzKSB7CiAgICB2YXIgbyA9");
    sb.append("IHt9OwogICAgby5fID0ge307CiAgICBmb3IgKHZhciBrID0gMDsgayA8IHZhcnMubGVuZ3RoOyBrKysp");
    sb.append("IHsKICAgICAgby5fW3ZhcnNba11dID0ge307CiAgICB9CiAgICBvLl9fID0gZnVuY3Rpb24oKSB7fTsK");
    sb.append("ICAgIHJldHVybiBvOwogIH07CgogIC8vIFJVTlRJTUUgfCBKdXN0IHN1YnNjcmliZWUgdmFsdWUgdG8g");
    sb.append("dGhlIG9iamVjdCBmaWVsZCBvZiBuYW1lIChuby1yZWNvbXB1dGUpCiAgc2VsZi5ZUyA9IGZ1bmN0aW9u");
    sb.append("IChzdGF0ZSwgb2JqLCBuYW1lKSB7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAg");
    sb.append("IG9ialtuYW1lXSA9IHZhbHVlOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CiAgICBzdWJzY3JpYmUo");
    sb.append("c3RhdGUsIG5hbWUsIHN1Yik7CiAgfTsKCiAgLy8gUlVOVElNRSB8ICJUZXh0IgogIHNlbGYuVCA9IGZ1");
    sb.append("bmN0aW9uICh0eCkgewogICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHR4KTsKICB9OwoK");
    sb.append("ICAvLyBjb252ZXJ0IGEgdmFsdWUgaW50byBhIGJvb2xlYW4KICBzZWxmLkIgPSBmdW5jdGlvbih2YWwp");
    sb.append("IHsKICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICByZXR1");
    sb.append("cm4gdmFsID09ICJ0cnVlIjsKICB9OwoKICAvLyBSVU5USU1FIHwgPHZpZXctd3JpdGUgbmFtZT0iIiB2");
    sb.append("YWx1ZT0iIj4KICBzZWxmLlZXID0gZnVuY3Rpb24oc3RhdGUsIG5hbWUsIHJ4T2JqKSB7CiAgICByeE9i");
    sb.append("ai5fXyA9IGRlYm91bmNlKDUwLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICB2");
    sb.append("YXIgdmFsdWUgPSByeE9iai52YWx1ZTsKICAgICAgaWYgKHR5cGVvZiAodmFsdWUpID09ICJmdW5jdGlv");
    sb.append("biIpIHsKICAgICAgICBvYmpbbmFtZV0gPSB2YWx1ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIG9i");
    sb.append("altuYW1lXSA9IHZhbHVlOwogICAgICB9CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmll");
    sb.append("dywgb2JqKTsKICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9KTsKICB9OwoK");
    sb.append("ICAvLyBSVU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLj4KICBzZWxmLkwgPSBmdW5jdGlvbiAoc3RhdGUs");
    sb.append("IG5hbWUpIHsKICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7CiAgICB2YXIg");
    sb.append("c3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRvbS5ub2RlVmFsdWUgPSB2YWx1ZTsKICAgIH07");
    sb.append("CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICByZXR1cm4gZG9tOwogIH07CgogIC8v");
    sb.append("IFJVTlRJTUUgfCA8bG9va3VwIHBhdGg9Li4uIHRyYW5zZm9ybT0iJHRyYW5zZm9ybSIgLz4KICBzZWxm");
    sb.append("LkxUID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCB0cmFuc2Zvcm0pIHsKICAgIHZhciBkb20gPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAg");
    sb.append("ICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgZG9tLm5vZGVWYWx1ZSA9IHRyYW5zZm9ybSh2");
    sb.append("YWx1ZSk7CiAgICAgIH0KICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICBy");
    sb.append("ZXR1cm4gZG9tOwogIH07CgogIHNlbGYuTGggPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUpIHsKICAgIHZh");
    sb.append("ciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICB2YXIgc3ViID0gZnVuY3Rp");
    sb.append("b24gKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgZG9tLmlubmVySFRN");
    sb.append("TCA9IHZhbHVlOwogICAgICB9CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwog");
    sb.append("ICAgcmV0dXJuIGRvbTsKICB9OwoKICAvLyBSVU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLiB0cmFuc2Zv");
    sb.append("cm09IiR0cmFuc2Zvcm0iIC8+CiAgc2VsZi5MVGRUID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCB0cmFu");
    sb.append("c2Zvcm0sIGZyZXEpIHsKICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7CiAg");
    sb.append("ICAvLyBjcmVhdGUgdGhlIG5leHVzIG9iamVjdAogICAgdmFyIG9iaiA9IHt9OwogICAgb2JqLmZyZXEg");
    sb.append("PSBmcmVxOwogICAgb2JqLnZhbHVlID0gIiI7CgogICAgLy8gdXBkYXRlIHdpbGwgZXhlY3V0ZSB0aGUg");
    sb.append("dHJhbnNmb3JtIG9uIHRoZSB2YWx1ZQogICAgb2JqLnVwZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICBk");
    sb.append("b20ubm9kZVZhbHVlID0gdHJhbnNmb3JtKHRoaXMudmFsdWUpOwogICAgfS5iaW5kKG9iaik7CgogICAg");
    sb.append("Ly8gc3Vic2NyaXB0aW9uIHdpbGwgc3luYyB0aGUgdmFsdWUKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAo");
    sb.append("dmFsdWUpIHsKICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHsKICAgICAgICB0aGlzLnZhbHVlID0gdmFs");
    sb.append("dWU7CiAgICAgICAgdGhpcy51cGRhdGUoKTsKICAgICAgfQogICAgfS5iaW5kKG9iaik7CgogICAgLy8g");
    sb.append("cmVmcmVzaCB3aWxsIHJlLWV4ZWN1dGUgdGhlIHVwZGF0ZSAoYW5kIHRodXMgdGhlIHRyYW5zZm9ybSkK");
    sb.append("ICAgIG9iai5yZWZyZXNoID0gZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgIGlm");
    sb.append("IChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsgLy8gd2lsbCBydW4gc28gbG9uZyBhcyB0aGUg");
    sb.append("RE9NIGNvbnRhaW5zIHRoZSBub2RlIHdlIG1hbmlwdWxhdGVkCiAgICAgICAgd2luZG93LnNldFRpbWVv");
    sb.append("dXQodGhpcy5yZWZyZXNoLCB0aGlzLmZyZXEpOwogICAgICB9CiAgICB9LmJpbmQob2JqKTsKICAgIC8v");
    sb.append("IGtpY2sgb2ZmIHRoZSBhdXRvIHRyYW5zZm9ybQogICAgd2luZG93LnNldFRpbWVvdXQob2JqLnJlZnJl");
    sb.append("c2gsIGZyZXEpOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogICAgcmV0dXJuIGRvbTsK");
    sb.append("ICB9OwoKICAvLyBSVU5USU1FIHwgPHRhZz4KICBzZWxmLkUgPSBmdW5jdGlvbiAodGFnLCBucykgewog");
    sb.append("ICAgaWYgKG5zID09IHVuZGVmaW5lZCB8fCBucyA9PSBudWxsKSB7CiAgICAgIHZhciBkb20gPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7CiAgICAgIGlmICh0YWcgPT0gInNlbGVjdCIpIHsKICAgICAg");
    sb.append("ICBkb20uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7IGRvbS5yeHZhbHVlID0g");
    sb.append("ZG9tLnZhbHVlOyB9KTsKICAgICAgfQogICAgICByZXR1cm4gZG9tOwogICAgfSBlbHNlIHsKICAgICAg");
    sb.append("dmFyIHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgdGFnKTsKICAgICAgcmVzdWx0");
    sb.append("LnNldEF0dHJpYnV0ZSgieG1sbnMiLCBucyk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfTsK");
    sb.append("CiAgc2VsZi5DU3QgPSBmdW5jdGlvbiAocGFyZW50LCBzdGF0ZSwgY2hpbGRNYWtlckNvbm5lY3RlZCwg");
    sb.append("Y2hpbGRNYWtlckRpc2Nvbm5lY3RlZCkgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAg");
    sb.append("aWYgKCFzdGF0ZS5kYXRhLmNvbm5lY3Rpb24pIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgc3RhdGUu");
    sb.append("ZGF0YS5jb25uZWN0aW9uLmNvbm5lY3RlZChmdW5jdGlvbihjcykgewogICAgICBpZiAodGhpcy5wcmlv");
    sb.append("ciA9PSBjcykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBudWtlKHBhcmVudCk7CiAgICAg");
    sb.append("IGZpcmVfdW5zdWIodW5zdWIpOwogICAgICB0aGlzLnByaW9yID0gY3M7CiAgICAgIHZhciBuZXdTdGF0");
    sb.append("ZSA9IGZvcmsoc3RhdGUpOwogICAgICBpZiAoY3MpIHsKICAgICAgICBjaGlsZE1ha2VyQ29ubmVjdGVk");
    sb.append("KHBhcmVudCwgbmV3U3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIGNoaWxkTWFrZXJEaXNjb25u");
    sb.append("ZWN0ZWQocGFyZW50LCBuZXdTdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKG5ld1N0");
    sb.append("YXRlLCB1bnN1Yik7CiAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHBhcmVudCk7CiAg");
    sb.append("ICB9LmJpbmQoe3ByaW9yOm51bGx9KSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxsb2NhbC1zdG9yYWdl");
    sb.append("LXBvbGwga2V5PSRrZXkgW21zPSRtc10+CiAgc2VsZi5Mb1N0UG8gPSBmdW5jdGlvbihwYXJlbnQsIHBy");
    sb.append("aW9yU3RhdGUsIHJ4T2JqLCBjaGlsZE1ha2VyRm91bmQsIGNoaWxkTWFrZXJOb3RGb3VuZCkgewogICAg");
    sb.append("dmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgdmFyIHNtID0ge307CiAgICBzbS5rZXkgPSBudWxs");
    sb.append("OwogICAgc20ubXMgPSA1MDAwOwogICAgc20ubGFzdCA9ICIhIjsKICAgIHNtLnAgPSBmdW5jdGlvbigp");
    sb.append("IHsKICAgICAgaWYgKHRoaXMua2V5ID09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAg");
    sb.append("ICAgdmFyIHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5rZXkpOwogICAgICBpZiAodmFs");
    sb.append("dWUgPT0gdGhpcy5sYXN0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMubGFzdCA9");
    sb.append("IHZhbHVlOwogICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICB2");
    sb.append("YXIgdHJlZSA9IG5ldyBBZGFtYVRyZWUoKTsKICAgICAgdmFyIHN0YXRlID0gewogICAgICAgIHNlcnZp");
    sb.append("Y2U6IHByaW9yU3RhdGUuc2VydmljZSwKICAgICAgICBkYXRhOiB7IGNvbm5lY3Rpb246IHByaW9yU3Rh");
    sb.append("dGUuY29ubmVjdGlvbiwgdHJlZTogdHJlZSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51");
    sb.append("bGwgfSwKICAgICAgICB2aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICAg");
    sb.append("IGN1cnJlbnQ6ICJkYXRhIgogICAgICB9OwogICAgICBpZiAodmFsdWUgPT0gbnVsbCkgewogICAgICAg");
    sb.append("IGNoaWxkTWFrZXJOb3RGb3VuZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICBzdWJzY3JpYmVfc3RhdGUo");
    sb.append("c3RhdGUsIHVuc3ViKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGlsZE1ha2VyRm91bmQocGFyZW50");
    sb.append("LCBzdGF0ZSk7CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgICAgdHJl");
    sb.append("ZS51cGRhdGUodHJlZS5NYWtlRGVsdGEoSlNPTi5wYXJzZSh2YWx1ZSkpKTsKICAgICAgfQoKICAgIH0u");
    sb.append("YmluZChzbSk7CiAgICByeE9iai5fXyA9IGRlYm91bmNlKDUwLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlm");
    sb.append("ICgna2V5JyBpbiByeE9iaikgewogICAgICAgIHRoaXMua2V5ID0gcnhPYmoua2V5OwogICAgICB9CiAg");
    sb.append("ICAgIGlmICgnbXMnIGluIHJ4T2JqKSB7CiAgICAgICAgdGhpcy5tcyA9IHBhcnNlSW50KHJ4T2JqLm1z");
    sb.append("KTsKICAgICAgICBpZiAoaXNOYU4odGhpcy5tcykpIHsKICAgICAgICAgIHRoaXMubXMgPSA1MDAwOwog");
    sb.append("ICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnAoKTsKICAgIH0uYmluZChzbSkpOwoKICAgIHNtLnRp");
    sb.append("bWVvdXQgPSBmdW5jdGlvbigpIHsKICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMocGFyZW50");
    sb.append("KSkgewogICAgICAgIHRoaXMucCgpOwogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMudGltZW91");
    sb.append("dCwgdGhpcy5tcyk7CiAgICAgIH0KICAgIH0uYmluZChzbSk7CiAgICB3aW5kb3cuc2V0VGltZW91dChz");
    sb.append("bS50aW1lb3V0LCA1MCk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxkb2N1bWVudC1nZXQgc3BhY2U9IiRz");
    sb.append("cGFjZSIga2V5PSIka2V5IiB1cmw9IiRwYXRoIiBzZWFyY2g6eD0iLi4uIiAuLi4+CiAgc2VsZi5EY0cg");
    sb.append("PSBmdW5jdGlvbihwYXJlbnQsIHByaW9yU3RhdGUsIHJ4T2JqLCBjaGlsZE1ha2VyRmV0Y2hlZCwgY2hp");
    sb.append("bGRNYWtlckZhaWxlZCkgewogICAgLy8gVE9ETwogIH07CgogIC8vIFJVTlRJTUUgfCA8ZG9tYWluLWdl");
    sb.append("dCB1cmw9InBhdGgiIHNlYXJjaDp4PSIuLi4iIC4uLj4KICBzZWxmLkRHID0gZnVuY3Rpb24ocGFyZW50");
    sb.append("LCBwcmlvclN0YXRlLCByeE9iaiwgY2hpbGRNYWtlckZldGNoZWQsIGNoaWxkTWFrZXJGYWlsZWQpIHsK");
    sb.append("ICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIHJ4T2JqLl9fID0gZGVib3VuY2UoNTAsIGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgaWYgKCEoJ3VybCcgaW4gcnhPYmopKSB7CiAgICAgICAgcmV0dXJuOwog");
    sb.append("ICAgICB9CiAgICAgIHZhciBhcmdzID0gW107CiAgICAgIHZhciBpZGVudGl0eSA9IG51bGw7CiAgICAg");
    sb.append("IGZvciAodmFyIGFyZyBpbiByeE9iaikgewogICAgICAgIHZhciB2YWwgPSByeE9ialthcmddOwogICAg");
    sb.append("ICAgIHN3aXRjaCAoYXJnKSB7CiAgICAgICAgICBjYXNlICJfXyI6CiAgICAgICAgICBjYXNlICJfIjoK");
    sb.append("ICAgICAgICAgIGNhc2UgInVybCI6CiAgICAgICAgICBjYXNlICJyZWRpcmVjdCI6CiAgICAgICAgICAg");
    sb.append("IGJyZWFrOwogICAgICAgICAgY2FzZSAiaWRlbnRpdHkiOgogICAgICAgICAgICBpZiAodHlwZW9mKHZh");
    sb.append("bCkgPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICBpZGVudGl0eSA9IHJ4T2JqW2FyZ107CiAgICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBh");
    sb.append("cmdzLnB1c2goYXJnICsgIj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkpOwogICAgICAgIH0KICAg");
    sb.append("ICAgfQogICAgICB2YXIgdXJsID0gcnhPYmoudXJsICsgKGFyZ3MubGVuZ3RoID4gMCA/ICI/IiArIGFy");
    sb.append("Z3Muam9pbigiJiIpIDogIiIpOwogICAgICB0aGlzLmdlbiArKzsKICAgICAgdmFyIHNlbGYgPSB0aGlz");
    sb.append("OwogICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAub25yZWFk");
    sb.append("eXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLnhodHRwLnJlYWR5U3Rh");
    sb.append("dGUgPT0gNCAmJiB0aGlzLmdlbiA9PSBzZWxmLmdlbikgewogICAgICAgICAgZmlyZV91bnN1Yih1bnN1");
    sb.append("Yik7CiAgICAgICAgICBudWtlKHBhcmVudCk7CiAgICAgICAgICB2YXIgdHJlZSA9IG5ldyBBZGFtYVRy");
    sb.append("ZWUoKTsKICAgICAgICAgIHZhciBzdGF0ZSA9IHsKICAgICAgICAgICAgc2VydmljZTogcHJpb3JTdGF0");
    sb.append("ZS5zZXJ2aWNlLAogICAgICAgICAgICBkYXRhOiB7IGNvbm5lY3Rpb246IHByaW9yU3RhdGUuY29ubmVj");
    sb.append("dGlvbiwgdHJlZTogdHJlZSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAg");
    sb.append("ICAgICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICAgICAg");
    sb.append("Y3VycmVudDogImRhdGEiCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmICh0aGlzLnhodHRwLnN0YXR1");
    sb.append("cyA9PSAyMDApIHsKICAgICAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnhodHRwLmdldFJlc3BvbnNlSGVh");
    sb.append("ZGVyKCJDb250ZW50LVR5cGUiKTsKICAgICAgICAgICAgaWYgKHR5cGUgPT0gImFwcGxpY2F0aW9uL2pz");
    sb.append("b24iKSB7CiAgICAgICAgICAgICAgdmFyIHRvUHVzaCA9IHRyZWUuTWFrZURlbHRhKEpTT04ucGFyc2Uo");
    sb.append("dGhpcy54aHR0cC5yZXNwb25zZVRleHQpKTsKICAgICAgICAgICAgICBjaGlsZE1ha2VyRmV0Y2hlZChw");
    sb.append("YXJlbnQsIHN0YXRlKTsKICAgICAgICAgICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsK");
    sb.append("ICAgICAgICAgICAgICB0cmVlLnVwZGF0ZSh0b1B1c2gpOwogICAgICAgICAgICB9IGVsc2UgewogICAg");
    sb.append("ICAgICAgICAgIGNoaWxkTWFrZXJGYWlsZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgICAgICAgc3Vi");
    sb.append("c2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICAgIGNoaWxkTWFrZXJGYWlsZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgICAgIHN1");
    sb.append("YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfS5i");
    sb.append("aW5kKHtnZW46c2VsZi5nZW4sIHhodHRwOnhodHRwfSk7CiAgICAgIHhodHRwLm9wZW4oIkdFVCIsICIv");
    sb.append("fmQiICsgdXJsLCB0cnVlKTsKICAgICAgaWYgKGlkZW50aXR5ICE9IG51bGwpIHsKICAgICAgICB4aHR0");
    sb.append("cC5zZXRSZXF1ZXN0SGVhZGVyKCJBdXRob3JpemF0aW9uIiwgIkJlYXJlciAiICsgaWRlbnRpdHkpOwog");
    sb.append("ICAgICB9CiAgICAgIHhodHRwLndpdGhDcmVkZW50aWFscyA9IHRydWU7CiAgICAgIHhodHRwLnNlbmQo");
    sb.append("KTsKICAgIH0uYmluZCh7dXJsOiIiLCBnZW46MH0pKTsKICAgIHJ4T2JqLl9fKCk7CiAgfTsKCiAgLy8g");
    sb.append("UlVOVElNRSB8IDxwaWNrIG5hbWU9Li4uPgogIHNlbGYuUCA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9y");
    sb.append("U3RhdGUsIHJ4T2JqLCBjaGlsZE1ha2VyQ29ubmVjdGVkLCBjaGlsZE1ha2VyRGlzY29ubmVjdGVkLCBr");
    sb.append("ZWVwT3BlbikgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgcnhPYmouX18gPSBmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICAgIGlmICghKCduYW1lJyBpbiByeE9iaikpIHsKICAgICAgICByZXR1cm47CiAg");
    sb.append("ICAgIH0KICAgICAgaWYgKHRoaXMubmFtZSA9PSByeE9iai5uYW1lKSB7CiAgICAgICAgcmV0dXJuOwog");
    sb.append("ICAgICB9CiAgICAgIHZhciBjbyA9IGdldF9jb25uZWN0aW9uX29iaihyeE9iai5uYW1lKTsKICAgICAg");
    sb.append("dGhpcy5uYW1lID0gcnhPYmoubmFtZTsKICAgICAgY28uY29ubmVjdGVkKGZ1bmN0aW9uIChjcykgewog");
    sb.append("ICAgICAgIGlmICh0aGlzLnJlbmRlcmVkICYmIGtlZXBPcGVuKSB7CiAgICAgICAgICByZXR1cm47CiAg");
    sb.append("ICAgICAgfQogICAgICAgIG51a2UocGFyZW50KTsKICAgICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAg");
    sb.append("ICAgICB2YXIgc3RhdGUgPSB7CiAgICAgICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2UsCiAg");
    sb.append("ICAgICAgICBkYXRhOiB7IGNvbm5lY3Rpb246IGNvLCB0cmVlOiBjby50cmVlLCBkZWx0YToge30sIHBh");
    sb.append("cmVudDogbnVsbCwgcGF0aDogbnVsbCB9LAogICAgICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJp");
    sb.append("b3JTdGF0ZS52aWV3KSwKICAgICAgICAgIGN1cnJlbnQ6ICJkYXRhIgogICAgICAgIH07CiAgICAgICAg");
    sb.append("aWYgKGNzKSB7CiAgICAgICAgICB0aGlzLnJlbmRlcmVkID0gdHJ1ZTsKICAgICAgICAgIGNoaWxkTWFr");
    sb.append("ZXJDb25uZWN0ZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNoaWxk");
    sb.append("TWFrZXJEaXNjb25uZWN0ZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgfQogICAgICAgIHN1YnNjcmli");
    sb.append("ZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAgICAgIC8vIFRPRE86IHJldHVybiBmYWxzZSB0byB1bnN1");
    sb.append("YgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9LmJpbmQodGhpcykpOwogICAgfS5iaW5kKHsgbmFt");
    sb.append("ZTogIiIsIHJlbmRlcmVkOmZhbHNlIH0pOwogIH07CgogIC8vIFJVTlRJTUUgfCA8dGVtcGxhdGUgbmFt");
    sb.append("ZT0iLi4uIj4KICBzZWxmLlRQID0gZnVuY3Rpb24gKG5hbWUsIGZvbykgewogICAgdGVtcGxhdGVzW25h");
    sb.append("bWVdID0gZm9vOwogIH07CgogIC8vIFJVTlRJTUUgfCA8dGFnIHJ4OnRlbXBsYXRlPSRuYW1lPgogIHNl");
    sb.append("bGYuVVQgPSBmdW5jdGlvbiAocGFyZW50LCBzdGF0ZSwgbmFtZSwgY2hpbGRfbWFrZXIpIHsKICAgIHZh");
    sb.append("ciBmb28gPSB0ZW1wbGF0ZXNbbmFtZV07CiAgICBpZiAodHlwZW9mKGZvbykgPT0gImZ1bmN0aW9uIikg");
    sb.append("ewogICAgICBmb28ocGFyZW50LCBzdGF0ZSwgY2hpbGRfbWFrZXIpOwogICAgfSBlbHNlIHsKICAgICAg");
    sb.append("Y29uc29sZS5lcnJvcigiZmFpbGVkIHRvIGZpbmQgdGVtcGxhdGU6ICIgKyBuYW1lKTsKICAgIH0KICB9");
    sb.append("OwoKICAvLyBSVU5USU1FIHwgPHRhZyByeDpzd2l0Y2g9cGF0aCAuLj4KICBzZWxmLlNXID0gZnVuY3Rp");
    sb.append("b24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgbmFtZSwgY2hpbGRyZW5NYWtlcikgewogICAgdmFyIHN3c3Qg");
    sb.append("PSB7IHByaW9yOiBudWxsIH07CiAgICBhZGRfdW5zdWIoc3dzdCk7CiAgICB2YXIgc3ViID0gZnVuY3Rp");
    sb.append("b24gKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSA9PSB0aGlzLnByaW9yKSB7CiAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICB9CiAgICAgIHRoaXMucHJpb3IgPSB2YWx1ZTsKICAgICAgZmlyZV91bnN1Yih0aGlzKTsK");
    sb.append("ICAgICAgbnVrZShwYXJlbnQpOwogICAgICB2YXIgc3RhdGUgPSBmb3JrKHByaW9yU3RhdGUpOwogICAg");
    sb.append("ICBjaGlsZHJlbk1ha2VyKHBhcmVudCwgc2VsZi5wRChzdGF0ZSksICIiICsgdmFsdWUpOwogICAgICBz");
    sb.append("dWJzY3JpYmVfc3RhdGUoc3RhdGUsIHRoaXMpOwogICAgfS5iaW5kKHN3c3QpOwogICAgc3Vic2NyaWJl");
    sb.append("KHByaW9yU3RhdGUsIG5hbWUsIHN1Yik7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0YWcgcng6aXRlcmF0");
    sb.append("ZT1wYXRoIC4uLj4KICBzZWxmLklUID0gZnVuY3Rpb24gKHBhcmVudERvbSwgc3RhdGUsIG5hbWUsIGV4");
    sb.append("cGFuZFZpZXcsIG1ha2VyKSB7CiAgICB2YXIgaXRfc3RhdGUgPSBzZWxmLnBJRShzdGF0ZSwgbmFtZSwg");
    sb.append("ZXhwYW5kVmlldyk7CiAgICB2YXIgZG9tQnlLZXkgPSB7fTsKICAgIHZhciB2aWV3VW5TdWJCeUtleSA9");
    sb.append("IHt9OwogICAgdmFyIGtpbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiB2aWV3");
    sb.append("VW5TdWJCeUtleSkgewogICAgICAgIGZpcmVfdW5zdWIodmlld1VuU3ViQnlLZXlba2V5XSk7CiAgICAg");
    sb.append("ICAgZGVsZXRlIHZpZXdVblN1YkJ5S2V5W2tleV07CiAgICAgIH0KICAgICAgZm9yICh2YXIga2V5IGlu");
    sb.append("IGRvbUJ5S2V5KSB7CiAgICAgICAgZGVsZXRlIGRvbUJ5S2V5W2tleV07CiAgICAgIH0KICAgIH07Cgog");
    sb.append("ICAgdmFyIHN1YiA9IHsKICAgICAgIisiOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgdmFyIG5ld19z");
    sb.append("dGF0ZSA9IGZvcmsoc2VsZi5wSUUoaXRfc3RhdGUsIGtleSwgZXhwYW5kVmlldykpOwogICAgICAgIHZh");
    sb.append("ciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgICAgICB2YXIgZG9tID0gbWFrZXIobmV3X3N0YXRlKTsK");
    sb.append("ICAgICAgICBkb21CeUtleVtrZXldID0gZG9tOwogICAgICAgIHZpZXdVblN1YkJ5S2V5W2tleV0gPSB1");
    sb.append("bnN1YjsKICAgICAgICBwYXJlbnREb20uYXBwZW5kKGRvbSk7CiAgICAgICAgdmFyIGl0ZW1fZGVsdGEg");
    sb.append("PSBuZXdfc3RhdGUuZGF0YS5kZWx0YTsKICAgICAgICBuZXdfc3RhdGUuZGF0YS5kZWx0YSA9IHt9Owog");
    sb.append("ICAgICAgIHN1YnNjcmliZV9zdGF0ZShuZXdfc3RhdGUsIHVuc3ViKTsKICAgICAgICBpZiAoZXhwYW5k");
    sb.append("VmlldykgewogICAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXRoX3RvKG5ld19zdGF0ZS52");
    sb.append("aWV3LCB7IiRrZXkiOiBrZXl9KSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gaXRlbV9kZWx0YTsK");
    sb.append("ICAgICAgfSwKICAgICAgIi0iOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKGtleSBpbiBkb21C");
    sb.append("eUtleSkgewogICAgICAgICAgcGFyZW50RG9tLnJlbW92ZUNoaWxkKGRvbUJ5S2V5W2tleV0pOwogICAg");
    sb.append("ICAgICAgZGVsZXRlIGRvbUJ5S2V5W2tleV07CiAgICAgICAgfQogICAgICAgIGlmIChrZXkgaW4gdmll");
    sb.append("d1VuU3ViQnlLZXkpIHsKICAgICAgICAgIGZpcmVfdW5zdWIodmlld1VuU3ViQnlLZXlba2V5XSk7CiAg");
    sb.append("ICAgICAgICBkZWxldGUgdmlld1VuU3ViQnlLZXlba2V5XTsKICAgICAgICB9CiAgICAgIH0sCiAgICAg");
    sb.append("ICJ+IjogZnVuY3Rpb24gKG9yZCkgewogICAgICAgIHZhciB2YWx1ZVRvU2V0ID0gZmFsc2U7CiAgICAg");
    sb.append("ICAgLy8gdGhlIHZhbHVlcyBhcmUgZmlsbGluZyB1cCBBRlRFciB0aGUgdmFsdWUgd2FzIHNldCwKICAg");
    sb.append("ICAgICAvLyBzbyBkZXRlY3QgdGhlIGFic2VuY2Ugb2YgYSB2YWx1ZSBhbG9uZyB3aXRoIHRoZSBleGlz");
    sb.append("dGVuY2Ugb2YgYSB2YWx1ZQogICAgICAgIGlmICghcGFyZW50RG9tLnZhbHVlICYmIHBhcmVudERvbS5y");
    sb.append("eHZhbHVlICE9ICIiKSB7CiAgICAgICAgICB2YWx1ZVRvU2V0ID0gcGFyZW50RG9tLnJ4dmFsdWU7CiAg");
    sb.append("ICAgICAgICAvLyB0aGlzIHZhbHVlLCB3ZSB3YW50IHRvIHJlc3RvcmUgb25jZQogICAgICAgIH0KICAg");
    sb.append("ICAgICBudWtlKHBhcmVudERvbSk7CiAgICAgICAgaWYgKG9yZCA9PSBudWxsKSB7CiAgICAgICAgICBr");
    sb.append("aWxsKCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsgPSAwOyBr");
    sb.append("IDwgb3JkLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBwYXJlbnREb20uYXBwZW5kKGRvbUJ5S2V5W29y");
    sb.append("ZFtrXV0pOwogICAgICAgIH0KICAgICAgICBpZiAodmFsdWVUb1NldCkgewogICAgICAgICAgcGFyZW50");
    sb.append("RG9tLnZhbHVlID0gdmFsdWVUb1NldDsKICAgICAgICB9CiAgICAgICAgcGFyZW50RG9tLmRpc3BhdGNo");
    sb.append("RXZlbnQobmV3IEV2ZW50KCJvcmRlcmVkIikpOwogICAgICB9CiAgICB9OwogICAgc3Vic2NyaWJlKHN0");
    sb.append("YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4uIHJ4Om1vbml0b3I9InN0");
    sb.append("YXRlLXBhdGgiIHJ4OnJpc2U9ImNvbW1hbmRzLi4uIiByeDpmYWxsPSJjb21tYW5kcy4uLiIKICBzZWxm");
    sb.append("Lk1OID0gZnVuY3Rpb24gKGRvbSwgc3RhdGUsIG5hbWUsIHNraXBGaXJzdCwgZGVsYXkpIHsKICAgIHZh");
    sb.append("ciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24o");
    sb.append("KSB7CiAgICAgICAgdmFyIG4gPSAwOwogICAgICAgIHRyeSB7CiAgICAgICAgICBuID0gdHlwZW9mICh2");
    sb.append("YWx1ZSkgPT0gJ251bWJlcicgPyB2YWx1ZSA6IHBhcnNlSW50KHZhbHVlKTsKICAgICAgICB9IGNhdGNo");
    sb.append("IChmYWlsZWRQYXJzaW5nTikgewogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5maXJzdCkgewogICAg");
    sb.append("ICAgICAgdGhpcy5hdCA9IG47CiAgICAgICAgICB0aGlzLmZpcnN0ID0gZmFsc2U7CiAgICAgICAgICBy");
    sb.append("ZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmF0IDwgbikgewogICAgICAgICAgdmFyIGUg");
    sb.append("PSBuZXcgRXZlbnQoInJpc2UiKTsKICAgICAgICAgIGRvbS5kaXNwYXRjaEV2ZW50KGUpOwogICAgICAg");
    sb.append("IH0gZWxzZSBpZiAodGhpcy5hdCA+IG4pIHsKICAgICAgICAgIHZhciBlID0gbmV3IEV2ZW50KCJmYWxs");
    sb.append("Iik7CiAgICAgICAgICBkb20uZGlzcGF0Y2hFdmVudChlKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5h");
    sb.append("dCA9IG47CiAgICAgIH0uYmluZCh0aGlzKSwgdGhpcy5kZWxheSk7CiAgICB9LmJpbmQoe2F0Oi0xLCBm");
    sb.append("aXJzdDpza2lwRmlyc3QsIGRlbGF5OmRlbGF5ID8gZGVsYXkgOiAxMH0pOwogICAgc3Vic2NyaWJlKHN0");
    sb.append("YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4uIHJ4OnJlcGVhdD0kPgog");
    sb.append("IHNlbGYuUlAgPSBmdW5jdGlvbiAocGFyZW50RG9tLCBzdGF0ZSwgbmFtZSwgZXhwYW5kVmlldywgbWFr");
    sb.append("ZXIpIHsKICAgIHZhciBpdF9zdGF0ZSA9IHNlbGYucElFKHN0YXRlLCAiJCIgKyBuYW1lLCBleHBhbmRW");
    sb.append("aWV3KTsKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG4gPSAwOwogICAg");
    sb.append("ICB0cnkgewogICAgICAgIG4gPSB0eXBlb2YgKHZhbHVlKSA9PSAnbnVtYmVyJyA/IHZhbHVlIDogcGFy");
    sb.append("c2VJbnQodmFsdWUpOwogICAgICB9IGNhdGNoIChmYWlsZWRQYXJzaW5nTikgewogICAgICB9CiAgICAg");
    sb.append("IHdoaWxlICh0aGlzLmF0IDwgbiAtIDEpIHsKICAgICAgICB0aGlzLmF0ICsrOwogICAgICAgIHRoaXMu");
    sb.append("dHJhY2sgKys7CiAgICAgICAgdmFyIG5ld19zdGF0ZSA9IGZvcmsoc2VsZi5wSUUoaXRfc3RhdGUsIHRo");
    sb.append("aXMudHJhY2sgKyAiIiwgZXhwYW5kVmlldykpOwogICAgICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIo");
    sb.append("KTsKICAgICAgICB2YXIgZG9tID0gbWFrZXIoc2VsZi5wRChuZXdfc3RhdGUpKTsKICAgICAgICB0aGlz");
    sb.append("Lml0ZW1zW3RoaXMuYXRdID0ge3Vuc3ViOnVuc3ViLCBkb206ZG9tfTsKICAgICAgICBwYXJlbnREb20u");
    sb.append("YXBwZW5kKGRvbSk7CiAgICAgICAgaWYgKGV4cGFuZFZpZXcpIHsKICAgICAgICAgIHN0YXRlLnZpZXcu");
    sb.append("dHJlZS51cGRhdGUocGF0aF90byhuZXdfc3RhdGUudmlldywgeyIkaW5kZXgiOiB0aGlzLnRyYWNrfSkp");
    sb.append("OwogICAgICAgIH0KICAgICAgICBzdWJzY3JpYmVfc3RhdGUobmV3X3N0YXRlLCB1bnN1Yik7CiAgICAg");
    sb.append("IH0KICAgICAgd2hpbGUgKHRoaXMuYXQgPj0gbiAmJiB0aGlzLmF0ID49IDApIHsKICAgICAgICBmaXJl");
    sb.append("X3Vuc3ViKHRoaXMuaXRlbXNbdGhpcy5hdF0udW5zdWIpOwogICAgICAgIHBhcmVudERvbS5yZW1vdmVD");
    sb.append("aGlsZCh0aGlzLml0ZW1zW3RoaXMuYXRdLmRvbSk7CiAgICAgICAgdGhpcy5pdGVtc1t0aGlzLmF0XSA9");
    sb.append("IG51bGw7CiAgICAgICAgZGVsZXRlIHRoaXMuaXRlbXNbdGhpcy5hdF07CiAgICAgICAgdGhpcy5hdC0t");
    sb.append("OwogICAgICB9CiAgICB9LmJpbmQoe2l0ZW1zOltdLCBhdDotMSwgdHJhY2s6MH0pOwogICAgc3Vic2Ny");
    sb.append("aWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogIH0KICB2YXIgZmluZCA9IGZ1bmN0aW9uIChzdGF0ZSwgY2hh");
    sb.append("bm5lbCwga2V5LCB2YWx1ZSkgewogICAgaWYgKGNoYW5uZWwgaW4gc3RhdGVbImRhdGEiXS5jb25uZWN0");
    sb.append("aW9uLm91dHN0YW5kaW5nKSB7CiAgICAgIHZhciBhcnIgPSBzdGF0ZVsiZGF0YSJdLmNvbm5lY3Rpb24u");
    sb.append("b3V0c3RhbmRpbmdbY2hhbm5lbF0ub3B0aW9uczsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBhcnIu");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICB2YXIgcyA9IGFycltrXTsKICAgICAgICBpZiAoa2V5IGluIHMg");
    sb.append("JiYgc1trZXldID09IHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gczsKICAgICAgICB9CiAgICAgIH0K");
    sb.append("ICAgICAgcmV0dXJuIG51bGw7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9");
    sb.append("OwoKICB2YXIgY3VzdG9tcyA9IHt9OwoKICBzZWxmLlBSQ1VBQyA9IGZ1bmN0aW9uIChuYW1lLCBmb28p");
    sb.append("IHsKICAgIGN1c3RvbXNbbmFtZV0gPSBmb287CiAgfTsKCiAgc2VsZi5leENDID0gZnVuY3Rpb24gKGRv");
    sb.append("bSwgdHlwZSwgc3RhdGUsIGN1c3RvbUNvbW1hbmROYW1lKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRv");
    sb.append("bSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoY3VzdG9tQ29tbWFuZE5hbWUgaW4gY3VzdG9t");
    sb.append("cykgewogICAgICAgIGN1c3RvbXNbY3VzdG9tQ29tbWFuZE5hbWVdKHN0YXRlLCBkb20pOwogICAgICB9");
    sb.append("CiAgICB9KTsKICB9OwoKICAvLyBjdXN0b20gZXZlbnQgb24gZm9ybXM7IHJ4OnN1Y2Nlc3M9Ii4uLiIK");
    sb.append("ICB2YXIgZmlyZV9zdWNjZXNzID0gZnVuY3Rpb24gKGZvcm0pIHsKICAgIGZvcm0uZGlzcGF0Y2hFdmVu");
    sb.append("dChuZXcgRXZlbnQoInN1Y2Nlc3MiKSk7CiAgICBmb3JtLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJz");
    sb.append("dWJtaXR0ZWQiKSk7CiAgfTsKICBzZWxmLmZpcmVfc3VjY2VzcyA9IGZpcmVfc3VjY2VzczsKCiAgLy8g");
    sb.append("Y3VzdG9tIGV2ZW50IG9uIGZvcm1zOyByeDpmYWlsZWQ9Ii4uLiIKICB2YXIgZmlyZV9mYWlsdXJlID0g");
    sb.append("ZnVuY3Rpb24gKGRvbSwgbXNnKSB7CiAgICB2YXIgZSA9IG5ldyBFdmVudCgiZmFpbHVyZSIpOwogICAg");
    sb.append("ZS5tZXNzYWdlID0gbXNnOwogICAgY29uc29sZS5lcnJvcihtc2cpOwogICAgZG9tLmRpc3BhdGNoRXZl");
    sb.append("bnQoZSk7CiAgfTsKICBzZWxmLmZpcmVfZmFpbHVyZSA9IGZpcmVfZmFpbHVyZTsKCiAgc2VsZi5hQ0Mg");
    sb.append("PSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGN1c3RvbUNvbW1hbmROYW1lKSB7CiAgICB2YXIgc2lnbmFs");
    sb.append("ID0gZnVuY3Rpb24gKG1zZykgewogICAgICBpZiAoc2lnbmFsID09IG51bGwpIHsKICAgICAgICBmaXJl");
    sb.append("X3N1Y2Nlc3MoZm9ybSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sIG1z");
    sb.append("Zyk7CiAgICAgIH0KICAgIH07CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0");
    sb.append("aW9uIChldnQpIHsKICAgICAgaWYgKGN1c3RvbUNvbW1hbmROYW1lIGluIGN1c3RvbXMpIHsKICAgICAg");
    sb.append("ICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICB2YXIgb2JqID0gZ2V0X2Zvcm0oZm9ybSwge30p");
    sb.append("OwogICAgICAgIGN1c3RvbXNbY3VzdG9tQ29tbWFuZE5hbWVdKG9iaiwgc3RhdGUsIHNpZ25hbCwgc2Vs");
    sb.append("Zik7CiAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICB9IGVsc2UgewogICAgICAgIGZpcmVf");
    sb.append("ZmFpbHVyZShmb3JtLCAiRmFpbGVkIHRvIGZpbmQgJyIgKyBjdXN0b21Db21tYW5kTmFtZSArICInIik7");
    sb.append("CiAgICAgIH0KICAgIH0sIHRydWUpOwogIH07CgogIHZhciBtYWtlX2Nob2ljZV9hcnJheSA9IGZ1bmN0");
    sb.append("aW9uIChzdGF0ZSwgY2hhbm5lbCkgewogICAgdmFyIGNob2ljZXMgPSBzdGF0ZS5kYXRhLmNvbm5lY3Rp");
    sb.append("b24uY2hvaWNlczsKICAgIGlmICghKGNoYW5uZWwgaW4gY2hvaWNlcykpIHsKICAgICAgY2hvaWNlc1tj");
    sb.append("aGFubmVsXSA9IHt9OwogICAgfQogICAgdmFyIGNob2ljZSA9IGNob2ljZXNbY2hhbm5lbF07CiAgICB2");
    sb.append("YXIgYXJyID0gW107CiAgICBmb3IgKHZhciBpZCBpbiBjaG9pY2UpIHsKICAgICAgYXJyLnB1c2goY2hv");
    sb.append("aWNlW2lkXSk7CiAgICB9CiAgICByZXR1cm4gYXJyOwogIH0KCiAgc2VsZi5leEZJTiA9IGZ1bmN0aW9u");
    sb.append("IChkb20sIHR5cGUsIHN0YXRlLCBjaGFubmVsKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlw");
    sb.append("ZSwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgYXJyID0gbWFrZV9jaG9pY2VfYXJyYXkoc3RhdGUsIGNo");
    sb.append("YW5uZWwpOwogICAgICB2YXIgY2xlYXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZGVsZXRlIHN0YXRl");
    sb.append("LmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzW2NoYW5uZWxdOwogICAgICAgIHN0YXRlLmRhdGEuY29ubmVj");
    sb.append("dGlvbi5vbmNob2ljZXMoY2hhbm5lbCwge30pOwogICAgICB9OwogICAgICBzdGF0ZS5kYXRhLmNvbm5l");
    sb.append("Y3Rpb24ucHRyLnNlbmQoY2hhbm5lbCwgYXJyLCB7CiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJl");
    sb.append("YXNvbikgewogICAgICAgICAgY2xlYXIoKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJmYWlsZWQ6IiAr");
    sb.append("IHJlYXNvbik7CiAgICAgICAgfSwKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewog");
    sb.append("ICAgICAgICAgY2xlYXIoKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJTdWNjZXNzfCIgKyBwYXlsb2Fk");
    sb.append("LnNlcSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH07CgogIHNlbGYuRklOID0gZnVuY3Rp");
    sb.append("b24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgY2hhbm5lbCwgc2hvdWxkQmUsIF9leHBhbmQsIG1ha2VyVHJ1");
    sb.append("ZSwgbWFrZXJGYWxzZSkgewogICAgdmFyIGZpbmFsaXplID0gewogICAgICBvd25lcjogcGFyZW50LAog");
    sb.append("ICAgICBzaG93bjogZmFsc2UKICAgIH07CiAgICBhZGRfdW5zdWIoZmluYWxpemUpOwoKICAgIHZhciBj");
    sb.append("aGFuZ2UgPSBmdW5jdGlvbiAoc2hvdykgewogICAgICBmaXJlX3Vuc3ViKGZpbmFsaXplKTsKICAgICAg");
    sb.append("bnVrZShwYXJlbnQpOwogICAgICB2YXIgc3RhdGUgPSBmb3JrKHByaW9yU3RhdGUpOwogICAgICBpZiAo");
    sb.append("c2hvdyA9PT0gc2hvdWxkQmUpIHsKICAgICAgICBtYWtlclRydWUocGFyZW50LCBzdGF0ZSk7CiAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgbWFrZXJGYWxzZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfQogICAgICBz");
    sb.append("dWJzY3JpYmVfc3RhdGUoc3RhdGUsIGZpbmFsaXplKTsKICAgIH07CgogICAgZmluYWxpemUudXBkYXRl");
    sb.append("ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgb3V0ID0gcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24u");
    sb.append("b3V0c3RhbmRpbmdbY2hhbm5lbF07CiAgICAgIGlmICghKG91dCkpIHJldHVybjsKICAgICAgdmFyIGFy");
    sb.append("ciA9IG1ha2VfY2hvaWNlX2FycmF5KHByaW9yU3RhdGUsIGNoYW5uZWwpOwogICAgICB2YXIgcmVzdWx0");
    sb.append("ID0gKCdtaW4nIGluIG91dCAmJiAnbWF4JyBpbiBvdXQpID8gKG91dC5taW4gPD0gYXJyLmxlbmd0aCAm");
    sb.append("JiBhcnIubGVuZ3RoIDw9IG91dC5tYXgpIDogdHJ1ZTsKICAgICAgaWYgKGZpbmFsaXplLmV2YWwgIT0g");
    sb.append("cmVzdWx0KSB7CiAgICAgICAgZmluYWxpemUuZXZhbCA9IHJlc3VsdDsKICAgICAgICBjaGFuZ2UoZmlu");
    sb.append("YWxpemUuZXZhbCk7CiAgICAgIH0KICAgIH07CgogICAgcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24u");
    sb.append("c3Vic2NyaWJlX2Nob2ljZShjaGFubmVsLCBmdW5jdGlvbiAoKSB7CiAgICAgIGZpbmFsaXplLnVwZGF0");
    sb.append("ZSgpOwogICAgICAvLyBUT0RPOiByZXR1cm4gd2hldGhlciBvciBub3QgdGhpcyBuZWVkcyB0byBiZSBh");
    sb.append("eGVkCiAgICAgIHJldHVybiB0cnVlOwogICAgfSk7CiAgfTsKCiAgdmFyIGZvcm1fb2YgPSBmdW5jdGlv");
    sb.append("bihkb20pIHsKICAgIHZhciBuZXh0ID0gZG9tOwogICAgd2hpbGUgKG5leHQgIT0gbnVsbCkgewogICAg");
    sb.append("ICBpZiAobmV4dC50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIkZPUk0iKSB7CiAgICAgICAgcmV0dXJu");
    sb.append("IG5leHQ7CiAgICAgIH0KICAgICAgbmV4dCA9IG5leHQucGFyZW50RWxlbWVudDsKICAgIH0KICAgIHJl");
    sb.append("dHVybiBudWxsOwogIH0KCiAgdmFyIHJlZ19ldmVudCA9IGZ1bmN0aW9uIChzdGF0ZSwgZG9tLCB0eXBl");
    sb.append("LCBydW5uYWJsZSkgewogICAgLy8gVE9ETzogY29ubmVjdGVkL2Rpc2Nvbm5lY3RlZCBhcyBzcGVjaWFs");
    sb.append("IGV2ZW50cyB0byBjb25zaWRlcgogICAgaWYgKHR5cGUgPT0gImNoZWNrIiB8fCB0eXBlID09ICJ1bmNo");
    sb.append("ZWNrIikgewogICAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAg");
    sb.append("ICAgICAgaWYgKHRoaXMudHlwZSA9PSAiY2hlY2siICYmIGRvbS5jaGVja2VkKSB7CiAgICAgICAgICBy");
    sb.append("dW5uYWJsZSgpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09ICJ1bmNoZWNrIiAmJiAhZG9t");
    sb.append("LmNoZWNrZWQpIHsKICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgfQogICAgICB9LmJpbmQoe3R5");
    sb.append("cGU6dHlwZX0pKTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PSAibG9hZCIpIHsKICAgICAgd2luZG93LnNl");
    sb.append("dFRpbWVvdXQocnVubmFibGUsIDEpOwogICAgfSBlbHNlIGlmICh0eXBlPT0ic3VibWl0IiB8fCB0eXBl");
    sb.append("PT0ic3VibWl0dGVkIikgewogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAg");
    sb.append("ICB2YXIgZm9ybSA9IGZvcm1fb2YoZG9tKTsKICAgICAgICBpZiAoZm9ybSkgewogICAgICAgICAgZm9y");
    sb.append("bS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKGRvY3Vt");
    sb.append("ZW50LmJvZHkuY29udGFpbnMoZG9tKSkgewogICAgICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAg");
    sb.append("ICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwgMSk7CiAgICB9IGVsc2UgaWYgKHR5");
    sb.append("cGUuc3RhcnRzV2l0aCgiZGVsYXk6IikpIHsKICAgICAgLy8gZGVsYXkgd2lsbCBydW4gYWZ0ZXIgJGRl");
    sb.append("bGF5VGltZU1TIElGIHRoZSBkb20gZWxlbWVudCBpcyBzdGlsbCB2aXNpYmxlIHRvIHRoZSBkb2N1bWVu");
    sb.append("dAogICAgICB2YXIgZGVsYXlUaW1lTVMgPSBwYXJzZUludCh0eXBlLnN1YnN0cmluZyg2KSk7CiAgICAg");
    sb.append("IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5j");
    sb.append("b250YWlucyhkb20pKSB7CiAgICAgICAgICBydW5uYWJsZSgpOwogICAgICAgIH0KICAgICAgfSwgZGVs");
    sb.append("YXlUaW1lTVMpOwogICAgfSBlbHNlIGlmICh0eXBlID09ICJzZXR0bGUiKSB7CiAgICAgIHN0YXRlLmRh");
    sb.append("dGEudHJlZS5hZGRfb25fc2V0dGxlKGZ1bmN0aW9uKCkgewogICAgICAgIC8vIGlmIHRoZSBET00gaGFz");
    sb.append("IGJlZW4gYWRkZWQgdG8gdGhlIGJvZHksIHRoZW4gcnVuIHRoZSBjb2RlCiAgICAgICAgaWYgKGRvY3Vt");
    sb.append("ZW50LmJvZHkuY29udGFpbnMoZG9tKSkgewogICAgICAgICAgcnVubmFibGUoKTsKICAgICAgICAgIHJl");
    sb.append("dHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0pOwogICAgfSBl");
    sb.append("bHNlIGlmICh0eXBlID09ICJzZXR0bGUtb25jZSIpIHsKICAgICAgc3RhdGUuZGF0YS50cmVlLmFkZF9v");
    sb.append("bl9zZXR0bGUoZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gaWYgdGhlIERPTSBoYXMgYmVlbiBhZGRlZCB0");
    sb.append("byB0aGUgYm9keSwgdGhlbiBydW4gdGhlIGNvZGUKICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250");
    sb.append("YWlucyhkb20pKSB7CiAgICAgICAgICBydW5uYWJsZSgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4g");
    sb.append("ZmFsc2U7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHR5cGUgPT0gImNsaWNrIikgewog");
    sb.append("ICAgICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAg");
    sb.append("ICB2YXIgZmlyZSA9IHRydWU7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgZWwgPSBldmVu");
    sb.append("dC50YXJnZXQ7CiAgICAgICAgICAgIHdoaWxlIChlbCAmJiBmaXJlKSB7CiAgICAgICAgICAgICAgaWYg");
    sb.append("KGVsLmhhc0F0dHJpYnV0ZSgncHJldmVudDpjbGljaycpKSB7CiAgICAgICAgICAgICAgICBmaXJlID0g");
    sb.append("ZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudDsK");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXgpIHsKICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IGlmIChmaXJlKSB7CiAgICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7");
    sb.append("CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgcnVubmFibGUp");
    sb.append("OwogICAgICB9CiAgICB9CiAgfQoKCgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBz");
    sb.append("ZXQ6bmFtZT12YWx1ZSAuLi4iPgogIHNlbGYuYlMgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgbmFtZSwg");
    sb.append("dmFsdWUpIHsKICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVy");
    sb.append("biB7CiAgICAgICAgcnVuOiBmdW5jdGlvbigpIHt9LCAvLyBkbyBub3RoaW5nLCB0aGlzIGlzIGEgc2lt");
    sb.append("cGxlIG1lcmdlCiAgICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIG9iaiA9IHt9");
    sb.append("OwogICAgICAgICAgb2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAgICAgIHZhciBkZWx0YSA9IHBhdGhf");
    sb.append("dG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgICAgIHJldHVybiBkZWx0YTsKICAgICAgICB9CiAgICAg");
    sb.append("IH0KICAgIH0gZWxzZSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7");
    sb.append("CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgcmV0dXJuIHsK");
    sb.append("ICAgICAgICBydW46IGZ1bmN0aW9uKCkge30sIC8vIGRvIG5vdGhpbmcsIHRoaXMgaXMgYSBzaW1wbGUg");
    sb.append("bWVyZ2UKICAgICAgICBtZXJnZTogZnVuY3Rpb24oKSB7IHJldHVybiBkZWx0YTsgfQogICAgICB9CiAg");
    sb.append("ICB9CiAgfTsKCiAgdmFyIG1lcmdlX2RlbHRhID0gZnVuY3Rpb24oYSwgYikgewogICAgaWYgKHR5cGVv");
    sb.append("ZihhKSA9PSAib2JqZWN0IiAmJiB0eXBlb2YoYikgPT0gIm9iamVjdCIpIHsKICAgICAgdmFyIHJlc3Vs");
    sb.append("dCA9IHt9OwogICAgICBmb3IgKHZhciBrIGluIGEpIHsKICAgICAgICBpZiAoayBpbiBiKSB7CiAgICAg");
    sb.append("ICAgICByZXN1bHRba10gPSBtZXJnZV9kZWx0YShhW2tdLCBiW2tdKTsKICAgICAgICB9IGVsc2Ugewog");
    sb.append("ICAgICAgICAgcmVzdWx0W2tdID0gYVtrXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yKHZhciBr");
    sb.append("IGluIGIpIHsKICAgICAgICBpZiAoIShrIGluIGEpKSB7CiAgICAgICAgICByZXN1bHRba10gPSBiW2td");
    sb.append("OwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmV0dXJuIGE7");
    sb.append("CiAgfTsKICBzZWxmLk1EID0gbWVyZ2VfZGVsdGE7CgogIHNlbGYub25CID0gZnVuY3Rpb24oZG9tLCB0");
    sb.append("eXBlLCBzdGF0ZSwgYXJyKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24o");
    sb.append("KSB7CiAgICAgIHZhciBzdW0gPSB7fTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBhcnIubGVuZ3Ro");
    sb.append("OyBrKyspIHsKICAgICAgICB2YXIgY21kID0gYXJyW2tdOwogICAgICAgIGNtZC5ydW4oKTsKICAgICAg");
    sb.append("ICB2YXIgdG9NZXJnZSA9IGNtZC5tZXJnZSgpCiAgICAgICAgc3VtID0gbWVyZ2VfZGVsdGEoc3VtLCB0");
    sb.append("b01lcmdlKTsKICAgICAgfQogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHN1bSk7CiAgICB9KTsK");
    sb.append("ICB9OwoKICAvLyBjaG9vc2UKICBzZWxmLmV4Q0ggPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwg");
    sb.append("bmFtZSwgY2hhbm5lbCwga2V5KSB7CiAgICB2YXIgZGVjaWRlID0geyB2YWx1ZTogbnVsbCB9OwogICAg");
    sb.append("cmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHJlc3VsdCA9");
    sb.append("IGZpbmQoc3RhdGUsIGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKTsKICAgICAgaWYgKHJlc3VsdCAh");
    sb.append("PSBudWxsKSB7CiAgICAgICAgdmFyIGNob2ljZXMgPSBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24uY2hvaWNl");
    sb.append("czsKICAgICAgICBpZiAoIShjaGFubmVsIGluIGNob2ljZXMpKSB7CiAgICAgICAgICBjaG9pY2VzW2No");
    sb.append("YW5uZWxdID0ge307CiAgICAgICAgfQogICAgICAgIHZhciBjaG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxd");
    sb.append("OwogICAgICAgIHZhciB2YWxLZXkgPSByZXN1bHRba2V5XTsKICAgICAgICBpZiAodmFsS2V5IGluIGNo");
    sb.append("b2ljZSkgewogICAgICAgICAgZGVsZXRlIGNob2ljZVt2YWxLZXldOwogICAgICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgICAgICBjaG9pY2VbdmFsS2V5XSA9IHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgc3RhdGUuZGF0");
    sb.append("YS5jb25uZWN0aW9uLm9uY2hvaWNlcyhjaGFubmVsLCBjaG9pY2UpOwogICAgICB9CiAgICB9KTsKICAg");
    sb.append("IHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRlY2lkZS52YWx1");
    sb.append("ZSA9IHZhbHVlOwogICAgfSk7CiAgfTsKCiAgLy8gZGVjaWRlCiAgc2VsZi5leEQgPSBmdW5jdGlvbiAo");
    sb.append("ZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgY2hhbm5lbCwga2V5KSB7CiAgICB2YXIgZGVjaWRlID0geyB2");
    sb.append("YWx1ZTogbnVsbCB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgdmFyIHJlc3VsdCA9IGZpbmQoc3RhdGUsIGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKTsK");
    sb.append("ICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7CiAgICAgICAgbGV0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uu");
    sb.append("bm93KCk7CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5kKGNoYW5uZWwsIHJlc3Vs");
    sb.append("dCwgewogICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewoKICAgICAgICAgIH0sCiAg");
    sb.append("ICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgICBjb25zb2xlLmxv");
    sb.append("ZygiU3VjY2Vzc3wiICsgcGF5bG9hZC5zZXEgKyAiO2xhdGVuY3k9IiArIChwZXJmb3JtYW5jZS5ub3co");
    sb.append("KSAtIHN0YXJ0KSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgc3Vi");
    sb.append("c2NyaWJlKHN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgZGVjaWRlLnZhbHVlID0g");
    sb.append("dmFsdWU7CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZmly");
    sb.append("ZTpjaGFubmVsIC4uLiIgLi4uPgogIHNlbGYub25GUiA9IGZ1bmN0aW9uIChzdGF0ZSwgZG9tLCB0eXBl");
    sb.append("LCBjaGFubmVsKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbCwge30sIHsKICAgICAgICBz");
    sb.append("dWNjZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiU0VOVCAnIiArIGNoYW5u");
    sb.append("ZWwgKyAiJyIpOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewog");
    sb.append("ICAgICAgICAgY29uc29sZS5sb2coIkZBSUxFRCBUTyBGSVJFICciICsgY2hhbm5lbCArICInIERVRToi");
    sb.append("ICsgcmVhc29uKTsgJycKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICAvLyBSVU5USU1F");
    sb.append("OiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZm9yY2UtYXV0aD1uYW1lLHRva2VuIC4uLiI+CiAgc2VsZi5v");
    sb.append("bkZPUkNFX0FVVEggPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBpZGVudGl0eU5hbWUsIGlkZW50aXR5KSB7");
    sb.append("CiAgICByZWdfZXZlbnQobnVsbCwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlkZW50aXRp");
    sb.append("ZXNbaWRlbnRpdHlOYW1lXSA9IGlkZW50aXR5OwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRl");
    sb.append("bnRpdHlfIiArIGlkZW50aXR5TmFtZSwgaWRlbnRpdHkpOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElN");
    sb.append("RTogPHRhZyAuLiByeDpldmVudD0iLi4uIHNldDpuYW1lPXZhbHVlIC4uLiI+CiAgc2VsZi5vblMgPSBm");
    sb.append("dW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgdmFsdWUpIHsKICAgIHJlZ19ldmVudChzdGF0");
    sb.append("ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgaWYgKHR5");
    sb.append("cGVvZiAodmFsdWUpID09ICJmdW5jdGlvbiIpIHsKICAgICAgICBvYmpbbmFtZV0gPSB2YWx1ZSgpOwog");
    sb.append("ICAgICB9IGVsc2UgewogICAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICB9CiAgICAgIHZhciBk");
    sb.append("ZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgc3RhdGVbc3RhdGUuY3VycmVudF0u");
    sb.append("dHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpl");
    sb.append("dmVudD0iLi4uIHRlOm5hbWUgLi4uIj4KICBzZWxmLm9uVE0gPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBz");
    sb.append("dGF0ZSwgbmFtZSwgb3gsIG95KSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rp");
    sb.append("b24gKGV2ZW50KSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gewogICAgICAg");
    sb.append("IHg6ZXZlbnQuY2xpZW50WCArIHdpbmRvdy5zY3JvbGxYICsgb3gsCiAgICAgICAgeTpldmVudC5jbGll");
    sb.append("bnRZICsgd2luZG93LnNjcm9sbFkgKyBveQogICAgICB9OwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3Rv");
    sb.append("KHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRlKGRl");
    sb.append("bHRhKTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiB0ZTpu");
    sb.append("YW1lIC4uLiI+CiAgc2VsZi5vblRFID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG5hbWUpIHsK");
    sb.append("ICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFy");
    sb.append("IG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSBldmVudC5tZXNzYWdlOwogICAgICBpZiAoZXZlbnQu");
    sb.append("bWVzc2FnZSkgewogICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAg");
    sb.append("ICAgICBzdGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgIH0KICAgIH0p");
    sb.append("OwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiByZXNldCAuLi4iPgogIHNl");
    sb.append("bGYub1JTVCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUs");
    sb.append("IGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBmID0gZm9ybV9vZihkb20pOwog");
    sb.append("ICAgICBpZiAoZiAhPSBudWxsKSB7CiAgICAgICAgZi5yZXNldCgpOwogICAgICB9CiAgICB9KTsKICB9");
    sb.append("OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gcmVzZXQgLi4uIj4KICBzZWxmLm9S");
    sb.append("TEQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20s");
    sb.append("IHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0pOwog");
    sb.append("IH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBzdWJtaXQgLi4uIj4KICBzZWxm");
    sb.append("Lm9TQk1UID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwg");
    sb.append("ZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGYgPSBmb3JtX29mKGRvbSk7CiAg");
    sb.append("ICAgIGlmIChmICE9IG51bGwpIHsKICAgICAgICB2YXIgZSA9IG5ldyBTdWJtaXRFdmVudCgnc3VibWl0");
    sb.append("JywgewogICAgICAgICAgJ2J1YmJsZXMnICAgIDogdHJ1ZSwKICAgICAgICAgICdjYW5jZWxhYmxlJyA6");
    sb.append("IHRydWUKICAgICAgICB9KTsKICAgICAgICBmLmRpc3BhdGNoRXZlbnQoZSk7CiAgICAgIH0KICAgIH0p");
    sb.append("OwogIH07CgogIHNlbGYub05LID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUpIHsKICAgIHJlZ19l");
    sb.append("dmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGN1ciA9IGRv");
    sb.append("bTsKICAgICAgd2hpbGUgKGN1ci50YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT0gIk5VQ0xFQVIiKSB7CiAg");
    sb.append("ICAgICAgY3VyID0gY3VyLnBhcmVudEVsZW1lbnQ7CiAgICAgIH0KICAgICAgaWYgKGN1ciAhPSBudWxs");
    sb.append("KSB7CiAgICAgICAgbnVrZShjdXIpOwogICAgICB9CiAgICB9KTsKICB9OwoKCiAgc2VsZi5vVUNLID0g");
    sb.append("ZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBl");
    sb.append("LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgZG9tLmNoZWNrZWQgPSBmYWxzZTsKICAgIH0pOwogIH07");
    sb.append("CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBnb3RvOnVyaSAuLi4iPgogIHNlbGYu");
    sb.append("b25HTyA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCB2YWx1ZSkgewogICAgcmVnX2V2ZW50KHN0");
    sb.append("YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHVyaSA9ICh0eXBlb2YgKHZhbHVl");
    sb.append("KSA9PSAiZnVuY3Rpb24iKSA/IHZhbHVlKCkgOiB2YWx1ZTsKICAgICAgc2VsZi5nb3RvKHVyaSwgZmFs");
    sb.append("c2UpOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHRvZ2ds");
    sb.append("ZTpuYW1lIC4uLiI+CiAgc2VsZi5vblQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSkg");
    sb.append("ewogICAgdmFyIGNhcHR1cmVkID0geyB2YWx1ZTogZmFsc2UgfTsKICAgIHJlZ19ldmVudChzdGF0ZSwg");
    sb.append("ZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVd");
    sb.append("ID0gIWNhcHR1cmVkLnZhbHVlOwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9i");
    sb.append("aik7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgICBzdWJzY3Jp");
    sb.append("YmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBjYXB0dXJlZC52YWx1ZSA9IHZh");
    sb.append("bHVlID09IHRydWU7CiAgICB9KTsKICB9OwoKICB2YXIgb3JkZXJfdG9nZ2xlID0gZnVuY3Rpb24ocHJp");
    sb.append("b3IsIHZhbCkgewogICAgdmFyIHBhcnRzID0gcHJpb3Iuc3BsaXQoIiwiKTsKICAgIHZhciBwcmVmaXgg");
    sb.append("PSAnJzsKICAgIHZhciBuZXh0ID0gWyIiXTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcGFydHMubGVu");
    sb.append("Z3RoOyBrKyspIHsKICAgICAgaWYgKHBhcnRzW2tdID09ICIiKSB7CiAgICAgICAgY29udGludWU7CiAg");
    sb.append("ICAgIH0gZWxzZSBpZiAodmFsID09IHBhcnRzW2tdKSB7CiAgICAgICAgcHJlZml4ID0gJy0nOwogICAg");
    sb.append("ICB9IGVsc2UgaWYgKCItIiArIHZhbCA9PXBhcnRzW2tdKSB7CiAgICAgICAgcHJlZml4ID0gJyc7CiAg");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dC5wdXNoKHBhcnRzW2tdKTsKICAgICAgfQogICAgfQogICAg");
    sb.append("bmV4dFswXSA9IHByZWZpeCArIHZhbDsKICAgIHJldHVybiBuZXh0LmpvaW4oIiwiKTsKICB9CgogIC8v");
    sb.append("IFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBvcmRlci10b2dnbGU6bmFtZT12YWwgLi4uIj4K");
    sb.append("ICBzZWxmLm9uT1QgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgdmFsKSB7CiAgICB2");
    sb.append("YXIgY2FwdHVyZWQgPSB7IHZhbHVlOiAiIiB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUs");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSBvcmRlcl90");
    sb.append("b2dnbGUoY2FwdHVyZWQudmFsdWUsIHZhbCk7CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUu");
    sb.append("dmlldywgb2JqKTsKICAgICAgc3RhdGVbc3RhdGUuY3VycmVudF0udHJlZS51cGRhdGUoZGVsdGEpOwog");
    sb.append("ICAgfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBj");
    sb.append("YXB0dXJlZC52YWx1ZSA9IHZhbHVlOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiBy");
    sb.append("eDpldmVudD0iLi4uIGRlbHRhOm5hbWU9ZGlmZiIgLi4uIj4KICBzZWxmLm9uRCA9IGZ1bmN0aW9uIChk");
    sb.append("b20sIHR5cGUsIHN0YXRlLCBuYW1lLCBkaWZmKSB7CiAgICB2YXIgY2FwdHVyZWQgPSB7IHZhbHVlOiAw");
    sb.append("IH07CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICB2YXIg");
    sb.append("b2JqID0ge307CiAgICAgIG9ialtuYW1lXSA9IGNhcHR1cmVkLnZhbHVlICsgZGlmZjsKICAgICAgdmFy");
    sb.append("IGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZVtzdGF0ZS5jdXJyZW50");
    sb.append("XS50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgZnVu");
    sb.append("Y3Rpb24gKHZhbHVlKSB7CiAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAibnVtYmVyIikgewogICAg");
    sb.append("ICAgIGNhcHR1cmVkLnZhbHVlID0gdmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHZhbCA9");
    sb.append("IHBhcnNlRmxvYXQodmFsdWUpOwogICAgICAgIGlmICghaXNOYU4odmFsKSkgewogICAgICAgICAgY2Fw");
    sb.append("dHVyZWQudmFsdWUgPSB2YWw7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9OwogIHNlbGYuQ1NF");
    sb.append("TiA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIGV2YWxTdGF0ZSwgY2hhbm5lbCwga2V5LCBu");
    sb.append("YW1lLCBzaG91bGRCZSwgX2V4cGFuZCwgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7CiAgICB2YXIgY2hv");
    sb.append("c2VuID0gewogICAgICB2YWx1ZTogIiIsCiAgICAgIG93bmVyOiBwYXJlbnQsCiAgICAgIHNob3duOiBm");
    sb.append("YWxzZSwKICAgICAgZXZhbDogbnVsbAogICAgfTsKICAgIGFkZF91bnN1YihjaG9zZW4pOwogICAgdmFy");
    sb.append("IGNoYW5nZSA9IGZ1bmN0aW9uIChzaG93KSB7CiAgICAgIGZpcmVfdW5zdWIoY2hvc2VuKTsKICAgICAg");
    sb.append("bnVrZShwYXJlbnQpOwogICAgICB2YXIgc3RhdGUgPSBmb3JrKHByaW9yU3RhdGUpOwogICAgICBpZiAo");
    sb.append("c2hvdyA9PT0gc2hvdWxkQmUpIHsKICAgICAgICBtYWtlclRydWUocGFyZW50LCBzdGF0ZSk7CiAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgbWFrZXJGYWxzZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfQogICAgICBz");
    sb.append("dWJzY3JpYmVfc3RhdGUoc3RhdGUsIGNob3Nlbik7CiAgICB9OwoKICAgIGNob3Nlbi51cGRhdGUgPSBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgIHZhciBvdXQgPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5vdXRz");
    sb.append("dGFuZGluZ1tjaGFubmVsXTsKICAgICAgaWYgKCEob3V0KSkgcmV0dXJuOwoKICAgICAgdmFyIGNob2lj");
    sb.append("ZXMgPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwogICAgICBpZiAoIShjaGFubmVs");
    sb.append("IGluIGNob2ljZXMpKSB7CiAgICAgICAgY2hvaWNlc1tjaGFubmVsXSA9IHt9OwogICAgICB9CiAgICAg");
    sb.append("IHZhciBjaG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxdOwogICAgICB2YXIgcmVzdWx0ID0gY2hvc2VuLnZh");
    sb.append("bHVlIGluIGNob2ljZTsKICAgICAgaWYgKGNob3Nlbi5ldmFsICE9IHJlc3VsdCkgewogICAgICAgIGNo");
    sb.append("b3Nlbi5ldmFsID0gcmVzdWx0OwogICAgICAgIGNoYW5nZShjaG9zZW4uZXZhbCk7CiAgICAgIH0KICAg");
    sb.append("IH07CgogICAgcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24uc3Vic2NyaWJlX2Nob2ljZShjaGFubmVs");
    sb.append("LCBmdW5jdGlvbiAoKSB7CiAgICAgIGNob3Nlbi51cGRhdGUoKTsKICAgICAgcmV0dXJuIHRydWU7CiAg");
    sb.append("ICB9KTsKCiAgICBzdWJzY3JpYmUoZXZhbFN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAg");
    sb.append("ICAgY2hvc2VuLnZhbHVlID0gdmFsdWU7CiAgICAgIGNob3Nlbi51cGRhdGUoKTsKICAgIH0pOwogIH07");
    sb.append("CgogIHNlbGYuREUgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBldmFsU3RhdGUsIGNoYW5u");
    sb.append("ZWwsIGtleSwgbmFtZSwgc2hvdWxkQmUsIF9leHBhbmQsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSkgewog");
    sb.append("ICAgdmFyIGRlY2lkZSA9IHsKICAgICAgdmFsdWU6ICIiLAogICAgICBvd25lcjogcGFyZW50LAogICAg");
    sb.append("ICBzaG93bjogZmFsc2UsCiAgICAgIGV2YWw6IG51bGwKICAgIH07CiAgICBhZGRfdW5zdWIoZGVjaWRl");
    sb.append("KTsKICAgIHZhciBjaGFuZ2UgPSBmdW5jdGlvbiAoc2hvdykgewogICAgICBmaXJlX3Vuc3ViKGRlY2lk");
    sb.append("ZSk7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFyIHN0YXRlID0gZm9yayhwcmlvclN0YXRlKTsK");
    sb.append("ICAgICAgaWYgKHNob3cgPT09IHNob3VsZEJlKSB7CiAgICAgICAgbWFrZXJUcnVlKHBhcmVudCwgc3Rh");
    sb.append("dGUpOwogICAgICB9IGVsc2UgewogICAgICAgIG1ha2VyRmFsc2UocGFyZW50LCBzdGF0ZSk7CiAgICAg");
    sb.append("IH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCBkZWNpZGUpOwogICAgfTsKCiAgICBkZWNpZGUu");
    sb.append("dXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgcmVzdWx0ID0gZmluZChwcmlvclN0YXRlLCBj");
    sb.append("aGFubmVsLCBrZXksIGRlY2lkZS52YWx1ZSkgIT0gbnVsbDsKICAgICAgaWYgKGRlY2lkZS5ldmFsICE9");
    sb.append("IHJlc3VsdCkgewogICAgICAgIGRlY2lkZS5ldmFsID0gcmVzdWx0OwogICAgICAgIGNoYW5nZShkZWNp");
    sb.append("ZGUuZXZhbCk7CiAgICAgIH0KICAgIH07CgogICAgcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24uc3Vi");
    sb.append("c2NyaWJlKGNoYW5uZWwsIGZ1bmN0aW9uICgpIHsKICAgICAgZGVjaWRlLnVwZGF0ZSgpOwogICAgICAv");
    sb.append("LyBUT0RPOiByZXR1cm4gd2hldGhlciBvciBub3QgdGhpcyBuZWVkcyB0byBiZSBheGVkCiAgICAgIHJl");
    sb.append("dHVybiB0cnVlOwogICAgfSk7CgogICAgc3Vic2NyaWJlKGV2YWxTdGF0ZSwgbmFtZSwgZnVuY3Rpb24g");
    sb.append("KHZhbHVlKSB7CiAgICAgIGRlY2lkZS52YWx1ZSA9IHZhbHVlOwogICAgICBkZWNpZGUudXBkYXRlKCk7");
    sb.append("CiAgICB9KTsKICB9OwoKICB2YXIgY29tbW9uSWYgPSBmdW5jdGlvbihwYXJlbnQsIG9yaWdpbmFsU3Rh");
    sb.append("dGUsIHNob3VsZEJlLCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5n");
    sb.append("KSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICBpZiAoZm9yY2VIaWRpbmcpIHsKICAg");
    sb.append("ICAgcGFyZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24g");
    sb.append("KHZhbHVlKSB7CiAgICAgIHZhciBzaG93ID0gKHZhbHVlID8gdHJ1ZSA6IGZhbHNlKSA9PT0gc2hvdWxk");
    sb.append("QmU7CiAgICAgIGlmICh0aGlzLnNob3duID09IHNob3cpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0K");
    sb.append("ICAgICAgdGhpcy5zaG93biA9IHNob3c7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgZmlyZV91bnN1");
    sb.append("Yih1bnN1Yik7CiAgICAgIHZhciBuZXh0ID0gc2VsZi5wRChmb3JrKG9yaWdpbmFsU3RhdGUpKTsKICAg");
    sb.append("ICAgaWYgKHNob3cpIHsKICAgICAgICBpZiAoZm9yY2VIaWRpbmcpIHsKICAgICAgICAgIHBhcmVudC5z");
    sb.append("dHlsZS5kaXNwbGF5ID0gIiI7CiAgICAgICAgfQogICAgICAgIG1ha2VyVHJ1ZShwYXJlbnQsIG5leHQp");
    sb.append("OwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChmb3JjZUhpZGluZykgewogICAgICAgICAgcGFyZW50");
    sb.append("LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1ha2VyRmFs");
    sb.append("c2UocGFyZW50LCBuZXh0KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKG5l");
    sb.append("eHQsIHVuc3ViKTsKICAgIH0uYmluZCh7IHNob3duOiAnbm8nIH0pOwogIH0KCiAgLy8gUlVOVElNRSB8");
    sb.append("IHJ4OmlmIC8gcng6aWZub3QgPSAicGF0aDE9cGF0aDIiCiAgc2VsZi5JRmVxID0gZnVuY3Rpb24gKHBh");
    sb.append("cmVudCwgb3JpZ2luYWxTdGF0ZSwgcXVlcnlTdGF0ZUxlZnQsIG5hbWVMZWZ0LCBxdWVyeVN0YXRlUmln");
    sb.append("aHQsIG5hbWVSaWdodCwgc2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwg");
    sb.append("Zm9yY2VIaWRpbmcpIHsKICAgIHZhciBjb21tb24gPSB7bGVmdDpmYWxzZSwgcmlnaHQ6dHJ1ZX07CiAg");
    sb.append("ICBjb21tb24ucyA9IGNvbW1vbklmKHBhcmVudCwgb3JpZ2luYWxTdGF0ZSwgc2hvdWxkQmUsIGV4cGFu");
    sb.append("ZFZpZXcsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpOwogICAgY29tbW9uLmsgPSBk");
    sb.append("ZWJvdW5jZSg1LCBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5zKHRoaXMubGVmdCA9PSB0aGlzLnJpZ2h0");
    sb.append("KTsKICAgIH0uYmluZChjb21tb24pKTsKICAgIHN1YnNjcmliZShxdWVyeVN0YXRlTGVmdCwgbmFtZUxl");
    sb.append("ZnQsIGZ1bmN0aW9uIChsZWZ0KSB7CiAgICAgIHRoaXMubGVmdCA9IGxlZnQ7CiAgICAgIHRoaXMuaygp");
    sb.append("OwogICAgfS5iaW5kKGNvbW1vbikpCiAgICBzdWJzY3JpYmUocXVlcnlTdGF0ZVJpZ2h0LCBuYW1lUmln");
    sb.append("aHQsIGZ1bmN0aW9uIChyaWdodCkgewogICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7CiAgICAgIHRoaXMu");
    sb.append("aygpOwogICAgfS5iaW5kKGNvbW1vbikpOwogIH07CgogIC8qKiB0aGUgYWJvdmUgc3BlYWtzIHRvIGEg");
    sb.append("ZGVlcCBwYXR0ZXJuLiBXZSBjb3VsZCB0YWtlIGFueSBleHByZXNzaW9uIGFuZCB0aGVuIGxpbmVhcml6");
    sb.append("ZSBpdCBpbnRvIHJlYWN0aXZlIHBhcnRzLCBhbmQgdGhlbiBhc3NlbWJsZSBhIHN0YXRlbWVudCBzdGF0");
    sb.append("ZW1lbnQgb24gdGhlIGZseS4gV2Ugc2hvdWxkIGxvb2sgaW50byB1c2luZyB0aGUgY29uZGl0aW9uIGxh");
    sb.append("bmd1YWdlIGZvciB0aGlzICovCgogIC8vIFJVTlRJTUUgfCByeDppZiAvIHJ4Omlmbm90ID0gInBhdGgi");
    sb.append("CiAgc2VsZi5JRiA9IGZ1bmN0aW9uIChwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHF1ZXJ5U3RhdGUsIG5h");
    sb.append("bWUsIHNob3VsZEJlLCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5n");
    sb.append("KSB7CiAgICBzdWJzY3JpYmUocXVlcnlTdGF0ZSwgbmFtZSwgY29tbW9uSWYocGFyZW50LCBvcmlnaW5h");
    sb.append("bFN0YXRlLCBzaG91bGRCZSwgZXhwYW5kVmlldywgbWFrZXJUcnVlLCBtYWtlckZhbHNlLCBmb3JjZUhp");
    sb.append("ZGluZykpOwogIH07CgogIC8vLyBSVU5USU1FIHwgcng6YWN0aW9uPWNvcHk6cGF0aAogIHNlbGYuYUNQ");
    sb.append("ID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBuYW1lKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIo");
    sb.append("J3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAg");
    sb.append("IHZhciBvYmogPSBnZXRfZm9ybShmb3JtLCB7fSk7CiAgICAgIGlmIChuYW1lICE9ICIuIiAmJiBuYW1l");
    sb.append("ICE9ICIiKSB7CiAgICAgICAgdmFyIG5vID0ge307CiAgICAgICAgbm9bbmFtZV0gPSBvYmo7CiAgICAg");
    sb.append("ICAgb2JqID0gbm87CiAgICAgIH0KICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBv");
    sb.append("YmopOwogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsKICAgICAgZmlyZV9zdWNjZXNz");
    sb.append("KGZvcm0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgc2VsZi5WU1AgPSBmdW5jdGlvbihzdGF0ZSwgdmFy");
    sb.append("cykgewogICAgdmFyIHNtID0ge307CiAgICBzbS52YXJzID0gdmFyczsKICAgIHNtLmxhc3QgPSB7fTsK");
    sb.append("ICAgIHNtLnBhcmFtcyA9ICIiOwogICAgc20ubW9kZSA9ICJyZXBsYWNlIjsKICAgIHNtLnBpbmcgPSBk");
    sb.append("ZWJvdW5jZSg1LCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgZm9yICh2YXIg");
    sb.append("ayA9IDA7IGsgPCB0aGlzLnZhcnMubGVuZ3RoOyBrKyspIHsKICAgICAgICB2YXIgYXJnID0gdGhpcy52");
    sb.append("YXJzW2tdOwogICAgICAgIGlmIChhcmcgaW4gdGhpcy5sYXN0KSB7CiAgICAgICAgICBhcmdzLnB1c2go");
    sb.append("YXJnICsgIj0iICsgdGhpcy5sYXN0W2FyZ10pOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgcmVz");
    sb.append("dWx0ID0gIj8iICthcmdzLmpvaW4oIiYiKTsKICAgICAgaWYgKHJlc3VsdCAhPSAiPyIgJiYgd2luZG93");
    sb.append("LmxvY2F0aW9uLnNlYXJjaCAhPT0gcmVzdWx0KSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAg");
    sb.append("IG9iai52aWV3ZXJfc2VhcmNoX3F1ZXJ5ID0gcmVzdWx0OwogICAgICAgIHZhciBkZWx0YSA9IHBhdGhf");
    sb.append("dG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsK");
    sb.append("ICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sICIiLCBmaXhIcmVmKHdpbmRvdy5s");
    sb.append("b2NhdGlvbi5wYXRobmFtZSArIHJlc3VsdCkpOwogICAgICB9CiAgICB9LmJpbmQoc20pKTsKICAgIHN0");
    sb.append("YXRlLnZpZXcudHJlZS5zdWJzY3JpYmUoZnVuY3Rpb24ocykgewogICAgICB0aGlzLmxhc3QgPSBzOwog");
    sb.append("ICAgICB0aGlzLnBpbmcoKTsKICAgIH0uYmluZChzbSkpOwogIH07CgogIHNlbGYuRiA9IGZ1bmN0aW9u");
    sb.append("KG8saykgewogICAgaWYgKGsgaW4gbykgewogICAgICByZXR1cm4gb1trXTsKICAgIH0KICAgIHJldHVy");
    sb.append("biAiIjsKICB9OwoKICAvLyBSVU5USU1FIHwgPGlucHV0IC4uLiByeDpzeW5jPXBhdGggLi4uPgogIHNl");
    sb.append("bGYuU1kgPSBmdW5jdGlvbiAoZWwsIHN0YXRlLCBuYW1lLCBtcykgewogICAgdmFyIHR5cGUgPSAoInR5");
    sb.append("cGUiIGluIGVsKSA/IGVsLnR5cGUudG9VcHBlckNhc2UoKSA6ICJ0ZXh0IjsKICAgIHZhciBzaWduYWwg");
    sb.append("PSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSB2");
    sb.append("YWx1ZTsKICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0");
    sb.append("ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsKICAgICAgaWYgKHRoaXMuZGVkdXBlICE9IHZhbHVlKSB7");
    sb.append("CiAgICAgICAgdGhpcy5kZWR1cGUgPSB2YWx1ZTsKICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBF");
    sb.append("dmVudCgiYWZ0ZXJzeW5jIikpOwogICAgICB9CiAgICB9LmJpbmQoe2RlZHVwZToiIn0pOwogICAgaWYg");
    sb.append("KHR5cGUgPT0gIkNIRUNLQk9YIikgewogICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBk");
    sb.append("ZWJvdW5jZShtcywgZnVuY3Rpb24gKCkgewogICAgICAgIHNpZ25hbChlbC5jaGVja2VkID8gdHJ1ZSA6");
    sb.append("IGZhbHNlKTsKICAgICAgfSkpOwogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgc2lnbmFsKGVsLmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpOwogICAgICB9LCAxKTsKICAgIH0g");
    sb.append("ZWxzZSBpZiAodHlwZSA9PSAiUkFESU8iKSB7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5n");
    sb.append("ZScsIGRlYm91bmNlKG1zLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHsKICAg");
    sb.append("ICAgICAgIHNpZ25hbChlbC52YWx1ZSk7CiAgICAgICAgfQogICAgICB9KSk7CiAgICB9IGVsc2Ugewog");
    sb.append("ICAgICB2YXIgZiA9IGRlYm91bmNlKG1zLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2lnbmFsKGVsLnZh");
    sb.append("bHVlKTsKICAgICAgfSk7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGYpOwogICAg");
    sb.append("ICBlbC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGYpCiAgICAgIGVsLm9ua2V5dXAgPSBlbC5vbmNo");
    sb.append("YW5nZTsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHNpZ25hbChl");
    sb.append("bC52YWx1ZSk7CiAgICAgIH0sIDUpOwogICAgfQogIH07CgogIHZhciBmaXJzdE9jY3VyID0gZnVuY3Rp");
    sb.append("b24oYSwgYikgewogICAgaWYgKGEgPiAwICYmIGIgPiAwKSB7CiAgICAgIHJldHVybiBNYXRoLm1pbihh");
    sb.append("LCBiKTsKICAgIH0KICAgIGlmIChhID4gMCkgewogICAgICByZXR1cm4gYTsKICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgIHJldHVybiBiOwogICAgfQogIH07CiAgLy8gSEVMUEVSIHwgZXh0cmFjdCBhbGwgdGhlIGlucHV0");
    sb.append("cyBmcm9tIHRoZSBnaXZlbiBlbGVtZW50IGFuZCBidWlsZCBhbiBvYmplY3QKICB2YXIgYnVpbGRfb2Jq");
    sb.append("ID0gZnVuY3Rpb24gKGVsLCBvYmpUb0luc2VydEludG8sIHBhc3N3b3JkcywgaXNSb290KSB7CiAgICBp");
    sb.append("ZiAoZWwudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09ICJGT1JNIiAmJiAhaXNSb290KSB7CiAgICAgIC8v");
    sb.append("IGRvbid0IGNhcmUgYWJvdXQgbmVzdGVkIGZvcm1zCiAgICAgIHJldHVybjsKICAgIH0KICAgIHZhciB1");
    sb.append("cHBlclRhZyA9IGVsLnRhZ05hbWUudG9VcHBlckNhc2UoKTsKICAgIHZhciBqdXN0U2V0ID0gdXBwZXJU");
    sb.append("YWcgPT0gIlRFWFRBUkVBIiB8fCB1cHBlclRhZyA9PSAiU0VMRUNUIjsKICAgIHZhciBpc0lucHV0Qm94");
    sb.append("ID0gdXBwZXJUYWcgPT0gIklOUFVUIjsKICAgIHZhciBpc0ZpZWxkU2V0ID0gdXBwZXJUYWcgPT0gIkZJ");
    sb.append("RUxEU0VUIjsKICAgIHZhciBpc1B1bGwgPSB1cHBlclRhZyA9PSAiUFVMTFZBTFVFIjsKICAgIHZhciBo");
    sb.append("YXNOYW1lID0gIm5hbWUiIGluIGVsOwogICAgdmFyIGluc2VydEF0ID0gb2JqVG9JbnNlcnRJbnRvOwog");
    sb.append("ICAgLy8gdGhlIGFwcGx5IGZ1bmN0aW9uIGlzIGhvdyB3ZSBpbmplY3QgdGhlIHZhbHVlIGludG8gdGhl");
    sb.append("IG9iamVjdAogICAgdmFyIGFwcGx5ID0gZnVuY3Rpb24gKHZhbCkgeyB9OwoKICAgIHZhciBuYW1lID0g");
    sb.append("IiI7CiAgICBpZiAoaGFzTmFtZSAmJiAoanVzdFNldCB8fCBpc0lucHV0Qm94IHx8IGlzRmllbGRTZXQg");
    sb.append("fHwgaXNQdWxsKSkgewogICAgICBuYW1lID0gZWwubmFtZTsKICAgICAgaWYgKG5hbWUgPT0gIiIpIHsg");
    sb.append("Ly8gdGhpcyBpcyBhIHNwZWNpYWwgbmFtZSBmb3IgdGhpbmdzIHRoYXQgZG9uJ3QgZ2V0IHBpY2tlZCB1");
    sb.append("cAogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIga0RvdE9yU2xhc2ggPSBmaXJzdE9jY3Vy");
    sb.append("KG5hbWUuaW5kZXhPZignLicpLCBuYW1lLmluZGV4T2YoJy8nKSk7CiAgICAgIHdoaWxlIChrRG90T3JT");
    sb.append("bGFzaCA+IDApIHsKICAgICAgICB2YXIgcGFyID0gbmFtZS5zdWJzdHJpbmcoMCwga0RvdE9yU2xhc2gp");
    sb.append("OwogICAgICAgIGlmICghKHBhciBpbiBpbnNlcnRBdCkpIHsKICAgICAgICAgIGluc2VydEF0W3Bhcl0g");
    sb.append("PSB7fTsKICAgICAgICB9CiAgICAgICAgaW5zZXJ0QXQgPSBpbnNlcnRBdFtwYXJdOwogICAgICAgIG5h");
    sb.append("bWUgPSBuYW1lLnN1YnN0cmluZyhrRG90T3JTbGFzaCArIDEpOwogICAgICAgIGtEb3RPclNsYXNoID0g");
    sb.append("Zmlyc3RPY2N1cihuYW1lLmluZGV4T2YoJy4nKSwgbmFtZS5pbmRleE9mKCcvJykpOwogICAgICB9Cgog");
    sb.append("ICAgICBpZiAobmFtZS5lbmRzV2l0aCgiKyIpKSB7CiAgICAgICAgLy8gaGVyZSwgd2UgcHVzaCB0aGUg");
    sb.append("dmFsdWUgaW50byB0aGUgYXJyYXkKICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoMCwgbmFtZS5s");
    sb.append("ZW5ndGggLSAxKTsKICAgICAgICBhcHBseSA9IGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICBpZiAoIShu");
    sb.append("YW1lIGluIGluc2VydEF0KSkgewogICAgICAgICAgICBpbnNlcnRBdFtuYW1lXSA9IFt2XTsKICAgICAg");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGluc2VydEF0W25hbWVdLnB1c2godik7CiAgICAgICAgICB9");
    sb.append("CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBoZXJlIHdlIHNldCB0aGUgb2JqZWN0");
    sb.append("CiAgICAgICAgYXBwbHkgPSBmdW5jdGlvbiAodikgewogICAgICAgICAgaW5zZXJ0QXRbbmFtZV0gPSB2");
    sb.append("OwogICAgICAgIH07CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaXNQdWxsKSB7CiAgICAgIGFwcGx5KGVs");
    sb.append("LnB1bGwoKSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoanVzdFNldCkgewogICAgICBhcHBs");
    sb.append("eShlbC52YWx1ZSk7CiAgICB9IGVsc2UgaWYgKGlzRmllbGRTZXQpIHsKICAgICAgdmFyIG5leHRPYmpl");
    sb.append("Y3QgPSB7fTsKICAgICAgaWYgKCJjaGlsZHJlbiIgaW4gZWwpIHsKICAgICAgICB2YXIgYXJyID0gZWwu");
    sb.append("Y2hpbGRyZW47CiAgICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgbjsgaysrKSB7CiAgICAgICAgICB2YXIgY2ggPSBlbC5jaGlsZHJlbltrXTsKICAgICAgICAg");
    sb.append("IGJ1aWxkX29iaihjaCwgbmV4dE9iamVjdCwgcGFzc3dvcmRzLCBmYWxzZSk7CiAgICAgICAgfQogICAg");
    sb.append("ICB9CiAgICAgIGFwcGx5KG5leHRPYmplY3QpOwogICAgfSBlbHNlIGlmIChpc0lucHV0Qm94KSB7CiAg");
    sb.append("ICAgIHZhciB0eXBlID0gKCJ0eXBlIiBpbiBlbCkgPyBlbC50eXBlLnRvVXBwZXJDYXNlKCkgOiAiVEVY");
    sb.append("VCI7CiAgICAgIGlmICh0eXBlID09ICJTVUJNSVQiIHx8IHR5cGUgPT0gIlJFU0VUIikgcmV0dXJuOwog");
    sb.append("ICAgICBpZiAoKHR5cGUgPT0gIlBBU1NXT1JEIiB8fCBuYW1lID09ICJwYXNzd29yZCIgfHwgbmFtZSA9");
    sb.append("PSAiY29uZmlybS1wYXNzd29yZCIgfHwgbmFtZSA9PSAibmV3X3Bhc3N3b3JkIiB8fCBuYW1lID09ICJj");
    sb.append("b25maXJtLW5ld19wYXNzd29yZCIpKSB7CiAgICAgICAgcGFzc3dvcmRzW25hbWVdID0gZWwudmFsdWU7");
    sb.append("CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0eXBlID09ICJDSEVDS0JPWCIpIHsKICAg");
    sb.append("ICAgICBhcHBseShlbC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlKTsKICAgICAgfSBlbHNlIGlmICh0eXBl");
    sb.append("ID09ICJSQURJTyIpIHsKICAgICAgICBpZiAoZWwuY2hlY2tlZCkgewogICAgICAgICAgYXBwbHkoZWwu");
    sb.append("dmFsdWUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBhcHBseShlbC52YWx1ZSk7CiAg");
    sb.append("ICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAgICAgdmFy");
    sb.append("IGFyciA9IGVsLmNoaWxkcmVuOwogICAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgICBmb3Ig");
    sb.append("KHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgICAgdmFyIGNoID0gZWwuY2hpbGRyZW5ba107");
    sb.append("CiAgICAgICAgICBidWlsZF9vYmooY2gsIG9ialRvSW5zZXJ0SW50bywgcGFzc3dvcmRzLCBmYWxzZSk7");
    sb.append("CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi5CdWlsZEZvcm1PYmplY3QgPSBmdW5j");
    sb.append("dGlvbihmb3JtKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBidWlsZF9vYmooZm9ybSwgb2JqLCBmYWxz");
    sb.append("ZSwgdHJ1ZSk7CiAgICByZXR1cm4gb2JqOwogIH07CgogIC8vIEhFTFBFUiB8IHJldHVybiBhbiBvYmpl");
    sb.append("Y3Qgb2YgYWxsIHRoZSBpbnB1dHMgb2YgdGhlIGdpdmVuIGZvcm0gZWxlbWVudAogIHZhciBnZXRfZm9y");
    sb.append("bSA9IGZ1bmN0aW9uIChmb3JtLCBwYXNzd29yZHMpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIGJ1aWxk");
    sb.append("X29iaihmb3JtLCBvYmosIHBhc3N3b3JkcywgdHJ1ZSk7CiAgICByZXR1cm4gb2JqOwogIH07CgogIC8v");
    sb.append("IDwuLi4gcng6d3JhcD1jb25zdCA+CiAgdmFyIGN1c3RvbXNfY29tcG9uZW50cyA9IHt9OwogIHNlbGYu");
    sb.append("cHJvdmlkZUN1c3RvbUNvbXBvbmVudCA9IGZ1bmN0aW9uKG5hbWUsIGZvbykgewogICAgY3VzdG9tc19j");
    sb.append("b21wb25lbnRzW25hbWVdID0gZm9vOwogIH07CgogIC8vIFJVTlRJTUUgfCA8dGFnIC4uLiByeDpjdXN0");
    sb.append("b209Ij8iIHBvcnQ6JG5hbWU9JG91dHB1dCAuLi4gPi4uLjwvdGFnPiB8IGFzc2VtYmxlIGEgd3JpdGVy");
    sb.append("IG9iamVjdAogIHNlbGYuV1ggPSBmdW5jdGlvbihpbnN0cnVjdGlvbnMpIHsKICAgIHZhciB3cml0ZXIg");
    sb.append("PSB7fTsKICAgIGZvciAodmFyIGsgPSAwOyBrICsgMiA8IGluc3RydWN0aW9ucy5sZW5ndGg7IGsrKykg");
    sb.append("ewogICAgICB2YXIgb2JqID0ge307CiAgICAgIHdyaXRlcltpbnN0cnVjdGlvbnNba11dID0gZnVuY3Rp");
    sb.append("b24odmFsdWUpIHsKICAgICAgICB2YXIgcyA9IHRoaXM7CiAgICAgICAgcy53W3Mua10gPSB2YWx1ZTsK");
    sb.append("ICAgICAgICBzLnQudXBkYXRlKHMuZCk7CiAgICAgIH0uYmluZCh7CiAgICAgICAgZDpwYXRoX3RvKGlu");
    sb.append("c3RydWN0aW9uc1sxXS52aWV3LCBvYmopLAogICAgICAgIHc6IG9iaiwKICAgICAgICBrOiBpbnN0cnVj");
    sb.append("dGlvbnNbMl0sCiAgICAgICAgdDogaW5zdHJ1Y3Rpb25zWzFdLnZpZXcudHJlZQogICAgICB9KTsKICAg");
    sb.append("IH0KICAgIHJldHVybiB3cml0ZXI7CiAgfTsKICBzZWxmLkMgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwg");
    sb.append("bmFtZSwgcnhvYmosIHdyaXRlciwgY2hpbGRNYWtlcldpdGhDYXNlKSB7CiAgICB2YXIgb2JqID0gewog");
    sb.append("ICAgICBkb206IGRvbSwKICAgICAgc3RhdGU6IHN0YXRlLAogICAgICBpbnB1dHM6IHJ4b2JqLAogICAg");
    sb.append("ICBvdXRwdXRzOiB3cml0ZXIsCiAgICAgIG1ha2VyOiBjaGlsZE1ha2VyV2l0aENhc2UsCiAgICAgIGZy");
    sb.append("YW1ld29yazogc2VsZgogICAgfTsKICAgIGlmIChuYW1lIGluIGN1c3RvbXNfY29tcG9uZW50cykgewog");
    sb.append("ICAgICBjdXN0b21zX2NvbXBvbmVudHNbbmFtZV0ob2JqKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNv");
    sb.append("bGUuZXJyb3IoImZhaWxlZCB0byBmaW5kIGN1c3RvbSBjb21wb25lbnQ6ICciICsgbmFtZSArICInIik7");
    sb.append("CiAgICB9CiAgfTsKCiAgdmFyIHdyYXBwZXJzID0ge307CiAgdmFyIHdyYXBwZXJzX29ubG9hZCA9IHt9");
    sb.append("OyAvLyBUT0RPOiBzdHVkeSBpZiB0aGlzIGNhbiBiZSByZW1vdmVkCiAgc2VsZi5QUldQID0gZnVuY3Rp");
    sb.append("b24gKG5hbWUsIGZvbykgewogICAgd3JhcHBlcnNbbmFtZV0gPSBmb287CiAgICBpZiAobmFtZSBpbiB3");
    sb.append("cmFwcGVyc19vbmxvYWQpIHsKICAgICAgdmFyIHRvbG9hZCA9IHdyYXBwZXJzX29ubG9hZFtuYW1lXTsK");
    sb.append("ICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0b2xvYWQubGVuZ3RoOyBrKyspIHsKICAgICAgICB0b2xv");
    sb.append("YWRba10oKTsKICAgICAgfQogICAgfQogIH07CgogIC8vIDwuLi4gcng6d3JhcD1jb25zdCA+CiAgc2Vs");
    sb.append("Zi5XUCA9IGZ1bmN0aW9uIChkb20sIHN0YXRlLCBuYW1lLCByeG9iaiwgY2hpbGRNYWtlcldpdGhDYXNl");
    sb.append("KSB7CiAgICBpZiAobmFtZSBpbiB3cmFwcGVycykgewogICAgICB3cmFwcGVyc1tuYW1lXShkb20sIHN0");
    sb.append("YXRlLCByeG9iaiwgY2hpbGRNYWtlcldpdGhDYXNlLCBzZWxmKTsKICAgIH0gZWxzZSB7CiAgICAgIHZh");
    sb.append("ciBsb2FkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgd3JhcHBlcnNbbmFtZV0oZG9tLCBzdGF0ZSwg");
    sb.append("cnhvYmosIGNoaWxkTWFrZXJXaXRoQ2FzZSwgc2VsZik7CiAgICAgIH07CiAgICAgIGlmIChuYW1lIGlu");
    sb.append("IHdyYXBwZXJzX29ubG9hZCkgewogICAgICAgIHdyYXBwZXJzX29ubG9hZFtuYW1lXS5wdXNoKGxvYWRl");
    sb.append("cik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd3JhcHBlcnNfb25sb2FkW25hbWVdID0gW2xvYWRlcl07");
    sb.append("CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIgYmVoYXZpb3JzID0ge307CiAgc2VsZi5kZWZpbmVCZWhh");
    sb.append("dmlvciA9IGZ1bmN0aW9uKG5hbWUsIGJlaGF2aW9yKSB7CiAgICBpZiAodHlwZW9mKGJlaGF2aW9yKSA9");
    sb.append("PSAnZnVuY3Rpb24nKSB7CiAgICAgIGJlaGF2aW9yc1tuYW1lXSA9IGJlaGF2aW9yOwogICAgfSBlbHNl");
    sb.append("IHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJkZWZpbmluZyBiZWhhdmlvciAnIiArIG5hbWUgKyAiJyBm");
    sb.append("YWlsZWQgZHVlIHRvIG5vdCBhIGZ1bmN0aW9uIikKICAgIH0KICB9OwoKICAvLyBSVU5USU1FIHwgcng6");
    sb.append("YmVoYXZpb3I9JG5hbWUKICBzZWxmLkJIViA9IGZ1bmN0aW9uKGRvbSwgbmFtZSkgewogICAgaWYgKG5h");
    sb.append("bWUgaW4gYmVoYXZpb3JzKSB7CiAgICAgIGJlaGF2aW9yc1tuYW1lXTsKICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("IGNvbnNvbGUubG9nKCJjb3VsZG4ndCBmaW5kIGJlaGF2aW9yOiIgKyBuYW1lKTsKICAgIH0KICB9OwoK");
    sb.append("ICAvLyBSVU5USU1FIHwgcmVnaXN0ZXIgdGhlIHBhZ2UgZm9yIHRoZSB1cmkgdG8gdGhlIGdpdmVuIGZv");
    sb.append("bygpLgogIHNlbGYuUEcgPSBmdW5jdGlvbiAodXJpLCBmb28pIHsKICAgIHZhciBoZWFkID0gcm91dGVy");
    sb.append("OwogICAgZm9yICh2YXIgayA9IDA7IGsgPCB1cmkubGVuZ3RoOyBrKyspIHsKICAgICAgdmFyIHBhcnQg");
    sb.append("PSB1cmlba107CiAgICAgIGlmICghKHBhcnQgaW4gaGVhZCkpIHsKICAgICAgICBoZWFkW3BhcnRdID0g");
    sb.append("e307CiAgICAgIH0KICAgICAgaGVhZCA9IGhlYWRbcGFydF07CiAgICB9CiAgICBoZWFkWyJAIl0gPSBm");
    sb.append("b287CiAgfTsKCiAgdmFyIHJvdXRlID0gZnVuY3Rpb24gKHBhcnRzLCBhdCwgaGVhZCwgdmlldykgewog");
    sb.append("ICAgaWYgKGF0IDwgcGFydHMubGVuZ3RoKSB7CiAgICAgIGlmICgibnVtYmVyIiBpbiBoZWFkKSB7CiAg");
    sb.append("ICAgICAgdmFyIG5lY2sgPSBoZWFkWyJudW1iZXIiXTsKICAgICAgICB2YXIgdmFsID0gcGFyc2VGbG9h");
    sb.append("dChwYXJ0c1thdF0pOwogICAgICAgIGlmICghaXNOYU4odmFsKSkgewogICAgICAgICAgZm9yICh2YXIg");
    sb.append("YnJhbmNoIGluIG5lY2spIHsKICAgICAgICAgICAgdmlld1ticmFuY2hdID0gdmFsOwogICAgICAgICAg");
    sb.append("ICB2YXIgY2FuZGlkYXRlID0gcm91dGUocGFydHMsIGF0ICsgMSwgbmVja1ticmFuY2hdLCB2aWV3KTsK");
    sb.append("ICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZSAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJldHVybiBj");
    sb.append("YW5kaWRhdGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGVsZXRlIHZpZXdbYnJhbmNoXTsKICAg");
    sb.append("ICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCJ0ZXh0IiBpbiBoZWFkKSB7CiAgICAg");
    sb.append("ICAgdmFyIG5lY2sgPSBoZWFkWyJ0ZXh0Il07CiAgICAgICAgdmFyIHZhbCA9IHBhcnRzW2F0XTsKICAg");
    sb.append("ICAgICBmb3IgKHZhciBicmFuY2ggaW4gbmVjaykgewogICAgICAgICAgdmlld1ticmFuY2hdID0gdmFs");
    sb.append("OwogICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IHJvdXRlKHBhcnRzLCBhdCArIDEsIG5lY2tbYnJhbmNo");
    sb.append("XSwgdmlldyk7CiAgICAgICAgICBpZiAoY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJl");
    sb.append("dHVybiBjYW5kaWRhdGU7CiAgICAgICAgICB9CiAgICAgICAgICBkZWxldGUgdmlld1ticmFuY2hdOwog");
    sb.append("ICAgICAgIH0KICAgICAgfQogICAgICBpZiAoImZpeGVkIiBpbiBoZWFkKSB7CiAgICAgICAgdmFyIG5l");
    sb.append("Y2sgPSBoZWFkWyJmaXhlZCJdOwogICAgICAgIGZvciAodmFyIGJyYW5jaCBpbiBuZWNrKSB7CiAgICAg");
    sb.append("ICAgICBpZiAoYnJhbmNoID09IHBhcnRzW2F0XSkgewogICAgICAgICAgICB2YXIgY2FuZGlkYXRlID0g");
    sb.append("cm91dGUocGFydHMsIGF0ICsgMSwgbmVja1ticmFuY2hdLCB2aWV3KTsKICAgICAgICAgICAgaWYgKGNh");
    sb.append("bmRpZGF0ZSAhPT0gbnVsbCkgewogICAgICAgICAgICAgIHJldHVybiBjYW5kaWRhdGU7CiAgICAgICAg");
    sb.append("ICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICgi");
    sb.append("QCIgaW4gaGVhZCkgewogICAgICAgIHJldHVybiBoZWFkWyJAIl07CiAgICAgIH0KICAgIH0KICAgIHJl");
    sb.append("dHVybiBudWxsOwogIH07CgoKICBzZWxmLnJlc3VtZV91cmkgPSAiLyI7CiAgc2VsZi5nYXRlcyA9IFtd");
    sb.append("OwogIC8qKiBSVU5USU1FIHwgPGdhdGUtZXhpdCBndWFyZD0icmVhZCIgc2V0PSIiPiAqLwogIHNlbGYu");
    sb.append("SUcgPSBmdW5jdGlvbihzdGF0ZVJlYWQsIHJlYWQsIHN0YXRlV3JpdGUsIHdyaXRlKSB7CiAgICB2YXIg");
    sb.append("c20gPSB7CiAgICAgIHZhbHVlOiBmYWxzZSwKICAgICAgcnVuOiBmdW5jdGlvbigpIHsKICAgICAgICBp");
    sb.append("ZiAodGhpcy52YWx1ZSkgewogICAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAgb2JqW3dyaXRl");
    sb.append("XSA9IHRydWU7CiAgICAgICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlV3JpdGUudmlldywgb2Jq");
    sb.append("KTsKICAgICAgICAgIHN0YXRlV3JpdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgICAgICBy");
    sb.append("ZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9LAogICAgfTsK");
    sb.append("ICAgIHN1YnNjcmliZShzdGF0ZVJlYWQsIHJlYWQsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgIHNtLnZh");
    sb.append("bHVlID0gdmFsdWU7CiAgICB9KTsKICAgIHNlbGYuZ2F0ZXMucHVzaChzbSk7CiAgfTsKICBzZWxmLmdv");
    sb.append("dG8gPSBmdW5jdGlvbiAodXJpLCBub3cpIHsKICAgIHNlbGYucmVzdW1lX3VyaSA9IHVyaTsKICAgIHZh");
    sb.append("ciBibG9ja2VkID0gZmFsc2U7CiAgICBmb3IgKHZhciBrID0gMDsgayA8IHNlbGYuZ2F0ZXMubGVuZ3Ro");
    sb.append("OyBrKyspIHsKICAgICAgaWYgKHNlbGYuZ2F0ZXNba10ucnVuKCkpIHsKICAgICAgICBibG9ja2VkID0g");
    sb.append("dHJ1ZTsKICAgICAgfQogICAgfQogICAgaWYgKGJsb2NrZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQog");
    sb.append("ICAgaWYgKG5vdykgewogICAgICBzZWxmLmdvdG9fbm93KHVyaSk7CiAgICB9IGVsc2UgewogICAgICB3");
    sb.append("aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2VsZi5nb3RvX25vdyh1cmkpOwog");
    sb.append("ICAgICB9LCAxKTsKICAgIH0KICB9OwogIC8vIFJVTlRJTUU6IDx0YWcgLi4uIHJ4OmV2ZW50PSIuLi4g");
    sb.append("cmVzdW1lIC4uLiI+Li4KICBzZWxmLmJSID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBy");
    sb.append("dW46IGZ1bmN0aW9uKCkgewogICAgICAgIHNlbGYuZ2F0ZXMgPSBbXTsKICAgICAgICBzZWxmLmdvdG8o");
    sb.append("c2VsZi5yZXN1bWVfdXJpLCBmYWxzZSk7CiAgICAgIH0sCiAgICAgIG1lcmdlOiBmdW5jdGlvbigpIHt9");
    sb.append("CiAgICB9OwogIH07CiAgc2VsZi5nb3RvX25vdyA9IGZ1bmN0aW9uKHVyaSkgewogICAgaWYgKHVyaS5z");
    sb.append("dGFydHNXaXRoKCIvIikpIHsKICAgICAgc2VsZi5ydW4oZG9jdW1lbnQuYm9keSwgdXJpLCB0cnVlKTsK");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZml4SHJlZih1cmkpOwogICAg");
    sb.append("fQogIH07CgogIHZhciB1cmxCYXNlNjRUb1VpbnQ4QXJyYXkgPSBmdW5jdGlvbihiYXNlNjQpIHsKICAg");
    sb.append("IHZhciByYXdEYXRhID0gd2luZG93LmF0b2IoYmFzZTY0KTsKICAgIHZhciBvdXRwdXRBcnJheSA9IG5l");
    sb.append("dyBVaW50OEFycmF5KHJhd0RhdGEubGVuZ3RoKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmF3RGF0");
    sb.append("YS5sZW5ndGg7ICsraSkgewogICAgICBvdXRwdXRBcnJheVtpXSA9IHJhd0RhdGEuY2hhckNvZGVBdChp");
    sb.append("KTsKICAgIH0KICAgIHJldHVybiBvdXRwdXRBcnJheTsKICB9CgogIHNlbGYuY3VycmVudFB1c2hFdmVu");
    sb.append("dCA9IGZ1bmN0aW9uKCkge307CgogIHZhciBnZXRXZWJQdXNoU3RhdHVzID0gZnVuY3Rpb24oKSB7CiAg");
    sb.append("ICB2YXIgcmVzdWx0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIndlYnB1c2hfc3RhdHVzIik7CiAgICBp");
    sb.append("ZiAocmVzdWx0ICYmIHR5cGVvZihyZXN1bHQpID09ICJzdHJpbmciKSB7CiAgICAgIHJldHVybiByZXN1");
    sb.append("bHQ7CiAgICB9CiAgICByZXR1cm4gInVua25vd24iOwogIH0KCiAgdmFyIHNldFB1c2hTdGF0dXMgPSBm");
    sb.append("dW5jdGlvbihzdGF0dXMpIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ3ZWJwdXNoX3N0YXR1cyIs");
    sb.append("IHN0YXR1cyk7CiAgICBzZWxmLmN1cnJlbnRQdXNoRXZlbnQoKTsKICB9OwogIHNlbGYuc2V0UHVzaFN0");
    sb.append("YXR1cyA9IHNldFB1c2hTdGF0dXM7CgogIHZhciBzZXRQdXNoRXZlbnQgPSBmdW5jdGlvbihmb28pIHsK");
    sb.append("ICAgIHNlbGYuY3VycmVudFB1c2hFdmVudCA9IGZvbzsKICB9OwoKICB2YXIgc2V0dXBTdWJzY3JpcHRp");
    sb.append("b24gPSBmdW5jdGlvbiAocmVnaXN0cmF0aW9uLCB2YXBpZFB1YmxpY0tleSwgaWRlbnRpdHksIGlkZW50");
    sb.append("aXR5TmFtZSwgdmVyc2lvbikgewogICAgY29ubmVjdGlvbi5idW1wKCJ3cHMiKTsKICAgIHZhciBwdXNo");
    sb.append("S2V5TG9jYWwgPSAicHVzaF9lbmRwb2ludF8iICsgaWRlbnRpdHlOYW1lOwogICAgcmVnaXN0cmF0aW9u");
    sb.append("LnB1c2hNYW5hZ2VyCiAgICAuZ2V0U3Vic2NyaXB0aW9uKCkudGhlbihhc3luYyBmdW5jdGlvbiAoc3Vi");
    sb.append("c2NyaXB0aW9uKSB7CiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikgewogICAgICAgICAgcmV0dXJuIHN1");
    sb.append("YnNjcmlwdGlvbjsKICAgICAgICB9CiAgICAgICAgY29uc3QgY29udmVydGVkVmFwaWRLZXkgPSB1cmxC");
    sb.append("YXNlNjRUb1VpbnQ4QXJyYXkodmFwaWRQdWJsaWNLZXkpOwogICAgICAgIHJldHVybiByZWdpc3RyYXRp");
    sb.append("b24ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKHsKICAgICAgICAgIHVzZXJWaXNpYmxlT25seTogdHJ1ZSwK");
    sb.append("ICAgICAgICAgIGFwcGxpY2F0aW9uU2VydmVyS2V5OiBjb252ZXJ0ZWRWYXBpZEtleQogICAgICAgIH0p");
    sb.append("OwogICAgfSkudGhlbihmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgIC8vIG1ha2Ugc3VyZSB3");
    sb.append("ZSBoYXZlIGFuIGVuZHBvaW50IHNhdmVkIHJlbGF0ZWQgdG8gdGhlIHJpZ2h0IHZlcnNpb24KICAgICAg");
    sb.append("Y29ubmVjdGlvbi5JZGVudGl0eUhhc2goaWRlbnRpdHksIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlv");
    sb.append("bihyZXN1bHQpIHsKICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicHVzaF93b3JrZXJf");
    sb.append("dmVyc2lvbiIpICE9IHZlcnNpb24gfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImxhc3RfaWRlbnRpdHlf");
    sb.append("dXNlZCIpICE9IHJlc3VsdC5pZGVudGl0eUhhc2gpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJl");
    sb.append("bW92ZUl0ZW0ocHVzaEtleUxvY2FsKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInB1");
    sb.append("c2hfd29ya2VyX3ZlcnNpb24iLCB2ZXJzaW9uKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0");
    sb.append("ZW0oImxhc3RfaWRlbnRpdHlfdXNlZCIsIHJlc3VsdC5pZGVudGl0eUhhc2gpOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgdmFyIHN1YiA9IHN1YnNjcmlwdGlvbi50b0pTT04oKTsKICAgICAgICAgIHZhciB2YWwg");
    sb.append("PSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShwdXNoS2V5TG9jYWwpOwogICAgICAgICAgaWYgKHZhbCAmJiB2");
    sb.append("YWwgPT0gc3ViLmVuZHBvaW50KSB7CiAgICAgICAgICAgIGNvbm5lY3Rpb24uYnVtcCgid3BhIik7CiAg");
    sb.append("ICAgICAgICAgIHNldFB1c2hTdGF0dXMoInN1Y2Nlc3MiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAg");
    sb.append("ICAgICAgfQogICAgICAgICAgc3ViWydAbWV0aG9kJ10gPSAnd2VicHVzaCc7CiAgICAgICAgICBzdWJb");
    sb.append("J0B0aW1lJ10gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgIHZhciBkZXZpY2UgPSB7fTsK");
    sb.append("ICAgICAgICAgIGRldmljZS5tb2RlID0gJ3dlYicKICAgICAgICAgIGlmICh3aW5kb3cgJiYgd2luZG93");
    sb.append("Lm5hdmlnYXRvciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgewogICAgICAgICAgICBkZXZp");
    sb.append("Y2UudWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDsKICAgICAgICAgIH0KICAgICAgICAgIGNv");
    sb.append("bm5lY3Rpb24uUHVzaFJlZ2lzdGVyKGlkZW50aXR5LCBzZWxmLmRvbWFpbiwgc3ViLCBkZXZpY2UsIHsK");
    sb.append("ICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdl");
    sb.append("LnNldEl0ZW0ocHVzaEtleUxvY2FsLCBzdWIuZW5kcG9pbnQpOwogICAgICAgICAgICAgIGxvY2FsU3Rv");
    sb.append("cmFnZS5zZXRJdGVtKCJ3ZWJwdXNoX3N0YXR1cyIsICJzdWNjZXNzIik7CiAgICAgICAgICAgICAgc2V0");
    sb.append("UHVzaFN0YXR1cygic3VjY2VzcyIpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmYWlsdXJlOiBm");
    sb.append("dW5jdGlvbigpIHsKICAgICAgICAgICAgICBjb25uZWN0aW9uLmJ1bXAoIndwZiIpOwogICAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uKCkgewog");
    sb.append("ICAgICAgICAgY29ubmVjdGlvbi5idW1wKCJ3cGYiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwg");
    sb.append("ZnVuY3Rpb24oZXJyKSB7CiAgICAgIHNldFB1c2hTdGF0dXMoImZhaWxlZCIpOwogICAgICBsb2NhbFN0");
    sb.append("b3JhZ2UucmVtb3ZlSXRlbShwdXNoS2V5TG9jYWwpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRl");
    sb.append("bSgibGFzdF9pZGVudGl0eV91c2VkIik7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJwdXNo");
    sb.append("X3dvcmtlcl92ZXJzaW9uIik7CiAgICAgIGNvbm5lY3Rpb24uYnVtcCgid3BkIik7CiAgICAgIGNvbm5l");
    sb.append("Y3Rpb24ubG9nKCJwdXNoc2V0dXAiLCAiIiArIGVycik7CiAgICB9KTsKICB9CgogIHZhciBzZXR1cFB1");
    sb.append("c2ggPSBmdW5jdGlvbihwYXRoLCB2YXBpZFB1YmxpY0tleSwgaWRlbnRpdHksIGlkZW50aXR5TmFtZSwg");
    sb.append("dmVyc2lvbikgewogICAgaWYgKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSB7CiAgICAgIHRyeSB7CiAg");
    sb.append("ICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuZ2V0UmVnaXN0cmF0aW9ucygpLnRoZW4oZnVuY3Rp");
    sb.append("b24gKHJlZ2lzdHJhdGlvbnMpIHsKICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlOwogICAgICAgICAg");
    sb.append("Zm9yIChsZXQgcmVnaXN0cmF0aW9uIG9mIHJlZ2lzdHJhdGlvbnMpIHsKICAgICAgICAgICAgaWYgKHJl");
    sb.append("Z2lzdHJhdGlvbi5hY3RpdmUpIHsKICAgICAgICAgICAgICBpZiAoIXJlZ2lzdHJhdGlvbi5hY3RpdmUu");
    sb.append("c2NyaXB0VVJMLmVuZHNXaXRoKHBhdGgpKSB7CiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb24udW5y");
    sb.append("ZWdpc3RlcigpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmb3VuZCA9IHRy");
    sb.append("dWU7CiAgICAgICAgICAgICAgICBzZXR1cFN1YnNjcmlwdGlvbihyZWdpc3RyYXRpb24sIHZhcGlkUHVi");
    sb.append("bGljS2V5LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9uKTsKICAgICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgICAg");
    sb.append("bmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIocGF0aCk7CiAgICAgICAgICAgIG5hdmlnYXRv");
    sb.append("ci5zZXJ2aWNlV29ya2VyLnJlYWR5LnRoZW4oZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbikgewogICAgICAg");
    sb.append("ICAgICAgIHNldHVwU3Vic2NyaXB0aW9uKHJlZ2lzdHJhdGlvbiwgdmFwaWRQdWJsaWNLZXksIGlkZW50");
    sb.append("aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICB9LCBmdW5jdGlvbihleCkgewogICAgICAgICAgY29ubmVjdGlvbi5idW1wKCJ3cGkzIik7CiAg");
    sb.append("ICAgICAgICBjb25uZWN0aW9uLmxvZygid29ya2VyLWZpbmQiLCAiIiArIGV4KTsKICAgICAgICB9KTsK");
    sb.append("ICAgICAgfSBjYXRjaCAoZXgpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJmYWlsZWQgdG8gcmVnaXN0");
    sb.append("ZXIgc2VydmljZSB3b3JrZXIiLCBleCk7CiAgICAgICAgc2V0UHVzaFN0YXR1cygiaW1wb3NzaWJsZSIp");
    sb.append("OwogICAgICAgIGNvbm5lY3Rpb24uYnVtcCgid3BpMiIpOwogICAgICAgIGNvbm5lY3Rpb24ubG9nKCJ3");
    sb.append("b3JrZXItaW5zdGFsbCIsICIiICsgZXgpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBjb25zb2xl");
    sb.append("LmxvZygibm8gc2VydmljZSB3b3JrZXIgYXZhaWxhYmxlIik7CiAgICAgIHNldFB1c2hTdGF0dXMoImlt");
    sb.append("cG9zc2libGUiKTsKICAgICAgY29ubmVjdGlvbi5idW1wKCJ3cGkxIik7CiAgICB9CiAgfQoKICBzZWxm");
    sb.append("LndvcmtlciA9IGZ1bmN0aW9uKGlkZW50aXR5TmFtZSwgcGF0aCwgdmVyc2lvbikgewogICAgdHJ5IHsK");
    sb.append("ICAgICAgYWZ0ZXJIYXZlSWRlbnRpdHkoaWRlbnRpdHlOYW1lLCBmdW5jdGlvbihpZGVudGl0eSkgewog");
    sb.append("ICAgICAgIGNvbm5lY3Rpb24uRG9tYWluR2V0VmFwaWRQdWJsaWNLZXkoaWRlbnRpdHksIHNlbGYuZG9t");
    sb.append("YWluLCB7CiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICBz");
    sb.append("ZXR1cFB1c2gocGF0aCwgcmVzcG9uc2UucHVibGljS2V5LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2");
    sb.append("ZXJzaW9uKTsKICAgICAgICAgIH0sCiAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7");
    sb.append("CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoImZhaWxlZCB0byBnZXQgcHVibGljLWtleToiICsgcmVh");
    sb.append("c29uKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9KTsKICAgIH0gY2F0Y2ggKGV4KSB7CiAg");
    sb.append("ICAgIGNvbnNvbGUuZXJyb3IoImZhaWxlZCB0byBpbml0aWFsaXplIHdvcmtlciIsIGV4KTsKICAgIH0K");
    sb.append("ICB9OwoKICBzZWxmLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5");
    sb.append("LCBmaXhQYXRoKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gg");
    sb.append("KyB3aW5kb3cubG9jYXRpb24uaGFzaCksIGZhbHNlKTsKICAgIHdpbmRvdy5vbnBvcHN0YXRlID0gZnVu");
    sb.append("Y3Rpb24gKHApIHsKICAgICAgc2VsZi5ydW4oZG9jdW1lbnQuYm9keSwgZml4UGF0aCh3aW5kb3cubG9j");
    sb.append("YXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgd2luZG93LmxvY2F0aW9uLmhh");
    sb.append("c2gpLCBmYWxzZSk7CiAgICB9OwogIH07CgogIHZhciBjdXJyZW50TWVzc2FnZUhhbmRsZXJzID0ge307");
    sb.append("CiAgdmFyIHJlbW92ZUFsbE1lc3NhZ2VIYW5kbGVycyA9IGZ1bmN0aW9uKCkgewogICAgZm9yICh2YXIg");
    sb.append("ayBpbiBjdXJyZW50TWVzc2FnZUhhbmRsZXJzKSB7CiAgICAgIGRlbGV0ZSBjdXJyZW50TWVzc2FnZUhh");
    sb.append("bmRsZXJzW2tdOwogICAgfQogIH07CgogIHNlbGYucmVnaXN0ZXJNZXNzYWdlSGFuZGxlciA9IGZ1bmN0");
    sb.append("aW9uKGNoYW5uZWwsIGhhbmRsZXIpIHsKICAgIGlmIChjaGFubmVsIGluIGN1cnJlbnRNZXNzYWdlSGFu");
    sb.append("ZGxlcnMpIHsKICAgICAgY3VycmVudE1lc3NhZ2VIYW5kbGVyc1tjaGFubmVsXS5wdXNoKGhhbmRsZXIp");
    sb.append("OwogICAgfSBlbHNlIHsKICAgICAgY3VycmVudE1lc3NhZ2VIYW5kbGVyc1tjaGFubmVsXSA9IFtoYW5k");
    sb.append("bGVyXTsKICAgIH0KICB9OwoKICB2YXIgcm91dGVNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHsKICAg");
    sb.append("IGlmICghKCdkYXRhJyBpbiBldmVudCkpIHsgcmV0dXJuOyB9CiAgICBpZiAoISgnY2hhbm5lbCcgaW4g");
    sb.append("ZXZlbnQuZGF0YSkpIHsgcmV0dXJuOyB9CiAgICB2YXIgY2hhbm5lbCA9IGV2ZW50LmRhdGEuY2hhbm5l");
    sb.append("bDsKICAgIHZhciBsaXN0ID0gY3VycmVudE1lc3NhZ2VIYW5kbGVyc1tjaGFubmVsXTsKICAgIGlmIChs");
    sb.append("aXN0ICE9PSBudWxsKSB7CiAgICAgIHZhciBuID0gbGlzdC5sZW5ndGg7CiAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgbGlzdFtrXShldmVudC5kYXRhLCBldmVudCk7CiAgICAg");
    sb.append("IH0KICAgIH0KICB9OwoKICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgIHdpbmRvdy5h");
    sb.append("ZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgcm91dGVNZXNzYWdlLCBmYWxzZSk7CiAgfSBlbHNlIGlm");
    sb.append("ICh3aW5kb3cuYXR0YWNoRXZlbnQpIHsKICAgIHdpbmRvdy5hdHRhY2hFdmVudCgib25tZXNzYWdlIiwg");
    sb.append("cm91dGVNZXNzYWdlLCBmYWxzZSk7CiAgfQoKICBzZWxmLmN1cnJlbnRWaWV3ZXJJZCA9IDA7CiAgLy8g");
    sb.append("QVBJIHwgUnVuIHRoZSBwYWdlIGluIHRoZSBnaXZlbiBwbGFjZQogIHNlbGYucnVuID0gZnVuY3Rpb24g");
    sb.append("KHdoZXJlLCByYXdQYXRoLCBwdXNoKSB7CiAgICByZW1vdmVBbGxNZXNzYWdlSGFuZGxlcnMoKTsKICAg");
    sb.append("IHZhciBwYXRoID0gcmF3UGF0aDsKICAgIHdoaWxlIChwYXRoLmVuZHNXaXRoKCIvIikgJiYgcGF0aCAh");
    sb.append("PSAiLyIpIHsKICAgICAgcGF0aCA9IHBhdGguc3Vic3RyaW5nKDAsIHBhdGgubGVuZ3RoIC0gMSk7CiAg");
    sb.append("ICB9CiAgICBmb3IgKGNvbktleSBpbiBjb25uZWN0aW9ucykgewogICAgICBjb25uZWN0aW9uc1tjb25L");
    sb.append("ZXldLnRyZWUubnVrZSgpOwogICAgICBjb25uZWN0aW9uc1tjb25LZXldLm51a2UoKTsKICAgIH0KICAg");
    sb.append("IHZhciBzZWFyY2ggPSAiIjsKICAgIHZhciBrUXVlc3Rpb24gPSBwYXRoLmluZGV4T2YoJz8nKTsKICAg");
    sb.append("IGlmIChrUXVlc3Rpb24gPiAwKSB7CiAgICAgIHNlYXJjaCA9IHBhdGguc3Vic3RyaW5nKGtRdWVzdGlv");
    sb.append("bik7CiAgICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBrUXVlc3Rpb24pOwogICAgfQogICAgdmFy");
    sb.append("IHBhcnRzID0gKHBhdGguc3RhcnRzV2l0aCgiLyIpID8gcGF0aC5zdWJzdHJpbmcoMSkgOiBwYXRoKS5z");
    sb.append("cGxpdCgiLyIpOwogICAgdmFyIGluaXQgPSB7fTsKICAgIHNlbGYuY3VycmVudFZpZXdlcklkKys7CiAg");
    sb.append("ICBpbml0LnZpZXdlcl9jdXJyZW50X3BhZ2VfaWQgPSBzZWxmLmN1cnJlbnRWaWV3ZXJJZDsKICAgIHRy");
    sb.append("eSB7CiAgICAgIGluaXQudmlld2VyX3RpbWV6b25lID0gSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29s");
    sb.append("dmVkT3B0aW9ucygpLnRpbWVab25lOwogICAgICBpbml0LnZpZXdlcl9sYW5ndWFnZSA9IG5hdmlnYXRv");
    sb.append("ci5sYW5ndWFnZTsKICAgIH0gY2F0Y2ggKGJyb3dzZXJCYWQpIHsKICAgICAgLy8gd2UganVzdCBkb24n");
    sb.append("dCBzZWUgdGhlIHZpZXdzdGF0ZSBpZiB3ZSBkb24ndCBoYXZlIHRoZXNlIGF2YWlsYWJsZQogICAgfQog");
    sb.append("ICAgaW5pdC52aWV3ZXJfc2VhcmNoX3F1ZXJ5ID0gIiI7CiAgICBpbml0LnZpZXdlcl93ZWJfcHVzaF9z");
    sb.append("dGF0dXMgPSBnZXRXZWJQdXNoU3RhdHVzKCk7CiAgICBpZiAoc2VhcmNoICE9ICI/IikgewogICAgICBp");
    sb.append("bml0LnZpZXdlcl9zZWFyY2hfcXVlcnkgPSBzZWFyY2g7CiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBV");
    sb.append("UkxTZWFyY2hQYXJhbXMoc2VhcmNoLnN1YnN0cmluZygxKSk7CiAgICAgIHZhciBrSXQgPSBwYXJhbXMu");
    sb.append("a2V5cygpOwogICAgICB2YXIgcCA9IGtJdC5uZXh0KCk7CiAgICAgIHdoaWxlICghcC5kb25lKSB7CiAg");
    sb.append("ICAgICAgaW5pdFtwLnZhbHVlXSA9IHBhcmFtcy5nZXQocC52YWx1ZSk7CiAgICAgICAgcCA9IGtJdC5u");
    sb.append("ZXh0KCk7CiAgICAgIH0KICAgIH0KICAgIHZhciBmb28gPSByb3V0ZShwYXJ0cywgMCwgcm91dGVyLCBp");
    sb.append("bml0KTsKICAgIG51a2Uod2hlcmUpOwogICAgaWYgKGZvbyAhPSBudWxsKSB7CiAgICAgIHdpbmRvdy5z");
    sb.append("Y3JvbGxUbygwLCAwKTsKICAgICAgdmFyIHN0YXRlID0geyBzZXJ2aWNlOiBjb25uZWN0aW9uLCBkYXRh");
    sb.append("OiBudWxsLCB2aWV3OiBmcmVzaCh3aGVyZSksIGN1cnJlbnQ6ICJ2aWV3IiB9OwogICAgICBzZWxmLl9f");
    sb.append("Y3VycmVudCA9IHN0YXRlOwoKICAgICAgY29uc3Qgdmlld3N0YXRlID0gbG9jYWxTdG9yYWdlLmdldEl0");
    sb.append("ZW0oJ3J4dmlld3N0YXRlJyk7CiAgICAgIGlmIChudWxsICE9PSB2aWV3c3RhdGUpIHsKICAgICAgICBs");
    sb.append("b2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncnh2aWV3c3RhdGUnKTsKICAgICAgICBpbml0ID0gT2JqZWN0");
    sb.append("LmFzc2lnbih7fSwgaW5pdCwgSlNPTi5wYXJzZSh2aWV3c3RhdGUpKTsKICAgICAgfQoKICAgICAgc3Rh");
    sb.append("dGUudmlldy5pbml0ID0gaW5pdDsKICAgICAgc2VsZi5nYXRlcyA9IFtdOwogICAgICBzZWxmLnJlc3Vt");
    sb.append("ZV91cmkgPSBwYXRoOwogICAgICBmb28od2hlcmUsIHN0YXRlKTsKICAgICAgc3RhdGUudmlldy50cmVl");
    sb.append("LnN1YnNjcmliZShzdGF0ZS52aWV3LmRlbHRhKTsKICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShp");
    sb.append("bml0KTsKICAgICAgaWYgKHB1c2gpIHsKICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe21l");
    sb.append("cmdlOmZhbHNlfSwgIiIsIGZpeEhyZWYocGF0aCkgKyBzZWFyY2gpOwogICAgICB9CiAgICAgIHNldFB1");
    sb.append("c2hFdmVudChmdW5jdGlvbigpIHsKICAgICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHsgdmlld2Vy");
    sb.append("X3dlYl9wdXNoX3N0YXR1czogZ2V0V2ViUHVzaFN0YXR1cygpfSk7CiAgICAgIH0pOwogICAgfSBlbHNl");
    sb.append("IHsKICAgICAgaWYgKHBhdGggIT0gIi80MDQiKSB7CiAgICAgICAgc2VsZi5ydW4od2hlcmUsICIvNDA0");
    sb.append("Iik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gZGVmYXVsdCA0MDQKICAgICAgfQogICAgfQogICAg");
    sb.append("d2hlcmUuYXBwZW5kQ2hpbGQoY29ubmVjdGlvbk1vbml0b3JEb20pOwogIH07CgogIHZhciBpZGVudGl0");
    sb.append("aWVzID0ge307CgogIHNlbGYuU0lHTk9VVCA9IGZ1bmN0aW9uICgpIHsKICAgIGlkZW50aXRpZXMgPSB7");
    sb.append("fTsKICAgIGZvciAodmFyIGlkZW50aXR5TmFtZSBpbiBpZGVudGl0aWVzKSB7CiAgICAgIGxvY2FsU3Rv");
    sb.append("cmFnZS5yZW1vdmVJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlOYW1lKTsKICAgIH0KICAgIGxvY2Fs");
    sb.append("U3RvcmFnZS5yZW1vdmVJdGVtKCJpZGVudGl0eV9kZWZhdWx0Iik7CiAgICB2YXIgYXhlID0gW107CiAg");
    sb.append("ICBmb3IgKHZhciBjaWQgaW4gY29ubmVjdGlvbnMpIHsKICAgICAgdmFyIGNvID0gY29ubmVjdGlvbnNb");
    sb.append("Y2lkXTsKICAgICAgaWYgKGNvLnB0ciAhPSBudWxsKSB7CiAgICAgICAgY28ucHRyLmVuZCh7IHN1Y2Nl");
    sb.append("c3M6IGZ1bmN0aW9uICgpIHsgfSwgZmFpbHVyZTogZnVuY3Rpb24gKCkgeyB9IH0pOwogICAgICB9CiAg");
    sb.append("ICAgIGF4ZS5wdXNoKGNpZCk7CiAgICB9CiAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5ndGg7");
    sb.append("IGsrKykgewogICAgICBkZWxldGUgY29ubmVjdGlvbnNbYXhlW2tdXTsKICAgIH0KICB9OwoKICBzZWxm");
    sb.append("LkdPT0dMRV9TSUdOX09OID0gZnVuY3Rpb24gKGFjY2Vzc1Rva2VuKSB7CiAgICBjb25uZWN0aW9uLklu");
    sb.append("aXRDb252ZXJ0R29vZ2xlVXNlcihhY2Nlc3NUb2tlbiwgewogICAgICBzdWNjZXNzOiBmdW5jdGlvbiAo");
    sb.append("cGF5bG9hZCkgewogICAgICAgIGlkZW50aXRpZXNbImRlZmF1bHQiXSA9IHBheWxvYWQuaWRlbnRpdHk7");
    sb.append("CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkZW50aXR5X2RlZmF1bHQiLCBwYXlsb2FkLmlk");
    sb.append("ZW50aXR5KTsKICAgICAgICBzZWxmLmdvdG8oIi8iLCBmYWxzZSk7CiAgICAgIH0sCiAgICAgIGZhaWx1");
    sb.append("cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICBjb25zb2xlLmxvZygiR29vZ2xlIGZhaWx1cmU6");
    sb.append("ICIgKyByZWFzb24pOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvKiogUlVOVElNRSB8IHJlZGlyZWN0");
    sb.append("IHRvIGEgcGFnZSB3aXRoIHN0YXRlICovCiAgc2VsZi5hUkRwID0gZnVuY3Rpb24gKHN0YXRlLCBwdWxs");
    sb.append("ZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB1cmkgPSBwdWxsZXIoc3RhdGUu");
    sb.append("dmlldy5pbml0KTsKICAgICAgcmV0dXJuIHVyaTsKICAgIH07CiAgfTsKCiAgLyoqIFJVTlRJTUUgfCBy");
    sb.append("ZWRpcmVjdCB0byBhIHN0YXRpYyBwYWdlICovCiAgc2VsZi5hUkR6ID0gZnVuY3Rpb24gKHJhdykgewog");
    sb.append("ICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHJhdzsKICAgIH0KICB9OwoKICB2YXIg");
    sb.append("aWRlbnRpdHlFdmVudHMgPSB7fTsKICB2YXIgYWZ0ZXJIYXZlSWRlbnRpdHkgPSBmdW5jdGlvbihpZGVu");
    sb.append("dGl0eU5hbWUsIGNhbGxiYWNrKSB7CiAgICBpZGVudGl0eUV2ZW50c1tpZGVudGl0eU5hbWVdID0gY2Fs");
    sb.append("bGJhY2s7CiAgfTsKICBzZWxmLmFmdGVySGF2ZUlkZW50aXR5ID0gYWZ0ZXJIYXZlSWRlbnRpdHk7Cgog");
    sb.append("IC8qKiBmb3IgY3VzdG9tIGVsZW1lbnRzIHRvIGxlYXJuIG9mIHRoZSBpZGVudGl0eSAqLwogIHNlbGYu");
    sb.append("SUQgPSBmdW5jdGlvbiAoaWRlbnRpdHlOYW1lLCByZWRpcmVjdFRvRnVuYykgewogICAgaWYgKGlkZW50");
    sb.append("aXR5TmFtZSA9PT0gdHJ1ZSkgewogICAgICBpZGVudGl0eU5hbWUgPSAiZGVmYXVsdCI7CiAgICB9CiAg");
    sb.append("ICAvLyBJRiBpZGVudGl0eSBjb250YWlucyBkb3RzCiAgICB2YXIgaWRlbnRpdHkgPSBudWxsOwogICAg");
    sb.append("dmFyIGNsZWFudXAgPSBmdW5jdGlvbiAoKSB7CiAgICB9OwoKICAgIHZhciB2YWwgPSBsb2NhbFN0b3Jh");
    sb.append("Z2UuZ2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSk7CiAgICBpZiAodmFsKSB7CiAgICAg");
    sb.append("IGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHZhbDsKICAgIH0KCiAgICBpZiAoaWRlbnRpdHlOYW1l");
    sb.append("LnN0YXJ0c1dpdGgoImRpcmVjdDoiKSkgewogICAgICAvLyBVc2UsIGFzIGlzCiAgICAgIGlkZW50aXR5");
    sb.append("ID0gaWRlbnRpdHlOYW1lLnN1YnN0cmluZyg3KTsKICAgIH0gZWxzZSBpZiAoaWRlbnRpdHlOYW1lIGlu");
    sb.append("IGlkZW50aXRpZXMpIHsKICAgICAgaWRlbnRpdHkgPSBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV07CiAg");
    sb.append("ICAgIGNsZWFudXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZGVsZXRlIGlkZW50aXRpZXNbaWRlbnRp");
    sb.append("dHlOYW1lXTsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaWRlbnRpdHlfIiArIGlkZW50");
    sb.append("aXR5TmFtZSk7CiAgICAgICAgc2VsZi5nb3RvKHJlZGlyZWN0VG9GdW5jKCksIGZhbHNlKTsKICAgICAg");
    sb.append("fTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIHdoYXRldmVyIHBhZ2Ugd2UgYXJlLCBuZWVkcyB0byBkaWUg");
    sb.append("d2hpY2ggbWVhbnMgd2UgbmVlZCB0byBudWtlIGV2ZXJ5dGhpbmchCiAgICAgIHdpbmRvdy5zZXRUaW1l");
    sb.append("b3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLmdvdG8ocmVkaXJlY3RUb0Z1bmMoKSwgZmFsc2Up");
    sb.append("OwogICAgICB9LCAxMCk7CiAgICAgIHJldHVybiB7IGFib3J0OiB0cnVlIH07CiAgICB9CiAgICBpZiAo");
    sb.append("aWRlbnRpdHlOYW1lIGluIGlkZW50aXR5RXZlbnRzKSB7CiAgICAgIGlkZW50aXR5RXZlbnRzW2lkZW50");
    sb.append("aXR5TmFtZV0oaWRlbnRpdHkpOwogICAgICBkZWxldGUgaWRlbnRpdHlFdmVudHNbaWRlbnRpdHlOYW1l");
    sb.append("XTsKICAgIH0KICAgIHJldHVybiB7IGFib3J0OiBmYWxzZSwgY2xlYW51cDogY2xlYW51cCwgaWRlbnRp");
    sb.append("dHk6IGlkZW50aXR5IH07CiAgfTsKCiAgLyogRm9yIGN1c3RvbSBjYWxsYmFja3MgdG8gcmVkaXJlY3Qg");
    sb.append("YW5kIGludmFsaWRhdGUgSUQgZmFpbHVyZXMgKi8KICBzZWxmLkZJRENMID0gZnVuY3Rpb24gKGNhbGxi");
    sb.append("YWNrLCBsb29rdXApIHsKICAgIHJldHVybiB7CiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQp");
    sb.append("IHsKICAgICAgICBjYWxsYmFjay5zdWNjZXNzKHJlc3VsdCk7CiAgICAgIH0sCiAgICAgIG5leHQ6IGZ1");
    sb.append("bmN0aW9uIChpdGVtKSB7CiAgICAgICAgY2FsbGJhY2submV4dChpdGVtKTsKICAgICAgfSwKICAgICAg");
    sb.append("Y29tcGxldGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICBjYWxsYmFjay5jb21wbGV0ZSgpOwogICAgICB9");
    sb.append("LAogICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgY2FsbGJhY2suZmFpbHVy");
    sb.append("ZShyZWFzb24pOwogICAgICAgIGlmIChyZWFzb24gPT0gNDAzNDAzIHx8IHJlYXNvbiA9PSA0MDM1MDAg");
    sb.append("fHwgcmVhc29uID09IDE4NDMzMykgewogICAgICAgICAgbG9va3VwLmNsZWFudXAoKTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0KICAgIH07CiAgfTsKCiAgdmFyIGN1c3RvbURhdGFTb3VyY2VzID0ge307CgogIC8qKiBw");
    sb.append("cm92aWRlIGN1c3RvbSBkYXRhICovCiAgc2VsZi5QUkNVREEgPSBmdW5jdGlvbiAobmFtZSwgZm9vKSB7");
    sb.append("CiAgICBjdXN0b21EYXRhU291cmNlc1tuYW1lXSA9IGZvbzsKICB9OwoKICAvLyA8Y3VzdG9tZGF0YSBz");
    sb.append("cmM9c3JjIChwYXJhbWV0ZXI6eD15KSogPgogIHNlbGYuQ1VEQSA9IGZ1bmN0aW9uIChwYXJlbnQsIHBy");
    sb.append("aW9yU3RhdGUsIHNyYywgcnhvYmosIHJlZGlyZWN0VG8sIGNoaWxkTWFrZXIpIHsKICAgIHZhciB1bnN1");
    sb.append("YiA9IG1ha2VfdW5zdWIoKTsKICAgIHJ4b2JqLl9fID0gZGVib3VuY2UoMTAsIGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFyIGN1c3Rv");
    sb.append("bVRyZWUgPSBmYWxzZTsKICAgICAgaWYgKHNyYyBpbiBjdXN0b21EYXRhU291cmNlcykgewogICAgICAg");
    sb.append("IHZhciBjb25zID0gY3VzdG9tRGF0YVNvdXJjZXNbc3JjXTsKICAgICAgICBpZiAodHlwZW9mIChjb25z");
    sb.append("KSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICBjdXN0b21UcmVlID0gY29ucyhyeG9iaiwgcHJpb3JT");
    sb.append("dGF0ZSwgcmVkaXJlY3RUbywgc2VsZik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghY3VzdG9t");
    sb.append("VHJlZSkgewogICAgICAgIGN1c3RvbVRyZWUgPSBuZXcgQWRhbWFUcmVlKCk7CiAgICAgIH0KICAgICAg");
    sb.append("dmFyIHN0YXRlID0gewogICAgICAgIHNlcnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwKICAgICAgICBk");
    sb.append("YXRhOiB7IGNvbm5lY3Rpb246IHByaW9yU3RhdGUuY29ubmVjdGlvbiwgdHJlZTogY3VzdG9tVHJlZSwg");
    sb.append("ZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAgICAgICB2aWV3OiBuZXdfZGVs");
    sb.append("dGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICAgIGN1cnJlbnQ6ICJkYXRhIgogICAgICB9Owog");
    sb.append("ICAgICBjaGlsZE1ha2VyKHN0YXRlKTsKICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7");
    sb.append("CiAgICB9KTsKICB9OwoKICAvLyA8dGl0bGUgdmFsdWU9Ii4uLiIgLz4KICBzZWxmLlNUID0gZnVuY3Rp");
    sb.append("b24gKHJ4b2JqKSB7CiAgICBpZiAocnhvYmoudmFsdWUpIHsKICAgICAgZG9jdW1lbnQudGl0bGUgPSBy");
    sb.append("eG9iai52YWx1ZTsKICAgIH0KICAgIHJ4b2JqLl9fID0gZGVib3VuY2UoNSwgZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICBpZiAocnhvYmoudmFsdWUpIHsKICAgICAgICBkb2N1bWVudC50aXRsZSA9IHJ4b2JqLnZhbHVl");
    sb.append("OwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyA8dmlld3N5bmM+CiAgc2VsZi5WU3kgPSBmdW5jdGlv");
    sb.append("biAocGFyZW50LCBwcmlvclN0YXRlLCBhdmFpbCwgbm90YXZhaWwpIHsKICAgIHZhciB1bnN1YiA9IG1h");
    sb.append("a2VfdW5zdWIoKTsKICAgIHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLnN1YnNjcmliZV9zeW5jKGZ1");
    sb.append("bmN0aW9uIChzeW5jZWQpIHsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICBmaXJlX3Vuc3ViKHVuc3Vi");
    sb.append("KTsKICAgICAgdmFyIHN0YXRlID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgaWYgKHN5bmNlZCkgewog");
    sb.append("ICAgICAgIGF2YWlsKHBhcmVudCwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIG5vdGF2YWls");
    sb.append("KHBhcmVudCwgc3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIp");
    sb.append("OwogICAgICAvLyBUT0RPOiByZXR1cm4gZmFsc2UgdG8gdW5zdWIKICAgICAgcmV0dXJuIHRydWU7CiAg");
    sb.append("ICB9KTsKICB9OwoKICB2YXIgYmluZF9yZXNwb25kZXIgPSBmdW5jdGlvbiAoY28sIGNsZWFudXAsIHJl");
    sb.append("dHJ5X3NtKSB7CiAgICByZXRyeV9zbS51bmV4cGVjdGVkX2Vycm9ycyA9IDA7CiAgICByZXRyeV9zbS5i");
    sb.append("YWNrb2ZmID0gMTsKICAgIHJldHVybiB7CiAgICAgIG5leHQ6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAg");
    sb.append("ICAgICAgY28uZGVidWdnZXIocGF5bG9hZCk7CiAgICAgICAgY28uc2V0X2Nvbm5lY3RlZCh0cnVlKTsK");
    sb.append("ICAgICAgICByZXRyeV9zbS51bmV4cGVjdGVkX2Vycm9ycyA9IDA7CiAgICAgICAgcmV0cnlfc20uYmFj");
    sb.append("a29mZiA9IDE7CiAgICAgICAgaWYgKCJkYXRhIiBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBj");
    sb.append("by50cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLmRhdGEpOwogICAgICAgIH0KICAgICAgICBpZiAoIm91");
    sb.append("dHN0YW5kaW5nIiBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBjby5vbmRlY2lkZShwYXlsb2Fk");
    sb.append("LmRlbHRhLm91dHN0YW5kaW5nKTsKICAgICAgICB9CiAgICAgICAgaWYgKCd2aWV3c3RhdGUnIGluIHBh");
    sb.append("eWxvYWQuZGVsdGEpIHsKICAgICAgICAgIGNvLnZpZXdzdGF0ZXRyZWUudXBkYXRlKHBheWxvYWQuZGVs");
    sb.append("dGEudmlld3N0YXRlKTsKICAgICAgICB9CiAgICAgICAgaWYgKCdsb2cnIGluIHBheWxvYWQuZGVsdGEp");
    sb.append("IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHBheWxvYWQuZGVsdGEubG9nKTsKICAgICAgICB9CiAgICAg");
    sb.append("ICAgaWYgKCdyZWxvYWQnIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIGlmIChwYXlsb2FkLmRl");
    sb.append("bHRhLnJlbG9hZFsncHJlc2VydmUtdmlldyddKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJ");
    sb.append("dGVtKCdyeHZpZXdzdGF0ZScsIEpTT04uc3RyaW5naWZ5KGNvLnZpZXdzdGF0ZXRyZWUucmF3KCkpKTsK");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAg");
    sb.append("ICAgICAgaWYgKCd2aWV3cG9ydCcgaW4gcGF5bG9hZC5kZWx0YSAmJiAnbWVzc2FnZScgaW4gcGF5bG9h");
    sb.append("ZC5kZWx0YSkgewogICAgICAgICAgdmFyIHZpZXdwb3J0ID0gcGF5bG9hZC5kZWx0YS52aWV3cG9ydDsK");
    sb.append("ICAgICAgICAgIGlmICh2aWV3cG9ydCBpbiBjby5oYW5kbGVycykgewogICAgICAgICAgICBjby5oYW5k");
    sb.append("bGVyc1t2aWV3cG9ydF0ocGF5bG9hZC5kZWx0YS5tZXNzYWdlLCBjbyk7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfQogICAgICAgIGlmICgndmlldy1zdGF0ZS1maWx0ZXInIGluIHBheWxvYWQuZGVsdGEpIHsKICAg");
    sb.append("ICAgICAgIHZhciBmaWx0ZXIgPSB7fTsKICAgICAgICAgIHZhciBrZXlzID0gcGF5bG9hZC5kZWx0YVsn");
    sb.append("dmlldy1zdGF0ZS1maWx0ZXInXTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwga2V5cy5sZW5n");
    sb.append("dGg7IGsrKykgewogICAgICAgICAgICBmaWx0ZXJba2V5c1trXV0gPSB0cnVlOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgY28uZmlsdGVyID0gZmlsdGVyOwogICAgICAgICAgY28uaGFzX2ZpbHRlciA9IHRydWU7");
    sb.append("CiAgICAgICAgfQogICAgICAgIGlmICgnZ290bycgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAg");
    sb.append("c2VsZi5nb3RvKHBheWxvYWQuZGVsdGEuZ290bywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSwKICAg");
    sb.append("ICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBzaG91bGRuJ3QgcmVhbGlzdGljYWxs");
    sb.append("eSBoYXBwZW4gVE9ETzogdmFsaWRhdGUgPC0gdHJ1dGgKICAgICAgICBjby5zZXRfY29ubmVjdGVkKGZh");
    sb.append("bHNlKTsKICAgICAgICBjby5wdHIgPSBudWxsOwogICAgICB9LAogICAgICBmYWlsdXJlOiBmdW5jdGlv");
    sb.append("biAocmVhc29uKSB7CiAgICAgICAgLy8gcmVnaXN0ZXIgdGhlIGZhaWx1cmUKICAgICAgICBjby5zZXRf");
    sb.append("Y29ubmVjdGVkKGZhbHNlKTsKICAgICAgICBjby5wdHIgPSBudWxsOwogICAgICAgIGlmIChyZWFzb24g");
    sb.append("PT0gNDAzNDAzIHx8IHJlYXNvbiA9PSA0MDM1MDAgfHwgcmVhc29uID09IDE4NDMzMykgewogICAgICAg");
    sb.append("ICAgY2xlYW51cCgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvLyBpcyBpdCBh");
    sb.append("biBleHBlY3RlZCBlcnJvciB0aGF0IHdpbGwgaGFwcGVuIGEgYnVuY2g/CiAgICAgICAgdmFyIGV4cGVj");
    sb.append("dGVkX2Vycm9yID0gcmVhc29uID09IDk5OTsKICAgICAgICAvLyBkbyB3ZSBub3Qga25vdyBhYm91dCBh");
    sb.append("biBlcnJvciB0aGF0IGhhcHBlbnMgYSBidW5jaD8gaWYgc28sIHRoZW4gbGV0J3MgYXQgbGVhc3QgdHJ5");
    sb.append("IGFnYWluIGEgbnVtYmVyIG9mIGZpbml0ZSB0aW1lcy4KICAgICAgICB2YXIgYmxpbmRfcmV0cnkgPSBy");
    sb.append("ZXRyeV9zbS51bmV4cGVjdGVkX2Vycm9ycyA8IDE2OwogICAgICAgIGlmIChibGluZF9yZXRyeSkgewog");
    sb.append("ICAgICAgICAgcmV0cnlfc20udW5leHBlY3RlZF9lcnJvcnMrKzsKICAgICAgICB9CiAgICAgICAgLy8g");
    sb.append("cmV0cnkgb24gZWl0aGVyIGNhc2UKICAgICAgICBpZiAoZXhwZWN0ZWRfZXJyb3IgfHwgYmxpbmRfcmV0");
    sb.append("cnkpIHsKICAgICAgICAgIHJldHJ5X3NtLmJhY2tvZmYgPSBNYXRoLmNlaWwoTWF0aC5taW4ocmV0cnlf");
    sb.append("c20uYmFja29mZiArIE1hdGgucmFuZG9tKCkgKiByZXRyeV9zbS5iYWNrb2ZmICsgKGJsaW5kX3JldHJ5");
    sb.append("ID8gMTI1IDogMSksIDI1MDApKTsKICAgICAgICAgIGlmIChleHBlY3RlZF9lcnJvcikgewogICAgICAg");
    sb.append("ICAgICAvLyB0aGUgZXhwZWN0ZWQgZXJyb3IgaXMgYSBjb25uZWN0aW9uIGV2ZW50LCBzbyB3ZSBwcm90");
    sb.append("ZWN0IHRoZSBzZXJ2aWNlIGFuZCBqdW1wIGJhY2stb2ZmIHJpZ2h0IHRvIG5lYXIgbWF4IG92ZXIgYSBu");
    sb.append("aWNlIHNwcmVhZAogICAgICAgICAgICByZXRyeV9zbS5iYWNrb2ZmID0gTWF0aC5taW4oMTI1MCwgcmV0");
    sb.append("cnlfc20uYmFja29mZikgKyBNYXRoLnJhbmRvbSgpICogMTI1MDsKICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IGlmIChleHBlY3RlZF9lcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmxvZygiY29ubmVjdC1sb3Nz");
    sb.append("fHJldHJ5aW5nLi4uICgiICsgcmV0cnlfc20uYmFja29mZiArICIpOyByZWFzb249IiArIHJlYXNvbiAr");
    sb.append("IChibGluZF9yZXRyeSA/ICIgW2JsaW5kXSIgOiAiIikpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAg");
    sb.append("ICAgICAgY29uc29sZS5sb2coImNvbm5lY3QtZmFpbHVyZXxyZXRyeWluZy4uLiAoIiArIHJldHJ5X3Nt");
    sb.append("LmJhY2tvZmYgKyAiKTsgcmVhc29uPSIgKyByZWFzb24gKyAoYmxpbmRfcmV0cnkgPyAiIFtibGluZF0i");
    sb.append("IDogIiIpKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIFRPRE86IG5lZWQgYSBkaWZmZXJlbnQgZmVl");
    sb.append("ZGJhY2sgbWVjaGFuaXNtIChtYXliZSBhIG51bWJlciB1bmRlciB0aGUgd2lmaSBpY29uPykKICAgICAg");
    sb.append("ICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXRyeV9zbS5nbygp");
    sb.append("OwogICAgICAgICAgfSwgcmV0cnlfc20uYmFja29mZik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg");
    sb.append("IGNvbnNvbGUubG9nKCJnYXZlIHVwIGNvbm5lY3Rpb247IiArIGNvLmxhYmVsICsgIjsgcmVhc29uPSIg");
    sb.append("KyByZWFzb24pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIHZhciBzZXR1cF9jbyA9IGZ1");
    sb.append("bmN0aW9uKGRlc2lyZWQsIHVuc3ViLCBjbywgc3RhdGUpIHsKICAgIGNvLnZpZXdzdGF0ZXRyZWUgPSBz");
    sb.append("dGF0ZS52aWV3LnRyZWU7CiAgICB2YXIgc3luY190cmVlID0gZnVuY3Rpb24gKCkgewogICAgICAvLyBs");
    sb.append("ZXQncyBjb3B5IG91dCB0aGUgdHJlZSBmcm9tIHRoZSB2aWV3c3RhdGUKICAgICAgdmFyIG5ld190cmVl");
    sb.append("ID0gc2FmZV9maWx0ZXIoc3RhdGUudmlldy50cmVlLmNvcHkoKSk7CgogICAgICAvLyBpZiB3ZSBoYXZl");
    sb.append("IGdvdCBhIGZpbHRlciBmcm9tIHRoZSBzZXJ2ZXIsIHRoZW4gbGV0J3MgZmlsdGVyCiAgICAgIGlmIChj");
    sb.append("by5oYXNfZmlsdGVyKSB7CiAgICAgICAgLy8gcmVjb25zdHJ1Y3QgdGhlIG5ldyB2aWV3IGJhc2VkIG9u");
    sb.append("IHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhlIGZpbHRlciBhbmQgdGhlIG5ldyBzdGF0ZQogICAgICAgIHZh");
    sb.append("ciBmaWx0ZXJlZCA9IHt9OwogICAgICAgIGZvciAodmFyIGsgaW4gbmV3X3RyZWUpIHsKICAgICAgICAg");
    sb.append("IGlmIChjby5maWx0ZXJba10pIHsKICAgICAgICAgICAgZmlsdGVyZWRba10gPSBuZXdfdHJlZVtrXTsK");
    sb.append("ICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gYXNzdW1lIHRoZSBuZXcgdHJlZQogICAgICAg");
    sb.append("IG5ld190cmVlID0gZmlsdGVyZWQ7CiAgICAgIH0KICAgICAgLy8gaWYgdGhlIGNsb25lIChpLmUuIHN0");
    sb.append("cmluZ2lmaWVkIHZlcnNpb24pIGlzIHRoZSBzYW1lIGFzIHdoYXQgd2UgbGFzdCBzZW50LCB0aGVuIGRv");
    sb.append("bid0IHNlbmQgYW55dGhpbmcKICAgICAgdmFyIHByaW9yX2Nsb25lID0gSlNPTi5zdHJpbmdpZnkobmV3");
    sb.append("X3RyZWUpOwogICAgICBpZiAocHJpb3JfY2xvbmUgPT0gY28udmlld3N0YXRlX2Nsb25lKSB7CiAgICAg");
    sb.append("ICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvLnZpZXdzdGF0ZV9zZW50ID0gZmFsc2U7CiAgICAgIGNv");
    sb.append("LnZzc2VxKys7CiAgICAgIGNvLnN5bmMoKTsKICAgICAgdmFyIHN5bmNlZCA9IGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgICBpZiAoY28udnNzZXEgPT0gdGhpcy5ib3VuZCkgewogICAgICAgICAgY28udmlld3N0YXRl");
    sb.append("X3NlbnQgPSB0cnVlOwogICAgICAgICAgY28uc3luYygpOwogICAgICAgIH0KICAgICAgfS5iaW5kKHsg");
    sb.append("Ym91bmQ6IGNvLnZzc2VxIH0pOwogICAgICBjby52aWV3c3RhdGVfY2xvbmUgPSBKU09OLnN0cmluZ2lm");
    sb.append("eShuZXdfdHJlZSk7CiAgICAgIGNvLnB0ci51cGRhdGUobmV3X3RyZWUsIHsgc3VjY2Vzczogc3luY2Vk");
    sb.append("LCBmYWlsdXJlOiBzeW5jZWQgfSk7CiAgICB9OwogICAgdmFyIGJpbmQgPSBmdW5jdGlvbiAoc2VuZE5v");
    sb.append("dykgewogICAgICB1bnN1Yi52aWV3ID0gc3RhdGUudmlldy50cmVlLnN1YnNjcmliZShmdW5jdGlvbiAo");
    sb.append("KSB7CiAgICAgICAgaWYgKGNvLnB0ciA9PSBudWxsKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAg");
    sb.append("fQogICAgICAgIHN5bmNfdHJlZSgpOwogICAgICB9KTsKICAgICAgaWYgKHNlbmROb3cpIHsKICAgICAg");
    sb.append("ICBzeW5jX3RyZWUoKTsKICAgICAgfQogICAgfTsKICAgIGlmIChjby5wdHIgIT0gbnVsbCAmJiBjby5i");
    sb.append("b3VuZCA9PSBkZXNpcmVkKSB7CiAgICAgIGJpbmQodHJ1ZSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAg");
    sb.append("IH0KICAgIGlmIChjby5wdHIgIT0gbnVsbCkgewogICAgICBjby5wdHIuZW5kKHsgc3VjY2VzczogZnVu");
    sb.append("Y3Rpb24gKCkgeyB9LCBmYWlsdXJlOiBmdW5jdGlvbiAoKSB7IH0gfSk7CiAgICAgIGNvLnB0ciA9IG51");
    sb.append("bGw7CiAgICB9CiAgICByZXR1cm4gYmluZDsKICB9OwoKICAvLyA8Y29ubmVjdGlvbiBiaWxsaW5nIC4u");
    sb.append("Lj4KICBzZWxmLkJDT05ORUNUID0gZnVuY3Rpb24gKHN0YXRlLCByeG9iaikgewogICAgdmFyIHVuc3Vi");
    sb.append("ID0gewogICAgICB2aWV3OiBmdW5jdGlvbiAoKSB7CiAgICAgIH0KICAgIH07CiAgICByeG9iai5fXyA9");
    sb.append("IGRlYm91bmNlKDUsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCEoJ25hbWUnIGluIHJ4b2JqKSkgewog");
    sb.append("ICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKHJ4b2JqLmlk");
    sb.append("ZW50aXR5LCBmdW5jdGlvbiAoKSB7IHJldHVybiByeG9iai5yZWRpcmVjdDsgfSk7CiAgICAgIGlmIChp");
    sb.append("ZExvb2t1cC5hYm9ydCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgY28gPSBnZXRf");
    sb.append("Y29ubmVjdGlvbl9vYmoocnhvYmoubmFtZSk7CiAgICAgIHZhciBkZXNpcmVkID0gIjpiaWxsaW5nOiIg");
    sb.append("KyBpZExvb2t1cC5pZGVudGl0eTsKICAgICAgdmFyIGJpbmQgPSBzZXR1cF9jbyhkZXNpcmVkLCB1bnN1");
    sb.append("YiwgY28sIHN0YXRlKTsKICAgICAgaWYgKGJpbmQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwog");
    sb.append("ICAgICB9CiAgICAgIGNvLmJvdW5kID0gZGVzaXJlZDsKICAgICAgdmFyIGlkZW50aXR5ID0gaWRMb29r");
    sb.append("dXAuaWRlbnRpdHk7CiAgICAgIHZhciBjbGVhbnVwID0gaWRMb29rdXAuY2xlYW51cDsKICAgICAgdW5z");
    sb.append("dWIudmlldygpOwogICAgICBjby5pZGVudGl0eSA9IGlkZW50aXR5OwogICAgICBjby5oYW5kbGVycyA9");
    sb.append("IHt9OwogICAgICBjby52aWV3c3RhdGVfc2VudCA9IHRydWU7CiAgICAgIGNvLmxhYmVsID0gIkJpbGxp");
    sb.append("bmcgWyAiICsgcnhvYmoubmFtZSArICJdIjsKICAgICAgY28udmlhX2JpbGxpbmcgPSB0cnVlOwogICAg");
    sb.append("ICBjby52aWFfZG9tYWluID0gZmFsc2U7CiAgICAgIHZhciByZXRyeV9zbSA9IHt9OwogICAgICByZXRy");
    sb.append("eV9zbS5yZXNwb25kZXIgPSBiaW5kX3Jlc3BvbmRlcihjbywgY2xlYW51cCwgcmV0cnlfc20pOwogICAg");
    sb.append("ICByZXRyeV9zbS5nbyA9IGZ1bmN0aW9uKCkgewogICAgICAgIC8vIGJpYXMgdG8gbm90aGluZyBuZXcK");
    sb.append("ICAgICAgICBjby52aWV3c3RhdGVfY2xvbmUgPSAie30iOwogICAgICAgIGNvLnB0ciA9IGNvbm5lY3Rp");
    sb.append("b24uQmlsbGluZ0Nvbm5lY3Rpb25DcmVhdGUoaWRlbnRpdHksIHJldHJ5X3NtLnJlc3BvbmRlcik7CiAg");
    sb.append("ICAgIH07CiAgICAgIHJldHJ5X3NtLmdvKCk7CiAgICAgIGNvLnRyZWUudXBkYXRlKHt9KTsKICAgICAg");
    sb.append("YmluZChmYWxzZSk7CiAgICB9KTsKICB9OwoKICBzZWxmLmRvbWFpbiA9IGxvY2F0aW9uLmhvc3RuYW1l");
    sb.append("OwogIHNlbGYuaG9zdCA9IGxvY2F0aW9uLmhvc3Q7CiAgc2VsZi5wcm90b2NvbCA9IGxvY2F0aW9uLnBy");
    sb.append("b3RvY29sOwoKICBzZWxmLm1vYmlsZUluaXQgPSBmdW5jdGlvbihkZWZhdWx0T3ZlcnJpZGVEb21haW4p");
    sb.append("IHsKICAgIHNlbGYuZG9tYWluID0gZGVmYXVsdE92ZXJyaWRlRG9tYWluOwogICAgc2VsZi5ob3N0ID0g");
    sb.append("ZGVmYXVsdE92ZXJyaWRlRG9tYWluOwogICAgc2VsZi5wcm90b2NvbCA9ICJodHRwcyI7CiAgICBjb25u");
    sb.append("ZWN0aW9uLnByb3RvY29sID0gImh0dHBzIjsKICB9OwoKICBzZWxmLnNldE1vYmlsZU92ZXJyaWRlRG9t");
    sb.append("YWluID0gZnVuY3Rpb24obW9kZSwgbmV3RG9tYWluKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgi");
    sb.append("b3ZlcnJpZGUtbW9kZSIsIG5ld0RvbWFpbik7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgib3ZlcnJp");
    sb.append("ZGUtZG9tYWluIiwgbmV3RG9tYWluKTsKICB9OwoKICAvLyA8Y29ubmVjdGlvbiB1c2UtZG9tYWluIC4u");
    sb.append("Lj4KICBzZWxmLkRDT05ORUNUID0gZnVuY3Rpb24gKHN0YXRlLCByeG9iaikgewogICAgdmFyIHVuc3Vi");
    sb.append("ID0gewogICAgICB2aWV3OiBmdW5jdGlvbiAoKSB7CiAgICAgIH0KICAgIH07CiAgICByeG9iai5fXyA9");
    sb.append("IGRlYm91bmNlKDUsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCEoJ25hbWUnIGluIHJ4b2JqKSkgewog");
    sb.append("ICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKHJ4b2JqLmlk");
    sb.append("ZW50aXR5LCBmdW5jdGlvbiAoKSB7IHJldHVybiByeG9iai5yZWRpcmVjdDsgfSk7CiAgICAgIGlmIChp");
    sb.append("ZExvb2t1cC5hYm9ydCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgY28gPSBnZXRf");
    sb.append("Y29ubmVjdGlvbl9vYmoocnhvYmoubmFtZSk7CiAgICAgIHZhciBkb21haW4gPSBzZWxmLmRvbWFpbjsK");
    sb.append("ICAgICAgdmFyIGRlc2lyZWQgPSBkb21haW4gKyBpZExvb2t1cC5pZGVudGl0eTsKICAgICAgdmFyIGJp");
    sb.append("bmQgPSBzZXR1cF9jbyhkZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKTsKICAgICAgaWYgKGJpbmQgPT09");
    sb.append("IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvLmJvdW5kID0gZGVzaXJlZDsK");
    sb.append("CiAgICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2YXIgY2xlYW51cCA9");
    sb.append("IGlkTG9va3VwLmNsZWFudXA7CiAgICAgIHVuc3ViLnZpZXcoKTsKICAgICAgY28uaWRlbnRpdHkgPSBp");
    sb.append("ZGVudGl0eTsKICAgICAgY28uaGFuZGxlcnMgPSB7fTsKICAgICAgY28udmlld3N0YXRlX3NlbnQgPSB0");
    sb.append("cnVlOwogICAgICBjby5sYWJlbCA9ICJEb21haW46IiArIGRvbWFpbiArICIgWyAiICsgcnhvYmoubmFt");
    sb.append("ZSArICJdIjsKICAgICAgY28udmlhX2RvbWFpbiA9IHRydWU7CiAgICAgIGNvLnZpYV9iaWxsaW5nID0g");
    sb.append("ZmFsc2U7CiAgICAgIGNvLmRvbWFpbiA9IGRvbWFpbjsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAg");
    sb.append("ICAgIHJldHJ5X3NtLnJlc3BvbmRlciA9IGJpbmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9z");
    sb.append("bSk7CiAgICAgIHJldHJ5X3NtLmdvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3Ro");
    sb.append("aW5nIG5ldwogICAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0g");
    sb.append("Y29ubmVjdGlvbi5Db25uZWN0aW9uQ3JlYXRlVmlhRG9tYWluKGlkZW50aXR5LCBkb21haW4sIHNhZmVf");
    sb.append("ZmlsdGVyKHN0YXRlLnZpZXcudHJlZS5jb3B5KCkpLCByZXRyeV9zbS5yZXNwb25kZXIpOwogICAgICB9");
    sb.append("OwogICAgICByZXRyeV9zbS5nbygpOwogICAgICBjby50cmVlLnVwZGF0ZSh7fSk7CiAgICAgIGJpbmQo");
    sb.append("ZmFsc2UpOwogICAgfSk7CiAgfTsKCiAgLy8gPGNvbm5lY3Rpb24gLi4uPgogIHNlbGYuQ09OTkVDVCA9");
    sb.append("IGZ1bmN0aW9uIChzdGF0ZSwgcnhvYmopIHsKICAgIHZhciB1bnN1YiA9IHsKICAgICAgdmlldzogZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICB9CiAgICB9OwogICAgcnhvYmouX18gPSBkZWJvdW5jZSg1LCBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgIHZhciB2YWxpZCA9ICdrZXknIGluIHJ4b2JqICYmICdzcGFjZScgaW4gcnhvYmog");
    sb.append("JiYgJ25hbWUnIGluIHJ4b2JqOwogICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgcmV0dXJuOwogICAg");
    sb.append("ICB9CiAgICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQocnhvYmouaWRlbnRpdHksIGZ1bmN0aW9uICgp");
    sb.append("IHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0OyB9KTsKICAgICAgaWYgKGlkTG9va3VwLmFib3J0KSB7CiAg");
    sb.append("ICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBjbyA9IGdldF9jb25uZWN0aW9uX29iaihyeG9i");
    sb.append("ai5uYW1lKTsKICAgICAgdmFyIGRlc2lyZWQgPSByeG9iai5zcGFjZSArICIvIiArIHJ4b2JqLmtleSAr");
    sb.append("ICIvIiArIGlkTG9va3VwLmlkZW50aXR5OyAvLyBUT0RPOiBuZWVkIHNvbWUga2luZCBvZiBoYXNoaW5n");
    sb.append("IGZ1bmN0aW9uIGhlcmUKICAgICAgdmFyIGJpbmQgPSBzZXR1cF9jbyhkZXNpcmVkLCB1bnN1YiwgY28s");
    sb.append("IHN0YXRlKTsKICAgICAgaWYgKGJpbmQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9");
    sb.append("CiAgICAgIGNvLmJvdW5kID0gZGVzaXJlZDsKCiAgICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3VwLmlk");
    sb.append("ZW50aXR5OwogICAgICB2YXIgY2xlYW51cCA9IGlkTG9va3VwLmNsZWFudXA7CiAgICAgIHVuc3ViLnZp");
    sb.append("ZXcoKTsKICAgICAgY28uc3BhY2UgPSByeG9iai5zcGFjZTsKICAgICAgY28ua2V5ID0gcnhvYmoua2V5");
    sb.append("OwogICAgICBjby5pZGVudGl0eSA9IGlkZW50aXR5OwogICAgICBjby5oYW5kbGVycyA9IHt9OwogICAg");
    sb.append("ICBjby52aWV3c3RhdGVfc2VudCA9IHRydWU7CiAgICAgIGNvLmxhYmVsID0gY28uc3BhY2UgKyAiLyIg");
    sb.append("KyBjby5rZXkgKyAiIFsgIiArIHJ4b2JqLm5hbWUgKyAiXSI7CiAgICAgIGNvLnZpYV9kb21haW4gPSBm");
    sb.append("YWxzZTsKICAgICAgY28udmlhX2JpbGxpbmcgPSBmYWxzZTsKICAgICAgdmFyIHJldHJ5X3NtID0ge307");
    sb.append("CiAgICAgIHJldHJ5X3NtLnJlc3BvbmRlciA9IGJpbmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRy");
    sb.append("eV9zbSk7CiAgICAgIHJldHJ5X3NtLmdvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBu");
    sb.append("b3RoaW5nIG5ldwogICAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRy");
    sb.append("ID0gY29ubmVjdGlvbi5Db25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5LCByeG9iai5zcGFjZSwgcnhvYmou");
    sb.append("a2V5LCBzYWZlX2ZpbHRlcihzdGF0ZS52aWV3LnRyZWUuY29weSgpKSwgcmV0cnlfc20ucmVzcG9uZGVy");
    sb.append("KTsKICAgICAgfTsKICAgICAgcmV0cnlfc20uZ28oKTsKICAgICAgY28udHJlZS51cGRhdGUoe30pOwog");
    sb.append("ICAgICBiaW5kKGZhbHNlKTsKICAgIH0pOwogIH07CgogIHNlbGYuSU5URVJOQUwgPSBmdW5jdGlvbiAo");
    sb.append("cHJpb3JTdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgc2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNl");
    sb.append("LAogICAgICBkYXRhOiB7IGNvbm5lY3Rpb246IG51bGwsIHRyZWU6IG5ldyBBZGFtYVRyZWUoKSwgZGVs");
    sb.append("dGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAgICAgdmlldzogbmV3X2RlbHRhX2Nv");
    sb.append("cHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgY3VycmVudDogImRhdGEiCiAgICB9OwogIH07CgogIHZh");
    sb.append("ciByZWNhbGxfZW1haWwgPSBmdW5jdGlvbiAoZWwpIHsKICAgIGlmIChlbC50YWdOYW1lLnRvVXBwZXJD");
    sb.append("YXNlKCkgPT0gIklOUFVUIikgewogICAgICBpZiAoImVtYWlsIiA9PSBlbC50eXBlICYmICJlbWFpbCIg");
    sb.append("PT0gZWwubmFtZSkgewogICAgICAgIGVsLnZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImVtYWls");
    sb.append("X3JlbWVtYmVyIik7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICgiY2hpbGRyZW4iIGluIGVs");
    sb.append("KSB7CiAgICAgICAgdmFyIGFyciA9IGVsLmNoaWxkcmVuOwogICAgICAgIHZhciBuID0gYXJyLmxlbmd0");
    sb.append("aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgICAgcmVjYWxsX2Vt");
    sb.append("YWlsKGVsLmNoaWxkcmVuW2tdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICBzZWxmLmFV");
    sb.append("UCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgdmFyIGlk");
    sb.append("TG9va3VwID0gc2VsZi5JRChpZGVudGl0eU5hbWUsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJ4");
    sb.append("X2ZvcndhcmQ7IH0pOyAvLyBUT0RPOiBtYWtlIHJ4dmFyCiAgICBpZiAoaWRMb29rdXAuYWJvcnQpIHsK");
    sb.append("ICAgICAgcmV0dXJuOwogICAgfQogICAgZm9ybS5hY3Rpb24gPSAiaHR0cHM6Ly8iICsgQWRhbWEuUHJv");
    sb.append("ZHVjdGlvbiArICIvfnVwbG9hZCI7CiAgICBmb3JtLm1ldGhvZCA9ICJwb3N0IjsKICAgIGZvcm0uZW5j");
    sb.append("dHlwZSA9ICJtdWx0aXBhcnQvZm9ybS1kYXRhIjsKICAgIHZhciBpZGVudGl0eUlucHV0ID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgIGlkZW50aXR5SW5wdXQudHlwZSA9ICJoaWRkZW4i");
    sb.append("OwogICAgaWRlbnRpdHlJbnB1dC5uYW1lID0gImlkZW50aXR5IjsKICAgIGlkZW50aXR5SW5wdXQudmFs");
    sb.append("dWUgPSBpZExvb2t1cC5pZGVudGl0eTsKICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWRlbnRpdHlJbnB1dCk7");
    sb.append("CiAgICB2YXIgaWZyYW1lVGFyZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CiAg");
    sb.append("ICBpZnJhbWVUYXJnZXQubmFtZSA9ICJVUExPQURfIiArIE1hdGgucmFuZG9tKCk7CiAgICBpZnJhbWVU");
    sb.append("YXJnZXQud2lkdGggPSAiMSI7CiAgICBpZnJhbWVUYXJnZXQuaGVpZ2h0ID0gIjEiOwoKICAgIGZvcm0u");
    sb.append("YXBwZW5kQ2hpbGQoaWZyYW1lVGFyZ2V0KTsKICAgIGZvcm0udGFyZ2V0ID0gaWZyYW1lVGFyZ2V0Lm5h");
    sb.append("bWU7CiAgfTsKCiAgc2VsZi5hRFVQID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUs");
    sb.append("IHJ4b2JqKSB7CiAgICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKGlkZW50aXR5TmFtZSwgZnVuY3Rpb24g");
    sb.append("KCkgeyByZXR1cm4gcnhvYmoucnhfZm9yd2FyZDsgfSk7IC8vIFRPRE86IG1ha2Ugcnh2YXIKICAgIGlm");
    sb.append("IChpZExvb2t1cC5hYm9ydCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBmb3JtLmFjdGlvbiA9IHNl");
    sb.append("bGYucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0ICsgIi9+dXBsb2FkIjsKICAgIGZvcm0ubWV0aG9k");
    sb.append("ID0gInBvc3QiOwogICAgZm9ybS5lbmN0eXBlID0gIm11bHRpcGFydC9mb3JtLWRhdGEiOwogICAgewog");
    sb.append("ICAgICB2YXIgaWRlbnRpdHlJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAg");
    sb.append("ICAgIGlkZW50aXR5SW5wdXQudHlwZSA9ICJoaWRkZW4iOwogICAgICBpZGVudGl0eUlucHV0Lm5hbWUg");
    sb.append("PSAiaWRlbnRpdHkiOwogICAgICBpZGVudGl0eUlucHV0LnZhbHVlID0gaWRMb29rdXAuaWRlbnRpdHk7");
    sb.append("CiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWRlbnRpdHlJbnB1dCk7CiAgICB9CiAgICB7CiAgICAgIHZh");
    sb.append("ciBkb21haW5JbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGRvbWFp");
    sb.append("bklucHV0LnR5cGUgPSAiaGlkZGVuIjsKICAgICAgZG9tYWluSW5wdXQubmFtZSA9ICJkb21haW4iOwog");
    sb.append("ICAgICBkb21haW5JbnB1dC52YWx1ZSA9IHNlbGYuZG9tYWluOwogICAgICBmb3JtLmFwcGVuZENoaWxk");
    sb.append("KGRvbWFpbklucHV0KTsKICAgIH0KICAgIHZhciBpZnJhbWVUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJpZnJhbWUiKTsKICAgIGlmcmFtZVRhcmdldC5uYW1lID0gIlVQTE9BRF8iICsgTWF0aC5y");
    sb.append("YW5kb20oKTsKICAgIGlmcmFtZVRhcmdldC53aWR0aCA9ICIxIjsKICAgIGlmcmFtZVRhcmdldC5oZWln");
    sb.append("aHQgPSAiMSI7CiAgICBmb3JtLmFwcGVuZENoaWxkKGlmcmFtZVRhcmdldCk7CiAgICBmb3JtLnRhcmdl");
    sb.append("dCA9IGlmcmFtZVRhcmdldC5uYW1lOwogIH07CgogIHZhciBzdGFzaF9pZGVudGl0eSA9IGZ1bmN0aW9u");
    sb.append("KG5hbWUsIGlkZW50aXR5LCBjb25uZWN0aW9uKSB7CiAgICB2YXIgcmVxID0ge307CiAgICByZXFbJ25h");
    sb.append("bWUnXSA9IG5hbWU7CiAgICByZXFbJ2lkZW50aXR5J10gPSBpZGVudGl0eTsKICAgIHJlcVsnbWF4LWFn");
    sb.append("ZSddID0gNTUyOTYwMDsKCiAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHho");
    sb.append("dHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMucmVhZHlT");
    sb.append("dGF0ZSA9PSA0KSB7CiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgY29u");
    sb.append("bmVjdGlvbi5JZGVudGl0eVN0YXNoKGlkZW50aXR5LCBuYW1lLCB7CiAgICAgICAgICAgIHN1Y2Nlc3M6");
    sb.append("IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIC8vIFRISVMgSEFTIERSQUdPTlMgVU5USUwgQSBGVUxM");
    sb.append("IFBST0RVQ1RJT04gREVQTE9ZTUVOVAogICAgICAgICAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVt");
    sb.append("KCJpZGVudGl0eV8iICsgbmFtZSwgImNvb2tpZToiICsgbmFtZSk7CiAgICAgICAgICAgIH0sCiAgICAg");
    sb.append("ICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uKHh5eikgewoKICAgICAgICAgICAgfQogICAgICAgICAgfSk7");
    sb.append("CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgeGh0dHAub3BlbigiUFVUIiwgc2VsZi5wcm90b2Nv");
    sb.append("bCArICIvLyIgKyBzZWxmLmhvc3QgKyAiL35zdGFzaC8iICsgRGF0ZS5ub3coKSwgdHJ1ZSk7CiAgICB4");
    sb.append("aHR0cC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogICAgeGh0dHAuc2VuZChKU09OLnN0cmluZ2lmeShy");
    sb.append("ZXEpKTsKICB9OwoKICB2YXIgZ2V0X2Zvcm1fYW5kX3B3ID0gZnVuY3Rpb24oZm9ybSkgewogICAgdmFy");
    sb.append("IHBhc3N3b3JkcyA9IHt9OwogICAgdmFyIHJlcSA9IGdldF9mb3JtKGZvcm0sIHBhc3N3b3Jkcyk7CiAg");
    sb.append("ICBpZiAoJ3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgcmVxWydwYXNzd29yZCddID0gcGFz");
    sb.append("c3dvcmRzWydwYXNzd29yZCddOwogICAgfQogICAgaWYgKCduZXdfcGFzc3dvcmQnIGluIHBhc3N3b3Jk");
    sb.append("cykgewogICAgICByZXFbJ25ld19wYXNzd29yZCddID0gcGFzc3dvcmRzWyduZXdfcGFzc3dvcmQnXTsK");
    sb.append("ICAgIH0KICAgIHJldHVybiByZXE7CiAgfQoKICB2YXIgY29tbW9uQXV0aG9yaXplID0gZnVuY3Rpb24o");
    sb.append("Zm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmosIG5leHRTdGVwKSB7CiAgICByeG9iai5fXyA9");
    sb.append("IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rp");
    sb.append("b24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHNlbmRSZXEgPSBm");
    sb.append("dW5jdGlvbihyZXEpIHsKICAgICAgICB2YXIgc20gPSB7YXR0ZW1wdHM6MH07CiAgICAgICAgc20ucmVz");
    sb.append("cG9uZGVyID0gewogICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAg");
    sb.append("ICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdID0gcGF5bG9hZC5pZGVudGl0eTsKICAgICAgICAgICAg");
    sb.append("bG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRl");
    sb.append("bnRpdHkpOwogICAgICAgICAgICBzdGFzaF9pZGVudGl0eShpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRl");
    sb.append("bnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlv");
    sb.append("bnMKICAgICAgICAgICAgc2VsZi5nb3RvKHJ4b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsKICAgICAgICAg");
    sb.append("ICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0");
    sb.append("aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2lnbmlu");
    sb.append("ZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAg");
    sb.append("bmV4dFN0ZXAocmVxLCBzbS5yZXNwb25kZXIpOwogICAgICB9CiAgICAgIHZhciBwYXNzd29yZHMgPSB7");
    sb.append("fTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtKGZvcm0sIHBhc3N3b3Jkcyk7CiAgICAgIGlmICgncGFz");
    sb.append("c3dvcmQnIGluIHBhc3N3b3JkcykgewogICAgICAgIHJlcVsncGFzc3dvcmQnXSA9IHBhc3N3b3Jkc1sn");
    sb.append("cGFzc3dvcmQnXTsKICAgICAgfQogICAgICBpZiAoJ25ld19wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB7");
    sb.append("CiAgICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudHNIYXNoUGFzc3dvcmQocGFzc3dvcmRzWyduZXdfcGFz");
    sb.append("c3dvcmQnXSwgewogICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGhhc2hlZF9wdykgewogICAgICAg");
    sb.append("ICAgICByZXFbJ25ld19wYXNzd29yZCddID0gaGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsKICAgICAgICAg");
    sb.append("ICAgc2VuZFJlcShyZXEpOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWxlZDogZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0byBoYXNoIHBhc3N3b3JkIik7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VuZFJlcShyZXEp");
    sb.append("OwogICAgICB9CiAgICB9LCB0cnVlKTsKICB9CgogIC8vIHJ4OmFjdGlvbj1kb2N1bWVudDphdXRob3Jp");
    sb.append("emUKICBzZWxmLmFET0MgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmop");
    sb.append("IHsKICAgIGNvbW1vbkF1dGhvcml6ZShmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgZnVu");
    sb.append("Y3Rpb24ocmVxLCByZXNwb25kZXIpIHsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6YXRp");
    sb.append("b24ocmVxLnNwYWNlLCByZXEua2V5LCByZXEsIHJlc3BvbmRlcik7CiAgICB9KTsKICB9OwoKICAvLyBy");
    sb.append("eDphY3Rpb249ZG9tYWluOmF1dGhvcml6ZQogIHNlbGYuYURPTSA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0");
    sb.append("ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgY29tbW9uQXV0aG9yaXplKGZvcm0sIHN0YXRlLCBp");
    sb.append("ZGVudGl0eU5hbWUsIHJ4b2JqLCBmdW5jdGlvbihyZXEsIHJlc3BvbmRlcikgewogICAgICBjb25uZWN0");
    sb.append("aW9uLkRvY3VtZW50QXV0aG9yaXphdGlvbkRvbWFpbihzZWxmLmRvbWFpbiwgcmVxLCByZXNwb25kZXIp");
    sb.append("OwogICAgfSk7CiAgfTsKCiAgLy8gcng6ZXZlbnQ9dG9nZ2xlLXBhc3N3b3JkCiAgc2VsZi5vblBXVCA9");
    sb.append("IGZ1bmN0aW9uKGRvbSwgc3RhdGUsIHR5cGUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBl");
    sb.append("LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGN1ciA9IGRvbTsKICAgICAgd2hpbGUgKGN1ci50");
    sb.append("YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT0gIlBBU1NXT1JELUhPTERFUiIpIHsKICAgICAgICBjdXIgPSBj");
    sb.append("dXIucGFyZW50RWxlbWVudDsKICAgICAgfQogICAgICB2YXIgaHVudCA9IGZ1bmN0aW9uKG5vZGUpIHsK");
    sb.append("ICAgICAgICBpZiAobm9kZS50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIklOUFVUIiAmJiAobm9kZS5u");
    sb.append("YW1lID09ICJwYXNzd29yZCIgfHwgbm9kZS5uYW1lID09ICJjb25maXJtLXBhc3N3b3JkIiB8fCBuYW1l");
    sb.append("ID09ICJuZXdfcGFzc3dvcmQiIHx8IG5hbWUgPT0gImNvbmZpcm0tbmV3X3Bhc3N3b3JkIikpIHsKICAg");
    sb.append("ICAgICAgIGlmIChub2RlLnR5cGUgPT0gInBhc3N3b3JkIikgewogICAgICAgICAgICBub2RlLnR5cGUg");
    sb.append("PSAidGV4dCIKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5vZGUudHlwZSA9ICJwYXNzd29y");
    sb.append("ZCIKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCdjaGlsZHJlbicgaW4gbm9kZSkgewog");
    sb.append("ICAgICAgICAgdmFyIGNoID0gbm9kZS5jaGlsZHJlbjsKICAgICAgICAgIHZhciBuID0gY2gubGVuZ3Ro");
    sb.append("OwogICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAgICAgaHVudChj");
    sb.append("aFtrXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgICBpZiAoY3VyICE9IG51bGwp");
    sb.append("IHsKICAgICAgICBodW50KGN1cik7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUUgfCBy");
    sb.append("eDphY3Rpb249ZG9tYWluOnNpZ24taW4gKHRvIGRlcHJlY2F0ZSkKICBzZWxmLmFkRFNPID0gZnVuY3Rp");
    sb.append("b24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICByeG9iai5fXyA9IGZ1bmN0");
    sb.append("aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2");
    sb.append("dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2Fu");
    sb.append("ZF9wdyhmb3JtKTsKICAgICAgdmFyIHNtID0ge2F0dGVtcHRzOjB9OwogICAgICBzbS5yZXNwb25kZXIg");
    sb.append("PSB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIGlkZW50aXRp");
    sb.append("ZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxvYWQuaWRlbnRpdHk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uu");
    sb.append("c2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7CiAgICAg");
    sb.append("ICAgICBzdGFzaF9pZGVudGl0eShpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rp");
    sb.append("b24pOwogICAgICAgICAgLy8gVE9ETzogYmxvdyBhd2F5IGNvbm5lY3Rpb25zCiAgICAgICAgICBzZWxm");
    sb.append("LmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0p");
    sb.append("OwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAg");
    sb.append("ZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2lnbmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24p");
    sb.append("OwogICAgICAgIH0KICAgICAgfTsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZURvbWFp");
    sb.append("bihzZWxmLmRvbWFpbiwgcmVxLnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHNtLnJlc3BvbmRlcik7CiAg");
    sb.append("ICB9LCB0cnVlKTsKICB9CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9jdW1lbnQ6c2lnbi1pbiAo");
    sb.append("dG8gZGVwcmVjYXRlKQogIHNlbGYuYURTTyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlO");
    sb.append("YW1lLCByeG9iaikgeyAvLyBERVBSRUNBVEVECiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsK");
    sb.append("ICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBl");
    sb.append("dnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsK");
    sb.append("ICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZShyZXEuc3BhY2UsIHJlcS5rZXksIHJlcS51");
    sb.append("c2VybmFtZSwgcmVxLnBhc3N3b3JkLCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQp");
    sb.append("IHsKICAgICAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxvYWQuaWRlbnRpdHk7CiAg");
    sb.append("ICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgcGF5");
    sb.append("bG9hZC5pZGVudGl0eSk7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAg");
    sb.append("ICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1");
    sb.append("Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7");
    sb.append("CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6");
    sb.append("IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIHRydWUpOwogIH07CgogIC8vIFJV");
    sb.append("TlRJTUUgfCByeDphY3Rpb249ZG9tYWluOnNpZ24taW4tcmVzZXQgKHRvIGRlcHJlY2F0ZSkKICBzZWxm");
    sb.append("LmFkRFNPciA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgeyAvLyBE");
    sb.append("RVBSRUNBVEVECiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRM");
    sb.append("aXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQo");
    sb.append("KTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgY29ubmVjdGlvbi5E");
    sb.append("b2N1bWVudEF1dGhvcml6ZURvbWFpbldpdGhSZXNldChzZWxmLmRvbWFpbiwgcmVxLnVzZXJuYW1lLCBy");
    sb.append("ZXEucGFzc3dvcmQsIHJlcS5uZXdfcGFzc3dvcmQsewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChw");
    sb.append("YXlsb2FkKSB7CiAgICAgICAgICBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV0gPSBwYXlsb2FkLmlkZW50");
    sb.append("aXR5OwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5h");
    sb.append("bWUsIHBheWxvYWQuaWRlbnRpdHkpOwogICAgICAgICAgLy8gVE9ETzogYmxvdyBhd2F5IGNvbm5lY3Rp");
    sb.append("b25zCiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAg");
    sb.append("ZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJl");
    sb.append("YXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2lnbmluZyBpbnRvIGRv");
    sb.append("Y3VtZW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0cnVlKTsKICB9Cgog");
    sb.append("IC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9jdW1lbnQ6c2lnbi1pbi1yZXNldCAodG8gZGVwcmVjYXRl");
    sb.append("KQogIHNlbGYuYURTT3IgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmop");
    sb.append("IHsgLy8gREVQUkVDQVRFRAogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFk");
    sb.append("ZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnRE");
    sb.append("ZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybV9hbmRfcHcoZm9ybSk7CiAgICAgIGNvbm5l");
    sb.append("Y3Rpb24uRG9jdW1lbnRBdXRob3JpemVXaXRoUmVzZXQocmVxLnNwYWNlLCByZXEua2V5LCByZXEudXNl");
    sb.append("cm5hbWUsIHJlcS5wYXNzd29yZCwgcmVxLm5ld19wYXNzd29yZCx7CiAgICAgICAgc3VjY2VzczogZnVu");
    sb.append("Y3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxv");
    sb.append("YWQuaWRlbnRpdHk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlk");
    sb.append("ZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkg");
    sb.append("Y29ubmVjdGlvbnMKICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAg");
    sb.append("ICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5j");
    sb.append("dGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5n");
    sb.append("IGludG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9LCB0cnVlKTsKICAgIH0p");
    sb.append("OwogIH07CgogIHNlbGYuYXV0b2dlbmlkID0gMTsKICBzZWxmLlggPSBmdW5jdGlvbigpIHsKICAgIHNl");
    sb.append("bGYuYXV0b2dlbmlkKys7CiAgICByZXR1cm4gJ3gnICsgc2VsZi5hdXRvZ2VuaWQ7CiAgfTsKCiAgdmFy");
    sb.append("IHRyYW5zZm9ybXMgPSB7fTsKICB0cmFuc2Zvcm1zWydwcmluY2lwYWwuYWdlbnQnXSA9IGZ1bmN0aW9u");
    sb.append("KHgpIHsgcmV0dXJuIHguYWdlbnQ7IH07CiAgdHJhbnNmb3Jtc1sncHJpbmNpcGFsLmF1dGhvcml0eSdd");
    sb.append("ID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geC5hdXRob3JpdHk7IH07CiAgdHJhbnNmb3Jtc1sndHJpbSdd");
    sb.append("ID0gZnVuY3Rpb24oeCkgeyByZXR1cm4gKCcnICsgeCkudHJpbSgpOyB9OwogIHRyYW5zZm9ybXNbJ3Vw");
    sb.append("cGVyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiAoJycgKyB4KS50b1VwcGVyQ2FzZSgpOyB9OwogIHRy");
    sb.append("YW5zZm9ybXNbJ2xvd2VyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiAoJycgKyB4KS50b0xvd2VyQ2Fz");
    sb.append("ZSgpOyB9OwogIHRyYW5zZm9ybXNbJ2lzX2VtcHR5X3N0ciddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4g");
    sb.append("eCA9PSAiIjsgfTsKICB0cmFuc2Zvcm1zWydpc19ub3RfZW1wdHlfc3RyJ10gPSBmdW5jdGlvbih4KSB7");
    sb.append("IHJldHVybiB4ICE9ICIiOyB9OwogIHRyYW5zZm9ybXNbJ2pzb25pZnknXSA9IGZ1bmN0aW9uKHgpIHsg");
    sb.append("cmV0dXJuIEpTT04uc3RyaW5naWZ5KHgpOyB9OwogIHRyYW5zZm9ybXNbJ3RpbWVfbm93J10gPSBmdW5j");
    sb.append("dGlvbih4KSB7IHJldHVybiBEYXRlLm5vdygpICsgIiI7IH07CiAgdHJhbnNmb3Jtc1snc2l6ZV9ieXRl");
    sb.append("cyddID0gZnVuY3Rpb24oeHJhdykgewogICAgdmFyIHggPSAwLjA7CiAgICBpZiAodHlwZW9mKHhyYXcp");
    sb.append("ID09ICdudW1iZXInKSB7CiAgICAgIHggPSB4cmF3OwogICAgfSBlbHNlIHsKICAgICAgdHJ5IHsKICAg");
    sb.append("ICAgICB4ID0gcGFyc2VGbG9hdCh4cmF3KTsKICAgICAgfSBjYXRjaCAoZXgpIHsKCiAgICAgIH0KICAg");
    sb.append("IH0KICAgIHZhciBpdmFsID0gTWF0aC5mbG9vcih4KTsKICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAg");
    sb.append("ICByZXR1cm4gaXZhbCArICIgQiI7CiAgICB9CiAgICBpdmFsIC89IDEwMjQ7CiAgICBpZiAoaXZhbCA8");
    sb.append("IDEwMjQpIHsKICAgICAgcmV0dXJuIE1hdGgucm91bmQoaXZhbCAqIDEwKSAvIDEwLjAgKyAiIEtCIjsK");
    sb.append("ICAgIH0KICAgIGl2YWwgLz0gMTAyNDsKICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4g");
    sb.append("TWF0aC5yb3VuZChpdmFsICogMTApIC8gMTAuMCArICIgTUIiOwogICAgfQogICAgaXZhbCAvPSAxMDI0");
    sb.append("OwogICAgaWYgKGl2YWwgPCAxMDI0KSB7CiAgICAgIHJldHVybiBNYXRoLnJvdW5kKGl2YWwgKiAxMCkg");
    sb.append("LyAxMC4wICsgIiBHQiI7CiAgICB9CiAgfQogIHRyYW5zZm9ybXNbJ3Z1bGdhcl9mcmFjdGlvbiddID0g");
    sb.append("ZnVuY3Rpb24oeHJhdykgewogICAgdmFyIHggPSAwLjA7CiAgICBpZiAodHlwZW9mKHhyYXcpID09ICdu");
    sb.append("dW1iZXInKSB7CiAgICAgIHggPSB4cmF3OwogICAgfSBlbHNlIHsKICAgICAgdHJ5IHsKICAgICAgICB4");
    sb.append("ID0gcGFyc2VGbG9hdCh4cmF3KTsKICAgICAgfSBjYXRjaCAoZXgpIHsKCiAgICAgIH0KICAgIH0KICAg");
    sb.append("IHZhciBpdmFsID0gTWF0aC5mbG9vcih4KTsKICAgIHZhciBjaGFuZ2UgPSB4IC0gaXZhbDsKICAgIHZh");
    sb.append("ciBzdWZmaXggPSAiIjsKICAgIGlmIChjaGFuZ2UgPD0gMC4wNjI1KSB7CiAgICAgIC8vIDAKICAgIH0g");
    sb.append("ZWxzZSBpZiAoY2hhbmdlIDw9IDAuMTg3NSkgewogICAgICBzdWZmaXggPSAi4oWbIjsKICAgIH0gZWxz");
    sb.append("ZSBpZiAoY2hhbmdlIDw9IDAuMzEyNSkgewogICAgICBzdWZmaXggPSAiwrwiOwogICAgfSBlbHNlIGlm");
    sb.append("IChjaGFuZ2UgPD0gMC40Mzc1KSB7CiAgICAgIHN1ZmZpeCA9ICLihZwiOwogICAgfSBlbHNlIGlmIChj");
    sb.append("aGFuZ2UgPD0gMC41NjI1KSB7CiAgICAgIHN1ZmZpeCA9ICLCvSI7CiAgICB9IGVsc2UgaWYgKGNoYW5n");
    sb.append("ZSA8PSAwLjY4NzUpIHsKICAgICAgc3VmZml4ID0gIuKFnSI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8");
    sb.append("PSAwLjgxMjUpIHsKICAgICAgc3VmZml4ID0gIsK+IjsgLy8gMy80CiAgICB9IGVsc2UgaWYgKGNoYW5n");
    sb.append("ZSA8PSAwLjkzNzUpIHsKICAgICAgc3VmZml4ID0gIuKFniI7CiAgICB9IC8vIGVsc2UgMQogICAgcmV0");
    sb.append("dXJuIGl2YWwgKyBzdWZmaXg7CiAgfQogIHRyYW5zZm9ybXNbJ3RpbWVfYWdvJ10gPSBmdW5jdGlvbihk");
    sb.append("dCkgewogICAgLy8gb25seSB0cmFuc2Zvcm0gc3RyaW5ncwogICAgaWYgKHR5cGVvZiAoZHQpID09ICJz");
    sb.append("dHJpbmciKSB7CiAgICAgIC8vIGxldCdzIHN0cmlwIG91dCBldmVyeXRoaW5nIGFmdGVyIHRoZSBicmFj");
    sb.append("a2V0cwogICAgICB2YXIgcyA9IGR0OwogICAgICB2YXIgayA9IHMuaW5kZXhPZignWycpOwogICAgICBp");
    sb.append("ZiAoayA+PSAwKSB7CiAgICAgICAgcyA9IHMuc3Vic3RyaW5nKDAsIGspOwogICAgICB9CiAgICAgIHZh");
    sb.append("ciBkID0gRGF0ZS5wYXJzZShzKTsKICAgICAgaWYgKE51bWJlci5pc05hTihkKSkgewogICAgICAgIC8v");
    sb.append("IGl0IGlzbid0IGEgbnVtYmVyLCBzbyB3ZSBkaWRuJ3QgZ2V0IGEgZGF0ZSBzdGFtcDsgZGVmYXVsdCB0");
    sb.append("byB0aGUgaW5wdXQKICAgICAgICByZXR1cm4gZHQ7CiAgICAgIH0KICAgICAgLy8gd2UgYXJlIGludGVy");
    sb.append("ZXN0ZWQgaW4gcHJvZHVjaW5nIGEgc3RyaW5nIGxpa2UgIlggbWludXRlcyBhZ28iLCBzbyBzdGFydCB3");
    sb.append("aXRoIHNlY29uZHMKICAgICAgdmFyIGRlbHRhID0gKERhdGUubm93KCkgLSBkKS8xMDAwOyAvLyBzZWNv");
    sb.append("bmRzOwogICAgICBpZiAoZGVsdGEgPCA2MCkgewogICAgICAgIHJldHVybiAiTGVzcyB0aGFuIGEgbWlu");
    sb.append("dXRlIGFnbyI7CiAgICAgIH0KICAgICAgLy8gaXQgd2Fzbid0IDkwIHNlY29uZHMgYWdvIG9yIGxlc3Ms");
    sb.append("IHNvIGxldCdzIHJlZmluZSB0b3dhcmRzIG1pbnV0ZXMKICAgICAgZGVsdGEgLz0gNjA7IC8vIG5vdyBp");
    sb.append("dCBpcyBtaW51dGVzCiAgICAgIGlmIChkZWx0YSA8IDYwKSB7CiAgICAgICAgcmV0dXJuIE1hdGguZmxv");
    sb.append("b3IoZGVsdGEpICsgIiBtaW51dGVzIGFnbyI7CiAgICAgIH0KICAgICAgaWYgKGRlbHRhID4gMi42Mjhl");
    sb.append("KzcpIHsKICAgICAgICByZXR1cm4gIk5ldmVyIjsKICAgICAgfQogICAgICAvLyBpdCB3YXNuJ3QgOTAg");
    sb.append("bWludXRlcyBhZ28sIHNvIGxldCdzIGp1c3QgcHV0IHRoZSB0aW1lIHN0YW1wIHVwCiAgICAgIHZhciBk");
    sb.append("dGhlbiA9IG5ldyBEYXRlKGQpOwogICAgICB2YXIgZG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgIGlmIChk");
    sb.append("dGhlbi50b0xvY2FsZURhdGVTdHJpbmcoKSAhPSBkbm93LnRvTG9jYWxlRGF0ZVN0cmluZygpKSB7CiAg");
    sb.append("ICAgICAgcmV0dXJuIGR0aGVuLnRvTG9jYWxlRGF0ZVN0cmluZygpICsgIiAiICsgZHRoZW4udG9Mb2Nh");
    sb.append("bGVUaW1lU3RyaW5nKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGR0aGVuLnRvTG9jYWxlVGltZVN0cmlu");
    sb.append("ZygpOwogICAgfSBlbHNlIHsKICAgICAgLy8gZG8gbm90aGluZwogICAgICByZXR1cm4gZHQ7CiAgICB9");
    sb.append("CiAgfTsKCiAgdHJhbnNmb3Jtc1sndGltZSddID0gZnVuY3Rpb24oZHQpIHsKICAgICAgICAvLyBvbmx5");
    sb.append("IHRyYW5zZm9ybSBzdHJpbmdzCiAgICBpZiAodHlwZW9mIChkdCkgPT0gInN0cmluZyIpIHsKICAgICAg");
    sb.append("Ly8gbGV0J3Mgc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGJyYWNrZXRzCiAgICAgIHZhciBz");
    sb.append("ID0gZHQ7CiAgICAgIHZhciBrID0gcy5pbmRleE9mKCdbJyk7CiAgICAgIGlmIChrID49IDApIHsKICAg");
    sb.append("ICAgICBzID0gcy5zdWJzdHJpbmcoMCwgayk7CiAgICAgIH0KCiAgICAgIC8vIENvbnZlcnQgc3RyaW5n");
    sb.append("IHRvIHRpbWUgZm9ybWF0CiAgICAgIHZhciB0ID0gZHQuaW5kZXhPZigiOiIpOwogICAgICBpZiAodCA8");
    sb.append("IDApIHsKICAgICAgICByZXR1cm4gZHQ7CiAgICAgIH0KICAgICAgdmFyIGggPSBkdC5zcGxpdCgiOiIp");
    sb.append("WzBdOwogICAgICB2YXIgaG91cnMgPSBoOwogICAgICBpZiAoaC5sZW5ndGggPiAyKSB7CiAgICAgICAg");
    sb.append("aG91cnMgPSBoLnN1YnN0cmluZyhoLmxlbmd0aCAtIDIsIGgubGVuZ3RoKTsgLy8gdHJpbSBsZWZ0IGlu");
    sb.append("IGNhc2Ugb2YgZGF0ZXRpbWUKICAgICAgfQogICAgICB2YXIgQW1PclBtID0gaG91cnMgPj0gMTIgPyAn");
    sb.append("cG0nIDogJ2FtJzsKICAgICAgaG91cnMgPSAoaG91cnMgJSAxMikgfHwgMTI7CiAgICAgIHZhciBtID0g");
    sb.append("ZHQuc3BsaXQoIjoiKVsxXQogICAgICB2YXIgbWludXRlcyA9IG07CiAgICAgIGlmIChtLmxlbmd0aCA+");
    sb.append("IDIpIHsKICAgICAgICBtaW51dGVzID0gbS5zdWJzdHJpbmcoMCwyKTsgLy8gdHJpbSByaWdodCBpbiBj");
    sb.append("YXNlIG9mIGRhdGV0aW1lCiAgICAgIH0KCiAgICAgIHJldHVybiBob3VycyArICI6IiArIG1pbnV0ZXMg");
    sb.append("KyAiICIgKyBBbU9yUG07IAogICAgfSBlbHNlIHsKICAgICAgLy8gZG8gbm90aGluZwogICAgICByZXR1");
    sb.append("cm4gZHQ7CiAgICB9CiAgfTsKCiAgdHJhbnNmb3Jtc1snZGF0ZSddID0gZnVuY3Rpb24oZm9ybWF0LCBk");
    sb.append("KSB7CiAgICBpZiAodHlwZW9mIChkKSA9PSAic3RyaW5nIikgewogICAgICAvLyBpZiBkYXRlIGlzIG5v");
    sb.append("dCBzZXQsIHJldHVybiBlbXB0eSBzdHJpbmcKICAgICAgaWYgKGQgPT0gIjEtMDEtMDEiKSByZXR1cm4g");
    sb.append("IiIKCiAgICAgIGNvbnN0IHAgPSBmb3JtYXQudG9Mb3dlckNhc2UoKS5zcGxpdCgiLyIpOwogICAgICBj");
    sb.append("b25zdCBvcHRzID0ge307CiAgICAgIHAuZm9yRWFjaChmID0+IHsKICAgICAgICBjb25zdCB2YWwgPSBm");
    sb.append("Lmxlbmd0aCA+IDIgPyAibnVtZXJpYyIgOiAiMi1kaWdpdCI7CiAgICAgICAgY29uc3Qga2V5cyA9IHsi");
    sb.append("eSI6ICJ5ZWFyIiwgIm0iOiAibW9udGgiLCAiZCI6ICJkYXkifQogICAgICAgIG9wdHNba2V5c1tmLmNo");
    sb.append("YXJBdCgwKV1dID0gdmFsOwogICAgICB9KQoKICAgICAgLy8gaWYgbm90IGRhdGV0aW1lLCBjb252ZXJ0");
    sb.append("aW5nIHRvIG9uZSBoZXJlIHRvIHByZXZlbnQgdGltZXpvbmUgaXNzdWVzCiAgICAgIGNvbnN0IGRhdGV0");
    sb.append("aW1lID0gZC5pbmNsdWRlcygiVCIpID8gZCA6IGQgKyAiVDAwOjAwOjAwIjsKICAgICAgcmV0dXJuIG5l");
    sb.append("dyBEYXRlKGRhdGV0aW1lKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgb3B0cyk7CiAgICB9IGVs");
    sb.append("c2UgewogICAgICAvLyBkbyBub3RoaW5nCiAgICAgIHJldHVybiBkOwogICAgfQogIH0KICAKCiAgc2Vs");
    sb.append("Zi5SVFIgPSBmdW5jdGlvbihuYW1lLCB0cmFuc2Zvcm0pIHsKICAgIHRyYW5zZm9ybXNbbmFtZV0gPSB0");
    sb.append("cmFuc2Zvcm07CiAgfTsKICBzZWxmLnJlZ2lzdGVyVHJhbnNmb3JtID0gc2VsZi5SVFI7CgogIC8vIHti");
    sb.append("bGFofG5hbWV9CiAgc2VsZi5UUiA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgIGlmIChuYW1lIGluIHRyYW5z");
    sb.append("Zm9ybXMpIHsKICAgICAgcmV0dXJuIHRyYW5zZm9ybXNbbmFtZV07CiAgICB9IAogICAgLy8gY2hlY2sg");
    sb.append("Zm9yIGRhdGUgZm9ybWF0CiAgICBpZiAobmFtZS5zdGFydHNXaXRoKCJkYXRlLWZvcm1hdDoiKSl7CiAg");
    sb.append("ICAgIGNvbnN0IFtfLCBmb3JtYXRdICA9IG5hbWUuc3BsaXQoIjoiKTsKICAgICAgcmV0dXJuIHggPT4g");
    sb.append("dHJhbnNmb3Jtc1siZGF0ZSJdKGZvcm1hdCwgeCk7CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24oeCkg");
    sb.append("eyByZXR1cm4geDsgfTsKICB9OwoKICAvLyBUT0RPCiAgdmFyIHZhbGlkYXRvcnMgPSB7fTsKICBzZWxm");
    sb.append("LlJWID0gZnVuY3Rpb24obmFtZSwgdmFsaWRhdG9yKSB7CiAgICB2YWxpZGF0b3JzW25hbWVdID0gdmFs");
    sb.append("aWRhdG9yOwogIH07CiAgc2VsZi5yZWdpc3RlclZhbGlkYXRvciA9IHNlbGYuUlY7CgogIHZhciBjb21t");
    sb.append("b25QdXQgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmosIHVybGZhY3Rv");
    sb.append("cnkpIHsKICAgIC8vIFdJUAogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFk");
    sb.append("ZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnRE");
    sb.append("ZWZhdWx0KCk7CiAgICAgIHZhciBwYXNzd29yZHMgPSB7fTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3Jt");
    sb.append("KGZvcm0sIHBhc3N3b3Jkcyk7CgogICAgICB2YXIgbmV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2");
    sb.append("YXIgdXJsID0gdXJsZmFjdG9yeShyeG9iaik7CiAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBS");
    sb.append("ZXF1ZXN0KCk7CiAgICAgICAgeGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgICAgICAgIGlmICh0aGlzLnN0");
    sb.append("YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICB2YXIgdHlwZSA9IHRoaXMuZ2V0UmVzcG9uc2VIZWFk");
    sb.append("ZXIoIkNvbnRlbnQtVHlwZSIpOwogICAgICAgICAgICAgIGlmICh0eXBlID09ICJ0ZXh0L2Vycm9yIikg");
    sb.append("ewogICAgICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sIHRoaXMucmVzcG9uc2VUZXh0KTsKICAg");
    sb.append("ICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gImFwcGxp");
    sb.append("Y2F0aW9uL2pzb24iKSB7CiAgICAgICAgICAgICAgICB2YXIgcGF5bG9hZCA9IEpTT04ucGFyc2UodGhp");
    sb.append("cy5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgaWYgKCdpZGVudGl0eScgaW4gcGF5bG9hZCkg");
    sb.append("ewogICAgICAgICAgICAgICAgICBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV0gPSBwYXlsb2FkLmlkZW50");
    sb.append("aXR5OwogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlk");
    sb.append("ZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAg");
    sb.append("ICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgICAgICAgIGZvcm0uZGlzcGF0Y2hFdmVu");
    sb.append("dChuZXcgRXZlbnQoInN1Ym1pdHRlZCIpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg");
    sb.append("ICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0byBjb21tdW5pY2F0ZSB0byBzZXJ2ZXIiKTsKICAg");
    sb.append("ICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgeGh0dHAub3BlbigiUFVUIiwg");
    sb.append("dXJsLCB0cnVlKTsKICAgICAgICB4aHR0cC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogICAgICAgIHho");
    sb.append("dHRwLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxKSk7CiAgICAgIH07CgogICAgICBpZiAoJ3Bhc3N3b3Jk");
    sb.append("JyBpbiBwYXNzd29yZHMpIHsKICAgICAgICBpZiAoISgnY29uZmlybS1wYXNzd29yZCcgaW4gcGFzc3dv");
    sb.append("cmRzKSB8fCBwYXNzd29yZHNbJ3Bhc3N3b3JkJ10gPT0gcGFzc3dvcmRzWydjb25maXJtLXBhc3N3b3Jk");
    sb.append("J10pIHsKICAgICAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3b3Jkc1sn");
    sb.append("cGFzc3dvcmQnXSwgewogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaGFzaGVkX3B3KSB7CiAg");
    sb.append("ICAgICAgICAgICAgcmVxWydwYXNzd29yZCddID0gaGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsKICAgICAg");
    sb.append("ICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWxlZDogZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHRvIGhhc2ggcGFzc3dv");
    sb.append("cmQiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg");
    sb.append("IGZpcmVfZmFpbHVyZShmb3JtLCAiUGFzc3dvcmRzIGRvbid0IG1hdGNoIik7CiAgICAgICAgfQogICAg");
    sb.append("ICB9IGVsc2UgewogICAgICAgIG5leHQoKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfQoKICAvLyBS");
    sb.append("VU5USU1FIHwgcng6YWN0aW9uPWRvbWFpbjpwdXQKICBzZWxmLmFkRFBVVCA9IGZ1bmN0aW9uIChmb3Jt");
    sb.append("LCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgY29tbW9uUHV0KGZvcm0sIHN0YXRlLCBp");
    sb.append("ZGVudGl0eU5hbWUsIHJ4b2JqLCBmdW5jdGlvbiAocnhvYmopIHsgcmV0dXJuIHNlbGYucHJvdG9jb2wg");
    sb.append("KyAiLy8iICsgc2VsZi5ob3N0ICsgIi8iICsgcnhvYmoucGF0aDsgfSkKICB9OwoKICAvLyBSVU5USU1F");
    sb.append("IHwgcng6YWN0aW9uPWRvY3VtZW50OnB1dAogIHNlbGYuYURQVVQgPSBmdW5jdGlvbiAoZm9ybSwgc3Rh");
    sb.append("dGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIGNvbW1vblB1dChmb3JtLCBzdGF0ZSwgaWRlbnRp");
    sb.append("dHlOYW1lLCByeG9iaiwgZnVuY3Rpb24gKHJ4b2JqKSB7IHJldHVybiBzZWxmLnByb3RvY29sICsgIi8v");
    sb.append("IiArIGNvbm5lY3Rpb24uaG9zdCArICIvIiArIHJ4b2JqLnNwYWNlICsgIi8iICsgcnhvYmoua2V5ICsg");
    sb.append("Ii8iICsgcnhvYmoucGF0aDsgfSkKICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWFkYW1hOnNp");
    sb.append("Z24taW4KICBzZWxmLmFTTyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9i");
    sb.append("aikgewogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICB3aW5kb3cuc2V0VGltZW91dChm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgIHJlY2FsbF9lbWFpbChmb3JtKTsKICAgIH0sIDEpOwogICAgLy8gVE9E");
    sb.append("TzogcHVsbCBlbWFpbCBvdXQgb2YgdGhpbiBhaXIKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3Vi");
    sb.append("bWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFy");
    sb.append("IHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgaWYgKHJlcS5yZW1lbWJlcikgewogICAg");
    sb.append("ICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJlbWFpbF9yZW1lbWJlciIsIHJlcS5lbWFpbCk7CiAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImVtYWlsX3JlbWVtYmVyIiwgIiIp");
    sb.append("OwogICAgICB9CiAgICAgIGNvbm5lY3Rpb24uQWNjb3VudExvZ2luKHJlcS5lbWFpbCwgcmVxLnBhc3N3");
    sb.append("b3JkLCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIGlkZW50");
    sb.append("aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxvYWQuaWRlbnRpdHk7CiAgICAgICAgICBsb2NhbFN0b3Jh");
    sb.append("Z2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7CiAg");
    sb.append("ICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAgZmlyZV9z");
    sb.append("dWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikg");
    sb.append("ewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJBY2NvdW50TG9naW4gRmFpbGVkOiIgKyByZWFz");
    sb.append("b24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0cnVlKTsKICB9OwoKICAvLyBSVU5USU1FIHwg");
    sb.append("cng6YWN0aW9uPWFkYW1hOnNpZ24tdXAKICBzZWxmLmFTVSA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwg");
    sb.append("Zm9yd2FyZFRvKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChl");
    sb.append("dnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybShm");
    sb.append("b3JtLCB7fSk7CiAgICAgIGNvbm5lY3Rpb24uSW5pdFNldHVwQWNjb3VudChyZXEuZW1haWwsIHsKICAg");
    sb.append("ICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoLyogcGF5bG9hZCAqLykgewogICAgICAgICAgbG9jYWxTdG9y");
    sb.append("YWdlLnNldEl0ZW0oImVtYWlsIiwgcmVxLmVtYWlsKTsKICAgICAgICAgIHNlbGYuZ290byhmb3J3YXJk");
    sb.append("VG8sIGZhbHNlKTsKICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICB9LAogICAgICAg");
    sb.append("IGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAi");
    sb.append("SW5pdFNldHVwQWNjb3VudCBGYWlsZWQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9KTsKICAg");
    sb.append("IH0sIHRydWUpOwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249YWRhbWE6c2V0LXBhc3N3b3Jk");
    sb.append("CiAgc2VsZi5hU1AgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGZvcndhcmRUbykgewogICAgZm9ybS5h");
    sb.append("ZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50");
    sb.append("RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm1fYW5kX3B3KGZvcm0pOwogICAgICBpZiAo");
    sb.append("ISgiZW1haWwiIGluIHJlcSkpIHsKICAgICAgICByZXEuZW1haWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRl");
    sb.append("bSgiZW1haWwiKTsKICAgICAgfQogICAgICBjb25uZWN0aW9uLkluaXRDb21wbGV0ZUFjY291bnQocmVx");
    sb.append("LmVtYWlsLCBmYWxzZSwgcmVxLmNvZGUsIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaW5pdCkg");
    sb.append("ewogICAgICAgICAgdmFyIGlkZW50aXR5ID0gaW5pdC5pZGVudGl0eTsKICAgICAgICAgIGNvbm5lY3Rp");
    sb.append("b24uQWNjb3VudFNldFBhc3N3b3JkKGluaXQuaWRlbnRpdHksIHJlcS5wYXNzd29yZCwgewogICAgICAg");
    sb.append("ICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0");
    sb.append("ZW0oImlkZW50aXR5X2RlZmF1bHQiLCBpZGVudGl0eSk7CiAgICAgICAgICAgICAgc2VsZi5nb3RvKGZv");
    sb.append("cndhcmRUbywgZmFsc2UpOwogICAgICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAg");
    sb.append("IGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIEFjY291bnRTZXRQYXNzd29yZDoiICsgcmVhc29uKTsK");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5j");
    sb.append("dGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBJbml0Q29t");
    sb.append("cGxldGVBY2NvdW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0cnVlKTsK");
    sb.append("ICB9OwoKCiAgdmFyIGh5ZHJhdGVfZm9ybSA9IGZ1bmN0aW9uKGVsLCBpbnB1dCkgewogICAgdmFyIHRh");
    sb.append("ZyA9IGVsLnRhZ05hbWUudG9VcHBlckNhc2UoKTsKICAgIHZhciBpc1NldHRhYmxlID0gdGFnID09ICJT");
    sb.append("RUxFQ1QiIHx8IHRhZyA9PSAiSU5QVVQiIHx8IHRhZyA9PSAiSElEREVOIjsKICAgIGlmICgnbmFtZScg");
    sb.append("aW4gZWwgJiYgaXNTZXR0YWJsZSkgewogICAgICB2YXIgbmFtZSA9IGVsLm5hbWU7CiAgICAgIHZhciBw");
    sb.append("YXlsb2FkID0gaW5wdXQ7CiAgICAgIHZhciBrRG90T3JTbGFzaCA9IGZpcnN0T2NjdXIobmFtZS5pbmRl");
    sb.append("eE9mKCcuJyksIG5hbWUuaW5kZXhPZignLycpKTsKICAgICAgd2hpbGUgKGtEb3RPclNsYXNoID4gMCkg");
    sb.append("ewogICAgICAgIHZhciBpdGVtID0gbmFtZS5zdWJzdHJpbmcoMCwga0RvdE9yU2xhc2gpOwogICAgICAg");
    sb.append("IG5hbWUgPSBuYW1lLnN1YnN0cmluZyhrRG90T3JTbGFzaCArIDEpOwogICAgICAgIGlmIChpdGVtIGlu");
    sb.append("IHBheWxvYWQpIHsKICAgICAgICAgIHBheWxvYWQgPSBwYXlsb2FkW2l0ZW1dOwogICAgICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGtEb3RPclNsYXNoID0gZmlyc3RP");
    sb.append("Y2N1cihuYW1lLmluZGV4T2YoJy4nKSwgbmFtZS5pbmRleE9mKCcvJykpOwogICAgICB9CiAgICAgIGlm");
    sb.append("IChuYW1lIGluIHBheWxvYWQpIHsKICAgICAgICB2YXIgdHlwZSA9IGVsLnR5cGUudG9VcHBlckNhc2Uo");
    sb.append("KTsKICAgICAgICBpZiAodHlwZSA9PSAiQ0hFQ0tCT1giKSB7CiAgICAgICAgICBlbC5jaGVja2VkID0g");
    sb.append("cGF5bG9hZFtuYW1lXSA9PSAidHJ1ZSIgfHwgcGF5bG9hZFtuYW1lXSA9PT0gdHJ1ZSA/IHRydWUgOiBm");
    sb.append("YWxzZTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gIlJBRElPIikgewogICAgICAgICAgaWYgKHBh");
    sb.append("eWxvYWRbbmFtZV0gPT0gZWwudmFsdWUpIHsKICAgICAgICAgICAgZWwuY2hlY2tlZCA9IHRydWU7CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGVsLnZhbHVlID0gcGF5bG9hZFtuYW1l");
    sb.append("XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAg");
    sb.append("IHZhciBhcnIgPSBlbC5jaGlsZHJlbjsKICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOwogICAgICBmb3Ig");
    sb.append("KHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgIHZhciBjaCA9IGVsLmNoaWxkcmVuW2tdOwog");
    sb.append("ICAgICAgIGh5ZHJhdGVfZm9ybShjaCwgaW5wdXQpOwogICAgICB9CiAgICB9CiAgfQoKCiAgLy8gUlVO");
    sb.append("VElNRSB8IHJ4OmFjdGlvbjpjb3B5LWZvcm06JHRhcmdldC1pZAogIHNlbGYuYUNGID0gZnVuY3Rpb24o");
    sb.append("Zm9ybSwgdGFyZ2V0Rm9ybUlkKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1");
    sb.append("bmN0aW9uKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIGlucHV0ID0g");
    sb.append("Z2V0X2Zvcm0oZm9ybSwge30pOwogICAgICB2YXIgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5");
    sb.append("SWQodGFyZ2V0Rm9ybUlkKTsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIGh5ZHJhdGVfZm9ybSh0");
    sb.append("YXJnZXQsIGlucHV0KTsKICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSkKICAgICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgImZhaWxlZCB0byBmaW5kIGZvcm0gYnkgaWQgJyIgKyB0YXJn");
    sb.append("ZXRGb3JtSWQgKyAiJyIpOwogICAgICB9CiAgICB9LCB0cnVlKTsKICB9OwoKICAvLyBSVU5USU1FIHwg");
    sb.append("cng6YWN0aW9uPXNlbmQ6JGNoYW5uZWwKICBzZWxmLmFTRCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwg");
    sb.append("Y2hhbm5lbCkgewogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0");
    sb.append("KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcGFzc3dvcmRzID0ge307CiAg");
    sb.append("ICAgIHZhciBtc2cgPSBnZXRfZm9ybShmb3JtLCBwYXNzd29yZHMpOwoKICAgICAgaWYgKGV2dC5zdWJt");
    sb.append("aXR0ZXIpIHsKICAgICAgICB2YXIgcyA9IGV2dC5zdWJtaXR0ZXI7CiAgICAgICAgaWYgKHMubmFtZSAm");
    sb.append("JiBzLnZhbHVlKSB7CiAgICAgICAgICBpZiAocy52YWx1ZSA9PSAidHJ1ZSIpIHsgcy52YWx1ZSA9IHRy");
    sb.append("dWU7IH0KICAgICAgICAgIGVsc2UgaWYgKHMudmFsdWUgPT0gImZhbHNlIikgeyBzLnZhbHVlID0gZmFs");
    sb.append("c2U7IH0KICAgICAgICAgIG1zZ1tzLm5hbWVdID0gcy52YWx1ZTsKICAgICAgICB9CiAgICAgIH0KCiAg");
    sb.append("ICAgIHZhciBhZnRlciA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBjaGFubmVsVG9Vc2UgPSBjaGFu");
    sb.append("bmVsOwogICAgICAgIGlmIChjaGFubmVsID09ICJfX2RzIikgewogICAgICAgICAgY2hhbm5lbFRvVXNl");
    sb.append("ID0gbXNnWydfX2NoYW5uZWwnXTsKICAgICAgICAgIGRlbGV0ZSBtc2dbJ19fY2hhbm5lbCddOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbFRvVXNlLCBt");
    sb.append("c2csIHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgvKiBwYXlsb2FkICovKSB7CiAgICAgICAg");
    sb.append("ICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICAgIH0sCiAgICAgICAgICBmYWlsdXJlOiBmdW5j");
    sb.append("dGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiU2VuZCBmYWlsZWQ6");
    sb.append("IiArIHJlYXNvbik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB2YXIgcG9z");
    sb.append("dFBhc3N3b3JkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKCduZXdfcGFzc3dvcmQnIGluIHBhc3N3");
    sb.append("b3JkcykgewogICAgICAgICAgaWYgKCEoJ2NvbmZpcm0tbmV3X3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMp");
    sb.append("IHx8IHBhc3N3b3Jkc1snbmV3X3Bhc3N3b3JkJ10gPT0gcGFzc3dvcmRzWydjb25maXJtLW5ld19wYXNz");
    sb.append("d29yZCddKSB7CiAgICAgICAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3");
    sb.append("b3Jkc1snbmV3X3Bhc3N3b3JkJ10sIHsKICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaGFz");
    sb.append("aGVkX3B3KSB7CiAgICAgICAgICAgICAgICBtc2dbJ25ld19wYXNzd29yZCddID0gaGFzaGVkX3B3LnBh");
    sb.append("c3N3b3JkSGFzaDsKICAgICAgICAgICAgICAgIGFmdGVyKCk7CiAgICAgICAgICAgICAgfSwKICAgICAg");
    sb.append("ICAgICAgICBmYWlsZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShm");
    sb.append("b3JtLCAiRmFpbGVkIHRvIGhhc2ggcGFzc3dvcmQiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("IH0pOwoKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiUGFz");
    sb.append("c3dvcmRzIG1pc21hdGNoIGZvciBuZXcgcGFzc3dvcmQuIik7CiAgICAgICAgICB9CiAgICAgICAgfSBl");
    sb.append("bHNlIHsKICAgICAgICAgIGFmdGVyKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoJ3Bhc3N3");
    sb.append("b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgICBpZiAoISgnY29uZmlybS1wYXNzd29yZCcgaW4gcGFz");
    sb.append("c3dvcmRzKSB8fCBwYXNzd29yZHNbJ3Bhc3N3b3JkJ10gPT0gcGFzc3dvcmRzWydjb25maXJtLXBhc3N3");
    sb.append("b3JkJ10pIHsKICAgICAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3b3Jk");
    sb.append("c1sncGFzc3dvcmQnXSwgewogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaGFzaGVkX3B3KSB7");
    sb.append("CiAgICAgICAgICAgICAgbXNnWydwYXNzd29yZCddID0gaGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsKICAg");
    sb.append("ICAgICAgICAgICBwb3N0UGFzc3dvcmQoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmFpbGVk");
    sb.append("OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgdG8g");
    sb.append("aGFzaCBwYXNzd29yZCIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2Ug");
    sb.append("ewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJQYXNzd29yZHMgbWlzbWF0Y2giKTsKICAgICAg");
    sb.append("ICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcG9zdFBhc3N3b3JkKCk7CiAgICAgIH0KICAgIH0sIHRy");
    sb.append("dWUpOwogIH07CiAgLy8gPHRvZG90YXNrPmRlc2NyaXB0aW9uPC90b2RvdGFzaz4KICBzZWxmLlRBU0sg");
    sb.append("PSBmdW5jdGlvbihwZG9tLCBpZCwgc2VjdGlvbiwgZGVzY3JpcHRpb24pIHsKICAgIHZhciBlbGVtZW50");
    sb.append("ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBlbGVtZW50LmlubmVySFRNTCA9ICIm");
    sb.append("Izk3NDQ7ICIgKyBkZXNjcmlwdGlvbiArICIgKCAiICsgc2VjdGlvbiArICIpIDxiciAvPiI7CiAgICBw");
    sb.append("ZG9tLmFwcGVuZENoaWxkKGVsZW1lbnQpOwogIH07CiAgLy8gUlVOVElNRTogcHJlLWNvbXByZXNzaW9u");
    sb.append("IGZvciBzZXR0aW5nIGFuIGF0dHJpYnV0ZQogIC8vICJkLnNldEF0dHJpYnV0ZShhLHYpOyIgLS0+CiAg");
    sb.append("Ly8gJC5TQShkLGEsdik7IgogIHNlbGYuU0EgPSBmdW5jdGlvbihkb20sIGF0dHIsIHZhbHVlKSB7CiAg");
    sb.append("ICBkb20uc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlKTsKICB9OwogIC8vIFJVTlRJTUU6IHNldCB0aGUg");
    sb.append("bGFiZWwgb2YgYW4gb3B0aW9uCiAgc2VsZi5TTCA9IGZ1bmN0aW9uKGRvbSwgdmFsdWUpIHsKICAgIGRv");
    sb.append("bS5sYWJlbCA9IHZhbHVlOwogICAgZG9tLmlubmVyVGV4dCA9IHZhbHVlOwogIH07CgogIC8vIGZvciBz");
    sb.append("ZWxlY3RzCiAgLy8gZC52YWx1ZT0kdmFsdWU7CiAgLy8gJC5TVihkLCR2YWx1ZSk7CiAgc2VsZi5TViA9");
    sb.append("IGZ1bmN0aW9uKGRvbSwgdmFsdWUpIHsKICAgIHZhciBwcmlvciA9IGRvbS52YWx1ZTsKICAgIGRvbS52");
    sb.append("YWx1ZSA9IHZhbHVlOwogICAgZG9tLnJ4dmFsdWUgPSB2YWx1ZTsKICAgIGlmIChwcmlvciAhPSB2YWx1");
    sb.append("ZSkgewogICAgICBkb20uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoImZvcmNlZCIpKTsKICAgIH0KICB9");
    sb.append("OwogIHNlbGYuRlYgPSBmdW5jdGlvbihkb20sIGZpZWxkLCB2YWx1ZSkgewogICAgdmFyIHByaW9yID0g");
    sb.append("ZG9tW2ZpZWxkXTsKICAgIGRvbVtmaWVsZF0gPSB2YWx1ZTsKICAgIGlmIChwcmlvciAhPSB2YWx1ZSkg");
    sb.append("ewogICAgICBkb20uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoImZvcmNlZCIpKTsKICAgIH0KICB9Owog");
    sb.append("IHNlbGYubWVyZ2VHb3RvID0gZnVuY3Rpb24oaHJlZiwgc3RhdGUpIHsKICAgIHZhciBwYXJ0cyA9ICho");
    sb.append("cmVmLnN0YXJ0c1dpdGgoIi8iKSA/IGhyZWYuc3Vic3RyaW5nKDEpIDogaHJlZikuc3BsaXQoIi8iKTsK");
    sb.append("ICAgIHZhciBtZXJnZUluaXQgPSB7fTsKICAgIGlmIChyb3V0ZShwYXJ0cywgMCwgcm91dGVyLCBtZXJn");
    sb.append("ZUluaXQpKSB7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUobWVyZ2VJbml0KTsKICAgIH0KICB9");
    sb.append("OwogIC8vIFJVTlRJTUUgfCA8Li4uIGhyZWY9IiIgLi4uPgogIHNlbGYuSFJFRiA9IGZ1bmN0aW9uIChk");
    sb.append("b20sIHN0YXRlLCBocmVmLCBtZXJnZSkgewogICAgZG9tLnNldEF0dHJpYnV0ZSgiaHJlZiIsIGZpeEhy");
    sb.append("ZWYoaHJlZikpOwogICAgZG9tLm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIHZhciB0cmlt");
    sb.append("SHJlZiA9IGhyZWY7CiAgICAgIGlmICh0cmltSHJlZi5zdGFydHNXaXRoKCIvIikpIHsKICAgICAgICB0");
    sb.append("cmltSHJlZiA9IHRyaW1IcmVmLnN1YnN0cmluZygxKTsKICAgICAgfQogICAgICB2YXIga1EgPSB0cmlt");
    sb.append("SHJlZi5pbmRleE9mKCc/Jyk7CiAgICAgIGlmIChrUSA+IDApIHsKICAgICAgICB0cmltSHJlZiA9IHRy");
    sb.append("aW1IcmVmLnN1YnN0cmluZygwLCBrUSk7CiAgICAgIH0KICAgICAgdmFyIHBhcnRzID0gdHJpbUhyZWYu");
    sb.append("c3BsaXQoIi8iKTsKICAgICAgdmFyIG1lcmdlSW5pdCA9IHt9OwogICAgICBpZiAocm91dGUocGFydHMs");
    sb.append("IDAsIHJvdXRlciwgbWVyZ2VJbml0KSkgewogICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAg");
    sb.append("ICAgIGlmIChtZXJnZSkgewogICAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShtZXJnZUluaXQp");
    sb.append("OwogICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHttZXJnZTp0cnVlfSwgIiIsIGZpeEhy");
    sb.append("ZWYoaHJlZikpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLmdvdG8oaHJlZiwgdHJ1ZSk7");
    sb.append("CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsK");
    sb.append("ICAgIH07CiAgfTsKICAvLyBSVU5USU1FIHwgPC4uLiBjbGFzcz0iIiAuLi4+CiAgc2VsZi5BQyA9IGZ1");
    sb.append("bmN0aW9uIChkb20sIHZhbHVlKSB7CiAgICBkb20uc2V0QXR0cmlidXRlKCJjbGFzcyIsIHZhbHVlKTsK");
    sb.append("ICB9OwogIHNlbGYuQUNMQVNTID0gZnVuY3Rpb24gKGRvbSwgdmFsdWUpIHsgLy8gdG8gZGVwcmVjYXRl");
    sb.append("IGluIHRoZSBmdXR1cmUKICAgIGRvbS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgdmFsdWUpOwogIH07CiAg");
    sb.append("Ly8gUlVOVElNRSB8IDwuLi4gc3JjPSIiIC4uLj4KICBzZWxmLkFTUkMgPSBmdW5jdGlvbiAoZG9tLCB2");
    sb.append("YWx1ZSkgewogICAgZG9tLnNldEF0dHJpYnV0ZSgic3JjIiwgdmFsdWUpOwogIH07CgogIHNlbGYuZmlu");
    sb.append("ZEVsZW1lbnRCeUlkSW5VbmJvdW5kRG9tID0gZnVuY3Rpb24oZG9tLCBpZCkgewogICAgdmFyIGZlYmlk");
    sb.append("ID0gZnVuY3Rpb24gKGQsIGlkKSB7CiAgICAgIGlmICgnaWQnIGluIGQpIHsKICAgICAgICBpZiAoZC5p");
    sb.append("ZCA9PSBpZCkgewogICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICgn");
    sb.append("Y2hpbGRyZW4nIGluIGQpIHsKICAgICAgICB2YXIgYXJyID0gZC5jaGlsZHJlbjsKICAgICAgICB2YXIg");
    sb.append("biA9IGFyci5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAg");
    sb.append("ICAgIHZhciByZXN1bHQgPSBmZWJpZChhcnJba10sIGlkKTsKICAgICAgICAgIGlmIChyZXN1bHQgIT09");
    sb.append("IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgIH0KICAgICAgICB9CiAg");
    sb.append("ICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9OwogICAgcmV0dXJuIGZlYmlkKGRvbSwgaWQpOwog");
    sb.append("IH07CiAgc2VsZi5wb2xsRWxlbWVudCA9IGZ1bmN0aW9uKGRvbSwgdGltZW91dCwgc3VjY2VzcywgZmFp");
    sb.append("bHVyZSkgewogICAgdmFyIGFkbSA9IGZ1bmN0aW9uIChkb20sIHJlbWFpbikgewogICAgICBpZiAocmVt");
    sb.append("YWluIDwgMCkgewogICAgICAgIGZhaWx1cmUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAg");
    sb.append("aWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMoZG9tKSkgewogICAgICAgIHN1Y2Nlc3MoKTsKICAgICAg");
    sb.append("fSBlbHNlIHsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBh");
    sb.append("ZG0oZG9tLCByZW1haW4gLSAyNSk7CiAgICAgICAgfSwgMjUpOwogICAgICB9CiAgICB9OwogICAgYWRt");
    sb.append("KGRvbSwgdGltZW91dCk7CiAgfTsKICB2YXIgbGlic0xvYWRlZCA9IHt9OwogIHNlbGYubG9hZExpYnJh");
    sb.append("cnkgPSBmdW5jdGlvbihsaWIsIGNhbGxiYWNrKSB7CiAgICBpZiAobGliIGluIGxpYnNMb2FkZWQpIHsK");
    sb.append("ICAgICAgY2FsbGJhY2sobGlic0xvYWRlZFtsaWJdKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgbGli");
    sb.append("c0xvYWRlZFtsaWJdID0gZmFsc2U7CiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgnc2NyaXB0Jyk7CiAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzcmMnLGxpYik7CiAgICBzY3JpcHQu");
    sb.append("b25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgIGxpYnNMb2FkZWRbbGliXSA9IHRydWU7CiAgICAgIGNh");
    sb.append("bGxiYWNrKHRydWUpOwogICAgfTsKICAgIHNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAg");
    sb.append("IGNhbGxiYWNrKGZhbHNlKTsKICAgIH07CiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlw");
    sb.append("dCk7CiAgfTsKICB3aW5kb3cucnhodG1sID0gc2VsZjsKICByZXR1cm4gc2VsZjsKfSkoKTsK");
    return sb.toString();
  }
  public static final String CONNECTION = new String(Base64.getDecoder().decode(make_connection()), StandardCharsets.UTF_8);
  private static String make_connection() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoKICogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG91dGxp");
    sb.append("bmVkIGluIHRoZQogKiBmaWxlICdMSUNFTlNFJyAoaXQncyBkdWFsIGxpY2Vuc2VkKSBsb2NhdGVkIGlu");
    sb.append("IHRoZSByb290IGRpcmVjdG9yeQogKiBuZWFyIHRoZSBSRUFETUUubWQgd2hpY2ggeW91IHNob3VsZCBh");
    sb.append("bHNvIHJlYWQuIEZvciBtb3JlIGluZm9ybWF0aW9uCiAqIGFib3V0IHRoZSBwcm9qZWN0IHdoaWNoIG93");
    sb.append("bnMgdGhpcyBmaWxlLCBzZWUgaHR0cHM6Ly93d3cuYWRhbWEtcGxhdGZvcm0uY29tLyAuCiAqCiAqIChj");
    sb.append("KSAyMDIxIC0gMjAyMyBieSBBZGFtYSBQbGF0Zm9ybSBJbml0aWF0aXZlLCBMTEMKICovCi8qKiBUaGUg");
    sb.append("V2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gQWRhbWEgKi8KY2xhc3MgV2ViU29ja2V0QWRhbWFDb25uZWN0");
    sb.append("aW9uIHsKICBjb25zdHJ1Y3Rvcihob3N0KSB7CiAgICAvLyBvbiBmYWlsdXJlLCB3ZSBiYWNrLW9mZiB3");
    sb.append("aXRoIHRoaXMgbWlsbGlzZWNvbmRzCiAgICB0aGlzLmJhY2tvZmYgPSAxOwogICAgLy8gdGhlIGhvc3Qg");
    sb.append("d2UgYXJlIGNvbm5lY3RpbmcgdG8KICAgIHRoaXMuaG9zdCA9IGhvc3Q7CiAgICAvLyBmb3JtIHRoZSBV");
    sb.append("Ukwgb2YgdGhlIGhvc3QKICAgIHRoaXMudXJsID0gIndzczovLyIgKyBob3N0ICsgIi9+cyI7CiAgICAv");
    sb.append("LyBpcyB0aGUgY29ubmVjdGlvbiBjb25uZWN0ZWQKICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAg");
    sb.append("ICAvLyBUT0RPCiAgICB0aGlzLmFzc2V0cyA9IHRydWU7CiAgICAvLyBpcyB0aGUgY29ubmVjdGlvbiBk");
    sb.append("ZWFkCiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIC8vIHRoZSBtYXhpbXVtIHBlcmlvZCBvZiB0aW1l");
    sb.append("IGJldHdlZW4gd2FpdGluZyBmb3IgYSByZXRyeQogICAgdGhpcy5tYXhpbXVtX2JhY2tvZmYgPSA1MDAw");
    sb.append("OwogICAgLy8gd2hlbiB0aGUgY29ubmVjdGlvbiB0aW1lcyBvdXQgZnJvbSB0aGUgc2VydmVyLCBob3cg");
    sb.append("bG9uZyB0byB3YWl0IHVudGlsIHdlIHJlY29ubmVjdAogICAgdGhpcy5yZXNldF9iYWNrb2ZmID0gMTAw");
    sb.append("MDsKICAgIC8vIHRoZSBhY3R1YWwgd2Vic29ja2V0CiAgICB0aGlzLnNvY2tldCA9IG51bGw7CiAgICAv");
    sb.append("LyB3aGF0IGhhcHBlbnMgd2hlbiB0aGUgc3RhdHVzIGNoYW5nZXMKICAgIHRoaXMub25zdGF0dXNjaGFu");
    sb.append("Z2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7IH07CiAgICAvLyB3aGF0IGhhcHBlbnMgd2hlbiB3ZSBsZWFy");
    sb.append("biB0aGUgbGF0ZW5jeQogICAgdGhpcy5vbnBpbmcgPSBmdW5jdGlvbiAoc2Vjb25kcywgbGF0ZW5jeSkg");
    sb.append("eyB9OwogICAgLy8gaXMgYSByZXRyeSBzY2hlZHVsZWQKICAgIHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7");
    sb.append("CiAgICAvLyBjYWxsYmFjayBtYXBwaW5nCiAgICB0aGlzLmNhbGxiYWNrcyA9IG5ldyBNYXAoKTsKICAg");
    sb.append("IC8vIGlkIGdlbmVyYXRpb24KICAgIHRoaXMubmV4dElkID0gMDsKICAgIC8vIGV2ZW50cyB0byBleGVj");
    sb.append("dXRlIG9uIHJlY29ubmVjdAogICAgdGhpcy5vbnJlY29ubmVjdCA9IG5ldyBNYXAoKTsKICAgIC8vIHBy");
    sb.append("b3RvY29sIGZvciBtZXRyaWNzCiAgICB0aGlzLnByb3RvY29sID0gImh0dHBzIjsKICB9CgogIC8qKiBz");
    sb.append("dG9wIHRoZSBjb25uZWN0aW9uICovCiAgc3RvcCgpIHsKICAgIHRoaXMuZGVhZCA9IHRydWU7CiAgICBp");
    sb.append("ZiAodGhpcy5zb2NrZXQgIT09IG51bGwpIHsKICAgICAgdGhpcy5zb2NrZXQuY2xvc2UoKTsKICAgIH0K");
    sb.append("ICB9CgogIGJ1bXAoYm0pIHsKICAgIHRyeSB7CiAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVx");
    sb.append("dWVzdCgpOwogICAgICB4aHR0cC5vcGVuKCJQVVQiLCB0aGlzLnByb3RvY29sICsgIi8vIiArIHRoaXMu");
    sb.append("aG9zdCArICIvfmJtLyIgKyBibSwgdHJ1ZSk7CiAgICAgIHhodHRwLnNlbmQoKTsKICAgIH0gY2F0Y2gg");
    sb.append("KGV4KSB7CiAgICAgIC8vIGRvbid0IGNhcmUKICAgIH0KICB9CgogIGxvZyhuYW1lLCBib2R5KSB7CiAg");
    sb.append("ICB0cnkgewogICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAu");
    sb.append("b3BlbigiUFVUIiwgdGhpcy5wcm90b2NvbCArICIvLyIgKyB0aGlzLmhvc3QgKyAiL35sZy8iICsgbmFt");
    sb.append("ZSwgdHJ1ZSk7CiAgICAgIHhodHRwLnNlbmQoYm9keSk7CiAgICB9IGNhdGNoIChleCkgewogICAgICAv");
    sb.append("LyBkb24ndCBjYXJlCiAgICB9CiAgfQoKICAvKiogcHJpdmF0ZTogcmV0cnkgdGhlIGNvbm5lY3Rpb24g");
    sb.append("Ki8KICBfcmV0cnkoKSB7CiAgICAvLyBudWxsIG91dCB0aGUgc29ja2V0CiAgICB0aGlzLnNvY2tldCA9");
    sb.append("IG51bGw7CiAgICAvLyBpZiB3ZSBhcmUgY29ubmVjdGVkLCB0cmFuc2l0aW9uIHRoZSBzdGF0dXMKICAg");
    sb.append("IGlmICh0aGlzLmNvbm5lY3RlZCkgewogICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlOwogICAgICB0");
    sb.append("aGlzLm9uc3RhdHVzY2hhbmdlKGZhbHNlKTsKICAgICAgdGhpcy5jYWxsYmFja3MuZm9yRWFjaChmdW5j");
    sb.append("dGlvbiAoY2IsIGlkKSB7CiAgICAgICAgY2Ioe2ZhaWx1cmU6OTk5fSk7CiAgICAgIH0pOwogICAgfQog");
    sb.append("ICAgdGhpcy5jYWxsYmFja3MuY2xlYXIoKTsKICAgIC8vIGlmIHdlIGFyZSBkZWFkLCB0aGVuIGRvbid0");
    sb.append("IGFjdHVhbGx5IHJldHJ5CiAgICBpZiAodGhpcy5kZWFkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAg");
    sb.append("IC8vIG1ha2Ugc3VyZQogICAgaWYgKCF0aGlzLnNjaGVkdWxlZCkgewogICAgICAvLyBzY2hlZHVsZSBh");
    sb.append("IHJldHJ5OyBmaXJzdCBjb21wdXRlIGhvdyBsb25nIHRvIHRha2UKICAgICAgLy8gY29tcHV0ZSBob3cg");
    sb.append("bG9uZyB3ZSBuZWVkIHRvIHdhaXQKICAgICAgdmFyIGhhbHZlQWZ0ZXJTY2hlZHVsZSA9IGZhbHNlOwog");
    sb.append("ICAgICB0aGlzLmJhY2tvZmYgKz0gTWF0aC5yYW5kb20oKSAqIHRoaXMuYmFja29mZjsKICAgICAgaWYg");
    sb.append("KHRoaXMuYmFja29mZiA+IHRoaXMubWF4aW11bV9iYWNrb2ZmKSB7CiAgICAgICAgdGhpcy5iYWNrb2Zm");
    sb.append("ID0gdGhpcy5tYXhpbXVtX2JhY2tvZmY7CiAgICAgICAgaGFsdmVBZnRlclNjaGVkdWxlID0gdHJ1ZTsK");
    sb.append("ICAgICAgfQoKICAgICAgLy8gc2NoZWR1bGUgaXQKICAgICAgdGhpcy5zY2hlZHVsZWQgPSB0cnVlOwog");
    sb.append("ICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAg");
    sb.append("IHNlbGYuc3RhcnQoKTsKICAgICAgfSwgdGhpcy5iYWNrb2ZmKTsKCiAgICAgIC8vIHdlIGp1c3Qgc2No");
    sb.append("ZWR1bGVkIGl0IGZvciB0aGUgbWF4aW11bSBiYWNrb2ZmIHRpbWUsIGxldCdzIHJlZHVjZSB0aGUgYmFj");
    sb.append("a29mZiBzbyB0aGUgbmV4dCBvbmUgd2lsbCBoYXZlIHNvbWUgaml0dGVyCiAgICAgIGlmIChoYWx2ZUFm");
    sb.append("dGVyU2NoZWR1bGUpIHsKICAgICAgICB0aGlzLmJhY2tvZmYgLz0gMi4wOwogICAgICB9CiAgICB9CiAg");
    sb.append("fQoKICAvKiogc3RhcnQgdGhlIGNvbm5lY3Rpb24gKi8KICBzdGFydCgpIHsKICAgIC8vIHJlc2V0IHRo");
    sb.append("ZSBzdGF0ZQogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdGhpcy5zY2hlZHVsZWQgPSBmYWxzZTsKICAg");
    sb.append("IHRoaXMuZGVhZCA9IGZhbHNlOwogICAgdGhpcy5oYXNfaGFkX3BpbmcgPSBmYWxzZTsKICAgIHRoaXMu");
    sb.append("bGFzdF9waW5nID0gMDsKICAgIHRoaXMucGluZ19mYWlsdXJlcyA9IDA7CiAgICAvLyBjcmVhdGUgdGhl");
    sb.append("IHNvY2tldCBhbmQgYmluZCBldmVudCBoYW5kbGVycwogICAgdGhpcy5zb2NrZXQgPSBuZXcgV2ViU29j");
    sb.append("a2V0KHRoaXMudXJsKTsKICAgIHRoaXMuc29ja2V0Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkg");
    sb.append("ewogICAgICB2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTsKICAgICAgLy8gYSBtZXNz");
    sb.append("YWdlIGFycml2ZWQsIGlzIGl0IGEgY29ubmVjdGlvbiBzaWduYWwKICAgICAgaWYgKCJwaW5nIiBpbiBy");
    sb.append("ZXN1bHQpIHsKICAgICAgICBzZWxmLm9ucGluZyhyZXN1bHQucGluZywgcmVzdWx0LmxhdGVuY3kpOwog");
    sb.append("ICAgICAgIHJlc3VsdC5wb25nID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwLjA7CiAgICAgICAg");
    sb.append("c2VsZi5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShyZXN1bHQpKTsKICAgICAgICBzZWxmLmxhc3Rf");
    sb.append("cGluZyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIHNlbGYuaGFzX2hhZF9waW5nID0gdHJ1");
    sb.append("ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCJzdGF0dXMiIGluIHJlc3VsdCkgewog");
    sb.append("ICAgICAgIC8vIGhleSwgYXJlIHdlIGNvbm5lY3RlZD8KICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyAh");
    sb.append("PSAiY29ubmVjdGVkIikgewogICAgICAgICAgLy8gbm9wZSwgT0ssIGxldCdzIG1ha2UgdGhpcyBhIGRl");
    sb.append("YWQgc29ja2V0CiAgICAgICAgICBzZWxmLnNvY2tldC5jbG9zZSgpOwogICAgICAgICAgc2VsZi5zb2Nr");
    sb.append("ZXQgPSBudWxsOwogICAgICAgICAgc2VsZi5iYWNrb2ZmID0gc2VsZi5yZXNldF9iYWNrb2ZmOwogICAg");
    sb.append("ICAgICAgc2VsZi5fcmV0cnkoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8g");
    sb.append("dGVsbCB0aGUgY2xpZW50IHRoYXQgd2UgYXJlIGdvb2QhCiAgICAgICAgc2VsZi5iYWNrb2ZmID0gMTsK");
    sb.append("ICAgICAgICBzZWxmLmNvbm5lY3RlZCA9IHRydWU7CiAgICAgICAgc2VsZi5hc3NldHMgPSByZXN1bHQu");
    sb.append("YXNzZXRzOwogICAgICAgIHNlbGYub25zdGF0dXNjaGFuZ2UodHJ1ZSk7CiAgICAgICAgc2VsZi5fcmVj");
    sb.append("b25uZWN0KCk7CiAgICAgICAgc2VsZi5Db25maWd1cmVNYWtlT3JHZXRBc3NldEtleSh7CiAgICAgICAg");
    sb.append("ICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAg");
    sb.append("ICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICAgIHhodHRwLm9w");
    sb.append("ZW4oIkdFVCIsIHNlbGYucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0ICsgIi9+cCIgKyBwYXlsb2Fk");
    sb.append("LmFzc2V0S2V5LCB0cnVlKTsKICAgICAgICAgICAgICB4aHR0cC53aXRoQ3JlZGVudGlhbHMgPSB0cnVl");
    sb.append("OwogICAgICAgICAgICAgIHhodHRwLnNlbmQoKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsKICAg");
    sb.append("ICAgICAgICAgICBjb25zb2xlLmxvZyhleCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAg");
    sb.append("ICAgICBmYWlsdXJlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAg");
    sb.append("cmV0dXJuOwogICAgICB9CiAgICAgIC8vIHRoZSByZXN1bHQgd2FzIGEgZmFpbHVyZS4uLgogICAgICBp");
    sb.append("ZiAoImZhaWx1cmUiIGluIHJlc3VsdCkgewogICAgICAgIC8vIGZpbmQgdGhlIGNhbGxiYWNrLCB0aGVu");
    sb.append("IGludm9rZSBpdCAoYW5kIGNsZWFuIHVwKQogICAgICAgIGlmIChzZWxmLmNhbGxiYWNrcy5oYXMocmVz");
    sb.append("dWx0LmZhaWx1cmUpKSB7CiAgICAgICAgICB2YXIgY2IgPSBzZWxmLmNhbGxiYWNrcy5nZXQocmVzdWx0");
    sb.append("LmZhaWx1cmUpOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHNlbGYuY2FsbGJhY2tzLmRl");
    sb.append("bGV0ZShyZXN1bHQuZmFpbHVyZSk7CiAgICAgICAgICAgIGNiKHJlc3VsdCk7CiAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgfQogICAgICB9IGVsc2UgaWYgKCJkZWxpdmVyIiBpbiByZXN1bHQpIHsKICAgICAgICAvLyBv");
    sb.append("dGhlcndpc2UsIHdlIGhhdmUgYSBzdWNjZXNzLCBzbyBsZXQncyBmaW5kIHRoZSBjYWxsYmFjaywgYW5k");
    sb.append("IGlmIG5lZWQgYmUgY2xlYW4gdXAKICAgICAgICBpZiAoc2VsZi5jYWxsYmFja3MuaGFzKHJlc3VsdC5k");
    sb.append("ZWxpdmVyKSkgewogICAgICAgICAgdmFyIGNiID0gc2VsZi5jYWxsYmFja3MuZ2V0KHJlc3VsdC5kZWxp");
    sb.append("dmVyKTsKICAgICAgICAgIGlmIChjYikgewogICAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHsKICAg");
    sb.append("ICAgICAgICAgICBzZWxmLmNhbGxiYWNrcy5kZWxldGUocmVzdWx0LmRlbGl2ZXIpOwogICAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgICAgIGNiKHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICB9OwogICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBzZWxm");
    sb.append("LmJ1bXAoInIiKTsKICAgICAgLy8gbGV0J3MgcmV0cnkuLi4gb3Igc2hvdWxkIHdlIG5vdAogICAgICBz");
    sb.append("ZWxmLl9yZXRyeSgpOwogICAgfTsKICAgIHRoaXMuc29ja2V0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZl");
    sb.append("bnQpIHsKICAgICAgc2VsZi5idW1wKCJyIik7CiAgICAgIC8vIHNvbWV0aGluZyBiYWQgaGFwcGVuZWQs");
    sb.append("IGxldCdzIHJldHJ5CiAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICB9OwoKICB9CgogIGtlZXBhbGl2ZSgp");
    sb.append("IHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpIHsK");
    sb.append("ICAgICAgdHJ5IHsKICAgICAgICBpZiAoc2VsZi5oYXNfaGFkX3BpbmcgJiYgc2VsZi5zb2NrZXQpIHsK");
    sb.append("ICAgICAgICAgIHZhciB0aW1lU2luY2VMYXN0UGluZyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc2Vs");
    sb.append("Zi5sYXN0X3Bpbmc7CiAgICAgICAgICAvLyBUT0RPOiBicm9hZGNhc3QgYSBsYXRlbmN5CiAgICAgICAg");
    sb.append("ICBpZiAodGltZVNpbmNlTGFzdFBpbmcgPiAyNTAwKSB7CiAgICAgICAgICAgIHNlbGYucGluZ19mYWls");
    sb.append("dXJlcysrOwogICAgICAgICAgICBpZiAoc2VsZi5waW5nX2ZhaWx1cmVzID49IDMpIHsKICAgICAgICAg");
    sb.append("ICAgICBzZWxmLmhhc19oYWRfcGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIHNlbGYuc29ja2V0Lm9u");
    sb.append("Y2xvc2UgPSBmdW5jdGlvbigpIHt9OwogICAgICAgICAgICAgIHNlbGYuc29ja2V0LmNsb3NlKCk7CiAg");
    sb.append("ICAgICAgICAgICAgc2VsZi5zb2NrZXQgPSBudWxsOwogICAgICAgICAgICAgIHNlbGYuX3JldHJ5KCk7");
    sb.append("CiAgICAgICAgICAgICAgc2VsZi5idW1wKCJkIik7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigi");
    sb.append("aGFkIHRvIGZvcmNlIGEgZGlzY29ubmVjdCIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2Ug");
    sb.append("ewogICAgICAgICAgICB0aGlzLnBpbmdfZmFpbHVyZXMgPSAwOwogICAgICAgICAgfQogICAgICAgIH0K");
    sb.append("ICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgIH0KICAgIH0s");
    sb.append("IDEyNTApOwogIH0KCiAgLyoqIHByaXZhdGU6IHNlbmQgYSByYXcgbWVzc2FnZSAqLwogIF93cml0ZShy");
    sb.append("ZXF1ZXN0LCBjYWxsYmFjaykgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkgewogICAgICByZXR1cm4g");
    sb.append("ZmFsc2U7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNrcy5zZXQocmVxdWVzdC5pZCwgY2FsbGJhY2spOwog");
    sb.append("ICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7CiAgICByZXR1cm4gdHJ1");
    sb.append("ZTsKICB9CgogIC8qKiBhcGk6IHdhaXQgZm9yIGEgY29ubmVjdGlvbiAqLwogIGFzeW5jIHdhaXRfY29u");
    sb.append("bmVjdGVkKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlz");
    sb.append("ZShmdW5jdGlvbiAoZ29vZCkgewogICAgICAgIGdvb2QodHJ1ZSk7CiAgICAgIH0pOwogICAgfSBlbHNl");
    sb.append("IHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcHJpb3IgPSB0aGlzLm9uc3RhdHVzY2hh");
    sb.append("bmdlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGdvb2QpIHsKICAgICAgICBzZWxm");
    sb.append("Lm9uc3RhdHVzY2hhbmdlID0gZnVuY3Rpb24gKHN0YXR1cykgewogICAgICAgICAgcHJpb3Ioc3RhdHVz");
    sb.append("KTsKICAgICAgICAgIGlmIChzdGF0dXMpIHsKICAgICAgICAgICAgZ29vZCh0cnVlKTsKICAgICAgICAg");
    sb.append("ICAgc2VsZi5vbnN0YXR1c2NoYW5nZSA9IHByaW9yOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAg");
    sb.append("IH0pOwogICAgfQogIH0KCiAgX3JlY29ubmVjdCgpIHsKICAgIHRoaXMub25yZWNvbm5lY3QuZm9yRWFj");
    sb.append("aChmdW5jdGlvbiAoc20sIGlkKSB7CiAgICAgIHNtLl9fcmV0cnkoKTsKICAgIH0pOwogIH0KCiAgLyoq");
    sb.append("IGV4ZWN1dGUgYSByZXF1ZXNlIHJlc3BvbnNlIHdpdGggdGhlIGdpdmVuIHN0YXRlIG1hY2hpbmUgKi8K");
    sb.append("ICBfX2V4ZWN1dGVfcnIoc20pIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHNtLmZpcnN0ID0gdHJ1");
    sb.append("ZTsKICAgIGlmICghc2VsZi5fd3JpdGUoc20ucmVxdWVzdCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAg");
    sb.append("ICAgIGlmIChzbS5maXJzdCkgewogICAgICAgIHNtLmZpcnN0ID0gZmFsc2U7CiAgICAgICAgaWYgKCJm");
    sb.append("YWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgICAgaWYgKCdmYWlsdXJlJyBpbiBzbS5yZXNwb25k");
    sb.append("ZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLmZhaWx1cmUocmVzcG9uc2UucmVhc29uKTsKICAg");
    sb.append("ICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCdzdWNjZXNzJyBpbiBzbS5yZXNw");
    sb.append("b25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLnN1Y2Nlc3MocmVzcG9uc2UucmVzcG9uc2Up");
    sb.append("OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBzZWxmLm9ucmVjb25uZWN0LmRlbGV0");
    sb.append("ZShzbS5pZCk7CiAgICB9KSkgewogICAgICBzZWxmLm9ucmVjb25uZWN0LnNldChzbS5pZCwgc20pOwog");
    sb.append("ICAgICBzbS5fX3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHNt");
    sb.append("KTsKICAgICAgfTsKICAgICAgcmV0dXJuIHNtOwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICAv");
    sb.append("KiogZXhlY3V0ZSBhIHN0cmVhbSByZXF1ZXN0IHdpdGggdGhlIGdpdmVuIHN0YXRlIG1hY2hpbmUgKi8K");
    sb.append("ICBfX2V4ZWN1dGVfc3RyZWFtKHNtKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICBzZWxmLl93cml0");
    sb.append("ZShzbS5yZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYgKCJmYWlsdXJlIiBpbiBy");
    sb.append("ZXNwb25zZSkgewogICAgICAgIGlmICgnZmFpbHVyZScgaW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAg");
    sb.append("ICBzbS5yZXNwb25kZXIuZmFpbHVyZShyZXNwb25zZS5yZWFzb24pOwogICAgICAgIH0KICAgICAgICBz");
    sb.append("ZWxmLm9ucmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAg");
    sb.append("IGlmIChyZXNwb25zZS5yZXNwb25zZSkgewogICAgICAgIGlmICgnbmV4dCcgaW4gc20ucmVzcG9uZGVy");
    sb.append("KSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIubmV4dChyZXNwb25zZS5yZXNwb25zZSk7CiAgICAgICAg");
    sb.append("fQogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5kb25lKSB7CiAgICAgICAgaWYgKCdjb21wbGV0ZScg");
    sb.append("aW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuY29tcGxldGUoKTsKICAgICAg");
    sb.append("ICB9CiAgICAgICAgc2VsZi5vbnJlY29ubmVjdC5kZWxldGUoc20uaWQpOwogICAgICB9CiAgICB9KTsK");
    sb.append("ICAgIHNlbGYub25yZWNvbm5lY3Quc2V0KHNtLmlkLCBzbSk7CiAgICBzbS5fX3JldHJ5ID0gZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oc20pOwogICAgfTsKICAgIHJldHVybiBz");
    sb.append("bTsKICB9CgogIF9faWQoKSB7CiAgICB0aGlzLm5leHRJZCsrOwogICAgcmV0dXJuIHRoaXMubmV4dElk");
    sb.append("OwogIH0KCiAgLyoqW0JFR0lOLUlOVk9LRV0qKi8KICBJbml0U2V0dXBBY2NvdW50KGVtYWlsLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpbml0L3NldHVwLWFjY291bnQi");
    sb.append("LCAiaWQiOnBhcklkLCAiZW1haWwiOiBlbWFpbH0KICAgIH0pOwogIH0KICBJbml0Q29udmVydEdvb2ds");
    sb.append("ZVVzZXIoYWNjZXNzVG9rZW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFy");
    sb.append("IHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBp");
    sb.append("ZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhv");
    sb.append("ZCI6ImluaXQvY29udmVydC1nb29nbGUtdXNlciIsICJpZCI6cGFySWQsICJhY2Nlc3MtdG9rZW4iOiBh");
    sb.append("Y2Nlc3NUb2tlbn0KICAgIH0pOwogIH0KICBJbml0Q29tcGxldGVBY2NvdW50KGVtYWlsLCByZXZva2Us");
    sb.append("IGNvZGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAg");
    sb.append("ICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImluaXQvY29t");
    sb.append("cGxldGUtYWNjb3VudCIsICJpZCI6cGFySWQsICJlbWFpbCI6IGVtYWlsLCAicmV2b2tlIjogcmV2b2tl");
    sb.append("LCAiY29kZSI6IGNvZGV9CiAgICB9KTsKICB9CiAgRGVpbml0KGlkZW50aXR5LCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3Bv");
    sb.append("bmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkZWluaXQiLCAiaWQiOnBhcklkLCAiaWRlbnRp");
    sb.append("dHkiOiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBBY2NvdW50U2V0UGFzc3dvcmQoaWRlbnRpdHksIHBh");
    sb.append("c3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAog");
    sb.append("ICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhY2NvdW50");
    sb.append("L3NldC1wYXNzd29yZCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAicGFzc3dvcmQi");
    sb.append("OiBwYXNzd29yZH0KICAgIH0pOwogIH0KICBBY2NvdW50R2V0UGF5bWVudFBsYW4oaWRlbnRpdHksIHJl");
    sb.append("c3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7");
    sb.append("CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3Bv");
    sb.append("bmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFjY291bnQvZ2V0LXBheW1l");
    sb.append("bnQtcGxhbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQogICAgfSk7CiAgfQogIEFj");
    sb.append("Y291bnRMb2dpbihlbWFpbCwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlz");
    sb.append("OwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0");
    sb.append("OiB7Im1ldGhvZCI6ImFjY291bnQvbG9naW4iLCAiaWQiOnBhcklkLCAiZW1haWwiOiBlbWFpbCwgInBh");
    sb.append("c3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgUHJvYmUoaWRlbnRpdHksIHJlc3BvbmRlcikg");
    sb.append("ewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1");
    sb.append("cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVz");
    sb.append("cG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InByb2JlIiwgImlkIjpwYXJJZCwgImlkZW50");
    sb.append("aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgU3RhdHMocmVzcG9uZGVyKSB7CiAgICB2YXIgc2Vs");
    sb.append("ZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhl");
    sb.append("Y3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAog");
    sb.append("ICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InN0YXRzIiwgImlkIjpwYXJJZH0KICAgIH0pOwogIH0KICBJ");
    sb.append("ZGVudGl0eUhhc2goaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6ImlkZW50aXR5L2hhc2giLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAg");
    sb.append("IH0pOwogIH0KICBJZGVudGl0eVN0YXNoKGlkZW50aXR5LCBuYW1lLCByZXNwb25kZXIpIHsKICAgIHZh");
    sb.append("ciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwK");
    sb.append("ICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpZGVudGl0eS9zdGFzaCIsICJpZCI6cGFySWQsICJpZGVu");
    sb.append("dGl0eSI6IGlkZW50aXR5LCAibmFtZSI6IG5hbWV9CiAgICB9KTsKICB9CiAgQXV0aG9yaXR5Q3JlYXRl");
    sb.append("KGlkZW50aXR5LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9");
    sb.append("IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklk");
    sb.append("LAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdXRo");
    sb.append("b3JpdHkvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9");
    sb.append("CiAgQXV0aG9yaXR5U2V0KGlkZW50aXR5LCBhdXRob3JpdHksIGtleVN0b3JlLCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3Bv");
    sb.append("bmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdXRob3JpdHkvc2V0IiwgImlkIjpwYXJJZCwg");
    sb.append("ImlkZW50aXR5IjogaWRlbnRpdHksICJhdXRob3JpdHkiOiBhdXRob3JpdHksICJrZXktc3RvcmUiOiBr");
    sb.append("ZXlTdG9yZX0KICAgIH0pOwogIH0KICBBdXRob3JpdHlHZXQoaWRlbnRpdHksIGF1dGhvcml0eSwgcmVz");
    sb.append("cG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsK");
    sb.append("ICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9u");
    sb.append("ZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXV0aG9yaXR5L2dldCIsICJp");
    sb.append("ZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiYXV0aG9yaXR5IjogYXV0aG9yaXR5fQogICAg");
    sb.append("fSk7CiAgfQogIEF1dGhvcml0eUxpc3QoaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfc3RyZWFtKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAg");
    sb.append("ICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdXRob3JpdHkvbGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0");
    sb.append("eSI6IGlkZW50aXR5fQogICAgfSk7CiAgfQogIEF1dGhvcml0eURlc3Ryb3koaWRlbnRpdHksIGF1dGhv");
    sb.append("cml0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxm");
    sb.append("Ll9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAg");
    sb.append("ICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXV0aG9yaXR5");
    sb.append("L2Rlc3Ryb3kiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImF1dGhvcml0eSI6IGF1");
    sb.append("dGhvcml0eX0KICAgIH0pOwogIH0KICBTcGFjZUNyZWF0ZShpZGVudGl0eSwgc3BhY2UsIHRlbXBsYXRl");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9jcmVhdGUi");
    sb.append("LCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJ0ZW1wbGF0");
    sb.append("ZSI6IHRlbXBsYXRlfQogICAgfSk7CiAgfQogIFNwYWNlR2VuZXJhdGVLZXkoaWRlbnRpdHksIHNwYWNl");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9nZW5lcmF0");
    sb.append("ZS1rZXkiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAg");
    sb.append("ICB9KTsKICB9CiAgU3BhY2VHZXQoaWRlbnRpdHksIHNwYWNlLCByZXNwb25kZXIpIHsKICAgIHZhciBz");
    sb.append("ZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19l");
    sb.append("eGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAg");
    sb.append("ICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9nZXQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBp");
    sb.append("ZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VTZXQoaWRlbnRpdHksIHNw");
    sb.append("YWNlLCBwbGFuLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9");
    sb.append("IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklk");
    sb.append("LAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFj");
    sb.append("ZS9zZXQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJw");
    sb.append("bGFuIjogcGxhbn0KICAgIH0pOwogIH0KICBTcGFjZVJlZGVwbG95S2ljayhpZGVudGl0eSwgc3BhY2Us");
    sb.append("IHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lk");
    sb.append("KCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJl");
    sb.append("c3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL3JlZGVwbG95");
    sb.append("LWtpY2siLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAg");
    sb.append("ICB9KTsKICB9CiAgU3BhY2VTZXRSeGh0bWwoaWRlbnRpdHksIHNwYWNlLCByeGh0bWwsIHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL3NldC1yeGh0bWwiLCAiaWQi");
    sb.append("OnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJyeGh0bWwiOiByeGh0");
    sb.append("bWx9CiAgICB9KTsKICB9CiAgU3BhY2VHZXRSeGh0bWwoaWRlbnRpdHksIHNwYWNlLCByZXNwb25kZXIp");
    sb.append("IHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0");
    sb.append("dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJl");
    sb.append("c3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9nZXQtcnhodG1sIiwgImlkIjpw");
    sb.append("YXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlfQogICAgfSk7CiAgfQogIFNw");
    sb.append("YWNlU2V0UG9saWN5KGlkZW50aXR5LCBzcGFjZSwgYWNjZXNzUG9saWN5LCByZXNwb25kZXIpIHsKICAg");
    sb.append("IHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRl");
    sb.append("ciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9zZXQtcG9saWN5IiwgImlkIjpwYXJJZCwg");
    sb.append("ImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAiYWNjZXNzLXBvbGljeSI6IGFjY2Vz");
    sb.append("c1BvbGljeX0KICAgIH0pOwogIH0KICBTcGFjZUdldFBvbGljeShpZGVudGl0eSwgc3BhY2UsIHJlc3Bv");
    sb.append("bmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAg");
    sb.append("ICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL2dldC1wb2xpY3kiLCAi");
    sb.append("aWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAgICB9KTsKICB9");
    sb.append("CiAgU3BhY2VNZXRyaWNzKGlkZW50aXR5LCBzcGFjZSwgcHJlZml4LCBtZXRyaWNRdWVyeSwgcmVzcG9u");
    sb.append("ZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("IHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVy");
    sb.append("OiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2UvbWV0cmljcyIsICJpZCI6");
    sb.append("cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgInByZWZpeCI6IHByZWZp");
    sb.append("eCwgIm1ldHJpYy1xdWVyeSI6IG1ldHJpY1F1ZXJ5fQogICAgfSk7CiAgfQogIFNwYWNlRGVsZXRlKGlk");
    sb.append("ZW50aXR5LCBzcGFjZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFy");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBw");
    sb.append("YXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoi");
    sb.append("c3BhY2UvZGVsZXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNw");
    sb.append("YWNlfQogICAgfSk7CiAgfQogIFNwYWNlU2V0Um9sZShpZGVudGl0eSwgc3BhY2UsIGVtYWlsLCByb2xl");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9zZXQtcm9s");
    sb.append("ZSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgImVtYWls");
    sb.append("IjogZW1haWwsICJyb2xlIjogcm9sZX0KICAgIH0pOwogIH0KICBTcGFjZUxpc3REZXZlbG9wZXJzKGlk");
    sb.append("ZW50aXR5LCBzcGFjZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFy");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBp");
    sb.append("ZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhv");
    sb.append("ZCI6InNwYWNlL2xpc3QtZGV2ZWxvcGVycyIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5");
    sb.append("LCAic3BhY2UiOiBzcGFjZX0KICAgIH0pOwogIH0KICBTcGFjZVJlZmxlY3QoaWRlbnRpdHksIHNwYWNl");
    sb.append("LCBrZXksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAg");
    sb.append("ICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL3Jl");
    sb.append("ZmxlY3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJr");
    sb.append("ZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgU3BhY2VMaXN0KGlkZW50aXR5LCBtYXJrZXIsIGxpbWl0LCBy");
    sb.append("ZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAg");
    sb.append("cmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2UvbGlzdCIs");
    sb.append("ICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibWFya2VyIjogbWFya2VyLCAibGltaXQi");
    sb.append("OiBsaW1pdH0KICAgIH0pOwogIH0KICBQdXNoUmVnaXN0ZXIoaWRlbnRpdHksIGRvbWFpbiwgc3Vic2Ny");
    sb.append("aXB0aW9uLCBkZXZpY2VJbmZvLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZh");
    sb.append("ciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("aWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRo");
    sb.append("b2QiOiJwdXNoL3JlZ2lzdGVyIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21h");
    sb.append("aW4iOiBkb21haW4sICJzdWJzY3JpcHRpb24iOiBzdWJzY3JpcHRpb24sICJkZXZpY2UtaW5mbyI6IGRl");
    sb.append("dmljZUluZm99CiAgICB9KTsKICB9CiAgRG9tYWluTWFwKGlkZW50aXR5LCBkb21haW4sIHNwYWNlLCBj");
    sb.append("ZXJ0aWZpY2F0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJ");
    sb.append("ZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9t");
    sb.append("YWluL21hcCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWlu");
    sb.append("LCAic3BhY2UiOiBzcGFjZSwgImNlcnRpZmljYXRlIjogY2VydGlmaWNhdGV9CiAgICB9KTsKICB9CiAg");
    sb.append("RG9tYWluQ2xhaW1BcGV4KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9jbGFpbS1hcGV4IiwgImlkIjpwYXJJZCwgImlkZW50aXR5");
    sb.append("IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW59CiAgICB9KTsKICB9CiAgRG9tYWluUmVkaXJlY3Qo");
    sb.append("aWRlbnRpdHksIGRvbWFpbiwgZGVzdGluYXRpb25Eb21haW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9yZWRpcmVjdCIsICJpZCI6cGFySWQsICJpZGVudGl0");
    sb.append("eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAiZGVzdGluYXRpb24tZG9tYWluIjogZGVzdGlu");
    sb.append("YXRpb25Eb21haW59CiAgICB9KTsKICB9CiAgRG9tYWluQ29uZmlndXJlKGlkZW50aXR5LCBkb21haW4s");
    sb.append("IHByb2R1Y3RDb25maWcsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("ImRvbWFpbi9jb25maWd1cmUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImRvbWFp");
    sb.append("biI6IGRvbWFpbiwgInByb2R1Y3QtY29uZmlnIjogcHJvZHVjdENvbmZpZ30KICAgIH0pOwogIH0KICBE");
    sb.append("b21haW5SZWZsZWN0KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0");
    sb.append("aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVf");
    sb.append("cnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9yZWZsZWN0IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRl");
    sb.append("bnRpdHksICJkb21haW4iOiBkb21haW59CiAgICB9KTsKICB9CiAgRG9tYWluTWFwRG9jdW1lbnQoaWRl");
    sb.append("bnRpdHksIGRvbWFpbiwgc3BhY2UsIGtleSwgcm91dGUsIGNlcnRpZmljYXRlLCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3Bv");
    sb.append("bmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb21haW4vbWFwLWRvY3VtZW50IiwgImlkIjpw");
    sb.append("YXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW4sICJzcGFjZSI6IHNwYWNl");
    sb.append("LCAia2V5Ijoga2V5LCAicm91dGUiOiByb3V0ZSwgImNlcnRpZmljYXRlIjogY2VydGlmaWNhdGV9CiAg");
    sb.append("ICB9KTsKICB9CiAgRG9tYWluTGlzdChpZGVudGl0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9");
    sb.append("IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0");
    sb.append("ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9saXN0IiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHl9CiAgICB9KTsKICB9CiAgRG9tYWluTGlzdEJ5U3BhY2UoaWRlbnRpdHksIHNwYWNlLCBy");
    sb.append("ZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAg");
    sb.append("cmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9tYWluL2xpc3Qt");
    sb.append("Ynktc3BhY2UiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9");
    sb.append("CiAgICB9KTsKICB9CiAgRG9tYWluR2V0VmFwaWRQdWJsaWNLZXkoaWRlbnRpdHksIGRvbWFpbiwgcmVz");
    sb.append("cG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsK");
    sb.append("ICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9u");
    sb.append("ZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9tYWluL2dldC12YXBpZC1w");
    sb.append("dWJsaWMta2V5IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21h");
    sb.append("aW59CiAgICB9KTsKICB9CiAgRG9tYWluVW5tYXAoaWRlbnRpdHksIGRvbWFpbiwgcmVzcG9uZGVyKSB7");
    sb.append("CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVy");
    sb.append("biBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNw");
    sb.append("b25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9tYWluL3VubWFwIiwgImlkIjpwYXJJZCwg");
    sb.append("ImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW59CiAgICB9KTsKICB9CiAgRG9tYWlu");
    sb.append("R2V0KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6ImRvbWFpbi9nZXQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImRvbWFp");
    sb.append("biI6IGRvbWFpbn0KICAgIH0pOwogIH0KICBEb2N1bWVudERvd25sb2FkQXJjaGl2ZShpZGVudGl0eSwg");
    sb.append("c3BhY2UsIGtleSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("ImRvY3VtZW50L2Rvd25sb2FkLWFyY2hpdmUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0");
    sb.append("eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRMaXN0UHVz");
    sb.append("aFRva2VucyhpZGVudGl0eSwgc3BhY2UsIGtleSwgZG9tYWluLCBhZ2VudCwgcmVzcG9uZGVyKSB7CiAg");
    sb.append("ICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBz");
    sb.append("ZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVz");
    sb.append("cG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2xpc3QtcHVzaC10b2tlbnMi");
    sb.append("LCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBr");
    sb.append("ZXksICJkb21haW4iOiBkb21haW4sICJhZ2VudCI6IGFnZW50fQogICAgfSk7CiAgfQogIERvY3VtZW50");
    sb.append("QXV0aG9yaXphdGlvbihzcGFjZSwga2V5LCBtZXNzYWdlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxm");
    sb.append("ID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVj");
    sb.append("dXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAg");
    sb.append("cmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemF0aW9uIiwgImlkIjpwYXJJZCwgInNw");
    sb.append("YWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBE");
    sb.append("b2N1bWVudEF1dGhvcml6YXRpb25Eb21haW4oZG9tYWluLCBtZXNzYWdlLCByZXNwb25kZXIpIHsKICAg");
    sb.append("IHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRl");
    sb.append("ciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemF0aW9uLWRvbWFpbiIs");
    sb.append("ICJpZCI6cGFySWQsICJkb21haW4iOiBkb21haW4sICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwog");
    sb.append("IH0KICBEb2N1bWVudEF1dGhvcml6ZShzcGFjZSwga2V5LCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlc3Bv");
    sb.append("bmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAg");
    sb.append("ICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZSIs");
    sb.append("ICJpZCI6cGFySWQsICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAidXNlcm5hbWUiOiB1c2VybmFt");
    sb.append("ZSwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemVEb21h");
    sb.append("aW4oZG9tYWluLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0");
    sb.append("aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVf");
    sb.append("cnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS1kb21haW4iLCAiaWQiOnBhcklkLCAiZG9t");
    sb.append("YWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAg");
    sb.append("ICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemVXaXRoUmVzZXQoc3BhY2UsIGtleSwgdXNlcm5hbWUs");
    sb.append("IHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwog");
    sb.append("ICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7");
    sb.append("Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS13aXRoLXJlc2V0IiwgImlkIjpwYXJJZCwgInNwYWNl");
    sb.append("Ijogc3BhY2UsICJrZXkiOiBrZXksICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNz");
    sb.append("d29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1");
    sb.append("dGhvcml6ZURvbWFpbldpdGhSZXNldChkb21haW4sIHVzZXJuYW1lLCBwYXNzd29yZCwgbmV3X3Bhc3N3");
    sb.append("b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAg");
    sb.append("ICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9h");
    sb.append("dXRob3JpemUtZG9tYWluLXdpdGgtcmVzZXQiLCAiaWQiOnBhcklkLCAiZG9tYWluIjogZG9tYWluLCAi");
    sb.append("dXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmQsICJuZXdfcGFzc3dvcmQiOiBu");
    sb.append("ZXdfcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRDcmVhdGUoaWRlbnRpdHksIHNwYWNlLCBr");
    sb.append("ZXksIGVudHJvcHksIGFyZywgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIg");
    sb.append("cGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlk");
    sb.append("OiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9k");
    sb.append("IjoiZG9jdW1lbnQvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFj");
    sb.append("ZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZW50cm9weSI6IGVudHJvcHksICJhcmciOiBhcmd9CiAgICB9");
    sb.append("KTsKICB9CiAgRG9jdW1lbnREZWxldGUoaWRlbnRpdHksIHNwYWNlLCBrZXksIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2RlbGV0ZSIsICJpZCI6cGFySWQs");
    sb.append("ICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgImtleSI6IGtleX0KICAgIH0pOwog");
    sb.append("IH0KICBEb2N1bWVudExpc3QoaWRlbnRpdHksIHNwYWNlLCBtYXJrZXIsIGxpbWl0LCByZXNwb25kZXIp");
    sb.append("IHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0");
    sb.append("dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVy");
    sb.append("OiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQvbGlzdCIsICJpZCI6");
    sb.append("cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgIm1hcmtlciI6IG1hcmtl");
    sb.append("ciwgImxpbWl0IjogbGltaXR9CiAgICB9KTsKICB9CiAgTWVzc2FnZURpcmVjdFNlbmQoaWRlbnRpdHks");
    sb.append("IHNwYWNlLCBrZXksIGNoYW5uZWwsIG1lc3NhZ2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0");
    sb.append("aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVf");
    sb.append("cnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6Im1lc3NhZ2UvZGlyZWN0LXNlbmQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHki");
    sb.append("OiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJjaGFubmVsIjogY2hhbm5lbCwg");
    sb.append("Im1lc3NhZ2UiOiBtZXNzYWdlfQogICAgfSk7CiAgfQogIE1lc3NhZ2VEaXJlY3RTZW5kT25jZShpZGVu");
    sb.append("dGl0eSwgc3BhY2UsIGtleSwgZGVkdXBlLCBjaGFubmVsLCBtZXNzYWdlLCByZXNwb25kZXIpIHsKICAg");
    sb.append("IHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRl");
    sb.append("ciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJtZXNzYWdlL2RpcmVjdC1zZW5kLW9uY2UiLCAiaWQi");
    sb.append("OnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJk");
    sb.append("ZWR1cGUiOiBkZWR1cGUsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("fSk7CiAgfQogIENvbm5lY3Rpb25DcmVhdGUoaWRlbnRpdHksIHNwYWNlLCBrZXksIHZpZXdlclN0YXRl");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAg");
    sb.append("ICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiY29ubmVjdGlv");
    sb.append("bi9jcmVhdGUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2Us");
    sb.append("ICJrZXkiOiBrZXksICJ2aWV3ZXItc3RhdGUiOiB2aWV3ZXJTdGF0ZX0sCiAgICAgIHNlbmQ6IGZ1bmN0");
    sb.append("aW9uKGNoYW5uZWwsIG1lc3NhZ2UsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwK");
    sb.append("ICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRo");
    sb.append("b2Q6ICJjb25uZWN0aW9uL3NlbmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImNoYW5u");
    sb.append("ZWwiOiBjaGFubmVsLCAibWVzc2FnZSI6IG1lc3NhZ2V9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAg");
    sb.append("IHBhc3N3b3JkOiBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQsIG5ld19wYXNzd29yZCwgc3ViUmVz");
    sb.append("cG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNw");
    sb.append("b25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vcGFzc3dvcmQiLCBp");
    sb.append("ZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgInVzZXJuYW1lIjogdXNlcm5hbWUsICJwYXNzd29y");
    sb.append("ZCI6IHBhc3N3b3JkLCAibmV3X3Bhc3N3b3JkIjogbmV3X3Bhc3N3b3JkfQogICAgICAgIH0pOwogICAg");
    sb.append("ICB9LAogICAgICBzZW5kT25jZTogZnVuY3Rpb24oY2hhbm5lbCwgZGVkdXBlLCBtZXNzYWdlLCBzdWJS");
    sb.append("ZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJl");
    sb.append("c3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kLW9uY2Ui");
    sb.append("LCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImNoYW5uZWwiOiBjaGFubmVsLCAiZGVkdXBl");
    sb.append("IjogZGVkdXBlLCAibWVzc2FnZSI6IG1lc3NhZ2V9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGNh");
    sb.append("bkF0dGFjaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAg");
    sb.append("ICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDog");
    sb.append("ImNvbm5lY3Rpb24vY2FuLWF0dGFjaCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBhdHRhY2g6IGZ1bmN0aW9uKGFzc2V0SWQsIGZpbGVuYW1lLCBj");
    sb.append("b250ZW50VHlwZSwgc2l6ZSwgZGlnZXN0TWQ1LCBkaWdlc3RTaGEzODQsIHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2F0dGFjaCIsIGlkOiBzdWJJZCwgImNv");
    sb.append("bm5lY3Rpb24iOnBhcklkLCAiYXNzZXQtaWQiOiBhc3NldElkLCAiZmlsZW5hbWUiOiBmaWxlbmFtZSwg");
    sb.append("ImNvbnRlbnQtdHlwZSI6IGNvbnRlbnRUeXBlLCAic2l6ZSI6IHNpemUsICJkaWdlc3QtbWQ1IjogZGln");
    sb.append("ZXN0TWQ1LCAiZGlnZXN0LXNoYTM4NCI6IGRpZ2VzdFNoYTM4NH0KICAgICAgICB9KTsKICAgICAgfSwK");
    sb.append("ICAgICAgdXBkYXRlOiBmdW5jdGlvbih2aWV3ZXJTdGF0ZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAg");
    sb.append("dmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAg");
    sb.append("ICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICBy");
    sb.append("ZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vdXBkYXRlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlv");
    sb.append("biI6cGFySWQsICJ2aWV3ZXItc3RhdGUiOiB2aWV3ZXJTdGF0ZX0KICAgICAgICB9KTsKICAgICAgfSwK");
    sb.append("ICAgICAgZW5kOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxm");
    sb.append("Ll9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAg");
    sb.append("ICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9k");
    sb.append("OiAiY29ubmVjdGlvbi9lbmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9");
    sb.append("KTsKICAgICAgfQogICAgfSk7CiAgfQogIENvbm5lY3Rpb25DcmVhdGVWaWFEb21haW4oaWRlbnRpdHks");
    sb.append("IGRvbWFpbiwgdmlld2VyU3RhdGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJjb25uZWN0aW9uL2NyZWF0ZS12aWEtZG9tYWluIiwgImlkIjpwYXJJZCwgImlkZW50");
    sb.append("aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW4sICJ2aWV3ZXItc3RhdGUiOiB2aWV3ZXJTdGF0");
    sb.append("ZX0sCiAgICAgIHNlbmQ6IGZ1bmN0aW9uKGNoYW5uZWwsIG1lc3NhZ2UsIHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3NlbmQiLCBpZDogc3ViSWQsICJjb25u");
    sb.append("ZWN0aW9uIjpwYXJJZCwgImNoYW5uZWwiOiBjaGFubmVsLCAibWVzc2FnZSI6IG1lc3NhZ2V9CiAgICAg");
    sb.append("ICAgfSk7CiAgICAgIH0sCiAgICAgIHBhc3N3b3JkOiBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQs");
    sb.append("IG5ld19wYXNzd29yZCwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lk");
    sb.append("KCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAg");
    sb.append("ICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNv");
    sb.append("bm5lY3Rpb24vcGFzc3dvcmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgInVzZXJuYW1l");
    sb.append("IjogdXNlcm5hbWUsICJwYXNzd29yZCI6IHBhc3N3b3JkLCAibmV3X3Bhc3N3b3JkIjogbmV3X3Bhc3N3");
    sb.append("b3JkfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBzZW5kT25jZTogZnVuY3Rpb24oY2hhbm5lbCwg");
    sb.append("ZGVkdXBlLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9f");
    sb.append("aWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAg");
    sb.append("ICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAi");
    sb.append("Y29ubmVjdGlvbi9zZW5kLW9uY2UiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImNoYW5u");
    sb.append("ZWwiOiBjaGFubmVsLCAiZGVkdXBlIjogZGVkdXBlLCAibWVzc2FnZSI6IG1lc3NhZ2V9CiAgICAgICAg");
    sb.append("fSk7CiAgICAgIH0sCiAgICAgIGNhbkF0dGFjaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAg");
    sb.append("ICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAg");
    sb.append("ICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vY2FuLWF0dGFjaCIsIGlkOiBzdWJJZCwgImNv");
    sb.append("bm5lY3Rpb24iOnBhcklkfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBhdHRhY2g6IGZ1bmN0aW9u");
    sb.append("KGFzc2V0SWQsIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgc2l6ZSwgZGlnZXN0TWQ1LCBkaWdlc3RTaGEz");
    sb.append("ODQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAg");
    sb.append("IHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRl");
    sb.append("cjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2F0");
    sb.append("dGFjaCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAiYXNzZXQtaWQiOiBhc3NldElkLCAi");
    sb.append("ZmlsZW5hbWUiOiBmaWxlbmFtZSwgImNvbnRlbnQtdHlwZSI6IGNvbnRlbnRUeXBlLCAic2l6ZSI6IHNp");
    sb.append("emUsICJkaWdlc3QtbWQ1IjogZGlnZXN0TWQ1LCAiZGlnZXN0LXNoYTM4NCI6IGRpZ2VzdFNoYTM4NH0K");
    sb.append("ICAgICAgICB9KTsKICAgICAgfSwKICAgICAgdXBkYXRlOiBmdW5jdGlvbih2aWV3ZXJTdGF0ZSwgc3Vi");
    sb.append("UmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5f");
    sb.append("X2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJS");
    sb.append("ZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vdXBkYXRlIiwg");
    sb.append("aWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ2aWV3ZXItc3RhdGUiOiB2aWV3ZXJTdGF0ZX0K");
    sb.append("ICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZW5kOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAg");
    sb.append("ICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAg");
    sb.append("ICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAg");
    sb.append("ICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9lbmQiLCBpZDogc3ViSWQsICJjb25uZWN0");
    sb.append("aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQogIERvY3VtZW50c0hhc2hQ");
    sb.append("YXNzd29yZChwYXNzd29yZCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIg");
    sb.append("cGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlk");
    sb.append("OiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9k");
    sb.append("IjoiZG9jdW1lbnRzL2hhc2gtcGFzc3dvcmQiLCAiaWQiOnBhcklkLCAicGFzc3dvcmQiOiBwYXNzd29y");
    sb.append("ZH0KICAgIH0pOwogIH0KICBCaWxsaW5nQ29ubmVjdGlvbkNyZWF0ZShpZGVudGl0eSwgcmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImJpbGxpbmctY29ubmVjdGlvbi9j");
    sb.append("cmVhdGUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0sCiAgICAgIHNlbmQ6IGZ1bmN0");
    sb.append("aW9uKGNoYW5uZWwsIG1lc3NhZ2UsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwK");
    sb.append("ICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRo");
    sb.append("b2Q6ICJjb25uZWN0aW9uL3NlbmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImNoYW5u");
    sb.append("ZWwiOiBjaGFubmVsLCAibWVzc2FnZSI6IG1lc3NhZ2V9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAg");
    sb.append("IHBhc3N3b3JkOiBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQsIG5ld19wYXNzd29yZCwgc3ViUmVz");
    sb.append("cG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNw");
    sb.append("b25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vcGFzc3dvcmQiLCBp");
    sb.append("ZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgInVzZXJuYW1lIjogdXNlcm5hbWUsICJwYXNzd29y");
    sb.append("ZCI6IHBhc3N3b3JkLCAibmV3X3Bhc3N3b3JkIjogbmV3X3Bhc3N3b3JkfQogICAgICAgIH0pOwogICAg");
    sb.append("ICB9LAogICAgICBzZW5kT25jZTogZnVuY3Rpb24oY2hhbm5lbCwgZGVkdXBlLCBtZXNzYWdlLCBzdWJS");
    sb.append("ZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJl");
    sb.append("c3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kLW9uY2Ui");
    sb.append("LCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImNoYW5uZWwiOiBjaGFubmVsLCAiZGVkdXBl");
    sb.append("IjogZGVkdXBlLCAibWVzc2FnZSI6IG1lc3NhZ2V9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGNh");
    sb.append("bkF0dGFjaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAg");
    sb.append("ICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDog");
    sb.append("ImNvbm5lY3Rpb24vY2FuLWF0dGFjaCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBhdHRhY2g6IGZ1bmN0aW9uKGFzc2V0SWQsIGZpbGVuYW1lLCBj");
    sb.append("b250ZW50VHlwZSwgc2l6ZSwgZGlnZXN0TWQ1LCBkaWdlc3RTaGEzODQsIHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2F0dGFjaCIsIGlkOiBzdWJJZCwgImNv");
    sb.append("bm5lY3Rpb24iOnBhcklkLCAiYXNzZXQtaWQiOiBhc3NldElkLCAiZmlsZW5hbWUiOiBmaWxlbmFtZSwg");
    sb.append("ImNvbnRlbnQtdHlwZSI6IGNvbnRlbnRUeXBlLCAic2l6ZSI6IHNpemUsICJkaWdlc3QtbWQ1IjogZGln");
    sb.append("ZXN0TWQ1LCAiZGlnZXN0LXNoYTM4NCI6IGRpZ2VzdFNoYTM4NH0KICAgICAgICB9KTsKICAgICAgfSwK");
    sb.append("ICAgICAgdXBkYXRlOiBmdW5jdGlvbih2aWV3ZXJTdGF0ZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAg");
    sb.append("dmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAg");
    sb.append("ICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICBy");
    sb.append("ZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vdXBkYXRlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlv");
    sb.append("biI6cGFySWQsICJ2aWV3ZXItc3RhdGUiOiB2aWV3ZXJTdGF0ZX0KICAgICAgICB9KTsKICAgICAgfSwK");
    sb.append("ICAgICAgZW5kOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxm");
    sb.append("Ll9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAg");
    sb.append("ICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9k");
    sb.append("OiAiY29ubmVjdGlvbi9lbmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9");
    sb.append("KTsKICAgICAgfQogICAgfSk7CiAgfQogIENvbmZpZ3VyZU1ha2VPckdldEFzc2V0S2V5KHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImNvbmZpZ3VyZS9tYWtlLW9yLWdldC1h");
    sb.append("c3NldC1rZXkiLCAiaWQiOnBhcklkfQogICAgfSk7CiAgfQogIEF0dGFjaG1lbnRTdGFydChpZGVudGl0");
    sb.append("eSwgc3BhY2UsIGtleSwgZmlsZW5hbWUsIGNvbnRlbnRUeXBlLCByZXNwb25kZXIpIHsKICAgIHZhciBz");
    sb.append("ZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19l");
    sb.append("eGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIs");
    sb.append("CiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXR0YWNobWVudC9zdGFydCIsICJpZCI6cGFySWQsICJp");
    sb.append("ZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgImtleSI6IGtleSwgImZpbGVuYW1lIjog");
    sb.append("ZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZX0sCiAgICAgIGFwcGVuZDogZnVuY3Rp");
    sb.append("b24oY2h1bmtNZDUsIGJhc2U2NEJ5dGVzLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3Vi");
    sb.append("SWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsg");
    sb.append("bWV0aG9kOiAiYXR0YWNobWVudC9hcHBlbmQiLCBpZDogc3ViSWQsICJ1cGxvYWQiOnBhcklkLCAiY2h1");
    sb.append("bmstbWQ1IjogY2h1bmtNZDUsICJiYXNlNjQtYnl0ZXMiOiBiYXNlNjRCeXRlc30KICAgICAgICB9KTsK");
    sb.append("ICAgICAgfSwKICAgICAgZmluaXNoOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIg");
    sb.append("c3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBp");
    sb.append("ZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVl");
    sb.append("c3Q6IHsgbWV0aG9kOiAiYXR0YWNobWVudC9maW5pc2giLCBpZDogc3ViSWQsICJ1cGxvYWQiOnBhcklk");
    sb.append("fQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9CiAgQXR0YWNobWVudFN0YXJ0QnlEb21haW4o");
    sb.append("aWRlbnRpdHksIGRvbWFpbiwgZmlsZW5hbWUsIGNvbnRlbnRUeXBlLCByZXNwb25kZXIpIHsKICAgIHZh");
    sb.append("ciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYu");
    sb.append("X19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25k");
    sb.append("ZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXR0YWNobWVudC9zdGFydC1ieS1kb21haW4iLCAi");
    sb.append("aWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImRvbWFpbiI6IGRvbWFpbiwgImZpbGVuYW1l");
    sb.append("IjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZX0sCiAgICAgIGFwcGVuZDogZnVu");
    sb.append("Y3Rpb24oY2h1bmtNZDUsIGJhc2U2NEJ5dGVzLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3Vi");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDog");
    sb.append("c3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6");
    sb.append("IHsgbWV0aG9kOiAiYXR0YWNobWVudC9hcHBlbmQiLCBpZDogc3ViSWQsICJ1cGxvYWQiOnBhcklkLCAi");
    sb.append("Y2h1bmstbWQ1IjogY2h1bmtNZDUsICJiYXNlNjQtYnl0ZXMiOiBiYXNlNjRCeXRlc30KICAgICAgICB9");
    sb.append("KTsKICAgICAgfSwKICAgICAgZmluaXNoOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAgICAgICB2");
    sb.append("YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAg");
    sb.append("ICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJl");
    sb.append("cXVlc3Q6IHsgbWV0aG9kOiAiYXR0YWNobWVudC9maW5pc2giLCBpZDogc3ViSWQsICJ1cGxvYWQiOnBh");
    sb.append("cklkfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9CgogIC8qKltFTkQtSU5WT0tFXSoqLwp9");
    sb.append("Cgp2YXIgQWRhbWEgPSB7CiAgUHJvZHVjdGlvbjogImF3cy11cy1lYXN0LTIuYWRhbWEtcGxhdGZvcm0u");
    sb.append("Y29tIiwKICBCZXRhOiAiYmV0YS5hZGFtYS1wbGF0Zm9ybS5jb20iLAogIENvbm5lY3Rpb246IFdlYlNv");
    sb.append("Y2tldEFkYW1hQ29ubmVjdGlvbgp9Owo=");
    return sb.toString();
  }
  public static final String WORKER = new String(Base64.getDecoder().decode(make_worker()), StandardCharsets.UTF_8);
  private static String make_worker() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyogQWRhbWEgd29ya2VyOiBoYW5kbGUgc2ltcGxlIHB1c2ggbm90aWZpY2F0aW9ucyAqLwoKY29uc29s");
    sb.append("ZS5sb2coImFkYW1hIHdvcmtlciBzdGFydGVkIik7CnNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaCcs");
    sb.append("IGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmRhdGEpIHsKICAgIHZhciBqc29uID0gZXZlbnQu");
    sb.append("ZGF0YS5qc29uKCk7CiAgICBpZiAoanNvbikgewogICAgICBjb25zb2xlLmxvZyhqc29uKTsKICAgICAg");
    sb.append("dmFyIHB1c2hUb2tlbiA9ICJOQSI7CiAgICAgIGlmICgnQHB0JyBpbiBqc29uKSB7CiAgICAgICAgcHVz");
    sb.append("aFRva2VuID0ganNvblsnQHB0J107CiAgICAgIH0KICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAg");
    sb.append("Ym9keToganNvbi5ib2R5ID8ganNvbi5ib2R5IDogIkdlbmVyaWMgUHVzaCBCb2R5IiwKICAgICAgfTsK");
    sb.append("ICAgICAgaWYgKGpzb24uaWNvbikgewogICAgICAgIG9wdGlvbnMuaWNvbiA9IGpzb24uaWNvbjsKICAg");
    sb.append("ICAgfQogICAgICB2YXIgc2hvdyA9IHRydWU7CiAgICAgIGlmIChqc29uLmhpZGUpIHsKICAgICAgICBz");
    sb.append("aG93ID0gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgaWYgKGpzb24udXJs");
    sb.append("KSB7CiAgICAgICAgZGF0YS51cmwgPSBqc29uLnVybDsKICAgICAgfQogICAgICBvcHRpb25zLmRhdGEg");
    sb.append("PSBkYXRhOwogICAgICBpZiAoc2hvdykgewogICAgICAgIGV2ZW50LndhaXRVbnRpbChzZWxmLnJlZ2lz");
    sb.append("dHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKGpzb24udGl0bGUgPyBqc29uLnRpdGxlIDogIkdlbmVyaWMg");
    sb.append("UHVzaCBUaXRsZSIsIG9wdGlvbnMpKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mKGpzb24uYmFkZ2Up");
    sb.append("ID09ICJudW1iZXIiICYmIG5hdmlnYXRvci5zZXRBcHBCYWRnZSkgewogICAgICAgIHRyeSB7CiAgICAg");
    sb.append("ICAgICBldmVudC53YWl0VW50aWwobmF2aWdhdG9yLnNldEFwcEJhZGdlKGpzb24uYmFkZ2UpKTsKICAg");
    sb.append("ICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgZXZlbnQud2FpdFVu");
    sb.append("dGlsKGZldGNoKHNlbGYubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5sb2NhdGlvbi5ob3N0");
    sb.append("ICsgIi9+cHQvIiArIHB1c2hUb2tlbiwgewogICAgICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgICAg");
    sb.append("IGhlYWRlcnM6IHt9LAogICAgICAgICAgYm9keTogcHVzaFRva2VuCiAgICAgICAgfSkpOwogICAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICAgIH0KICAgIH0KICB9Cn0pOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdub3RpZmljYXRpb25j");
    sb.append("bGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50Lm5vdGlmaWNhdGlvbiAmJiBldmVudC5u");
    sb.append("b3RpZmljYXRpb24uZGF0YSAmJiBldmVudC5ub3RpZmljYXRpb24uZGF0YS51cmwpIHsKICAgIHZhciB1");
    sb.append("cmwgPSBzZWxmLmxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHNlbGYubG9jYXRpb24uaG9zdCArIGV2");
    sb.append("ZW50Lm5vdGlmaWNhdGlvbi5kYXRhLnVybDsKICAgIHZhciBob21lID0gc2VsZi5sb2NhdGlvbi5wcm90");
    sb.append("b2NvbCArICIvLyIgKyBzZWxmLmxvY2F0aW9uLmhvc3Q7CiAgICBldmVudC5ub3RpZmljYXRpb24uY2xv");
    sb.append("c2UoKTsgLy8gQW5kcm9pZCBuZWVkcyBleHBsaWNpdCBjbG9zZS4KICAgIGV2ZW50LndhaXRVbnRpbCgK");
    sb.append("ICAgICAgY2xpZW50cy5tYXRjaEFsbCh7dHlwZTogJ3dpbmRvdyd9KS50aGVuKCB3YyA9PiB7CiAgICAg");
    sb.append("ICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHdpbmRvdy90YWIgb3BlbiB3aXRoIHRoZSB0");
    sb.append("YXJnZXQgVVJMCiAgICAgICAgdmFyIGNsaWVudFdpdGhQcmVmaXggPSBudWxsOwogICAgICAgIHZhciBj");
    sb.append("bGllbnRXaXRoSG9tZSA9IG51bGw7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Yy5sZW5ndGg7");
    sb.append("IGkrKykgewogICAgICAgICAgdmFyIGNsaWVudCA9IHdjW2ldOwogICAgICAgICAgY29uc29sZS5sb2co");
    sb.append("ImNsaWVudDoiICsgY2xpZW50LnVybCArICI7IiArIHVybCk7CiAgICAgICAgICBpZiAoY2xpZW50LnVy");
    sb.append("bCA9PT0gdXJsICYmICdmb2N1cycgaW4gY2xpZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjbGllbnQu");
    sb.append("Zm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjbGllbnQudXJsLnN0YXJ0c1dpdGgodXJs");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoUHJlZml4ID0g");
    sb.append("Y2xpZW50OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNsaWVudC51cmwuc3RhcnRzV2l0aChob21l");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoSG9tZSA9IGNs");
    sb.append("aWVudDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNsaWVudFdpdGhQcmVmaXggIT0g");
    sb.append("bnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpwcmVmaXg6IiArIHVybCk7CiAgICAgICAg");
    sb.append("ICByZXR1cm4gY2xpZW50V2l0aFByZWZpeC5uYXZpZ2F0ZSh1cmwpOwogICAgICAgIH0KICAgICAgICBp");
    sb.append("ZiAoY2xpZW50V2l0aEhvbWUgIT0gbnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpob21l");
    sb.append("OiIgKyB1cmwpOwogICAgICAgICAgcmV0dXJuIGNsaWVudFdpdGhIb21lLm5hdmlnYXRlKHVybCk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmIChjbGllbnRzLm9wZW5XaW5kb3cpIHsKICAgICAgICAgIGNvbnNvbGUu");
    sb.append("bG9nKCJvcGVuOm5ldzoiICsgdXJsKTsKICAgICAgICAgIHJldHVybiBjbGllbnRzLm9wZW5XaW5kb3co");
    sb.append("dXJsKTsKICAgICAgICB9CiAgICAgIH0pCiAgICApOwogIH0KfSk7");
    return sb.toString();
  }
}
