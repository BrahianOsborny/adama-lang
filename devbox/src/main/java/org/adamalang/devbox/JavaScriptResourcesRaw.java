/*
* Adama Platform and Language
* Copyright (C) 2021 - 2023 by Adama Platform Initiative, LLC
* 
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.
* 
* You should have received a copy of the GNU Affero General Public License
* along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/
package org.adamalang.devbox;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class JavaScriptResourcesRaw {
  public static final String TREE = new String(Base64.getDecoder().decode(make_tree()), StandardCharsets.UTF_8);
  private static String make_tree() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIGEgc2ltcGxpZmllZCBwdWIvc3ViIGRpZmZlcmVudGlhbCB0cmVlICovCmZ1bmN0aW9uIEFkYW1h");
    sb.append("VHJlZSgpIHsKICB2YXIgaWQgPSAwOwoKICB2YXIgcm9vdCA9IHt9OwogIHZhciBhbGxfc3Vic2NyaXB0");
    sb.append("aW9ucyA9IHt9OwogIHZhciBzZXR0bGVJZCA9IDA7CiAgdmFyIHNldHRsZW1lbnRzID0ge307CgogIC8v");
    sb.append("IGludm9rZSBhbGwgdGhlIHNldHRsZSBzdWJzY3JpcHRpb25zCiAgdmFyIHNldHRsZSA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgdmFyIGF4ZSA9IFtdOwogICAgZm9yICh2YXIgayBpbiBzZXR0bGVtZW50cykgewogICAg");
    sb.append("ICB2YXIgcmVzdWx0ID0gc2V0dGxlbWVudHNba10oKTsKICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAg");
    sb.append("ICAvLyBpZiB0aGUgcmVzdWx0IGlzbid0IHRydWUsIHRoZW4gdW5zdWJzY3JpYmUKICAgICAgICBheGUu");
    sb.append("cHVzaChrKTsKICAgICAgfQogICAgfQogICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgZGVsZXRlIHNldHRsZW1lbnRzW2tdOwogICAgfQogIH07CgogIHZhciBjbG9uZV9v");
    sb.append("YmplY3QgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7CiAgICAg");
    sb.append("IHZhciBuZXh0ID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2JqLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgbmV4dC5wdXNoKGNsb25lX29iamVjdChvYmpba10pKTsKICAgICAgfQogICAgICByZXR1");
    sb.append("cm4gbmV4dDsKICAgIH0gZWxzZSBpZiAodHlwZW9mIChvYmopID09ICJvYmplY3QiKSB7CiAgICAgIHZh");
    sb.append("ciBuZXh0ID0ge307CiAgICAgIGZvciAoa2V5IGluIG9iaikgewogICAgICAgIGlmIChrZXlbMF0gPT0g");
    sb.append("IiMiIHx8IGtleSA9PSAiX19rZXkiIHx8IGtleSA9PSAiQG8iIHx8IGtleSA9PSAiQHMiKSBjb250aW51");
    sb.append("ZTsKICAgICAgICBuZXh0W2tleV0gPSBjbG9uZV9vYmplY3Qob2JqW2tleV0pOwogICAgICB9CiAgICAg");
    sb.append("IHJldHVybiBuZXh0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwoKICB0");
    sb.append("aGlzLm51a2UgPSBmdW5jdGlvbiAoKSB7CiAgICBhbGxfc3Vic2NyaXB0aW9ucyA9IHt9OwogIH07Cgog");
    sb.append("IHRoaXMuY29weSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBjbG9uZV9vYmplY3Qocm9vdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdHIgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocm9v");
    sb.append("dCk7CiAgfTsKCiAgdGhpcy5yYXcgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcm9vdDsKICB9OwoK");
    sb.append("ICAvLyBmaWx0ZXIgdGhlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIG9uZXMgdGhhdCBoYXZlIHRoZSBrZXkK");
    sb.append("ICB2YXIgc3ViID0gZnVuY3Rpb24gKHMsIGtleSkgewogICAgLy8gaWYgd2UgaGF2ZSBub3RoaW5nLCB0");
    sb.append("aGVuIHdlIHJldHVybiBub3RoaW5nCiAgICBpZiAocy5sZW5ndGggPT0gMCkgewogICAgICByZXR1cm4g");
    sb.append("czsKICAgIH0KICAgIC8vIG1ha2UgYSBuZXcgYXJyYXkKICAgIHZhciBuID0gW107CiAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IHMubGVuZ3RoOyBrKyspIHsgLy8gc3VjaCB0aGF0IGV2ZXJ5IGVsZW1lbnQKICAg");
    sb.append("ICAgaWYgKGtleSBpbiBzW2tdKSB7IC8vIHdoaWNoIGNvbnRhaW5zIHRoZSBrZXkKICAgICAgICBuLnB1");
    sb.append("c2goc1trXVtrZXldKTsgLy8gaXMgYWRkZWQgdG8gdGhlIG5ldyBhcnJheQogICAgICB9CiAgICB9CiAg");
    sb.append("ICByZXR1cm4gbjsKICB9OwoKICAvLyBmaXJlIGV2ZW50cyBhdCB0aGUgY3VycmVudCBzdWJzY3JpcHRp");
    sb.append("b24KICB2YXIgZmlyZSA9IGZ1bmN0aW9uIChzLCB2YWx1ZSwgZXZlbnRzKSB7CiAgICAvLyBmb3IgZWFj");
    sb.append("aCBzdWJzY3JpcHRpb24KICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgewogICAg");
    sb.append("ICB2YXIgdiA9IHNbal07CiAgICAgIC8vIGlmIGl0IGhhcyBldmVudHMKICAgICAgaWYgKCJAZSIgaW4g");
    sb.append("dikgewogICAgICAgIC8vIGZpcmUgZWFjaCBldmVudAogICAgICAgIHZhciBldnRzID0gdlsiQGUiXTsK");
    sb.append("ICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV2dHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGV2");
    sb.append("ZW50cy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5mKHRoaXMudik7CiAgICAgICAg");
    sb.append("ICB9LmJpbmQoeyBmOiBldnRzW2tdLCB2OiB2YWx1ZSB9KSk7CiAgICAgICAgfQogICAgICB9CiAgICB9");
    sb.append("CiAgfTsKCiAgdmFyIHdlYXZlID0gZnVuY3Rpb24gKHMsIGNhbGxiYWNrLCBrZXkpIHsKICAgIGlmIChB");
    sb.append("cnJheS5pc0FycmF5KGNhbGxiYWNrKSkgewogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhbGxiYWNr");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgd2VhdmUocywgY2FsbGJhY2tba10sIGtleSk7CiAgICAgIH0K");
    sb.append("ICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxsYmFjaykgPT0gImZ1bmN0aW9uIikgewogICAgICBpZiAo");
    sb.append("IShrZXkgaW4gcykpIHsKICAgICAgICBzW2tleV0gPSB7fTsKICAgICAgfQogICAgICB2YXIgc2sgPSBz");
    sb.append("W2tleV07CiAgICAgIGlmICghKCJAZSIgaW4gc2spKSB7CiAgICAgICAgc2tbIkBlIl0gPSBbY2FsbGJh");
    sb.append("Y2tdOwogICAgICB9IGVsc2UgewogICAgICAgIHNrWyJAZSJdLnB1c2goY2FsbGJhY2spOwogICAgICB9");
    sb.append("CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09ICJvYmplY3QiKSB7CiAgICAgIGlmICgh");
    sb.append("KGtleSBpbiBzKSkgewogICAgICAgIHNba2V5XSA9IHt9OwogICAgICB9CiAgICAgIHZhciBzayA9IHNb");
    sb.append("a2V5XTsKICAgICAgZm9yICh2YXIgY2sgaW4gY2FsbGJhY2spIHsKICAgICAgICBpZiAoY2sgPT0gIkBl");
    sb.append("IikgewogICAgICAgICAgd2VhdmUocywgY2FsbGJhY2tbY2tdLCBrZXkpOwogICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICB3ZWF2ZShzaywgY2FsbGJhY2tbY2tdLCBjayk7CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICB9CiAgfTsKCiAgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhZGRpdGlvbgogIHZhciBmaXJlX2FkZCA9");
    sb.append("IGZ1bmN0aW9uIChzLCBrZXkpIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykg");
    sb.append("eyAvLyBmb3IgZWFjaCBzdWJzY3JpcHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIisi");
    sb.append("IGluIHYpIHsgLy8gaWYgdGhlIHN1YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gYWRkIG5ldyBv");
    sb.append("YmplY3RzCiAgICAgICAgdmFyIHZhID0gdlsiKyJdOwogICAgICAgIGlmICgiQGUiIGluIHZhKSB7IC8v");
    sb.append("IGlmIGFyZSBldmVudHMgYXNzb2NpYXRlZCB0byAnKycKICAgICAgICAgIHZhciBldmEgPSB2YVsiQGUi");
    sb.append("XTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZhLmxlbmd0aDsgaysrKSB7IC8vIGZvciBl");
    sb.append("YWNoICcrJyBhYmlsaXR5CiAgICAgICAgICAgIHdlYXZlKHYsIGV2YVtrXShrZXkpLCBrZXkpOwogICAg");
    sb.append("ICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIGZpcmUgYSBkZWxldGUgbWVz");
    sb.append("c2FnZSBmb3IgdGhlIGdpdmVuIGtleQogIHZhciBmaXJlX2RlbCA9IGZ1bmN0aW9uIChzLCBrZXkpIHsK");
    sb.append("ICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgeyAvLyBmb3IgZWFjaCBzdWJzY3Jp");
    sb.append("cHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIi0iIGluIHYpIHsgLy8gaWYgdGhlIHN1");
    sb.append("YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gZGVsZXRlIHByaW9yIGtleXMKICAgICAgICB2YXIg");
    sb.append("dmEgPSB2WyItIl07CiAgICAgICAgaWYgKCJAZSIgaW4gdmEpIHsgLy8gaWYgYXJlIGV2ZW50cyBhc3Nv");
    sb.append("Y2lhdGVkIHRvICctJwogICAgICAgICAgdmFyIGV2YSA9IHZhWyJAZSJdOwogICAgICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBldmEubGVuZ3RoOyBrKyspIHsgLy8gZm9yIGVhY2ggJy0nIGFiaWxpdHkKICAg");
    sb.append("ICAgICAgICAgZXZhW2tdKGtleSk7IC8vIGV2YWx1YXRlIHRoZSAnLScKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBhIGRlbGV0ZSBvZiBhIHRyZWUgaGFzIGJlZW4gZGV0");
    sb.append("ZWN0ZWQsIGxldCdzCiAgdmFyIGRlbCA9IGZ1bmN0aW9uIChzKSB7CiAgICAvLyBpZiB0aGUgc3Vic2Ny");
    sb.append("aXB0aW9ucyBpcyBhbiBhcnJheSwgdGhlbiBkZWxldGUgYWxsIGNoaWxkcmVuCiAgICBpZiAoQXJyYXku");
    sb.append("aXNBcnJheShzKSkgewogICAgICB2YXIgbiA9IHMubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IG47IGsrKykgewogICAgICAgIGRlbChzW2tdKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBl");
    sb.append("b2YgKHMpID09ICJvYmplY3QiKSB7IC8vIG90aGVyd2lzZSwgaXRlcmF0ZSBvdmVyIHRoZSBrZXlzCiAg");
    sb.append("ICAgIGZvciAodmFyIGtleSBpbiBzKSB7CiAgICAgICAgaWYgKCEoa2V5ID09ICcrJyB8fCBrZXkgPT0g");
    sb.append("Jy0nKSkgewogICAgICAgICAgdmFyIGNoID0gc1trZXldOwogICAgICAgICAgaWYgKGtleSA9PSAiQGUi");
    sb.append("KSB7IC8vIHdlIGhhdmUgZXZlbnRzLCBzbyBsZXQncyBzZW5kIHRob3NlIGV2ZW50cy4uLgogICAgICAg");
    sb.append("ICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY2hb");
    sb.append("al0obnVsbCk7IC8vIGEgbnVsbCB0byBpbmRpY2F0ZSBkZWxldGlvbgogICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICB9IGVsc2UgeyAvLyByZWN1cnNlIGludG8gdGhlIGNoaWxkIGZpZWxkCiAgICAgICAgICAgIGRl");
    sb.append("bChjaCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gZGVsZXRl");
    sb.append("IHRoZSBnaXZlbiBrZXkgd2l0aGluIHRoZSBzdWJzY3JpcHRpb24KICB2YXIgZGVsX2tleSA9IGZ1bmN0");
    sb.append("aW9uIChzLCBrZXkpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHMpKSB7IC8vIGlmIHdlIGhhdmUgYW4g");
    sb.append("YXJyYXkgb2Ygc3Vic2NyaXB0aW9ucywgdGhlbiBzaW1wbHkgcmVwZWF0CiAgICAgIHZhciBuID0gcy5s");
    sb.append("ZW5ndGg7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgZGVsX2tleShz");
    sb.append("W2tdLCBrZXkpOyAvLyBmb3IgZWFjaCBlbGVtZW50CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9m");
    sb.append("IChzKSA9PSAib2JqZWN0IikgeyAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWJjcmlwdGlvbiBjYWxs");
    sb.append("YmFjawogICAgICBpZiAoa2V5IGluIHMpIHsgLy8gaWYgdGhlIGtleSBpcyBpbiB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIGNhbGxiYWNrCiAgICAgICAgZGVsZXRlIHNba2V5XTsgLy8gZGVsZXRlIGl0CiAgICAgIH0KICAg");
    sb.append("IH0KICB9OwoKICAvLyBtZXJnZSB0aGUgZ2l2ZW4gZGVsdGEgaW50byB0aGUgdHJlZSBhbmQgZmlyZSBz");
    sb.append("dWJzY3JpcHRpb25zIChzKQogIHZhciBtZXJnZSA9IGZ1bmN0aW9uICh0cmVlLCBkZWx0YSwgcywgZXZl");
    sb.append("bnRzLCBvcHRpbWFsKSB7CiAgICBpZiAob3B0aW1hbCAmJiBzLmxlbmd0aCA9PSAwKSB7CiAgICAgIC8v");
    sb.append("IG5vIHZhbHVlIGluIG1lcmdpbmcgYWdhaW5zdCBhIGZhdXggdHJlZSB3aXRob3V0IHN1YnNjcmlwdGlv");
    sb.append("bnMKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yICh2YXIga2V5IGluIGRlbHRhKSB7IC8vIGZvciBl");
    sb.append("YWNoIGJpdCBvZiBkYXRhIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgZUtleSA9ICIjIiArIGtleTsg");
    sb.append("Ly8gY29tcHV0ZSB0aGUgc2VjcmV0IGRhdGEgcGF0aAogICAgICB2YXIgcHJpb3IgPSB0cmVlW2tleV07");
    sb.append("IC8vIGZpbmQgdGhlIHByaW9yIHN0YXRlIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgbmV4dCA9IGRl");
    sb.append("bHRhW2tleV07IC8vIGJyaW5nIHRoZSBjaGFuZ2UgcHJlc2VudCBmb3IgdGhlIGN1cnJlbnQga2V5CiAg");
    sb.append("ICAgIGlmIChuZXh0ID09IG51bGwpIHsgLy8gdGhlIGl0ZW0gaXMgZ29pbmcgcG9vZgogICAgICAgIC8v");
    sb.append("IHRoZSBwcmlvciB2YWx1ZSBpcyBhbiBhcnJheSwgc28gd2UgbWF5IGhhdmUgc29tZSBzcGVjaWFsIHRo");
    sb.append("aW5ncyBhc3NvY2lhdGUgd2l0aCBpdAogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByaW9yKSkgeyAv");
    sb.append("LyBVTlRFU1QKICAgICAgICAgIGlmIChlS2V5IGluIHRyZWUpIHsKICAgICAgICAgICAgZGVsKHN1Yihz");
    sb.append("LCBlS2V5KSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWxldGUgdHJlZVtlS2V5XTsKICAgICAgICB9");
    sb.append("CiAgICAgICAgZGVsKHN1YihzLCBrZXkpKTsgLy8gaXNzdWUgYSBkZWxldGUgZm9yIGFsbCB0aGUgc3Vi");
    sb.append("c2NyaXB0aW9ucyBmb3IgdGhlIGtpZAogICAgICAgIGRlbGV0ZSB0cmVlW2tleV07IC8vIGRlbGV0ZSB0");
    sb.append("aGUgZGF0YSBpbiB0aGUgdHJlZQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0eXBlb2YgKG5leHQp");
    sb.append("ID09ICJvYmplY3QiICYmICFBcnJheS5pc0FycmF5KG5leHQpKSB7IC8vIGlmIHRoZSBkZWx0YSBpcyBh");
    sb.append("biBvYmplY3QKICAgICAgICAgIHZhciBhcnIgPSBBcnJheS5pc0FycmF5KHByaW9yKSB8fCAiQG8iIGlu");
    sb.append("IG5leHQgfHwgIkBzIiBpbiBuZXh0OyAvLyBkZXRlY3QgaWYgd2UgbmVlZCB0byB1c2UgYXJyYXkgbG9n");
    sb.append("aWMKICAgICAgICAgIGlmIChhcnIpIHsgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhcnJheQogICAgICAg");
    sb.append("ICAgICBpZiAoIShrZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSB0cmVlIGhhcyBh");
    sb.append("biBlbXB0eSBhcnJheQogICAgICAgICAgICAgIHRyZWVba2V5XSA9IFtdOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgIGlmICghKGVLZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSBzZWNy");
    sb.append("ZXQgZGF0YSBleGlzdHMgYXMgd2VsbAogICAgICAgICAgICAgIHRyZWVbZUtleV0gPSB7fTsKICAgICAg");
    sb.append("ICAgICAgICBpZiAoIkBvIiBpbiBuZXh0KSB7IC8vIGlmIHdlIGhhdmUgYSBidW5jaCBvZiBrZXlzLCB0");
    sb.append("aGVuIGxldCdzIG1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSB0aGF0IGZvciBtYWtlX2RlbHRhCiAgICAgICAg");
    sb.append("ICAgICAgICB0cmVlW2VLZXldWyJAbyJdID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("ICAgdHJlZVtlS2V5XS5fX2tleSA9IGtleTsgLy8gYW5ub3RhdGUgdGhlIG5ldyBpdGVtIHdpdGggdGhl");
    sb.append("IGdpdmVuIGtleQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBlQmFzZSA9IHRyZWVbZUtleV07");
    sb.append("IC8vIGdldCB0aGUgc2VjcmV0IChhbmQgcmVhbCkgZGF0YSBmb3IgdGhlIG9iamVjdCBpbiBxdWVzdGlv");
    sb.append("bgogICAgICAgICAgICB2YXIgZVN1YiA9IHN1YihzLCBrZXkpOyAvLyBzY29wZSB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIHRvIHRoZSBrZXkKICAgICAgICAgICAgdmFyIG9yZGVyaW5nID0gbnVsbDsgLy8gZGV0ZWN0aW9u");
    sb.append("IG9mIGlmIHdlIGhhdmUgQG8gb3JkZXJpbmcgdG8gcmVvcmRlciB0aGUgdmFsdWVzCiAgICAgICAgICAg");
    sb.append("IHZhciByZXNpemUgPSBudWxsOyAvLyBkZXRlY3Rpb24gb2YgYW4gYXJyYXkgd2l0aG91dCBfX2tleQog");
    sb.append("ICAgICAgICAgICB2YXIgZGVsYXkgPSB7fTsgLy8gd2UgZGVsYXkgYWxsIGV2ZW50cyBzdWNoIHRoYXQg");
    sb.append("dGhlIGFycmF5IGNhbiBiZSBidWlsdCBmb3IgaW5saW5lIG1ha2VfZGVsdGEgY2FsbHMgdG8gd29yawog");
    sb.append("ICAgICAgICAgICBmb3IgKHZhciBhS2V5IGluIG5leHQpIHsgLy8gZm9yIGVhY2ggZmllbGQgd2l0aGlu");
    sb.append("IHRoZSBkaWZmZXJlbmNlCiAgICAgICAgICAgICAgdmFyIHZhbCA9IG5leHRbYUtleV07CiAgICAgICAg");
    sb.append("ICAgICAgaWYgKGFLZXkgPT0gIkBvIikgeyAvLyB0aGUgdmFsdWUgaXMgYSBuZXcgb3JkZXJpbmcgb2Yg");
    sb.append("dGhlIGFycmF5CiAgICAgICAgICAgICAgICBvcmRlcmluZyA9IHZhbDsKICAgICAgICAgICAgICB9IGVs");
    sb.append("c2UgaWYgKGFLZXkgPT0gIkBzIikgeyAvLyB0aGUgdmFsdWUgaXMgYSByZXNpemUgb2YgdGhlIGFycmF5");
    sb.append("CiAgICAgICAgICAgICAgICByZXNpemUgPSB2YWw7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwg");
    sb.append("PT0gbnVsbCkgeyAvLyBkZWxldGUgdGhlIGVsZW1lbnQKICAgICAgICAgICAgICAgIGlmIChhS2V5IGlu");
    sb.append("IGVCYXNlKSB7IC8vIGlmIGl0IGV4aXN0cyB3aXRoaW4gdGhlIHNlY3JldCBrZXkKICAgICAgICAgICAg");
    sb.append("ICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICAgIGRlbChz");
    sb.append("dWIoZVN1YiwgeCkpOyAvLyBpc3N1ZSBkZWxldGVzCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVC");
    sb.append("YXNlW3hdOyAvLyBkZWxldGUgdGhlIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgZGVsX2tleShlU3Vi");
    sb.append("LCB4KTsgLy8gZGVsZXRlIHRoZSBrZXlzIGZyb20gdGhlIG9iamVjdAogICAgICAgICAgICAgICAgICAg");
    sb.append("IGZpcmVfZGVsKGVTdWIsIHgpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHdlIGhhdmUgZGF0YQogICAgICAgICAgICAgICAgaWYgKCEo");
    sb.append("YUtleSBpbiBlQmFzZSkpIHsgLy8gdGhlIGRhdGEgZGlkbid0IGV4aXN0LCBzbyBmaXJlIGFuIGFkZGl0");
    sb.append("aW9uIHRvIGV4dGVuZCB0aGUgc3Vic2NyaXB0aW9ucwogICAgICAgICAgICAgICAgICBmaXJlX2FkZChl");
    sb.append("U3ViLCBhS2V5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBuVmFsID0gbmV4");
    sb.append("dFthS2V5XTsgLy8gZ2V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKG5W");
    sb.append("YWwpID09ICJvYmplY3QiKSB7IC8vIGlmIHRoZSBuZXcgdmFsdWUgaXMgYW4gb2JqZWN0CiAgICAgICAg");
    sb.append("ICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRoZW4gbWFrZSBzdXJlIHRoZSBuZXcg");
    sb.append("aXRlbSBpcyB3aXRoaW4gdGhlIHNlY3JldCB0cmVlCiAgICAgICAgICAgICAgICAgICAgZUJhc2VbYUtl");
    sb.append("eV0gPSB7fTsKICAgICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XS5fX2tleSA9IGFLZXk7CiAgICAg");
    sb.append("ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkg");
    sb.append("ewogICAgICAgICAgICAgICAgICAgIG1lcmdlKGVCYXNlW3hdLCBuZXh0W3hdLCBzdWIoZVN1YiwgeCks");
    sb.append("IGV2ZW50cywgb3B0aW1hbCk7IC8vIHJlY3Vyc2U6IG1lcmdlIHRoZSBkaWZmZXJlbmNlIGludG8gdGhl");
    sb.append("IHNlY3JldCB0cmVlIGFuZCBwdWJsaXNoIHRvIGFsbCBlbGVtZW50IHN1YnNjcmlwdGlvbnMKICAgICAg");
    sb.append("ICAgICAgICAgICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAg");
    sb.append("ICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIHNldCB0aGUg");
    sb.append("dmFsdWUgaW50byB0aGUgdHJlZQogICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XSA9IG5WYWw7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIGRlbGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAg");
    sb.append("ICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAgICAgICAgICAg");
    sb.append("IH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBhbmQgdGVsbCBldmVyeW9uZSB0");
    sb.append("aGUgbmV3IHZhbHVlIGZvciB0aGlzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIHZhciBiZWZvcmUgPSB0cmVlW2tleV07IC8vIHN0YXNoIGEgcG9pbnRlciB0byB0aGUgYXJyYXkK");
    sb.append("ICAgICAgICAgICAgdmFyIGRlbGF5T3JkZXIgPSBbXTsKCiAgICAgICAgICAgIGlmIChvcmRlcmluZyAh");
    sb.append("PSBudWxsKSB7IC8vIGFuIG9yZGVyaW5nIGNoYW5nZSBpcyBoYXBwZW5pbmcKICAgICAgICAgICAgICB2");
    sb.append("YXIgYWZ0ZXIgPSBbXTsgLy8gd2Ugd2lsbCByZWJ1aWxkIHRoZSBhcnJheSBoZXJlCiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOyAvLyBhbmQgcmVjb3JkIHRoZSBrZXlzIGhlcmUKICAgICAgICAgICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IG9yZGVyaW5nLmxlbmd0aDsgaysrKSB7IC8vIGZvciBlYWNoIG9yZGVy");
    sb.append("aW5nIGluc3RydWN0aW9uCiAgICAgICAgICAgICAgICB2YXIgaW5zdHIgPSBvcmRlcmluZ1trXTsKICAg");
    sb.append("ICAgICAgICAgICAgIHZhciB0eXBlX2luc3RyID0gdHlwZW9mIChpbnN0cik7CiAgICAgICAgICAgICAg");
    sb.append("ICBpZiAodHlwZV9pbnN0ciA9PSAic3RyaW5nIiB8fCB0eXBlX2luc3RyID09ICJudW1iZXIiKSB7IC8v");
    sb.append("IGlmIHRoZSBpbnN0cnVjdGlvbiByZWZlcnMgdG8gYW4gaXRlbQogICAgICAgICAgICAgICAgICBhZnRl");
    sb.append("ci5wdXNoKGVCYXNlW2luc3RyXSk7IC8vIHB1c2ggdGhlIGl0ZW0gaW50byB0aGUgbmV3IGFycmF5CiAg");
    sb.append("ICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgaW5zdHIpOyAvLyByZWNvcmQgdGhlIGtleSBvZiB0");
    sb.append("aGUgaXRlbQogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCB0aGUgaW5zdHJ1Y3Rp");
    sb.append("b24gaXMgYSByYW5nZQogICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBpbnN0clswXTsKICAgICAg");
    sb.append("ICAgICAgICAgICAgdmFyIGVuZCA9IGluc3RyWzFdOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBq");
    sb.append("ID0gc3RhcnQ7IGogPD0gZW5kOyBqKyspIHsgLy8gaXRlcmF0ZSBvdmVyIHRoZSByYW5nZSBhbmQgY29w");
    sb.append("eQogICAgICAgICAgICAgICAgICAgIGlmIChiZWZvcmVbal0pIHsKICAgICAgICAgICAgICAgICAgICAg");
    sb.append("IGFmdGVyLnB1c2goYmVmb3JlW2pdKTsgLy8gdGhlIGl0ZW1zIGZyb20gdGhlIHByZXZpb3VzIGNvcHkK");
    sb.append("ICAgICAgICAgICAgICAgICAgICAgIG1zZy5wdXNoKGJlZm9yZVtqXS5fX2tleSk7IC8vIGFuZCBhbm5v");
    sb.append("dGF0ZSB0aGUga2V5cwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWxheU9yZGVyLnB1c2go");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgIn4iKSwgbXNnLCBldmVu");
    sb.append("dHMpOyAvLyB0ZWxsIHN1YnNjcmlwdGlvbnMgYWJvdXQgdGhlIG5ldyBvcmRlcmluZwogICAgICAgICAg");
    sb.append("ICAgIH0pOwogICAgICAgICAgICAgIHRyZWVba2V5XSA9IGFmdGVyOwogICAgICAgICAgICB9IGVsc2Ug");
    sb.append("aWYgKHJlc2l6ZSAhPSBudWxsKSB7IC8vIGFsdGVybmF0aXZlbHksIGFuIGFycmF5IHdpdGhvdXQga2V5");
    sb.append("cyBpcyBiZWluZyByZXNpemVkCiAgICAgICAgICAgICAgdmFyIGFmdGVyID0gW107CiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOwogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcmVzaXplOyBr");
    sb.append("KyspIHsgLy8gd2UgcmVidWlsZCB0aGUgYXJyYXkKICAgICAgICAgICAgICAgIGFmdGVyW2tdID0gZUJh");
    sb.append("c2VbIiIgKyBrXTsKICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgayk7CiAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgIGRlbGF5T3JkZXIucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAg");
    sb.append("ICBmaXJlKHN1YihlU3ViLCAifiIpLCBtc2csIGV2ZW50cyk7IC8vIHRlbGwgc3Vic2NyaXB0aW9ucyBh");
    sb.append("Ym91dCB0aGUgbmV3IG9yZGVyaW5nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdHJlZVtr");
    sb.append("ZXldID0gYWZ0ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChhS2V5IGluIGRlbGF5KSB7");
    sb.append("CiAgICAgICAgICAgICAgZGVsYXlbYUtleV0oYUtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBkZWxheU9yZGVyLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAg");
    sb.append("ZGVsYXlPcmRlcltrXSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpcmUoZVN1YiwgdHJlZVtr");
    sb.append("ZXldLCBldmVudHMpOyAvLyB0ZWxsIGV2ZXJ5b25lIGFib3V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghKGtleSBpbiB0cmVlKSB8fCB0eXBlb2YgKHRyZWVba2V5");
    sb.append("XSkgIT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgICB0cmVlW2tleV0gPSB7fTsKICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICB2YXIgZSA9IHN1YihzLCBrZXkpOwogICAgICAgICAgICBtZXJnZSh0cmVlW2tl");
    sb.append("eV0sIG5leHQsIGUsIGV2ZW50cywgb3B0aW1hbCk7CiAgICAgICAgICAgIGZpcmUoZSwgdHJlZVtrZXld");
    sb.append("LCBldmVudHMpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7IC8vIG5vdCBhbiBvYmplY3QsIHNv");
    sb.append("IGl0IGlzIGEgdmFsdWUKICAgICAgICAgIHRyZWVba2V5XSA9IG5leHQ7IC8vIHN0YXNoIHRoZSBuZXcg");
    sb.append("dmFsdWUKICAgICAgICAgIGZpcmUoc3ViKHMsIGtleSksIG5leHQsIGV2ZW50cyk7IC8vIGFuZCB0ZWxs");
    sb.append("IGV2ZXJ5b25lIGFib3V0IGl0CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmaXJlKHMsIHRyZWUs");
    sb.append("IGV2ZW50cyk7CiAgfTsKCiAgdmFyIGZpcmVfZXZlbnRzID0gZnVuY3Rpb24gKGV2ZW50cykgewogICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBldmVudHMubGVuZ3RoOyBrKyspIHsKICAgICAgZXZlbnRzW2tdKCk7");
    sb.append("CiAgICB9CiAgfTsKCiAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICB0aGlzLnVwZGF0");
    sb.append("ZXMgPSAwOwogIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhKSB7CiAgICB0aGlzLnVwZGF0ZV9p");
    sb.append("bl9wcm9ncmVzcyA9IHRydWU7CiAgICB0aGlzLnVwZGF0ZXMrKzsKICAgIHZhciBhcnIgPSBbXTsgLy8g");
    sb.append("Y29udmVydCB0aGUgc3Vic2NyaXB0aW9ucyBpbnRvIGFuIGFycmF5CiAgICBmb3IgKHZhciBrIGluIGFs");
    sb.append("bF9zdWJzY3JpcHRpb25zKSB7CiAgICAgIGFyci5wdXNoKGFsbF9zdWJzY3JpcHRpb25zW2tdKTsKICAg");
    sb.append("IH0KICAgIHZhciBldmVudHMgPSBbXTsKICAgIG1lcmdlKHJvb3QsIGRlbHRhLCBhcnIsIGV2ZW50cywg");
    sb.append("ZmFsc2UpOyAvLyBleGVjdXRlIHRoZSBtZXJnZSBhbmQgZmlyZSBldmVudHMKICAgIGZpcmVfZXZlbnRz");
    sb.append("KGV2ZW50cyk7CiAgICB3aGlsZSAodGhpcy5zdWJzY3JpYmVfZGVsYXkubGVuZ3RoID4gMCkgewogICAg");
    sb.append("ICB2YXIgY29weSA9IHRoaXMuc3Vic2NyaWJlX2RlbGF5OwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eSA9IFtdOwogICAgICB2YXIgZmxhdCA9IFtdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNvcHku");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICBpZiAoIWNvcHlba10uYWJvcnRlZCkgewogICAgICAgICAgZmxh");
    sb.append("dC5wdXNoKGNvcHlba10uc3ViKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZXZlbnRzID0gW107CiAg");
    sb.append("ICAgIG1lcmdlKHt9LCBtYWtlX29wdGltYWxfZGVsdGEocm9vdCwgZmxhdCksIGZsYXQsIGV2ZW50cywg");
    sb.append("dHJ1ZSk7IC8vIGV4ZWN1dGUgdGhlIG1lcmdlIGFuZCBmaXJlIGV2ZW50cwogICAgICBmaXJlX2V2ZW50");
    sb.append("cyhldmVudHMpOwogICAgfQogICAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICAgIHNl");
    sb.append("dHRsZSgpOwogIH07CgogIC8vIGZpeCB0aGUgY2FsbGJhY2sgc3RydWN0dXJlIGZyb20gdGhlIHVzZXIn");
    sb.append("cyBoYXBweSBsYW5kIHRvIHRoZSByaWdvciBvZiB0aGUgZm9ybWF0IG5lZWRlZAogIHZhciB0cmFuc2Zv");
    sb.append("cm1fY2FsbGJhY2tfaW50b19zdWIgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHN1YikgewogICAgaWYgKEFy");
    sb.append("cmF5LmlzQXJyYXkoY2FsbGJhY2spKSB7IC8vIGlmIHRoZSBjYWxsYmFjayBpcyBhbiBhcnJheSwgdGhl");
    sb.append("biBmbGF0dGVuIHRoZSBhcnJheSBpbnRvIHRoZSBuZXcgb2JqZWN0CiAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgY2FsbGJhY2subGVuZ3RoOyBrKyspIHsKICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50");
    sb.append("b19zdWIoY2FsbGJhY2tba10sIHN1Yik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxs");
    sb.append("YmFjaykgPT0gIm9iamVjdCIpIHsgLy8gb2gsIHRoZSBjYWxsYmFjayBpcyBhbiBvYmplY3QKICAgICAg");
    sb.append("Zm9yICh2YXIga2V5IGluIGNhbGxiYWNrKSB7IC8vIGl0ZXJhdGUgb3ZlciBlYWNoIGtleQogICAgICAg");
    sb.append("IGlmIChrZXkgPT0gIkBlIikgeyAvLyBmb3JjZSB0aGUgZnVuY3Rpb25zIHRvIG1lcmdlIHRvZ2V0aGVy");
    sb.append("CiAgICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIoY2FsbGJhY2tba2V5XSwgc3ViKTsK");
    sb.append("ICAgICAgICB9IGVsc2UgeyAvLyBub3JtYWwgZmxvdwogICAgICAgICAgaWYgKCEoa2V5IGluIHN1Yikp");
    sb.append("IHsgLy8gZGl2ZSBpbnRvIHRoZSBvYmplY3QgYW5kIG1ha2Ugc3VyZSB0aGUgc3Vic2NyaXB0aW9uIGhh");
    sb.append("cyB0aGUgZmllbGQKICAgICAgICAgICAgc3ViW2tleV0gPSB7fTsKICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IHRyYW5zZm9ybV9jYWxsYmFja19pbnRvX3N1YihjYWxsYmFja1trZXldLCBzdWJba2V5XSk7IC8vIHJl");
    sb.append("Y3Vyc2UgYW5kIHBhaXIgdGhlIGV2ZW50cyB0byB0aGUgbmV3IHN1YnNjcmlwdGlvbgogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgKGNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iKSB7IC8v");
    sb.append("IGl0J3MgYSBmdW5jdGlvbgogICAgICBpZiAoISgiQGUiIGluIHN1YikpIHsgLy8gbGV0J3MgZW5zdXJl");
    sb.append("IHRoZXJlIGlzIGFuIGV2ZW50IGxpc3QKICAgICAgICBzdWJbIkBlIl0gPSBbY2FsbGJhY2tdOwogICAg");
    sb.append("ICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIGp1c3QgYWRkIGl0CiAgICAgICAgc3ViWyJAZSJdLnB1c2go");
    sb.append("Y2FsbGJhY2spOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gY29udmVydCB0aGUgdHJlZSB0byBhIGRl");
    sb.append("bHRhOyB0aGlzIHRyZWUgaXMgYXNzdW1lZCB0byBoYXZlIGJlZW4gbWVyZ2VkIGFscmVhZHkKICB2YXIg");
    sb.append("bWFrZV9kZWx0YSA9IGZ1bmN0aW9uIChzdCkgewogICAgdmFyIGRlbHRhID0ge307IC8vIHRoZSBkZWx0");
    sb.append("YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsgaW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhp");
    sb.append("biB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19r");
    sb.append("ZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQogICAgICB2YXIgdiA9IHN0W2tdOwogICAgICBpZiAo");
    sb.append("KCIjIiArIGspIGluIHN0KSB7IC8vIHRoZSByZXN1bHQgaXMgYW4gYXJyYXkKICAgICAgICB2YXIgcHYg");
    sb.append("PSBzdFsnIycgKyBrXTsKICAgICAgICB2YXIgZCA9IHt9OwogICAgICAgIGlmICgiQG8iIGluIHB2KSB7");
    sb.append("IC8vIGFuZCB3ZSBoYXZlIGEgc3BlY2lmaWMgb3JkZXJpbmcgdG8gbWVtb2l6ZQogICAgICAgICAgdmFy");
    sb.append("IG8gPSBbXTsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgeyAvLyBj");
    sb.append("b3B5IHRoZSBlbGVtZW50cyBmcm9tIHRoZSBhcnJheQogICAgICAgICAgICB2YXIgdmogPSB2W2pdOwog");
    sb.append("ICAgICAgICAgICBpZiAodmopIHsKICAgICAgICAgICAgICBkW3ZqLl9fa2V5XSA9IG1ha2VfZGVsdGEo");
    sb.append("dmopOyAvLyB1c2luZyB0aGUgX19rZXkgZW1iZWRkZWQgaW4gdGhlIG9iamVjdAogICAgICAgICAgICAg");
    sb.append("IG8ucHVzaCh2W2pdLl9fa2V5KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZFsi");
    sb.append("QG8iXSA9IG87CiAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlOyByZWNvcmQgdGhlIHNpemUgYXMg");
    sb.append("d2UgcmVjdXJzZQogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7CiAg");
    sb.append("ICAgICAgICAgIGRbIiIgKyBqXSA9IG1ha2VfZGVsdGEocHZbal0pOwogICAgICAgICAgfQogICAgICAg");
    sb.append("ICAgZFsiQHMiXSA9IHYubGVuZ3RoOwogICAgICAgIH0KICAgICAgICBkZWx0YVtrXSA9IGQ7CiAgICAg");
    sb.append("IH0gZWxzZSBpZiAodHlwZW9mICh2KSA9PSAib2JqZWN0IikgeyAvLyBpdCdzIGp1c3QgYW4gb2JqZWN0");
    sb.append("LCBzbyByZWN1cnNlIGRpcmVjdGx5CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHsKICAgICAg");
    sb.append("ICAgIHZhciBkID0ge307CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHYubGVuZ3RoOyBqKysp");
    sb.append("IHsKICAgICAgICAgICAgZFsiIiArIGpdID0gbWFrZV9kZWx0YSh2W2pdKTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIGRbIkBzIl0gPSB2Lmxlbmd0aDsKICAgICAgICAgIGRlbHRhW2tdID0gZDsKICAgICAgICB9");
    sb.append("IGVsc2UgewogICAgICAgICAgZGVsdGFba10gPSBtYWtlX2RlbHRhKHYpOwogICAgICAgIH0KICAgICAg");
    sb.append("fSBlbHNlIHsgLy8gZmluYWxseSwgaXQgaXMgYSB2YWx1ZSBzbyBqdXN0IHNldCBpdAogICAgICAgIGRl");
    sb.append("bHRhW2tdID0gdjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGRlbHRhOwogIH07CiAgdGhpcy5NYWtl");
    sb.append("RGVsdGEgPSBtYWtlX2RlbHRhOwoKICB2YXIgbWFrZV9vcHRpbWFsX2RlbHRhID0gZnVuY3Rpb24oc3Qs");
    sb.append("IHN1YnMpIHsKICAgIHZhciBmaWx0ZXIgPSB7fTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc3Vicy5s");
    sb.append("ZW5ndGg7IGsrKykgewogICAgICB2YXIgcyA9IHN1YnNba107CiAgICAgIGlmICh0eXBlb2YocykgPT0g");
    sb.append("ImZ1bmN0aW9uIikgewogICAgICAgIC8vIGZhbGxiYWNrIHdoZW4gdGhlIGhpZ2ggbGV2ZWwgaXMgYSBm");
    sb.append("dW5jdGlvbiAod2UgbmVlZCBpdCBhbGwhKQogICAgICAgIHJldHVybiBtYWtlX2RlbHRhKHN0KTsKICAg");
    sb.append("ICAgfSBlbHNlIGlmICh0eXBlb2YocykgPT0gIm9iamVjdCIpIHsKICAgICAgICBmb3IgKHZhciBqIGlu");
    sb.append("IHMpIHsKICAgICAgICAgIGZpbHRlcltqXSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAg");
    sb.append("ICB2YXIgbmV3X3N0ID0ge307IC8vIHRoZSBkZWx0YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsg");
    sb.append("aW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhpbiB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09");
    sb.append("ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19rZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQog");
    sb.append("ICAgICBpZiAoayBpbiBmaWx0ZXIpIHsKICAgICAgICBuZXdfc3Rba10gPSBzdFtrXTsKICAgICAgICBp");
    sb.append("ZiAoKCIjIiArIGspIGluIHN0KSB7CiAgICAgICAgICBuZXdfc3RbIiMiICsga10gPSBzdFsiIyIgKyBr");
    sb.append("XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtYWtlX2RlbHRhKG5ld19zdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdWJzY3JpYmVfZGVsYXkgPSBbXTsKCiAgLy8gYHN1YnNjcmliZWAgdGhlIGdpdmVu");
    sb.append("IHN0cnVjdHVyYWwgY2FsbGJhY2sKICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykg");
    sb.append("ewogICAgdmFyIHN1YiA9IHt9OwogICAgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViKGNhbGxiYWNr");
    sb.append("LCBzdWIpOyAgLy8gdHJhbnNmb3JtIHRoZSBjYWxsYmFjayBpbnRvIGEgc2FmZSBjYWxsYmFjawogICAg");
    sb.append("dmFyIFMgPSAiIiArIGlkKys7IC8vIGNyZWF0ZSBhbiBpZCBmb3IgdGhlIHN1YnNjcmlwdGlvbgogICAg");
    sb.append("YWxsX3N1YnNjcmlwdGlvbnNbU10gPSBzdWI7IC8vIHJlY29yZCB0aGUgc3Vic2NyaXB0aW9uCiAgICBp");
    sb.append("ZiAodGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MpIHsKICAgICAgdmFyIHNtID0ge307CiAgICAgIHNtLnN1");
    sb.append("YiA9IHN1YjsKICAgICAgc20uYWJvcnRlZCA9IGZhbHNlOwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eS5wdXNoKHNtKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHNtLmFib3J0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIGRlbGV0ZSBhbGxfc3Vic2NyaXB0aW9uc1tTXTsKICAgICAgfTsKICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHZhciBkZWx0YSA9IG1ha2Vfb3B0aW1hbF9kZWx0YShyb290LCBbc3ViXSk7CiAgICAg");
    sb.append("IHZhciBldmVudHMgPSBbXTsKICAgICAgbWVyZ2Uoe30sIGRlbHRhLCBbc3ViXSwgZXZlbnRzLCB0cnVl");
    sb.append("KTsgLy8gZXhlY3V0ZSB0aGUgY2FsbGJhY2sgbm93IG9uIGEgY2FsbGJhY2sgb2YgYWxsIGRhdGEgdG8g");
    sb.append("ZmlyZSBldmVudHMgYW5kIGZpbGwgdGhlIHN1YnNjcmlwdGlvbiBvYmplY3QKICAgICAgZmlyZV9ldmVu");
    sb.append("dHMoZXZlbnRzKTsKICAgICAgaWYgKHRoaXMudXBkYXRlcyA+IDApIHsKICAgICAgICBzZXR0bGUoKTsK");
    sb.append("ICAgICAgfQogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyAvLyByZXR1cm4gYSBtZXRob2QgdG8gdW5z");
    sb.append("dWJzY3JpYmUKICAgICAgICBkZWxldGUgYWxsX3N1YnNjcmlwdGlvbnNbU107CiAgICAgIH07CiAgICB9");
    sb.append("CiAgfTsKCiAgdGhpcy5hZGRfb25fc2V0dGxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBp");
    sb.append("ZCA9IHNldHRsZUlkKys7CiAgICBzZXR0bGVtZW50c1tpZF0gPSBjYWxsYmFjazsKICB9Owp9");
    return sb.toString();
  }
  public static final String DEBUGGER = new String(Base64.getDecoder().decode(make_debugger()), StandardCharsets.UTF_8);
  private static String make_debugger() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIFRoZSBBbWF6aW5nIEludGVybmFsIERlYnVnZ2VyIGZvciBSeEhUTUwgQ29ubmVjdGlvbiAqLwpB");
    sb.append("ZGFtYS5EZWJ1Z2dlciA9IChmdW5jdGlvbigpIHsKICB2YXIgc2VsZiA9IHt9OwogIHNlbGYuc2hvd24g");
    sb.append("PSBmYWxzZTsKICB2YXIgY29ubmVjdGlvbnMgPSB7fTsKICB2YXIgY3VycmVudCA9IG51bGw7CgogIC8q");
    sb.append("KiBIZWxwZXIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCAqLwogIHZhciBudWtl");
    sb.append("ID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAg");
    sb.append("d2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0g");
    sb.append("cGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwoKICAvKiogSGVscGVyIHwgY3JlYXRlIGEgc2ltcGxl");
    sb.append("IGVsZW1lbnQgd2l0aCB0aGUgZ2l2ZW4gY29udGVudCBhcyB0aGUgaW5uZXJIVE1MICovCiAgdmFyIHNp");
    sb.append("bXBsZSA9IGZ1bmN0aW9uKHRhZywgY29udGVudCkgewogICAgdmFyIGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KHRhZyk7CiAgICBkLmlubmVySFRNTCA9IGNvbnRlbnQ7CiAgICByZXR1cm4gZDsKICB9Cgog");
    sb.append("IHZhciBidXR0b25TdHlsZSA9ICJiYWNrZ3JvdW5kOiMzMzM7IGJvcmRlcjogMXB4IHNvbGlkICNmMDA7");
    sb.append("IGNvbG9yOiNmZmY7IHBhZGRpbmc6M3B4OyBtYXJnaW46M3B4OyBib3JkZXItcmFkaXVzOiAzcHg7IjsK");
    sb.append("ICB2YXIgaW5wdXRTdHlsZSA9ICJiYWNrZ3JvdW5kOiNlZWU7IGNvbG9yOiMwMDA7IjsKICB2YXIgcGx1");
    sb.append("c1NWRyA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9u");
    sb.append("ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjNzdk");
    sb.append("NjU2XCIgc3R5bGU9XCJ3aWR0aDoxOHB4OyBoZWlnaHQ6MThweDtcIj48cGF0aCBzdHJva2UtbGluZWNh");
    sb.append("cD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTEyIDl2Nm0zLTNIOW0xMiAw");
    sb.append("YTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+PC9zdmc+IjsKICB2YXIgbWludXNTVkcgPSAi");
    sb.append("PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3");
    sb.append("Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2YwMFwiIHN0eWxl");
    sb.append("PVwid2lkdGg6MThweDsgaGVpZ2h0OjE4cHg7XCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwi");
    sb.append("IHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk0xNSAxMkg5bTEyIDBhOSA5IDAgMTEtMTggMCA5");
    sb.append("IDkgMCAwMTE4IDB6XCIgLz48L3N2Zz4iOwoKICAvLyB3ZSBhcmUgZ29pbmcgdG8gY3JlYXRlIGEgZG9j");
    sb.append("dW1lbnQKICB2YXIgdmlld0pzb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICB2YXIg");
    sb.append("dmlld0NoYW5uZWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgogIHZpZXdKc29uLnN0");
    sb.append("eWxlID0gImZvbnQtZmFtaWx5OiBcIkpldEJyYWlucyBNb25vXCIsIHNvdXJjZS1jb2RlLXBybywgTWVu");
    sb.append("bG8sIE1vbmFjbywgQ29uc29sYXMsIG1vbm9zcGFjZTsgZm9udC1zaXplOiAxNHB4OyBjb2xvcjogI2Zm");
    sb.append("ZjsgYmFja2dyb3VuZC1jb2xvcjogIzAwMDsgd2lkdGg6MTAwJSIKICB2aWV3Q2hhbm5lbHMuc3R5bGUg");
    sb.append("PSAiZm9udC1mYW1pbHk6IFwiSmV0QnJhaW5zIE1vbm9cIiwgc291cmNlLWNvZGUtcHJvLCBNZW5sbywg");
    sb.append("TW9uYWNvLCBDb25zb2xhcywgbW9ub3NwYWNlOyBmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjZmZmOyBi");
    sb.append("YWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB3aWR0aDoxMDAlIgoKICAvKiogUmVmbGVjdGlvbiB8IGdpdmVu");
    sb.append("IGEgcmVmbGVjdGVkIHR5cGUsIGV4dHJhY3QgdGhlIHN0cnVjdHVyZSB0eXBlICoqLwogIHZhciBleHRy");
    sb.append("YWN0U3RydWN0dXJlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIHR5cGVzKSB7CiAgICBpZiAodHlwZS5uYXR1");
    sb.append("cmUgPT0gInJlYWN0aXZlX3JlZiIgfHwgdHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV9yZWYiKSB7CiAgICAg");
    sb.append("IHJldHVybiBleHRyYWN0U3RydWN0dXJlVHlwZSh0eXBlc1t0eXBlLnJlZl0sIHR5cGVzKTsKICAgIH0K");
    sb.append("ICAgIGlmICh0eXBlLm5hdHVyZSA9PSAicmVhY3RpdmVfcmVjb3JkIiB8fCB0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIHJldHVybiB0eXBlOwogICAgfQogICAgcmV0dXJuIG51bGw7");
    sb.append("CiAgfQoKICAvKiogVHJlZVZpZXcgfCBHaXZlbiBhIHR5cGUgKGFuZCBhIHR5cGUgZm9yZXN0KSBjcmVh");
    sb.append("dGUgYSAnbmFtZWQnIGRvbSBlbGVtZW50CiAgICogIGFsb25nIHdpdGggYW4gdXBkYXRlIGRlbHRhLiBU");
    sb.append("aGUgdXBkYXRlIGRlbHRhIGlzIGEgZnVuY3Rpb25hbCAob3Igc3RydWN0dXJhbCBmdW5jdGlvbmFsKQog");
    sb.append("ICAqICBjbG9zdXJlIHRoYXQgd2lsbCB1cGRhdGUgdGhlIGRvbSBlbGVtZW50IHN1Y2ggdGhhdCBpdCBj");
    sb.append("YW4gYmUgYXR0YWNoZWQgdG8gYW4gQWRhbWEgVHJlZSAqLwogIHZhciBjb252ZXJ0VHlwZVRvRG9tRGVs");
    sb.append("dGEgPSBmdW5jdGlvbih0eXBlLCB0eXBlcykgewogICAgaWYgKHR5cGUubmF0dXJlID09ICJyZWFjdGl2");
    sb.append("ZV9yZWYiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfcmVmIikgewogICAgICAvLyBnbyB0byB0aGUg");
    sb.append("Zm9yZXN0IGFuZCB0dXJuIHRoZSByZWYgaW50byBhIG1hbmlmZXN0ZWQgdHlwZQogICAgICByZXR1cm4g");
    sb.append("Y29udmVydFR5cGVUb0RvbURlbHRhKHR5cGVzW3R5cGUucmVmXSwgdHlwZXMpOwogICAgfQogICAgaWYg");
    sb.append("KHR5cGUubmF0dXJlID09ICJuYXRpdmVfbWF5YmUiIHx8IHR5cGUubmF0dXJlID09ICJyZWFjdGl2ZV9t");
    sb.append("YXliZSIpIHsKICAgICAgLy8gYSBtYXliZSBpcyBqdXN0IGEgd3JhcHBlciBhcm91bmQgYW5vdGhlciB0");
    sb.append("eXBlIHRoYXQgY2FuIG51bGwgb3V0CiAgICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJzcGFuIik7CiAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZS50eXBl");
    sb.append("LCB0eXBlcyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOiBkb20sCiAgICAgICAgbmFtZTogIm1h");
    sb.append("eWJlJmx0OyIgKyByZXN1bHQubmFtZSArICImZ3Q7IiwKICAgICAgICB1cGRhdGU6IFtyZXN1bHQudXBk");
    sb.append("YXRlLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgbnVrZShkb20pOwogICAgICAgICAgaWYgKHZh");
    sb.append("bHVlID09IG51bGwpIHsKICAgICAgICAgICAgZG9tLmlubmVySFRNTCA9ICI8aT5udWxsPC9pPiI7CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb20uYXBwZW5kKHJlc3VsdC5kb20pOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH1dCiAgICAgIH07CiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0gIm5hdGl2");
    sb.append("ZV9saXN0IiB8fCB0eXBlLm5hdHVyZSA9PSAibmF0aXZlX2FycmF5IikgewogICAgICAvLyB0aGlzIGlz");
    sb.append("IHRoZSBtb3N0IGNvbXBsZXggdHlwZSBhcyBpdCByZXF1aXJlcyBhIGRpZmZlcmVudGlhbCBzdHJ1Y3R1");
    sb.append("cmUuCgogICAgICAvLyB3ZSBjcmVhdGUgYSBkdW1teSB0byBnZXQgdGhlIG5hbWUgb2YgdGhlIHR5cGUK");
    sb.append("ICAgICAgdmFyIGR1bW15ID0gY29udmVydFR5cGVUb0RvbURlbHRhKHR5cGUudHlwZSwgdHlwZXMpOwoK");
    sb.append("ICAgICAgLy8gc28sIHdlIGhhdmUgdHdvIGNvbnNpZGVyYXRpb25zLiBGaXJzdCwgaXMgdGhpcyBhIGxp");
    sb.append("c3Qgb2Ygc3RydWN0dXJlcyBPUiBhIGxpc3Qgb2YgdmFsdWVzLgogICAgICB2YXIgcmVjb3JkVHlwZSA9");
    sb.append("IGV4dHJhY3RTdHJ1Y3R1cmVUeXBlKHR5cGUudHlwZSwgdHlwZXMpOwogICAgICBpZiAocmVjb3JkVHlw");
    sb.append("ZSAhPSBudWxsKSB7CiAgICAgICAgLy8gaXQgaXMgYSBsaXN0IG9mIHN0cnVjdHVyZXMsIHNvIHdlIHdh");
    sb.append("bnQgdG8gY3JlYXRlIGEgbmljZSBsb29raW5nIHRhYmxlIHdpdGggcGFnaW5hdGlvbiEKICAgICAgICB2");
    sb.append("YXIgdGFibGVDb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB2");
    sb.append("YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICB0YWJs");
    sb.append("ZUNvbnRyb2xzLmFwcGVuZChzaG93aGlkZSk7CgogICAgICAgIHZhciB0YWJsZUhvbGRlciA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CiAgICAgICAgdGFibGVDb250cm9scy5hcHBlbmQodGFi");
    sb.append("bGVIb2xkZXIpOwogICAgICAgIHZhciB0YWJsZUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo");
    sb.append("InRoZWFkIik7CiAgICAgICAgdGFibGVIb2xkZXIuYXBwZW5kKHRhYmxlSGVhZGVyKTsKICAgICAgICB2");
    sb.append("YXIgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5hcHBlbmQoaGVhZGVyUm93KTsKICAgICAgICB2YXIgY29sb3JTdHlsZSA9ICJib3JkZXI6IDFw");
    sb.append("eCBzb2xpZCAjM2I1NGRhOyI7CiAgICAgICAgZm9yICh2YXIgZmllbGROYW1lIGluIHJlY29yZFR5cGUu");
    sb.append("ZmllbGRzKSB7CiAgICAgICAgICB2YXIgZmllbGQgPSByZWNvcmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVd");
    sb.append("OwogICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBmaWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgIGNv");
    sb.append("bnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21E");
    sb.append("ZWx0YShmaWVsZC50eXBlLCB0eXBlcyk7CiAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJ0ZCIpOwogICAgICAgICAgdGQuaW5uZXJIVE1MID0gcmVzdWx0Lm5hbWUgKyAiICIgKyBm");
    sb.append("aWVsZE5hbWU7CiAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kKHRkKTsKICAgICAgICAgIHRkLnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZSArICJwYWRkaW5nLWxlZnQ6IDAuNWVtOyBwYWRkaW5nLXJpZ2h0OiAwLjVlbTsi");
    sb.append("CiAgICAgICAgfQogICAgICAgIHRhYmxlSG9sZGVyLnN0eWxlID0gY29sb3JTdHlsZSArICJwYWRkaW5n");
    sb.append("OiAwLjVlbTsgbWFyZ2luOjAuNWVtOyBkaXNwbGF5Om5vbmUiCiAgICAgICAgaGVhZGVyUm93LnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZTsKICAgICAgICB2YXIgdGFibGVCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgidGJvZHkiKTsKICAgICAgICB0YWJsZUhvbGRlci5hcHBlbmQodGFibGVCb2R5KTsKICAgICAgICB2");
    sb.append("YXIgcm93c0J5S2V5ID0ge307CiAgICAgICAgdmFyIHBhZ2luZyA9IHsKICAgICAgICAgIHNob3duOmZh");
    sb.append("bHNlLAogICAgICAgICAgb3JkZXI6W10sCiAgICAgICAgICBwYWdlOiAwLAogICAgICAgICAgcGFnZV9s");
    sb.append("aW1pdDogMTAsCiAgICAgICAgfTsKICAgICAgICB2YXIgY29udHJvbGxlciA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB0YWJsZUNvbnRyb2xzLmFwcGVuZChjb250cm9sbGVyKTsK");
    sb.append("ICAgICAgICBwYWdpbmcucmVmb3JtID1mdW5jdGlvbigpIHsKICAgICAgICAgIG51a2UodGFibGVCb2R5");
    sb.append("KTsKICAgICAgICAgIHZhciBzdGFydCA9IE1hdGgubWluKHRoaXMucGFnZSAqIHRoaXMucGFnZV9saW1p");
    sb.append("dCwgdGhpcy5vcmRlci5sZW5ndGggLSB0aGlzLnBhZ2VfbGltaXQpOwogICAgICAgICAgZm9yICh2YXIg");
    sb.append("YXQgPSBzdGFydDsgYXQgPCBzdGFydCArIHBhZ2luZy5wYWdlX2xpbWl0OyBhdCsrKSB7CiAgICAgICAg");
    sb.append("ICAgIHZhciByb3cgPSByb3dzQnlLZXlbcGFnaW5nLm9yZGVyW2F0XV07CiAgICAgICAgICAgIGlmIChy");
    sb.append("b3cpIHsKICAgICAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kKHJvdyk7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIG51a2UoY29udHJvbGxlcik7CiAgICAgICAgICBpZiAodGhpcy5zaG93");
    sb.append("bikgewogICAgICAgICAgICB2YXIgcGFnZXMgPSB0aGlzLm9yZGVyLmxlbmd0aCAvIHRoaXMucGFnZV9s");
    sb.append("aW1pdDsKICAgICAgICAgICAgaWYgKHBhZ2VzID4gMSkgewogICAgICAgICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgcGFnZXM7IGsrKykgewogICAgICAgICAgICAgICAgdmFyIGdvdG9QYWdlID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgICAgICAgICBnb3RvUGFnZS5zdHlsZSA9");
    sb.append("IGJ1dHRvblN0eWxlOwogICAgICAgICAgICAgICAgZ290b1BhZ2UuaW5uZXJIVE1MID0gIltQRzoiICsg");
    sb.append("ayArICJdIjsKICAgICAgICAgICAgICAgIGdvdG9QYWdlLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIHRoaXMucGFnaW5nLnBhZ2UgPSB0aGlzLnBnOwogICAgICAgICAgICAgICAg");
    sb.append("ICB0aGlzLnBhZ2luZy5yZWZvcm0oKTsKICAgICAgICAgICAgICAgIH0uYmluZCh7cGFnaW5nOiB0aGlz");
    sb.append("LCBwZzoga30pOwogICAgICAgICAgICAgICAgY29udHJvbGxlci5hcHBlbmQoZ290b1BhZ2UpOwogICAg");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2hvd2hpZGUuaW5u");
    sb.append("ZXJIVE1MID0gdGhpcy5zaG93biA/IG1pbnVzU1ZHIDogcGx1c1NWRzsKICAgICAgICAgIHNob3doaWRl");
    sb.append("Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5zaG93biA9ICF0aGlzLnNob3du");
    sb.append("OwogICAgICAgICAgICBpZiAodGhpcy5zaG93bikgewogICAgICAgICAgICAgIHRhYmxlSG9sZGVyLnN0");
    sb.append("eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMu");
    sb.append("cmVmb3JtKCk7CiAgICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgICAgfS5iaW5kKHBhZ2luZyk7CgoK");
    sb.append("ICAgICAgICByZXR1cm4gewogICAgICAgICAgZG9tOiB0YWJsZUNvbnRyb2xzLAogICAgICAgICAgbmFt");
    sb.append("ZTogImxpc3QmbHQ7IiArIGR1bW15Lm5hbWUgKyAiJmd0OyIsCiAgICAgICAgICB1cGRhdGU6IHsKICAg");
    sb.append("ICAgICAgICAgJysnOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgdmFyIHJvdyA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7CiAgICAgICAgICAgICAgcm93c0J5S2V5W2tleV0gPSByb3c7");
    sb.append("CiAgICAgICAgICAgICAgdmFyIGRlbHRhID0ge307CiAgICAgICAgICAgICAgZm9yICh2YXIgZmllbGRO");
    sb.append("YW1lIGluIHJlY29yZFR5cGUuZmllbGRzKSB7CiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSByZWNv");
    sb.append("cmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBm");
    sb.append("aWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShmaWVsZC50");
    sb.append("eXBlLCB0eXBlcyk7CiAgICAgICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJ0ZCIpOwogICAgICAgICAgICAgICAgdGQuc3R5bGUgPSBjb2xvclN0eWxlICsgInBhZGRpbmc6IDAu");
    sb.append("MjVlbTsgdGV4dC1hbGlnbjp0b3AiOwogICAgICAgICAgICAgICAgdGQuYXBwZW5kKHJlc3VsdC5kb20p");
    sb.append("OwogICAgICAgICAgICAgICAgcm93LmFwcGVuZCh0ZCk7CiAgICAgICAgICAgICAgICBkZWx0YVtmaWVs");
    sb.append("ZE5hbWVdID0gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJu");
    sb.append("IGRlbHRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnLSc6IGZ1bmN0aW9uIChrZXkpIHsKICAg");
    sb.append("ICAgICAgICAgICB2YXIgZG9tID0gcm93c0J5S2V5W2tleV07CiAgICAgICAgICAgICAgdGFibGVCb2R5");
    sb.append("LnJlbW92ZShkb20pOwogICAgICAgICAgICAgIGRlbGV0ZSByb3dzQnlLZXlba2V5XTsKICAgICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAgICAgICBpZiAo");
    sb.append("b3JkZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcGFnaW5nLm9yZGVyID0gb3JkZXI7CiAgICAg");
    sb.append("ICAgICAgICAgICBwYWdpbmcucmVmb3JtKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIG5vdCBhIHJlY29yZCwg");
    sb.append("c28gd2UgdXNlIGEgc2ltcGxlIGxpc3QKICAgICAgICB2YXIgbGlzdEhvbGRlciA9IGRvY3VtZW50LmNy");
    sb.append("ZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHZhciBkb21CeUtleSA9IHt9OwogICAgICAgIHJldHVy");
    sb.append("biB7CiAgICAgICAgICBkb206IGxpc3RIb2xkZXIsCiAgICAgICAgICBuYW1lOiAibGlzdDwiICsgZHVt");
    sb.append("bXkubmFtZSArICI+IiwKICAgICAgICAgIHVwZGF0ZTogewogICAgICAgICAgICAnKyc6IGZ1bmN0aW9u");
    sb.append("IChrZXkpIHsKICAgICAgICAgICAgICB2YXIgaXRlbUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoInNwYW4iKTsKICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udmVydFR5cGVUb0RvbURlbHRh");
    sb.append("KHR5cGUudHlwZSwgdHlwZXMpOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHJlc3VsdC5k");
    sb.append("b20pOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHNpbXBsZSgic3BhbiIsICIsICIpKTsK");
    sb.append("ICAgICAgICAgICAgICBkb21CeUtleVtrZXldID0gaXRlbUhvbGRlcjsKICAgICAgICAgICAgICByZXR1");
    sb.append("cm4gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJy0nOiBmdW5jdGlvbiAo");
    sb.append("a2V5KSB7CiAgICAgICAgICAgICAgdmFyIGRvbSA9IGRvbUJ5S2V5W2tleV07CiAgICAgICAgICAgICAg");
    sb.append("bGlzdEhvbGRlci5yZW1vdmUoZG9tKTsKICAgICAgICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsK");
    sb.append("ICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlLm5hdHVy");
    sb.append("ZSA9PSAicmVhY3RpdmVfdmFsdWUiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfdmFsdWUiKSB7CiAg");
    sb.append("ICAgIC8vIGl0J3MganVzdCBkYXRhLCBzbyBjcmVhdGUgYSBzaW5nbGUgbm9kZSB0byBkcmF3IGl0CiAg");
    sb.append("ICAgIHZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICBpdGVtLmlu");
    sb.append("bmVySFRNTCA9ICJudWxsIjsKICAgICAgaXRlbS5zdHlsZSA9ICJjb2xvcjogIzc3YTVmZjsiOwogICAg");
    sb.append("ICB2YXIgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZTsgfTsK");
    sb.append("ICAgICAgaWYgKHR5cGUudHlwZSA9PSAic3RyaW5nIikgewogICAgICAgIGl0ZW0uc3R5bGUgPSAiY29s");
    sb.append("b3I6ICM3N2Q2NTYiOwogICAgICAgIHVwZGF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW0uaW5uZXJI");
    sb.append("VE1MID0gIlwiIiArIHZhbHVlICsgIlwiIjsgfTsKICAgICAgfSBlbHNlIGlmICh0eXBlLnR5cGUgPT0g");
    sb.append("InByaW5jaXBhbCIpIHsKICAgICAgICBpdGVtLnN0eWxlID0gImNvbG9yOiAjQkE4M0ZGOyI7CiAgICAg");
    sb.append("ICAgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZSAhPSBudWxs");
    sb.append("ID8gKHZhbHVlLmFnZW50ICsgIkAiICsgdmFsdWUuYXV0aG9yaXR5KSA6ICJudWxsIjsgfTsKICAgICAg");
    sb.append("fSBlbHNlIGlmICh0eXBlLnR5cGUgPT0gImJvb2wiKSB7CiAgICAgICAgaXRlbS5zdHlsZSA9ICJjb2xv");
    sb.append("cjogI0U4M0IzQjsiOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOml0ZW0sCiAgICAg");
    sb.append("ICAgbmFtZTogdHlwZS50eXBlLAogICAgICAgIHVwZGF0ZTogdXBkYXRlCiAgICAgIH07CiAgICB9CiAg");
    sb.append("ICBpZiAodHlwZS5uYXR1cmUgPT0gInJlYWN0aXZlX3JlY29yZCIgfHwgdHlwZS5uYXR1cmUgPT0gIm5h");
    sb.append("dGl2ZV9tZXNzYWdlIikgewogICAgICAvLyBpdCdzIGEgc3RydWN0dXJlLCBzbyBsZXQncyBjcmVhdGUg");
    sb.append("YSByZWNvcmQgdGhhdCBjYW4gc2hvdy9oaWRlCiAgICAgIHZhciBvYmpfaG9sZGVyID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICB2YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJidXR0b24iKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoc2hvd2hpZGUpOwogICAgICBv");
    sb.append("YmpfaG9sZGVyLnNob3dHcm91cCA9IHR5cGUubmFtZSAhPSAiUm9vdCI7CgogICAgICB2YXIgZ3JvdXAg");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoZ3Jv");
    sb.append("dXApOwogICAgICBncm91cC5hcHBlbmQoc2ltcGxlKCJkaXYiLCAieyIpKTsKICAgICAgdmFyIGNoaWxk");
    sb.append("cmVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKICAgICAgZ3JvdXAuYXBwZW5kKGNoaWxk");
    sb.append("cmVuKTsKICAgICAgZ3JvdXAuYXBwZW5kKHNpbXBsZSgiZGl2IiwgIn0iKSk7CiAgICAgIGdyb3VwLnN0");
    sb.append("eWxlID0gInBhZGRpbmctbGVmdDoxMHB4IjsKICAgICAgY2hpbGRyZW4uc3R5bGUgPSAicGFkZGluZy1s");
    sb.append("ZWZ0OjEwcHg7IjsKICAgICAgc2hvd2hpZGUub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgIG9i");
    sb.append("al9ob2xkZXIuc2hvd0dyb3VwID0gISBvYmpfaG9sZGVyLnNob3dHcm91cDsKICAgICAgICBpZiAob2Jq");
    sb.append("X2hvbGRlci5zaG93R3JvdXApIHsKICAgICAgICAgIGdyb3VwLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAg");
    sb.append("ICAgICAgIHNob3doaWRlLmlubmVySFRNTCA9IG1pbnVzU1ZHOwogICAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgICBncm91cC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgc2hvd2hpZGUuaW5uZXJI");
    sb.append("VE1MID0gcGx1c1NWRzsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNob3doaWRlLm9uY2xpY2soKTsK");
    sb.append("CiAgICAgIHZhciBkZWx0YSA9IHt9OwogICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gdHlwZS5maWVs");
    sb.append("ZHMpIHsKICAgICAgICB2YXIgZmllbGQgPSB0eXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgIGlm");
    sb.append("ICgicHJpdmF0ZSIgPT0gZmllbGQucHJpdmFjeSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAg");
    sb.append("fQogICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEoZmllbGQudHlwZSwgdHlw");
    sb.append("ZXMpOwogICAgICAgIHZhciBmaWVsZERvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7CiAg");
    sb.append("ICAgICAgZmllbGREb20uYXBwZW5kKHNpbXBsZSgic3BhbiIsICBmaWVsZC5wcml2YWN5ICsgIiAiICsg");
    sb.append("cmVzdWx0Lm5hbWUgKyAiICIgKyBmaWVsZE5hbWUgKyAiID0gIikpOwogICAgICAgIGZpZWxkRG9tLmFw");
    sb.append("cGVuZChyZXN1bHQuZG9tKTsKICAgICAgICBjaGlsZHJlbi5hcHBlbmQoZmllbGREb20pOwogICAgICAg");
    sb.append("IGRlbHRhW2ZpZWxkTmFtZV0gPSByZXN1bHQudXBkYXRlOwogICAgICB9CiAgICAgIHJldHVybiB7CiAg");
    sb.append("ICAgICAgZG9tOiBvYmpfaG9sZGVyLAogICAgICAgIG5hbWU6IHR5cGUubmFtZSwKICAgICAgICB1cGRh");
    sb.append("dGU6ZGVsdGEKICAgICAgfTsKICAgIH0KICAgIHZhciB1bmtub3duID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICB1bmtub3duLmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KHR5cGUpOwog");
    sb.append("ICAgcmV0dXJuIHtkb206IHVua25vd24sIHVwZGF0ZTogZnVuY3Rpb24oKSB7fX07CiAgfTsKCiAgc2Vs");
    sb.append("Zi5mb3JtSWRHZW4gPSAwOwogIHZhciBuZXh0Rm9ybUlkID0gZnVuY3Rpb24oKSB7CiAgICBzZWxmLmZv");
    sb.append("cm1JZEdlbisrOwogICAgcmV0dXJuIHNlbGYuZm9ybUlkR2VuOwogIH07CiAgdmFyIGZpbGxPdXRGb3Jt");
    sb.append("Rm9yVHlwZSA9IGZ1bmN0aW9uKGRvbSwgbmFtZSwgdHlwZSwgdHlwZXMpIHsKICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX3JlZiIpIHsKICAgICAgZmlsbE91dEZvcm1Gb3JUeXBlKGRvbSwgbmFtZSwg");
    sb.append("dHlwZXNbdHlwZS5yZWZdLCB0eXBlcyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIGZvciAodmFyIGZpZWxkIGluIHR5cGUuZmll");
    sb.append("bGRzKSB7CiAgICAgICAgdmFyIGZpZWxkVHlwZSA9IHR5cGUuZmllbGRzW2ZpZWxkXS50eXBlOwogICAg");
    sb.append("ICAgIHZhciBmaWVsZEhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAg");
    sb.append("IGZpbGxPdXRGb3JtRm9yVHlwZShmaWVsZEhvbGRlciwgbmFtZSA9PSAiIiA/IGZpZWxkIDogKG5hbWUg");
    sb.append("KyAiLiIgKyBmaWVsZCksIGZpZWxkVHlwZSwgdHlwZXMpOwogICAgICAgIGRvbS5hcHBlbmQoZmllbGRI");
    sb.append("b2xkZXIpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX2FycmF5IikgewogICAgICAvLyBUT0RPCiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0g");
    sb.append("Im5hdGl2ZV9tYXliZSIpIHsKICAgICAgdmFyIG1heWJlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVs");
    sb.append("Iik7CiAgICAgIGxhYmVsLmlubmVySFRNTCA9ICJlbmFibGUgIiArIG5hbWU7CiAgICAgIHZhciBjaGVj");
    sb.append("a2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGNoZWNrYm94LnR5cGUg");
    sb.append("PSAiY2hlY2tib3giOwogICAgICBjaGVja2JveC5pZCA9IG5leHRGb3JtSWQoKTsKICAgICAgY2hlY2ti");
    sb.append("b3gubmFtZSA9ICIiOwogICAgICBsYWJlbC5odG1sRm9yID0gY2hlY2tib3guaWQ7CiAgICAgIHZhciBt");
    sb.append("YXliZVZhbHVlUmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBtYXli");
    sb.append("ZVZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGZpbGxPdXRGb3JtRm9y");
    sb.append("VHlwZShtYXliZVZhbHVlLCBuYW1lLCB0eXBlLnR5cGUsIHR5cGVzKTsKICAgICAgbWF5YmVIb2xkZXIu");
    sb.append("YXBwZW5kKGxhYmVsKTsKICAgICAgbWF5YmVIb2xkZXIuYXBwZW5kKGNoZWNrYm94KTsKICAgICAgbWF5");
    sb.append("YmVIb2xkZXIuYXBwZW5kKG1heWJlVmFsdWVSZWYpOwogICAgICBkb20uYXBwZW5kKG1heWJlSG9sZGVy");
    sb.append("KTsKICAgICAgY2hlY2tib3gub25jaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBudWtlKG1heWJl");
    sb.append("VmFsdWVSZWYpOwogICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7CiAgICAgICAgICBtYXliZVZh");
    sb.append("bHVlUmVmLmFwcGVuZChtYXliZVZhbHVlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybjsK");
    sb.append("ICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAibmF0aXZlX3ZhbHVlIikgewogICAgICB2YXIgbGFi");
    sb.append("ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwogICAgICB2YXIgaW5wdXQgPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoKICAgICAgaW5wdXQuaWQgPSAiZGVidWdnZXJfZm9y");
    sb.append("bV9pZF8iICsgbmV4dEZvcm1JZCgpOwogICAgICBsYWJlbC5pbm5lckhUTUwgPSBuYW1lOwogICAgICBp");
    sb.append("bnB1dC5uYW1lID0gbmFtZTsKICAgICAgaW5wdXQuc3R5bGUgPSBpbnB1dFN0eWxlOwogICAgICBpbnB1");
    sb.append("dC50eXBlID0gInRleHQiOwogICAgICBsYWJlbC5mb3JIdG1sID0gaW5wdXQuaWQ7CiAgICAgIGRvbS5h");
    sb.append("cHBlbmQobGFiZWwpOwogICAgICBkb20uYXBwZW5kKGlucHV0KTsKICAgICAgcmV0dXJuOwogICAgfQog");
    sb.append("ICAgZG9tLmlubmVySFRNTCA9IG5hbWUgKyAiLS0+IiArIEpTT04uc3RyaW5naWZ5KHR5cGUpOwogIH07");
    sb.append("CgogIHZhciBtYWtlQ2hhbm5lbERlYnVnZ2VyID0gZnVuY3Rpb24oY2hhbm5lbHMsIHR5cGVzLCBjb25u");
    sb.append("ZWN0aW9uKSB7CiAgICB2YXIgc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3Qi");
    sb.append("KTsKICAgIHNlbGVjdG9yLnN0eWxlID0gImJhY2tncm91bmQ6ICMzMzM7IGNvbG9yOiNmZmY7IjsKICAg");
    sb.append("IHZpZXdDaGFubmVscy5hcHBlbmQoc2VsZWN0b3IpOwogICAgdmFyIGZvcm1Ib2xkZXIgPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHZpZXdDaGFubmVscy5hcHBlbmQoZm9ybUhvbGRlcik7");
    sb.append("CiAgICB2YXIgY2hvb3NlID0gZnVuY3Rpb24oY2hhbm5lbCkgewogICAgICBudWtlKGZvcm1Ib2xkZXIp");
    sb.append("OwogICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTsKICAgICAgZm9y");
    sb.append("bUhvbGRlci5hcHBlbmQoZm9ybSk7CiAgICAgIHZhciB0eXBlID0gdHlwZXNbY2hhbm5lbHNbY2hhbm5l");
    sb.append("bF1dOwogICAgICBmaWxsT3V0Rm9ybUZvclR5cGUoZm9ybSwgIiIsIHR5cGUsIHR5cGVzKTsKCiAgICAg");
    sb.append("IHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgYnV0dG9u");
    sb.append("LnN0eWxlID0gYnV0dG9uU3R5bGU7CiAgICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQp");
    sb.append("IHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciBtZXNzYWdlID0gUnhI");
    sb.append("VE1MLkJ1aWxkRm9ybU9iamVjdChmb3JtKTsKICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlNlbmRp");
    sb.append("bmciOwogICAgICAgIGNvbnNvbGUubG9nKGNoYW5uZWwgKyAiOiIgKyBKU09OLnN0cmluZ2lmeShtZXNz");
    sb.append("YWdlKSk7CiAgICAgICAgY29ubmVjdGlvbi5zZW5kKGNoYW5uZWwsIG1lc3NhZ2UsIHsKICAgICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlN1Y2Nl");
    sb.append("c3MhIFNlbmQgQW5vdGhlciEiOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9u");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIltGYWlsZWQ6IiArIHJlYXNv");
    sb.append("biArICJdLCBUcnkgQWdhaW4iOwogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICB9OwogICAgICBi");
    sb.append("dXR0b24uaW5uZXJIVE1MID0gIlNlbmQiOwogICAgICBmb3JtLmFwcGVuZChidXR0b24pOwogICAgICAv");
    sb.append("LyBCdWlsZEZvcm1PYmplY3QKICAgIH07CiAgICB2YXIgZmlyc3QgPSBudWxsOwogICAgdmFyIGNoYW5u");
    sb.append("ZWxzU29ydGVkID0gW107CiAgICBmb3IgKHZhciBjaCBpbiBjaGFubmVscykgewogICAgICBjaGFubmVs");
    sb.append("c1NvcnRlZC5wdXNoKGNoKTsKICAgIH0KICAgIGNoYW5uZWxzU29ydGVkLnNvcnQoKTsKICAgIGZvciAo");
    sb.append("dmFyIGsgaW4gY2hhbm5lbHNTb3J0ZWQpIHsKICAgICAgdmFyIGNoID0gY2hhbm5lbHNTb3J0ZWRba107");
    sb.append("CiAgICAgIGlmIChmaXJzdCA9PSBudWxsKSB7CiAgICAgICAgZmlyc3QgPSBjaDsKICAgICAgfQogICAg");
    sb.append("ICB2YXIgbXNnVHlwZSA9IGNoYW5uZWxzW2NoXTsKICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQuaW5uZXJIVE1MID0gY2ggKyAiIDogIiArIG1zZ1R5");
    sb.append("cGU7CiAgICAgIG9wdC5sYWJlbCA9IGNoICsgIiA6ICIgKyBtc2dUeXBlOwogICAgICBvcHQudmFsdWUg");
    sb.append("PSBjaDsKICAgICAgc2VsZWN0b3IuYXBwZW5kKG9wdCk7CiAgICAgIHNlbGVjdG9yLm9uY2hhbmdlID0g");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICAgICAgY2hvb3NlKHNlbGVjdG9yLnZhbHVlKTsKICAgICAgfTsKICAgIH0K");
    sb.append("CiAgICBpZiAoZmlyc3QgIT0gbnVsbCkgewogICAgICBjaG9vc2UoZmlyc3QpOwogICAgfQogIH07Cgog");
    sb.append("IHZhciByZW5kZXIgPSBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tuYW1l");
    sb.append("XTsKICAgIGlmIChjby5yZW5kZXJlZCA9PSBjby5ib3VuZCkgewogICAgICByZXR1cm47CiAgICB9CiAg");
    sb.append("ICBjby5yZW5kZXJlZCA9IGNvLmJvdW5kOwogICAgY28uZGVidWdfdHJlZS5udWtlKCk7CiAgICBudWtl");
    sb.append("KHZpZXdKc29uKTsKICAgIG51a2Uodmlld0NoYW5uZWxzKTsKCiAgICB2YXIgaGFuZGxlciA9IHsKICAg");
    sb.append("ICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAvLyBoYW5kbGUgdGhlIGRhdGEg");
    sb.append("aW5zcGVjdG9yIHRhYgogICAgICAgIHZhciByZWZsZWN0aW9uID0gcGF5bG9hZC5yZWZsZWN0aW9uOwog");
    sb.append("ICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEocmVmbGVjdGlvbi50eXBlc1si");
    sb.append("X19Sb290Il0sIHJlZmxlY3Rpb24udHlwZXMpOwogICAgICAgIHZpZXdKc29uLmFwcGVuZChyZXN1bHQu");
    sb.append("ZG9tKTsKICAgICAgICBjby5kZWJ1Z190cmVlLnN1YnNjcmliZShyZXN1bHQudXBkYXRlKTsKICAgICAg");
    sb.append("ICAvLyBoYW5kbGUgdGhlIGNoYW5uZWxzIHRhYgogICAgICAgIG1ha2VDaGFubmVsRGVidWdnZXIocmVm");
    sb.append("bGVjdGlvbi5jaGFubmVscywgcmVmbGVjdGlvbi50eXBlcywgY28ucHRyKTsKICAgICAgfSwKICAgICAg");
    sb.append("ZmFpbHVyZTogZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0gIltG");
    sb.append("QUlMRUQgVE8gR0VUIFNDSEVNQToiICsgcmVhc29uICsgIl0iOwogICAgICAgIHZpZXdDaGFubmVscy5p");
    sb.append("bm5lckhUTUwgPSAiW0ZBSUxFRCBUTyBHRVQgU0NIRU1BOiIgKyByZWFzb24gKyAiXSI7CiAgICAgIH0K");
    sb.append("ICAgIH07CiAgICBpZiAoY28udmlhX2JpbGxpbmcpIHsKICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0g");
    sb.append("IkJpbGlsbmcgZG9jdW1lbnQgbm90IHN1cHBvcnRlZCI7CiAgICAgIHZpZXdDaGFubmVscy5pbm5lckhU");
    sb.append("TUwgPSB2aWV3SnNvbi5pbm5lckhUTUw7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChjby52aWFf");
    sb.append("ZG9tYWluKSB7CiAgICAgIGNvLnJhdy5Eb21haW5SZWZsZWN0KGNvLmlkZW50aXR5LCBjby5kb21haW4s");
    sb.append("IGhhbmRsZXIpOwogICAgfSBlbHNlIHsKICAgICAgY28ucmF3LlNwYWNlUmVmbGVjdChjby5pZGVudGl0");
    sb.append("eSwgY28uc3BhY2UsIGNvLmtleSwgaGFuZGxlcik7CiAgICB9CiAgfTsKCiAgdmFyIGNvbm5lY3Rpb25T");
    sb.append("ZWxlY3RvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwogIGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMzMzOyBjb2xvcjogI2ZmZiI7CiAgdmFyIHN3aXRjaF90");
    sb.append("b19jb25uZWN0aW9uID0gZnVuY3Rpb24obmFtZSkgewogICAgY3VycmVudCA9IG5hbWU7CiAgICBudWtl");
    sb.append("KHZpZXdDaGFubmVscyk7CiAgICBudWtlKHZpZXdKc29uKTsKICAgIGNvbm5lY3Rpb25zW25hbWVdLnJl");
    sb.append("bmRlcmVkID0gIiI7CiAgICByZW5kZXIobmFtZSk7CiAgfTsKICBjb25uZWN0aW9uU2VsZWN0b3Iub25j");
    sb.append("aGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgIHN3aXRjaF90b19jb25uZWN0aW9uKGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci52YWx1ZSk7CiAgfTsKICB2YXIgcmVmcmVzaF9zZWxlY3QgPSBmdW5jdGlvbigpIHsKICAgIG51");
    sb.append("a2UoY29ubmVjdGlvblNlbGVjdG9yKTsKICAgIGZvciAodmFyIG5hbWUgaW4gY29ubmVjdGlvbnMpIHsK");
    sb.append("ICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQu");
    sb.append("dmFsdWUgPSBuYW1lOwogICAgICBvcHQuaW5uZXJUZXh0ID0gbmFtZTsKICAgICAgY29ubmVjdGlvblNl");
    sb.append("bGVjdG9yLmFwcGVuZENoaWxkKG9wdCk7CiAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHsKICAgICAg");
    sb.append("ICBzd2l0Y2hfdG9fY29ubmVjdGlvbihuYW1lKTsKICAgICAgICBjb25uZWN0aW9uU2VsZWN0b3IudmFs");
    sb.append("dWUgPSBuYW1lOwogICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi50b2dnbGUgPSBmdW5jdGlvbigpIHsK");
    sb.append("ICAgIGlmIChzZWxmLnNob3duKSB7CiAgICAgIHRyeSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1v");
    sb.append("dmVDaGlsZChzZWxmLnJvb3QpOwogICAgICB9IGNhdGNoIChub3RwcmVzZW50KSB7CiAgICAgICAgc2Vs");
    sb.append("Zi5zaG93biA9ICFzZWxmLnNob3duOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHNlbGYucm9v");
    sb.append("dCk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgc2VsZi5yb290ID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGRlYnVnZ2VyUG9zaXRpb24gPSBsb2NhbFN0b3JhZ2Uu");
    sb.append("Z2V0SXRlbSgiQWRhbWFEZWJ1Z2dlclBvc2l0aW9uIik7CiAgICAgIGlmICghZGVidWdnZXJQb3NpdGlv");
    sb.append("biB8fCBkZWJ1Z2dlclBvc2l0aW9uID09ICIiKSB7CiAgICAgICAgZGVidWdnZXJQb3NpdGlvbiA9ICJ0");
    sb.append("b3A6MHB4OyBsZWZ0OjBweDt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiOwogICAgICB9CiAgICAgIHNl");
    sb.append("bGYucm9vdC5zdHlsZSA9ICJwb3NpdGlvbjphYnNvbHV0ZTsiICsgZGVidWdnZXJQb3NpdGlvbiArICI7");
    sb.append("YmFja2dyb3VuZDogIzAwMDtib3JkZXI6MXB4IHNvbGlkIHJlZDt6LWluZGV4OjEwMDA7IG92ZXJmbG93");
    sb.append("OnNjcm9sbCI7CiAgICAgIHZhciB0aXRsZUJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIp");
    sb.append("OwogICAgICB0aXRsZUJhci5pbm5lckhUTUwgPSAiQWRhbWEgRGVidWdnZXIiOwogICAgICB0aXRsZUJh");
    sb.append("ci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMjIyOyBjb2xvcjogIzBmMDsgY3Vyc29yOm1vdmU7IHdpZHRo");
    sb.append("OjEwMCU7IGZvbnQtdmFyaWFudDogc21hbGwtY2FwczsgcGFkZGluZzoycHg7IHRleHQtYWxpZ246IGNl");
    sb.append("bnRlcjsiOwogICAgICB0aXRsZUJhci5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAg");
    sb.append("ZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICB2YXIgcmVjdCA9IHNlbGYucm9vdC5nZXRCb3VuZGlu");
    sb.append("Z0NsaWVudFJlY3QoKTsKICAgICAgICB2YXIgc3RhcnQgPSB7eDogZXYuY2xpZW50WCwgeTogZXYuY2xp");
    sb.append("ZW50WX07CiAgICAgICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uKG54KSB7CiAgICAgICAgICBzZWxmLnJv");
    sb.append("b3Quc3R5bGUubGVmdCA9IChyZWN0LmxlZnQgKyBueC5jbGllbnRYIC0gc3RhcnQueCkgKyAicHgiOwog");
    sb.append("ICAgICAgICAgc2VsZi5yb290LnN0eWxlLnRvcCA9IChyZWN0LnRvcCArIG54LmNsaWVudFkgLSBzdGFy");
    sb.append("dC55KSArICJweCI7CiAgICAgICAgfTsKICAgICAgICB3aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlv");
    sb.append("bihueCkgewogICAgICAgICAgdXBkYXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVt");
    sb.append("KCJBZGFtYURlYnVnZ2VyUG9zaXRpb24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0");
    sb.append("OiIrc2VsZi5yb290LnN0eWxlLmxlZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAg");
    sb.append("ICB9OwogICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbihueCkgewogICAgICAgICAgdXBk");
    sb.append("YXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJBZGFtYURlYnVnZ2VyUG9zaXRp");
    sb.append("b24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0OiIrc2VsZi5yb290LnN0eWxlLmxl");
    sb.append("ZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAgICAgIHdpbmRvdy5vbm1vdXNlbW92");
    sb.append("ZSA9IGZ1bmN0aW9uKCkge307CiAgICAgICAgICB3aW5kb3cub25tb3VzZXVwID0gZnVuY3Rpb24oKSB7");
    sb.append("fTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzZWxmLnJvb3Qu");
    sb.append("YXBwZW5kQ2hpbGQodGl0bGVCYXIpOwogICAgICBzZWxmLnJvb3QuYXBwZW5kQ2hpbGQoY29ubmVjdGlv");
    sb.append("blNlbGVjdG9yKTsKICAgICAgc2VsZi5yb290LmFwcGVuZENoaWxkKHZpZXdKc29uKTsKICAgICAgc2Vs");
    sb.append("Zi5yb290LmFwcGVuZENoaWxkKHZpZXdDaGFubmVscyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5k");
    sb.append("Q2hpbGQoc2VsZi5yb290KTsKICAgIH0KICAgIHNlbGYuc2hvd24gPSAhc2VsZi5zaG93bjsKICB9OwoK");
    sb.append("ICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oY29ubmVjdGlvbikgewogICAgY29ubmVjdGlvbnNbY29u");
    sb.append("bmVjdGlvbi5uYW1lXSA9IGNvbm5lY3Rpb247CiAgICBjb25uZWN0aW9uLmRlYnVnX3RyZWUgPSBuZXcg");
    sb.append("QWRhbWFUcmVlKCk7CiAgICBjb25uZWN0aW9uLmRlYnVnZ2luZyA9ICI/IjsKICAgIHJlZnJlc2hfc2Vs");
    sb.append("ZWN0KCk7CiAgICByZXR1cm4gZnVuY3Rpb24ocGF5bG9hZCkgewogICAgICBpZiAoY29ubmVjdGlvbi5i");
    sb.append("b3VuZCAhPSBjb25uZWN0aW9uLmRlYnVnZ2luZyAmJiBjdXJyZW50ID09IGNvbm5lY3Rpb24ubmFtZSkg");
    sb.append("ewogICAgICAgIHJlbmRlcihjb25uZWN0aW9uLm5hbWUpOwogICAgICB9CiAgICAgIGlmICgiZGF0YSIg");
    sb.append("aW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgIGNvbm5lY3Rpb24uZGVidWdfdHJlZS51cGRhdGUocGF5");
    sb.append("bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgfQogICAgICAvKgogICAgICBpZiAoIm91dHN0YW5kaW5nIiBp");
    sb.append("biBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBjby5vbmRlY2lkZShwYXlsb2FkLmRlbHRhLm91dHN0");
    sb.append("YW5kaW5nKTsKICAgICAgfQogICAgICBpZiAoJ3ZpZXdzdGF0ZScgaW4gcGF5bG9hZC5kZWx0YSkgewov");
    sb.append("LyAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLnZpZXdzdGF0ZSk7CiAg");
    sb.append("ICAgIH0KICAgICAgaWYgKCdnb3RvJyBpbiBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBzZWxmLmdv");
    sb.append("dG8ocGF5bG9hZC5kZWx0YS5nb3RvKTsKICAgICAgfQogICAgICAqLwogICAgfQogIH07CiAgcmV0dXJu");
    sb.append("IHNlbGY7Cn0pKCk7");
    return sb.toString();
  }
  public static final String RXHTML = new String(Base64.getDecoder().decode(make_rxhtml()), StandardCharsets.UTF_8);
  private static String make_rxhtml() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIFJ4SFRNTCA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB7fTsKCiAgdmFyIHRlbXBsYXRl");
    sb.append("cyA9IHt9OwogIHZhciByb3V0ZXIgPSB7fTsKCiAgdmFyIGRlZmF1bHRFbmRwb2ludCA9IC8qRU5EUE9J");
    sb.append("TlQ9WyovQWRhbWEuUHJvZHVjdGlvbi8qXSovOwoKICAvLyBvdmVycmlkZSBlbmRwb2ludCBiYXNlZCBv");
    sb.append("biB0aGUgcHJlc2VuY2Ugb2YgX19tZF9lbmRwb2ludAogIHZhciBtZE92ZXJyaWRlRW5kcG9pbnQgPSBs");
    sb.append("b2NhbFN0b3JhZ2UuZ2V0SXRlbSgibWRlYyIpOyAvLyBtdWx0aSBkb21haW4gZW5kcG9pbnQgY2hvaWNl");
    sb.append("CiAgaWYgKG1kT3ZlcnJpZGVFbmRwb2ludCAhPSBudWxsICYmICJiZXRhIiA9PSBtZE92ZXJyaWRlRW5k");
    sb.append("cG9pbnQpIHsKICAgIGRlZmF1bHRFbmRwb2ludCA9IEFkYW1hLkJldGE7CiAgfQoKICAvLyBUaGlzIHN0");
    sb.append("cmFuZ2UgZXNjYXBpbmcgaXMgZm9yIGRldmVsb3BlciBtb2RlIHRvIHByb3h5IHRvIGxvY2FsaG9zdC4K");
    sb.append("ICB2YXIgY29ubmVjdGlvbiA9IG5ldyBBZGFtYS5Db25uZWN0aW9uKGRlZmF1bHRFbmRwb2ludCk7CiAg");
    sb.append("dmFyIGNvbm5lY3Rpb25zID0ge307CiAgc2VsZi5jb25uZWN0aW9uID0gY29ubmVjdGlvbjsKICBzZWxm");
    sb.append("LmJ1bXAgPSBmdW5jdGlvbihtKSB7CiAgICBjb25uZWN0aW9uLmJ1bXAobSk7CiAgfTsKCiAgdmFyIGNv");
    sb.append("bm5lY3Rpb25Nb25pdG9yRG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgY29ubmVj");
    sb.append("dGlvbi5vbnN0YXR1c2NoYW5nZSA9IGZ1bmN0aW9uIChzdGF0dXMpIHsKICAgIHZhciBpY29uID0gZnVu");
    sb.append("Y3Rpb24gKGNvbG9yKSB7IHJldHVybiAiPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAv");
    sb.append("c3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41");
    sb.append("XCIgc3Ryb2tlPVwiIiArIGNvbG9yICsgIlwiIHN0eWxlPVwid2lkdGg6MTZweDsgaGVpZ2h0OjE2cHhc");
    sb.append("Ij48cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBk");
    sb.append("PVwiTTguMjg4IDE1LjAzOGE1LjI1IDUuMjUgMCAwMTcuNDI0IDBNNS4xMDYgMTEuODU2YzMuODA3LTMu");
    sb.append("ODA4IDkuOTgtMy44MDggMTMuNzg4IDBNMS45MjQgOC42NzRjNS41NjUtNS41NjUgMTQuNTg3LTUuNTY1");
    sb.append("IDIwLjE1MiAwTTEyLjUzIDE4LjIybC0uNTMuNTMtLjUzLS41M2EuNzUuNzUgMCAwMTEuMDYgMHpcIiAv");
    sb.append("Pjwvc3ZnPlxuIjsgfTsKICAgIGlmICghc3RhdHVzKSB7CiAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9t");
    sb.append("LnRpdGxlID0gImRpc2Nvbm5lY3RlZCI7CiAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmlubmVySFRN");
    sb.append("TCA9IGljb24oInJlZCIpOwogICAgICBjb25uZWN0aW9uLm9ucGluZyA9IGZ1bmN0aW9uIChfMSwgXzIp");
    sb.append("IHsgfTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbm5lY3Rpb24ub25waW5nID0gZnVuY3Rpb24gKF8sIGxh");
    sb.append("dGVuY3kpIHsKICAgICAgICBjb25uZWN0aW9uTW9uaXRvckRvbS50aXRsZSA9ICJjb25uZWN0ZWQ7IGxh");
    sb.append("dGVuY3k9IiArIGxhdGVuY3kgKyAibXMiOwogICAgICAgIGlmIChsYXRlbmN5ID49IDEwMCkgewogICAg");
    sb.append("ICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20uaW5uZXJIVE1MID0gaWNvbigib3JhbmdlIik7CiAgICAg");
    sb.append("ICAgfSBlbHNlIHsKICAgICAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmlubmVySFRNTCA9IGljb24o");
    sb.append("ImdyZWVuIik7CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH07CiAgY29ubmVjdGlvbk1vbml0b3JE");
    sb.append("b20uc3R5bGUgPSAicG9zaXRpb246Zml4ZWQ7IGJvdHRvbTowcHg7IHJpZ2h0OjBweCI7CiAgY29ubmVj");
    sb.append("dGlvbk1vbml0b3JEb20uY2xhc3NOYW1lID0gImFkYW1hLWRlYnVnZ2VyIgogIGlmIChBZGFtYS5EZWJ1");
    sb.append("Z2dlcikgewogICAgY29ubmVjdGlvbk1vbml0b3JEb20ub25jbGljayA9IEFkYW1hLkRlYnVnZ2VyLnRv");
    sb.append("Z2dsZTsKICB9CiAgY29ubmVjdGlvbi5zdGFydCgpOwogIGNvbm5lY3Rpb24ua2VlcGFsaXZlKCk7Cgog");
    sb.append("IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICB2YXIg");
    sb.append("cGF5bG9hZCA9IHt9OwogICAgcGF5bG9hZC5tZXNzYWdlID0gZXZlbnQubWVzc2FnZTsKICAgIHBheWxv");
    sb.append("YWQuZmlsZW5hbWUgPSBldmVudC5maWxlbmFtZTsKICAgIHBheWxvYWQubGluZW5vID0gZXZlbnQubGlu");
    sb.append("ZW5vOwogICAgcGF5bG9hZC5jb2xubyA9IGV2ZW50LmNvbG5vOwogICAgcGF5bG9hZC5maWxlbmFtZSA9");
    sb.append("IGV2ZW50LmZpbGVuYW1lOwogICAgY29ubmVjdGlvbi5sb2coIndpbmRvdy5lcnJvciIsIEpTT04uc3Ry");
    sb.append("aW5naWZ5KHBheWxvYWQpKTsKICAgIGNvbnNvbGUuZXJyb3IoIltlcnJvcl0iICsgZXZlbnQubWVzc2Fn");
    sb.append("ZSk7CiAgfSk7CgogIGNvbm5lY3Rpb24uYnVtcCgicnhodG1sIik7CgogIHZhciByb290UmVwbGFjZSA9");
    sb.append("ICIvIjsKICB2YXIgZml4UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7CiAgICByZXR1cm4gcGF0aDsKICB9");
    sb.append("OwogIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUuZW5kc1dpdGgoIi5hZGFtYS1wbGF0Zm9ybS5j");
    sb.append("b20iKSAmJiAhd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmVuZHNXaXRoKCJpZGUuYWRhbWEtcGxhdGZv");
    sb.append("cm0uY29tIikpIHsKICAgIC8vIHRoaXMgZXhpc3RzIGlmIHNvbWVvbmUgaXMgdHJ5aW5nIHRvIHVzZSB0");
    sb.append("aGUgZ2xvYmFsIGRvbWFpbiBmb3IgdGhlaXIgc2l0ZQogICAgdmFyIHBhcnRzID0gd2luZG93LmxvY2F0");
    sb.append("aW9uLnBhdGhuYW1lLnNwbGl0KCIvIik7CiAgICByb290UmVwbGFjZSA9IFtwYXJ0c1swXSwgcGFydHNb");
    sb.append("MV0sIHBhcnRzWzJdLCAiIl0uam9pbigiLyIpOwogICAgdmFyIG9mZnNldCA9IHBhcnRzWzBdLmxlbmd0");
    sb.append("aCArIHBhcnRzWzFdLmxlbmd0aCArIHBhcnRzWzJdLmxlbmd0aCArIDI7CiAgICBmaXhQYXRoID0gZnVu");
    sb.append("Y3Rpb24gKHBhdGgpIHsKICAgICAgcmV0dXJuIHBhdGguc3Vic3RyaW5nKG9mZnNldCk7CiAgICB9Owog");
    sb.append("IH0KCiAgdmFyIGZpeEhyZWYgPSBmdW5jdGlvbiAoaHJlZikgewogICAgaWYgKCFocmVmKSB7CiAgICAg");
    sb.append("IHJldHVybiAiIyI7CiAgICB9CiAgICBpZiAoaHJlZi5zdGFydHNXaXRoKCIvIikpIHsKICAgICAgcmV0");
    sb.append("dXJuIHJvb3RSZXBsYWNlICsgaHJlZi5zdWJzdHJpbmcoMSk7CiAgICB9CiAgICByZXR1cm4gaHJlZjsK");
    sb.append("ICB9OwoKICB2YXIgZ2V0X2Nvbm5lY3Rpb25fb2JqID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgIGlmIChu");
    sb.append("YW1lIGluIGNvbm5lY3Rpb25zKSB7CiAgICAgIHJldHVybiBjb25uZWN0aW9uc1tuYW1lXTsKICAgIH0g");
    sb.append("ZWxzZSB7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICBwdHI6IG51");
    sb.append("bGwsCiAgICAgICAgdHJlZTogbmV3IEFkYW1hVHJlZSgpLAogICAgICAgIG91dHN0YW5kaW5nOiB7fSwK");
    sb.append("ICAgICAgICBkZWNpc2lvbnM6IHt9LAogICAgICAgIGNob2ljZV9zdWJzOiB7fSwKICAgICAgICByZXNl");
    sb.append("dHM6IHt9LAogICAgICAgIGNvbm5lY3Rpb25fZXZlbnRzOiB7fSwKICAgICAgICBzeW5jX2V2ZW50czog");
    sb.append("e30sCiAgICAgICAgaWQ6IDAsCiAgICAgICAgY29ubmVjdGlvbl9zdGF0ZTogZmFsc2UsCiAgICAgICAg");
    sb.append("Y2hvaWNlczoge30sCiAgICAgICAgYm91bmQ6ICIiLAogICAgICAgIHZpZXdzdGF0ZV9zZW50OiB0cnVl");
    sb.append("LAogICAgICAgIHZpZXdzdGF0ZV9jbG9uZTogIiIsCiAgICAgICAgaGFzX2ZpbHRlcjogZmFsc2UsCiAg");
    sb.append("ICAgICAgc3luY2VkOiBmYWxzZSwKICAgICAgICBmaWx0ZXI6IHt9LAogICAgICAgIHZzc2VxOiAwLAog");
    sb.append("ICAgICAgIGRlYnVnZ2VyOiBmdW5jdGlvbiAoZGVsdGEpIHsgfSwKICAgICAgICByYXc6IGNvbm5lY3Rp");
    sb.append("b24KICAgICAgfTsKICAgICAgb2JqLm51a2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5jb25u");
    sb.append("ZWN0aW9uX2V2ZW50cyA9IHt9OwogICAgICAgIHRoaXMuc3luY19ldmVudHMgPSB7fTsKICAgICAgICB0");
    sb.append("aGlzLmNob2ljZV9zdWJzID0ge307CiAgICAgIH0uYmluZChvYmopOwogICAgICBpZiAoQWRhbWEuRGVi");
    sb.append("dWdnZXIpIHsKICAgICAgICBvYmouZGVidWdnZXIgPSBBZGFtYS5EZWJ1Z2dlci5yZWdpc3RlcihvYmop");
    sb.append("OwogICAgICB9CiAgICAgIG9iai5zeW5jID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBzeW5jZWQg");
    sb.append("PSB0aGlzLmNvbm5lY3Rpb25fc3RhdGUgJiYgdGhpcy52aWV3c3RhdGVfc2VudDsKICAgICAgICBpZiAo");
    sb.append("dGhpcy5zeW5jZWQgPT0gc3luY2VkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAg");
    sb.append("IHRoaXMuc3luY2VkID0gc3luY2VkOwogICAgICAgIHZhciBheGUgPSBbXTsKICAgICAgICBmb3IgKHZh");
    sb.append("ciBzdWIgaW4gb2JqLnN5bmNfZXZlbnRzKSB7CiAgICAgICAgICBpZiAoIShvYmouc3luY19ldmVudHNb");
    sb.append("c3ViXShzeW5jZWQpKSkgewogICAgICAgICAgICBheGUucHVzaChzdWIpOwogICAgICAgICAgfQogICAg");
    sb.append("ICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAg");
    sb.append("ICAgZGVsZXRlIG9iai5zeW5jX2V2ZW50c1theGVba11dOwogICAgICAgIH0KICAgICAgfS5iaW5kKG9i");
    sb.append("aik7CiAgICAgIG9iai5zdWJzY3JpYmVfc3luYyA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAg");
    sb.append("IHZhciBzID0gIi18IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLnN5bmNfZXZlbnRzW3NdID0gY2Fs");
    sb.append("bGJhY2s7CiAgICAgICAgY2FsbGJhY2sodGhpcy5zeW5jZWQpOwogICAgICAgIHJldHVybiBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5zeW5jX2V2ZW50c1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH07CiAgICAgIG9iai5zZXRfY29ubmVjdGVkID0gZnVuY3Rpb24gKGNzKSB7CiAg");
    sb.append("ICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbl9zdGF0ZSA9PSBjcykgewogICAgICAgICAgcmV0dXJuOwog");
    sb.append("ICAgICAgIH0KICAgICAgICB0aGlzLmNvbm5lY3Rpb25fc3RhdGUgPSBjczsKICAgICAgICB2YXIgYXhl");
    sb.append("ID0gW107CiAgICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5jb25uZWN0aW9uX2V2ZW50cykgewogICAg");
    sb.append("ICAgICAgaWYgKCEob2JqLmNvbm5lY3Rpb25fZXZlbnRzW3N1Yl0oY3MpKSkgewogICAgICAgICAgICBh");
    sb.append("eGUucHVzaChzdWIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAgZGVsZXRlIG9iai5jb25uZWN0aW9uX2V2ZW50");
    sb.append("c1theGVba11dOwogICAgICAgIH0KICAgICAgICB0aGlzLnN5bmMoKTsKICAgICAgfS5iaW5kKG9iaik7");
    sb.append("CiAgICAgIG9iai5jb25uZWN0ZWQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9");
    sb.append("ICItfCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhpcy5jb25uZWN0aW9uX2V2ZW50c1tzXSA9IGNhbGxi");
    sb.append("YWNrOwogICAgICAgIGNhbGxiYWNrKHRoaXMuY29ubmVjdGlvbl9zdGF0ZSk7CiAgICAgICAgcmV0dXJu");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmNvbm5lY3Rpb25fZXZlbnRzW3NdOwog");
    sb.append("ICAgICAgIH0uYmluZCh0aGlzKTsKICAgICAgfS5iaW5kKG9iaik7CiAgICAgIG9iai5zdWJzY3JpYmVf");
    sb.append("YW55ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSAiLXwiICsgdGhpcy5pZCsr");
    sb.append("OwogICAgICAgIHRoaXMuZGVjaXNpb25zW3NdID0gY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlY2lzaW9uc1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vic2NyaWJlID0gZnVuY3Rpb24gKGNo");
    sb.append("YW5uZWwsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSBjaGFubmVsICsgInwiICsgdGhpcy5pZCsr");
    sb.append("OwogICAgICAgIHRoaXMuZGVjaXNpb25zW3NdID0gY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlY2lzaW9uc1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vic2NyaWJlX3Jlc2V0ID0gZnVuY3Rp");
    sb.append("b24gKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIGRyID0gInJlc2V0fCIgKyB0aGlzLmlkKys7CiAgICAg");
    sb.append("ICAgdGhpcy5yZXNldHNbZHJdID0gY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlc2V0c1tkcl07CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAg");
    sb.append("ICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1YnNjcmliZV9jaG9pY2UgPSBmdW5jdGlvbiAoY2hhbm5l");
    sb.append("bCwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9IGNoYW5uZWwgKyAifCIgKyB0aGlzLmlkKys7CiAg");
    sb.append("ICAgICAgdGhpcy5jaG9pY2Vfc3Vic1tzXSA9IGNhbGxiYWNrOwogICAgICAgIHJldHVybiBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5jaG9pY2Vfc3Vic1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmoub25jaG9pY2VzID0gZnVuY3Rpb24gKGNo");
    sb.append("YW5uZWwsIGNob2ljZSkgewogICAgICAgIHZhciBheGUgPSBbXTsKICAgICAgICBmb3IgKHZhciBzdWIg");
    sb.append("aW4gb2JqLmNob2ljZV9zdWJzKSB7CiAgICAgICAgICBpZiAoc3ViLnN0YXJ0c1dpdGgoY2hhbm5lbCAr");
    sb.append("ICJ8IikpIHsKICAgICAgICAgICAgaWYgKCFvYmouY2hvaWNlX3N1YnNbc3ViXShjaG9pY2UpKSB7CiAg");
    sb.append("ICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAg");
    sb.append("IH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAg");
    sb.append("ZGVsZXRlIG9iai5jaG9pY2Vfc3Vic1theGVba11dOwogICAgICAgIH0KICAgICAgfTsKICAgICAgb2Jq");
    sb.append("Lm9uZGVjaWRlID0gZnVuY3Rpb24gKG91dHN0YW5kaW5nKSB7CiAgICAgICAgdmFyIGF4ZVJlc2V0ID0g");
    sb.append("W107CiAgICAgICAgZm9yICh2YXIgZHIgaW4gb2JqLnJlc2V0cykgewogICAgICAgICAgdmFyIHIgPSBv");
    sb.append("YmoucmVzZXRzW2RyXTsKICAgICAgICAgIGlmICghKHIoKSkpIHsKICAgICAgICAgICAgYXhlUmVzZXQu");
    sb.append("cHVzaChkcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwg");
    sb.append("YXhlUmVzZXQubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0ZSBvYmoucmVzZXRzW2F4ZVJlc2V0");
    sb.append("W2tdXTsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgY2ggaW4gb2JqLm91dHN0YW5kaW5nKSB7CiAg");
    sb.append("ICAgICAgICBvYmoub3V0c3RhbmRpbmdbY2hdID0geyBvcHRpb25zOiBbXSB9OwogICAgICAgIH0KICAg");
    sb.append("ICAgICB2YXIgbiA9IG91dHN0YW5kaW5nLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8");
    sb.append("IG47IGsrKykgewogICAgICAgICAgdmFyIG8gPSBvdXRzdGFuZGluZ1trXTsKICAgICAgICAgIG9iai5v");
    sb.append("dXRzdGFuZGluZ1tvLmNoYW5uZWxdID0gbzsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgY2ggaW4g");
    sb.append("b2JqLm91dHN0YW5kaW5nKSB7CiAgICAgICAgICB2YXIgb3V0ID0gb2JqLm91dHN0YW5kaW5nW2NoXTsK");
    sb.append("ICAgICAgICAgIHZhciBheGUgPSBbXTsKICAgICAgICAgIGZvciAodmFyIHN1YiBpbiBvYmouZGVjaXNp");
    sb.append("b25zKSB7CiAgICAgICAgICAgIGlmIChzdWIuc3RhcnRzV2l0aChjaCArICJ8IikgfHwgc3ViLnN0YXJ0");
    sb.append("c1dpdGgoIi18IikpIHsKICAgICAgICAgICAgICBpZiAoIW9iai5kZWNpc2lvbnNbc3ViXShvdXQsIGNo");
    sb.append("KSkgewogICAgICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAgICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXhlLmxlbmd0aDsg");
    sb.append("aysrKSB7CiAgICAgICAgICAgIGRlbGV0ZSBvYmouZGVjaXNpb25zW2F4ZVtrXV07CiAgICAgICAgICB9");
    sb.append("CiAgICAgICAgfQogICAgICB9OwogICAgICBjb25uZWN0aW9uc1tuYW1lXSA9IG9iajsKICAgICAgcmV0");
    sb.append("dXJuIG9iajsKICAgIH0KICB9OwogIHNlbGYuZ2V0Q29ubmVjdGlvbkJ5TmFtZSA9IGdldF9jb25uZWN0");
    sb.append("aW9uX29iajsKCiAgc2VsZi5tYWtlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIG5ldyBBZGFtYVRy");
    sb.append("ZWUoKTsKICB9OwoKICAvLyBIRUxQRVIgfCBzdWJzY3JpYmUgdGhlIGdpdmVuICdzdWInIHRvIGNoYW5n");
    sb.append("ZXMgd2l0aGluIHN0YXRlIGZvciB0aGUgZ2l2ZW4gZmllbGQgbmFtZWQgbmFtZQogIHZhciBzdWJzY3Jp");
    sb.append("YmUgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIHN1YikgewogICAgdmFyIHNzID0gc2VsZi5wSShzdGF0");
    sb.append("ZSwgbmFtZSk7CiAgICB2YXIgcyA9IHNzW3NzLmN1cnJlbnRdOwogICAgaWYgKHMgPT0gbnVsbCkgewog");
    sb.append("ICAgICBjb25zb2xlLmVycm9yKHNzLmN1cnJlbnQgKyAiIGlzIG5vdCBhdmFpbGFibGU7IHVuYWJsZSB0");
    sb.append("byBzdWJzY3JpYmUuIik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICgiQGUiIGluIHMuZGVsdGEp");
    sb.append("IHsKICAgICAgcy5kZWx0YVsiQGUiXS5wdXNoKHN1Yik7CiAgICB9IGVsc2UgewogICAgICBzLmRlbHRh");
    sb.append("WyJAZSJdID0gW3N1Yl07CiAgICB9CiAgfTsKICBzZWxmLnN1YnNjcmliZSA9IHN1YnNjcmliZTsKCiAg");
    sb.append("Ly8gSEVMUEVSIHwgY3JlYXRlIGZyZXNoIHN0YXRlCiAgdmFyIGZyZXNoID0gZnVuY3Rpb24gKHdoZXJl");
    sb.append("KSB7CiAgICByZXR1cm4gewogICAgICB0cmVlOiBuZXcgQWRhbWFUcmVlKCksCiAgICAgIGRlbHRhOiB7");
    sb.append("fSwKICAgICAgcGFyZW50OiBudWxsLAogICAgICBwYXRoOiBudWxsLAogICAgICB3aGVyZTogd2hlcmUK");
    sb.append("ICAgIH07CiAgfTsKICBzZWxmLmZyZXNoID0gZnJlc2g7CgogIC8vIEhFTFBFUjogcmVtb3ZlIHBvdGVu");
    sb.append("dGlhbGx5IHNlbnNpdGl2ZSBpbmZvcm1hdGlvbiBmcm9tIGFuIG9iamVjdAogIHZhciBzYWZlX2ZpbHRl");
    sb.append("ciA9IGZ1bmN0aW9uKG8pIHsKICAgIGlmICgncGFzc3dvcmQnIGluIG8pIHsKICAgICAgZGVsZXRlIG9b");
    sb.append("J3Bhc3N3b3JkJ107CiAgICB9CiAgICBpZiAoJ29uZV90aW1lX3Bhc3N3b3JkJyBpbiBvKSB7CiAgICAg");
    sb.append("IGRlbGV0ZSBvWydvbmVfdGltZV9wYXNzd29yZCddOwogICAgfQogICAgcmV0dXJuIG87CiAgfQoKICAv");
    sb.append("LyBIRUxQRVIgfCBjcmVhdGUgYSBuZXcgZGVsdGEgY29weSBmcm9tIHRoZSBnaXZlbiBzcGVjaWZpYyBz");
    sb.append("dGF0ZSAoaS5lLiBlaXRoZXIgZGF0YSBvciB2aWV3KQogIHZhciBuZXdfZGVsdGFfY29weSA9IGZ1bmN0");
    sb.append("aW9uIChzcykgewogICAgaWYgKHNzID09IG51bGwpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAg");
    sb.append("ICB2YXIgcGFyZW50ID0gbnVsbDsKICAgIGlmIChzcy5wYXJlbnQgIT0gbnVsbCkgewogICAgICBwYXJl");
    sb.append("bnQgPSBuZXdfZGVsdGFfY29weShzcy5wYXJlbnQpOwogICAgfQogICAgdmFyIG5ld19kZWx0YSA9IHt9");
    sb.append("OwogICAgaWYgKHBhcmVudCAhPSBudWxsKSB7CiAgICAgIHBhcmVudC5kZWx0YVtzcy5wYXRoXSA9IG5l");
    sb.append("d19kZWx0YTsKICAgIH0KICAgIHJldHVybiB7IHRyZWU6IHNzLnRyZWUsIHBhcmVudDogcGFyZW50LCBk");
    sb.append("ZWx0YTogbmV3X2RlbHRhLCBwYXRoOiBzcy5wYXRoIH07CiAgfTsKICBzZWxmLm1ha2VEZWx0YUNvcHkg");
    sb.append("PSBuZXdfZGVsdGFfY29weTsKCiAgLy8gSEVMUEVSIHwgY29uc3RydWN0IGEgcGF0aCB0bwogIHZhciBw");
    sb.append("YXRoX3RvID0gZnVuY3Rpb24gKHNzLCBvYmopIHsKICAgIGlmIChzcy5wYXJlbnQgIT0gbnVsbCkgewog");
    sb.append("ICAgICB2YXIgcGVlbCA9IHt9OwogICAgICBwZWVsW3NzLnBhdGhdID0gb2JqOwogICAgICByZXR1cm4g");
    sb.append("cGF0aF90byhzcy5wYXJlbnQsIHBlZWwpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAg");
    sb.append("IH0KICB9OwogIHNlbGYucGF0aFRvID0gcGF0aF90bzsKCiAgLy8gSEVMUEVSIHwgZ2V0IHRoZSByb290");
    sb.append("IG9mIHRoZSBzcGVjaWZpYyBzdGF0ZSAoaS5lLiBlaXRoZXIgdGhlIGRhdGEncyByb290IG9yIHRoZSB2");
    sb.append("aWV3J3Mgcm9vdCkKICB2YXIgcm9vdF9vZiA9IGZ1bmN0aW9uIChzcykgewogICAgdmFyIHggPSBzczsK");
    sb.append("ICAgIHdoaWxlICh4LnBhcmVudCAhPSBudWxsKSB7CiAgICAgIHggPSB4LnBhcmVudDsKICAgIH0KICAg");
    sb.append("IHJldHVybiB4OwogIH07CiAgc2VsZi5yb290T2YgPSByb290X29mOwoKICAvLyBIRUxQRVIgfCByZW1v");
    sb.append("dmUgYWxsIHRoZSBjaGlsZHJlbiBmcm9tIHRoZSBnaXZlbiBET00gbm9kZQogIHZhciBudWtlID0gZnVu");
    sb.append("Y3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAgd2hpbGUg");
    sb.append("KGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0gcGFyZW50");
    sb.append("Lmxhc3RDaGlsZDsKICAgIH0KICB9OwogIHNlbGYubnVrZSA9IG51a2U7CgogIC8vIEhFTFBFUjogZGVi");
    sb.append("b3VuY2UgdGhlIGdpdmVuIGZ1bmN0aW9uYWwgd2hlbiByYXBpZCBmdW5jdGlvbiBzcHJlYWQgaXMgZXhw");
    sb.append("ZWN0ZWQKICB2YXIgZGVib3VuY2UgPSBmdW5jdGlvbiAobXMsIGZvbykgewogICAgdmFyIHN0YXR1cyA9");
    sb.append("IHsgaW5mbGlnaHQ6IGZhbHNlLCB0aW1lb3V0OiBudWxsIH07CiAgICBzdGF0dXMuaW5mbGlnaHQgPSBm");
    sb.append("YWxzZTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghc3RhdHVzLmluZmxpZ2h0KSB7");
    sb.append("CiAgICAgICAgc3RhdHVzLmluZmxpZ2h0ID0gdHJ1ZTsKICAgICAgICBzdGF0dXMudGltZW91dCA9IHdp");
    sb.append("bmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHN0YXR1cy5pbmZsaWdodCA9IGZh");
    sb.append("bHNlOwogICAgICAgICAgc3RhdHVzLnRpbWVvdXQgPSBudWxsOwogICAgICAgICAgZm9vKCk7CiAgICAg");
    sb.append("ICAgfSwgbXMgLyogbXMgKi8pOyAvLyBkZWJvdW5jZSB0aGUgcGFyYW1ldGVycwogICAgICB9CiAgICB9");
    sb.append("OwogIH07CiAgc2VsZi5kZWJvdW5jZSA9IGRlYm91bmNlOwoKICB2YXIgZGVsYXkgPSBmdW5jdGlvbiht");
    sb.append("cywgZm9vKSB7CiAgICB2YXIgc3RhdHVzID0geyBhdmFpbDogdHJ1ZSwgYWdhaW46ZmFsc2UsIHRpbWVv");
    sb.append("dXQ6IG51bGwgfTsKICAgIHN0YXR1cy5nbyA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoc3RhdHVzLmF2");
    sb.append("YWlsKSB7CiAgICAgICAgc3RhdHVzLmF2YWlsID0gZmFsc2U7CiAgICAgICAgc3RhdHVzLnRpbWVvdXQg");
    sb.append("PSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHN0YXR1cy5hdmFpbCA9IHRy");
    sb.append("dWU7CiAgICAgICAgICBpZiAoc3RhdHVzLmFnYWluKSB7CiAgICAgICAgICAgIHN0YXR1cy5hZ2FpbiA9");
    sb.append("IGZhbHNlOwogICAgICAgICAgICBzdGF0dXMuZ28oKTsKICAgICAgICAgIH0KICAgICAgICB9LCBtcyk7");
    sb.append("CiAgICAgICAgZm9vKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdHVzLmFnYWluID0gdHJ1ZTsK");
    sb.append("ICAgICAgfQogICAgfTsKICAgIHJldHVybiBzdGF0dXMuZ287CiAgfTsKICBzZWxmLmRlbGF5ID0gZGVs");
    sb.append("YXk7CgogIC8vIEhFTFBFUiB8IHByZXBhcmUgYSBmcmVlIHVuc3Vic2NyaWJlIG9iamVjdAogIHZhciBt");
    sb.append("YWtlX3Vuc3ViID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgX19kYXRhOiBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgIH0sIF9fdmlldzogZnVuY3Rpb24gKCkgewogICAgICB9CiAgICB9OwogIH07Cgog");
    sb.append("IC8vIEhFTFBFUiB8IGF1Z21lbnQgYW4gZXhpc3Rpbmcgb2JqZWN0IHdpdGggdW5zdWJzY3JpYmUgZGF0");
    sb.append("YQogIHZhciBhZGRfdW5zdWIgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBvYmouX19kYXRhID0gZnVuY3Rp");
    sb.append("b24gKCkgewogICAgfTsKICAgIG9iai5fX3ZpZXcgPSBmdW5jdGlvbiAoKSB7CiAgICB9OwogIH07Cgog");
    sb.append("IC8vIEhFTFBFUiB8IGZpcmUgdGhlIHVuc3Vic2NyaWJlIGNhbGxzIHdpdGhpbiBhbiBvYmplY3QKICB2");
    sb.append("YXIgZmlyZV91bnN1YiA9IGZ1bmN0aW9uICh1bnN1YikgewogICAgdW5zdWIuX19kYXRhKCk7CiAgICB1");
    sb.append("bnN1Yi5fX3ZpZXcoKTsKICB9OwoKICB2YXIgaXNFbXB0eURlbHRhID0gZnVuY3Rpb24oZGVsdGEpIHsK");
    sb.append("ICAgIGlmICh0eXBlb2YoZGVsdGEpID09ICJmdW5jdGlvbiIpIHsKICAgICAgcmV0dXJuIGZhbHNlOwog");
    sb.append("ICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGRlbHRhKSkgewogICAgICBmb3IgKHZhciBqID0gMDsg");
    sb.append("aiA8IGRlbHRhLmxlbmd0aDsgaisrKSB7CiAgICAgICAgaWYgKCFpc0VtcHR5RGVsdGEoZGVsdGFbal0p");
    sb.append("KSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYg");
    sb.append("KHR5cGVvZihkZWx0YSkgPT0gIm9iamVjdCIpIHsKICAgICAgZm9yICh2YXIgayBpbiBkZWx0YSkgewog");
    sb.append("ICAgICAgIGlmICghaXNFbXB0eURlbHRhKGRlbHRhW2tdKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNl");
    sb.append("OwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvLyBIRUxQRVIg");
    sb.append("fCBzdWJzY3JpYmUgdG8gc3RhdGUgYW5kIHBvcHVsYXRlIHVuc3Vic2NyaWJlIG9iamVjdAogIHZhciBz");
    sb.append("dWJzY3JpYmVfc3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUsIHVuc3ViKSB7CiAgICAvLyAgJiYgIWlzRW1w");
    sb.append("dHlEZWx0YShzdGF0ZS5kYXRhKQogICAgdW5zdWIuX19kYXRhID0gZnVuY3Rpb24gKCkgewogICAgfTsK");
    sb.append("ICAgIHVuc3ViLl9fdmlldyA9IGZ1bmN0aW9uICgpIHsKICAgIH07CgogICAgaWYgKHN0YXRlLmRhdGEg");
    sb.append("IT0gbnVsbCkgewogICAgICB2YXIgZGVsdGEgPSByb290X29mKHN0YXRlLmRhdGEpLmRlbHRhOwogICAg");
    sb.append("ICBpZiAoIWlzRW1wdHlEZWx0YShkZWx0YSkpIHsKICAgICAgICB1bnN1Yi5fX2RhdGEgPSBzdGF0ZS5k");
    sb.append("YXRhLnRyZWUuc3Vic2NyaWJlKGRlbHRhKTsKICAgICAgfQogICAgfQogICAgLy8gICYmICFpc0VtcHR5");
    sb.append("RGVsdGEoc3RhdGUudmlldykKICAgIGlmIChzdGF0ZS52aWV3ICE9IG51bGwpIHsKICAgICAgdmFyIGRl");
    sb.append("bHRhID0gcm9vdF9vZihzdGF0ZS52aWV3KS5kZWx0YTsKICAgICAgaWYgKCFpc0VtcHR5RGVsdGEoZGVs");
    sb.append("dGEpKSB7CiAgICAgICAgdW5zdWIuX192aWV3ID0gc3RhdGUudmlldy50cmVlLnN1YnNjcmliZShkZWx0");
    sb.append("YSk7CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBSVU5USU1FIHwgU3dpdGNoIHRvIHRoZSB2aWV3IG9i");
    sb.append("amVjdAogIHNlbGYucFYgPSBmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiB7IHNlcnZpY2U6IHN0");
    sb.append("YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6ICJ2");
    sb.append("aWV3IiB9OwogIH07CiAgc2VsZi5uZXdTdGF0ZVZpZXdPZiA9IHNlbGYucFY7CgogIC8vIFJVTlRJTUUg");
    sb.append("fCBTd2l0Y2ggdG8gdGhlIGRhdGEgb2JqZWN0CiAgc2VsZi5wRCA9IGZ1bmN0aW9uIChzdGF0ZSkgewog");
    sb.append("ICAgcmV0dXJuIHsgc2VydmljZTogc3RhdGUuc2VydmljZSwgZGF0YTogc3RhdGUuZGF0YSwgdmlldzog");
    sb.append("c3RhdGUudmlldywgY3VycmVudDogImRhdGEiIH07CiAgfTsKICBzZWxmLm5ld1N0YXRlRGF0YU9mID0g");
    sb.append("c2VsZi5wRDsKCiAgLy8gUlVOVElNRSB8IFN3aXRjaCB0byB0aGUgcm9vdCBvYmplY3QgLyAoUm9vdCkK");
    sb.append("ICBzZWxmLnBSID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICB2YXIgbmV4dCA9IHsgc2VydmljZTogc3Rh");
    sb.append("dGUuc2VydmljZSwgZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogc3Rh");
    sb.append("dGUuY3VycmVudCB9OwogICAgdmFyIHByaW9yID0gbmV4dFtzdGF0ZS5jdXJyZW50XTsKICAgIHdoaWxl");
    sb.append("IChwcmlvciAhPSBudWxsKSB7CiAgICAgIG5leHRbc3RhdGUuY3VycmVudF0gPSBwcmlvcjsKICAgICAg");
    sb.append("cHJpb3IgPSBwcmlvci5wYXJlbnQ7CiAgICB9CiAgICByZXR1cm4gbmV4dDsKICB9OwogIHNlbGYubmV3");
    sb.append("U3RhdGVSb290T2YgPSBzZWxmLnBSOwoKICAvLyBSVU5USU1FIHwgLi4vIChVcCkKICBzZWxmLnBVID0g");
    sb.append("ZnVuY3Rpb24gKHN0YXRlKSB7CiAgICB2YXIgbmV4dCA9IHsgc2VydmljZTogc3RhdGUuc2VydmljZSwg");
    sb.append("ZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogc3RhdGUuY3VycmVudCB9");
    sb.append("OwogICAgdmFyIHByaW9yID0gbmV4dFtzdGF0ZS5jdXJyZW50XTsKICAgIGlmIChwcmlvci5wYXJlbnQg");
    sb.append("IT0gbnVsbCkgewogICAgICBuZXh0W3N0YXRlLmN1cnJlbnRdID0gcHJpb3IucGFyZW50OwogICAgfQog");
    sb.append("ICAgcmV0dXJuIG5leHQ7CiAgfTsKICBzZWxmLm5ld1N0YXRlUGFyZW50T2YgPSBzZWxmLnBVOwoKICAv");
    sb.append("LyBSVU5USU1FIHwgZGl2ZSBvbmUgbGV2ZWwgSW50byBwYXRoMS9wYXRoMi8uLi4uL3BhdGhOCiAgc2Vs");
    sb.append("Zi5wSSA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSkgewogICAgdmFyIHByaW9yID0gc3RhdGVbc3RhdGUu");
    sb.append("Y3VycmVudF07CiAgICBpZiAocHJpb3IgPT0gbnVsbCkgewogICAgICBjb25zb2xlLmVycm9yKHN0YXRl");
    sb.append("LmN1cnJlbnQgKyAiIGlzIG5vdCBwcmVzZW50Iik7CiAgICAgIHJldHVybiBzdGF0ZTsKICAgIH0KICAg");
    sb.append("IGlmICghKG5hbWUgaW4gcHJpb3IuZGVsdGEpKSB7CiAgICAgIHByaW9yLmRlbHRhW25hbWVdID0ge307");
    sb.append("CiAgICB9CiAgICB2YXIgbmV4dCA9IHsgc2VydmljZTogc3RhdGUuc2VydmljZSwgZGF0YTogc3RhdGUu");
    sb.append("ZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogc3RhdGUuY3VycmVudCB9OwogICAgbmV4dFtz");
    sb.append("dGF0ZS5jdXJyZW50XSA9IHsKICAgICAgdHJlZTogcHJpb3IudHJlZSwKICAgICAgZGVsdGE6IHByaW9y");
    sb.append("LmRlbHRhW25hbWVdLAogICAgICBwYXJlbnQ6IHByaW9yLAogICAgICBwYXRoOiBuYW1lCiAgICB9Owog");
    sb.append("ICAgaWYgKG5leHQuY3VycmVudCA9PSAiZGF0YSIpIHsKICAgICAgbmV4dC5kYXRhLmNvbm5lY3Rpb24g");
    sb.append("PSBwcmlvci5jb25uZWN0aW9uOwogICAgfQogICAgcmV0dXJuIG5leHQ7CiAgfTsKICBzZWxmLm5ld1N0");
    sb.append("YXRlRGl2ZUludG8gPSBzZWxmLnBJOwoKICAvLyBSVU5USU1FIHwgZXh0ZW5kIHRoZSBnaXZlbiBzdGF0");
    sb.append("ZSB3aXRoIHRoZSB2aWV3IGhhdmluZyBhIHNlcGFyYXRlIGNoaWxkCiAgc2VsZi5wRVYgPSBmdW5jdGlv");
    sb.append("biAoc3RhdGUsIG5hbWUpIHsKICAgIGlmICghKG5hbWUgaW4gc3RhdGUudmlldy5kZWx0YSkpIHsKICAg");
    sb.append("ICAgc3RhdGUudmlldy5kZWx0YVtuYW1lXSA9IHt9OwogICAgfQogICAgcmV0dXJuIHsKICAgICAgc2Vy");
    sb.append("dmljZTogc3RhdGUuc2VydmljZSwKICAgICAgZGF0YTogc3RhdGUuZGF0YSwKICAgICAgdmlldzogewog");
    sb.append("ICAgICAgIHRyZWU6IHN0YXRlLnZpZXcudHJlZSwKICAgICAgICBkZWx0YTogc3RhdGUudmlldy5kZWx0");
    sb.append("YVtuYW1lXSwKICAgICAgICBwYXJlbnQ6IHN0YXRlLnZpZXcsCiAgICAgICAgcGF0aDogbmFtZQogICAg");
    sb.append("ICB9LAogICAgICBjdXJyZW50OiBzdGF0ZS5jdXJyZW50CiAgICB9OwogIH07CiAgc2VsZi5uZXdTdGF0");
    sb.append("ZUNyZWF0ZVZpZXdDaGlsZCA9IHNlbGYucEVWOwoKICBzZWxmLnBJRSA9IGZ1bmN0aW9uIChzdGF0ZSwg");
    sb.append("bmFtZSwgZXhwYW5kVmlldykgewogICAgdmFyIG5leHQgPSBzZWxmLnBJKHN0YXRlLCBuYW1lKTsKICAg");
    sb.append("IGlmIChleHBhbmRWaWV3KSB7CiAgICAgIHJldHVybiBzZWxmLnBFVihuZXh0LCBuYW1lKTsKICAgIH0g");
    sb.append("ZWxzZSB7CiAgICAgIHJldHVybiBuZXh0OwogICAgfQogIH07CgogIHZhciBmb3JrID0gZnVuY3Rpb24g");
    sb.append("KHByaW9yU3RhdGUpIHsKICAgIHZhciBzdGF0ZSA9IHsKICAgICAgc2VydmljZTogcHJpb3JTdGF0ZS5z");
    sb.append("ZXJ2aWNlLAogICAgICBkYXRhOiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLmRhdGEpLAogICAgICB2");
    sb.append("aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICBjdXJyZW50OiBwcmlvclN0");
    sb.append("YXRlLmN1cnJlbnQKICAgIH07CiAgICBpZiAoc3RhdGUuZGF0YSAhPSBudWxsKSB7CiAgICAgIHN0YXRl");
    sb.append("LmRhdGEuY29ubmVjdGlvbiA9IHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uOwogICAgfQogICAgcmV0");
    sb.append("dXJuIHN0YXRlOwogIH07CgogIC8vIFJVTlRJTUUgfCBzdWJzY3JpYmUgYmV0d2VlbiB0aGUgc3RhdGUg");
    sb.append("YW5kIHRoZSBvYmplY3QuCiAgLy8gV2hlbiB0aGUgbWVtYmVyIGZpZWxkIHdpdGhpbiBzdGF0ZSBvZiBu");
    sb.append("YW1lIGNoYW5nZXMsIGNvcHkgdGhhdCB2YWx1ZSBpbnRvIHRoZSBvYmogYW5kIHJ1biByZWNvbXB1dGUo");
    sb.append("KQogIHNlbGYuWSA9IGZ1bmN0aW9uIChzdGF0ZSwgb2JqLCBuYW1lLCByZWNvbXB1dGUpIHsKICAgIHZh");
    sb.append("ciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAgIHJl");
    sb.append("Y29tcHV0ZSgpOwogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICBz");
    sb.append("ZWxmLlkyID0gZnVuY3Rpb24gKHN0YXRlLCByLCBrZXksIG5hbWUsIHJlY29tcHV0ZSkgewogICAgdmFy");
    sb.append("IHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgb2JqID0gci5fW2tleV07CiAgICAgIG9i");
    sb.append("altuYW1lXSA9IHZhbHVlOwogICAgICByZWNvbXB1dGUob2JqKTsKICAgICAgcmV0dXJuIHRydWU7CiAg");
    sb.append("ICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJTUU6IGJ1");
    sb.append("aWxkIGFuIHJ4b2JqCiAgc2VsZi5SWCA9IGZ1bmN0aW9uICh2YXJzKSB7CiAgICB2YXIgbyA9IHt9Owog");
    sb.append("ICAgby5fID0ge307CiAgICBmb3IgKHZhciBrID0gMDsgayA8IHZhcnMubGVuZ3RoOyBrKyspIHsKICAg");
    sb.append("ICAgby5fW3ZhcnNba11dID0ge307CiAgICB9CiAgICBvLl9fID0gZnVuY3Rpb24oKSB7fTsKICAgIHJl");
    sb.append("dHVybiBvOwogIH07CgogIC8vIFJVTlRJTUUgfCBKdXN0IHN1YnNjcmliZWUgdmFsdWUgdG8gdGhlIG9i");
    sb.append("amVjdCBmaWVsZCBvZiBuYW1lIChuby1yZWNvbXB1dGUpCiAgc2VsZi5ZUyA9IGZ1bmN0aW9uIChzdGF0");
    sb.append("ZSwgb2JqLCBuYW1lKSB7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIG9ialtu");
    sb.append("YW1lXSA9IHZhbHVlOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUs");
    sb.append("IG5hbWUsIHN1Yik7CiAgfTsKCiAgLy8gUlVOVElNRSB8ICJUZXh0IgogIHNlbGYuVCA9IGZ1bmN0aW9u");
    sb.append("ICh0eCkgewogICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHR4KTsKICB9OwoKICAvLyBj");
    sb.append("b252ZXJ0IGEgdmFsdWUgaW50byBhIGJvb2xlYW4KICBzZWxmLkIgPSBmdW5jdGlvbih2YWwpIHsKICAg");
    sb.append("IGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICByZXR1cm4gdmFs");
    sb.append("ID09ICJ0cnVlIjsKICB9OwoKICAvLyBSVU5USU1FIHwgPHZpZXctd3JpdGUgbmFtZT0iIiB2YWx1ZT0i");
    sb.append("Ij4KICBzZWxmLlZXID0gZnVuY3Rpb24oc3RhdGUsIG5hbWUsIHJ4T2JqKSB7CiAgICByeE9iai5fXyA9");
    sb.append("IGRlYm91bmNlKDUwLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICB2YXIgdmFs");
    sb.append("dWUgPSByeE9iai52YWx1ZTsKICAgICAgaWYgKHR5cGVvZiAodmFsdWUpID09ICJmdW5jdGlvbiIpIHsK");
    sb.append("ICAgICAgICBvYmpbbmFtZV0gPSB2YWx1ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIG9ialtuYW1l");
    sb.append("XSA9IHZhbHVlOwogICAgICB9CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2Jq");
    sb.append("KTsKICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9KTsKICB9OwoKICAvLyBS");
    sb.append("VU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLj4KICBzZWxmLkwgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUp");
    sb.append("IHsKICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7CiAgICB2YXIgc3ViID0g");
    sb.append("ZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRvbS5ub2RlVmFsdWUgPSB2YWx1ZTsKICAgIH07CiAgICBz");
    sb.append("dWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICByZXR1cm4gZG9tOwogIH07CgogIC8vIFJVTlRJ");
    sb.append("TUUgfCA8bG9va3VwIHBhdGg9Li4uIHRyYW5zZm9ybT0iJHRyYW5zZm9ybSIgLz4KICBzZWxmLkxUID0g");
    sb.append("ZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCB0cmFuc2Zvcm0pIHsKICAgIHZhciBkb20gPSBkb2N1bWVudC5j");
    sb.append("cmVhdGVUZXh0Tm9kZSgiIik7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGlm");
    sb.append("ICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgZG9tLm5vZGVWYWx1ZSA9IHRyYW5zZm9ybSh2YWx1ZSk7");
    sb.append("CiAgICAgIH0KICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICByZXR1cm4g");
    sb.append("ZG9tOwogIH07CgogIHNlbGYuTGggPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUpIHsKICAgIHZhciBkb20g");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZh");
    sb.append("bHVlKSB7CiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgZG9tLmlubmVySFRNTCA9IHZh");
    sb.append("bHVlOwogICAgICB9CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogICAgcmV0");
    sb.append("dXJuIGRvbTsKICB9OwoKICAvLyBSVU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLiB0cmFuc2Zvcm09IiR0");
    sb.append("cmFuc2Zvcm0iIC8+CiAgc2VsZi5MVGRUID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCB0cmFuc2Zvcm0s");
    sb.append("IGZyZXEpIHsKICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7CiAgICAvLyBj");
    sb.append("cmVhdGUgdGhlIG5leHVzIG9iamVjdAogICAgdmFyIG9iaiA9IHt9OwogICAgb2JqLmZyZXEgPSBmcmVx");
    sb.append("OwogICAgb2JqLnZhbHVlID0gIiI7CgogICAgLy8gdXBkYXRlIHdpbGwgZXhlY3V0ZSB0aGUgdHJhbnNm");
    sb.append("b3JtIG9uIHRoZSB2YWx1ZQogICAgb2JqLnVwZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICBkb20ubm9k");
    sb.append("ZVZhbHVlID0gdHJhbnNmb3JtKHRoaXMudmFsdWUpOwogICAgfS5iaW5kKG9iaik7CgogICAgLy8gc3Vi");
    sb.append("c2NyaXB0aW9uIHdpbGwgc3luYyB0aGUgdmFsdWUKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUp");
    sb.append("IHsKICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHsKICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAg");
    sb.append("ICAgICAgdGhpcy51cGRhdGUoKTsKICAgICAgfQogICAgfS5iaW5kKG9iaik7CgogICAgLy8gcmVmcmVz");
    sb.append("aCB3aWxsIHJlLWV4ZWN1dGUgdGhlIHVwZGF0ZSAoYW5kIHRodXMgdGhlIHRyYW5zZm9ybSkKICAgIG9i");
    sb.append("ai5yZWZyZXNoID0gZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgIGlmIChkb2N1");
    sb.append("bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsgLy8gd2lsbCBydW4gc28gbG9uZyBhcyB0aGUgRE9NIGNv");
    sb.append("bnRhaW5zIHRoZSBub2RlIHdlIG1hbmlwdWxhdGVkCiAgICAgICAgd2luZG93LnNldFRpbWVvdXQodGhp");
    sb.append("cy5yZWZyZXNoLCB0aGlzLmZyZXEpOwogICAgICB9CiAgICB9LmJpbmQob2JqKTsKICAgIC8vIGtpY2sg");
    sb.append("b2ZmIHRoZSBhdXRvIHRyYW5zZm9ybQogICAgd2luZG93LnNldFRpbWVvdXQob2JqLnJlZnJlc2gsIGZy");
    sb.append("ZXEpOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogICAgcmV0dXJuIGRvbTsKICB9OwoK");
    sb.append("ICAvLyBSVU5USU1FIHwgPHRhZz4KICBzZWxmLkUgPSBmdW5jdGlvbiAodGFnLCBucykgewogICAgaWYg");
    sb.append("KG5zID09IHVuZGVmaW5lZCB8fCBucyA9PSBudWxsKSB7CiAgICAgIHZhciBkb20gPSBkb2N1bWVudC5j");
    sb.append("cmVhdGVFbGVtZW50KHRhZyk7CiAgICAgIGlmICh0YWcgPT0gInNlbGVjdCIpIHsKICAgICAgICBkb20u");
    sb.append("YWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7IGRvbS5yeHZhbHVlID0gZG9tLnZh");
    sb.append("bHVlOyB9KTsKICAgICAgfQogICAgICByZXR1cm4gZG9tOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHJl");
    sb.append("c3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgdGFnKTsKICAgICAgcmVzdWx0LnNldEF0");
    sb.append("dHJpYnV0ZSgieG1sbnMiLCBucyk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfTsKCiAgc2Vs");
    sb.append("Zi5DU3QgPSBmdW5jdGlvbiAocGFyZW50LCBzdGF0ZSwgY2hpbGRNYWtlckNvbm5lY3RlZCwgY2hpbGRN");
    sb.append("YWtlckRpc2Nvbm5lY3RlZCkgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgaWYgKCFz");
    sb.append("dGF0ZS5kYXRhLmNvbm5lY3Rpb24pIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgc3RhdGUuZGF0YS5j");
    sb.append("b25uZWN0aW9uLmNvbm5lY3RlZChmdW5jdGlvbihjcykgewogICAgICBpZiAodGhpcy5wcmlvciA9PSBj");
    sb.append("cykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBudWtlKHBhcmVudCk7CiAgICAgIGZpcmVf");
    sb.append("dW5zdWIodW5zdWIpOwogICAgICB0aGlzLnByaW9yID0gY3M7CiAgICAgIHZhciBuZXdTdGF0ZSA9IGZv");
    sb.append("cmsoc3RhdGUpOwogICAgICBpZiAoY3MpIHsKICAgICAgICBjaGlsZE1ha2VyQ29ubmVjdGVkKHBhcmVu");
    sb.append("dCwgbmV3U3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIGNoaWxkTWFrZXJEaXNjb25uZWN0ZWQo");
    sb.append("cGFyZW50LCBuZXdTdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKG5ld1N0YXRlLCB1");
    sb.append("bnN1Yik7CiAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHBhcmVudCk7CiAgICB9LmJp");
    sb.append("bmQoe3ByaW9yOm51bGx9KSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxsb2NhbC1zdG9yYWdlLXBvbGwg");
    sb.append("a2V5PSRrZXkgW21zPSRtc10+CiAgc2VsZi5Mb1N0UG8gPSBmdW5jdGlvbihwYXJlbnQsIHByaW9yU3Rh");
    sb.append("dGUsIHJ4T2JqLCBjaGlsZE1ha2VyRm91bmQsIGNoaWxkTWFrZXJOb3RGb3VuZCkgewogICAgdmFyIHVu");
    sb.append("c3ViID0gbWFrZV91bnN1YigpOwogICAgdmFyIHNtID0ge307CiAgICBzbS5rZXkgPSBudWxsOwogICAg");
    sb.append("c20ubXMgPSA1MDAwOwogICAgc20ubGFzdCA9ICIhIjsKICAgIHNtLnAgPSBmdW5jdGlvbigpIHsKICAg");
    sb.append("ICAgaWYgKHRoaXMua2V5ID09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFy");
    sb.append("IHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5rZXkpOwogICAgICBpZiAodmFsdWUgPT0g");
    sb.append("dGhpcy5sYXN0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMubGFzdCA9IHZhbHVl");
    sb.append("OwogICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICB2YXIgdHJl");
    sb.append("ZSA9IG5ldyBBZGFtYVRyZWUoKTsKICAgICAgdmFyIHN0YXRlID0gewogICAgICAgIHNlcnZpY2U6IHBy");
    sb.append("aW9yU3RhdGUuc2VydmljZSwKICAgICAgICBkYXRhOiB7IGNvbm5lY3Rpb246IHByaW9yU3RhdGUuY29u");
    sb.append("bmVjdGlvbiwgdHJlZTogdHJlZSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwK");
    sb.append("ICAgICAgICB2aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICAgIGN1cnJl");
    sb.append("bnQ6ICJkYXRhIgogICAgICB9OwogICAgICBpZiAodmFsdWUgPT0gbnVsbCkgewogICAgICAgIGNoaWxk");
    sb.append("TWFrZXJOb3RGb3VuZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUs");
    sb.append("IHVuc3ViKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGlsZE1ha2VyRm91bmQocGFyZW50LCBzdGF0");
    sb.append("ZSk7CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgICAgdHJlZS51cGRh");
    sb.append("dGUodHJlZS5NYWtlRGVsdGEoSlNPTi5wYXJzZSh2YWx1ZSkpKTsKICAgICAgfQoKICAgIH0uYmluZChz");
    sb.append("bSk7CiAgICByeE9iai5fXyA9IGRlYm91bmNlKDUwLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICgna2V5");
    sb.append("JyBpbiByeE9iaikgewogICAgICAgIHRoaXMua2V5ID0gcnhPYmoua2V5OwogICAgICB9CiAgICAgIGlm");
    sb.append("ICgnbXMnIGluIHJ4T2JqKSB7CiAgICAgICAgdGhpcy5tcyA9IHBhcnNlSW50KHJ4T2JqLm1zKTsKICAg");
    sb.append("ICAgICBpZiAoaXNOYU4odGhpcy5tcykpIHsKICAgICAgICAgIHRoaXMubXMgPSA1MDAwOwogICAgICAg");
    sb.append("IH0KICAgICAgfQogICAgICB0aGlzLnAoKTsKICAgIH0uYmluZChzbSkpOwoKICAgIHNtLnRpbWVvdXQg");
    sb.append("PSBmdW5jdGlvbigpIHsKICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMocGFyZW50KSkgewog");
    sb.append("ICAgICAgIHRoaXMucCgpOwogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMudGltZW91dCwgdGhp");
    sb.append("cy5tcyk7CiAgICAgIH0KICAgIH0uYmluZChzbSk7CiAgICB3aW5kb3cuc2V0VGltZW91dChzbS50aW1l");
    sb.append("b3V0LCA1MCk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxkb2N1bWVudC1nZXQgc3BhY2U9IiRzcGFjZSIg");
    sb.append("a2V5PSIka2V5IiB1cmw9IiRwYXRoIiBzZWFyY2g6eD0iLi4uIiAuLi4+CiAgc2VsZi5EY0cgPSBmdW5j");
    sb.append("dGlvbihwYXJlbnQsIHByaW9yU3RhdGUsIHJ4T2JqLCBjaGlsZE1ha2VyRmV0Y2hlZCwgY2hpbGRNYWtl");
    sb.append("ckZhaWxlZCkgewogICAgLy8gVE9ETwogIH07CgogIC8vIFJVTlRJTUUgfCA8ZG9tYWluLWdldCB1cmw9");
    sb.append("InBhdGgiIHNlYXJjaDp4PSIuLi4iIC4uLj4KICBzZWxmLkRHID0gZnVuY3Rpb24ocGFyZW50LCBwcmlv");
    sb.append("clN0YXRlLCByeE9iaiwgY2hpbGRNYWtlckZldGNoZWQsIGNoaWxkTWFrZXJGYWlsZWQsIGRlbGF5TGlt");
    sb.append("aXQpIHsKICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIHZhciBkZWxheVRvVXNlID0gdHlw");
    sb.append("ZW9mKGRlbGF5TGltaXQpID09ICJudW1iZXIiID8gZGVsYXlMaW1pdCA6IDI1MDsKICAgIHJ4T2JqLl9f");
    sb.append("ID0gZGVib3VuY2UoNTAsIGRlbGF5KGRlbGF5VG9Vc2UsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCEo");
    sb.append("J3VybCcgaW4gcnhPYmopKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBhcmdzID0g");
    sb.append("W107CiAgICAgIHZhciBpZGVudGl0eSA9IG51bGw7CiAgICAgIGZvciAodmFyIGFyZyBpbiByeE9iaikg");
    sb.append("ewogICAgICAgIHZhciB2YWwgPSByeE9ialthcmddOwogICAgICAgIHN3aXRjaCAoYXJnKSB7CiAgICAg");
    sb.append("ICAgICBjYXNlICJfXyI6CiAgICAgICAgICBjYXNlICJfIjoKICAgICAgICAgIGNhc2UgInVybCI6CiAg");
    sb.append("ICAgICAgICBjYXNlICJyZWRpcmVjdCI6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAi");
    sb.append("aWRlbnRpdHkiOgogICAgICAgICAgICBpZiAodHlwZW9mKHZhbCkgPT0gInN0cmluZyIpIHsKICAgICAg");
    sb.append("ICAgICAgICBpZGVudGl0eSA9IHJ4T2JqW2FyZ107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJl");
    sb.append("YWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBhcmdzLnB1c2goYXJnICsgIj0iICsgZW5j");
    sb.append("b2RlVVJJQ29tcG9uZW50KHZhbCkpOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgdXJsID0gcnhP");
    sb.append("YmoudXJsICsgKGFyZ3MubGVuZ3RoID4gMCA/ICI/IiArIGFyZ3Muam9pbigiJiIpIDogIiIpOwogICAg");
    sb.append("ICB0aGlzLmdlbiArKzsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgeGh0dHAgPSBuZXcg");
    sb.append("WE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgIGlmICh0aGlzLnhodHRwLnJlYWR5U3RhdGUgPT0gNCAmJiB0aGlzLmdlbiA9PSBz");
    sb.append("ZWxmLmdlbikgewogICAgICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgICAgICBudWtlKHBhcmVu");
    sb.append("dCk7CiAgICAgICAgICB2YXIgdHJlZSA9IG5ldyBBZGFtYVRyZWUoKTsKICAgICAgICAgIHZhciBzdGF0");
    sb.append("ZSA9IHsKICAgICAgICAgICAgc2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNlLAogICAgICAgICAgICBk");
    sb.append("YXRhOiB7IGNvbm5lY3Rpb246IHByaW9yU3RhdGUuY29ubmVjdGlvbiwgdHJlZTogdHJlZSwgZGVsdGE6");
    sb.append("IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAgICAgICAgICAgdmlldzogbmV3X2RlbHRh");
    sb.append("X2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICAgICAgY3VycmVudDogImRhdGEiCiAgICAgICAg");
    sb.append("ICB9OwoKICAgICAgICAgIGlmICh0aGlzLnhodHRwLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAg");
    sb.append("dmFyIHR5cGUgPSB0aGlzLnhodHRwLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKTsKICAg");
    sb.append("ICAgICAgICAgaWYgKHR5cGUgPT0gImFwcGxpY2F0aW9uL2pzb24iKSB7CiAgICAgICAgICAgICAgdmFy");
    sb.append("IHRvUHVzaCA9IHRyZWUuTWFrZURlbHRhKEpTT04ucGFyc2UodGhpcy54aHR0cC5yZXNwb25zZVRleHQp");
    sb.append("KTsKICAgICAgICAgICAgICBjaGlsZE1ha2VyRmV0Y2hlZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICAg");
    sb.append("ICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsKICAgICAgICAgICAgICB0cmVlLnVwZGF0");
    sb.append("ZSh0b1B1c2gpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNoaWxkTWFrZXJGYWls");
    sb.append("ZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1");
    sb.append("Yik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNoaWxkTWFrZXJG");
    sb.append("YWlsZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5z");
    sb.append("dWIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfS5iaW5kKHtnZW46c2VsZi5nZW4sIHhodHRw");
    sb.append("OnhodHRwfSk7CiAgICAgIHhodHRwLm9wZW4oIkdFVCIsICBzZWxmLmJhc2UgKyAiL35kIiArIHVybCwg");
    sb.append("dHJ1ZSk7CiAgICAgIGlmIChpZGVudGl0eSAhPSBudWxsKSB7CiAgICAgICAgeGh0dHAuc2V0UmVxdWVz");
    sb.append("dEhlYWRlcigiQXV0aG9yaXphdGlvbiIsICJCZWFyZXIgIiArIGlkZW50aXR5KTsKICAgICAgfQogICAg");
    sb.append("ICB4aHR0cC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogICAgICB4aHR0cC5zZW5kKCk7CiAgICB9LmJp");
    sb.append("bmQoe3VybDoiIiwgZ2VuOjAsIGJhc2U6c2VsZi5wcm90b2NvbCArICIvLyIgKyBzZWxmLmhvc3R9KSkp");
    sb.append("OwogICAgcnhPYmouX18oKTsKICB9OwoKICAvLyBSVU5USU1FIHwgPHBpY2sgbmFtZT0uLi4+CiAgc2Vs");
    sb.append("Zi5QID0gZnVuY3Rpb24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgcnhPYmosIGNoaWxkTWFrZXJDb25uZWN0");
    sb.append("ZWQsIGNoaWxkTWFrZXJEaXNjb25uZWN0ZWQsIGtlZXBPcGVuKSB7CiAgICB2YXIgdW5zdWIgPSBtYWtl");
    sb.append("X3Vuc3ViKCk7CiAgICByeE9iai5fXyA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCEoJ25hbWUnIGlu");
    sb.append("IHJ4T2JqKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5uYW1lID09IHJ4");
    sb.append("T2JqLm5hbWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNvID0gZ2V0X2Nvbm5l");
    sb.append("Y3Rpb25fb2JqKHJ4T2JqLm5hbWUpOwogICAgICB0aGlzLm5hbWUgPSByeE9iai5uYW1lOwogICAgICBj");
    sb.append("by5jb25uZWN0ZWQoZnVuY3Rpb24gKGNzKSB7CiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWQgJiYga2Vl");
    sb.append("cE9wZW4pIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbnVrZShwYXJlbnQpOwog");
    sb.append("ICAgICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICAgIHZhciBzdGF0ZSA9IHsKICAgICAgICAgIHNl");
    sb.append("cnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwKICAgICAgICAgIGRhdGE6IHsgY29ubmVjdGlvbjogY28s");
    sb.append("IHRyZWU6IGNvLnRyZWUsIGRlbHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAg");
    sb.append("ICAgICB2aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICAgICAgY3VycmVu");
    sb.append("dDogImRhdGEiCiAgICAgICAgfTsKICAgICAgICBpZiAoY3MpIHsKICAgICAgICAgIHRoaXMucmVuZGVy");
    sb.append("ZWQgPSB0cnVlOwogICAgICAgICAgY2hpbGRNYWtlckNvbm5lY3RlZChwYXJlbnQsIHN0YXRlKTsKICAg");
    sb.append("ICAgICB9IGVsc2UgewogICAgICAgICAgY2hpbGRNYWtlckRpc2Nvbm5lY3RlZChwYXJlbnQsIHN0YXRl");
    sb.append("KTsKICAgICAgICB9CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgICAg");
    sb.append("Ly8gVE9ETzogcmV0dXJuIGZhbHNlIHRvIHVuc3ViCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0u");
    sb.append("YmluZCh0aGlzKSk7CiAgICB9LmJpbmQoeyBuYW1lOiAiIiwgcmVuZGVyZWQ6ZmFsc2UgfSk7CiAgfTsK");
    sb.append("CiAgLy8gUlVOVElNRSB8IDx0ZW1wbGF0ZSBuYW1lPSIuLi4iPgogIHNlbGYuVFAgPSBmdW5jdGlvbiAo");
    sb.append("bmFtZSwgZm9vKSB7CiAgICB0ZW1wbGF0ZXNbbmFtZV0gPSBmb287CiAgfTsKCiAgLy8gY29uZmlnOmlm");
    sb.append("PSJrZXk9dmFsdWUiCiAgc2VsZi5DRkd0ID0gZnVuY3Rpb24gKGNvbmZpZywga2V5LCB2YWx1ZSkgewog");
    sb.append("ICAgaWYgKGtleSBpbiBjb25maWcpIHsKICAgICAgcmV0dXJuIGNvbmZpZ1trZXldID09IHZhbHVlOwog");
    sb.append("ICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH07CiAgLy8gY29uZmlnOmlmPSJrZXkiCiAgc2VsZi5DRkdi");
    sb.append("ID0gZnVuY3Rpb24gKGNvbmZpZywga2V5KSB7CiAgICBjb25zb2xlLmxvZyhjb25maWcpOwogICAgaWYg");
    sb.append("KGtleSBpbiBjb25maWcpIHsKICAgICAgcmV0dXJuIGNvbmZpZ1trZXldID09PSB0cnVlOwogICAgfQog");
    sb.append("ICAgcmV0dXJuIGZhbHNlOwogIH07CgogIC8vIFJVTlRJTUUgfCA8dGFnIHJ4OnRlbXBsYXRlPSRuYW1l");
    sb.append("PgogIHNlbGYuVVQgPSBmdW5jdGlvbiAocGFyZW50LCBzdGF0ZSwgbmFtZSwgY2hpbGRfbWFrZXIsIGNm");
    sb.append("ZykgewogICAgdmFyIGZvbyA9IHRlbXBsYXRlc1tuYW1lXTsKICAgIGlmICh0eXBlb2YoZm9vKSA9PSAi");
    sb.append("ZnVuY3Rpb24iKSB7CiAgICAgIGZvbyhwYXJlbnQsIHN0YXRlLCBjaGlsZF9tYWtlciwgY2ZnKTsKICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoImZhaWxlZCB0byBmaW5kIHRlbXBsYXRlOiAiICsg");
    sb.append("bmFtZSk7CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0YWcgcng6c3dpdGNoPXBhdGggLi4+CiAg");
    sb.append("c2VsZi5TVyA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIG5hbWUsIGNoaWxkcmVuTWFrZXIp");
    sb.append("IHsKICAgIHZhciBzd3N0ID0geyBwcmlvcjogbnVsbCB9OwogICAgYWRkX3Vuc3ViKHN3c3QpOwogICAg");
    sb.append("dmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT0gdGhpcy5wcmlvcikg");
    sb.append("ewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnByaW9yID0gdmFsdWU7CiAgICAgIGZp");
    sb.append("cmVfdW5zdWIodGhpcyk7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFyIHN0YXRlID0gZm9yayhw");
    sb.append("cmlvclN0YXRlKTsKICAgICAgY2hpbGRyZW5NYWtlcihwYXJlbnQsIHNlbGYucEQoc3RhdGUpLCAiIiAr");
    sb.append("IHZhbHVlKTsKICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB0aGlzKTsKICAgIH0uYmluZChzd3N0");
    sb.append("KTsKICAgIHN1YnNjcmliZShwcmlvclN0YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJTUUg");
    sb.append("fCA8dGFnIHJ4Oml0ZXJhdGU9cGF0aCAuLi4+CiAgc2VsZi5JVCA9IGZ1bmN0aW9uIChwYXJlbnREb20s");
    sb.append("IHN0YXRlLCBuYW1lLCBleHBhbmRWaWV3LCBtYWtlciwgaGlkZU9uWmVybykgewogICAgdmFyIGl0X3N0");
    sb.append("YXRlID0gc2VsZi5wSUUoc3RhdGUsIG5hbWUsIGV4cGFuZFZpZXcpOwogICAgdmFyIGRvbUJ5S2V5ID0g");
    sb.append("e307CiAgICB2YXIgdmlld1VuU3ViQnlLZXkgPSB7fTsKICAgIHZhciBraWxsID0gZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICBmb3IgKHZhciBrZXkgaW4gdmlld1VuU3ViQnlLZXkpIHsKICAgICAgICBmaXJlX3Vuc3Vi");
    sb.append("KHZpZXdVblN1YkJ5S2V5W2tleV0pOwogICAgICAgIGRlbGV0ZSB2aWV3VW5TdWJCeUtleVtrZXldOwog");
    sb.append("ICAgICB9CiAgICAgIGZvciAodmFyIGtleSBpbiBkb21CeUtleSkgewogICAgICAgIGRlbGV0ZSBkb21C");
    sb.append("eUtleVtrZXldOwogICAgICB9CiAgICB9OwogICAgaWYgKGhpZGVPblplcm8pIHsKICAgICAgcGFyZW50");
    sb.append("RG9tLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9CgogICAgdmFyIHNpZ25hbHMgPSB7aXNOZXc6");
    sb.append("ZmFsc2V9OwoKICAgIHZhciBzdWIgPSB7CiAgICAgICIrIjogZnVuY3Rpb24gKGtleSkgewogICAgICAg");
    sb.append("IHZhciBuZXdfc3RhdGUgPSBmb3JrKHNlbGYucElFKGl0X3N0YXRlLCBrZXksIGV4cGFuZFZpZXcpKTsK");
    sb.append("ICAgICAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICAgICAgdmFyIGRvbSA9IG1ha2VyKG5l");
    sb.append("d19zdGF0ZSk7CiAgICAgICAgc2lnbmFscy5pc05ldyA9IHRydWU7CiAgICAgICAgZG9tQnlLZXlba2V5");
    sb.append("XSA9IGRvbTsKICAgICAgICB2aWV3VW5TdWJCeUtleVtrZXldID0gdW5zdWI7CiAgICAgICAgcGFyZW50");
    sb.append("RG9tLmFwcGVuZChkb20pOwogICAgICAgIHZhciBpdGVtX2RlbHRhID0gbmV3X3N0YXRlLmRhdGEuZGVs");
    sb.append("dGE7CiAgICAgICAgbmV3X3N0YXRlLmRhdGEuZGVsdGEgPSB7fTsKICAgICAgICBpZiAobmV3X3N0YXRl");
    sb.append("LmRhdGEucGFyZW50ICYmIG5ld19zdGF0ZS5kYXRhLnBhdGggJiYgbmV3X3N0YXRlLmRhdGEucGFyZW50");
    sb.append("LmRlbHRhKSB7CiAgICAgICAgICBuZXdfc3RhdGUuZGF0YS5wYXJlbnQuZGVsdGFbbmV3X3N0YXRlLmRh");
    sb.append("dGEucGF0aF0gPSBuZXdfc3RhdGUuZGF0YS5kZWx0YTsKICAgICAgICB9CiAgICAgICAgc3Vic2NyaWJl");
    sb.append("X3N0YXRlKG5ld19zdGF0ZSwgdW5zdWIpOwogICAgICAgIGlmIChleHBhbmRWaWV3KSB7CiAgICAgICAg");
    sb.append("ICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHBhdGhfdG8obmV3X3N0YXRlLnZpZXcsIHsiJGtleSI6IGtl");
    sb.append("eX0pKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBpdGVtX2RlbHRhOwogICAgICB9LAogICAgICAi");
    sb.append("LSI6IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBpZiAoa2V5IGluIGRvbUJ5S2V5KSB7CiAgICAgICAg");
    sb.append("ICB0cnkgewogICAgICAgICAgICBwYXJlbnREb20ucmVtb3ZlQ2hpbGQoZG9tQnlLZXlba2V5XSk7CiAg");
    sb.append("ICAgICAgICB9IGNhdGNoIChleCkge30KICAgICAgICAgIGRlbGV0ZSBkb21CeUtleVtrZXldOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBpZiAoa2V5IGluIHZpZXdVblN1YkJ5S2V5KSB7CiAgICAgICAgICBmaXJlX3Vu");
    sb.append("c3ViKHZpZXdVblN1YkJ5S2V5W2tleV0pOwogICAgICAgICAgZGVsZXRlIHZpZXdVblN1YkJ5S2V5W2tl");
    sb.append("eV07CiAgICAgICAgfQogICAgICB9LAogICAgICAifiI6IGZ1bmN0aW9uIChvcmQpIHsKICAgICAgICB2");
    sb.append("YXIgdmFsdWVUb1NldCA9IGZhbHNlOwogICAgICAgIC8vIHRoZSB2YWx1ZXMgYXJlIGZpbGxpbmcgdXAg");
    sb.append("QUZURXIgdGhlIHZhbHVlIHdhcyBzZXQsCiAgICAgICAgLy8gc28gZGV0ZWN0IHRoZSBhYnNlbmNlIG9m");
    sb.append("IGEgdmFsdWUgYWxvbmcgd2l0aCB0aGUgZXhpc3RlbmNlIG9mIGEgdmFsdWUKICAgICAgICBpZiAoIXBh");
    sb.append("cmVudERvbS52YWx1ZSAmJiBwYXJlbnREb20ucnh2YWx1ZSAhPSAiIikgewogICAgICAgICAgdmFsdWVU");
    sb.append("b1NldCA9IHBhcmVudERvbS5yeHZhbHVlOwogICAgICAgICAgLy8gdGhpcyB2YWx1ZSwgd2Ugd2FudCB0");
    sb.append("byByZXN0b3JlIG9uY2UKICAgICAgICB9CiAgICAgICAgaWYgKGhpZGVPblplcm8pIHsKICAgICAgICAg");
    sb.append("IGlmIChvcmQubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgcGFyZW50RG9tLnN0eWxlLmRpc3BsYXkg");
    sb.append("PSAibm9uZSI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwYXJlbnREb20uc3R5bGUuZGlz");
    sb.append("cGxheSA9ICIiOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBudWtlKHBhcmVudERvbSk7CiAg");
    sb.append("ICAgICAgaWYgKG9yZCA9PSBudWxsKSB7CiAgICAgICAgICBraWxsKCk7CiAgICAgICAgICByZXR1cm47");
    sb.append("CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb3JkLmxlbmd0aDsgaysrKSB7CiAg");
    sb.append("ICAgICAgICBwYXJlbnREb20uYXBwZW5kKGRvbUJ5S2V5W29yZFtrXV0pOwogICAgICAgIH0KICAgICAg");
    sb.append("ICBpZiAodmFsdWVUb1NldCkgewogICAgICAgICAgcGFyZW50RG9tLnZhbHVlID0gdmFsdWVUb1NldDsK");
    sb.append("ICAgICAgICB9CiAgICAgICAgcGFyZW50RG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJvcmRlcmVk");
    sb.append("IikpOwogICAgICAgIGlmIChzaWduYWxzLmlzTmV3KSB7CiAgICAgICAgICBwYXJlbnREb20uZGlzcGF0");
    sb.append("Y2hFdmVudChuZXcgRXZlbnQoIm5ldyIpKTsKICAgICAgICAgIHNpZ25hbHMuaXNOZXcgPSBmYWxzZTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAg");
    sb.append("fTsKCiAgLy8gUlVOVElNRSB8IDxpbmxpbmUtaXRlcmF0ZSBwYXRoPSIuLi4iPi4uLjwvaW5saW5lLXRl");
    sb.append("bXBsYXRlPgogIC8vIFJVTlRJTUUgfCA8dGFnIHJ4OnJlcGxpY2F0ZT0iLi4uIiAuLi4+Li4uPC90YWc+");
    sb.append("CiAgc2VsZi5JSVQgPSBmdW5jdGlvbiAocGFyZW50RG9tLCBzaWJsaW5nRG9tLCBzdGF0ZSwgbmFtZSwg");
    sb.append("ZXhwYW5kVmlldywgbWFrZXIpIHsKICAgIHZhciBpdF9zdGF0ZSA9IHNlbGYucElFKHN0YXRlLCBuYW1l");
    sb.append("LCBleHBhbmRWaWV3KTsKICAgIHZhciBkb21CeUtleSA9IHt9OwogICAgdmFyIHZpZXdVblN1YkJ5S2V5");
    sb.append("ID0ge307CiAgICB2YXIga2lsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIga2V5IGluIHZp");
    sb.append("ZXdVblN1YkJ5S2V5KSB7CiAgICAgICAgZmlyZV91bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAg");
    sb.append("ICAgICBkZWxldGUgdmlld1VuU3ViQnlLZXlba2V5XTsKICAgICAgfQogICAgICBmb3IgKHZhciBrZXkg");
    sb.append("aW4gZG9tQnlLZXkpIHsKICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsKICAgICAgfQogICAgfTsK");
    sb.append("ICAgIHZhciBzaWduYWxzID0ge2lzTmV3OmZhbHNlfTsKICAgIHZhciBzdWIgPSB7CiAgICAgICIrIjog");
    sb.append("ZnVuY3Rpb24gKGtleSkgewogICAgICAgIHZhciBuZXdfc3RhdGUgPSBmb3JrKHNlbGYucElFKGl0X3N0");
    sb.append("YXRlLCBrZXksIGV4cGFuZFZpZXcpKTsKICAgICAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAg");
    sb.append("ICAgICAgdmFyIGRvbSA9IG1ha2VyKG5ld19zdGF0ZSk7CiAgICAgICAgc2lnbmFscy5pc05ldyA9IHRy");
    sb.append("dWU7CiAgICAgICAgZG9tQnlLZXlba2V5XSA9IGRvbTsKICAgICAgICB2aWV3VW5TdWJCeUtleVtrZXld");
    sb.append("ID0gdW5zdWI7CiAgICAgICAgdmFyIGJlZm9yZSA9IHNpYmxpbmdEb20gPT0gbnVsbCA/IHBhcmVudERv");
    sb.append("bS5maXJzdENoaWxkIDogc2libGluZ0RvbS5uZXh0U2libGluZzsKICAgICAgICBwYXJlbnREb20uaW5z");
    sb.append("ZXJ0QmVmb3JlKGRvbSwgYmVmb3JlKTsKICAgICAgICB2YXIgaXRlbV9kZWx0YSA9IG5ld19zdGF0ZS5k");
    sb.append("YXRhLmRlbHRhOwogICAgICAgIG5ld19zdGF0ZS5kYXRhLmRlbHRhID0ge307CiAgICAgICAgaWYgKG5l");
    sb.append("d19zdGF0ZS5kYXRhLnBhcmVudCAmJiBuZXdfc3RhdGUuZGF0YS5wYXRoICYmIG5ld19zdGF0ZS5kYXRh");
    sb.append("LnBhcmVudC5kZWx0YSkgewogICAgICAgICAgbmV3X3N0YXRlLmRhdGEucGFyZW50LmRlbHRhW25ld19z");
    sb.append("dGF0ZS5kYXRhLnBhdGhdID0gbmV3X3N0YXRlLmRhdGEuZGVsdGE7CiAgICAgICAgfQogICAgICAgIHN1");
    sb.append("YnNjcmliZV9zdGF0ZShuZXdfc3RhdGUsIHVuc3ViKTsKICAgICAgICBpZiAoZXhwYW5kVmlldykgewog");
    sb.append("ICAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXRoX3RvKG5ld19zdGF0ZS52aWV3LCB7IiRr");
    sb.append("ZXkiOiBrZXl9KSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gaXRlbV9kZWx0YTsKICAgICAgfSwK");
    sb.append("ICAgICAgIi0iOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKGtleSBpbiBkb21CeUtleSkgewog");
    sb.append("ICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcGFyZW50RG9tLnJlbW92ZUNoaWxkKGRvbUJ5S2V5W2tl");
    sb.append("eV0pOwogICAgICAgICAgfSBjYXRjaCAoZXgpIHt9CiAgICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5");
    sb.append("XTsKICAgICAgICB9CiAgICAgICAgaWYgKGtleSBpbiB2aWV3VW5TdWJCeUtleSkgewogICAgICAgICAg");
    sb.append("ZmlyZV91bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAgICAgICAgIGRlbGV0ZSB2aWV3VW5TdWJC");
    sb.append("eUtleVtrZXldOwogICAgICAgIH0KICAgICAgfSwKICAgICAgIn4iOiBmdW5jdGlvbiAob3JkKSB7CiAg");
    sb.append("ICAgICAgaWYgKG9yZCA9PSBudWxsKSB7CiAgICAgICAgICBraWxsKCk7CiAgICAgICAgICByZXR1cm47");
    sb.append("CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsgPSBvcmQubGVuZ3RoIC0gMTsgayA+PSAwOyBrLS0p");
    sb.append("IHsKICAgICAgICAgIHZhciBiZWZvcmUgPSBzaWJsaW5nRG9tID09IG51bGwgPyBwYXJlbnREb20uZmly");
    sb.append("c3RDaGlsZCA6IHNpYmxpbmdEb20ubmV4dFNpYmxpbmc7CiAgICAgICAgICBwYXJlbnREb20uaW5zZXJ0");
    sb.append("QmVmb3JlKGRvbUJ5S2V5W29yZFtrXV0sIGJlZm9yZSk7CiAgICAgICAgfQogICAgICAgIHBhcmVudERv");
    sb.append("bS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgib3JkZXJlZCIpKTsKICAgICAgICBpZiAoc2lnbmFscy5p");
    sb.append("c05ldykgewogICAgICAgICAgcGFyZW50RG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJuZXciKSk7");
    sb.append("CiAgICAgICAgICBzaWduYWxzLmlzTmV3ID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9Owog");
    sb.append("ICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIHNlbGYuZmlkYmFzaXMgPSAwOwog");
    sb.append("IHNlbGYuRkEgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgcnhvYmosIHVzZURvbWFpbiwgbWFrZXIpIHsK");
    sb.append("CiAgICB2YXIgaWQgPSAiX2F1dG9fZmlkXyIgKyBzZWxmLmZpZGJhc2lzOwogICAgc2VsZi5maWRiYXNp");
    sb.append("cysrOwoKICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICBp");
    sb.append("bnB1dC5pZCA9IGlkOwogICAgaW5wdXQudHlwZSA9ICJmaWxlIjsKICAgIGlucHV0LnN0eWxlLmRpc3Bs");
    sb.append("YXkgPSAibm9uZSI7CiAgICBpbnB1dC5pZ25vcmVfYnVpbGRfb2JqZWN0ID0gdHJ1ZTsKICAgIGRvbS5h");
    sb.append("cHBlbmRDaGlsZChpbnB1dCk7CiAgICB2YXIgdmFsdWVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgi");
    sb.append("ZGl2Iik7CiAgICBkb20uYXBwZW5kQ2hpbGQodmFsdWVzKTsKCiAgICB2YXIgbGFiZWwgPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwogICAgbGFiZWwuaHRtbEZvciA9IGlkOwogICAgbWFrZXIo");
    sb.append("c3RhdGUsIGxhYmVsKTsKICAgIGRvbS5hcHBlbmRDaGlsZChsYWJlbCk7CgogICAgLy8gVE9ETzogaW5k");
    sb.append("ZXggbGFiZWwgY2hpbGRyZW4KCiAgICB2YXIgaGFuZGxlX2ZpbmRpbmdfZmlsZSA9IGZ1bmN0aW9uKCkg");
    sb.append("ewogICAgICBjb25zb2xlLmxvZygicGlja2luZyBhIGZpbGUiKTsKICAgIH07CiAgICB2YXIgaGFuZGxl");
    sb.append("X3N0YXJ0ZWQgPSBmdW5jdGlvbigpIHsKICAgICAgY29uc29sZS5sb2coInVwbG9hZCBzdGFydGVkIik7");
    sb.append("CiAgICB9OwogICAgdmFyIGhhbmRsZV9mYWlsdXJlID0gZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgIGNv");
    sb.append("bnNvbGUubG9nKCJmYWlsZWQ6IiArIHJlYXNvbik7CiAgICB9OwogICAgdmFyIGhhbmRsZV9zdGF0dXMg");
    sb.append("PSBmdW5jdGlvbihhdCwgbXgpIHsKICAgICAgY29uc29sZS5sb2coInVwbG9hZCBzdGF0dXM6IiArIGF0");
    sb.append("ICsgIi8iICsgbXgpOwogICAgfTsKICAgIHZhciBoYW5kbGVfc3VjY2VzcyA9IGZ1bmN0aW9uKGlkKSB7");
    sb.append("CiAgICAgIHZhciBpZEFzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAg");
    sb.append("ICAgIGlkQXNFbGVtZW50LnR5cGUgPSAiaGlkZGVuIjsKICAgICAgaWRBc0VsZW1lbnQubmFtZSA9IHJ4");
    sb.append("b2JqLm5hbWU7CiAgICAgIGlkQXNFbGVtZW50LnZhbHVlID0gaWQ7CiAgICAgIGlmICghaWRBc0VsZW1l");
    sb.append("bnQubmFtZS5lbmRzV2l0aCgiKyIpKSB7CiAgICAgICAgbnVrZSh2YWx1ZXMpOwogICAgICB9CiAgICAg");
    sb.append("IHZhbHVlcy5hcHBlbmRDaGlsZChpZEFzRWxlbWVudCk7CiAgICAgIC8vIFRPRE86IGFkZCBhIHByZXZp");
    sb.append("ZXcgdGhpbmd5CiAgICB9OwogICAgbGFiZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVf");
    sb.append("ZmluZGluZ19maWxlKTsKICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICdjaGFuZ2UnLAog");
    sb.append("ICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgaGFuZGxlX3N0YXJ0ZWQoKTsKICAgICAgICB2YXIgZmls");
    sb.append("ZXMgPSBpbnB1dC5maWxlczsKICAgICAgICBpZiAoZmlsZXMubGVuZ3RoICE9IDEpIHsKICAgICAgICAg");
    sb.append("IHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIGZpbGUgPSBmaWxlc1swXTsKICAgICAgICAvLyBy");
    sb.append("ZXNvbHZlIGlkZW50aXR5CiAgICAgICAgdmFyIGlkTG9va3VwID0gc2VsZi5JRChyeG9iai5pZGVudGl0");
    sb.append("eSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhvYmoucmVkaXJlY3Q7IH0pOwogICAgICAgIGlmIChpZExv");
    sb.append("b2t1cC5hYm9ydCkgewogICAgICAgICAgY29uc29sZS5sb2coImFib3J0Iik7CiAgICAgICAgICByZXR1");
    sb.append("cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAg");
    sb.append("ICByZWFkZXIub25sb2FkID0gKGV2dCkgPT4gewogICAgICAgICAgdmFyIHU4ID0gbmV3IFVpbnQ4QXJy");
    sb.append("YXkoIGV2dC50YXJnZXQucmVzdWx0ICk7CiAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSB7CiAgICAgICAg");
    sb.append("ICAgIHB0cjogbnVsbCwKICAgICAgICAgICAgYXQ6IDAsCiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9u");
    sb.append("KGNodW5rUmVxdWVzdCkgewogICAgICAgICAgICAgIHZhciBzeiA9IGNodW5rUmVxdWVzdC5jaHVua19y");
    sb.append("ZXF1ZXN0X3NpemU7CiAgICAgICAgICAgICAgdmFyIGF0ID0gcHJvZ3Jlc3MuYXQ7CiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG14ID0gTWF0aC5taW4oYXQgKyBzeiwgdTgubGVuZ3RoKTsKICAgICAgICAgICAgICBpZiAo");
    sb.append("YXQgPT0gbXgpIHsKICAgICAgICAgICAgICAgIHByb2dyZXNzLnB0ci5maW5pc2goewogICAgICAgICAg");
    sb.append("ICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaGFwcHkpIHsKICAgICAgICAgICAgICAgICAgICBoYW5k");
    sb.append("bGVfc3VjY2VzcyhoYXBweS5hc3NldElkKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAg");
    sb.append("ICAgICAgZmFpbHVyZSA6IGhhbmRsZV9mYWlsdXJlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAg");
    sb.append("ICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHNsaWNlZCA9IHU4LnNsaWNlKGF0LCBteCk7");
    sb.append("CiAgICAgICAgICAgICAgICBhdCA9IG14OwogICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYXQgPSBhdDsK");
    sb.append("ICAgICAgICAgICAgICAgIHZhciBiNjQgPSBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uc2xpY2Vk");
    sb.append("KSk7CiAgICAgICAgICAgICAgICBwcm9ncmVzcy5wdHIuYXBwZW5kKCJuL2EiLCBiNjQsIHsKICAgICAg");
    sb.append("ICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHNlcSkgewogICAgICAgICAgICAgICAgICAgIGhh");
    sb.append("bmRsZV9zdGF0dXMoYXQsIG14KQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBm");
    sb.append("YWlsdXJlIDogaGFuZGxlX2ZhaWx1cmUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0K");
    sb.append("ICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmFpbHVyZTogaGFuZGxlX2ZhaWx1cmUsCiAgICAgICAg");
    sb.append("ICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHt9CiAgICAgICAgICB9OwogICAgICAgICAgaWYgKHVzZURv");
    sb.append("bWFpbikgewogICAgICAgICAgICBwcm9ncmVzcy5wdHIgPSBzdGF0ZS5zZXJ2aWNlLkF0dGFjaG1lbnRT");
    sb.append("dGFydEJ5RG9tYWluKGlkTG9va3VwLmlkZW50aXR5LCBzZWxmLmRvbWFpbiwgZmlsZS5uYW1lLCBmaWxl");
    sb.append("LnR5cGUsIHByb2dyZXNzKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHByb2dyZXNzLnB0");
    sb.append("ciA9IHN0YXRlLnNlcnZpY2UuQXR0YWNobWVudFN0YXJ0KGlkTG9va3VwLmlkZW50aXR5LCByeG9iai5z");
    sb.append("cGFjZSwgcnhvYmoua2V5LCBmaWxlLm5hbWUsIGZpbGUudHlwZSwgcHJvZ3Jlc3MpOwogICAgICAgICAg");
    sb.append("fQogICAgICAgIH07CiAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgICB9");
    sb.append("KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uLiByeDptb25pdG9yPSJzdGF0ZS1wYXRoIiByeDpy");
    sb.append("aXNlPSJjb21tYW5kcy4uLiIgcng6ZmFsbD0iY29tbWFuZHMuLi4iCiAgc2VsZi5NTiA9IGZ1bmN0aW9u");
    sb.append("IChkb20sIHN0YXRlLCBuYW1lLCBza2lwRmlyc3QsIGRlbGF5KSB7CiAgICB2YXIgc3ViID0gZnVuY3Rp");
    sb.append("b24gKHZhbHVlKSB7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHZh");
    sb.append("ciBuID0gMDsKICAgICAgICB0cnkgewogICAgICAgICAgbiA9IHR5cGVvZiAodmFsdWUpID09ICdudW1i");
    sb.append("ZXInID8gdmFsdWUgOiBwYXJzZUludCh2YWx1ZSk7CiAgICAgICAgfSBjYXRjaCAoZmFpbGVkUGFyc2lu");
    sb.append("Z04pIHsKICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PSAidHJ1ZSIpIHsKICAg");
    sb.append("ICAgICAgICAgbiA9IDE7CiAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1");
    sb.append("ZSA9PSAiZmFsc2UiKSB7CiAgICAgICAgICAgIG4gPSAwOwogICAgICAgICAgfQogICAgICAgIH0KICAg");
    sb.append("ICAgICBpZiAodGhpcy5maXJzdCkgewogICAgICAgICAgdGhpcy5hdCA9IG47CiAgICAgICAgICB0aGlz");
    sb.append("LmZpcnN0ID0gZmFsc2U7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICh0aGlz");
    sb.append("LmF0IDwgbikgewogICAgICAgICAgdmFyIGUgPSBuZXcgRXZlbnQoInJpc2UiKTsKICAgICAgICAgIGRv");
    sb.append("bS5kaXNwYXRjaEV2ZW50KGUpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5hdCA+IG4pIHsKICAgICAg");
    sb.append("ICAgIHZhciBlID0gbmV3IEV2ZW50KCJmYWxsIik7CiAgICAgICAgICBkb20uZGlzcGF0Y2hFdmVudChl");
    sb.append("KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5hdCA9IG47CiAgICAgIH0uYmluZCh0aGlzKSwgdGhpcy5k");
    sb.append("ZWxheSk7CiAgICB9LmJpbmQoe2F0Oi0xLCBmaXJzdDpza2lwRmlyc3QsIGRlbGF5OmRlbGF5ID8gZGVs");
    sb.append("YXkgOiAxMH0pOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJ");
    sb.append("TUU6IDx0YWcgLi4uIHJ4OnJlcGVhdD0kPgogIHNlbGYuUlAgPSBmdW5jdGlvbiAocGFyZW50RG9tLCBz");
    sb.append("dGF0ZSwgbmFtZSwgZXhwYW5kVmlldywgbWFrZXIsIGhpZGVPblplcm8pIHsKICAgIHZhciBpdF9zdGF0");
    sb.append("ZSA9IHNlbGYucElFKHN0YXRlLCAiJCIgKyBuYW1lLCBleHBhbmRWaWV3KTsKICAgIGlmIChoaWRlT25a");
    sb.append("ZXJvKSB7CiAgICAgIHBhcmVudERvbS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgfQogICAgdmFy");
    sb.append("IHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgbiA9IDA7CiAgICAgIHRyeSB7CiAgICAg");
    sb.append("ICAgbiA9IHR5cGVvZiAodmFsdWUpID09ICdudW1iZXInID8gdmFsdWUgOiBwYXJzZUludCh2YWx1ZSk7");
    sb.append("CiAgICAgIH0gY2F0Y2ggKGZhaWxlZFBhcnNpbmdOKSB7CiAgICAgIH0KICAgICAgaWYgKGhpZGVPblpl");
    sb.append("cm8pIHsKICAgICAgICBpZiAobiA8PSAwKSB7CiAgICAgICAgICBwYXJlbnREb20uc3R5bGUuZGlzcGxh");
    sb.append("eSA9ICJub25lIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcGFyZW50RG9tLnN0eWxlLmRpc3Bs");
    sb.append("YXkgPSAiIjsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIGlzTmV3ID0gZmFsc2U7CiAgICAgIHdo");
    sb.append("aWxlICh0aGlzLmF0IDwgbiAtIDEpIHsKICAgICAgICB0aGlzLmF0ICsrOwogICAgICAgIHRoaXMudHJh");
    sb.append("Y2sgKys7CiAgICAgICAgdmFyIG5ld19zdGF0ZSA9IGZvcmsoc2VsZi5wSUUoaXRfc3RhdGUsIHRoaXMu");
    sb.append("dHJhY2sgKyAiIiwgZXhwYW5kVmlldykpOwogICAgICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsK");
    sb.append("ICAgICAgICB2YXIgZG9tID0gbWFrZXIoc2VsZi5wRChuZXdfc3RhdGUpKTsKICAgICAgICB0aGlzLml0");
    sb.append("ZW1zW3RoaXMuYXRdID0ge3Vuc3ViOnVuc3ViLCBkb206ZG9tfTsKICAgICAgICBwYXJlbnREb20uYXBw");
    sb.append("ZW5kKGRvbSk7CiAgICAgICAgaWYgKGV4cGFuZFZpZXcpIHsKICAgICAgICAgIHN0YXRlLnZpZXcudHJl");
    sb.append("ZS51cGRhdGUocGF0aF90byhuZXdfc3RhdGUudmlldywgeyIkaW5kZXgiOiB0aGlzLnRyYWNrfSkpOwog");
    sb.append("ICAgICAgIH0KICAgICAgICBzdWJzY3JpYmVfc3RhdGUobmV3X3N0YXRlLCB1bnN1Yik7CiAgICAgICAg");
    sb.append("aXNOZXcgPSB0cnVlOwogICAgICB9CiAgICAgIHdoaWxlICh0aGlzLmF0ID49IG4gJiYgdGhpcy5hdCA+");
    sb.append("PSAwKSB7CiAgICAgICAgZmlyZV91bnN1Yih0aGlzLml0ZW1zW3RoaXMuYXRdLnVuc3ViKTsKICAgICAg");
    sb.append("ICBwYXJlbnREb20ucmVtb3ZlQ2hpbGQodGhpcy5pdGVtc1t0aGlzLmF0XS5kb20pOwogICAgICAgIHRo");
    sb.append("aXMuaXRlbXNbdGhpcy5hdF0gPSBudWxsOwogICAgICAgIGRlbGV0ZSB0aGlzLml0ZW1zW3RoaXMuYXRd");
    sb.append("OwogICAgICAgIHRoaXMuYXQtLTsKICAgICAgfQogICAgICBpZiAoaXNOZXcpIHsKICAgICAgICBwYXJl");
    sb.append("bnREb20uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoIm5ldyIpKTsKICAgICAgfQogICAgfS5iaW5kKHtp");
    sb.append("dGVtczpbXSwgYXQ6LTEsIHRyYWNrOjB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsK");
    sb.append("ICB9CiAgdmFyIGZpbmQgPSBmdW5jdGlvbiAoc3RhdGUsIGNoYW5uZWwsIGtleSwgdmFsdWUpIHsKICAg");
    sb.append("IGlmIChjaGFubmVsIGluIHN0YXRlWyJkYXRhIl0uY29ubmVjdGlvbi5vdXRzdGFuZGluZykgewogICAg");
    sb.append("ICB2YXIgYXJyID0gc3RhdGVbImRhdGEiXS5jb25uZWN0aW9uLm91dHN0YW5kaW5nW2NoYW5uZWxdLm9w");
    sb.append("dGlvbnM7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXJyLmxlbmd0aDsgaysrKSB7CiAgICAgICAg");
    sb.append("dmFyIHMgPSBhcnJba107CiAgICAgICAgaWYgKGtleSBpbiBzICYmIHNba2V5XSA9PSB2YWx1ZSkgewog");
    sb.append("ICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAg");
    sb.append("fSBlbHNlIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfTsKCiAgdmFyIGN1c3RvbXMgPSB7fTsK");
    sb.append("CiAgc2VsZi5QUkNVQUMgPSBmdW5jdGlvbiAobmFtZSwgZm9vKSB7CiAgICBjdXN0b21zW25hbWVdID0g");
    sb.append("Zm9vOwogIH07CgogIHNlbGYuZXhDQyA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBjdXN0b21D");
    sb.append("b21tYW5kTmFtZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgaWYgKGN1c3RvbUNvbW1hbmROYW1lIGluIGN1c3RvbXMpIHsKICAgICAgICBjdXN0b21zW2N1");
    sb.append("c3RvbUNvbW1hbmROYW1lXShzdGF0ZSwgZG9tKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gY3Vz");
    sb.append("dG9tIGV2ZW50IG9uIGZvcm1zOyByeDpzdWNjZXNzPSIuLi4iCiAgdmFyIGZpcmVfc3VjY2VzcyA9IGZ1");
    sb.append("bmN0aW9uIChmb3JtKSB7CiAgICBmb3JtLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJzdWNjZXNzIikp");
    sb.append("OwogICAgZm9ybS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgic3VibWl0dGVkIikpOwogIH07CiAgc2Vs");
    sb.append("Zi5maXJlX3N1Y2Nlc3MgPSBmaXJlX3N1Y2Nlc3M7CgogIC8vIGN1c3RvbSBldmVudCBvbiBmb3Jtczsg");
    sb.append("cng6ZmFpbGVkPSIuLi4iCiAgdmFyIGZpcmVfZmFpbHVyZSA9IGZ1bmN0aW9uIChkb20sIG1zZykgewog");
    sb.append("ICAgdmFyIGUgPSBuZXcgRXZlbnQoImZhaWx1cmUiKTsKICAgIGUubWVzc2FnZSA9IG1zZzsKICAgIGNv");
    sb.append("bnNvbGUuZXJyb3IobXNnKTsKICAgIGRvbS5kaXNwYXRjaEV2ZW50KGUpOwogIH07CiAgc2VsZi5maXJl");
    sb.append("X2ZhaWx1cmUgPSBmaXJlX2ZhaWx1cmU7CgogIHNlbGYuYUNDID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRl");
    sb.append("LCBjdXN0b21Db21tYW5kTmFtZSkgewogICAgdmFyIHNpZ25hbCA9IGZ1bmN0aW9uIChtc2cpIHsKICAg");
    sb.append("ICAgaWYgKHNpZ25hbCA9PSBudWxsKSB7CiAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICB9");
    sb.append("IGVsc2UgewogICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCBtc2cpOwogICAgICB9CiAgICB9OwogICAg");
    sb.append("Zm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGlmIChj");
    sb.append("dXN0b21Db21tYW5kTmFtZSBpbiBjdXN0b21zKSB7CiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7");
    sb.append("CiAgICAgICAgdmFyIG9iaiA9IGdldF9mb3JtKGZvcm0sIHt9KTsKICAgICAgICBjdXN0b21zW2N1c3Rv");
    sb.append("bUNvbW1hbmROYW1lXShvYmosIHN0YXRlLCBzaWduYWwsIHNlbGYpOwogICAgICAgIGZpcmVfc3VjY2Vz");
    sb.append("cyhmb3JtKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0");
    sb.append("byBmaW5kICciICsgY3VzdG9tQ29tbWFuZE5hbWUgKyAiJyIpOwogICAgICB9CiAgICB9LCB0cnVlKTsK");
    sb.append("ICB9OwoKICB2YXIgbWFrZV9jaG9pY2VfYXJyYXkgPSBmdW5jdGlvbiAoc3RhdGUsIGNoYW5uZWwpIHsK");
    sb.append("ICAgIHZhciBjaG9pY2VzID0gc3RhdGUuZGF0YS5jb25uZWN0aW9uLmNob2ljZXM7CiAgICBpZiAoIShj");
    sb.append("aGFubmVsIGluIGNob2ljZXMpKSB7CiAgICAgIGNob2ljZXNbY2hhbm5lbF0gPSB7fTsKICAgIH0KICAg");
    sb.append("IHZhciBjaG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxdOwogICAgdmFyIGFyciA9IFtdOwogICAgZm9yICh2");
    sb.append("YXIgaWQgaW4gY2hvaWNlKSB7CiAgICAgIGFyci5wdXNoKGNob2ljZVtpZF0pOwogICAgfQogICAgcmV0");
    sb.append("dXJuIGFycjsKICB9CgogIHNlbGYuZXhGSU4gPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgY2hh");
    sb.append("bm5lbCkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAg");
    sb.append("dmFyIGFyciA9IG1ha2VfY2hvaWNlX2FycmF5KHN0YXRlLCBjaGFubmVsKTsKICAgICAgdmFyIGNsZWFy");
    sb.append("ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGRlbGV0ZSBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24uY2hvaWNl");
    sb.append("c1tjaGFubmVsXTsKICAgICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ub25jaG9pY2VzKGNoYW5uZWws");
    sb.append("IHt9KTsKICAgICAgfTsKICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5kKGNoYW5uZWws");
    sb.append("IGFyciwgewogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNsZWFy");
    sb.append("KCk7CiAgICAgICAgICBjb25zb2xlLmxvZygiZmFpbGVkOiIgKyByZWFzb24pOwogICAgICAgIH0sCiAg");
    sb.append("ICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIGNsZWFyKCk7CiAgICAg");
    sb.append("ICAgICBjb25zb2xlLmxvZygiU3VjY2Vzc3wiICsgcGF5bG9hZC5zZXEpOwogICAgICAgIH0KICAgICAg");
    sb.append("fSk7CiAgICB9KTsKICB9OwoKICBzZWxmLkZJTiA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUs");
    sb.append("IGNoYW5uZWwsIHNob3VsZEJlLCBfZXhwYW5kLCBtYWtlclRydWUsIG1ha2VyRmFsc2UpIHsKICAgIHZh");
    sb.append("ciBmaW5hbGl6ZSA9IHsKICAgICAgb3duZXI6IHBhcmVudCwKICAgICAgc2hvd246IGZhbHNlCiAgICB9");
    sb.append("OwogICAgYWRkX3Vuc3ViKGZpbmFsaXplKTsKCiAgICB2YXIgY2hhbmdlID0gZnVuY3Rpb24gKHNob3cp");
    sb.append("IHsKICAgICAgZmlyZV91bnN1YihmaW5hbGl6ZSk7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFy");
    sb.append("IHN0YXRlID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgaWYgKHNob3cgPT09IHNob3VsZEJlKSB7CiAg");
    sb.append("ICAgICAgbWFrZXJUcnVlKHBhcmVudCwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIG1ha2Vy");
    sb.append("RmFsc2UocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCBm");
    sb.append("aW5hbGl6ZSk7CiAgICB9OwoKICAgIGZpbmFsaXplLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAg");
    sb.append("dmFyIG91dCA9IHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLm91dHN0YW5kaW5nW2NoYW5uZWxdOwog");
    sb.append("ICAgICBpZiAoIShvdXQpKSByZXR1cm47CiAgICAgIHZhciBhcnIgPSBtYWtlX2Nob2ljZV9hcnJheShw");
    sb.append("cmlvclN0YXRlLCBjaGFubmVsKTsKICAgICAgdmFyIHJlc3VsdCA9ICgnbWluJyBpbiBvdXQgJiYgJ21h");
    sb.append("eCcgaW4gb3V0KSA/IChvdXQubWluIDw9IGFyci5sZW5ndGggJiYgYXJyLmxlbmd0aCA8PSBvdXQubWF4");
    sb.append("KSA6IHRydWU7CiAgICAgIGlmIChmaW5hbGl6ZS5ldmFsICE9IHJlc3VsdCkgewogICAgICAgIGZpbmFs");
    sb.append("aXplLmV2YWwgPSByZXN1bHQ7CiAgICAgICAgY2hhbmdlKGZpbmFsaXplLmV2YWwpOwogICAgICB9CiAg");
    sb.append("ICB9OwoKICAgIHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLnN1YnNjcmliZV9jaG9pY2UoY2hhbm5l");
    sb.append("bCwgZnVuY3Rpb24gKCkgewogICAgICBmaW5hbGl6ZS51cGRhdGUoKTsKICAgICAgLy8gVE9ETzogcmV0");
    sb.append("dXJuIHdoZXRoZXIgb3Igbm90IHRoaXMgbmVlZHMgdG8gYmUgYXhlZAogICAgICByZXR1cm4gdHJ1ZTsK");
    sb.append("ICAgIH0pOwogIH07CgogIHZhciBmb3JtX29mID0gZnVuY3Rpb24oZG9tKSB7CiAgICB2YXIgbmV4dCA9");
    sb.append("IGRvbTsKICAgIHdoaWxlIChuZXh0ICE9IG51bGwpIHsKICAgICAgaWYgKG5leHQudGFnTmFtZS50b1Vw");
    sb.append("cGVyQ2FzZSgpID09ICJGT1JNIikgewogICAgICAgIHJldHVybiBuZXh0OwogICAgICB9CiAgICAgIG5l");
    sb.append("eHQgPSBuZXh0LnBhcmVudEVsZW1lbnQ7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHZhciBy");
    sb.append("ZWdfZXZlbnQgPSBmdW5jdGlvbiAoc3RhdGUsIGRvbSwgdHlwZSwgcnVubmFibGUpIHsKICAgIC8vIFRP");
    sb.append("RE86IGNvbm5lY3RlZC9kaXNjb25uZWN0ZWQgYXMgc3BlY2lhbCBldmVudHMgdG8gY29uc2lkZXIKICAg");
    sb.append("IGlmICh0eXBlID09ICJjaGVjayIgfHwgdHlwZSA9PSAidW5jaGVjayIpIHsKICAgICAgZG9tLmFkZEV2");
    sb.append("ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogICAgICAgIGlmICh0aGlzLnR5cGUgPT0g");
    sb.append("ImNoZWNrIiAmJiBkb20uY2hlY2tlZCkgewogICAgICAgICAgcnVubmFibGUoKTsKICAgICAgICB9IGVs");
    sb.append("c2UgaWYgKHRoaXMudHlwZSA9PSAidW5jaGVjayIgJiYgIWRvbS5jaGVja2VkKSB7CiAgICAgICAgICBy");
    sb.append("dW5uYWJsZSgpOwogICAgICAgIH0KICAgICAgfS5iaW5kKHt0eXBlOnR5cGV9KSk7CiAgICB9IGVsc2Ug");
    sb.append("aWYgKHR5cGUgPT0gImxvYWQiKSB7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHJ1bm5hYmxlLCAxKTsK");
    sb.append("ICAgIH0gZWxzZSBpZiAodHlwZT09InN1Ym1pdCIgfHwgdHlwZT09InN1Ym1pdHRlZCIpIHsKICAgICAg");
    sb.append("d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGZvcm0gPSBmb3JtX29mKGRv");
    sb.append("bSk7CiAgICAgICAgaWYgKGZvcm0pIHsKICAgICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcih0eXBl");
    sb.append("LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkp");
    sb.append("IHsKICAgICAgICAgICAgICBydW5uYWJsZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAg");
    sb.append("ICAgICB9CiAgICAgIH0sIDEpOwogICAgfSBlbHNlIGlmICh0eXBlLnN0YXJ0c1dpdGgoImRlbGF5OiIp");
    sb.append("KSB7CiAgICAgIC8vIGRlbGF5IHdpbGwgcnVuIGFmdGVyICRkZWxheVRpbWVNUyBJRiB0aGUgZG9tIGVs");
    sb.append("ZW1lbnQgaXMgc3RpbGwgdmlzaWJsZSB0byB0aGUgZG9jdW1lbnQKICAgICAgdmFyIGRlbGF5VGltZU1T");
    sb.append("ID0gcGFyc2VJbnQodHlwZS5zdWJzdHJpbmcoNikpOwogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMoZG9tKSkgewogICAgICAg");
    sb.append("ICAgcnVubmFibGUoKTsKICAgICAgICB9CiAgICAgIH0sIGRlbGF5VGltZU1TKTsKICAgIH0gZWxzZSBp");
    sb.append("ZiAodHlwZSA9PSAic2V0dGxlIikgewogICAgICBzdGF0ZS5kYXRhLnRyZWUuYWRkX29uX3NldHRsZShm");
    sb.append("dW5jdGlvbigpIHsKICAgICAgICAvLyBpZiB0aGUgRE9NIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBib2R5");
    sb.append("LCB0aGVuIHJ1biB0aGUgY29kZQogICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkp");
    sb.append("IHsKICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAg");
    sb.append("ICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PSAic2V0dGxl");
    sb.append("LW9uY2UiKSB7CiAgICAgIHN0YXRlLmRhdGEudHJlZS5hZGRfb25fc2V0dGxlKGZ1bmN0aW9uKCkgewog");
    sb.append("ICAgICAgIC8vIGlmIHRoZSBET00gaGFzIGJlZW4gYWRkZWQgdG8gdGhlIGJvZHksIHRoZW4gcnVuIHRo");
    sb.append("ZSBjb2RlCiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMoZG9tKSkgewogICAgICAgICAg");
    sb.append("cnVubmFibGUoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9KTsKICAgIH0g");
    sb.append("ZWxzZSB7CiAgICAgIGlmICh0eXBlID09ICJjbGljayIpIHsKICAgICAgICBkb20uYWRkRXZlbnRMaXN0");
    sb.append("ZW5lcih0eXBlLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgdmFyIGZpcmUgPSB0cnVlOwogICAg");
    sb.append("ICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIGVsID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgICB3");
    sb.append("aGlsZSAoZWwgJiYgZmlyZSkgewogICAgICAgICAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ByZXZl");
    sb.append("bnQ6Y2xpY2snKSkgewogICAgICAgICAgICAgICAgZmlyZSA9IGZhbHNlOwogICAgICAgICAgICAgIH0K");
    sb.append("ICAgICAgICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IH0gY2F0Y2ggKGV4KSB7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZmlyZSkgewogICAgICAgICAg");
    sb.append("ICBydW5uYWJsZSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAg");
    sb.append("IGRvbS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIHJ1bm5hYmxlKTsKICAgICAgfQogICAgfQogIH0KCiAg");
    sb.append("Ly8gUlVOVElNRTogPHRhZyAuLi4gcng6ZXZlbnQ9InNpZ24tb3V0IiAuLi4+CiAgc2VsZi5iU08gPSBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBydW46IGZ1bmN0aW9uKCkgewogICAgICAgIHNl");
    sb.append("bGYuU0lHTk9VVCgpOwogICAgICB9LAogICAgICBtZXJnZSA6IGZ1bmN0aW9uKCkgeyByZXR1cm4ge307");
    sb.append("IH0KICAgIH07CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHNldDpuYW1l");
    sb.append("PXZhbHVlIC4uLiI+CiAgc2VsZi5iUyA9IGZ1bmN0aW9uIChkb20sIHN0YXRlLCBuYW1lLCB2YWx1ZSkg");
    sb.append("ewogICAgaWYgKHR5cGVvZiAodmFsdWUpID09ICJmdW5jdGlvbiIpIHsKICAgICAgcmV0dXJuIHsKICAg");
    sb.append("ICAgICBydW46IGZ1bmN0aW9uKCkge30sIC8vIGRvIG5vdGhpbmcsIHRoaXMgaXMgYSBzaW1wbGUgbWVy");
    sb.append("Z2UKICAgICAgICBtZXJnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgb2JqID0ge307CiAgICAg");
    sb.append("ICAgICBvYmpbbmFtZV0gPSB2YWx1ZSgpOwogICAgICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0");
    sb.append("ZS52aWV3LCBvYmopOwogICAgICAgICAgcmV0dXJuIGRlbHRhOwogICAgICAgIH0KICAgICAgfQogICAg");
    sb.append("fSBlbHNlIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSB2YWx1ZTsKICAgICAg");
    sb.append("dmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICByZXR1cm4gewogICAgICAg");
    sb.append("IHJ1bjogZnVuY3Rpb24oKSB7fSwgLy8gZG8gbm90aGluZywgdGhpcyBpcyBhIHNpbXBsZSBtZXJnZQog");
    sb.append("ICAgICAgIG1lcmdlOiBmdW5jdGlvbigpIHsgcmV0dXJuIGRlbHRhOyB9CiAgICAgIH0KICAgIH0KICB9");
    sb.append("OwoKICB2YXIgbWVyZ2VfZGVsdGEgPSBmdW5jdGlvbihhLCBiKSB7CiAgICBpZiAodHlwZW9mKGEpID09");
    sb.append("ICJvYmplY3QiICYmIHR5cGVvZihiKSA9PSAib2JqZWN0IikgewogICAgICB2YXIgcmVzdWx0ID0ge307");
    sb.append("CiAgICAgIGZvciAodmFyIGsgaW4gYSkgewogICAgICAgIGlmIChrIGluIGIpIHsKICAgICAgICAgIHJl");
    sb.append("c3VsdFtrXSA9IG1lcmdlX2RlbHRhKGFba10sIGJba10pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAg");
    sb.append("ICByZXN1bHRba10gPSBhW2tdOwogICAgICAgIH0KICAgICAgfQogICAgICBmb3IodmFyIGsgaW4gYikg");
    sb.append("ewogICAgICAgIGlmICghKGsgaW4gYSkpIHsKICAgICAgICAgIHJlc3VsdFtrXSA9IGJba107CiAgICAg");
    sb.append("ICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICByZXR1cm4gYTsKICB9Owog");
    sb.append("IHNlbGYuTUQgPSBtZXJnZV9kZWx0YTsKCiAgc2VsZi5vbkIgPSBmdW5jdGlvbihkb20sIHR5cGUsIHN0");
    sb.append("YXRlLCBhcnIpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbigpIHsKICAg");
    sb.append("ICAgdmFyIHN1bSA9IHt9OwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGFyci5sZW5ndGg7IGsrKykg");
    sb.append("ewogICAgICAgIHZhciBjbWQgPSBhcnJba107CiAgICAgICAgY21kLnJ1bigpOwogICAgICAgIHZhciB0");
    sb.append("b01lcmdlID0gY21kLm1lcmdlKCkKICAgICAgICBzdW0gPSBtZXJnZV9kZWx0YShzdW0sIHRvTWVyZ2Up");
    sb.append("OwogICAgICB9CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoc3VtKTsKICAgIH0pOwogIH07Cgog");
    sb.append("IC8vIGNob29zZQogIHNlbGYuZXhDSCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBuYW1lLCBj");
    sb.append("aGFubmVsLCBrZXkpIHsKICAgIHZhciBkZWNpZGUgPSB7IHZhbHVlOiBudWxsIH07CiAgICByZWdfZXZl");
    sb.append("bnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgcmVzdWx0ID0gZmluZChz");
    sb.append("dGF0ZSwgY2hhbm5lbCwga2V5LCBkZWNpZGUudmFsdWUpOwogICAgICBpZiAocmVzdWx0ICE9IG51bGwp");
    sb.append("IHsKICAgICAgICB2YXIgY2hvaWNlcyA9IHN0YXRlLmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwogICAg");
    sb.append("ICAgIGlmICghKGNoYW5uZWwgaW4gY2hvaWNlcykpIHsKICAgICAgICAgIGNob2ljZXNbY2hhbm5lbF0g");
    sb.append("PSB7fTsKICAgICAgICB9CiAgICAgICAgdmFyIGNob2ljZSA9IGNob2ljZXNbY2hhbm5lbF07CiAgICAg");
    sb.append("ICAgdmFyIHZhbEtleSA9IHJlc3VsdFtrZXldOwogICAgICAgIGlmICh2YWxLZXkgaW4gY2hvaWNlKSB7");
    sb.append("CiAgICAgICAgICBkZWxldGUgY2hvaWNlW3ZhbEtleV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg");
    sb.append("IGNob2ljZVt2YWxLZXldID0gcmVzdWx0OwogICAgICAgIH0KICAgICAgICBzdGF0ZS5kYXRhLmNvbm5l");
    sb.append("Y3Rpb24ub25jaG9pY2VzKGNoYW5uZWwsIGNob2ljZSk7CiAgICAgIH0KICAgIH0pOwogICAgc3Vic2Ny");
    sb.append("aWJlKHN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgZGVjaWRlLnZhbHVlID0gdmFs");
    sb.append("dWU7CiAgICB9KTsKICB9OwoKICAvLyBkZWNpZGUKICBzZWxmLmV4RCA9IGZ1bmN0aW9uIChkb20sIHR5");
    sb.append("cGUsIHN0YXRlLCBuYW1lLCBjaGFubmVsLCBrZXkpIHsKICAgIHZhciBkZWNpZGUgPSB7IHZhbHVlOiBu");
    sb.append("dWxsIH07CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICB2");
    sb.append("YXIgcmVzdWx0ID0gZmluZChzdGF0ZSwgY2hhbm5lbCwga2V5LCBkZWNpZGUudmFsdWUpOwogICAgICBp");
    sb.append("ZiAocmVzdWx0ICE9IG51bGwpIHsKICAgICAgICBsZXQgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsK");
    sb.append("ICAgICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbCwgcmVzdWx0LCB7CiAg");
    sb.append("ICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CgogICAgICAgICAgfSwKICAgICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTdWNj");
    sb.append("ZXNzfCIgKyBwYXlsb2FkLnNlcSArICI7bGF0ZW5jeT0iICsgKHBlcmZvcm1hbmNlLm5vdygpIC0gc3Rh");
    sb.append("cnQpKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBzdWJzY3JpYmUo");
    sb.append("c3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBkZWNpZGUudmFsdWUgPSB2YWx1ZTsK");
    sb.append("ICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBmaXJlOmNoYW5u");
    sb.append("ZWwgLi4uIiAuLi4+CiAgc2VsZi5vbkZSID0gZnVuY3Rpb24gKHN0YXRlLCBkb20sIHR5cGUsIGNoYW5u");
    sb.append("ZWwpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHN0");
    sb.append("YXRlLmRhdGEuY29ubmVjdGlvbi5wdHIuc2VuZChjaGFubmVsLCB7fSwgewogICAgICAgIHN1Y2Nlc3M6");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJTRU5UICciICsgY2hhbm5lbCArICIn");
    sb.append("Iik7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAg");
    sb.append("ICBjb25zb2xlLmxvZygiRkFJTEVEIFRPIEZJUkUgJyIgKyBjaGFubmVsICsgIicgRFVFOiIgKyByZWFz");
    sb.append("b24pOyAnJwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICB9CgogIC8vIFJVTlRJTUU6IDx0YWcg");
    sb.append("Li4gcng6ZXZlbnQ9Ii4uLiBmb3JjZS1hdXRoPW5hbWUsdG9rZW4gLi4uIj4KICBzZWxmLm9uRk9SQ0Vf");
    sb.append("QVVUSCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIGlkZW50aXR5TmFtZSwgaWRlbnRpdHkpIHsKICAgIHJl");
    sb.append("Z19ldmVudChudWxsLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgLy8gVE9ETzogcmVtb3Zl");
    sb.append("IHRoaXMKICAgICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdID0gaWRlbnRpdHk7CiAgICAgIGxvY2Fs");
    sb.append("U3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlOYW1lLCBpZGVudGl0eSk7CiAgICB9");
    sb.append("KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gdGU6bmFtZSAuLi4iPgog");
    sb.append("IHNlbGYub25UTSA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBuYW1lLCBveCwgb3kpIHsKICAg");
    sb.append("IHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIG9i");
    sb.append("aiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSB7CiAgICAgICAgeDpldmVudC5jbGllbnRYICsgd2luZG93");
    sb.append("LnNjcm9sbFggKyBveCwKICAgICAgICB5OmV2ZW50LmNsaWVudFkgKyB3aW5kb3cuc2Nyb2xsWSArIG95");
    sb.append("CiAgICAgIH07CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAg");
    sb.append("c3RhdGVbc3RhdGUuY3VycmVudF0udHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgfTsKCiAgLy8g");
    sb.append("UlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHRlOm5hbWUgLi4uIj4KICBzZWxmLm9uVEUgPSBm");
    sb.append("dW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20s");
    sb.append("IHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIgb2JqID0ge307CiAgICAgIG9ialtuYW1l");
    sb.append("XSA9IGV2ZW50Lm1lc3NhZ2U7CiAgICAgIGlmIChldmVudC5tZXNzYWdlKSB7CiAgICAgICAgdmFyIGRl");
    sb.append("bHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRd");
    sb.append("LnRyZWUudXBkYXRlKGRlbHRhKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRh");
    sb.append("ZyAuLiByeDpldmVudD0iLi4uIHJlc2V0IC4uLiI+CiAgc2VsZi5vUlNUID0gZnVuY3Rpb24gKGRvbSwg");
    sb.append("dHlwZSwgc3RhdGUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZl");
    sb.append("bnQpIHsKICAgICAgdmFyIGYgPSBmb3JtX29mKGRvbSk7CiAgICAgIGlmIChmICE9IG51bGwpIHsKICAg");
    sb.append("ICAgICBmLnJlc2V0KCk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4g");
    sb.append("cng6ZXZlbnQ9Ii4uLiByZXNldCAuLi4iPgogIHNlbGYub1JMRCA9IGZ1bmN0aW9uIChkb20sIHR5cGUs");
    sb.append("IHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7");
    sb.append("CiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSk7CiAgfTsKCiAgc2VsZi5iU0IgPSBmdW5jdGlv");
    sb.append("bihkb20pIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bjogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGYg");
    sb.append("PSBmb3JtX29mKGRvbSk7CiAgICAgICAgaWYgKGYgIT0gbnVsbCkgewogICAgICAgICAgdmFyIGUgPSBu");
    sb.append("ZXcgU3VibWl0RXZlbnQoJ3N1Ym1pdCcsIHsKICAgICAgICAgICAgJ2J1YmJsZXMnICAgIDogdHJ1ZSwK");
    sb.append("ICAgICAgICAgICAgJ2NhbmNlbGFibGUnIDogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBmLmRp");
    sb.append("c3BhdGNoRXZlbnQoZSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtZXJnZTogZnVuY3Rpb24oKSB7");
    sb.append("IHJldHVybiB7fTsgfQogICAgfTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIu");
    sb.append("Li4gc3VibWl0IC4uLiI+CiAgLy8gVE9ETzogREVQUkVDQVRFCiAgc2VsZi5vU0JNVCA9IGZ1bmN0aW9u");
    sb.append("IChkb20sIHR5cGUsIHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rp");
    sb.append("b24gKGV2ZW50KSB7CiAgICAgIHZhciBmID0gZm9ybV9vZihkb20pOwogICAgICBpZiAoZiAhPSBudWxs");
    sb.append("KSB7CiAgICAgICAgdmFyIGUgPSBuZXcgU3VibWl0RXZlbnQoJ3N1Ym1pdCcsIHsKICAgICAgICAgICdi");
    sb.append("dWJibGVzJyAgICA6IHRydWUsCiAgICAgICAgICAnY2FuY2VsYWJsZScgOiB0cnVlCiAgICAgICAgfSk7");
    sb.append("CiAgICAgICAgZi5kaXNwYXRjaEV2ZW50KGUpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyBSVU5U");
    sb.append("SU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gc3VibWl0OiRpZCAuLi4iPgogIHNlbGYub1NGSSA9IGZ1");
    sb.append("bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBpZCkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5");
    sb.append("cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIgZiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlk");
    sb.append("KGlkKTsKICAgICAgaWYgKGYgIT0gbnVsbCkgewogICAgICAgIHZhciBlID0gbmV3IFN1Ym1pdEV2ZW50");
    sb.append("KCdzdWJtaXQnLCB7CiAgICAgICAgICAnYnViYmxlcycgICAgOiB0cnVlLAogICAgICAgICAgJ2NhbmNl");
    sb.append("bGFibGUnIDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIGYuZGlzcGF0Y2hFdmVudChlKTsKICAgICAg");
    sb.append("fQogICAgfSk7CiAgfTsKCiAgc2VsZi5iTksgPSBmdW5jdGlvbiAoZG9tKSB7CiAgICByZXR1cm4gewog");
    sb.append("ICAgICBydW46IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBjdXIgPSBkb207CiAgICAgICAgd2hpbGUg");
    sb.append("KGN1ci50YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT0gIk5VQ0xFQVIiKSB7CiAgICAgICAgICBjdXIgPSBj");
    sb.append("dXIucGFyZW50RWxlbWVudDsKICAgICAgICB9CiAgICAgICAgaWYgKGN1ciAhPSBudWxsKSB7CiAgICAg");
    sb.append("ICAgICBudWtlKGN1cik7CiAgICAgICAgfQogICAgICB9LAogICAgICBtZXJnZTogZnVuY3Rpb24oKSB7");
    sb.append("fQogICAgfTsKICB9CgogIHNlbGYub05LID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUpIHsKICAg");
    sb.append("IHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGN1");
    sb.append("ciA9IGRvbTsKICAgICAgd2hpbGUgKGN1ci50YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT0gIk5VQ0xFQVIi");
    sb.append("KSB7CiAgICAgICAgY3VyID0gY3VyLnBhcmVudEVsZW1lbnQ7CiAgICAgIH0KICAgICAgaWYgKGN1ciAh");
    sb.append("PSBudWxsKSB7CiAgICAgICAgbnVrZShjdXIpOwogICAgICB9CiAgICB9KTsKICB9OwoKICBzZWxmLnBV");
    sb.append("cyA9IGZ1bmN0aW9uKGRvbSwgbXNEZWxheSkgewogICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9s");
    sb.append("bCcsIGZ1bmN0aW9uKGV2KSB7CiAgICAgIGlmIChkb20uaXNQcm90ZWN0ZWQpIHsKICAgICAgICAvLyBU");
    sb.append("T0RPOiBpZiBlbFRvU2Nyb2xsLmxhc3Rfc2Nyb2xsX2NvbW1hbmQgaXMgbWF4IGFuZCB0aGUgc2Nyb2xs");
    sb.append("IGlzIHRoZXJlLCB0aGVuIGxvd2VyIGlzUHJvdGVjdGVkCiAgICAgIH0KICAgICAgaWYgKGRvbS5pZ25v");
    sb.append("cmVFdmVudCB8fCBkb20uaXNQcm90ZWN0ZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAg");
    sb.append("ZG9tLmlzUHJvdGVjdGVkID0gdHJ1ZTsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7");
    sb.append("CiAgICAgICAgZG9tLmlzUHJvdGVjdGVkID0gZmFsc2U7CiAgICAgIH0sIG1zRGVsYXkpOwogICAgfSk7");
    sb.append("CiAgfTsKCiAgc2VsZi5vU0NSID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG9yaWdpbmFsQ29t");
    sb.append("bWFuZCkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewog");
    sb.append("ICAgICB2YXIgZWxUb1Njcm9sbCA9IGRvbTsKICAgICAgdmFyIGNvbW1hbmQgPSBvcmlnaW5hbENvbW1h");
    sb.append("bmQ7CiAgICAgIHdoaWxlIChjb21tYW5kLnN0YXJ0c1dpdGgoJ3BhcmVudC0nKSkgewogICAgICAgIGlm");
    sb.append("IChlbFRvU2Nyb2xsLnBhcmVudEVsZW1lbnQpIHsKICAgICAgICAgIGVsVG9TY3JvbGwgPSBlbFRvU2Ny");
    sb.append("b2xsLnBhcmVudEVsZW1lbnQ7CiAgICAgICAgfQogICAgICAgIGNvbW1hbmQgPSBjb21tYW5kLnN1YnN0");
    sb.append("cmluZyg3KTsKICAgICAgfQogICAgICBpZiAoZWxUb1Njcm9sbC5pc1Byb3RlY3RlZCkgewogICAgICAg");
    sb.append("IHJldHVybjsKICAgICAgfQogICAgICBlbFRvU2Nyb2xsLmlnbm9yZUV2ZW50ID0gdHJ1ZTsKICAgICAg");
    sb.append("d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgZWxUb1Njcm9sbC5pZ25vcmVFdmVu");
    sb.append("dCA9IGZhbHNlOwogICAgICB9LCAxMDApOwogICAgICBzd2l0Y2ggKGNvbW1hbmQpIHsKICAgICAgICBj");
    sb.append("YXNlICdtaW4nOiB7CiAgICAgICAgICBlbFRvU2Nyb2xsLmxhc3Rfc2Nyb2xsX2NvbW1hbmQgPSAnbWlu");
    sb.append("JzsKICAgICAgICAgIGVsVG9TY3JvbGwuc2Nyb2xsVG8oMCwgMCk7CiAgICAgICAgICByZXR1cm47CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGNhc2UgJ21heCc6IHsKICAgICAgICAgIGVsVG9TY3JvbGwubGFzdF9zY3Jv");
    sb.append("bGxfY29tbWFuZCA9ICdtYXgnOwogICAgICAgICAgZWxUb1Njcm9sbC5zY3JvbGxUbygwLCBlbFRvU2Ny");
    sb.append("b2xsLnNjcm9sbEhlaWdodCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9");
    sb.append("KTsKICB9OwoKICBzZWxmLm9VQ0sgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSkgewogICAgcmVn");
    sb.append("X2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICBkb20uY2hlY2tl");
    sb.append("ZCA9IGZhbHNlOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4u");
    sb.append("IGdvdG86dXJpIC4uLiI+CiAgc2VsZi5vbkdPID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIHZh");
    sb.append("bHVlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICB2");
    sb.append("YXIgdXJpID0gKHR5cGVvZiAodmFsdWUpID09ICJmdW5jdGlvbiIpID8gdmFsdWUoKSA6IHZhbHVlOwog");
    sb.append("ICAgICBzZWxmLmdvdG8odXJpLCBmYWxzZSk7CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFn");
    sb.append("IC4uIHJ4OmV2ZW50PSIuLi4gdG9nZ2xlOm5hbWUgLi4uIj4KICBzZWxmLm9uVCA9IGZ1bmN0aW9uIChk");
    sb.append("b20sIHR5cGUsIHN0YXRlLCBuYW1lKSB7CiAgICB2YXIgY2FwdHVyZWQgPSB7IHZhbHVlOiBmYWxzZSB9");
    sb.append("OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9i");
    sb.append("aiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSAhY2FwdHVyZWQudmFsdWU7CiAgICAgIHZhciBkZWx0YSA9");
    sb.append("IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0");
    sb.append("YSk7CiAgICB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAg");
    sb.append("ICAgIGNhcHR1cmVkLnZhbHVlID0gdmFsdWUgPT0gdHJ1ZTsKICAgIH0pOwogIH07CgogIHZhciBvcmRl");
    sb.append("cl90b2dnbGUgPSBmdW5jdGlvbihwcmlvciwgdmFsKSB7CiAgICB2YXIgcGFydHMgPSBwcmlvci5zcGxp");
    sb.append("dCgiLCIpOwogICAgdmFyIHByZWZpeCA9ICcnOwogICAgdmFyIG5leHQgPSBbIiJdOwogICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBwYXJ0cy5sZW5ndGg7IGsrKykgewogICAgICBpZiAocGFydHNba10gPT0gIiIp");
    sb.append("IHsKICAgICAgICBjb250aW51ZTsKICAgICAgfSBlbHNlIGlmICh2YWwgPT0gcGFydHNba10pIHsKICAg");
    sb.append("ICAgICBwcmVmaXggPSAnLSc7CiAgICAgIH0gZWxzZSBpZiAoIi0iICsgdmFsID09cGFydHNba10pIHsK");
    sb.append("ICAgICAgICBwcmVmaXggPSAnJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXh0LnB1c2gocGFydHNb");
    sb.append("a10pOwogICAgICB9CiAgICB9CiAgICBuZXh0WzBdID0gcHJlZml4ICsgdmFsOwogICAgcmV0dXJuIG5l");
    sb.append("eHQuam9pbigiLCIpOwogIH0KCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIG9yZGVy");
    sb.append("LXRvZ2dsZTpuYW1lPXZhbCAuLi4iPgogIHNlbGYub25PVCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0");
    sb.append("YXRlLCBuYW1lLCB2YWwpIHsKICAgIHZhciBjYXB0dXJlZCA9IHsgdmFsdWU6ICIiIH07CiAgICByZWdf");
    sb.append("ZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgb2JqID0ge307CiAg");
    sb.append("ICAgIG9ialtuYW1lXSA9IG9yZGVyX3RvZ2dsZShjYXB0dXJlZC52YWx1ZSwgdmFsKTsKICAgICAgdmFy");
    sb.append("IGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZVtzdGF0ZS5jdXJyZW50");
    sb.append("XS50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgZnVu");
    sb.append("Y3Rpb24gKHZhbHVlKSB7CiAgICAgIGNhcHR1cmVkLnZhbHVlID0gdmFsdWU7CiAgICB9KTsKICB9OwoK");
    sb.append("ICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZGVsdGE6bmFtZT1kaWZmIiAuLi4iPgog");
    sb.append("IHNlbGYub25EID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG5hbWUsIGRpZmYpIHsKICAgIHZh");
    sb.append("ciBjYXB0dXJlZCA9IHsgdmFsdWU6IDAgfTsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gY2FwdHVyZWQu");
    sb.append("dmFsdWUgKyBkaWZmOwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAg");
    sb.append("ICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsKICAgIH0pOwogICAgc3Vi");
    sb.append("c2NyaWJlKHN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgaWYgKHR5cGVvZiAodmFs");
    sb.append("dWUpID09ICJudW1iZXIiKSB7CiAgICAgICAgY2FwdHVyZWQudmFsdWUgPSB2YWx1ZTsKICAgICAgfSBl");
    sb.append("bHNlIHsKICAgICAgICB2YXIgdmFsID0gcGFyc2VGbG9hdCh2YWx1ZSk7CiAgICAgICAgaWYgKCFpc05h");
    sb.append("Tih2YWwpKSB7CiAgICAgICAgICBjYXB0dXJlZC52YWx1ZSA9IHZhbDsKICAgICAgICB9CiAgICAgIH0K");
    sb.append("ICAgIH0pOwogIH07CiAgc2VsZi5DU0VOID0gZnVuY3Rpb24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgZXZh");
    sb.append("bFN0YXRlLCBjaGFubmVsLCBrZXksIG5hbWUsIHNob3VsZEJlLCBfZXhwYW5kLCBtYWtlclRydWUsIG1h");
    sb.append("a2VyRmFsc2UpIHsKICAgIHZhciBjaG9zZW4gPSB7CiAgICAgIHZhbHVlOiAiIiwKICAgICAgb3duZXI6");
    sb.append("IHBhcmVudCwKICAgICAgc2hvd246IGZhbHNlLAogICAgICBldmFsOiBudWxsCiAgICB9OwogICAgYWRk");
    sb.append("X3Vuc3ViKGNob3Nlbik7CiAgICB2YXIgY2hhbmdlID0gZnVuY3Rpb24gKHNob3cpIHsKICAgICAgZmly");
    sb.append("ZV91bnN1YihjaG9zZW4pOwogICAgICBudWtlKHBhcmVudCk7CiAgICAgIHZhciBzdGF0ZSA9IGZvcmso");
    sb.append("cHJpb3JTdGF0ZSk7CiAgICAgIGlmIChzaG93ID09PSBzaG91bGRCZSkgewogICAgICAgIG1ha2VyVHJ1");
    sb.append("ZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYWtlckZhbHNlKHBhcmVudCwg");
    sb.append("c3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgY2hvc2VuKTsKICAgIH07");
    sb.append("CgogICAgY2hvc2VuLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG91dCA9IHByaW9yU3Rh");
    sb.append("dGUuZGF0YS5jb25uZWN0aW9uLm91dHN0YW5kaW5nW2NoYW5uZWxdOwogICAgICBpZiAoIShvdXQpKSBy");
    sb.append("ZXR1cm47CgogICAgICB2YXIgY2hvaWNlcyA9IHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLmNob2lj");
    sb.append("ZXM7CiAgICAgIGlmICghKGNoYW5uZWwgaW4gY2hvaWNlcykpIHsKICAgICAgICBjaG9pY2VzW2NoYW5u");
    sb.append("ZWxdID0ge307CiAgICAgIH0KICAgICAgdmFyIGNob2ljZSA9IGNob2ljZXNbY2hhbm5lbF07CiAgICAg");
    sb.append("IHZhciByZXN1bHQgPSBjaG9zZW4udmFsdWUgaW4gY2hvaWNlOwogICAgICBpZiAoY2hvc2VuLmV2YWwg");
    sb.append("IT0gcmVzdWx0KSB7CiAgICAgICAgY2hvc2VuLmV2YWwgPSByZXN1bHQ7CiAgICAgICAgY2hhbmdlKGNo");
    sb.append("b3Nlbi5ldmFsKTsKICAgICAgfQogICAgfTsKCiAgICBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5z");
    sb.append("dWJzY3JpYmVfY2hvaWNlKGNoYW5uZWwsIGZ1bmN0aW9uICgpIHsKICAgICAgY2hvc2VuLnVwZGF0ZSgp");
    sb.append("OwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwoKICAgIHN1YnNjcmliZShldmFsU3RhdGUsIG5hbWUs");
    sb.append("IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBjaG9zZW4udmFsdWUgPSB2YWx1ZTsKICAgICAgY2hvc2Vu");
    sb.append("LnVwZGF0ZSgpOwogICAgfSk7CiAgfTsKCiAgc2VsZi5ERSA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9y");
    sb.append("U3RhdGUsIGV2YWxTdGF0ZSwgY2hhbm5lbCwga2V5LCBuYW1lLCBzaG91bGRCZSwgX2V4cGFuZCwgbWFr");
    sb.append("ZXJUcnVlLCBtYWtlckZhbHNlKSB7CiAgICB2YXIgZGVjaWRlID0gewogICAgICB2YWx1ZTogIiIsCiAg");
    sb.append("ICAgIG93bmVyOiBwYXJlbnQsCiAgICAgIHNob3duOiBmYWxzZSwKICAgICAgZXZhbDogbnVsbAogICAg");
    sb.append("fTsKICAgIGFkZF91bnN1YihkZWNpZGUpOwogICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9uIChzaG93KSB7");
    sb.append("CiAgICAgIGZpcmVfdW5zdWIoZGVjaWRlKTsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICB2YXIgc3Rh");
    sb.append("dGUgPSBmb3JrKHByaW9yU3RhdGUpOwogICAgICBpZiAoc2hvdyA9PT0gc2hvdWxkQmUpIHsKICAgICAg");
    sb.append("ICBtYWtlclRydWUocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWFrZXJGYWxz");
    sb.append("ZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfQogICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIGRlY2lk");
    sb.append("ZSk7CiAgICB9OwoKICAgIGRlY2lkZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciByZXN1");
    sb.append("bHQgPSBmaW5kKHByaW9yU3RhdGUsIGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKSAhPSBudWxsOwog");
    sb.append("ICAgICBpZiAoZGVjaWRlLmV2YWwgIT0gcmVzdWx0KSB7CiAgICAgICAgZGVjaWRlLmV2YWwgPSByZXN1");
    sb.append("bHQ7CiAgICAgICAgY2hhbmdlKGRlY2lkZS5ldmFsKTsKICAgICAgfQogICAgfTsKCiAgICBwcmlvclN0");
    sb.append("YXRlLmRhdGEuY29ubmVjdGlvbi5zdWJzY3JpYmUoY2hhbm5lbCwgZnVuY3Rpb24gKCkgewogICAgICBk");
    sb.append("ZWNpZGUudXBkYXRlKCk7CiAgICAgIC8vIFRPRE86IHJldHVybiB3aGV0aGVyIG9yIG5vdCB0aGlzIG5l");
    sb.append("ZWRzIHRvIGJlIGF4ZWQKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKCiAgICBzdWJzY3JpYmUoZXZh");
    sb.append("bFN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgZGVjaWRlLnZhbHVlID0gdmFsdWU7");
    sb.append("CiAgICAgIGRlY2lkZS51cGRhdGUoKTsKICAgIH0pOwogIH07CgogIHZhciBjb21tb25JZiA9IGZ1bmN0");
    sb.append("aW9uKHBhcmVudCwgb3JpZ2luYWxTdGF0ZSwgc2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2VyVHJ1ZSwg");
    sb.append("bWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpIHsKICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAg");
    sb.append("IGlmIChmb3JjZUhpZGluZykgewogICAgICBwYXJlbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAg");
    sb.append("IH0KICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIHNob3cgPSAodmFsdWUgPyB0");
    sb.append("cnVlIDogZmFsc2UpID09PSBzaG91bGRCZTsKICAgICAgaWYgKHRoaXMuc2hvd24gPT0gc2hvdykgewog");
    sb.append("ICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnNob3duID0gc2hvdzsKICAgICAgbnVrZShw");
    sb.append("YXJlbnQpOwogICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgdmFyIG5leHQgPSBzZWxmLnBEKGZv");
    sb.append("cmsob3JpZ2luYWxTdGF0ZSkpOwogICAgICBpZiAoc2hvdykgewogICAgICAgIGlmIChmb3JjZUhpZGlu");
    sb.append("ZykgewogICAgICAgICAgcGFyZW50LnN0eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICB9CiAgICAgICAg");
    sb.append("bWFrZXJUcnVlKHBhcmVudCwgbmV4dCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGZvcmNlSGlk");
    sb.append("aW5nKSB7CiAgICAgICAgICBwYXJlbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgICAgbWFrZXJGYWxzZShwYXJlbnQsIG5leHQpOwogICAgICAgIH0KICAgICAgfQog");
    sb.append("ICAgICBzdWJzY3JpYmVfc3RhdGUobmV4dCwgdW5zdWIpOwogICAgfS5iaW5kKHsgc2hvd246ICdubycg");
    sb.append("fSk7CiAgfQoKICAvLyBSVU5USU1FIHwgcng6aWYgLyByeDppZm5vdCA9ICJwYXRoMT1wYXRoMiIKICBz");
    sb.append("ZWxmLklGZXEgPSBmdW5jdGlvbiAocGFyZW50LCBvcmlnaW5hbFN0YXRlLCBxdWVyeVN0YXRlTGVmdCwg");
    sb.append("bmFtZUxlZnQsIHF1ZXJ5U3RhdGVSaWdodCwgbmFtZVJpZ2h0LCBzaG91bGRCZSwgZXhwYW5kVmlldywg");
    sb.append("bWFrZXJUcnVlLCBtYWtlckZhbHNlLCBmb3JjZUhpZGluZykgewogICAgdmFyIGNvbW1vbiA9IHtsZWZ0");
    sb.append("OmZhbHNlLCByaWdodDp0cnVlfTsKICAgIGNvbW1vbi5zID0gY29tbW9uSWYocGFyZW50LCBvcmlnaW5h");
    sb.append("bFN0YXRlLCBzaG91bGRCZSwgZXhwYW5kVmlldywgbWFrZXJUcnVlLCBtYWtlckZhbHNlLCBmb3JjZUhp");
    sb.append("ZGluZyk7CiAgICBjb21tb24uayA9IGRlYm91bmNlKDUsIGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnMo");
    sb.append("dGhpcy5sZWZ0ID09IHRoaXMucmlnaHQpOwogICAgfS5iaW5kKGNvbW1vbikpOwogICAgc3Vic2NyaWJl");
    sb.append("KHF1ZXJ5U3RhdGVMZWZ0LCBuYW1lTGVmdCwgZnVuY3Rpb24gKGxlZnQpIHsKICAgICAgdGhpcy5sZWZ0");
    sb.append("ID0gbGVmdDsKICAgICAgdGhpcy5rKCk7CiAgICB9LmJpbmQoY29tbW9uKSkKICAgIHN1YnNjcmliZShx");
    sb.append("dWVyeVN0YXRlUmlnaHQsIG5hbWVSaWdodCwgZnVuY3Rpb24gKHJpZ2h0KSB7CiAgICAgIHRoaXMucmln");
    sb.append("aHQgPSByaWdodDsKICAgICAgdGhpcy5rKCk7CiAgICB9LmJpbmQoY29tbW9uKSk7CiAgfTsKCiAgLyoq");
    sb.append("IHRoZSBhYm92ZSBzcGVha3MgdG8gYSBkZWVwIHBhdHRlcm4uIFdlIGNvdWxkIHRha2UgYW55IGV4cHJl");
    sb.append("c3Npb24gYW5kIHRoZW4gbGluZWFyaXplIGl0IGludG8gcmVhY3RpdmUgcGFydHMsIGFuZCB0aGVuIGFz");
    sb.append("c2VtYmxlIGEgc3RhdGVtZW50IHN0YXRlbWVudCBvbiB0aGUgZmx5LiBXZSBzaG91bGQgbG9vayBpbnRv");
    sb.append("IHVzaW5nIHRoZSBjb25kaXRpb24gbGFuZ3VhZ2UgZm9yIHRoaXMgKi8KCiAgLy8gUlVOVElNRSB8IHJ4");
    sb.append("OmlmIC8gcng6aWZub3QgPSAicGF0aCIKICBzZWxmLklGID0gZnVuY3Rpb24gKHBhcmVudCwgb3JpZ2lu");
    sb.append("YWxTdGF0ZSwgcXVlcnlTdGF0ZSwgbmFtZSwgc2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2VyVHJ1ZSwg");
    sb.append("bWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpIHsKICAgIHN1YnNjcmliZShxdWVyeVN0YXRlLCBuYW1lLCBj");
    sb.append("b21tb25JZihwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHNob3VsZEJlLCBleHBhbmRWaWV3LCBtYWtlclRy");
    sb.append("dWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5nKSk7CiAgfTsKCiAgLy8vIFJVTlRJTUUgfCByeDphY3Rp");
    sb.append("b249Y29weTpwYXRoCiAgc2VsZi5hQ1AgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIG5hbWUpIHsKICAg");
    sb.append("IGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQu");
    sb.append("cHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIG9iaiA9IGdldF9mb3JtKGZvcm0sIHt9KTsKICAgICAg");
    sb.append("aWYgKG5hbWUgIT0gIi4iICYmIG5hbWUgIT0gIiIpIHsKICAgICAgICB2YXIgbm8gPSB7fTsKICAgICAg");
    sb.append("ICBub1tuYW1lXSA9IG9iajsKICAgICAgICBvYmogPSBubzsKICAgICAgfQogICAgICB2YXIgZGVsdGEg");
    sb.append("PSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoZGVs");
    sb.append("dGEpOwogICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICB9LCB0cnVlKTsKICB9OwoKICBzZWxmLlZT");
    sb.append("UCA9IGZ1bmN0aW9uKGRvbSwgc3RhdGUsIHZhcnMpIHsKICAgIHZhciBzbSA9IHt9OwogICAgc20udmFy");
    sb.append("cyA9IHZhcnM7CiAgICBzbS5sYXN0ID0ge307CiAgICBzbS5wYXJhbXMgPSAiIjsKICAgIHNtLm1vZGUg");
    sb.append("PSAicmVwbGFjZSI7CiAgICBzbS5waW5nID0gZGVib3VuY2UoNTAwLCBmdW5jdGlvbigpIHsKICAgICAg");
    sb.append("aWYgKCFkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0K");
    sb.append("ICAgICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLnZhcnMubGVu");
    sb.append("Z3RoOyBrKyspIHsKICAgICAgICB2YXIgYXJnID0gdGhpcy52YXJzW2tdOwogICAgICAgIGlmIChhcmcg");
    sb.append("aW4gdGhpcy5sYXN0KSB7CiAgICAgICAgICBhcmdzLnB1c2goYXJnICsgIj0iICsgdGhpcy5sYXN0W2Fy");
    sb.append("Z10pOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgcmVzdWx0ID0gIj8iICthcmdzLmpvaW4oIiYi");
    sb.append("KTsKICAgICAgaWYgKHJlc3VsdCAhPSAiPyIgJiYgd2luZG93LmxvY2F0aW9uLnNlYXJjaCAhPT0gcmVz");
    sb.append("dWx0KSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgIG9iai52aWV3ZXJfc2VhcmNoX3F1ZXJ5");
    sb.append("ID0gcmVzdWx0OwogICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAg");
    sb.append("ICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsKICAgICAgICB0cnkgewogICAgICAgICAg");
    sb.append("d2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCAiIiwgZml4SHJlZih3aW5kb3cubG9jYXRpb24u");
    sb.append("cGF0aG5hbWUgKyByZXN1bHQpKTsKICAgICAgICB9IGNhdGNoKGZhaWxlZFRvUmVwbGFjZVN0YXRlKSB7");
    sb.append("CgogICAgICAgIH0KICAgICAgfQogICAgfS5iaW5kKHNtKSk7CiAgICBzdGF0ZS52aWV3LnRyZWUuc3Vi");
    sb.append("c2NyaWJlKGZ1bmN0aW9uKHMpIHsKICAgICAgdGhpcy5sYXN0ID0gczsKICAgICAgdGhpcy5waW5nKCk7");
    sb.append("CiAgICB9LmJpbmQoc20pKTsKICB9OwoKICBzZWxmLkYgPSBmdW5jdGlvbihvLGspIHsKICAgIGlmIChr");
    sb.append("IGluIG8pIHsKICAgICAgcmV0dXJuIG9ba107CiAgICB9CiAgICByZXR1cm4gIiI7CiAgfTsKCiAgLy8g");
    sb.append("UlVOVElNRSB8IDxpbnB1dCAuLi4gcng6c3luYz1wYXRoIC4uLj4KICBzZWxmLlNZID0gZnVuY3Rpb24g");
    sb.append("KGVsLCBzdGF0ZSwgbmFtZSwgbXMpIHsKICAgIHZhciB0eXBlID0gKCJ0eXBlIiBpbiBlbCkgPyBlbC50");
    sb.append("eXBlLnRvVXBwZXJDYXNlKCkgOiAidGV4dCI7CiAgICB2YXIgc2lnbmFsID0gZnVuY3Rpb24gKHZhbHVl");
    sb.append("KSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAgIHZhciBk");
    sb.append("ZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0");
    sb.append("ZShkZWx0YSk7CiAgICAgIGlmICh0aGlzLmRlZHVwZSAhPSB2YWx1ZSkgewogICAgICAgIHRoaXMuZGVk");
    sb.append("dXBlID0gdmFsdWU7CiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoImFmdGVyc3luYyIp");
    sb.append("KTsKICAgICAgfQogICAgfS5iaW5kKHtkZWR1cGU6IiJ9KTsKICAgIGlmICh0eXBlID09ICJDSEVDS0JP");
    sb.append("WCIpIHsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZGVib3VuY2UobXMsIGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICBzaWduYWwoZWwuY2hlY2tlZCA/IHRydWUgOiBmYWxzZSk7CiAgICAgIH0p");
    sb.append("KTsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHNpZ25hbChlbC5j");
    sb.append("aGVja2VkID8gdHJ1ZSA6IGZhbHNlKTsKICAgICAgfSwgMSk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT0g");
    sb.append("IlJBRElPIikgewogICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBkZWJvdW5jZShtcywg");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChlbC5jaGVja2VkKSB7CiAgICAgICAgICBzaWduYWwoZWwu");
    sb.append("dmFsdWUpOwogICAgICAgIH0KICAgICAgfSkpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGYgPSBkZWJv");
    sb.append("dW5jZShtcywgZnVuY3Rpb24gKCkgewogICAgICAgIHNpZ25hbChlbC52YWx1ZSk7CiAgICAgIH0pOwog");
    sb.append("ICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmKTsKICAgICAgZWwuYWRkRXZlbnRMaXN0");
    sb.append("ZW5lcigna2V5dXAnLCBmKQogICAgICBlbC5vbmtleXVwID0gZWwub25jaGFuZ2U7CiAgICAgIHdpbmRv");
    sb.append("dy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzaWduYWwoZWwudmFsdWUpOwogICAgICB9");
    sb.append("LCA1KTsKICAgIH0KICB9OwoKICB2YXIgZmlyc3RPY2N1ciA9IGZ1bmN0aW9uKGEsIGIpIHsKICAgIGlm");
    sb.append("IChhID4gMCAmJiBiID4gMCkgewogICAgICByZXR1cm4gTWF0aC5taW4oYSwgYik7CiAgICB9CiAgICBp");
    sb.append("ZiAoYSA+IDApIHsKICAgICAgcmV0dXJuIGE7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gYjsKICAg");
    sb.append("IH0KICB9OwogIC8vIEhFTFBFUiB8IGV4dHJhY3QgYWxsIHRoZSBpbnB1dHMgZnJvbSB0aGUgZ2l2ZW4g");
    sb.append("ZWxlbWVudCBhbmQgYnVpbGQgYW4gb2JqZWN0CiAgdmFyIGJ1aWxkX29iaiA9IGZ1bmN0aW9uIChlbCwg");
    sb.append("b2JqVG9JbnNlcnRJbnRvLCBwYXNzd29yZHMsIGlzUm9vdCkgewogICAgaWYgKGVsLnRhZ05hbWUudG9V");
    sb.append("cHBlckNhc2UoKSA9PSAiRk9STSIgJiYgIWlzUm9vdCkgewogICAgICAvLyBkb24ndCBjYXJlIGFib3V0");
    sb.append("IG5lc3RlZCBmb3JtcwogICAgICByZXR1cm47CiAgICB9CiAgICB2YXIgdXBwZXJUYWcgPSBlbC50YWdO");
    sb.append("YW1lLnRvVXBwZXJDYXNlKCk7CiAgICB2YXIganVzdFNldCA9IHVwcGVyVGFnID09ICJURVhUQVJFQSIg");
    sb.append("fHwgdXBwZXJUYWcgPT0gIlNFTEVDVCI7CiAgICB2YXIgaXNJbnB1dEJveCA9IHVwcGVyVGFnID09ICJJ");
    sb.append("TlBVVCI7CiAgICB2YXIgaXNGaWVsZFNldCA9IHVwcGVyVGFnID09ICJGSUVMRFNFVCI7CiAgICB2YXIg");
    sb.append("aXNQdWxsID0gdXBwZXJUYWcgPT0gIlBVTExWQUxVRSI7CiAgICB2YXIgaGFzTmFtZSA9ICJuYW1lIiBp");
    sb.append("biBlbDsKICAgIHZhciBpbnNlcnRBdCA9IG9ialRvSW5zZXJ0SW50bzsKICAgIC8vIHRoZSBhcHBseSBm");
    sb.append("dW5jdGlvbiBpcyBob3cgd2UgaW5qZWN0IHRoZSB2YWx1ZSBpbnRvIHRoZSBvYmplY3QKICAgIHZhciBh");
    sb.append("cHBseSA9IGZ1bmN0aW9uICh2YWwpIHsgfTsKCiAgICB2YXIgbmFtZSA9ICIiOwogICAgaWYgKGhhc05h");
    sb.append("bWUgJiYgKGp1c3RTZXQgfHwgaXNJbnB1dEJveCB8fCBpc0ZpZWxkU2V0IHx8IGlzUHVsbCkpIHsKICAg");
    sb.append("ICAgbmFtZSA9IGVsLm5hbWU7CiAgICAgIGlmIChuYW1lID09ICIiKSB7IC8vIHRoaXMgaXMgYSBzcGVj");
    sb.append("aWFsIG5hbWUgZm9yIHRoaW5ncyB0aGF0IGRvbid0IGdldCBwaWNrZWQgdXAKICAgICAgICByZXR1cm47");
    sb.append("CiAgICAgIH0KICAgICAgdmFyIGtEb3RPclNsYXNoID0gZmlyc3RPY2N1cihuYW1lLmluZGV4T2YoJy4n");
    sb.append("KSwgbmFtZS5pbmRleE9mKCcvJykpOwogICAgICB3aGlsZSAoa0RvdE9yU2xhc2ggPiAwKSB7CiAgICAg");
    sb.append("ICAgdmFyIHBhciA9IG5hbWUuc3Vic3RyaW5nKDAsIGtEb3RPclNsYXNoKTsKICAgICAgICBpZiAoIShw");
    sb.append("YXIgaW4gaW5zZXJ0QXQpKSB7CiAgICAgICAgICBpbnNlcnRBdFtwYXJdID0ge307CiAgICAgICAgfQog");
    sb.append("ICAgICAgIGluc2VydEF0ID0gaW5zZXJ0QXRbcGFyXTsKICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJp");
    sb.append("bmcoa0RvdE9yU2xhc2ggKyAxKTsKICAgICAgICBrRG90T3JTbGFzaCA9IGZpcnN0T2NjdXIobmFtZS5p");
    sb.append("bmRleE9mKCcuJyksIG5hbWUuaW5kZXhPZignLycpKTsKICAgICAgfQoKICAgICAgaWYgKG5hbWUuZW5k");
    sb.append("c1dpdGgoIisiKSkgewogICAgICAgIC8vIGhlcmUsIHdlIHB1c2ggdGhlIHZhbHVlIGludG8gdGhlIGFy");
    sb.append("cmF5CiAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKDAsIG5hbWUubGVuZ3RoIC0gMSk7CiAgICAg");
    sb.append("ICAgYXBwbHkgPSBmdW5jdGlvbiAodikgewogICAgICAgICAgaWYgKCEobmFtZSBpbiBpbnNlcnRBdCkp");
    sb.append("IHsKICAgICAgICAgICAgaW5zZXJ0QXRbbmFtZV0gPSBbdl07CiAgICAgICAgICB9IGVsc2UgewogICAg");
    sb.append("ICAgICAgICBpbnNlcnRBdFtuYW1lXS5wdXNoKHYpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgLy8gaGVyZSB3ZSBzZXQgdGhlIG9iamVjdAogICAgICAgIGFwcGx5ID0g");
    sb.append("ZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIGluc2VydEF0W25hbWVdID0gdjsKICAgICAgICB9OwogICAg");
    sb.append("ICB9CiAgICB9CgogICAgaWYgKGlzUHVsbCkgewogICAgICBhcHBseShlbC5wdWxsKCkpOwogICAgICBy");
    sb.append("ZXR1cm47CiAgICB9CgogICAgaWYgKGp1c3RTZXQpIHsKICAgICAgYXBwbHkoZWwudmFsdWUpOwogICAg");
    sb.append("fSBlbHNlIGlmIChpc0ZpZWxkU2V0KSB7CiAgICAgIHZhciBuZXh0T2JqZWN0ID0ge307CiAgICAgIGlm");
    sb.append("ICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAgICAgdmFyIGFyciA9IGVsLmNoaWxkcmVuOwogICAgICAg");
    sb.append("IHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewog");
    sb.append("ICAgICAgICAgdmFyIGNoID0gZWwuY2hpbGRyZW5ba107CiAgICAgICAgICBidWlsZF9vYmooY2gsIG5l");
    sb.append("eHRPYmplY3QsIHBhc3N3b3JkcywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfQogICAgICBhcHBseShu");
    sb.append("ZXh0T2JqZWN0KTsKICAgIH0gZWxzZSBpZiAoaXNJbnB1dEJveCkgewogICAgICB2YXIgdHlwZSA9ICgi");
    sb.append("dHlwZSIgaW4gZWwpID8gZWwudHlwZS50b1VwcGVyQ2FzZSgpIDogIlRFWFQiOwogICAgICBpZiAodHlw");
    sb.append("ZSA9PSAiU1VCTUlUIiB8fCB0eXBlID09ICJSRVNFVCIpIHJldHVybjsKICAgICAgaWYgKCh0eXBlID09");
    sb.append("ICJQQVNTV09SRCIgfHwgbmFtZSA9PSAicGFzc3dvcmQiIHx8IG5hbWUgPT0gImNvbmZpcm0tcGFzc3dv");
    sb.append("cmQiIHx8IG5hbWUgPT0gIm5ld19wYXNzd29yZCIgfHwgbmFtZSA9PSAiY29uZmlybS1uZXdfcGFzc3dv");
    sb.append("cmQiKSkgewogICAgICAgIHBhc3N3b3Jkc1tuYW1lXSA9IGVsLnZhbHVlOwogICAgICAgIHJldHVybjsK");
    sb.append("ICAgICAgfQogICAgICBpZiAodHlwZSA9PSAiQ0hFQ0tCT1giKSB7CiAgICAgICAgYXBwbHkoZWwuY2hl");
    sb.append("Y2tlZCA/IHRydWUgOiBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAiUkFESU8iKSB7CiAg");
    sb.append("ICAgICAgaWYgKGVsLmNoZWNrZWQpIHsKICAgICAgICAgIGFwcGx5KGVsLnZhbHVlKTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXBwbHkoZWwudmFsdWUpOwogICAgICB9CiAgICB9IGVsc2Ug");
    sb.append("ewogICAgICBpZiAoImNoaWxkcmVuIiBpbiBlbCkgewogICAgICAgIHZhciBhcnIgPSBlbC5jaGlsZHJl");
    sb.append("bjsKICAgICAgICB2YXIgbiA9IGFyci5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBu");
    sb.append("OyBrKyspIHsKICAgICAgICAgIHZhciBjaCA9IGVsLmNoaWxkcmVuW2tdOwogICAgICAgICAgYnVpbGRf");
    sb.append("b2JqKGNoLCBvYmpUb0luc2VydEludG8sIHBhc3N3b3JkcywgZmFsc2UpOwogICAgICAgIH0KICAgICAg");
    sb.append("fQogICAgfQogIH07CgogIHNlbGYuQnVpbGRGb3JtT2JqZWN0ID0gZnVuY3Rpb24oZm9ybSkgewogICAg");
    sb.append("dmFyIG9iaiA9IHt9OwogICAgYnVpbGRfb2JqKGZvcm0sIG9iaiwgZmFsc2UsIHRydWUpOwogICAgcmV0");
    sb.append("dXJuIG9iajsKICB9OwoKICAvLyBIRUxQRVIgfCByZXR1cm4gYW4gb2JqZWN0IG9mIGFsbCB0aGUgaW5w");
    sb.append("dXRzIG9mIHRoZSBnaXZlbiBmb3JtIGVsZW1lbnQKICB2YXIgZ2V0X2Zvcm0gPSBmdW5jdGlvbiAoZm9y");
    sb.append("bSwgcGFzc3dvcmRzKSB7CiAgICB2YXIgb2JqID0ge307CiAgICBidWlsZF9vYmooZm9ybSwgb2JqLCBw");
    sb.append("YXNzd29yZHMsIHRydWUpOwogICAgcmV0dXJuIG9iajsKICB9OwoKICAvLyA8Li4uIHJ4OndyYXA9Y29u");
    sb.append("c3QgPgogIHZhciBjdXN0b21zX2NvbXBvbmVudHMgPSB7fTsKICBzZWxmLnByb3ZpZGVDdXN0b21Db21w");
    sb.append("b25lbnQgPSBmdW5jdGlvbihuYW1lLCBmb28pIHsKICAgIGN1c3RvbXNfY29tcG9uZW50c1tuYW1lXSA9");
    sb.append("IGZvbzsKICB9OwoKICAvLyBSVU5USU1FIHwgPHRhZyAuLi4gcng6Y3VzdG9tPSI/IiBwb3J0OiRuYW1l");
    sb.append("PSRvdXRwdXQgLi4uID4uLi48L3RhZz4gfCBhc3NlbWJsZSBhIHdyaXRlciBvYmplY3QKICBzZWxmLldY");
    sb.append("ID0gZnVuY3Rpb24oaW5zdHJ1Y3Rpb25zKSB7CiAgICB2YXIgd3JpdGVyID0ge307CiAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayArIDIgPCBpbnN0cnVjdGlvbnMubGVuZ3RoOyBrKyspIHsKICAgICAgdmFyIG9iaiA9");
    sb.append("IHt9OwogICAgICB3cml0ZXJbaW5zdHJ1Y3Rpb25zW2tdXSA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAg");
    sb.append("ICAgdmFyIHMgPSB0aGlzOwogICAgICAgIHMud1tzLmtdID0gdmFsdWU7CiAgICAgICAgcy50LnVwZGF0");
    sb.append("ZShzLmQpOwogICAgICB9LmJpbmQoewogICAgICAgIGQ6cGF0aF90byhpbnN0cnVjdGlvbnNbMV0udmll");
    sb.append("dywgb2JqKSwKICAgICAgICB3OiBvYmosCiAgICAgICAgazogaW5zdHJ1Y3Rpb25zWzJdLAogICAgICAg");
    sb.append("IHQ6IGluc3RydWN0aW9uc1sxXS52aWV3LnRyZWUKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gd3Jp");
    sb.append("dGVyOwogIH07CiAgc2VsZi5DID0gZnVuY3Rpb24gKGRvbSwgc3RhdGUsIG5hbWUsIHJ4b2JqLCB3cml0");
    sb.append("ZXIsIGNoaWxkTWFrZXJXaXRoQ2FzZSwgY29uZmlnKSB7CiAgICB2YXIgb2JqID0gewogICAgICBkb206");
    sb.append("IGRvbSwKICAgICAgc3RhdGU6IHN0YXRlLAogICAgICBpbnB1dHM6IHJ4b2JqLAogICAgICBvdXRwdXRz");
    sb.append("OiB3cml0ZXIsCiAgICAgIG1ha2VyOiBjaGlsZE1ha2VyV2l0aENhc2UsCiAgICAgIGNvbmZpZzogY29u");
    sb.append("ZmlnLAogICAgICBmcmFtZXdvcms6IHNlbGYKICAgIH07CiAgICBpZiAobmFtZSBpbiBjdXN0b21zX2Nv");
    sb.append("bXBvbmVudHMpIHsKICAgICAgY3VzdG9tc19jb21wb25lbnRzW25hbWVdKG9iaik7CiAgICB9IGVsc2Ug");
    sb.append("ewogICAgICBjb25zb2xlLmVycm9yKCJmYWlsZWQgdG8gZmluZCBjdXN0b20gY29tcG9uZW50OiAnIiAr");
    sb.append("IG5hbWUgKyAiJyIpOwogICAgfQogIH07CgogIHZhciB3cmFwcGVycyA9IHt9OwogIHZhciB3cmFwcGVy");
    sb.append("c19vbmxvYWQgPSB7fTsgLy8gVE9ETzogc3R1ZHkgaWYgdGhpcyBjYW4gYmUgcmVtb3ZlZAogIHNlbGYu");
    sb.append("UFJXUCA9IGZ1bmN0aW9uIChuYW1lLCBmb28pIHsKICAgIHdyYXBwZXJzW25hbWVdID0gZm9vOwogICAg");
    sb.append("aWYgKG5hbWUgaW4gd3JhcHBlcnNfb25sb2FkKSB7CiAgICAgIHZhciB0b2xvYWQgPSB3cmFwcGVyc19v");
    sb.append("bmxvYWRbbmFtZV07CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdG9sb2FkLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgdG9sb2FkW2tdKCk7CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyA8Li4uIHJ4OndyYXA9");
    sb.append("Y29uc3QgPgogIHNlbGYuV1AgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgbmFtZSwgcnhvYmosIGNoaWxk");
    sb.append("TWFrZXJXaXRoQ2FzZSkgewogICAgaWYgKG5hbWUgaW4gd3JhcHBlcnMpIHsKICAgICAgd3JhcHBlcnNb");
    sb.append("bmFtZV0oZG9tLCBzdGF0ZSwgcnhvYmosIGNoaWxkTWFrZXJXaXRoQ2FzZSwgc2VsZik7CiAgICB9IGVs");
    sb.append("c2UgewogICAgICB2YXIgbG9hZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHdyYXBwZXJzW25hbWVd");
    sb.append("KGRvbSwgc3RhdGUsIHJ4b2JqLCBjaGlsZE1ha2VyV2l0aENhc2UsIHNlbGYpOwogICAgICB9OwogICAg");
    sb.append("ICBpZiAobmFtZSBpbiB3cmFwcGVyc19vbmxvYWQpIHsKICAgICAgICB3cmFwcGVyc19vbmxvYWRbbmFt");
    sb.append("ZV0ucHVzaChsb2FkZXIpOwogICAgICB9IGVsc2UgewogICAgICAgIHdyYXBwZXJzX29ubG9hZFtuYW1l");
    sb.append("XSA9IFtsb2FkZXJdOwogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIGJlaGF2aW9ycyA9IHt9OwogIHNl");
    sb.append("bGYuZGVmaW5lQmVoYXZpb3IgPSBmdW5jdGlvbihuYW1lLCBiZWhhdmlvcikgewogICAgaWYgKHR5cGVv");
    sb.append("ZihiZWhhdmlvcikgPT0gJ2Z1bmN0aW9uJykgewogICAgICBiZWhhdmlvcnNbbmFtZV0gPSBiZWhhdmlv");
    sb.append("cjsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiZGVmaW5pbmcgYmVoYXZpb3IgJyIg");
    sb.append("KyBuYW1lICsgIicgZmFpbGVkIGR1ZSB0byBub3QgYSBmdW5jdGlvbiIpCiAgICB9CiAgfTsKCiAgLy8g");
    sb.append("UlVOVElNRSB8IHJ4OmJlaGF2aW9yPSRuYW1lCiAgc2VsZi5CSFYgPSBmdW5jdGlvbihkb20sIHN0YXRl");
    sb.append("LCBuYW1lLCBjb25maWcpIHsKICAgIGlmIChuYW1lIGluIGJlaGF2aW9ycykgewogICAgICB2YXIgY29u");
    sb.append("biA9IG51bGw7CiAgICAgIHRyeSB7CiAgICAgICAgY29ubiA9IHN0YXRlLmRhdGEuY29ubmVjdGlvbi5w");
    sb.append("dHI7CiAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgIGJlaGF2aW9yc1tuYW1lXShkb20sIGNvbm4sIGNv");
    sb.append("bmZpZywgc2VsZik7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygiY291bGRuJ3QgZmluZCBi");
    sb.append("ZWhhdmlvcjoiICsgbmFtZSk7CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJlZ2lzdGVyIHRoZSBw");
    sb.append("YWdlIGZvciB0aGUgdXJpIHRvIHRoZSBnaXZlbiBmb28oKS4KICBzZWxmLlBHID0gZnVuY3Rpb24gKHVy");
    sb.append("aSwgZm9vKSB7CiAgICB2YXIgaGVhZCA9IHJvdXRlcjsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdXJp");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgIHZhciBwYXJ0ID0gdXJpW2tdOwogICAgICBpZiAoIShwYXJ0IGlu");
    sb.append("IGhlYWQpKSB7CiAgICAgICAgaGVhZFtwYXJ0XSA9IHt9OwogICAgICB9CiAgICAgIGhlYWQgPSBoZWFk");
    sb.append("W3BhcnRdOwogICAgfQogICAgaGVhZFsiQCJdID0gZm9vOwogIH07CgogIHZhciByb3V0ZSA9IGZ1bmN0");
    sb.append("aW9uIChwYXJ0cywgYXQsIGhlYWQsIHZpZXcpIHsKICAgIGlmIChhdCA8IHBhcnRzLmxlbmd0aCkgewog");
    sb.append("ICAgICBpZiAoIm51bWJlciIgaW4gaGVhZCkgewogICAgICAgIHZhciBuZWNrID0gaGVhZFsibnVtYmVy");
    sb.append("Il07CiAgICAgICAgdmFyIHZhbCA9IHBhcnNlRmxvYXQocGFydHNbYXRdKTsKICAgICAgICBpZiAoIWlz");
    sb.append("TmFOKHZhbCkpIHsKICAgICAgICAgIGZvciAodmFyIGJyYW5jaCBpbiBuZWNrKSB7CiAgICAgICAgICAg");
    sb.append("IHZpZXdbYnJhbmNoXSA9IHZhbDsKICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IHJvdXRlKHBhcnRz");
    sb.append("LCBhdCArIDEsIG5lY2tbYnJhbmNoXSwgdmlldyk7CiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUgIT09");
    sb.append("IG51bGwpIHsKICAgICAgICAgICAgICByZXR1cm4gY2FuZGlkYXRlOwogICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICAgIGRlbGV0ZSB2aWV3W2JyYW5jaF07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICAgIGlmICgidGV4dCIgaW4gaGVhZCkgewogICAgICAgIHZhciBuZWNrID0gaGVhZFsidGV4dCJdOwog");
    sb.append("ICAgICAgIHZhciB2YWwgPSBwYXJ0c1thdF07CiAgICAgICAgZm9yICh2YXIgYnJhbmNoIGluIG5lY2sp");
    sb.append("IHsKICAgICAgICAgIHZpZXdbYnJhbmNoXSA9IHZhbDsKICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSBy");
    sb.append("b3V0ZShwYXJ0cywgYXQgKyAxLCBuZWNrW2JyYW5jaF0sIHZpZXcpOwogICAgICAgICAgaWYgKGNhbmRp");
    sb.append("ZGF0ZSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gY2FuZGlkYXRlOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgZGVsZXRlIHZpZXdbYnJhbmNoXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCJm");
    sb.append("aXhlZCIgaW4gaGVhZCkgewogICAgICAgIHZhciBuZWNrID0gaGVhZFsiZml4ZWQiXTsKICAgICAgICBm");
    sb.append("b3IgKHZhciBicmFuY2ggaW4gbmVjaykgewogICAgICAgICAgaWYgKGJyYW5jaCA9PSBwYXJ0c1thdF0p");
    sb.append("IHsKICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IHJvdXRlKHBhcnRzLCBhdCArIDEsIG5lY2tbYnJh");
    sb.append("bmNoXSwgdmlldyk7CiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUgIT09IG51bGwpIHsKICAgICAgICAg");
    sb.append("ICAgICByZXR1cm4gY2FuZGlkYXRlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQog");
    sb.append("ICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoIkAiIGluIGhlYWQpIHsKICAgICAgICByZXR1cm4g");
    sb.append("aGVhZFsiQCJdOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9OwoKCiAgc2VsZi5yZXN1");
    sb.append("bWVfdXJpID0gIi8iOwogIHNlbGYuZ2F0ZXMgPSBbXTsKICAvKiogUlVOVElNRSB8IDxnYXRlLWV4aXQg");
    sb.append("Z3VhcmQ9InJlYWQiIHNldD0iIj4gKi8KICBzZWxmLklHID0gZnVuY3Rpb24oc3RhdGVSZWFkLCByZWFk");
    sb.append("LCBzdGF0ZVdyaXRlLCB3cml0ZSkgewogICAgdmFyIHNtID0gewogICAgICB2YWx1ZTogZmFsc2UsCiAg");
    sb.append("ICAgIHJ1bjogZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHRoaXMudmFsdWUpIHsKICAgICAgICAgIHZh");
    sb.append("ciBvYmogPSB7fTsKICAgICAgICAgIG9ialt3cml0ZV0gPSB0cnVlOwogICAgICAgICAgdmFyIGRlbHRh");
    sb.append("ID0gcGF0aF90byhzdGF0ZVdyaXRlLnZpZXcsIG9iaik7CiAgICAgICAgICBzdGF0ZVdyaXRlLnZpZXcu");
    sb.append("dHJlZS51cGRhdGUoZGVsdGEpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAg");
    sb.append("IHJldHVybiBmYWxzZTsKICAgICAgfSwKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGVSZWFkLCByZWFk");
    sb.append("LCBmdW5jdGlvbih2YWx1ZSkgewogICAgICBzbS52YWx1ZSA9IHZhbHVlOwogICAgfSk7CiAgICBzZWxm");
    sb.append("LmdhdGVzLnB1c2goc20pOwogIH07CiAgc2VsZi5nb3RvID0gZnVuY3Rpb24gKHVyaSwgbm93KSB7CiAg");
    sb.append("ICBzZWxmLnJlc3VtZV91cmkgPSB1cmk7CiAgICB2YXIgYmxvY2tlZCA9IGZhbHNlOwogICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBzZWxmLmdhdGVzLmxlbmd0aDsgaysrKSB7CiAgICAgIGlmIChzZWxmLmdhdGVz");
    sb.append("W2tdLnJ1bigpKSB7CiAgICAgICAgYmxvY2tlZCA9IHRydWU7CiAgICAgIH0KICAgIH0KICAgIGlmIChi");
    sb.append("bG9ja2VkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChub3cpIHsKICAgICAgc2VsZi5nb3Rv");
    sb.append("X25vdyh1cmkpOwogICAgfSBlbHNlIHsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICAgIHNlbGYuZ290b19ub3codXJpKTsKICAgICAgfSwgMSk7CiAgICB9CiAgfTsKICAvLyBS");
    sb.append("VU5USU1FOiA8dGFnIC4uLiByeDpldmVudD0iLi4uIHJlc3VtZSAuLi4iPi4uCiAgc2VsZi5iUiA9IGZ1");
    sb.append("bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgcnVuOiBmdW5jdGlvbigpIHsKICAgICAgICBzZWxm");
    sb.append("LmdhdGVzID0gW107CiAgICAgICAgc2VsZi5nb3RvKHNlbGYucmVzdW1lX3VyaSwgZmFsc2UpOwogICAg");
    sb.append("ICB9LAogICAgICBtZXJnZTogZnVuY3Rpb24oKSB7fQogICAgfTsKICB9OwogIHNlbGYuZ290b19ub3cg");
    sb.append("PSBmdW5jdGlvbih1cmkpIHsKICAgIGlmICh1cmkuc3RhcnRzV2l0aCgiLyIpKSB7CiAgICAgIHNlbGYu");
    sb.append("cnVuKGRvY3VtZW50LmJvZHksIHVyaSwgdHJ1ZSk7CiAgICB9IGVsc2UgewogICAgICB3aW5kb3cubG9j");
    sb.append("YXRpb24uaHJlZiA9IGZpeEhyZWYodXJpKTsKICAgIH0KICB9OwoKICB2YXIgdXJsQmFzZTY0VG9VaW50");
    sb.append("OEFycmF5ID0gZnVuY3Rpb24oYmFzZTY0KSB7CiAgICB2YXIgcmF3RGF0YSA9IHdpbmRvdy5hdG9iKGJh");
    sb.append("c2U2NCk7CiAgICB2YXIgb3V0cHV0QXJyYXkgPSBuZXcgVWludDhBcnJheShyYXdEYXRhLmxlbmd0aCk7");
    sb.append("CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd0RhdGEubGVuZ3RoOyArK2kpIHsKICAgICAgb3V0cHV0");
    sb.append("QXJyYXlbaV0gPSByYXdEYXRhLmNoYXJDb2RlQXQoaSk7CiAgICB9CiAgICByZXR1cm4gb3V0cHV0QXJy");
    sb.append("YXk7CiAgfQoKICBzZWxmLmN1cnJlbnRQdXNoRXZlbnQgPSBmdW5jdGlvbigpIHt9OwoKICB2YXIgZ2V0");
    sb.append("V2ViUHVzaFN0YXR1cyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHJlc3VsdCA9IGxvY2FsU3RvcmFnZS5n");
    sb.append("ZXRJdGVtKCJ3ZWJwdXNoX3N0YXR1cyIpOwogICAgaWYgKHJlc3VsdCAmJiB0eXBlb2YocmVzdWx0KSA9");
    sb.append("PSAic3RyaW5nIikgewogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmV0dXJuICJ1bmtub3du");
    sb.append("IjsKICB9CgogIHZhciBzZXRQdXNoU3RhdHVzID0gZnVuY3Rpb24oc3RhdHVzKSB7CiAgICBsb2NhbFN0");
    sb.append("b3JhZ2Uuc2V0SXRlbSgid2VicHVzaF9zdGF0dXMiLCBzdGF0dXMpOwogICAgc2VsZi5jdXJyZW50UHVz");
    sb.append("aEV2ZW50KCk7CiAgfTsKICBzZWxmLnNldFB1c2hTdGF0dXMgPSBzZXRQdXNoU3RhdHVzOwoKICB2YXIg");
    sb.append("c2V0UHVzaEV2ZW50ID0gZnVuY3Rpb24oZm9vKSB7CiAgICBzZWxmLmN1cnJlbnRQdXNoRXZlbnQgPSBm");
    sb.append("b287CiAgfTsKCiAgdmFyIHNldHVwU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbiwg");
    sb.append("dmFwaWRQdWJsaWNLZXksIGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pIHsKICAgIGNvbm5l");
    sb.append("Y3Rpb24uYnVtcCgid3BzIik7CiAgICB2YXIgcHVzaEtleUxvY2FsID0gInB1c2hfZW5kcG9pbnRfIiAr");
    sb.append("IGlkZW50aXR5TmFtZTsKICAgIHJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlcgogICAgLmdldFN1YnNjcmlw");
    sb.append("dGlvbigpLnRoZW4oYXN5bmMgZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikgewogICAgICAgIGlmIChzdWJz");
    sb.append("Y3JpcHRpb24pIHsKICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247CiAgICAgICAgfQogICAgICAg");
    sb.append("IGNvbnN0IGNvbnZlcnRlZFZhcGlkS2V5ID0gdXJsQmFzZTY0VG9VaW50OEFycmF5KHZhcGlkUHVibGlj");
    sb.append("S2V5KTsKICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLnN1YnNjcmliZSh7CiAg");
    sb.append("ICAgICAgICB1c2VyVmlzaWJsZU9ubHk6IHRydWUsCiAgICAgICAgICBhcHBsaWNhdGlvblNlcnZlcktl");
    sb.append("eTogY29udmVydGVkVmFwaWRLZXkKICAgICAgICB9KTsKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHN1YnNj");
    sb.append("cmlwdGlvbikgewogICAgICAvLyBtYWtlIHN1cmUgd2UgaGF2ZSBhbiBlbmRwb2ludCBzYXZlZCByZWxh");
    sb.append("dGVkIHRvIHRoZSByaWdodCB2ZXJzaW9uCiAgICAgIGNvbm5lY3Rpb24uSWRlbnRpdHlIYXNoKGlkZW50");
    sb.append("aXR5LCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7CiAgICAgICAgICBpZiAobG9j");
    sb.append("YWxTdG9yYWdlLmdldEl0ZW0oInB1c2hfd29ya2VyX3ZlcnNpb24iKSAhPSB2ZXJzaW9uIHx8IGxvY2Fs");
    sb.append("U3RvcmFnZS5nZXRJdGVtKCJsYXN0X2lkZW50aXR5X3VzZWQiKSAhPSByZXN1bHQuaWRlbnRpdHlIYXNo");
    sb.append("KSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHB1c2hLZXlMb2NhbCk7CiAgICAg");
    sb.append("ICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJwdXNoX3dvcmtlcl92ZXJzaW9uIiwgdmVyc2lvbik7");
    sb.append("CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJsYXN0X2lkZW50aXR5X3VzZWQiLCByZXN1");
    sb.append("bHQuaWRlbnRpdHlIYXNoKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBzdWIgPSBzdWJzY3JpcHRp");
    sb.append("b24udG9KU09OKCk7CiAgICAgICAgICB2YXIgdmFsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0ocHVzaEtl");
    sb.append("eUxvY2FsKTsKICAgICAgICAgIGlmICh2YWwgJiYgdmFsID09IHN1Yi5lbmRwb2ludCkgewogICAgICAg");
    sb.append("ICAgICBjb25uZWN0aW9uLmJ1bXAoIndwYSIpOwogICAgICAgICAgICBzZXRQdXNoU3RhdHVzKCJzdWNj");
    sb.append("ZXNzIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHN1YlsnQG1ldGhv");
    sb.append("ZCddID0gJ3dlYnB1c2gnOwogICAgICAgICAgc3ViWydAdGltZSddID0gbmV3IERhdGUoKS5nZXRUaW1l");
    sb.append("KCk7CiAgICAgICAgICB2YXIgZGV2aWNlID0ge307CiAgICAgICAgICBkZXZpY2UubW9kZSA9ICd3ZWIn");
    sb.append("CiAgICAgICAgICBpZiAod2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3IgJiYgd2luZG93Lm5hdmlnYXRv");
    sb.append("ci51c2VyQWdlbnQpIHsKICAgICAgICAgICAgZGV2aWNlLnVhID0gd2luZG93Lm5hdmlnYXRvci51c2Vy");
    sb.append("QWdlbnQ7CiAgICAgICAgICB9CiAgICAgICAgICBjb25uZWN0aW9uLlB1c2hSZWdpc3RlcihpZGVudGl0");
    sb.append("eSwgc2VsZi5kb21haW4sIHN1YiwgZGV2aWNlLCB7CiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHB1c2hLZXlMb2NhbCwgc3ViLmVu");
    sb.append("ZHBvaW50KTsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgid2VicHVzaF9zdGF0dXMi");
    sb.append("LCAic3VjY2VzcyIpOwogICAgICAgICAgICAgIHNldFB1c2hTdGF0dXMoInN1Y2Nlc3MiKTsKICAgICAg");
    sb.append("ICAgICAgfSwKICAgICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgY29u");
    sb.append("bmVjdGlvbi5idW1wKCJ3cGYiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSwK");
    sb.append("ICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGNvbm5lY3Rpb24uYnVtcCgid3Bm");
    sb.append("Iik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uKGVycikgewogICAgICBzZXRQdXNo");
    sb.append("U3RhdHVzKCJmYWlsZWQiKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0ocHVzaEtleUxvY2Fs");
    sb.append("KTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImxhc3RfaWRlbnRpdHlfdXNlZCIpOwogICAg");
    sb.append("ICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgicHVzaF93b3JrZXJfdmVyc2lvbiIpOwogICAgICBjb25u");
    sb.append("ZWN0aW9uLmJ1bXAoIndwZCIpOwogICAgICBjb25uZWN0aW9uLmxvZygicHVzaHNldHVwIiwgIiIgKyBl");
    sb.append("cnIpOwogICAgfSk7CiAgfQoKICB2YXIgc2V0dXBQdXNoID0gZnVuY3Rpb24ocGF0aCwgdmFwaWRQdWJs");
    sb.append("aWNLZXksIGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pIHsKICAgIGlmIChuYXZpZ2F0b3Iu");
    sb.append("c2VydmljZVdvcmtlcikgewogICAgICB0cnkgewogICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2Vy");
    sb.append("LmdldFJlZ2lzdHJhdGlvbnMoKS50aGVuKGZ1bmN0aW9uIChyZWdpc3RyYXRpb25zKSB7CiAgICAgICAg");
    sb.append("ICB2YXIgZm91bmQgPSBmYWxzZTsKICAgICAgICAgIGZvciAobGV0IHJlZ2lzdHJhdGlvbiBvZiByZWdp");
    sb.append("c3RyYXRpb25zKSB7CiAgICAgICAgICAgIGlmIChyZWdpc3RyYXRpb24uYWN0aXZlKSB7CiAgICAgICAg");
    sb.append("ICAgICAgaWYgKCFyZWdpc3RyYXRpb24uYWN0aXZlLnNjcmlwdFVSTC5lbmRzV2l0aChwYXRoKSkgewog");
    sb.append("ICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uLnVucmVnaXN0ZXIoKTsKICAgICAgICAgICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgc2V0dXBTdWJz");
    sb.append("Y3JpcHRpb24ocmVnaXN0cmF0aW9uLCB2YXBpZFB1YmxpY0tleSwgaWRlbnRpdHksIGlkZW50aXR5TmFt");
    sb.append("ZSwgdmVyc2lvbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lz");
    sb.append("dGVyKHBhdGgpOwogICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeS50aGVuKGZ1");
    sb.append("bmN0aW9uIChyZWdpc3RyYXRpb24pIHsKICAgICAgICAgICAgICBzZXR1cFN1YnNjcmlwdGlvbihyZWdp");
    sb.append("c3RyYXRpb24sIHZhcGlkUHVibGljS2V5LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9uKTsK");
    sb.append("ICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgZnVuY3Rpb24oZXgpIHsKICAgICAg");
    sb.append("ICAgIGNvbm5lY3Rpb24uYnVtcCgid3BpMyIpOwogICAgICAgICAgY29ubmVjdGlvbi5sb2coIndvcmtl");
    sb.append("ci1maW5kIiwgIiIgKyBleCk7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGV4KSB7CiAgICAgICAg");
    sb.append("Y29uc29sZS5lcnJvcigiZmFpbGVkIHRvIHJlZ2lzdGVyIHNlcnZpY2Ugd29ya2VyIiwgZXgpOwogICAg");
    sb.append("ICAgIHNldFB1c2hTdGF0dXMoImltcG9zc2libGUiKTsKICAgICAgICBjb25uZWN0aW9uLmJ1bXAoIndw");
    sb.append("aTIiKTsKICAgICAgICBjb25uZWN0aW9uLmxvZygid29ya2VyLWluc3RhbGwiLCAiIiArIGV4KTsKICAg");
    sb.append("ICAgfQogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coIm5vIHNlcnZpY2Ugd29ya2VyIGF2YWls");
    sb.append("YWJsZSIpOwogICAgICBzZXRQdXNoU3RhdHVzKCJpbXBvc3NpYmxlIik7CiAgICAgIGNvbm5lY3Rpb24u");
    sb.append("YnVtcCgid3BpMSIpOwogICAgfQogIH0KCiAgc2VsZi53b3JrZXIgPSBmdW5jdGlvbihpZGVudGl0eU5h");
    sb.append("bWUsIHBhdGgsIHZlcnNpb24pIHsKICAgIHRyeSB7CiAgICAgIGFmdGVySGF2ZUlkZW50aXR5KGlkZW50");
    sb.append("aXR5TmFtZSwgZnVuY3Rpb24oaWRlbnRpdHkpIHsKICAgICAgICBjb25uZWN0aW9uLkRvbWFpbkdldFZh");
    sb.append("cGlkUHVibGljS2V5KGlkZW50aXR5LCBzZWxmLmRvbWFpbiwgewogICAgICAgICAgc3VjY2VzczogZnVu");
    sb.append("Y3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgc2V0dXBQdXNoKHBhdGgsIHJlc3BvbnNlLnB1Ymxp");
    sb.append("Y0tleSwgaWRlbnRpdHksIGlkZW50aXR5TmFtZSwgdmVyc2lvbik7CiAgICAgICAgICB9LAogICAgICAg");
    sb.append("ICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJm");
    sb.append("YWlsZWQgdG8gZ2V0IHB1YmxpYy1rZXk6IiArIHJlYXNvbik7CiAgICAgICAgICB9CiAgICAgICAgfSkK");
    sb.append("ICAgICAgfSk7CiAgICB9IGNhdGNoIChleCkgewogICAgICBjb25zb2xlLmVycm9yKCJmYWlsZWQgdG8g");
    sb.append("aW5pdGlhbGl6ZSB3b3JrZXIiLCBleCk7CiAgICB9CiAgfTsKCiAgc2VsZi5pbml0ID0gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgc2VsZi5ydW4oZG9jdW1lbnQuYm9keSwgZml4UGF0aCh3aW5kb3cubG9jYXRpb24ucGF0");
    sb.append("aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgd2luZG93LmxvY2F0aW9uLmhhc2gpLCBmYWxz");
    sb.append("ZSk7CiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uIChwKSB7CiAgICAgIHNlbGYucnVuKGRv");
    sb.append("Y3VtZW50LmJvZHksIGZpeFBhdGgod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0");
    sb.append("aW9uLnNlYXJjaCArIHdpbmRvdy5sb2NhdGlvbi5oYXNoKSwgZmFsc2UpOwogICAgfTsKICB9OwoKICB2");
    sb.append("YXIgY3VycmVudE1lc3NhZ2VIYW5kbGVycyA9IHt9OwogIHZhciByZW1vdmVBbGxNZXNzYWdlSGFuZGxl");
    sb.append("cnMgPSBmdW5jdGlvbigpIHsKICAgIGZvciAodmFyIGsgaW4gY3VycmVudE1lc3NhZ2VIYW5kbGVycykg");
    sb.append("ewogICAgICBkZWxldGUgY3VycmVudE1lc3NhZ2VIYW5kbGVyc1trXTsKICAgIH0KICB9OwoKICBzZWxm");
    sb.append("LnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIgPSBmdW5jdGlvbihjaGFubmVsLCBoYW5kbGVyKSB7CiAgICBp");
    sb.append("ZiAoY2hhbm5lbCBpbiBjdXJyZW50TWVzc2FnZUhhbmRsZXJzKSB7CiAgICAgIGN1cnJlbnRNZXNzYWdl");
    sb.append("SGFuZGxlcnNbY2hhbm5lbF0ucHVzaChoYW5kbGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIGN1cnJlbnRN");
    sb.append("ZXNzYWdlSGFuZGxlcnNbY2hhbm5lbF0gPSBbaGFuZGxlcl07CiAgICB9CiAgfTsKCiAgdmFyIHJvdXRl");
    sb.append("TWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICB0cnkgewogICAgICBpZiAoISgnZGF0YScgaW4g");
    sb.append("ZXZlbnQpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgKGV2ZW50LmRh");
    sb.append("dGEpICE9ICdvYmplY3QnKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghKCdjaGFu");
    sb.append("bmVsJyBpbiBldmVudC5kYXRhKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgY2hh");
    sb.append("bm5lbCA9IGV2ZW50LmRhdGEuY2hhbm5lbDsKICAgICAgdmFyIGxpc3QgPSBjdXJyZW50TWVzc2FnZUhh");
    sb.append("bmRsZXJzW2NoYW5uZWxdOwogICAgICBpZiAobGlzdCAhPT0gbnVsbCkgewogICAgICAgIHZhciBuID0g");
    sb.append("bGlzdC5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAg");
    sb.append("IGxpc3Rba10oZXZlbnQuZGF0YSwgZXZlbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfSBjYXRjaCAo");
    sb.append("d2VsbE1heWJlVGhlRXJyb3JEb2VzbnRCZWxvbmdUb01lKSB7CiAgICAgIC8vIDpzaHJ1ZzoKICAgIH0K");
    sb.append("ICB9OwoKICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgIHdpbmRvdy5hZGRFdmVudExp");
    sb.append("c3RlbmVyKCJtZXNzYWdlIiwgcm91dGVNZXNzYWdlLCBmYWxzZSk7CiAgfSBlbHNlIGlmICh3aW5kb3cu");
    sb.append("YXR0YWNoRXZlbnQpIHsKICAgIHdpbmRvdy5hdHRhY2hFdmVudCgib25tZXNzYWdlIiwgcm91dGVNZXNz");
    sb.append("YWdlLCBmYWxzZSk7CiAgfQoKICBzZWxmLmN1cnJlbnRWaWV3ZXJJZCA9IDA7CiAgLy8gQVBJIHwgUnVu");
    sb.append("IHRoZSBwYWdlIGluIHRoZSBnaXZlbiBwbGFjZQogIHNlbGYucnVuID0gZnVuY3Rpb24gKHdoZXJlLCBy");
    sb.append("YXdQYXRoLCBwdXNoKSB7CiAgICByZW1vdmVBbGxNZXNzYWdlSGFuZGxlcnMoKTsKICAgIHZhciBwYXRo");
    sb.append("ID0gcmF3UGF0aDsKICAgIHdoaWxlIChwYXRoLmVuZHNXaXRoKCIvIikgJiYgcGF0aCAhPSAiLyIpIHsK");
    sb.append("ICAgICAgcGF0aCA9IHBhdGguc3Vic3RyaW5nKDAsIHBhdGgubGVuZ3RoIC0gMSk7CiAgICB9CiAgICBm");
    sb.append("b3IgKGNvbktleSBpbiBjb25uZWN0aW9ucykgewogICAgICBjb25uZWN0aW9uc1tjb25LZXldLnRyZWUu");
    sb.append("bnVrZSgpOwogICAgICBjb25uZWN0aW9uc1tjb25LZXldLm51a2UoKTsKICAgIH0KICAgIHZhciBzZWFy");
    sb.append("Y2ggPSAiIjsKICAgIHZhciBrUXVlc3Rpb24gPSBwYXRoLmluZGV4T2YoJz8nKTsKICAgIGlmIChrUXVl");
    sb.append("c3Rpb24gPiAwKSB7CiAgICAgIHNlYXJjaCA9IHBhdGguc3Vic3RyaW5nKGtRdWVzdGlvbik7CiAgICAg");
    sb.append("IHBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBrUXVlc3Rpb24pOwogICAgfQogICAgdmFyIHBhcnRzID0g");
    sb.append("KHBhdGguc3RhcnRzV2l0aCgiLyIpID8gcGF0aC5zdWJzdHJpbmcoMSkgOiBwYXRoKS5zcGxpdCgiLyIp");
    sb.append("OwogICAgdmFyIGluaXQgPSB7fTsKICAgIHNlbGYuY3VycmVudFZpZXdlcklkKys7CiAgICBpbml0LnZp");
    sb.append("ZXdlcl9jdXJyZW50X3BhZ2VfaWQgPSBzZWxmLmN1cnJlbnRWaWV3ZXJJZDsKICAgIGluaXQudmlld2Vy");
    sb.append("X2RvbWFpbiA9IHNlbGYuZG9tYWluOwogICAgaW5pdC52aWV3ZXJfdXJsX3ByZWZpeCA9IHNlbGYudXJs");
    sb.append("X3ByZWZpeDsKICAgIHRyeSB7CiAgICAgIGluaXQudmlld2VyX3RpbWV6b25lID0gSW50bC5EYXRlVGlt");
    sb.append("ZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lOwogICAgICBpbml0LnZpZXdlcl9sYW5n");
    sb.append("dWFnZSA9IG5hdmlnYXRvci5sYW5ndWFnZTsKICAgIH0gY2F0Y2ggKGJyb3dzZXJCYWQpIHsKICAgICAg");
    sb.append("Ly8gd2UganVzdCBkb24ndCBzZWUgdGhlIHZpZXdzdGF0ZSBpZiB3ZSBkb24ndCBoYXZlIHRoZXNlIGF2");
    sb.append("YWlsYWJsZQogICAgfQogICAgaW5pdC52aWV3ZXJfc2VhcmNoX3F1ZXJ5ID0gIiI7CiAgICBpbml0LnZp");
    sb.append("ZXdlcl93ZWJfcHVzaF9zdGF0dXMgPSBnZXRXZWJQdXNoU3RhdHVzKCk7CiAgICBpZiAoc2VhcmNoICE9");
    sb.append("ICI/IikgewogICAgICBpbml0LnZpZXdlcl9zZWFyY2hfcXVlcnkgPSBzZWFyY2g7CiAgICAgIGNvbnN0");
    sb.append("IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoc2VhcmNoLnN1YnN0cmluZygxKSk7CiAgICAgIHZh");
    sb.append("ciBrSXQgPSBwYXJhbXMua2V5cygpOwogICAgICB2YXIgcCA9IGtJdC5uZXh0KCk7CiAgICAgIHdoaWxl");
    sb.append("ICghcC5kb25lKSB7CiAgICAgICAgaW5pdFtwLnZhbHVlXSA9IHBhcmFtcy5nZXQocC52YWx1ZSk7CiAg");
    sb.append("ICAgICAgcCA9IGtJdC5uZXh0KCk7CiAgICAgIH0KICAgIH0KICAgIHZhciBmb28gPSByb3V0ZShwYXJ0");
    sb.append("cywgMCwgcm91dGVyLCBpbml0KTsKICAgIG51a2Uod2hlcmUpOwogICAgaWYgKGZvbyAhPSBudWxsKSB7");
    sb.append("CiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTsKICAgICAgdmFyIHN0YXRlID0geyBzZXJ2aWNlOiBj");
    sb.append("b25uZWN0aW9uLCBkYXRhOiBudWxsLCB2aWV3OiBmcmVzaCh3aGVyZSksIGN1cnJlbnQ6ICJ2aWV3IiB9");
    sb.append("OwogICAgICBzZWxmLl9fY3VycmVudCA9IHN0YXRlOwoKICAgICAgY29uc3Qgdmlld3N0YXRlID0gbG9j");
    sb.append("YWxTdG9yYWdlLmdldEl0ZW0oJ3J4dmlld3N0YXRlJyk7CiAgICAgIGlmIChudWxsICE9PSB2aWV3c3Rh");
    sb.append("dGUpIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncnh2aWV3c3RhdGUnKTsKICAgICAg");
    sb.append("ICBpbml0ID0gT2JqZWN0LmFzc2lnbih7fSwgaW5pdCwgSlNPTi5wYXJzZSh2aWV3c3RhdGUpKTsKICAg");
    sb.append("ICAgfQoKICAgICAgc3RhdGUudmlldy5pbml0ID0gaW5pdDsKICAgICAgc2VsZi5nYXRlcyA9IFtdOwog");
    sb.append("ICAgICBzZWxmLnJlc3VtZV91cmkgPSBwYXRoOwogICAgICBmb28od2hlcmUsIHN0YXRlKTsKICAgICAg");
    sb.append("c3RhdGUudmlldy50cmVlLnN1YnNjcmliZShzdGF0ZS52aWV3LmRlbHRhKTsKICAgICAgc3RhdGUudmll");
    sb.append("dy50cmVlLnVwZGF0ZShpbml0KTsKICAgICAgaWYgKHB1c2gpIHsKICAgICAgICB3aW5kb3cuaGlzdG9y");
    sb.append("eS5wdXNoU3RhdGUoe21lcmdlOmZhbHNlfSwgIiIsIGZpeEhyZWYocGF0aCkgKyBzZWFyY2gpOwogICAg");
    sb.append("ICB9CiAgICAgIHNldFB1c2hFdmVudChmdW5jdGlvbigpIHsKICAgICAgICBzdGF0ZS52aWV3LnRyZWUu");
    sb.append("dXBkYXRlKHsgdmlld2VyX3dlYl9wdXNoX3N0YXR1czogZ2V0V2ViUHVzaFN0YXR1cygpfSk7CiAgICAg");
    sb.append("IH0pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHBhdGggIT0gIi80MDQiKSB7CiAgICAgICAgc2VsZi5y");
    sb.append("dW4od2hlcmUsICIvNDA0Iik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gZGVmYXVsdCA0MDQKICAg");
    sb.append("ICAgfQogICAgfQogICAgd2hlcmUuYXBwZW5kQ2hpbGQoY29ubmVjdGlvbk1vbml0b3JEb20pOwogIH07");
    sb.append("CgogIHZhciBpZGVudGl0aWVzID0ge307CgogIHZhciBzdGFzaF9pZGVudGl0eSA9IGZ1bmN0aW9uKG5h");
    sb.append("bWUsIGlkZW50aXR5LCBjb25uZWN0aW9uKSB7CiAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlv");
    sb.append("bnMgKE9LLCB3aGF0IGRvZXMgdGhpcyBtZWFuKQogICAgaWRlbnRpdGllc1tuYW1lXSA9IGlkZW50aXR5");
    sb.append("OwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkZW50aXR5XyIgKyBuYW1lLCBpZGVudGl0eSk7CiAg");
    sb.append("ICB2YXIgcmVxID0ge307CiAgICByZXFbJ25hbWUnXSA9IG5hbWU7CiAgICByZXFbJ2lkZW50aXR5J10g");
    sb.append("PSBpZGVudGl0eTsKICAgIHJlcVsnbWF4LWFnZSddID0gNTUyOTYwMDsKCiAgICB2YXIgeGh0dHAgPSBu");
    sb.append("ZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9u");
    sb.append("ICgpIHsKICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgICAgaWYgKHRoaXMuc3Rh");
    sb.append("dHVzID09IDIwMCkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImxhc3Rfc3Rhc2hlZF9p");
    sb.append("ZGVudGl0eV8iICsgbmFtZSwgIiIgKyBEYXRlLm5vdygpKQogICAgICAgICAgaWYgKGNvbm5lY3Rpb24g");
    sb.append("IT0gbnVsbCkgewogICAgICAgICAgICBjb25uZWN0aW9uLklkZW50aXR5U3Rhc2goaWRlbnRpdHksIG5h");
    sb.append("bWUsIHsKICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAv");
    sb.append("LyBUSElTIEhBUyBEUkFHT05TIFVOVElMIEEgRlVMTCBQUk9EVUNUSU9OIERFUExPWU1FTlQKICAgICAg");
    sb.append("ICAgICAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8iICsgbmFtZSwgImNvb2tp");
    sb.append("ZToiICsgbmFtZSk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlv");
    sb.append("biAoeHl6KSB7CgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfQogICAgICB9CiAgICB9OwogICAgeGh0dHAub3BlbigiUFVUIiwgc2VsZi5wcm90b2NvbCArICIv");
    sb.append("LyIgKyBzZWxmLmhvc3QgKyAiL35zdGFzaC8iICsgRGF0ZS5ub3coKSwgdHJ1ZSk7CiAgICB4aHR0cC53");
    sb.append("aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogICAgeGh0dHAuc2VuZChKU09OLnN0cmluZ2lmeShyZXEpKTsK");
    sb.append("ICB9OwoKICB2YXIgc2hvdWxkX3N0YXNoX2lkZW50aXR5ID0gZnVuY3Rpb24obmFtZSkgewogICAgdmFy");
    sb.append("IHN0YXNoX2tleSA9ICJsYXN0X3N0YXNoZWRfaWRlbnRpdHlfIiArIG5hbWU7CiAgICB2YXIgbGFzdFN0");
    sb.append("YXNoID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oc3Rhc2hfa2V5KTsKICAgIHRyeSB7CiAgICAgIHZhciBw");
    sb.append("YXJzZWQgPSBwYXJzZUZsb2F0KGxhc3RTdGFzaCk7CiAgICAgIGlmIChpc05hTihwYXJzZWQpKSB7CiAg");
    sb.append("ICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgdmFyIGFnZSA9IERhdGUubm93KCkgLSBuZXcg");
    sb.append("RGF0ZShwYXJzZWQpLmdldFRpbWUoKTsKICAgICAgcmV0dXJuIGFnZSA+PSAxLjQ0ZSs3OwogICAgfSBj");
    sb.append("YXRjaCAoZXgpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfTsKCiAgc2VsZi5TSUdOT1VUID0g");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgaWRlbnRpdGllcyA9IHt9OwogICAgZm9yICh2YXIgaWRlbnRpdHlOYW1l");
    sb.append("IGluIGlkZW50aXRpZXMpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImlkZW50aXR5XyIg");
    sb.append("KyBpZGVudGl0eU5hbWUpOwogICAgfQogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImlkZW50aXR5");
    sb.append("X2RlZmF1bHQiKTsKICAgIHZhciBheGUgPSBbXTsKICAgIGZvciAodmFyIGNpZCBpbiBjb25uZWN0aW9u");
    sb.append("cykgewogICAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tjaWRdOwogICAgICBpZiAoY28ucHRyICE9IG51");
    sb.append("bGwpIHsKICAgICAgICBjby5wdHIuZW5kKHsgc3VjY2VzczogZnVuY3Rpb24gKCkgeyB9LCBmYWlsdXJl");
    sb.append("OiBmdW5jdGlvbiAoKSB7IH0gfSk7CiAgICAgIH0KICAgICAgYXhlLnB1c2goY2lkKTsKICAgIH0KICAg");
    sb.append("IGZvciAodmFyIGsgPSAwOyBrIDwgYXhlLmxlbmd0aDsgaysrKSB7CiAgICAgIGRlbGV0ZSBjb25uZWN0");
    sb.append("aW9uc1theGVba11dOwogICAgfQogIH07CgogIHNlbGYuR09PR0xFX1NJR05fT04gPSBmdW5jdGlvbiAo");
    sb.append("YWNjZXNzVG9rZW4pIHsKICAgIGNvbm5lY3Rpb24uSW5pdENvbnZlcnRHb29nbGVVc2VyKGFjY2Vzc1Rv");
    sb.append("a2VuLCB7CiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgc3Rhc2hfaWRl");
    sb.append("bnRpdHkoImRlZmF1bHQiLCBwYXlsb2FkLmlkZW50aXR5LCBjb25uZWN0aW9uKTsKICAgICAgICBzZWxm");
    sb.append("LmdvdG8oIi8iLCBmYWxzZSk7CiAgICAgIH0sCiAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24p");
    sb.append("IHsKICAgICAgICBjb25zb2xlLmxvZygiR29vZ2xlIGZhaWx1cmU6ICIgKyByZWFzb24pOwogICAgICB9");
    sb.append("CiAgICB9KTsKICB9OwoKICAvKiogUlVOVElNRSB8IHJlZGlyZWN0IHRvIGEgcGFnZSB3aXRoIHN0YXRl");
    sb.append("ICovCiAgc2VsZi5hUkRwID0gZnVuY3Rpb24gKHN0YXRlLCBwdWxsZXIpIHsKICAgIHJldHVybiBmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICAgIHZhciB1cmkgPSBwdWxsZXIoc3RhdGUudmlldy5pbml0KTsKICAgICAgcmV0");
    sb.append("dXJuIHVyaTsKICAgIH07CiAgfTsKCiAgLyoqIFJVTlRJTUUgfCByZWRpcmVjdCB0byBhIHN0YXRpYyBw");
    sb.append("YWdlICovCiAgc2VsZi5hUkR6ID0gZnVuY3Rpb24gKHJhdykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgcmV0dXJuIHJhdzsKICAgIH0KICB9OwoKICB2YXIgaWRlbnRpdHlFdmVudHMgPSB7fTsK");
    sb.append("ICB2YXIgYWZ0ZXJIYXZlSWRlbnRpdHkgPSBmdW5jdGlvbihpZGVudGl0eU5hbWUsIGNhbGxiYWNrKSB7");
    sb.append("CiAgICBpZGVudGl0eUV2ZW50c1tpZGVudGl0eU5hbWVdID0gY2FsbGJhY2s7CiAgfTsKICBzZWxmLmFm");
    sb.append("dGVySGF2ZUlkZW50aXR5ID0gYWZ0ZXJIYXZlSWRlbnRpdHk7CgogIC8qKiBmb3IgY3VzdG9tIGVsZW1l");
    sb.append("bnRzIHRvIGxlYXJuIG9mIHRoZSBpZGVudGl0eSAqLwogIHNlbGYuSUQgPSBmdW5jdGlvbiAoaWRlbnRp");
    sb.append("dHlOYW1lLCByZWRpcmVjdFRvRnVuYykgewogICAgaWYgKGlkZW50aXR5TmFtZSA9PT0gdHJ1ZSkgewog");
    sb.append("ICAgICBpZGVudGl0eU5hbWUgPSAiZGVmYXVsdCI7CiAgICB9CiAgICAvLyBJRiBpZGVudGl0eSBjb250");
    sb.append("YWlucyBkb3RzCiAgICB2YXIgaWRlbnRpdHkgPSBudWxsOwogICAgdmFyIGNsZWFudXAgPSBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICB9OwoKICAgIHZhciB2YWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaWRlbnRpdHlf");
    sb.append("IiArIGlkZW50aXR5TmFtZSk7CiAgICBpZiAodmFsKSB7CiAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlO");
    sb.append("YW1lXSA9IHZhbDsKICAgICAgaWYgKHNob3VsZF9zdGFzaF9pZGVudGl0eShpZGVudGl0eU5hbWUpKSB7");
    sb.append("CiAgICAgICAgc3Rhc2hfaWRlbnRpdHkoaWRlbnRpdHlOYW1lLCB2YWwsIG51bGwpOwogICAgICB9CiAg");
    sb.append("ICB9CgogICAgaWYgKGlkZW50aXR5TmFtZS5zdGFydHNXaXRoKCJkaXJlY3Q6IikpIHsKICAgICAgLy8g");
    sb.append("VXNlLCBhcyBpcwogICAgICBpZGVudGl0eSA9IGlkZW50aXR5TmFtZS5zdWJzdHJpbmcoNyk7CiAgICB9");
    sb.append("IGVsc2UgaWYgKGlkZW50aXR5TmFtZSBpbiBpZGVudGl0aWVzKSB7CiAgICAgIGlkZW50aXR5ID0gaWRl");
    sb.append("bnRpdGllc1tpZGVudGl0eU5hbWVdOwogICAgICBjbGVhbnVwID0gZnVuY3Rpb24gKCkgewogICAgICAg");
    sb.append("IGRlbGV0ZSBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV07CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92");
    sb.append("ZUl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUpOwogICAgICAgIHNlbGYuZ290byhyZWRpcmVj");
    sb.append("dFRvRnVuYygpLCBmYWxzZSk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICAvLyB3aGF0ZXZlciBw");
    sb.append("YWdlIHdlIGFyZSwgbmVlZHMgdG8gZGllIHdoaWNoIG1lYW5zIHdlIG5lZWQgdG8gbnVrZSBldmVyeXRo");
    sb.append("aW5nIQogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2VsZi5nb3Rv");
    sb.append("KHJlZGlyZWN0VG9GdW5jKCksIGZhbHNlKTsKICAgICAgfSwgMTApOwogICAgICByZXR1cm4geyBhYm9y");
    sb.append("dDogdHJ1ZSB9OwogICAgfQogICAgaWYgKGlkZW50aXR5TmFtZSBpbiBpZGVudGl0eUV2ZW50cykgewog");
    sb.append("ICAgICBpZGVudGl0eUV2ZW50c1tpZGVudGl0eU5hbWVdKGlkZW50aXR5KTsKICAgICAgZGVsZXRlIGlk");
    sb.append("ZW50aXR5RXZlbnRzW2lkZW50aXR5TmFtZV07CiAgICB9CiAgICByZXR1cm4geyBhYm9ydDogZmFsc2Us");
    sb.append("IGNsZWFudXA6IGNsZWFudXAsIGlkZW50aXR5OiBpZGVudGl0eSB9OwogIH07CgogIC8qIEZvciBjdXN0");
    sb.append("b20gY2FsbGJhY2tzIHRvIHJlZGlyZWN0IGFuZCBpbnZhbGlkYXRlIElEIGZhaWx1cmVzICovCiAgc2Vs");
    sb.append("Zi5GSURDTCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgbG9va3VwKSB7CiAgICByZXR1cm4gewogICAgICBz");
    sb.append("dWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgY2FsbGJhY2suc3VjY2VzcyhyZXN1bHQp");
    sb.append("OwogICAgICB9LAogICAgICBuZXh0OiBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGNhbGxiYWNrLm5l");
    sb.append("eHQoaXRlbSk7CiAgICAgIH0sCiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgY2Fs");
    sb.append("bGJhY2suY29tcGxldGUoKTsKICAgICAgfSwKICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikg");
    sb.append("ewogICAgICAgIGNhbGxiYWNrLmZhaWx1cmUocmVhc29uKTsKICAgICAgICBpZiAocmVhc29uID09IDQw");
    sb.append("MzQwMyB8fCByZWFzb24gPT0gNDAzNTAwIHx8IHJlYXNvbiA9PSAxODQzMzMgfHwgcmVhc29uID09IDk4");
    sb.append("MjI1MykgewogICAgICAgICAgbG9va3VwLmNsZWFudXAoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07");
    sb.append("CiAgfTsKCiAgdmFyIGN1c3RvbURhdGFTb3VyY2VzID0ge307CgogIC8qKiBwcm92aWRlIGN1c3RvbSBk");
    sb.append("YXRhICovCiAgc2VsZi5QUkNVREEgPSBmdW5jdGlvbiAobmFtZSwgZm9vKSB7CiAgICBjdXN0b21EYXRh");
    sb.append("U291cmNlc1tuYW1lXSA9IGZvbzsKICB9OwoKICAvLyA8Y3VzdG9tZGF0YSBzcmM9c3JjIChwYXJhbWV0");
    sb.append("ZXI6eD15KSogPgogIHNlbGYuQ1VEQSA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIHNyYywg");
    sb.append("cnhvYmosIHJlZGlyZWN0VG8sIGNoaWxkTWFrZXIpIHsKICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIo");
    sb.append("KTsKICAgIHJ4b2JqLl9fID0gZGVib3VuY2UoMTAsIGZ1bmN0aW9uICgpIHsKICAgICAgZmlyZV91bnN1");
    sb.append("Yih1bnN1Yik7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFyIGN1c3RvbVRyZWUgPSBmYWxzZTsK");
    sb.append("ICAgICAgaWYgKHNyYyBpbiBjdXN0b21EYXRhU291cmNlcykgewogICAgICAgIHZhciBjb25zID0gY3Vz");
    sb.append("dG9tRGF0YVNvdXJjZXNbc3JjXTsKICAgICAgICBpZiAodHlwZW9mIChjb25zKSA9PSAiZnVuY3Rpb24i");
    sb.append("KSB7CiAgICAgICAgICBjdXN0b21UcmVlID0gY29ucyhyeG9iaiwgcHJpb3JTdGF0ZSwgcmVkaXJlY3RU");
    sb.append("bywgc2VsZik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghY3VzdG9tVHJlZSkgewogICAgICAg");
    sb.append("IGN1c3RvbVRyZWUgPSBuZXcgQWRhbWFUcmVlKCk7CiAgICAgIH0KICAgICAgdmFyIHN0YXRlID0gewog");
    sb.append("ICAgICAgIHNlcnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwKICAgICAgICBkYXRhOiB7IGNvbm5lY3Rp");
    sb.append("b246IHByaW9yU3RhdGUuY29ubmVjdGlvbiwgdHJlZTogY3VzdG9tVHJlZSwgZGVsdGE6IHt9LCBwYXJl");
    sb.append("bnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAgICAgICB2aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0");
    sb.append("YXRlLnZpZXcpLAogICAgICAgIGN1cnJlbnQ6ICJkYXRhIgogICAgICB9OwogICAgICBjaGlsZE1ha2Vy");
    sb.append("KHN0YXRlKTsKICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICB9KTsKICB9OwoK");
    sb.append("ICAvLyA8dGl0bGUgdmFsdWU9Ii4uLiIgLz4KICBzZWxmLlNUID0gZnVuY3Rpb24gKHJ4b2JqKSB7CiAg");
    sb.append("ICBpZiAocnhvYmoudmFsdWUpIHsKICAgICAgZG9jdW1lbnQudGl0bGUgPSByeG9iai52YWx1ZTsKICAg");
    sb.append("IH0KICAgIHJ4b2JqLl9fID0gZGVib3VuY2UoNSwgZnVuY3Rpb24gKCkgewogICAgICBpZiAocnhvYmou");
    sb.append("dmFsdWUpIHsKICAgICAgICBkb2N1bWVudC50aXRsZSA9IHJ4b2JqLnZhbHVlOwogICAgICB9CiAgICB9");
    sb.append("KTsKICB9OwoKICAvLyA8dmlld3N5bmM+CiAgc2VsZi5WU3kgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlv");
    sb.append("clN0YXRlLCBhdmFpbCwgbm90YXZhaWwpIHsKICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAg");
    sb.append("IHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLnN1YnNjcmliZV9zeW5jKGZ1bmN0aW9uIChzeW5jZWQp");
    sb.append("IHsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgdmFyIHN0");
    sb.append("YXRlID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgaWYgKHN5bmNlZCkgewogICAgICAgIGF2YWlsKHBh");
    sb.append("cmVudCwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIG5vdGF2YWlsKHBhcmVudCwgc3RhdGUp");
    sb.append("OwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAgICAvLyBUT0RP");
    sb.append("OiByZXR1cm4gZmFsc2UgdG8gdW5zdWIKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKICB9OwoKICB2");
    sb.append("YXIgYmluZF9yZXNwb25kZXIgPSBmdW5jdGlvbiAoY28sIGNsZWFudXAsIHJldHJ5X3NtKSB7CiAgICBy");
    sb.append("ZXRyeV9zbS51bmV4cGVjdGVkX2Vycm9ycyA9IDA7CiAgICByZXRyeV9zbS5iYWNrb2ZmID0gMTsKICAg");
    sb.append("IHJldHVybiB7CiAgICAgIG5leHQ6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgY28uZGVidWdn");
    sb.append("ZXIocGF5bG9hZCk7CiAgICAgICAgY28uc2V0X2Nvbm5lY3RlZCh0cnVlKTsKICAgICAgICByZXRyeV9z");
    sb.append("bS51bmV4cGVjdGVkX2Vycm9ycyA9IDA7CiAgICAgICAgcmV0cnlfc20uYmFja29mZiA9IDE7CiAgICAg");
    sb.append("ICAgaWYgKCJkYXRhIiBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBjby50cmVlLnVwZGF0ZShw");
    sb.append("YXlsb2FkLmRlbHRhLmRhdGEpOwogICAgICAgIH0KICAgICAgICBpZiAoIm91dHN0YW5kaW5nIiBpbiBw");
    sb.append("YXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBjby5vbmRlY2lkZShwYXlsb2FkLmRlbHRhLm91dHN0YW5k");
    sb.append("aW5nKTsKICAgICAgICB9CiAgICAgICAgaWYgKCd2aWV3c3RhdGUnIGluIHBheWxvYWQuZGVsdGEpIHsK");
    sb.append("ICAgICAgICAgIGNvLnZpZXdzdGF0ZXRyZWUudXBkYXRlKHBheWxvYWQuZGVsdGEudmlld3N0YXRlKTsK");
    sb.append("ICAgICAgICB9CiAgICAgICAgaWYgKCdsb2cnIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIGNv");
    sb.append("bnNvbGUubG9nKHBheWxvYWQuZGVsdGEubG9nKTsKICAgICAgICB9CiAgICAgICAgaWYgKCdyZWxvYWQn");
    sb.append("IGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIGlmIChwYXlsb2FkLmRlbHRhLnJlbG9hZFsncHJl");
    sb.append("c2VydmUtdmlldyddKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyeHZpZXdzdGF0");
    sb.append("ZScsIEpTT04uc3RyaW5naWZ5KGNvLnZpZXdzdGF0ZXRyZWUucmF3KCkpKTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICAgICAgaWYgKCd2aWV3");
    sb.append("cG9ydCcgaW4gcGF5bG9hZC5kZWx0YSAmJiAnbWVzc2FnZScgaW4gcGF5bG9hZC5kZWx0YSkgewogICAg");
    sb.append("ICAgICAgdmFyIHZpZXdwb3J0ID0gcGF5bG9hZC5kZWx0YS52aWV3cG9ydDsKICAgICAgICAgIGlmICh2");
    sb.append("aWV3cG9ydCBpbiBjby5oYW5kbGVycykgewogICAgICAgICAgICBjby5oYW5kbGVyc1t2aWV3cG9ydF0o");
    sb.append("cGF5bG9hZC5kZWx0YS5tZXNzYWdlLCBjbyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlm");
    sb.append("ICgndmlldy1zdGF0ZS1maWx0ZXInIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIHZhciBmaWx0");
    sb.append("ZXIgPSB7fTsKICAgICAgICAgIHZhciBrZXlzID0gcGF5bG9hZC5kZWx0YVsndmlldy1zdGF0ZS1maWx0");
    sb.append("ZXInXTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwga2V5cy5sZW5ndGg7IGsrKykgewogICAg");
    sb.append("ICAgICAgICBmaWx0ZXJba2V5c1trXV0gPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgY28uZmls");
    sb.append("dGVyID0gZmlsdGVyOwogICAgICAgICAgY28uaGFzX2ZpbHRlciA9IHRydWU7CiAgICAgICAgfQogICAg");
    sb.append("ICAgIGlmICgnZ290bycgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgc2VsZi5nb3RvKHBheWxv");
    sb.append("YWQuZGVsdGEuZ290bywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgY29tcGxldGU6IGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgICAvLyBzaG91bGRuJ3QgcmVhbGlzdGljYWxseSBoYXBwZW4gVE9ETzog");
    sb.append("dmFsaWRhdGUgPC0gdHJ1dGgKICAgICAgICBjby5zZXRfY29ubmVjdGVkKGZhbHNlKTsKICAgICAgICBj");
    sb.append("by5wdHIgPSBudWxsOwogICAgICB9LAogICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAg");
    sb.append("ICAgICAgLy8gcmVnaXN0ZXIgdGhlIGZhaWx1cmUKICAgICAgICBjby5zZXRfY29ubmVjdGVkKGZhbHNl");
    sb.append("KTsKICAgICAgICBjby5wdHIgPSBudWxsOwogICAgICAgIGlmIChyZWFzb24gPT0gNDAzNDAzIHx8IHJl");
    sb.append("YXNvbiA9PSA0MDM1MDAgfHwgcmVhc29uID09IDE4NDMzMyB8fCByZWFzb24gPT0gOTgyMjUzKSB7CiAg");
    sb.append("ICAgICAgICBjbGVhbnVwKCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIGlz");
    sb.append("IGl0IGFuIGV4cGVjdGVkIGVycm9yIHRoYXQgd2lsbCBoYXBwZW4gYSBidW5jaD8KICAgICAgICB2YXIg");
    sb.append("ZXhwZWN0ZWRfZXJyb3IgPSByZWFzb24gPT0gOTk5OwogICAgICAgIC8vIGRvIHdlIG5vdCBrbm93IGFi");
    sb.append("b3V0IGFuIGVycm9yIHRoYXQgaGFwcGVucyBhIGJ1bmNoPyBpZiBzbywgdGhlbiBsZXQncyBhdCBsZWFz");
    sb.append("dCB0cnkgYWdhaW4gYSBudW1iZXIgb2YgZmluaXRlIHRpbWVzLgogICAgICAgIHZhciBibGluZF9yZXRy");
    sb.append("eSA9IHJldHJ5X3NtLnVuZXhwZWN0ZWRfZXJyb3JzIDwgMTY7CiAgICAgICAgaWYgKGJsaW5kX3JldHJ5");
    sb.append("KSB7CiAgICAgICAgICByZXRyeV9zbS51bmV4cGVjdGVkX2Vycm9ycysrOwogICAgICAgIH0KICAgICAg");
    sb.append("ICAvLyByZXRyeSBvbiBlaXRoZXIgY2FzZQogICAgICAgIGlmIChleHBlY3RlZF9lcnJvciB8fCBibGlu");
    sb.append("ZF9yZXRyeSkgewogICAgICAgICAgcmV0cnlfc20uYmFja29mZiA9IE1hdGguY2VpbChNYXRoLm1pbihy");
    sb.append("ZXRyeV9zbS5iYWNrb2ZmICsgTWF0aC5yYW5kb20oKSAqIHJldHJ5X3NtLmJhY2tvZmYgKyAoYmxpbmRf");
    sb.append("cmV0cnkgPyAxMjUgOiAxKSwgMjUwMCkpOwogICAgICAgICAgaWYgKGV4cGVjdGVkX2Vycm9yKSB7CiAg");
    sb.append("ICAgICAgICAgIC8vIHRoZSBleHBlY3RlZCBlcnJvciBpcyBhIGNvbm5lY3Rpb24gZXZlbnQsIHNvIHdl");
    sb.append("IHByb3RlY3QgdGhlIHNlcnZpY2UgYW5kIGp1bXAgYmFjay1vZmYgcmlnaHQgdG8gbmVhciBtYXggb3Zl");
    sb.append("ciBhIG5pY2Ugc3ByZWFkCiAgICAgICAgICAgIHJldHJ5X3NtLmJhY2tvZmYgPSBNYXRoLm1pbigxMjUw");
    sb.append("LCByZXRyeV9zbS5iYWNrb2ZmKSArIE1hdGgucmFuZG9tKCkgKiAxMjUwOwogICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgaWYgKGV4cGVjdGVkX2Vycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjb25uZWN0");
    sb.append("LWxvc3N8cmV0cnlpbmcuLi4gKCIgKyByZXRyeV9zbS5iYWNrb2ZmICsgIik7IHJlYXNvbj0iICsgcmVh");
    sb.append("c29uICsgKGJsaW5kX3JldHJ5ID8gIiBbYmxpbmRdIiA6ICIiKSk7CiAgICAgICAgICB9IGVsc2Ugewog");
    sb.append("ICAgICAgICAgICBjb25zb2xlLmxvZygiY29ubmVjdC1mYWlsdXJlfHJldHJ5aW5nLi4uICgiICsgcmV0");
    sb.append("cnlfc20uYmFja29mZiArICIpOyByZWFzb249IiArIHJlYXNvbiArIChibGluZF9yZXRyeSA/ICIgW2Js");
    sb.append("aW5kXSIgOiAiIikpOwogICAgICAgICAgfQogICAgICAgICAgLy8gVE9ETzogbmVlZCBhIGRpZmZlcmVu");
    sb.append("dCBmZWVkYmFjayBtZWNoYW5pc20gKG1heWJlIGEgbnVtYmVyIHVuZGVyIHRoZSB3aWZpIGljb24/KQog");
    sb.append("ICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHJ5X3Nt");
    sb.append("LmdvKCk7CiAgICAgICAgICB9LCByZXRyeV9zbS5iYWNrb2ZmKTsKICAgICAgICB9IGVsc2UgewogICAg");
    sb.append("ICAgICAgY29uc29sZS5sb2coImdhdmUgdXAgY29ubmVjdGlvbjsiICsgY28ubGFiZWwgKyAiOyByZWFz");
    sb.append("b249IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIHNldHVwX2Nv");
    sb.append("ID0gZnVuY3Rpb24oZGVzaXJlZCwgdW5zdWIsIGNvLCBzdGF0ZSkgewogICAgY28udmlld3N0YXRldHJl");
    sb.append("ZSA9IHN0YXRlLnZpZXcudHJlZTsKICAgIHZhciBzeW5jX3RyZWUgPSBmdW5jdGlvbiAoKSB7CiAgICAg");
    sb.append("IC8vIGxldCdzIGNvcHkgb3V0IHRoZSB0cmVlIGZyb20gdGhlIHZpZXdzdGF0ZQogICAgICB2YXIgbmV3");
    sb.append("X3RyZWUgPSBzYWZlX2ZpbHRlcihzdGF0ZS52aWV3LnRyZWUuY29weSgpKTsKCiAgICAgIC8vIGlmIHdl");
    sb.append("IGhhdmUgZ290IGEgZmlsdGVyIGZyb20gdGhlIHNlcnZlciwgdGhlbiBsZXQncyBmaWx0ZXIKICAgICAg");
    sb.append("aWYgKGNvLmhhc19maWx0ZXIpIHsKICAgICAgICAvLyByZWNvbnN0cnVjdCB0aGUgbmV3IHZpZXcgYmFz");
    sb.append("ZWQgb24gdGhlIGludGVyc2VjdGlvbiBvZiB0aGUgZmlsdGVyIGFuZCB0aGUgbmV3IHN0YXRlCiAgICAg");
    sb.append("ICAgdmFyIGZpbHRlcmVkID0ge307CiAgICAgICAgZm9yICh2YXIgayBpbiBuZXdfdHJlZSkgewogICAg");
    sb.append("ICAgICAgaWYgKGNvLmZpbHRlcltrXSkgewogICAgICAgICAgICBmaWx0ZXJlZFtrXSA9IG5ld190cmVl");
    sb.append("W2tdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBhc3N1bWUgdGhlIG5ldyB0cmVlCiAg");
    sb.append("ICAgICAgbmV3X3RyZWUgPSBmaWx0ZXJlZDsKICAgICAgfQogICAgICAvLyBpZiB0aGUgY2xvbmUgKGku");
    sb.append("ZS4gc3RyaW5naWZpZWQgdmVyc2lvbikgaXMgdGhlIHNhbWUgYXMgd2hhdCB3ZSBsYXN0IHNlbnQsIHRo");
    sb.append("ZW4gZG9uJ3Qgc2VuZCBhbnl0aGluZwogICAgICB2YXIgcHJpb3JfY2xvbmUgPSBKU09OLnN0cmluZ2lm");
    sb.append("eShuZXdfdHJlZSk7CiAgICAgIGlmIChwcmlvcl9jbG9uZSA9PSBjby52aWV3c3RhdGVfY2xvbmUpIHsK");
    sb.append("ICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY28udmlld3N0YXRlX3NlbnQgPSBmYWxzZTsKICAg");
    sb.append("ICAgY28udnNzZXErKzsKICAgICAgY28uc3luYygpOwogICAgICB2YXIgc3luY2VkID0gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgIGlmIChjby52c3NlcSA9PSB0aGlzLmJvdW5kKSB7CiAgICAgICAgICBjby52aWV3");
    sb.append("c3RhdGVfc2VudCA9IHRydWU7CiAgICAgICAgICBjby5zeW5jKCk7CiAgICAgICAgfQogICAgICB9LmJp");
    sb.append("bmQoeyBib3VuZDogY28udnNzZXEgfSk7CiAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9IEpTT04uc3Ry");
    sb.append("aW5naWZ5KG5ld190cmVlKTsKICAgICAgY28ucHRyLnVwZGF0ZShuZXdfdHJlZSwgeyBzdWNjZXNzOiBz");
    sb.append("eW5jZWQsIGZhaWx1cmU6IHN5bmNlZCB9KTsKICAgIH07CiAgICB2YXIgYmluZCA9IGZ1bmN0aW9uIChz");
    sb.append("ZW5kTm93KSB7CiAgICAgIHVuc3ViLnZpZXcgPSBzdGF0ZS52aWV3LnRyZWUuc3Vic2NyaWJlKGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICBpZiAoY28ucHRyID09IG51bGwpIHsKICAgICAgICAgIHJldHVybjsKICAg");
    sb.append("ICAgICB9CiAgICAgICAgc3luY190cmVlKCk7CiAgICAgIH0pOwogICAgICBpZiAoc2VuZE5vdykgewog");
    sb.append("ICAgICAgIHN5bmNfdHJlZSgpOwogICAgICB9CiAgICB9OwogICAgaWYgKGNvLnB0ciAhPSBudWxsICYm");
    sb.append("IGNvLmJvdW5kID09IGRlc2lyZWQpIHsKICAgICAgYmluZCh0cnVlKTsKICAgICAgcmV0dXJuIGZhbHNl");
    sb.append("OwogICAgfQogICAgaWYgKGNvLnB0ciAhPSBudWxsKSB7CiAgICAgIGNvLnB0ci5lbmQoeyBzdWNjZXNz");
    sb.append("OiBmdW5jdGlvbiAoKSB7IH0sIGZhaWx1cmU6IGZ1bmN0aW9uICgpIHsgfSB9KTsKICAgICAgY28ucHRy");
    sb.append("ID0gbnVsbDsKICAgIH0KICAgIHJldHVybiBiaW5kOwogIH07CgogIC8vIDxjb25uZWN0aW9uIGJpbGxp");
    sb.append("bmcgLi4uPgogIHNlbGYuQkNPTk5FQ1QgPSBmdW5jdGlvbiAoc3RhdGUsIHJ4b2JqKSB7CiAgICB2YXIg");
    sb.append("dW5zdWIgPSB7CiAgICAgIHZpZXc6IGZ1bmN0aW9uICgpIHsKICAgICAgfQogICAgfTsKICAgIHJ4b2Jq");
    sb.append("Ll9fID0gZGVib3VuY2UoNSwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoISgnbmFtZScgaW4gcnhvYmop");
    sb.append("KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQocnhv");
    sb.append("YmouaWRlbnRpdHksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0OyB9KTsKICAgICAg");
    sb.append("aWYgKGlkTG9va3VwLmFib3J0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBjbyA9");
    sb.append("IGdldF9jb25uZWN0aW9uX29iaihyeG9iai5uYW1lKTsKICAgICAgdmFyIGRlc2lyZWQgPSAiOmJpbGxp");
    sb.append("bmc6IiArIGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2YXIgYmluZCA9IHNldHVwX2NvKGRlc2lyZWQs");
    sb.append("IHVuc3ViLCBjbywgc3RhdGUpOwogICAgICBpZiAoYmluZCA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1");
    sb.append("cm47CiAgICAgIH0KICAgICAgY28uYm91bmQgPSBkZXNpcmVkOwogICAgICB2YXIgaWRlbnRpdHkgPSBp");
    sb.append("ZExvb2t1cC5pZGVudGl0eTsKICAgICAgdmFyIGNsZWFudXAgPSBpZExvb2t1cC5jbGVhbnVwOwogICAg");
    sb.append("ICB1bnN1Yi52aWV3KCk7CiAgICAgIGNvLmlkZW50aXR5ID0gaWRlbnRpdHk7CiAgICAgIGNvLmhhbmRs");
    sb.append("ZXJzID0ge307CiAgICAgIGNvLnZpZXdzdGF0ZV9zZW50ID0gdHJ1ZTsKICAgICAgY28ubGFiZWwgPSAi");
    sb.append("QmlsbGluZyBbICIgKyByeG9iai5uYW1lICsgIl0iOwogICAgICBjby52aWFfYmlsbGluZyA9IHRydWU7");
    sb.append("CiAgICAgIGNvLnZpYV9kb21haW4gPSBmYWxzZTsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAgICAg");
    sb.append("IHJldHJ5X3NtLnJlc3BvbmRlciA9IGJpbmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9zbSk7");
    sb.append("CiAgICAgIHJldHJ5X3NtLmdvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3RoaW5n");
    sb.append("IG5ldwogICAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0gY29u");
    sb.append("bmVjdGlvbi5CaWxsaW5nQ29ubmVjdGlvbkNyZWF0ZShpZGVudGl0eSwgcmV0cnlfc20ucmVzcG9uZGVy");
    sb.append("KTsKICAgICAgfTsKICAgICAgcmV0cnlfc20uZ28oKTsKICAgICAgY28udHJlZS51cGRhdGUoe30pOwog");
    sb.append("ICAgICBiaW5kKGZhbHNlKTsKICAgIH0pOwogIH07CgogIC8vIENIRUNLIEZPUiBPVkVSUklERSBTSUdO");
    sb.append("QUwgSEVSRQogIHNlbGYuZG9tYWluID0gbG9jYXRpb24uaG9zdG5hbWU7CiAgc2VsZi5ob3N0ID0gbG9j");
    sb.append("YXRpb24uaG9zdDsKICBzZWxmLnByb3RvY29sID0gbG9jYXRpb24ucHJvdG9jb2w7CiAgc2VsZi5pc19t");
    sb.append("b2JpbGUgPSBmYWxzZTsKCiAgdmFyIGhvc3RPdmVycmlkZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJt");
    sb.append("ZG9faG9zdCIpOyAvLyBtdWx0aSBkb21haW4gZW5kcG9pbnQgY2hvaWNlCiAgaWYgKGhvc3RPdmVycmlk");
    sb.append("ZSAhPSBudWxsKSB7CiAgICBzZWxmLmhvc3QgPSBob3N0T3ZlcnJpZGU7CiAgICBzZWxmLmRvbWFpbiA9");
    sb.append("IGhvc3RPdmVycmlkZS5zcGxpdCgiOiIpWzBdOwogIH0KCiAgc2VsZi51cmxfcHJlZml4ID0gc2VsZi5w");
    sb.append("cm90b2NvbCArICIvLyIgKyBzZWxmLmhvc3Q7CgoKICBzZWxmLm1vYmlsZUluaXQgPSBmdW5jdGlvbihk");
    sb.append("ZWZhdWx0T3ZlcnJpZGVEb21haW4pIHsKICAgIHNlbGYuZG9tYWluID0gZGVmYXVsdE92ZXJyaWRlRG9t");
    sb.append("YWluOwogICAgc2VsZi5ob3N0ID0gZGVmYXVsdE92ZXJyaWRlRG9tYWluOwogICAgc2VsZi5wcm90b2Nv");
    sb.append("bCA9ICJodHRwczoiOwogICAgY29ubmVjdGlvbi5wcm90b2NvbCA9ICJodHRwczoiOwogICAgc2VsZi5p");
    sb.append("c19tb2JpbGUgPSB0cnVlOwogIH07CiAgc2VsZi5tb2JpbGVJbml0TXVsdGlEb21haW4gPSBmdW5jdGlv");
    sb.append("bihzdGFydCwgYmV0YVByZWZpeCwgcHJvZFByZWZpeCkgewogICAgc2VsZi5tZF9iZXRhUHJlZml4ID0g");
    sb.append("YmV0YVByZWZpeDsKICAgIHNlbGYubWRfcHJvZFByZWZpeCA9IHByb2RQcmVmaXg7CiAgICBzZWxmLnBy");
    sb.append("b3RvY29sID0gImh0dHBzOiI7CiAgICBjb25uZWN0aW9uLnByb3RvY29sID0gImh0dHBzOiI7CiAgICBz");
    sb.append("ZWxmLmlzX21vYmlsZSA9IHRydWU7CiAgICB2YXIgaW5pdGlhbF9wYXRoID0gc3RhcnQ7CiAgICBpZiAo");
    sb.append("InJlYWR5IiA9PSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibWRsIikpIHsKICAgICAgaW5pdGlhbF9wYXRo");
    sb.append("ID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIHdpbmRv");
    sb.append("dy5sb2NhdGlvbi5oYXNoOwogICAgfQogICAgc2VsZi5ydW4oZG9jdW1lbnQuYm9keSwgZml4UGF0aChp");
    sb.append("bml0aWFsX3BhdGgpLCBmYWxzZSk7CiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uIChwKSB7");
    sb.append("CiAgICAgIHNlbGYucnVuKGRvY3VtZW50LmJvZHksIGZpeFBhdGgoaW5pdGlhbF9wYXRoKSwgZmFsc2Up");
    sb.append("OwogICAgfTsKICB9OwogIHZhciBnZXRPckNyZWF0ZU1hbmlmZXN0cyA9IGZ1bmN0aW9uKCkgewogICAg");
    sb.append("dmFyIGRiID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIl9fZG9tYWluX21hbmlmZXN0cyIpOwogICAgaWYg");
    sb.append("KGRiID09IG51bGwpIHsKICAgICAgZGIgPSB7c2VxOjAsIG1hbmlmZXN0czpbXX07CiAgICB9IGVsc2Ug");
    sb.append("ewogICAgICBkYiA9IEpTT04ucGFyc2UoZGIpOwogICAgfQogICAgcmV0dXJuIGRiOwogIH07CiAgdmFy");
    sb.append("IHNhdmVNYW5pZmVzdHMgPSBmdW5jdGlvbihkYikgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIl9f");
    sb.append("ZG9tYWluX21hbmlmZXN0cyIsIEpTT04uc3RyaW5naWZ5KGRiKSk7CiAgfTsKICBzZWxmLnJlZ2lzdGVy");
    sb.append("TWFuaWZlc3QgPSBmdW5jdGlvbih1cmwsIHVzZSA9IGZhbHNlKSB7CiAgICB2YXIgZGIgPSBnZXRPckNy");
    sb.append("ZWF0ZU1hbmlmZXN0cygpOwogICAgdmFyIGFkZCA9IGZ1bmN0aW9uKG1hbmlmZXN0KSB7CiAgICAgIG1h");
    sb.append("bmlmZXN0LnNvdXJjZSA9IHVybDsKICAgICAgbWFuaWZlc3QuaWQgPSBkYi5zZXE7CiAgICAgIGRiLnNl");
    sb.append("cSsrOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGRiLm1hbmlmZXN0cy5sZW5ndGg7IGsrKykgewog");
    sb.append("ICAgICAgIGlmIChkYi5tYW5pZmVzdHNba10uc291cmNlID09IHVybCkgewogICAgICAgICAgZGIubWFu");
    sb.append("aWZlc3RzW2tdID0gbWFuaWZlc3Q7CiAgICAgICAgICBzYXZlTWFuaWZlc3RzKGRiKTsKICAgICAgICAg");
    sb.append("IHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZGIubWFuaWZlc3RzLnB1c2gobWFuaWZlc3Qp");
    sb.append("OwogICAgICBzYXZlTWFuaWZlc3RzKGRiKTsKICAgIH07CiAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0");
    sb.append("cFJlcXVlc3QoKTsKICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIw");
    sb.append("MCkgewogICAgICAgICAgYWRkKEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpKTsKCiAgICAgICAg");
    sb.append("ICBpZih1c2UpIHsKICAgICAgICAgICAgaWYgKGRiLm1hbmlmZXN0cy5sZW5ndGggPiAwKSB7CiAgICAg");
    sb.append("ICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBkYi5tYW5pZmVzdHMubGVuZ3RoOyBrKyspIHsKICAg");
    sb.append("ICAgICAgICAgICAgIGlmIChkYi5tYW5pZmVzdHNba10uc291cmNlID09IHVybCkgewogICAgICAgICAg");
    sb.append("ICAgICAgICBzZWxmLnVzZU1hbmlmZXN0KGRiLm1hbmlmZXN0c1trXS5pZCk7CiAgICAgICAgICAgICAg");
    sb.append("ICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0K");
    sb.append("ICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICB4aHR0cC5vcGVuKCJHRVQiLCB1");
    sb.append("cmwsIHRydWUpOwogICAgeGh0dHAuc2VuZCgpOwogIH07CiAgLy8gUlVOVElNRShtb2JpbGUpIHwgcng6");
    sb.append("YWN0aW9uPSJtYW5pZmVzdC1hZGQ6IgogIHNlbGYuTURfYSA9IGZ1bmN0aW9uKGRvbSwgdHlwZSwgdmFs");
    sb.append("dWUpIHsKICAgIHJlZ19ldmVudChudWxsLCBkb20sIHR5cGUsIGZ1bmN0aW9uKCkgewogICAgICBzZWxm");
    sb.append("LnJlZ2lzdGVyTWFuaWZlc3QodHlwZW9mKHZhbHVlKSA9PSAnZnVuY3Rpb24nID8gdmFsdWUoKSA6IHZh");
    sb.append("bHVlKTsKICAgIH0pOwogIH07CgogIHNlbGYudXNlTWFuaWZlc3QgPSBmdW5jdGlvbihpZCkgewogICAg");
    sb.append("ICB2YXIgZGIgPSBnZXRPckNyZWF0ZU1hbmlmZXN0cygpOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8");
    sb.append("IGRiLm1hbmlmZXN0cy5sZW5ndGg7IGsrKykgewogICAgICAgIHZhciBtYW5pZmVzdCA9IGRiLm1hbmlm");
    sb.append("ZXN0c1trXTsKICAgICAgICBpZiAobWFuaWZlc3QuaWQgPT0gaWQpIHsKICAgICAgICAgIGxvY2FsU3Rv");
    sb.append("cmFnZS5zZXRJdGVtKCJtZG9faG9zdCIsIG5ldyBVUkwoZGIubWFuaWZlc3RzW2tdLnNvdXJjZSkuaG9z");
    sb.append("dCk7CiAgICAgICAgICBpZiAobWFuaWZlc3QuYmV0YSkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uu");
    sb.append("c2V0SXRlbSgibWRlYyIsICJiZXRhIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsb2Nh");
    sb.append("bFN0b3JhZ2Uuc2V0SXRlbSgibWRlYyIsICJwcm9kIik7CiAgICAgICAgICB9CiAgICAgICAgICBsb2Nh");
    sb.append("bFN0b3JhZ2Uuc2V0SXRlbSgibWRsIiwgInJlYWR5Iik7CiAgICAgICAgICB3aW5kb3cubG9jYXRpb24u");
    sb.append("aHJlZiA9ICIvIjsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAvLyBSVU5USU1FKG1vYmlsZSkgfCBy");
    sb.append("eDphY3Rpb249Im1hbmlmZXN0LXVzZToiCiAgc2VsZi5NRF91ID0gZnVuY3Rpb24oZG9tLCB0eXBlLCB2");
    sb.append("YWx1ZSkgewogICAgcmVnX2V2ZW50KG51bGwsIGRvbSwgdHlwZSwgZnVuY3Rpb24oKSB7CiAgICAgIHNl");
    sb.append("bGYudXNlTWFuaWZlc3QodHlwZW9mKHZhbHVlKSA9PSAnZnVuY3Rpb24nID8gdmFsdWUoKSA6IHZhbHVl");
    sb.append("KTsKICAgIH0pOwogIH07CiAgc2VsZi5tb2JpbGVMb2FkID0gZnVuY3Rpb24odXJsKSB7CiAgICB2YXIg");
    sb.append("cGFyc2VkID0gbmV3IFVSTCh1cmwpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kb19ob3N0Iiwg");
    sb.append("cGFyc2VkLmhvc3QpOwogICAgaWYgKHBhcnNlZC5ob3N0LmVuZHNXaXRoKHNlbGYubWRfYmV0YVByZWZp");
    sb.append("eCkpIHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kZWMiLCAiYmV0YSIpOwogICAgfSBlbHNl");
    sb.append("IHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kZWMiLCAicHJvZCIpOwogICAgfQogICAgd2lu");
    sb.append("ZG93LmxvY2F0aW9uLmhyZWYgPSBwYXJzZWQucGF0aDsKICB9OwogIC8vIFJVTlRJTUUobW9iaWxlKSB8");
    sb.append("IHJ4OmFjdGlvbj0ibWFuaWZlc3QtZGVsOiIKICBzZWxmLk1EX2QgPSBmdW5jdGlvbihkb20sIHR5cGUs");
    sb.append("IHZhbHVlKSB7CiAgICByZWdfZXZlbnQobnVsbCwgZG9tLCB0eXBlLCBmdW5jdGlvbigpIHsKICAgICAg");
    sb.append("dmFyIGlkID0gcGFyc2VJbnQodHlwZW9mKHZhbHVlKSA9PSAnZnVuY3Rpb24nID8gdmFsdWUoKSA6IHZh");
    sb.append("bHVlKTsKICAgICAgdmFyIGRiID0gZ2V0T3JDcmVhdGVNYW5pZmVzdHMoKTsKICAgICAgdmFyIG5ld19t");
    sb.append("YW5pZmVzdHMgPSBbXTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBkYi5tYW5pZmVzdHMubGVuZ3Ro");
    sb.append("OyBrKyspIHsKICAgICAgICBpZiAoZGIubWFuaWZlc3RzW2tdLmlkICE9IGlkKSB7CiAgICAgICAgICBu");
    sb.append("ZXdfbWFuaWZlc3RzLnB1c2goZGIubWFuaWZlc3RzW2tdKTsKICAgICAgICB9CiAgICAgIH0KICAgICAg");
    sb.append("ZGIubWFuaWZlc3RzID0gbmV3X21hbmlmZXN0czsKICAgICAgc2F2ZU1hbmlmZXN0cyhkYik7CiAgICB9");
    sb.append("KTsKICB9OwoKICAvLyA8Y29ubmVjdGlvbiB1c2UtZG9tYWluIC4uLj4KICBzZWxmLkRDT05ORUNUID0g");
    sb.append("ZnVuY3Rpb24gKHN0YXRlLCByeG9iaikgewogICAgdmFyIHVuc3ViID0gewogICAgICB2aWV3OiBmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICAgIH0KICAgIH07CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDUsIGZ1bmN0aW9u");
    sb.append("ICgpIHsKICAgICAgaWYgKCEoJ25hbWUnIGluIHJ4b2JqKSkgewogICAgICAgIHJldHVybjsKICAgICAg");
    sb.append("fQogICAgICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKHJ4b2JqLmlkZW50aXR5LCBmdW5jdGlvbiAoKSB7");
    sb.append("IHJldHVybiByeG9iai5yZWRpcmVjdDsgfSk7CiAgICAgIGlmIChpZExvb2t1cC5hYm9ydCkgewogICAg");
    sb.append("ICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgY28gPSBnZXRfY29ubmVjdGlvbl9vYmoocnhvYmou");
    sb.append("bmFtZSk7CiAgICAgIHZhciBkb21haW4gPSBzZWxmLmRvbWFpbjsKICAgICAgdmFyIGRlc2lyZWQgPSBk");
    sb.append("b21haW4gKyBpZExvb2t1cC5pZGVudGl0eTsKICAgICAgdmFyIGJpbmQgPSBzZXR1cF9jbyhkZXNpcmVk");
    sb.append("LCB1bnN1YiwgY28sIHN0YXRlKTsKICAgICAgaWYgKGJpbmQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICB9CiAgICAgIGNvLmJvdW5kID0gZGVzaXJlZDsKCiAgICAgIHZhciBpZGVudGl0eSA9");
    sb.append("IGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2YXIgY2xlYW51cCA9IGlkTG9va3VwLmNsZWFudXA7CiAg");
    sb.append("ICAgIHVuc3ViLnZpZXcoKTsKICAgICAgY28uaWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAgY28uaGFu");
    sb.append("ZGxlcnMgPSB7fTsKICAgICAgY28udmlld3N0YXRlX3NlbnQgPSB0cnVlOwogICAgICBjby5sYWJlbCA9");
    sb.append("ICJEb21haW46IiArIGRvbWFpbiArICIgWyAiICsgcnhvYmoubmFtZSArICJdIjsKICAgICAgY28udmlh");
    sb.append("X2RvbWFpbiA9IHRydWU7CiAgICAgIGNvLnZpYV9iaWxsaW5nID0gZmFsc2U7CiAgICAgIGNvLmRvbWFp");
    sb.append("biA9IGRvbWFpbjsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAgICAgIHJldHJ5X3NtLnJlc3BvbmRl");
    sb.append("ciA9IGJpbmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9zbSk7CiAgICAgIHJldHJ5X3NtLmdv");
    sb.append("ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3RoaW5nIG5ldwogICAgICAgIGNvLnZp");
    sb.append("ZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0gY29ubmVjdGlvbi5Db25uZWN0aW9u");
    sb.append("Q3JlYXRlVmlhRG9tYWluKGlkZW50aXR5LCBkb21haW4sIHNhZmVfZmlsdGVyKHN0YXRlLnZpZXcudHJl");
    sb.append("ZS5jb3B5KCkpLCByZXRyeV9zbS5yZXNwb25kZXIpOwogICAgICB9OwogICAgICByZXRyeV9zbS5nbygp");
    sb.append("OwogICAgICBjby50cmVlLnVwZGF0ZSh7fSk7CiAgICAgIGJpbmQoZmFsc2UpOwogICAgfSk7CiAgfTsK");
    sb.append("CiAgLy8gPGNvbm5lY3Rpb24gLi4uPgogIHNlbGYuQ09OTkVDVCA9IGZ1bmN0aW9uIChzdGF0ZSwgcnhv");
    sb.append("YmopIHsKICAgIHZhciB1bnN1YiA9IHsKICAgICAgdmlldzogZnVuY3Rpb24gKCkgewogICAgICB9CiAg");
    sb.append("ICB9OwogICAgcnhvYmouX18gPSBkZWJvdW5jZSg1LCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2YWxp");
    sb.append("ZCA9ICdrZXknIGluIHJ4b2JqICYmICdzcGFjZScgaW4gcnhvYmogJiYgJ25hbWUnIGluIHJ4b2JqOwog");
    sb.append("ICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpZExvb2t1");
    sb.append("cCA9IHNlbGYuSUQocnhvYmouaWRlbnRpdHksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJlZGly");
    sb.append("ZWN0OyB9KTsKICAgICAgaWYgKGlkTG9va3VwLmFib3J0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9");
    sb.append("CiAgICAgIHZhciBjbyA9IGdldF9jb25uZWN0aW9uX29iaihyeG9iai5uYW1lKTsKICAgICAgdmFyIGRl");
    sb.append("c2lyZWQgPSByeG9iai5zcGFjZSArICIvIiArIHJ4b2JqLmtleSArICIvIiArIGlkTG9va3VwLmlkZW50");
    sb.append("aXR5OyAvLyBUT0RPOiBuZWVkIHNvbWUga2luZCBvZiBoYXNoaW5nIGZ1bmN0aW9uIGhlcmUKICAgICAg");
    sb.append("dmFyIGJpbmQgPSBzZXR1cF9jbyhkZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKTsKICAgICAgaWYgKGJp");
    sb.append("bmQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvLmJvdW5kID0gZGVz");
    sb.append("aXJlZDsKCiAgICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2YXIgY2xl");
    sb.append("YW51cCA9IGlkTG9va3VwLmNsZWFudXA7CiAgICAgIHVuc3ViLnZpZXcoKTsKICAgICAgY28uc3BhY2Ug");
    sb.append("PSByeG9iai5zcGFjZTsKICAgICAgY28ua2V5ID0gcnhvYmoua2V5OwogICAgICBjby5pZGVudGl0eSA9");
    sb.append("IGlkZW50aXR5OwogICAgICBjby5oYW5kbGVycyA9IHt9OwogICAgICBjby52aWV3c3RhdGVfc2VudCA9");
    sb.append("IHRydWU7CiAgICAgIGNvLmxhYmVsID0gY28uc3BhY2UgKyAiLyIgKyBjby5rZXkgKyAiIFsgIiArIHJ4");
    sb.append("b2JqLm5hbWUgKyAiXSI7CiAgICAgIGNvLnZpYV9kb21haW4gPSBmYWxzZTsKICAgICAgY28udmlhX2Jp");
    sb.append("bGxpbmcgPSBmYWxzZTsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAgICAgIHJldHJ5X3NtLnJlc3Bv");
    sb.append("bmRlciA9IGJpbmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9zbSk7CiAgICAgIHJldHJ5X3Nt");
    sb.append("LmdvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3RoaW5nIG5ldwogICAgICAgIGNv");
    sb.append("LnZpZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0gY29ubmVjdGlvbi5Db25uZWN0");
    sb.append("aW9uQ3JlYXRlKGlkZW50aXR5LCByeG9iai5zcGFjZSwgcnhvYmoua2V5LCBzYWZlX2ZpbHRlcihzdGF0");
    sb.append("ZS52aWV3LnRyZWUuY29weSgpKSwgcmV0cnlfc20ucmVzcG9uZGVyKTsKICAgICAgfTsKICAgICAgcmV0");
    sb.append("cnlfc20uZ28oKTsKICAgICAgY28udHJlZS51cGRhdGUoe30pOwogICAgICBiaW5kKGZhbHNlKTsKICAg");
    sb.append("IH0pOwogIH07CgogIHNlbGYuSU5URVJOQUwgPSBmdW5jdGlvbiAocHJpb3JTdGF0ZSkgewogICAgcmV0");
    sb.append("dXJuIHsKICAgICAgc2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNlLAogICAgICBkYXRhOiB7IGNvbm5l");
    sb.append("Y3Rpb246IG51bGwsIHRyZWU6IG5ldyBBZGFtYVRyZWUoKSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGws");
    sb.append("IHBhdGg6IG51bGwgfSwKICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwK");
    sb.append("ICAgICAgY3VycmVudDogImRhdGEiCiAgICB9OwogIH07CgogIHZhciByZWNhbGxfZW1haWwgPSBmdW5j");
    sb.append("dGlvbiAoZWwpIHsKICAgIGlmIChlbC50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIklOUFVUIikgewog");
    sb.append("ICAgICBpZiAoImVtYWlsIiA9PSBlbC50eXBlICYmICJlbWFpbCIgPT0gZWwubmFtZSkgewogICAgICAg");
    sb.append("IGVsLnZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImVtYWlsX3JlbWVtYmVyIik7CiAgICAgIH0K");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgIGlmICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAgICAgdmFyIGFyciA9");
    sb.append("IGVsLmNoaWxkcmVuOwogICAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBr");
    sb.append("ID0gMDsgayA8IG47IGsrKykgewogICAgICAgICAgcmVjYWxsX2VtYWlsKGVsLmNoaWxkcmVuW2tdKTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICBzZWxmLmFVUCA9IGZ1bmN0aW9uIChmb3JtLCBz");
    sb.append("dGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgdmFyIGlkTG9va3VwID0gc2VsZi5JRChpZGVu");
    sb.append("dGl0eU5hbWUsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJ4X2ZvcndhcmQ7IH0pOyAvLyBUT0RP");
    sb.append("OiBtYWtlIHJ4dmFyCiAgICBpZiAoaWRMb29rdXAuYWJvcnQpIHsKICAgICAgcmV0dXJuOwogICAgfQog");
    sb.append("ICAgZm9ybS5hY3Rpb24gPSAiaHR0cHM6Ly8iICsgQWRhbWEuUHJvZHVjdGlvbiArICIvfnVwbG9hZCI7");
    sb.append("CiAgICBmb3JtLm1ldGhvZCA9ICJwb3N0IjsKICAgIGZvcm0uZW5jdHlwZSA9ICJtdWx0aXBhcnQvZm9y");
    sb.append("bS1kYXRhIjsKICAgIHZhciBpZGVudGl0eUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5w");
    sb.append("dXQiKTsKICAgIGlkZW50aXR5SW5wdXQudHlwZSA9ICJoaWRkZW4iOwogICAgaWRlbnRpdHlJbnB1dC5u");
    sb.append("YW1lID0gImlkZW50aXR5IjsKICAgIGlkZW50aXR5SW5wdXQudmFsdWUgPSBpZExvb2t1cC5pZGVudGl0");
    sb.append("eTsKICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWRlbnRpdHlJbnB1dCk7CiAgICB2YXIgaWZyYW1lVGFyZ2V0");
    sb.append("ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CiAgICBpZnJhbWVUYXJnZXQubmFtZSA9");
    sb.append("ICJVUExPQURfIiArIE1hdGgucmFuZG9tKCk7CiAgICBpZnJhbWVUYXJnZXQud2lkdGggPSAiMSI7CiAg");
    sb.append("ICBpZnJhbWVUYXJnZXQuaGVpZ2h0ID0gIjEiOwoKICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWZyYW1lVGFy");
    sb.append("Z2V0KTsKICAgIGZvcm0udGFyZ2V0ID0gaWZyYW1lVGFyZ2V0Lm5hbWU7CiAgfTsKCiAgc2VsZi5hRFVQ");
    sb.append("ID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICB2YXIgaWRM");
    sb.append("b29rdXAgPSBzZWxmLklEKGlkZW50aXR5TmFtZSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhvYmoucnhf");
    sb.append("Zm9yd2FyZDsgfSk7IC8vIFRPRE86IG1ha2Ugcnh2YXIKICAgIGlmIChpZExvb2t1cC5hYm9ydCkgewog");
    sb.append("ICAgICByZXR1cm47CiAgICB9CiAgICBmb3JtLmFjdGlvbiA9IHNlbGYucHJvdG9jb2wgKyAiLy8iICsg");
    sb.append("c2VsZi5ob3N0ICsgIi9+dXBsb2FkIjsKICAgIGZvcm0ubWV0aG9kID0gInBvc3QiOwogICAgZm9ybS5l");
    sb.append("bmN0eXBlID0gIm11bHRpcGFydC9mb3JtLWRhdGEiOwogICAgewogICAgICB2YXIgaWRlbnRpdHlJbnB1");
    sb.append("dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGlkZW50aXR5SW5wdXQudHlw");
    sb.append("ZSA9ICJoaWRkZW4iOwogICAgICBpZGVudGl0eUlucHV0Lm5hbWUgPSAiaWRlbnRpdHkiOwogICAgICBp");
    sb.append("ZGVudGl0eUlucHV0LnZhbHVlID0gaWRMb29rdXAuaWRlbnRpdHk7CiAgICAgIGZvcm0uYXBwZW5kQ2hp");
    sb.append("bGQoaWRlbnRpdHlJbnB1dCk7CiAgICB9CiAgICB7CiAgICAgIHZhciBkb21haW5JbnB1dCA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGRvbWFpbklucHV0LnR5cGUgPSAiaGlkZGVu");
    sb.append("IjsKICAgICAgZG9tYWluSW5wdXQubmFtZSA9ICJkb21haW4iOwogICAgICBkb21haW5JbnB1dC52YWx1");
    sb.append("ZSA9IHNlbGYuZG9tYWluOwogICAgICBmb3JtLmFwcGVuZENoaWxkKGRvbWFpbklucHV0KTsKICAgIH0K");
    sb.append("ICAgIHZhciBpZnJhbWVUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsKICAg");
    sb.append("IGlmcmFtZVRhcmdldC5uYW1lID0gIlVQTE9BRF8iICsgTWF0aC5yYW5kb20oKTsKICAgIGlmcmFtZVRh");
    sb.append("cmdldC53aWR0aCA9ICIxIjsKICAgIGlmcmFtZVRhcmdldC5oZWlnaHQgPSAiMSI7CiAgICBmb3JtLmFw");
    sb.append("cGVuZENoaWxkKGlmcmFtZVRhcmdldCk7CiAgICBmb3JtLnRhcmdldCA9IGlmcmFtZVRhcmdldC5uYW1l");
    sb.append("OwogIH07CgoKCiAgdmFyIGdldF9mb3JtX2FuZF9wdyA9IGZ1bmN0aW9uKGZvcm0pIHsKICAgIHZhciBw");
    sb.append("YXNzd29yZHMgPSB7fTsKICAgIHZhciByZXEgPSBnZXRfZm9ybShmb3JtLCBwYXNzd29yZHMpOwogICAg");
    sb.append("aWYgKCdwYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB7CiAgICAgIHJlcVsncGFzc3dvcmQnXSA9IHBhc3N3");
    sb.append("b3Jkc1sncGFzc3dvcmQnXTsKICAgIH0KICAgIGlmICgnbmV3X3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMp");
    sb.append("IHsKICAgICAgcmVxWyduZXdfcGFzc3dvcmQnXSA9IHBhc3N3b3Jkc1snbmV3X3Bhc3N3b3JkJ107CiAg");
    sb.append("ICB9CiAgICByZXR1cm4gcmVxOwogIH0KCiAgdmFyIGNvbW1vbkF1dGhvcml6ZSA9IGZ1bmN0aW9uKGZv");
    sb.append("cm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqLCBuZXh0U3RlcCkgewogICAgcnhvYmouX18gPSBm");
    sb.append("dW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9u");
    sb.append("IChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBzZW5kUmVxID0gZnVu");
    sb.append("Y3Rpb24ocmVxKSB7CiAgICAgICAgdmFyIHNtID0ge2F0dGVtcHRzOjB9OwogICAgICAgIHNtLnJlc3Bv");
    sb.append("bmRlciA9IHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICAg");
    sb.append("IHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwgY29ubmVjdGlvbik7");
    sb.append("CiAgICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICAg");
    sb.append("IGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICAgIH0sCiAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlv");
    sb.append("biAocmVhc29uKSB7CiAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHNpZ25pbmcg");
    sb.append("aW50byBkb2N1bWVudDoiICsgcmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIG5l");
    sb.append("eHRTdGVwKHJlcSwgc20ucmVzcG9uZGVyKTsKICAgICAgfQogICAgICB2YXIgcGFzc3dvcmRzID0ge307");
    sb.append("CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybShmb3JtLCBwYXNzd29yZHMpOwogICAgICBpZiAoJ3Bhc3N3");
    sb.append("b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgICByZXFbJ3Bhc3N3b3JkJ10gPSBwYXNzd29yZHNbJ3Bh");
    sb.append("c3N3b3JkJ107CiAgICAgIH0KICAgICAgaWYgKCduZXdfcGFzc3dvcmQnIGluIHBhc3N3b3Jkcykgewog");
    sb.append("ICAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3b3Jkc1snbmV3X3Bhc3N3");
    sb.append("b3JkJ10sIHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChoYXNoZWRfcHcpIHsKICAgICAgICAg");
    sb.append("ICAgcmVxWyduZXdfcGFzc3dvcmQnXSA9IGhhc2hlZF9wdy5wYXNzd29yZEhhc2g7CiAgICAgICAgICAg");
    sb.append("IHNlbmRSZXEocmVxKTsKICAgICAgICAgIH0sCiAgICAgICAgICBmYWlsZWQ6IGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgdG8gaGFzaCBwYXNzd29yZCIpOwog");
    sb.append("ICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHNlbmRSZXEocmVxKTsK");
    sb.append("ICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfQoKICAvLyByeDphY3Rpb249ZG9jdW1lbnQ6YXV0aG9yaXpl");
    sb.append("CiAgc2VsZi5hRE9DID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7");
    sb.append("CiAgICBjb21tb25BdXRob3JpemUoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmosIGZ1bmN0");
    sb.append("aW9uKHJlcSwgcmVzcG9uZGVyKSB7CiAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRBdXRob3JpemF0aW9u");
    sb.append("KHJlcS5zcGFjZSwgcmVxLmtleSwgcmVxLCByZXNwb25kZXIpOwogICAgfSk7CiAgfTsKCiAgLy8gcng6");
    sb.append("YWN0aW9uPWRvbWFpbjphdXRob3JpemUKICBzZWxmLmFET00gPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUs");
    sb.append("IGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIGNvbW1vbkF1dGhvcml6ZShmb3JtLCBzdGF0ZSwgaWRl");
    sb.append("bnRpdHlOYW1lLCByeG9iaiwgZnVuY3Rpb24ocmVxLCByZXNwb25kZXIpIHsKICAgICAgY29ubmVjdGlv");
    sb.append("bi5Eb2N1bWVudEF1dGhvcml6YXRpb25Eb21haW4oc2VsZi5kb21haW4sIHJlcSwgcmVzcG9uZGVyKTsK");
    sb.append("ICAgIH0pOwogIH07CgogIC8vIHJ4OmV2ZW50PXRvZ2dsZS1wYXNzd29yZAogIHNlbGYub25QV1QgPSBm");
    sb.append("dW5jdGlvbihkb20sIHN0YXRlLCB0eXBlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwg");
    sb.append("ZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBjdXIgPSBkb207CiAgICAgIHdoaWxlIChjdXIudGFn");
    sb.append("TmFtZS50b1VwcGVyQ2FzZSgpICE9ICJQQVNTV09SRC1IT0xERVIiKSB7CiAgICAgICAgY3VyID0gY3Vy");
    sb.append("LnBhcmVudEVsZW1lbnQ7CiAgICAgIH0KICAgICAgdmFyIGh1bnQgPSBmdW5jdGlvbihub2RlKSB7CiAg");
    sb.append("ICAgICAgaWYgKG5vZGUudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09ICJJTlBVVCIgJiYgKG5vZGUubmFt");
    sb.append("ZSA9PSAicGFzc3dvcmQiIHx8IG5vZGUubmFtZSA9PSAiY29uZmlybS1wYXNzd29yZCIgfHwgbmFtZSA9");
    sb.append("PSAibmV3X3Bhc3N3b3JkIiB8fCBuYW1lID09ICJjb25maXJtLW5ld19wYXNzd29yZCIpKSB7CiAgICAg");
    sb.append("ICAgICBpZiAobm9kZS50eXBlID09ICJwYXNzd29yZCIpIHsKICAgICAgICAgICAgbm9kZS50eXBlID0g");
    sb.append("InRleHQiCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBub2RlLnR5cGUgPSAicGFzc3dvcmQi");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgnY2hpbGRyZW4nIGluIG5vZGUpIHsKICAg");
    sb.append("ICAgICAgIHZhciBjaCA9IG5vZGUuY2hpbGRyZW47CiAgICAgICAgICB2YXIgbiA9IGNoLmxlbmd0aDsK");
    sb.append("ICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgICAgIGh1bnQoY2hb");
    sb.append("a10pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKGN1ciAhPSBudWxsKSB7");
    sb.append("CiAgICAgICAgaHVudChjdXIpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FIHwgcng6");
    sb.append("YWN0aW9uPWRvbWFpbjpzaWduLWluICh0byBkZXByZWNhdGUpCiAgc2VsZi5hZERTTyA9IGZ1bmN0aW9u");
    sb.append("IChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgcnhvYmouX18gPSBmdW5jdGlv");
    sb.append("biAoKSB7IH07CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQp");
    sb.append("IHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybV9hbmRf");
    sb.append("cHcoZm9ybSk7CiAgICAgIHZhciBzbSA9IHthdHRlbXB0czowfTsKICAgICAgc20ucmVzcG9uZGVyID0g");
    sb.append("ewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBzdGFzaF9pZGVu");
    sb.append("dGl0eShpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgICAg");
    sb.append("Ly8gVE9ETzogYmxvdyBhd2F5IGNvbm5lY3Rpb25zCiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhf");
    sb.append("Zm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAg");
    sb.append("ICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZv");
    sb.append("cm0sICJGYWlsZWQgc2lnbmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAg");
    sb.append("ICAgfTsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZURvbWFpbihzZWxmLmRvbWFpbiwg");
    sb.append("cmVxLnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHNtLnJlc3BvbmRlcik7CiAgICB9LCB0cnVlKTsKICB9");
    sb.append("CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9jdW1lbnQ6c2lnbi1pbiAodG8gZGVwcmVjYXRlKQog");
    sb.append("IHNlbGYuYURTTyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgeyAv");
    sb.append("LyBERVBSRUNBVEVECiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZl");
    sb.append("bnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1");
    sb.append("bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgY29ubmVjdGlv");
    sb.append("bi5Eb2N1bWVudEF1dGhvcml6ZShyZXEuc3BhY2UsIHJlcS5rZXksIHJlcS51c2VybmFtZSwgcmVxLnBh");
    sb.append("c3N3b3JkLCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIHN0");
    sb.append("YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwgY29ubmVjdGlvbik7CiAg");
    sb.append("ICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAgICAgICAgIHNlbGYuZ290byhy");
    sb.append("eG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAg");
    sb.append("ICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2Zh");
    sb.append("aWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAgICAg");
    sb.append("ICAgfQogICAgICB9KTsKICAgIH0sIHRydWUpOwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249");
    sb.append("ZG9tYWluOnNpZ24taW4tcmVzZXQgKHRvIGRlcHJlY2F0ZSkKICBzZWxmLmFkRFNPciA9IGZ1bmN0aW9u");
    sb.append("IChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgeyAvLyBERVBSRUNBVEVECiAgICByeG9i");
    sb.append("ai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywg");
    sb.append("ZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9");
    sb.append("IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZURv");
    sb.append("bWFpbldpdGhSZXNldChzZWxmLmRvbWFpbiwgcmVxLnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHJlcS5u");
    sb.append("ZXdfcGFzc3dvcmQsewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAg");
    sb.append("ICBzdGFzaF9pZGVudGl0eShpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rpb24p");
    sb.append("OwogICAgICAgICAgLy8gVE9ETzogYmxvdyBhd2F5IGNvbm5lY3Rpb25zCiAgICAgICAgICBzZWxmLmdv");
    sb.append("dG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwog");
    sb.append("ICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmly");
    sb.append("ZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2lnbmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwog");
    sb.append("ICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0cnVlKTsKICB9CgogIC8vIFJVTlRJTUUgfCByeDphY3Rp");
    sb.append("b249ZG9jdW1lbnQ6c2lnbi1pbi1yZXNldCAodG8gZGVwcmVjYXRlKQogIHNlbGYuYURTT3IgPSBmdW5j");
    sb.append("dGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsgLy8gREVQUkVDQVRFRAogICAg");
    sb.append("cnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1p");
    sb.append("dCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBy");
    sb.append("ZXEgPSBnZXRfZm9ybV9hbmRfcHcoZm9ybSk7CiAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRBdXRob3Jp");
    sb.append("emVXaXRoUmVzZXQocmVxLnNwYWNlLCByZXEua2V5LCByZXEudXNlcm5hbWUsIHJlcS5wYXNzd29yZCwg");
    sb.append("cmVxLm5ld19wYXNzd29yZCx7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAg");
    sb.append("ICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwgY29ubmVj");
    sb.append("dGlvbik7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAgICAgICAgIHNl");
    sb.append("bGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9y");
    sb.append("bSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAg");
    sb.append("ICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6IiArIHJlYXNv");
    sb.append("bik7CiAgICAgICAgfQogICAgICB9LCB0cnVlKTsKICAgIH0pOwogIH07CgogIHNlbGYuYXV0b2dlbmlk");
    sb.append("ID0gMTsKICBzZWxmLlggPSBmdW5jdGlvbigpIHsKICAgIHNlbGYuYXV0b2dlbmlkKys7CiAgICByZXR1");
    sb.append("cm4gJ3gnICsgc2VsZi5hdXRvZ2VuaWQ7CiAgfTsKCiAgdmFyIHRyYW5zZm9ybXMgPSB7fTsKICB0cmFu");
    sb.append("c2Zvcm1zWydwcmluY2lwYWwuYWdlbnQnXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguYWdlbnQ7IH07");
    sb.append("CiAgdHJhbnNmb3Jtc1sncHJpbmNpcGFsLmF1dGhvcml0eSddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4g");
    sb.append("eC5hdXRob3JpdHk7IH07CiAgdHJhbnNmb3Jtc1sndHJpbSddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4g");
    sb.append("KCcnICsgeCkudHJpbSgpOyB9OwogIHRyYW5zZm9ybXNbJ3VwcGVyJ10gPSBmdW5jdGlvbih4KSB7IHJl");
    sb.append("dHVybiAoJycgKyB4KS50b1VwcGVyQ2FzZSgpOyB9OwogIHRyYW5zZm9ybXNbJ2xvd2VyJ10gPSBmdW5j");
    sb.append("dGlvbih4KSB7IHJldHVybiAoJycgKyB4KS50b0xvd2VyQ2FzZSgpOyB9OwogIHRyYW5zZm9ybXNbJ2lz");
    sb.append("X2VtcHR5X3N0ciddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geCA9PSAiIjsgfTsKICB0cmFuc2Zvcm1z");
    sb.append("Wydpc19ub3RfZW1wdHlfc3RyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiB4ICE9ICIiOyB9OwogIHRy");
    sb.append("YW5zZm9ybXNbJ2pzb25pZnknXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHgp");
    sb.append("OyB9OwogIHRyYW5zZm9ybXNbJ3RpbWVfbm93J10gPSBmdW5jdGlvbih4KSB7IHJldHVybiBEYXRlLm5v");
    sb.append("dygpICsgIiI7IH07CiAgdHJhbnNmb3Jtc1snc2l6ZV9ieXRlcyddID0gZnVuY3Rpb24oeHJhdykgewog");
    sb.append("ICAgdmFyIHggPSAwLjA7CiAgICBpZiAodHlwZW9mKHhyYXcpID09ICdudW1iZXInKSB7CiAgICAgIHgg");
    sb.append("PSB4cmF3OwogICAgfSBlbHNlIHsKICAgICAgdHJ5IHsKICAgICAgICB4ID0gcGFyc2VGbG9hdCh4cmF3");
    sb.append("KTsKICAgICAgfSBjYXRjaCAoZXgpIHsKCiAgICAgIH0KICAgIH0KICAgIHZhciBpdmFsID0gTWF0aC5m");
    sb.append("bG9vcih4KTsKICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4gaXZhbCArICIgQiI7CiAg");
    sb.append("ICB9CiAgICBpdmFsIC89IDEwMjQ7CiAgICBpZiAoaXZhbCA8IDEwMjQpIHsKICAgICAgcmV0dXJuIE1h");
    sb.append("dGgucm91bmQoaXZhbCAqIDEwKSAvIDEwLjAgKyAiIEtCIjsKICAgIH0KICAgIGl2YWwgLz0gMTAyNDsK");
    sb.append("ICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4gTWF0aC5yb3VuZChpdmFsICogMTApIC8g");
    sb.append("MTAuMCArICIgTUIiOwogICAgfQogICAgaXZhbCAvPSAxMDI0OwogICAgaWYgKGl2YWwgPCAxMDI0KSB7");
    sb.append("CiAgICAgIHJldHVybiBNYXRoLnJvdW5kKGl2YWwgKiAxMCkgLyAxMC4wICsgIiBHQiI7CiAgICB9CiAg");
    sb.append("fQogIHRyYW5zZm9ybXNbJ29yZGluYWxpemUnXSA9IGZ1bmN0aW9uKG4pIHsKICAgIGNvbnN0IG51bSA9");
    sb.append("IHBhcnNlSW50KG4pOwogICAgaWYgKCFpc05hTihudW0pKSB7CiAgICAgIGxldCBvcmQgPSAndGgnOwog");
    sb.append("ICAgICBpZiAobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSkgewogICAgICAgIG9yZCA9ICdzdCc7");
    sb.append("CiAgICAgIH0KICAgICAgZWxzZSBpZiAobiAlIDEwID09IDIgJiYgbiAlIDEwMCAhPSAxMikgewogICAg");
    sb.append("ICAgIG9yZCA9ICduZCc7CiAgICAgIH0KICAgICAgZWxzZSBpZiAobiAlIDEwID09IDMgJiYgbiAlIDEw");
    sb.append("MCAhPSAxMykgewogICAgICAgIG9yZCA9ICdyZCc7CiAgICAgIH0KICAgICAgcmV0dXJuIG4gKyBvcmQ7");
    sb.append("CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbjsKICAgIH0KICB9CiAgdHJhbnNmb3Jtc1sndnVsZ2Fy");
    sb.append("X2ZyYWN0aW9uJ10gPSBmdW5jdGlvbih4cmF3KSB7CiAgICB2YXIgeCA9IDAuMDsKICAgIGlmICh0eXBl");
    sb.append("b2YoeHJhdykgPT0gJ251bWJlcicpIHsKICAgICAgeCA9IHhyYXc7CiAgICB9IGVsc2UgewogICAgICB0");
    sb.append("cnkgewogICAgICAgIHggPSBwYXJzZUZsb2F0KHhyYXcpOwogICAgICB9IGNhdGNoIChleCkgewoKICAg");
    sb.append("ICAgfQogICAgfQogICAgdmFyIGl2YWwgPSBNYXRoLmZsb29yKHgpOwogICAgdmFyIGNoYW5nZSA9IHgg");
    sb.append("LSBpdmFsOwogICAgdmFyIHN1ZmZpeCA9ICIiOwogICAgaWYgKGNoYW5nZSA8PSAwLjA2MjUpIHsKICAg");
    sb.append("ICAgLy8gMAogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC4xODc1KSB7CiAgICAgIHN1ZmZpeCA9ICLi");
    sb.append("hZsiOwogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC4zMTI1KSB7CiAgICAgIHN1ZmZpeCA9ICLCvCI7");
    sb.append("CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjQzNzUpIHsKICAgICAgc3VmZml4ID0gIuKFnCI7CiAg");
    sb.append("ICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjU2MjUpIHsKICAgICAgc3VmZml4ID0gIsK9IjsKICAgIH0g");
    sb.append("ZWxzZSBpZiAoY2hhbmdlIDw9IDAuNjg3NSkgewogICAgICBzdWZmaXggPSAi4oWdIjsKICAgIH0gZWxz");
    sb.append("ZSBpZiAoY2hhbmdlIDw9IDAuODEyNSkgewogICAgICBzdWZmaXggPSAiwr4iOyAvLyAzLzQKICAgIH0g");
    sb.append("ZWxzZSBpZiAoY2hhbmdlIDw9IDAuOTM3NSkgewogICAgICBzdWZmaXggPSAi4oWeIjsKICAgIH0gLy8g");
    sb.append("ZWxzZSAxCiAgICByZXR1cm4gaXZhbCArIHN1ZmZpeDsKICB9CiAgdHJhbnNmb3Jtc1sndGltZV9hZ28n");
    sb.append("XSA9IGZ1bmN0aW9uKGR0LCBmb3JtYXQpIHsKICAgIC8vIG9ubHkgdHJhbnNmb3JtIHN0cmluZ3MKICAg");
    sb.append("IGlmICh0eXBlb2YgKGR0KSA9PSAic3RyaW5nIikgewogICAgICAvLyBsZXQncyBzdHJpcCBvdXQgZXZl");
    sb.append("cnl0aGluZyBhZnRlciB0aGUgYnJhY2tldHMKICAgICAgdmFyIHMgPSBkdDsKICAgICAgdmFyIGsgPSBz");
    sb.append("LmluZGV4T2YoJ1snKTsKICAgICAgaWYgKGsgPj0gMCkgewogICAgICAgIHMgPSBzLnN1YnN0cmluZygw");
    sb.append("LCBrKTsKICAgICAgfQogICAgICB2YXIgZCA9IERhdGUucGFyc2Uocyk7CiAgICAgIGlmIChOdW1iZXIu");
    sb.append("aXNOYU4oZCkpIHsKICAgICAgICAvLyBpdCBpc24ndCBhIG51bWJlciwgc28gd2UgZGlkbid0IGdldCBh");
    sb.append("IGRhdGUgc3RhbXA7IGRlZmF1bHQgdG8gdGhlIGlucHV0CiAgICAgICAgcmV0dXJuIGR0OwogICAgICB9");
    sb.append("CiAgICAgIC8vIHdlIGFyZSBpbnRlcmVzdGVkIGluIHByb2R1Y2luZyBhIHN0cmluZyBsaWtlICJYIG1p");
    sb.append("bnV0ZXMgYWdvIiwgc28gc3RhcnQgd2l0aCBzZWNvbmRzCiAgICAgIHZhciBkZWx0YSA9IChEYXRlLm5v");
    sb.append("dygpIC0gZCkvMTAwMDsgLy8gc2Vjb25kczsKICAgICAgaWYgKGRlbHRhIDwgNjApIHsKICAgICAgICBy");
    sb.append("ZXR1cm4gIkxlc3MgdGhhbiBhIG1pbnV0ZSBhZ28iOwogICAgICB9CiAgICAgIC8vIGl0IHdhc24ndCA5");
    sb.append("MCBzZWNvbmRzIGFnbyBvciBsZXNzLCBzbyBsZXQncyByZWZpbmUgdG93YXJkcyBtaW51dGVzCiAgICAg");
    sb.append("IGRlbHRhIC89IDYwOyAvLyBub3cgaXQgaXMgbWludXRlcwogICAgICBpZiAoZGVsdGEgPCA2MCkgewog");
    sb.append("ICAgICAgIGNvbnN0IGRlbHRhSW50ID0gTWF0aC5mbG9vcihkZWx0YSk7CiAgICAgICAgcmV0dXJuIGAk");
    sb.append("e2RlbHRhSW50fSBtaW51dGUke2RlbHRhSW50ID4gMSA/ICdzJzogJyd9IGFnb2A7CiAgICAgIH0KICAg");
    sb.append("ICAgaWYgKGRlbHRhID4gMi42MjhlKzcpIHsKICAgICAgICByZXR1cm4gIk5ldmVyIjsKICAgICAgfQog");
    sb.append("ICAgICAvLyBpdCB3YXNuJ3QgOTAgbWludXRlcyBhZ28sIHNvIGxldCdzIGp1c3QgcHV0IHRoZSB0aW1l");
    sb.append("IHN0YW1wIHVwCiAgICAgIHZhciBkdGhlbiA9IG5ldyBEYXRlKGQpOwogICAgICB2YXIgZG5vdyA9IG5l");
    sb.append("dyBEYXRlKCk7CiAgICAgIHZhciBvcHRzID0ge307CiAgICAgIGlmIChmb3JtYXQpewogICAgICAgIGZv");
    sb.append("cm1hdC50cmltKCkuc3BsaXQoIiIpLmZvckVhY2goY2hhciA9PiB7CiAgICAgICAgICBjb25zdCBrZXlz");
    sb.append("ID0geyJoIjogImhvdXIiLCAibSI6ICJtaW51dGUiLCAicyI6ICJzZWNvbmQifQogICAgICAgICAgaWYg");
    sb.append("KGNoYXIgaW4ga2V5cyl7CiAgICAgICAgICAgIG9wdHNba2V5c1tjaGFyXV0gPSAibnVtZXJpYyI7CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfQogICAgICBpZiAoZHRoZW4udG9Mb2NhbGVEYXRlU3Ry");
    sb.append("aW5nKCkgIT0gZG5vdy50b0xvY2FsZURhdGVTdHJpbmcoKSkgewogICAgICAgIHJldHVybiBkdGhlbi50");
    sb.append("b0xvY2FsZURhdGVTdHJpbmcoKSArICIgIiArIGR0aGVuLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgb3B0");
    sb.append("cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGR0aGVuLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgb3B0cyk7");
    sb.append("CiAgICB9IGVsc2UgewogICAgICAvLyBkbyBub3RoaW5nCiAgICAgIHJldHVybiBkdDsKICAgIH0KICB9");
    sb.append("OwoKICB0cmFuc2Zvcm1zWyd0aW1lJ10gPSBmdW5jdGlvbihkdCkgewogICAgICAgIC8vIG9ubHkgdHJh");
    sb.append("bnNmb3JtIHN0cmluZ3MKICAgIGlmICh0eXBlb2YgKGR0KSA9PSAic3RyaW5nIikgewogICAgICAvLyBs");
    sb.append("ZXQncyBzdHJpcCBvdXQgZXZlcnl0aGluZyBhZnRlciB0aGUgYnJhY2tldHMKICAgICAgdmFyIHMgPSBk");
    sb.append("dDsKICAgICAgdmFyIGsgPSBzLmluZGV4T2YoJ1snKTsKICAgICAgaWYgKGsgPj0gMCkgewogICAgICAg");
    sb.append("IHMgPSBzLnN1YnN0cmluZygwLCBrKTsKICAgICAgfQoKICAgICAgLy8gQ29udmVydCBzdHJpbmcgdG8g");
    sb.append("dGltZSBmb3JtYXQKICAgICAgdmFyIHQgPSBkdC5pbmRleE9mKCI6Iik7CiAgICAgIGlmICh0IDwgMCkg");
    sb.append("ewogICAgICAgIHJldHVybiBkdDsKICAgICAgfQogICAgICB2YXIgaCA9IGR0LnNwbGl0KCI6IilbMF07");
    sb.append("CiAgICAgIHZhciBob3VycyA9IGg7CiAgICAgIGlmIChoLmxlbmd0aCA+IDIpIHsKICAgICAgICBob3Vy");
    sb.append("cyA9IGguc3Vic3RyaW5nKGgubGVuZ3RoIC0gMiwgaC5sZW5ndGgpOyAvLyB0cmltIGxlZnQgaW4gY2Fz");
    sb.append("ZSBvZiBkYXRldGltZQogICAgICB9CiAgICAgIHZhciBBbU9yUG0gPSBob3VycyA+PSAxMiA/ICdwbScg");
    sb.append("OiAnYW0nOwogICAgICBob3VycyA9IChob3VycyAlIDEyKSB8fCAxMjsKICAgICAgdmFyIG0gPSBkdC5z");
    sb.append("cGxpdCgiOiIpWzFdCiAgICAgIHZhciBtaW51dGVzID0gbTsKICAgICAgaWYgKG0ubGVuZ3RoID4gMikg");
    sb.append("ewogICAgICAgIG1pbnV0ZXMgPSBtLnN1YnN0cmluZygwLDIpOyAvLyB0cmltIHJpZ2h0IGluIGNhc2Ug");
    sb.append("b2YgZGF0ZXRpbWUKICAgICAgfQoKICAgICAgcmV0dXJuIGhvdXJzICsgIjoiICsgbWludXRlcyArICIg");
    sb.append("IiArIEFtT3JQbTsgCiAgICB9IGVsc2UgewogICAgICAvLyBkbyBub3RoaW5nCiAgICAgIHJldHVybiBk");
    sb.append("dDsKICAgIH0KICB9OwoKICB0cmFuc2Zvcm1zWydkYXRlLWZvcm1hdCddID0gZnVuY3Rpb24oZHQsIGZv");
    sb.append("cm1hdCkgewogICAgaWYgKHR5cGVvZiAoZHQpID09ICJzdHJpbmciKSB7CiAgICAgIC8vIGlmIGRhdGUg");
    sb.append("aXMgbm90IHNldCwgcmV0dXJuIGVtcHR5IHN0cmluZwogICAgICBpZiAoZHQgPT0gIjEtMDEtMDEiKSBy");
    sb.append("ZXR1cm4gIiI7CgogICAgICAvLyBsZXQncyBzdHJpcCBvdXQgZXZlcnl0aGluZyBhZnRlciB0aGUgYnJh");
    sb.append("Y2tldHMKICAgICAgdmFyIHMgPSBkdDsKICAgICAgdmFyIGsgPSBzLmluZGV4T2YoJ1snKTsKICAgICAg");
    sb.append("aWYgKGsgPj0gMCkgewogICAgICAgIHMgPSBzLnN1YnN0cmluZygwLCBrKTsKICAgICAgfQogICAgICBj");
    sb.append("b25zdCBwID0gZm9ybWF0LnRvTG93ZXJDYXNlKCkuc3BsaXQoIi8iKTsKICAgICAgY29uc3Qgb3B0cyA9");
    sb.append("IHt9OwogICAgICBwLmZvckVhY2goZiA9PiB7CiAgICAgICAgY29uc3QgdmFsID0gZi5sZW5ndGggPiAy");
    sb.append("ID8gIm51bWVyaWMiIDogIjItZGlnaXQiOwogICAgICAgIGNvbnN0IGtleXMgPSB7InkiOiAieWVhciIs");
    sb.append("ICJtIjogIm1vbnRoIiwgImQiOiAiZGF5In0KICAgICAgICBvcHRzW2tleXNbZi5jaGFyQXQoMCldXSA9");
    sb.append("IHZhbDsKICAgICAgfSkKCiAgICAgIC8vIGlmIG5vdCBkYXRldGltZSwgY29udmVydGluZyB0byBvbmUg");
    sb.append("aGVyZSB0byBwcmV2ZW50IHRpbWV6b25lIGlzc3VlcwogICAgICBjb25zdCBkYXRldGltZSA9IHMuaW5j");
    sb.append("bHVkZXMoIlQiKSA/IHMgOiBzICsgIlQwMDowMDowMCI7CiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRl");
    sb.append("dGltZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIG9wdHMpOwogICAgfSBlbHNlIHsKICAgICAg");
    sb.append("Ly8gZG8gbm90aGluZwogICAgICByZXR1cm4gZHQ7CiAgICB9CiAgfQoKICB0cmFuc2Zvcm1zWydjdXJy");
    sb.append("ZW5jeSddID0gZnVuY3Rpb24oeCwgZm10KSB7CiAgICBjb25zdCBudW0gPSBwYXJzZUZsb2F0KHgpOwog");
    sb.append("ICAgaWYgKGlzTmFOKG51bSkpIHJldHVybiB4OwogICAgdHJ5IHsKICAgICAgcmV0dXJuIG5ldyBJbnRs");
    sb.append("Lk51bWJlckZvcm1hdChbXSwgewogICAgICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICAgIGN1cnJl");
    sb.append("bmN5OiBmbXQsCiAgICAgICAgdXNlR3JvdXBpbmc6IHRydWUsCiAgICAgIH0pLmZvcm1hdChudW0pCiAg");
    sb.append("ICB9IGNhdGNoIChlcnJvcikgewogICAgICBjb25zb2xlLmVycm9yKCInY3VycmVuY3knIHRyYW5zZm9y");
    sb.append("bSBlcnJvcjogIiwgZXJyb3IpOwogICAgICByZXR1cm4geDsKICAgIH0KICAgIAogIH0KICAKCiAgc2Vs");
    sb.append("Zi5SVFIgPSBmdW5jdGlvbihuYW1lLCB0cmFuc2Zvcm0pIHsKICAgIHRyYW5zZm9ybXNbbmFtZV0gPSB0");
    sb.append("cmFuc2Zvcm07CiAgfTsKICBzZWxmLnJlZ2lzdGVyVHJhbnNmb3JtID0gc2VsZi5SVFI7CgogIC8vIHti");
    sb.append("bGFofG5hbWV9CiAgc2VsZi5UUiA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgIGlmIChuYW1lIGluIHRyYW5z");
    sb.append("Zm9ybXMpIHsKICAgICAgcmV0dXJuIHRyYW5zZm9ybXNbbmFtZV07CiAgICB9IAogICAgLy8gZXg6IGRh");
    sb.append("dGUtZm9ybWF0Om1tL2RkL3l5CiAgICBpZiAobmFtZS5pbmNsdWRlcygiOiIpKXsKICAgICAgY29uc3Qg");
    sb.append("W2tleSwgZm9ybWF0XSAgPSBuYW1lLnNwbGl0KCI6Iik7CiAgICAgIGlmIChrZXkgaW4gdHJhbnNmb3Jt");
    sb.append("cykgewogICAgICAgIHJldHVybiB4ID0+IHRyYW5zZm9ybXNba2V5XSh4LCBmb3JtYXQpOwogICAgICB9");
    sb.append("CiAgICB9CiAgICAKICAgIHJldHVybiBmdW5jdGlvbih4KSB7IHJldHVybiB4OyB9OwogIH07CgogIC8v");
    sb.append("IFRPRE8KICB2YXIgdmFsaWRhdG9ycyA9IHt9OwogIHNlbGYuUlYgPSBmdW5jdGlvbihuYW1lLCB2YWxp");
    sb.append("ZGF0b3IpIHsKICAgIHZhbGlkYXRvcnNbbmFtZV0gPSB2YWxpZGF0b3I7CiAgfTsKICBzZWxmLnJlZ2lz");
    sb.append("dGVyVmFsaWRhdG9yID0gc2VsZi5SVjsKCiAgdmFyIGNvbW1vblB1dCA9IGZ1bmN0aW9uIChmb3JtLCBz");
    sb.append("dGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgdXJsZmFjdG9yeSkgewogICAgLy8gV0lQCiAgICByeG9i");
    sb.append("ai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywg");
    sb.append("ZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHBhc3N3");
    sb.append("b3JkcyA9IHt9OwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm0oZm9ybSwgcGFzc3dvcmRzKTsKCiAgICAg");
    sb.append("IHZhciBuZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB1cmwgPSB1cmxmYWN0b3J5KHJ4b2Jq");
    sb.append("KTsKICAgICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICB4aHR0cC5v");
    sb.append("bnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0");
    sb.append("YXRlID09IDQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAg");
    sb.append("ICAgIHZhciB0eXBlID0gdGhpcy5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIik7CiAgICAg");
    sb.append("ICAgICAgICAgaWYgKHR5cGUgPT0gInRleHQvZXJyb3IiKSB7CiAgICAgICAgICAgICAgICBmaXJlX2Zh");
    sb.append("aWx1cmUoZm9ybSwgdGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAg");
    sb.append("ICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAiYXBwbGljYXRpb24vanNvbiIpIHsKICAgICAgICAg");
    sb.append("ICAgICAgIHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAg");
    sb.append("ICAgICAgICBpZiAoJ2lkZW50aXR5JyBpbiBwYXlsb2FkKSB7CiAgICAgICAgICAgICAgICAgIHN0YXNo");
    sb.append("X2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwgbnVsbCk7CiAgICAgICAgICAg");
    sb.append("ICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3");
    sb.append("YXJkLCBmYWxzZSk7CiAgICAgICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgICAgICAg");
    sb.append("IGZvcm0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInN1Ym1pdHRlZCIpKTsKICAgICAgICAgICAgfSBl");
    sb.append("bHNlIHsKICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0byBjb21tdW5pY2F0");
    sb.append("ZSB0byBzZXJ2ZXIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAg");
    sb.append("eGh0dHAub3BlbigiUFVUIiwgdXJsLCB0cnVlKTsKICAgICAgICB4aHR0cC53aXRoQ3JlZGVudGlhbHMg");
    sb.append("PSB0cnVlOwogICAgICAgIHhodHRwLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxKSk7CiAgICAgIH07Cgog");
    sb.append("ICAgICBpZiAoJ3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgICBpZiAoISgnY29uZmlybS1w");
    sb.append("YXNzd29yZCcgaW4gcGFzc3dvcmRzKSB8fCBwYXNzd29yZHNbJ3Bhc3N3b3JkJ10gPT0gcGFzc3dvcmRz");
    sb.append("Wydjb25maXJtLXBhc3N3b3JkJ10pIHsKICAgICAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRzSGFzaFBh");
    sb.append("c3N3b3JkKHBhc3N3b3Jkc1sncGFzc3dvcmQnXSwgewogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlv");
    sb.append("biAoaGFzaGVkX3B3KSB7CiAgICAgICAgICAgICAgcmVxWydwYXNzd29yZCddID0gaGFzaGVkX3B3LnBh");
    sb.append("c3N3b3JkSGFzaDsKICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAg");
    sb.append("IGZhaWxlZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFp");
    sb.append("bGVkIHRvIGhhc2ggcGFzc3dvcmQiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAg");
    sb.append("fSBlbHNlIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiUGFzc3dvcmRzIGRvbid0IG1hdGNo");
    sb.append("Iik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIG5leHQoKTsKICAgICAgfQogICAgfSwg");
    sb.append("dHJ1ZSk7CiAgfQoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWRvbWFpbjpwdXQKICBzZWxmLmFkRFBV");
    sb.append("VCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgY29tbW9u");
    sb.append("UHV0KGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqLCBmdW5jdGlvbiAocnhvYmopIHsgcmV0");
    sb.append("dXJuIHNlbGYucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0ICsgIi8iICsgcnhvYmoucGF0aDsgfSkK");
    sb.append("ICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWRvY3VtZW50OnB1dAogIHNlbGYuYURQVVQgPSBm");
    sb.append("dW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIGNvbW1vblB1dChm");
    sb.append("b3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgZnVuY3Rpb24gKHJ4b2JqKSB7IHJldHVybiBz");
    sb.append("ZWxmLnByb3RvY29sICsgIi8vIiArIGNvbm5lY3Rpb24uaG9zdCArICIvIiArIHJ4b2JqLnNwYWNlICsg");
    sb.append("Ii8iICsgcnhvYmoua2V5ICsgIi8iICsgcnhvYmoucGF0aDsgfSkKICB9OwoKICAvLyBSVU5USU1FIHwg");
    sb.append("cng6YWN0aW9uPWFkYW1hOnNpZ24taW4KICBzZWxmLmFTTyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwg");
    sb.append("aWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICB3");
    sb.append("aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHJlY2FsbF9lbWFpbChmb3JtKTsKICAg");
    sb.append("IH0sIDEpOwogICAgLy8gVE9ETzogcHVsbCBlbWFpbCBvdXQgb2YgdGhpbiBhaXIKICAgIGZvcm0uYWRk");
    sb.append("RXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERl");
    sb.append("ZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgaWYgKHJl");
    sb.append("cS5yZW1lbWJlcikgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJlbWFpbF9yZW1lbWJlciIs");
    sb.append("IHJlcS5lbWFpbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImVt");
    sb.append("YWlsX3JlbWVtYmVyIiwgIiIpOwogICAgICB9CiAgICAgIGNvbm5lY3Rpb24uQWNjb3VudExvZ2luKHJl");
    sb.append("cS5lbWFpbCwgcmVxLnBhc3N3b3JkLCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQp");
    sb.append("IHsKICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwg");
    sb.append("Y29ubmVjdGlvbik7CiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwog");
    sb.append("ICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVu");
    sb.append("Y3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJBY2NvdW50TG9naW4g");
    sb.append("RmFpbGVkOiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0cnVlKTsKICB9OwoK");
    sb.append("ICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWFkYW1hOnNpZ24tdXAKICBzZWxmLmFTVSA9IGZ1bmN0aW9u");
    sb.append("IChmb3JtLCBzdGF0ZSwgZm9yd2FyZFRvKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1p");
    sb.append("dCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBy");
    sb.append("ZXEgPSBnZXRfZm9ybShmb3JtLCB7fSk7CiAgICAgIGNvbm5lY3Rpb24uSW5pdFNldHVwQWNjb3VudChy");
    sb.append("ZXEuZW1haWwsIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoLyogcGF5bG9hZCAqLykgewogICAg");
    sb.append("ICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImVtYWlsIiwgcmVxLmVtYWlsKTsKICAgICAgICAgIHNl");
    sb.append("bGYuZ290byhmb3J3YXJkVG8sIGZhbHNlKTsKICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAg");
    sb.append("ICAgICB9LAogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGZpcmVf");
    sb.append("ZmFpbHVyZShmb3JtLCAiSW5pdFNldHVwQWNjb3VudCBGYWlsZWQ6IiArIHJlYXNvbik7CiAgICAgICAg");
    sb.append("fQogICAgICB9KTsKICAgIH0sIHRydWUpOwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249YWRh");
    sb.append("bWE6c2V0LXBhc3N3b3JkCiAgc2VsZi5hU1AgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGZvcndhcmRU");
    sb.append("bykgewogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAg");
    sb.append("ICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm1fYW5kX3B3KGZv");
    sb.append("cm0pOwogICAgICBpZiAoISgiZW1haWwiIGluIHJlcSkpIHsKICAgICAgICByZXEuZW1haWwgPSBsb2Nh");
    sb.append("bFN0b3JhZ2UuZ2V0SXRlbSgiZW1haWwiKTsKICAgICAgfQogICAgICBjb25uZWN0aW9uLkluaXRDb21w");
    sb.append("bGV0ZUFjY291bnQocmVxLmVtYWlsLCBmYWxzZSwgcmVxLmNvZGUsIHsKICAgICAgICBzdWNjZXNzOiBm");
    sb.append("dW5jdGlvbiAoaW5pdCkgewogICAgICAgICAgdmFyIGlkZW50aXR5ID0gaW5pdC5pZGVudGl0eTsKICAg");
    sb.append("ICAgICAgIGNvbm5lY3Rpb24uQWNjb3VudFNldFBhc3N3b3JkKGluaXQuaWRlbnRpdHksIHJlcS5wYXNz");
    sb.append("d29yZCwgewogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgc3Rh");
    sb.append("c2hfaWRlbnRpdHkoImRlZmF1bHQiLCBpZGVudGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICAgICAg");
    sb.append("c2VsZi5nb3RvKGZvcndhcmRUbywgZmFsc2UpOwogICAgICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3Jt");
    sb.append("KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewog");
    sb.append("ICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIEFjY291bnRTZXRQYXNzd29yZDoi");
    sb.append("ICsgcmVhc29uKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBm");
    sb.append("YWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZh");
    sb.append("aWxlZCBJbml0Q29tcGxldGVBY2NvdW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAg");
    sb.append("ICB9LCB0cnVlKTsKICB9OwoKCiAgdmFyIGh5ZHJhdGVfZm9ybSA9IGZ1bmN0aW9uKGVsLCBpbnB1dCkg");
    sb.append("ewogICAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9VcHBlckNhc2UoKTsKICAgIHZhciBpc1NldHRhYmxl");
    sb.append("ID0gdGFnID09ICJTRUxFQ1QiIHx8IHRhZyA9PSAiSU5QVVQiIHx8IHRhZyA9PSAiSElEREVOIjsKICAg");
    sb.append("IGlmICgnbmFtZScgaW4gZWwgJiYgaXNTZXR0YWJsZSkgewogICAgICB2YXIgbmFtZSA9IGVsLm5hbWU7");
    sb.append("CiAgICAgIHZhciBwYXlsb2FkID0gaW5wdXQ7CiAgICAgIHZhciBrRG90T3JTbGFzaCA9IGZpcnN0T2Nj");
    sb.append("dXIobmFtZS5pbmRleE9mKCcuJyksIG5hbWUuaW5kZXhPZignLycpKTsKICAgICAgd2hpbGUgKGtEb3RP");
    sb.append("clNsYXNoID4gMCkgewogICAgICAgIHZhciBpdGVtID0gbmFtZS5zdWJzdHJpbmcoMCwga0RvdE9yU2xh");
    sb.append("c2gpOwogICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZyhrRG90T3JTbGFzaCArIDEpOwogICAgICAg");
    sb.append("IGlmIChpdGVtIGluIHBheWxvYWQpIHsKICAgICAgICAgIHBheWxvYWQgPSBwYXlsb2FkW2l0ZW1dOwog");
    sb.append("ICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGtEb3RPclNs");
    sb.append("YXNoID0gZmlyc3RPY2N1cihuYW1lLmluZGV4T2YoJy4nKSwgbmFtZS5pbmRleE9mKCcvJykpOwogICAg");
    sb.append("ICB9CiAgICAgIGlmIChuYW1lIGluIHBheWxvYWQpIHsKICAgICAgICB2YXIgdHlwZSA9IGVsLnR5cGUu");
    sb.append("dG9VcHBlckNhc2UoKTsKICAgICAgICBpZiAodHlwZSA9PSAiQ0hFQ0tCT1giKSB7CiAgICAgICAgICBl");
    sb.append("bC5jaGVja2VkID0gcGF5bG9hZFtuYW1lXSA9PSAidHJ1ZSIgfHwgcGF5bG9hZFtuYW1lXSA9PT0gdHJ1");
    sb.append("ZSA/IHRydWUgOiBmYWxzZTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gIlJBRElPIikgewogICAg");
    sb.append("ICAgICAgaWYgKHBheWxvYWRbbmFtZV0gPT0gZWwudmFsdWUpIHsKICAgICAgICAgICAgZWwuY2hlY2tl");
    sb.append("ZCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGVsLnZhbHVlID0g");
    sb.append("cGF5bG9hZFtuYW1lXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmICgiY2hpbGRyZW4iIGlu");
    sb.append("IGVsKSB7CiAgICAgIHZhciBhcnIgPSBlbC5jaGlsZHJlbjsKICAgICAgdmFyIG4gPSBhcnIubGVuZ3Ro");
    sb.append("OwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgIHZhciBjaCA9IGVsLmNo");
    sb.append("aWxkcmVuW2tdOwogICAgICAgIGh5ZHJhdGVfZm9ybShjaCwgaW5wdXQpOwogICAgICB9CiAgICB9CiAg");
    sb.append("fQoKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbjpjb3B5LWZvcm06JHRhcmdldC1pZAogIHNlbGYuYUNG");
    sb.append("ID0gZnVuY3Rpb24oZm9ybSwgdGFyZ2V0Rm9ybUlkKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIo");
    sb.append("J3N1Ym1pdCcsIGZ1bmN0aW9uKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAg");
    sb.append("dmFyIGlucHV0ID0gZ2V0X2Zvcm0oZm9ybSwge30pOwogICAgICB2YXIgdGFyZ2V0ID0gZG9jdW1lbnQu");
    sb.append("Z2V0RWxlbWVudEJ5SWQodGFyZ2V0Rm9ybUlkKTsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIGh5");
    sb.append("ZHJhdGVfZm9ybSh0YXJnZXQsIGlucHV0KTsKICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSkKICAgICAg");
    sb.append("fSBlbHNlIHsKICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgImZhaWxlZCB0byBmaW5kIGZvcm0gYnkg");
    sb.append("aWQgJyIgKyB0YXJnZXRGb3JtSWQgKyAiJyIpOwogICAgICB9CiAgICB9LCB0cnVlKTsKICB9OwoKICAv");
    sb.append("LyBSVU5USU1FIHwgcng6YWN0aW9uPXNlbmQ6JGNoYW5uZWwKICBzZWxmLmFTRCA9IGZ1bmN0aW9uIChm");
    sb.append("b3JtLCBzdGF0ZSwgY2hhbm5lbCwgbXNUb0RlYm91bmNlKSB7CiAgICAvLyBUT0RPOiBkbyBkZWJvdW5j");
    sb.append("ZSBpZiA+IDAKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkg");
    sb.append("ewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHBhc3N3b3JkcyA9IHt9OwogICAg");
    sb.append("ICB2YXIgbXNnID0gZ2V0X2Zvcm0oZm9ybSwgcGFzc3dvcmRzKTsKCiAgICAgIGlmIChldnQuc3VibWl0");
    sb.append("dGVyKSB7CiAgICAgICAgdmFyIHMgPSBldnQuc3VibWl0dGVyOwogICAgICAgIGlmIChzLm5hbWUgJiYg");
    sb.append("cy52YWx1ZSkgewogICAgICAgICAgaWYgKHMudmFsdWUgPT0gInRydWUiKSB7IHMudmFsdWUgPSB0cnVl");
    sb.append("OyB9CiAgICAgICAgICBlbHNlIGlmIChzLnZhbHVlID09ICJmYWxzZSIpIHsgcy52YWx1ZSA9IGZhbHNl");
    sb.append("OyB9CiAgICAgICAgICBtc2dbcy5uYW1lXSA9IHMudmFsdWU7CiAgICAgICAgfQogICAgICB9CgogICAg");
    sb.append("ICB2YXIgYWZ0ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgY2hhbm5lbFRvVXNlID0gY2hhbm5l");
    sb.append("bDsKICAgICAgICBpZiAoY2hhbm5lbCA9PSAiX19kcyIpIHsKICAgICAgICAgIGNoYW5uZWxUb1VzZSA9");
    sb.append("IG1zZ1snX19jaGFubmVsJ107CiAgICAgICAgICBkZWxldGUgbXNnWydfX2NoYW5uZWwnXTsKICAgICAg");
    sb.append("ICB9CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5kKGNoYW5uZWxUb1VzZSwgbXNn");
    sb.append("LCB7CiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoLyogcGF5bG9hZCAqLykgewogICAgICAgICAg");
    sb.append("ICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgICB9LAogICAgICAgICAgZmFpbHVyZTogZnVuY3Rp");
    sb.append("b24gKHJlYXNvbikgewogICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIlNlbmQgZmFpbGVkOiIg");
    sb.append("KyByZWFzb24pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgdmFyIHBvc3RQ");
    sb.append("YXNzd29yZCA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICgnbmV3X3Bhc3N3b3JkJyBpbiBwYXNzd29y");
    sb.append("ZHMpIHsKICAgICAgICAgIGlmICghKCdjb25maXJtLW5ld19wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB8");
    sb.append("fCBwYXNzd29yZHNbJ25ld19wYXNzd29yZCddID09IHBhc3N3b3Jkc1snY29uZmlybS1uZXdfcGFzc3dv");
    sb.append("cmQnXSkgewogICAgICAgICAgICBjb25uZWN0aW9uLkRvY3VtZW50c0hhc2hQYXNzd29yZChwYXNzd29y");
    sb.append("ZHNbJ25ld19wYXNzd29yZCddLCB7CiAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGhhc2hl");
    sb.append("ZF9wdykgewogICAgICAgICAgICAgICAgbXNnWyduZXdfcGFzc3dvcmQnXSA9IGhhc2hlZF9wdy5wYXNz");
    sb.append("d29yZEhhc2g7CiAgICAgICAgICAgICAgICBhZnRlcigpOwogICAgICAgICAgICAgIH0sCiAgICAgICAg");
    sb.append("ICAgICAgZmFpbGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9y");
    sb.append("bSwgIkZhaWxlZCB0byBoYXNoIHBhc3N3b3JkIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9");
    sb.append("KTsKCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIlBhc3N3");
    sb.append("b3JkcyBtaXNtYXRjaCBmb3IgbmV3IHBhc3N3b3JkLiIpOwogICAgICAgICAgfQogICAgICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgICAgICBhZnRlcigpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKCdwYXNzd29y");
    sb.append("ZCcgaW4gcGFzc3dvcmRzKSB7CiAgICAgICAgaWYgKCEoJ2NvbmZpcm0tcGFzc3dvcmQnIGluIHBhc3N3");
    sb.append("b3JkcykgfHwgcGFzc3dvcmRzWydwYXNzd29yZCddID09IHBhc3N3b3Jkc1snY29uZmlybS1wYXNzd29y");
    sb.append("ZCddKSB7CiAgICAgICAgICBjb25uZWN0aW9uLkRvY3VtZW50c0hhc2hQYXNzd29yZChwYXNzd29yZHNb");
    sb.append("J3Bhc3N3b3JkJ10sIHsKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGhhc2hlZF9wdykgewog");
    sb.append("ICAgICAgICAgICAgIG1zZ1sncGFzc3dvcmQnXSA9IGhhc2hlZF9wdy5wYXNzd29yZEhhc2g7CiAgICAg");
    sb.append("ICAgICAgICAgcG9zdFBhc3N3b3JkKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWxlZDog");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHRvIGhh");
    sb.append("c2ggcGFzc3dvcmQiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiUGFzc3dvcmRzIG1pc21hdGNoIik7CiAgICAgICAg");
    sb.append("fQogICAgICB9IGVsc2UgewogICAgICAgIHBvc3RQYXNzd29yZCgpOwogICAgICB9CiAgICB9LCB0cnVl");
    sb.append("KTsKICB9OwogIC8vIDx0b2RvdGFzaz5kZXNjcmlwdGlvbjwvdG9kb3Rhc2s+CiAgc2VsZi5UQVNLID0g");
    sb.append("ZnVuY3Rpb24ocGRvbSwgaWQsIHNlY3Rpb24sIGRlc2NyaXB0aW9uKSB7CiAgICB2YXIgZWxlbWVudCA9");
    sb.append("IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgZWxlbWVudC5pbm5lckhUTUwgPSAiJiM5");
    sb.append("NzQ0OyAiICsgZGVzY3JpcHRpb24gKyAiICggIiArIHNlY3Rpb24gKyAiKSA8YnIgLz4iOwogICAgcGRv");
    sb.append("bS5hcHBlbmRDaGlsZChlbGVtZW50KTsKICB9OwogIC8vIFJVTlRJTUU6IHByZS1jb21wcmVzc2lvbiBm");
    sb.append("b3Igc2V0dGluZyBhbiBhdHRyaWJ1dGUKICAvLyAiZC5zZXRBdHRyaWJ1dGUoYSx2KTsiIC0tPgogIC8v");
    sb.append("ICQuU0EoZCxhLHYpOyIKICBzZWxmLlNBID0gZnVuY3Rpb24oZG9tLCBhdHRyLCB2YWx1ZSkgewogICAg");
    sb.append("ZG9tLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7CiAgfTsKICBzZWxmLlNJSCA9IGZ1bmN0aW9uKGRv");
    sb.append("bSwgaHRtbCkgewogICAgZG9tLmlubmVySFRNTCA9IGh0bWw7CiAgfTsKICAvLyBSVU5USU1FOiBzZXQg");
    sb.append("dGhlIGxhYmVsIG9mIGFuIG9wdGlvbgogIHNlbGYuU0wgPSBmdW5jdGlvbihkb20sIHZhbHVlKSB7CiAg");
    sb.append("ICBkb20ubGFiZWwgPSB2YWx1ZTsKICAgIGRvbS5pbm5lclRleHQgPSB2YWx1ZTsKICB9OwoKICAvLyBm");
    sb.append("b3Igc2VsZWN0cwogIC8vIGQudmFsdWU9JHZhbHVlOwogIC8vICQuU1YoZCwkdmFsdWUpOwogIHNlbGYu");
    sb.append("U1YgPSBmdW5jdGlvbihkb20sIHZhbHVlKSB7CiAgICB2YXIgcHJpb3IgPSBkb20udmFsdWU7CiAgICBk");
    sb.append("b20udmFsdWUgPSB2YWx1ZTsKICAgIGRvbS5yeHZhbHVlID0gdmFsdWU7CiAgICBpZiAocHJpb3IgIT0g");
    sb.append("dmFsdWUpIHsKICAgICAgZG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJmb3JjZWQiKSk7CiAgICB9");
    sb.append("CiAgfTsKICBzZWxmLkZWID0gZnVuY3Rpb24oZG9tLCBmaWVsZCwgdmFsdWUpIHsKICAgIHZhciBwcmlv");
    sb.append("ciA9IGRvbVtmaWVsZF07CiAgICBkb21bZmllbGRdID0gdmFsdWU7CiAgICBpZiAocHJpb3IgIT0gdmFs");
    sb.append("dWUpIHsKICAgICAgZG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJmb3JjZWQiKSk7CiAgICB9CiAg");
    sb.append("fTsKICBzZWxmLm1lcmdlR290byA9IGZ1bmN0aW9uKGhyZWYsIHN0YXRlKSB7CiAgICB2YXIgcGFydHMg");
    sb.append("PSAoaHJlZi5zdGFydHNXaXRoKCIvIikgPyBocmVmLnN1YnN0cmluZygxKSA6IGhyZWYpLnNwbGl0KCIv");
    sb.append("Iik7CiAgICB2YXIgbWVyZ2VJbml0ID0ge307CiAgICBpZiAocm91dGUocGFydHMsIDAsIHJvdXRlciwg");
    sb.append("bWVyZ2VJbml0KSkgewogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKG1lcmdlSW5pdCk7CiAgICB9");
    sb.append("CiAgfTsKICAvLyBSVU5USU1FIHwgPC4uLiBocmVmPSIiIC4uLj4KICBzZWxmLkhSRUYgPSBmdW5jdGlv");
    sb.append("biAoZG9tLCBzdGF0ZSwgaHJlZiwgbWVyZ2UpIHsKICAgIGRvbS5zZXRBdHRyaWJ1dGUoImhyZWYiLCBm");
    sb.append("aXhIcmVmKGhyZWYpKTsKICAgIGRvbS5vbmNsaWNrID0gZnVuY3Rpb24gKGV2dCkgewogICAgICB2YXIg");
    sb.append("dHJpbUhyZWYgPSBocmVmOwogICAgICBpZiAodHJpbUhyZWYuc3RhcnRzV2l0aCgiLyIpKSB7CiAgICAg");
    sb.append("ICAgdHJpbUhyZWYgPSB0cmltSHJlZi5zdWJzdHJpbmcoMSk7CiAgICAgIH0KICAgICAgdmFyIGtRID0g");
    sb.append("dHJpbUhyZWYuaW5kZXhPZignPycpOwogICAgICBpZiAoa1EgPiAwKSB7CiAgICAgICAgdHJpbUhyZWYg");
    sb.append("PSB0cmltSHJlZi5zdWJzdHJpbmcoMCwga1EpOwogICAgICB9CiAgICAgIHZhciBwYXJ0cyA9IHRyaW1I");
    sb.append("cmVmLnNwbGl0KCIvIik7CiAgICAgIHZhciBtZXJnZUluaXQgPSB7fTsKICAgICAgaWYgKHJvdXRlKHBh");
    sb.append("cnRzLCAwLCByb3V0ZXIsIG1lcmdlSW5pdCkpIHsKICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsK");
    sb.append("ICAgICAgICBpZiAobWVyZ2UpIHsKICAgICAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUobWVyZ2VJ");
    sb.append("bml0KTsKICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7bWVyZ2U6dHJ1ZX0sICIiLCBm");
    sb.append("aXhIcmVmKGhyZWYpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2VsZi5nb3RvKGhyZWYsIHRy");
    sb.append("dWUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRy");
    sb.append("dWU7CiAgICB9OwogIH07CiAgLy8gUlVOVElNRSB8IDwuLi4gY2xhc3M9IiIgLi4uPgogIHNlbGYuQUMg");
    sb.append("PSBmdW5jdGlvbiAoZG9tLCB2YWx1ZSkgewogICAgZG9tLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCB2YWx1");
    sb.append("ZSk7CiAgfTsKICBzZWxmLkFDTEFTUyA9IGZ1bmN0aW9uIChkb20sIHZhbHVlKSB7IC8vIHRvIGRlcHJl");
    sb.append("Y2F0ZSBpbiB0aGUgZnV0dXJlCiAgICBkb20uc2V0QXR0cmlidXRlKCJjbGFzcyIsIHZhbHVlKTsKICB9");
    sb.append("OwogIC8vIFJVTlRJTUUgfCA8Li4uIHNyYz0iIiAuLi4+CiAgc2VsZi5BU1JDID0gZnVuY3Rpb24gKGRv");
    sb.append("bSwgdmFsdWUpIHsKICAgIGRvbS5zZXRBdHRyaWJ1dGUoInNyYyIsIHZhbHVlKTsKICB9OwoKICBzZWxm");
    sb.append("LmZpbmRFbGVtZW50QnlJZEluVW5ib3VuZERvbSA9IGZ1bmN0aW9uKGRvbSwgaWQpIHsKICAgIHZhciBm");
    sb.append("ZWJpZCA9IGZ1bmN0aW9uIChkLCBpZCkgewogICAgICBpZiAoJ2lkJyBpbiBkKSB7CiAgICAgICAgaWYg");
    sb.append("KGQuaWQgPT0gaWQpIHsKICAgICAgICAgIHJldHVybiBkOwogICAgICAgIH0KICAgICAgfQogICAgICBp");
    sb.append("ZiAoJ2NoaWxkcmVuJyBpbiBkKSB7CiAgICAgICAgdmFyIGFyciA9IGQuY2hpbGRyZW47CiAgICAgICAg");
    sb.append("dmFyIG4gPSBhcnIubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAg");
    sb.append("ICAgICAgICB2YXIgcmVzdWx0ID0gZmViaWQoYXJyW2tdLCBpZCk7CiAgICAgICAgICBpZiAocmVzdWx0");
    sb.append("ICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICB9CiAgICAgICAg");
    sb.append("fQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfTsKICAgIHJldHVybiBmZWJpZChkb20sIGlk");
    sb.append("KTsKICB9OwogIHNlbGYucG9sbEVsZW1lbnQgPSBmdW5jdGlvbihkb20sIHRpbWVvdXQsIHN1Y2Nlc3Ms");
    sb.append("IGZhaWx1cmUpIHsKICAgIHZhciBhZG0gPSBmdW5jdGlvbiAoZG9tLCByZW1haW4pIHsKICAgICAgaWYg");
    sb.append("KHJlbWFpbiA8IDApIHsKICAgICAgICBmYWlsdXJlKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAg");
    sb.append("ICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAgICAgICBzdWNjZXNzKCk7CiAg");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAg");
    sb.append("ICAgYWRtKGRvbSwgcmVtYWluIC0gMjUpOwogICAgICAgIH0sIDI1KTsKICAgICAgfQogICAgfTsKICAg");
    sb.append("IGFkbShkb20sIHRpbWVvdXQpOwogIH07CiAgdmFyIGxpYnNMb2FkZWQgPSB7fTsKICBzZWxmLmxvYWRM");
    sb.append("aWJyYXJ5ID0gZnVuY3Rpb24obGliLCBjYWxsYmFjaykgewogICAgaWYgKGxpYiBpbiBsaWJzTG9hZGVk");
    sb.append("KSB7CiAgICAgIGNhbGxiYWNrKGxpYnNMb2FkZWRbbGliXSk7CiAgICAgIHJldHVybjsKICAgIH0KICAg");
    sb.append("IGxpYnNMb2FkZWRbbGliXSA9IGZhbHNlOwogICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVs");
    sb.append("ZW1lbnQoJ3NjcmlwdCcpOwogICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJyxsaWIpOwogICAgc2Ny");
    sb.append("aXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICBsaWJzTG9hZGVkW2xpYl0gPSB0cnVlOwogICAg");
    sb.append("ICBjYWxsYmFjayh0cnVlKTsKICAgIH07CiAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uKCkgewog");
    sb.append("ICAgICBjYWxsYmFjayhmYWxzZSk7CiAgICB9OwogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChz");
    sb.append("Y3JpcHQpOwogIH07CiAgd2luZG93LnJ4aHRtbCA9IHNlbGY7CiAgcmV0dXJuIHNlbGY7Cn0pKCk7Cg==");
    return sb.toString();
  }
  public static final String TESTER = new String(Base64.getDecoder().decode(make_tester()), StandardCharsets.UTF_8);
  private static String make_tester() {
    StringBuilder sb = new StringBuilder();
    sb.append("ZnVuY3Rpb24gc3RhcnRUZXN0QWdlbnQoKSB7DQogIHJldHVybiB0cnVlOw0KfQ0KDQpmdW5jdGlvbiBw");
    sb.append("b2xsVGVzdEFnZW50KCkgew0KICBjb25zb2xlLmxvZygicG9sbGVkIik7DQp9");
    return sb.toString();
  }
  public static final String CONNECTION = new String(Base64.getDecoder().decode(make_connection()), StandardCharsets.UTF_8);
  private static String make_connection() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoKICogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG91dGxp");
    sb.append("bmVkIGluIHRoZQogKiBmaWxlICdMSUNFTlNFJyAoaXQncyBkdWFsIGxpY2Vuc2VkKSBsb2NhdGVkIGlu");
    sb.append("IHRoZSByb290IGRpcmVjdG9yeQogKiBuZWFyIHRoZSBSRUFETUUubWQgd2hpY2ggeW91IHNob3VsZCBh");
    sb.append("bHNvIHJlYWQuIEZvciBtb3JlIGluZm9ybWF0aW9uCiAqIGFib3V0IHRoZSBwcm9qZWN0IHdoaWNoIG93");
    sb.append("bnMgdGhpcyBmaWxlLCBzZWUgaHR0cHM6Ly93d3cuYWRhbWEtcGxhdGZvcm0uY29tLyAuCiAqCiAqIChj");
    sb.append("KSAyMDIxIC0gMjAyMyBieSBBZGFtYSBQbGF0Zm9ybSBJbml0aWF0aXZlLCBMTEMKICovCi8qKiBUaGUg");
    sb.append("V2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gQWRhbWEgKi8KY2xhc3MgV2ViU29ja2V0QWRhbWFDb25uZWN0");
    sb.append("aW9uIHsKICBjb25zdHJ1Y3Rvcihob3N0KSB7CiAgICAvLyBvbiBmYWlsdXJlLCB3ZSBiYWNrLW9mZiB3");
    sb.append("aXRoIHRoaXMgbWlsbGlzZWNvbmRzCiAgICB0aGlzLmJhY2tvZmYgPSAxOwogICAgLy8gdGhlIGhvc3Qg");
    sb.append("d2UgYXJlIGNvbm5lY3RpbmcgdG8KICAgIHRoaXMuaG9zdCA9IGhvc3Q7CiAgICAvLyBmb3JtIHRoZSBV");
    sb.append("Ukwgb2YgdGhlIGhvc3QKICAgIHRoaXMudXJsID0gIndzczovLyIgKyBob3N0ICsgIi9+cyI7CiAgICAv");
    sb.append("LyBpcyB0aGUgY29ubmVjdGlvbiBjb25uZWN0ZWQKICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAg");
    sb.append("ICAvLyBpcyB0aGUgY29ubmVjdGlvbiBkZWFkCiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIC8vIHRo");
    sb.append("ZSBtYXhpbXVtIHBlcmlvZCBvZiB0aW1lIGJldHdlZW4gd2FpdGluZyBmb3IgYSByZXRyeQogICAgdGhp");
    sb.append("cy5tYXhpbXVtX2JhY2tvZmYgPSA1MDAwOwogICAgLy8gd2hlbiB0aGUgY29ubmVjdGlvbiB0aW1lcyBv");
    sb.append("dXQgZnJvbSB0aGUgc2VydmVyLCBob3cgbG9uZyB0byB3YWl0IHVudGlsIHdlIHJlY29ubmVjdAogICAg");
    sb.append("dGhpcy5yZXNldF9iYWNrb2ZmID0gMTAwMDsKICAgIC8vIHRoZSBhY3R1YWwgd2Vic29ja2V0CiAgICB0");
    sb.append("aGlzLnNvY2tldCA9IG51bGw7CiAgICAvLyB3aGF0IGhhcHBlbnMgd2hlbiB0aGUgc3RhdHVzIGNoYW5n");
    sb.append("ZXMKICAgIHRoaXMub25zdGF0dXNjaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7IH07CiAgICAvLyB3");
    sb.append("aGF0IGhhcHBlbnMgd2hlbiB3ZSBsZWFybiB0aGUgbGF0ZW5jeQogICAgdGhpcy5vbnBpbmcgPSBmdW5j");
    sb.append("dGlvbiAoc2Vjb25kcywgbGF0ZW5jeSkgeyB9OwogICAgLy8gaXMgYSByZXRyeSBzY2hlZHVsZWQKICAg");
    sb.append("IHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICAvLyBjYWxsYmFjayBtYXBwaW5nCiAgICB0aGlzLmNh");
    sb.append("bGxiYWNrcyA9IG5ldyBNYXAoKTsKICAgIC8vIGlkIGdlbmVyYXRpb24KICAgIHRoaXMubmV4dElkID0g");
    sb.append("MDsKICAgIC8vIGV2ZW50cyB0byBleGVjdXRlIG9uIHJlY29ubmVjdAogICAgdGhpcy5vbnJlY29ubmVj");
    sb.append("dCA9IG5ldyBNYXAoKTsKICAgIC8vIHByb3RvY29sIGZvciBtZXRyaWNzCiAgICB0aGlzLnByb3RvY29s");
    sb.append("ID0gbG9jYXRpb24ucHJvdG9jb2w7CiAgfQoKICAvKiogc3RvcCB0aGUgY29ubmVjdGlvbiAqLwogIHN0");
    sb.append("b3AoKSB7CiAgICB0aGlzLmRlYWQgPSB0cnVlOwogICAgaWYgKHRoaXMuc29ja2V0ICE9PSBudWxsKSB7");
    sb.append("CiAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7CiAgICB9CiAgfQoKICBidW1wKGJtKSB7CiAgICB0cnkg");
    sb.append("ewogICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAub3Blbigi");
    sb.append("UFVUIiwgdGhpcy5wcm90b2NvbCArICIvLyIgKyB0aGlzLmhvc3QgKyAiL35ibS8iICsgYm0sIHRydWUp");
    sb.append("OwogICAgICB4aHR0cC5zZW5kKCk7CiAgICB9IGNhdGNoIChleCkgewogICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICB9CiAgfQoKICBsb2cobmFtZSwgYm9keSkgewogICAgdHJ5IHsKICAgICAgdmFyIHhodHRwID0g");
    sb.append("bmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIHhodHRwLm9wZW4oIlBVVCIsIHRoaXMucHJvdG9jb2wg");
    sb.append("KyAiLy8iICsgdGhpcy5ob3N0ICsgIi9+bGcvIiArIG5hbWUsIHRydWUpOwogICAgICB4aHR0cC5zZW5k");
    sb.append("KGJvZHkpOwogICAgfSBjYXRjaCAoZXgpIHsKICAgICAgLy8gZG9uJ3QgY2FyZQogICAgfQogIH0KCiAg");
    sb.append("LyoqIHByaXZhdGU6IHJldHJ5IHRoZSBjb25uZWN0aW9uICovCiAgX3JldHJ5KCkgewogICAgLy8gbnVs");
    sb.append("bCBvdXQgdGhlIHNvY2tldAogICAgdGhpcy5zb2NrZXQgPSBudWxsOwogICAgLy8gaWYgd2UgYXJlIGNv");
    sb.append("bm5lY3RlZCwgdHJhbnNpdGlvbiB0aGUgc3RhdHVzCiAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHsKICAg");
    sb.append("ICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5vbnN0YXR1c2NoYW5nZShmYWxzZSk7");
    sb.append("CiAgICAgIHRoaXMuY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNiLCBpZCkgewogICAgICAgIGNi");
    sb.append("KHtmYWlsdXJlOjk5OX0pOwogICAgICB9KTsKICAgIH0KICAgIHRoaXMuY2FsbGJhY2tzLmNsZWFyKCk7");
    sb.append("CiAgICAvLyBpZiB3ZSBhcmUgZGVhZCwgdGhlbiBkb24ndCBhY3R1YWxseSByZXRyeQogICAgaWYgKHRo");
    sb.append("aXMuZGVhZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICAvLyBtYWtlIHN1cmUKICAgIGlmICghdGhp");
    sb.append("cy5zY2hlZHVsZWQpIHsKICAgICAgLy8gc2NoZWR1bGUgYSByZXRyeTsgZmlyc3QgY29tcHV0ZSBob3cg");
    sb.append("bG9uZyB0byB0YWtlCiAgICAgIC8vIGNvbXB1dGUgaG93IGxvbmcgd2UgbmVlZCB0byB3YWl0CiAgICAg");
    sb.append("IHZhciBoYWx2ZUFmdGVyU2NoZWR1bGUgPSBmYWxzZTsKICAgICAgdGhpcy5iYWNrb2ZmICs9IE1hdGgu");
    sb.append("cmFuZG9tKCkgKiB0aGlzLmJhY2tvZmY7CiAgICAgIGlmICh0aGlzLmJhY2tvZmYgPiB0aGlzLm1heGlt");
    sb.append("dW1fYmFja29mZikgewogICAgICAgIHRoaXMuYmFja29mZiA9IHRoaXMubWF4aW11bV9iYWNrb2ZmOwog");
    sb.append("ICAgICAgIGhhbHZlQWZ0ZXJTY2hlZHVsZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIC8vIHNjaGVkdWxl");
    sb.append("IGl0CiAgICAgIHRoaXMuc2NoZWR1bGVkID0gdHJ1ZTsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLnN0YXJ0KCk7CiAgICAgIH0sIHRo");
    sb.append("aXMuYmFja29mZik7CgogICAgICAvLyB3ZSBqdXN0IHNjaGVkdWxlZCBpdCBmb3IgdGhlIG1heGltdW0g");
    sb.append("YmFja29mZiB0aW1lLCBsZXQncyByZWR1Y2UgdGhlIGJhY2tvZmYgc28gdGhlIG5leHQgb25lIHdpbGwg");
    sb.append("aGF2ZSBzb21lIGppdHRlcgogICAgICBpZiAoaGFsdmVBZnRlclNjaGVkdWxlKSB7CiAgICAgICAgdGhp");
    sb.append("cy5iYWNrb2ZmIC89IDIuMDsKICAgICAgfQogICAgfQogIH0KCiAgLyoqIHN0YXJ0IHRoZSBjb25uZWN0");
    sb.append("aW9uICovCiAgc3RhcnQoKSB7CiAgICAvLyByZXNldCB0aGUgc3RhdGUKICAgIHZhciBzZWxmID0gdGhp");
    sb.append("czsKICAgIHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIHRo");
    sb.append("aXMuaGFzX2hhZF9waW5nID0gZmFsc2U7CiAgICB0aGlzLmxhc3RfcGluZyA9IDA7CiAgICB0aGlzLnBp");
    sb.append("bmdfZmFpbHVyZXMgPSAwOwogICAgLy8gY3JlYXRlIHRoZSBzb2NrZXQgYW5kIGJpbmQgZXZlbnQgaGFu");
    sb.append("ZGxlcnMKICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCh0aGlzLnVybCk7CiAgICB0aGlzLnNv");
    sb.append("Y2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIHJlc3VsdCA9IEpTT04u");
    sb.append("cGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgIC8vIGEgbWVzc2FnZSBhcnJpdmVkLCBpcyBpdCBhIGNvbm5l");
    sb.append("Y3Rpb24gc2lnbmFsCiAgICAgIGlmICgicGluZyIgaW4gcmVzdWx0KSB7CiAgICAgICAgc2VsZi5vbnBp");
    sb.append("bmcocmVzdWx0LnBpbmcsIHJlc3VsdC5sYXRlbmN5KTsKICAgICAgICByZXN1bHQucG9uZyA9IG5ldyBE");
    sb.append("YXRlKCkuZ2V0VGltZSgpIC8gMTAwMC4wOwogICAgICAgIHNlbGYuc29ja2V0LnNlbmQoSlNPTi5zdHJp");
    sb.append("bmdpZnkocmVzdWx0KSk7CiAgICAgICAgc2VsZi5sYXN0X3BpbmcgPSBuZXcgRGF0ZSgpLmdldFRpbWUo");
    sb.append("KTsKICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9");
    sb.append("CiAgICAgIGlmICgic3RhdHVzIiBpbiByZXN1bHQpIHsKICAgICAgICAvLyBoZXksIGFyZSB3ZSBjb25u");
    sb.append("ZWN0ZWQ/CiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgIT0gImNvbm5lY3RlZCIpIHsKICAgICAgICAg");
    sb.append("IC8vIG5vcGUsIE9LLCBsZXQncyBtYWtlIHRoaXMgYSBkZWFkIHNvY2tldAogICAgICAgICAgc2VsZi5z");
    sb.append("b2NrZXQuY2xvc2UoKTsKICAgICAgICAgIHNlbGYuc29ja2V0ID0gbnVsbDsKICAgICAgICAgIHNlbGYu");
    sb.append("YmFja29mZiA9IHNlbGYucmVzZXRfYmFja29mZjsKICAgICAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIHRlbGwgdGhlIGNsaWVudCB0aGF0IHdlIGFy");
    sb.append("ZSBnb29kIQogICAgICAgIHNlbGYuYmFja29mZiA9IDE7CiAgICAgICAgc2VsZi5jb25uZWN0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIHNlbGYub25zdGF0dXNjaGFuZ2UodHJ1ZSk7CiAgICAgICAgc2VsZi5fcmVjb25u");
    sb.append("ZWN0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIHRoZSByZXN1bHQgd2FzIGEgZmFp");
    sb.append("bHVyZS4uLgogICAgICBpZiAoImZhaWx1cmUiIGluIHJlc3VsdCkgewogICAgICAgIC8vIGZpbmQgdGhl");
    sb.append("IGNhbGxiYWNrLCB0aGVuIGludm9rZSBpdCAoYW5kIGNsZWFuIHVwKQogICAgICAgIGlmIChzZWxmLmNh");
    sb.append("bGxiYWNrcy5oYXMocmVzdWx0LmZhaWx1cmUpKSB7CiAgICAgICAgICB2YXIgY2IgPSBzZWxmLmNhbGxi");
    sb.append("YWNrcy5nZXQocmVzdWx0LmZhaWx1cmUpOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHNl");
    sb.append("bGYuY2FsbGJhY2tzLmRlbGV0ZShyZXN1bHQuZmFpbHVyZSk7CiAgICAgICAgICAgIGNiKHJlc3VsdCk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCJkZWxpdmVyIiBpbiByZXN1bHQp");
    sb.append("IHsKICAgICAgICAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWNjZXNzLCBzbyBsZXQncyBmaW5kIHRo");
    sb.append("ZSBjYWxsYmFjaywgYW5kIGlmIG5lZWQgYmUgY2xlYW4gdXAKICAgICAgICBpZiAoc2VsZi5jYWxsYmFj");
    sb.append("a3MuaGFzKHJlc3VsdC5kZWxpdmVyKSkgewogICAgICAgICAgdmFyIGNiID0gc2VsZi5jYWxsYmFja3Mu");
    sb.append("Z2V0KHJlc3VsdC5kZWxpdmVyKTsKICAgICAgICAgIGlmIChjYikgewogICAgICAgICAgICBpZiAocmVz");
    sb.append("dWx0LmRvbmUpIHsKICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrcy5kZWxldGUocmVzdWx0LmRlbGl2");
    sb.append("ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNiKHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfQogICAgICB9CiAgICB9OwogICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChldmVu");
    sb.append("dCkgewogICAgICBzZWxmLmJ1bXAoInIiKTsKICAgICAgLy8gbGV0J3MgcmV0cnkuLi4gb3Igc2hvdWxk");
    sb.append("IHdlIG5vdAogICAgICBzZWxmLl9yZXRyeSgpOwogICAgfTsKICAgIHRoaXMuc29ja2V0Lm9uZXJyb3Ig");
    sb.append("PSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgc2VsZi5idW1wKCJyIik7CiAgICAgIC8vIHNvbWV0aGlu");
    sb.append("ZyBiYWQgaGFwcGVuZWQsIGxldCdzIHJldHJ5CiAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICB9OwoKICB9");
    sb.append("CgogIGtlZXBhbGl2ZSgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHdpbmRvdy5zZXRJbnRlcnZh");
    sb.append("bChmdW5jdGlvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc2VsZi5oYXNfaGFkX3BpbmcgJiYg");
    sb.append("c2VsZi5zb2NrZXQpIHsKICAgICAgICAgIHZhciB0aW1lU2luY2VMYXN0UGluZyA9IG5ldyBEYXRlKCku");
    sb.append("Z2V0VGltZSgpIC0gc2VsZi5sYXN0X3Bpbmc7CiAgICAgICAgICAvLyBUT0RPOiBicm9hZGNhc3QgYSBs");
    sb.append("YXRlbmN5CiAgICAgICAgICBpZiAodGltZVNpbmNlTGFzdFBpbmcgPiAyNTAwKSB7CiAgICAgICAgICAg");
    sb.append("IHNlbGYucGluZ19mYWlsdXJlcysrOwogICAgICAgICAgICBpZiAoc2VsZi5waW5nX2ZhaWx1cmVzID49");
    sb.append("IDMpIHsKICAgICAgICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IGZhbHNlOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbigpIHt9OwogICAgICAgICAgICAgIHNlbGYuc29j");
    sb.append("a2V0LmNsb3NlKCk7CiAgICAgICAgICAgICAgc2VsZi5zb2NrZXQgPSBudWxsOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuX3JldHJ5KCk7CiAgICAgICAgICAgICAgc2VsZi5idW1wKCJkIik7CiAgICAgICAgICAgICAg");
    sb.append("Y29uc29sZS5lcnJvcigiaGFkIHRvIGZvcmNlIGEgZGlzY29ubmVjdCIpOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnBpbmdfZmFpbHVyZXMgPSAwOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7");
    sb.append("CiAgICAgIH0KICAgIH0sIDEyNTApOwogIH0KCiAgLyoqIHByaXZhdGU6IHNlbmQgYSByYXcgbWVzc2Fn");
    sb.append("ZSAqLwogIF93cml0ZShyZXF1ZXN0LCBjYWxsYmFjaykgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkg");
    sb.append("ewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNrcy5zZXQocmVxdWVzdC5p");
    sb.append("ZCwgY2FsbGJhY2spOwogICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7");
    sb.append("CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKiBhcGk6IHdhaXQgZm9yIGEgY29ubmVjdGlvbiAqLwog");
    sb.append("IGFzeW5jIHdhaXRfY29ubmVjdGVkKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHJl");
    sb.append("dHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZ29vZCkgewogICAgICAgIGdvb2QodHJ1ZSk7CiAgICAg");
    sb.append("IH0pOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcHJpb3IgPSB0");
    sb.append("aGlzLm9uc3RhdHVzY2hhbmdlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGdvb2Qp");
    sb.append("IHsKICAgICAgICBzZWxmLm9uc3RhdHVzY2hhbmdlID0gZnVuY3Rpb24gKHN0YXR1cykgewogICAgICAg");
    sb.append("ICAgcHJpb3Ioc3RhdHVzKTsKICAgICAgICAgIGlmIChzdGF0dXMpIHsKICAgICAgICAgICAgZ29vZCh0");
    sb.append("cnVlKTsKICAgICAgICAgICAgc2VsZi5vbnN0YXR1c2NoYW5nZSA9IHByaW9yOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0KCiAgX3JlY29ubmVjdCgpIHsKICAgIHRoaXMub25y");
    sb.append("ZWNvbm5lY3QuZm9yRWFjaChmdW5jdGlvbiAoc20sIGlkKSB7CiAgICAgIHNtLl9fcmV0cnkoKTsKICAg");
    sb.append("IH0pOwogIH0KCiAgLyoqIGV4ZWN1dGUgYSByZXF1ZXNlIHJlc3BvbnNlIHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfcnIoc20pIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHNtLmZpcnN0ID0gdHJ1ZTsKICAgIGlmICghc2VsZi5fd3JpdGUoc20ucmVxdWVzdCwgZnVuY3Rpb24g");
    sb.append("KHJlc3BvbnNlKSB7CiAgICAgIGlmIChzbS5maXJzdCkgewogICAgICAgIHNtLmZpcnN0ID0gZmFsc2U7");
    sb.append("CiAgICAgICAgaWYgKCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgICAgaWYgKCdmYWlsdXJl");
    sb.append("JyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLmZhaWx1cmUocmVzcG9u");
    sb.append("c2UucmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCdzdWNj");
    sb.append("ZXNzJyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLnN1Y2Nlc3MocmVz");
    sb.append("cG9uc2UucmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBzZWxmLm9u");
    sb.append("cmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICB9KSkgewogICAgICBzZWxmLm9ucmVjb25uZWN0LnNl");
    sb.append("dChzbS5pZCwgc20pOwogICAgICBzbS5fX3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHNtKTsKICAgICAgfTsKICAgICAgcmV0dXJuIHNtOwogICAgfQogICAgcmV0dXJu");
    sb.append("IG51bGw7CiAgfQoKICAvKiogZXhlY3V0ZSBhIHN0cmVhbSByZXF1ZXN0IHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfc3RyZWFtKHNtKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICBzZWxmLl93cml0ZShzbS5yZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYg");
    sb.append("KCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgIGlmICgnZmFpbHVyZScgaW4gc20ucmVzcG9u");
    sb.append("ZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuZmFpbHVyZShyZXNwb25zZS5yZWFzb24pOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBzZWxmLm9ucmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZSkgewogICAgICAgIGlmICgnbmV4dCcg");
    sb.append("aW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIubmV4dChyZXNwb25zZS5yZXNw");
    sb.append("b25zZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5kb25lKSB7CiAgICAgICAg");
    sb.append("aWYgKCdjb21wbGV0ZScgaW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuY29t");
    sb.append("cGxldGUoKTsKICAgICAgICB9CiAgICAgICAgc2VsZi5vbnJlY29ubmVjdC5kZWxldGUoc20uaWQpOwog");
    sb.append("ICAgICB9CiAgICB9KTsKICAgIHNlbGYub25yZWNvbm5lY3Quc2V0KHNtLmlkLCBzbSk7CiAgICBzbS5f");
    sb.append("X3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oc20pOwogICAg");
    sb.append("fTsKICAgIHJldHVybiBzbTsKICB9CgogIF9faWQoKSB7CiAgICB0aGlzLm5leHRJZCsrOwogICAgcmV0");
    sb.append("dXJuIHRoaXMubmV4dElkOwogIH0KCiAgLyoqW0JFR0lOLUlOVk9LRV0qKi8KICBJbml0U2V0dXBBY2Nv");
    sb.append("dW50KGVtYWlsLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9");
    sb.append("IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklk");
    sb.append("LAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpbml0");
    sb.append("L3NldHVwLWFjY291bnQiLCAiaWQiOnBhcklkLCAiZW1haWwiOiBlbWFpbH0KICAgIH0pOwogIH0KICBJ");
    sb.append("bml0Q29udmVydEdvb2dsZVVzZXIoYWNjZXNzVG9rZW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6ImluaXQvY29udmVydC1nb29nbGUtdXNlciIsICJpZCI6cGFySWQsICJh");
    sb.append("Y2Nlc3MtdG9rZW4iOiBhY2Nlc3NUb2tlbn0KICAgIH0pOwogIH0KICBJbml0Q29tcGxldGVBY2NvdW50");
    sb.append("KGVtYWlsLCByZXZva2UsIGNvZGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6ImluaXQvY29tcGxldGUtYWNjb3VudCIsICJpZCI6cGFySWQsICJlbWFpbCI6IGVtYWlsLCAi");
    sb.append("cmV2b2tlIjogcmV2b2tlLCAiY29kZSI6IGNvZGV9CiAgICB9KTsKICB9CiAgRGVpbml0KGlkZW50aXR5");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkZWluaXQiLCAiaWQi");
    sb.append("OnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBBY2NvdW50U2V0UGFzc3dv");
    sb.append("cmQoaWRlbnRpdHksIHBhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJt");
    sb.append("ZXRob2QiOiJhY2NvdW50L3NldC1wYXNzd29yZCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50");
    sb.append("aXR5LCAicGFzc3dvcmQiOiBwYXNzd29yZH0KICAgIH0pOwogIH0KICBBY2NvdW50R2V0UGF5bWVudFBs");
    sb.append("YW4oaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFy");
    sb.append("SWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFj");
    sb.append("Y291bnQvZ2V0LXBheW1lbnQtcGxhbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQog");
    sb.append("ICAgfSk7CiAgfQogIEFjY291bnRMb2dpbihlbWFpbCwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFjY291bnQvbG9naW4iLCAiaWQiOnBhcklkLCAiZW1h");
    sb.append("aWwiOiBlbWFpbCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgUHJvYmUoaWRlbnRp");
    sb.append("dHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InByb2JlIiwgImlk");
    sb.append("IjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgU3RhdHMocmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InN0YXRzIiwgImlkIjpwYXJJZH0K");
    sb.append("ICAgIH0pOwogIH0KICBJZGVudGl0eUhhc2goaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImlkZW50aXR5L2hhc2giLCAiaWQiOnBhcklkLCAiaWRlbnRpdHki");
    sb.append("OiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBJZGVudGl0eVN0YXNoKGlkZW50aXR5LCBuYW1lLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpZGVudGl0eS9zdGFzaCIsICJp");
    sb.append("ZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibmFtZSI6IG5hbWV9CiAgICB9KTsKICB9CiAg");
    sb.append("U3BhY2VDcmVhdGUoaWRlbnRpdHksIHNwYWNlLCB0ZW1wbGF0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAg");
    sb.append("ICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2UvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5");
    sb.append("IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAidGVtcGxhdGUiOiB0ZW1wbGF0ZX0KICAgIH0pOwog");
    sb.append("IH0KICBTcGFjZURlbGV0ZShpZGVudGl0eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL2RlbGV0ZSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlk");
    sb.append("ZW50aXR5LCAic3BhY2UiOiBzcGFjZX0KICAgIH0pOwogIH0KICBTcGFjZVJlZmxlY3QoaWRlbnRpdHks");
    sb.append("IHNwYWNlLCBrZXksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFy");
    sb.append("SWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNw");
    sb.append("YWNlL3JlZmxlY3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3Bh");
    sb.append("Y2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgU3BhY2VMaXN0KGlkZW50aXR5LCBtYXJrZXIsIGxp");
    sb.append("bWl0LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2Uv");
    sb.append("bGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibWFya2VyIjogbWFya2VyLCAi");
    sb.append("bGltaXQiOiBsaW1pdH0KICAgIH0pOwogIH0KICBQdXNoUmVnaXN0ZXIoaWRlbnRpdHksIGRvbWFpbiwg");
    sb.append("c3Vic2NyaXB0aW9uLCBkZXZpY2VJbmZvLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJwdXNoL3JlZ2lzdGVyIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHks");
    sb.append("ICJkb21haW4iOiBkb21haW4sICJzdWJzY3JpcHRpb24iOiBzdWJzY3JpcHRpb24sICJkZXZpY2UtaW5m");
    sb.append("byI6IGRldmljZUluZm99CiAgICB9KTsKICB9CiAgRG9tYWluUmVmbGVjdChpZGVudGl0eSwgZG9tYWlu");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb21haW4vcmVmbGVj");
    sb.append("dCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWlufQogICAg");
    sb.append("fSk7CiAgfQogIERvbWFpbkdldFZhcGlkUHVibGljS2V5KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9nZXQtdmFwaWQtcHVibGlj");
    sb.append("LWtleSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWlufQog");
    sb.append("ICAgfSk7CiAgfQogIERvY3VtZW50QXV0aG9yaXphdGlvbihzcGFjZSwga2V5LCBtZXNzYWdlLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemF0");
    sb.append("aW9uIiwgImlkIjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJtZXNzYWdlIjogbWVz");
    sb.append("c2FnZX0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6YXRpb25Eb21haW4oZG9tYWluLCBtZXNz");
    sb.append("YWdlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAg");
    sb.append("ICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9h");
    sb.append("dXRob3JpemF0aW9uLWRvbWFpbiIsICJpZCI6cGFySWQsICJkb21haW4iOiBkb21haW4sICJtZXNzYWdl");
    sb.append("IjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZShzcGFjZSwga2V5LCB1c2Vy");
    sb.append("bmFtZSwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("ImRvY3VtZW50L2F1dGhvcml6ZSIsICJpZCI6cGFySWQsICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5");
    sb.append("LCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAg");
    sb.append("RG9jdW1lbnRBdXRob3JpemVEb21haW4oZG9tYWluLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS1kb21h");
    sb.append("aW4iLCAiaWQiOnBhcklkLCAiZG9tYWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBh");
    sb.append("c3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemVXaXRoUmVzZXQo");
    sb.append("c3BhY2UsIGtleSwgdXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS13aXRoLXJlc2V0");
    sb.append("IiwgImlkIjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJ1c2VybmFtZSI6IHVzZXJu");
    sb.append("YW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAg");
    sb.append("IH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZURvbWFpbldpdGhSZXNldChkb21haW4sIHVzZXJuYW1l");
    sb.append("LCBwYXNzd29yZCwgbmV3X3Bhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemUtZG9tYWluLXdpdGgtcmVzZXQiLCAiaWQiOnBhcklk");
    sb.append("LCAiZG9tYWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dv");
    sb.append("cmQsICJuZXdfcGFzc3dvcmQiOiBuZXdfcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRDcmVh");
    sb.append("dGUoaWRlbnRpdHksIHNwYWNlLCBrZXksIGVudHJvcHksIGFyZywgcmVzcG9uZGVyKSB7CiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAg");
    sb.append("ICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50");
    sb.append("aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZW50cm9weSI6IGVudHJv");
    sb.append("cHksICJhcmciOiBhcmd9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRMaXN0KGlkZW50aXR5LCBzcGFjZSwg");
    sb.append("bWFya2VyLCBsaW1pdCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFy");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBp");
    sb.append("ZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhv");
    sb.append("ZCI6ImRvY3VtZW50L2xpc3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNl");
    sb.append("Ijogc3BhY2UsICJtYXJrZXIiOiBtYXJrZXIsICJsaW1pdCI6IGxpbWl0fQogICAgfSk7CiAgfQogIE1l");
    sb.append("c3NhZ2VEaXJlY3RTZW5kKGlkZW50aXR5LCBzcGFjZSwga2V5LCBjaGFubmVsLCBtZXNzYWdlLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJtZXNzYWdlL2RpcmVjdC1zZW5k");
    sb.append("IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijog");
    sb.append("a2V5LCAiY2hhbm5lbCI6IGNoYW5uZWwsICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBN");
    sb.append("ZXNzYWdlRGlyZWN0U2VuZE9uY2UoaWRlbnRpdHksIHNwYWNlLCBrZXksIGRlZHVwZSwgY2hhbm5lbCwg");
    sb.append("bWVzc2FnZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBz");
    sb.append("ZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoibWVzc2Fn");
    sb.append("ZS9kaXJlY3Qtc2VuZC1vbmNlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFj");
    sb.append("ZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZGVkdXBlIjogZGVkdXBlLCAiY2hhbm5lbCI6IGNoYW5uZWws");
    sb.append("ICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBDb25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5");
    sb.append("LCBzcGFjZSwga2V5LCB2aWV3ZXJTdGF0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJl");
    sb.append("YW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6ImNvbm5lY3Rpb24vY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAidmlld2VyLXN0YXRlIjogdmlld2Vy");
    sb.append("U3RhdGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIp");
    sb.append("IHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwK");
    sb.append("ICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3");
    sb.append("b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2Vy");
    sb.append("bmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19w");
    sb.append("YXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5u");
    sb.append("ZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAog");
    sb.append("ICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhv");
    sb.append("ZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJj");
    sb.append("aGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQs");
    sb.append("ICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5j");
    sb.append("dGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0");
    sb.append("U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJ");
    sb.append("ZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUi");
    sb.append("OiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEz");
    sb.append("ODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUs");
    sb.append("IHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjog");
    sb.append("c3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0");
    sb.append("ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3Rh");
    sb.append("dGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBDb25uZWN0aW9u");
    sb.append("Q3JlYXRlVmlhRG9tYWluKGlkZW50aXR5LCBkb21haW4sIHZpZXdlclN0YXRlLCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiBy");
    sb.append("ZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiY29ubmVjdGlvbi9jcmVhdGUtdmlhLWRv");
    sb.append("bWFpbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAi");
    sb.append("dmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBt");
    sb.append("ZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9zZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwg");
    sb.append("Im1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVu");
    sb.append("Y3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAg");
    sb.append("ICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAg");
    sb.append("ICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWQsICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwg");
    sb.append("Im5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2Vu");
    sb.append("ZE9uY2U6IGZ1bmN0aW9uKGNoYW5uZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAg");
    sb.append("ICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1l");
    sb.append("c3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0");
    sb.append("aW9uKHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAg");
    sb.append("IHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRl");
    sb.append("cjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nh");
    sb.append("bi1hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAg");
    sb.append("fSwKICAgICAgYXR0YWNoOiBmdW5jdGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNp");
    sb.append("emUsIGRpZ2VzdE1kNSwgZGlnZXN0U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3Vi");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDog");
    sb.append("c3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6");
    sb.append("IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJ");
    sb.append("ZCwgImFzc2V0LWlkIjogYXNzZXRJZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUi");
    sb.append("OiBjb250ZW50VHlwZSwgInNpemUiOiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2Vz");
    sb.append("dC1zaGEzODQiOiBkaWdlc3RTaGEzODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTog");
    sb.append("ZnVuY3Rpb24odmlld2VyU3RhdGUsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwK");
    sb.append("ICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRo");
    sb.append("b2Q6ICJjb25uZWN0aW9uL3VwZGF0ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmll");
    sb.append("d2VyLXN0YXRlIjogdmlld2VyU3RhdGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVu");
    sb.append("Y3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAg");
    sb.append("ICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9u");
    sb.append("ZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24v");
    sb.append("ZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAg");
    sb.append("IH0pOwogIH0KICBEb2N1bWVudHNIYXNoUGFzc3dvcmQocGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50cy9oYXNoLXBhc3N3b3JkIiwgImlkIjpw");
    sb.append("YXJJZCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgQmlsbGluZ0Nvbm5lY3Rpb25D");
    sb.append("cmVhdGUoaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAg");
    sb.append("aWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRo");
    sb.append("b2QiOiJiaWxsaW5nLWNvbm5lY3Rpb24vY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRl");
    sb.append("bnRpdHl9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIp");
    sb.append("IHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwK");
    sb.append("ICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3");
    sb.append("b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2Vy");
    sb.append("bmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19w");
    sb.append("YXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5u");
    sb.append("ZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAog");
    sb.append("ICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhv");
    sb.append("ZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJj");
    sb.append("aGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQs");
    sb.append("ICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5j");
    sb.append("dGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0");
    sb.append("U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJ");
    sb.append("ZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUi");
    sb.append("OiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEz");
    sb.append("ODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUs");
    sb.append("IHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjog");
    sb.append("c3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0");
    sb.append("ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3Rh");
    sb.append("dGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBBdHRhY2htZW50");
    sb.append("U3RhcnQoaWRlbnRpdHksIHNwYWNlLCBrZXksIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgcmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImF0dGFjaG1lbnQvc3RhcnQiLCAi");
    sb.append("aWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXks");
    sb.append("ICJmaWxlbmFtZSI6IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29udGVudFR5cGV9LAogICAgICBh");
    sb.append("cHBlbmQ6IGZ1bmN0aW9uKGNodW5rTWQ1LCBiYXNlNjRCeXRlcywgc3ViUmVzcG9uZGVyKSB7CiAgICAg");
    sb.append("ICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAg");
    sb.append("ICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvYXBwZW5kIiwgaWQ6IHN1YklkLCAidXBsb2Fk");
    sb.append("IjpwYXJJZCwgImNodW5rLW1kNSI6IGNodW5rTWQ1LCAiYmFzZTY0LWJ5dGVzIjogYmFzZTY0Qnl0ZXN9");
    sb.append("CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGZpbmlzaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvZmluaXNoIiwgaWQ6IHN1YklkLCAi");
    sb.append("dXBsb2FkIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQogIEF0dGFjaG1lbnRT");
    sb.append("dGFydEJ5RG9tYWluKGlkZW50aXR5LCBkb21haW4sIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgcmVzcG9u");
    sb.append("ZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("IHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3Bv");
    sb.append("bmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImF0dGFjaG1lbnQvc3RhcnQt");
    sb.append("YnktZG9tYWluIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21h");
    sb.append("aW4sICJmaWxlbmFtZSI6IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29udGVudFR5cGV9LAogICAg");
    sb.append("ICBhcHBlbmQ6IGZ1bmN0aW9uKGNodW5rTWQ1LCBiYXNlNjRCeXRlcywgc3ViUmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAg");
    sb.append("ICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvYXBwZW5kIiwgaWQ6IHN1YklkLCAidXBs");
    sb.append("b2FkIjpwYXJJZCwgImNodW5rLW1kNSI6IGNodW5rTWQ1LCAiYmFzZTY0LWJ5dGVzIjogYmFzZTY0Qnl0");
    sb.append("ZXN9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGZpbmlzaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVy");
    sb.append("KSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVf");
    sb.append("cnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIs");
    sb.append("CiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvZmluaXNoIiwgaWQ6IHN1Yklk");
    sb.append("LCAidXBsb2FkIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQoKICAvKipbRU5E");
    sb.append("LUlOVk9LRV0qKi8KfQoKdmFyIEFkYW1hID0gewogIFByb2R1Y3Rpb246ICJhd3MtdXMtZWFzdC0yLmFk");
    sb.append("YW1hLXBsYXRmb3JtLmNvbSIsCiAgQmV0YTogImJldGEuYWRhbWEtcGxhdGZvcm0uY29tIiwKICBDb25u");
    sb.append("ZWN0aW9uOiBXZWJTb2NrZXRBZGFtYUNvbm5lY3Rpb24KfTsK");
    return sb.toString();
  }
  public static final String WORKER = new String(Base64.getDecoder().decode(make_worker()), StandardCharsets.UTF_8);
  private static String make_worker() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyogQWRhbWEgd29ya2VyOiBoYW5kbGUgc2ltcGxlIHB1c2ggbm90aWZpY2F0aW9ucyAqLwoKY29uc29s");
    sb.append("ZS5sb2coImFkYW1hIHdvcmtlciBzdGFydGVkIik7CnNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaCcs");
    sb.append("IGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmRhdGEpIHsKICAgIHZhciBqc29uID0gZXZlbnQu");
    sb.append("ZGF0YS5qc29uKCk7CiAgICBpZiAoanNvbikgewogICAgICBjb25zb2xlLmxvZyhqc29uKTsKICAgICAg");
    sb.append("dmFyIHB1c2hUb2tlbiA9ICJOQSI7CiAgICAgIGlmICgnQHB0JyBpbiBqc29uKSB7CiAgICAgICAgcHVz");
    sb.append("aFRva2VuID0ganNvblsnQHB0J107CiAgICAgIH0KICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAg");
    sb.append("Ym9keToganNvbi5ib2R5ID8ganNvbi5ib2R5IDogIkdlbmVyaWMgUHVzaCBCb2R5IiwKICAgICAgfTsK");
    sb.append("ICAgICAgaWYgKGpzb24uaWNvbikgewogICAgICAgIG9wdGlvbnMuaWNvbiA9IGpzb24uaWNvbjsKICAg");
    sb.append("ICAgfQogICAgICB2YXIgc2hvdyA9IHRydWU7CiAgICAgIGlmIChqc29uLmhpZGUpIHsKICAgICAgICBz");
    sb.append("aG93ID0gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgaWYgKGpzb24udXJs");
    sb.append("KSB7CiAgICAgICAgZGF0YS51cmwgPSBqc29uLnVybDsKICAgICAgfQogICAgICBvcHRpb25zLmRhdGEg");
    sb.append("PSBkYXRhOwogICAgICBpZiAoc2hvdykgewogICAgICAgIGV2ZW50LndhaXRVbnRpbChzZWxmLnJlZ2lz");
    sb.append("dHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKGpzb24udGl0bGUgPyBqc29uLnRpdGxlIDogIkdlbmVyaWMg");
    sb.append("UHVzaCBUaXRsZSIsIG9wdGlvbnMpKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mKGpzb24uYmFkZ2Up");
    sb.append("ID09ICJudW1iZXIiICYmIG5hdmlnYXRvci5zZXRBcHBCYWRnZSkgewogICAgICAgIHRyeSB7CiAgICAg");
    sb.append("ICAgICBldmVudC53YWl0VW50aWwobmF2aWdhdG9yLnNldEFwcEJhZGdlKGpzb24uYmFkZ2UpKTsKICAg");
    sb.append("ICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgZXZlbnQud2FpdFVu");
    sb.append("dGlsKGZldGNoKHNlbGYubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5sb2NhdGlvbi5ob3N0");
    sb.append("ICsgIi9+cHQvIiArIHB1c2hUb2tlbiwgewogICAgICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgICAg");
    sb.append("IGhlYWRlcnM6IHt9LAogICAgICAgICAgYm9keTogcHVzaFRva2VuCiAgICAgICAgfSkpOwogICAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICAgIH0KICAgIH0KICB9Cn0pOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdub3RpZmljYXRpb25j");
    sb.append("bGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50Lm5vdGlmaWNhdGlvbiAmJiBldmVudC5u");
    sb.append("b3RpZmljYXRpb24uZGF0YSAmJiBldmVudC5ub3RpZmljYXRpb24uZGF0YS51cmwpIHsKICAgIHZhciB1");
    sb.append("cmwgPSBzZWxmLmxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHNlbGYubG9jYXRpb24uaG9zdCArIGV2");
    sb.append("ZW50Lm5vdGlmaWNhdGlvbi5kYXRhLnVybDsKICAgIHZhciBob21lID0gc2VsZi5sb2NhdGlvbi5wcm90");
    sb.append("b2NvbCArICIvLyIgKyBzZWxmLmxvY2F0aW9uLmhvc3Q7CiAgICBldmVudC5ub3RpZmljYXRpb24uY2xv");
    sb.append("c2UoKTsgLy8gQW5kcm9pZCBuZWVkcyBleHBsaWNpdCBjbG9zZS4KICAgIGV2ZW50LndhaXRVbnRpbCgK");
    sb.append("ICAgICAgY2xpZW50cy5tYXRjaEFsbCh7dHlwZTogJ3dpbmRvdyd9KS50aGVuKCB3YyA9PiB7CiAgICAg");
    sb.append("ICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHdpbmRvdy90YWIgb3BlbiB3aXRoIHRoZSB0");
    sb.append("YXJnZXQgVVJMCiAgICAgICAgdmFyIGNsaWVudFdpdGhQcmVmaXggPSBudWxsOwogICAgICAgIHZhciBj");
    sb.append("bGllbnRXaXRoSG9tZSA9IG51bGw7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Yy5sZW5ndGg7");
    sb.append("IGkrKykgewogICAgICAgICAgdmFyIGNsaWVudCA9IHdjW2ldOwogICAgICAgICAgY29uc29sZS5sb2co");
    sb.append("ImNsaWVudDoiICsgY2xpZW50LnVybCArICI7IiArIHVybCk7CiAgICAgICAgICBpZiAoY2xpZW50LnVy");
    sb.append("bCA9PT0gdXJsICYmICdmb2N1cycgaW4gY2xpZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjbGllbnQu");
    sb.append("Zm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjbGllbnQudXJsLnN0YXJ0c1dpdGgodXJs");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoUHJlZml4ID0g");
    sb.append("Y2xpZW50OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNsaWVudC51cmwuc3RhcnRzV2l0aChob21l");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoSG9tZSA9IGNs");
    sb.append("aWVudDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNsaWVudFdpdGhQcmVmaXggIT0g");
    sb.append("bnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpwcmVmaXg6IiArIHVybCk7CiAgICAgICAg");
    sb.append("ICByZXR1cm4gY2xpZW50V2l0aFByZWZpeC5uYXZpZ2F0ZSh1cmwpOwogICAgICAgIH0KICAgICAgICBp");
    sb.append("ZiAoY2xpZW50V2l0aEhvbWUgIT0gbnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpob21l");
    sb.append("OiIgKyB1cmwpOwogICAgICAgICAgcmV0dXJuIGNsaWVudFdpdGhIb21lLm5hdmlnYXRlKHVybCk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmIChjbGllbnRzLm9wZW5XaW5kb3cpIHsKICAgICAgICAgIGNvbnNvbGUu");
    sb.append("bG9nKCJvcGVuOm5ldzoiICsgdXJsKTsKICAgICAgICAgIHJldHVybiBjbGllbnRzLm9wZW5XaW5kb3co");
    sb.append("dXJsKTsKICAgICAgICB9CiAgICAgIH0pCiAgICApOwogIH0KfSk7");
    return sb.toString();
  }
}
