/*
* Adama Platform and Language
* Copyright (C) 2021 - 2023 by Adama Platform Initiative, LLC
* 
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.
* 
* You should have received a copy of the GNU Affero General Public License
* along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/
package org.adamalang.devbox;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class JavaScriptResourcesRaw {
  public static final String TREE = new String(Base64.getDecoder().decode(make_tree()), StandardCharsets.UTF_8);
  private static String make_tree() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIGEgc2ltcGxpZmllZCBwdWIvc3ViIGRpZmZlcmVudGlhbCB0cmVlICovCmZ1bmN0aW9uIEFkYW1h");
    sb.append("VHJlZSgpIHsKICB2YXIgaWQgPSAwOwoKICB2YXIgcm9vdCA9IHt9OwogIHZhciBhbGxfc3Vic2NyaXB0");
    sb.append("aW9ucyA9IHt9OwogIHZhciBzZXR0bGVJZCA9IDA7CiAgdmFyIHNldHRsZW1lbnRzID0ge307CgogIC8v");
    sb.append("IGludm9rZSBhbGwgdGhlIHNldHRsZSBzdWJzY3JpcHRpb25zCiAgdmFyIHNldHRsZSA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgdmFyIGF4ZSA9IFtdOwogICAgZm9yICh2YXIgayBpbiBzZXR0bGVtZW50cykgewogICAg");
    sb.append("ICB2YXIgcmVzdWx0ID0gc2V0dGxlbWVudHNba10oKTsKICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAg");
    sb.append("ICAvLyBpZiB0aGUgcmVzdWx0IGlzbid0IHRydWUsIHRoZW4gdW5zdWJzY3JpYmUKICAgICAgICBheGUu");
    sb.append("cHVzaChrKTsKICAgICAgfQogICAgfQogICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgZGVsZXRlIHNldHRsZW1lbnRzW2tdOwogICAgfQogIH07CgogIHZhciBjbG9uZV9v");
    sb.append("YmplY3QgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7CiAgICAg");
    sb.append("IHZhciBuZXh0ID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2JqLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgbmV4dC5wdXNoKGNsb25lX29iamVjdChvYmpba10pKTsKICAgICAgfQogICAgICByZXR1");
    sb.append("cm4gbmV4dDsKICAgIH0gZWxzZSBpZiAodHlwZW9mIChvYmopID09ICJvYmplY3QiKSB7CiAgICAgIHZh");
    sb.append("ciBuZXh0ID0ge307CiAgICAgIGZvciAoa2V5IGluIG9iaikgewogICAgICAgIGlmIChrZXlbMF0gPT0g");
    sb.append("IiMiIHx8IGtleSA9PSAiX19rZXkiIHx8IGtleSA9PSAiQG8iIHx8IGtleSA9PSAiQHMiKSBjb250aW51");
    sb.append("ZTsKICAgICAgICBuZXh0W2tleV0gPSBjbG9uZV9vYmplY3Qob2JqW2tleV0pOwogICAgICB9CiAgICAg");
    sb.append("IHJldHVybiBuZXh0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwoKICB0");
    sb.append("aGlzLm51a2UgPSBmdW5jdGlvbiAoKSB7CiAgICBhbGxfc3Vic2NyaXB0aW9ucyA9IHt9OwogIH07Cgog");
    sb.append("IHRoaXMuY29weSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBjbG9uZV9vYmplY3Qocm9vdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdHIgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocm9v");
    sb.append("dCk7CiAgfTsKCiAgdGhpcy5yYXcgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcm9vdDsKICB9OwoK");
    sb.append("ICAvLyBmaWx0ZXIgdGhlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIG9uZXMgdGhhdCBoYXZlIHRoZSBrZXkK");
    sb.append("ICB2YXIgc3ViID0gZnVuY3Rpb24gKHMsIGtleSkgewogICAgLy8gaWYgd2UgaGF2ZSBub3RoaW5nLCB0");
    sb.append("aGVuIHdlIHJldHVybiBub3RoaW5nCiAgICBpZiAocy5sZW5ndGggPT0gMCkgewogICAgICByZXR1cm4g");
    sb.append("czsKICAgIH0KICAgIC8vIG1ha2UgYSBuZXcgYXJyYXkKICAgIHZhciBuID0gW107CiAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IHMubGVuZ3RoOyBrKyspIHsgLy8gc3VjaCB0aGF0IGV2ZXJ5IGVsZW1lbnQKICAg");
    sb.append("ICAgaWYgKGtleSBpbiBzW2tdKSB7IC8vIHdoaWNoIGNvbnRhaW5zIHRoZSBrZXkKICAgICAgICBuLnB1");
    sb.append("c2goc1trXVtrZXldKTsgLy8gaXMgYWRkZWQgdG8gdGhlIG5ldyBhcnJheQogICAgICB9CiAgICB9CiAg");
    sb.append("ICByZXR1cm4gbjsKICB9OwoKICAvLyBmaXJlIGV2ZW50cyBhdCB0aGUgY3VycmVudCBzdWJzY3JpcHRp");
    sb.append("b24KICB2YXIgZmlyZSA9IGZ1bmN0aW9uIChzLCB2YWx1ZSwgZXZlbnRzKSB7CiAgICAvLyBmb3IgZWFj");
    sb.append("aCBzdWJzY3JpcHRpb24KICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgewogICAg");
    sb.append("ICB2YXIgdiA9IHNbal07CiAgICAgIC8vIGlmIGl0IGhhcyBldmVudHMKICAgICAgaWYgKCJAZSIgaW4g");
    sb.append("dikgewogICAgICAgIC8vIGZpcmUgZWFjaCBldmVudAogICAgICAgIHZhciBldnRzID0gdlsiQGUiXTsK");
    sb.append("ICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV2dHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGV2");
    sb.append("ZW50cy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5mKHRoaXMudik7CiAgICAgICAg");
    sb.append("ICB9LmJpbmQoeyBmOiBldnRzW2tdLCB2OiB2YWx1ZSB9KSk7CiAgICAgICAgfQogICAgICB9CiAgICB9");
    sb.append("CiAgfTsKCiAgdmFyIHdlYXZlID0gZnVuY3Rpb24gKHMsIGNhbGxiYWNrLCBrZXkpIHsKICAgIGlmIChB");
    sb.append("cnJheS5pc0FycmF5KGNhbGxiYWNrKSkgewogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhbGxiYWNr");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgd2VhdmUocywgY2FsbGJhY2tba10sIGtleSk7CiAgICAgIH0K");
    sb.append("ICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxsYmFjaykgPT0gImZ1bmN0aW9uIikgewogICAgICBpZiAo");
    sb.append("IShrZXkgaW4gcykpIHsKICAgICAgICBzW2tleV0gPSB7fTsKICAgICAgfQogICAgICB2YXIgc2sgPSBz");
    sb.append("W2tleV07CiAgICAgIGlmICghKCJAZSIgaW4gc2spKSB7CiAgICAgICAgc2tbIkBlIl0gPSBbY2FsbGJh");
    sb.append("Y2tdOwogICAgICB9IGVsc2UgewogICAgICAgIHNrWyJAZSJdLnB1c2goY2FsbGJhY2spOwogICAgICB9");
    sb.append("CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09ICJvYmplY3QiKSB7CiAgICAgIGlmICgh");
    sb.append("KGtleSBpbiBzKSkgewogICAgICAgIHNba2V5XSA9IHt9OwogICAgICB9CiAgICAgIHZhciBzayA9IHNb");
    sb.append("a2V5XTsKICAgICAgZm9yICh2YXIgY2sgaW4gY2FsbGJhY2spIHsKICAgICAgICBpZiAoY2sgPT0gIkBl");
    sb.append("IikgewogICAgICAgICAgd2VhdmUocywgY2FsbGJhY2tbY2tdLCBrZXkpOwogICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICB3ZWF2ZShzaywgY2FsbGJhY2tbY2tdLCBjayk7CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICB9CiAgfTsKCiAgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhZGRpdGlvbgogIHZhciBmaXJlX2FkZCA9");
    sb.append("IGZ1bmN0aW9uIChzLCBrZXkpIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykg");
    sb.append("eyAvLyBmb3IgZWFjaCBzdWJzY3JpcHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIisi");
    sb.append("IGluIHYpIHsgLy8gaWYgdGhlIHN1YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gYWRkIG5ldyBv");
    sb.append("YmplY3RzCiAgICAgICAgdmFyIHZhID0gdlsiKyJdOwogICAgICAgIGlmICgiQGUiIGluIHZhKSB7IC8v");
    sb.append("IGlmIGFyZSBldmVudHMgYXNzb2NpYXRlZCB0byAnKycKICAgICAgICAgIHZhciBldmEgPSB2YVsiQGUi");
    sb.append("XTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZhLmxlbmd0aDsgaysrKSB7IC8vIGZvciBl");
    sb.append("YWNoICcrJyBhYmlsaXR5CiAgICAgICAgICAgIHdlYXZlKHYsIGV2YVtrXShrZXkpLCBrZXkpOwogICAg");
    sb.append("ICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIGZpcmUgYSBkZWxldGUgbWVz");
    sb.append("c2FnZSBmb3IgdGhlIGdpdmVuIGtleQogIHZhciBmaXJlX2RlbCA9IGZ1bmN0aW9uIChzLCBrZXkpIHsK");
    sb.append("ICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgeyAvLyBmb3IgZWFjaCBzdWJzY3Jp");
    sb.append("cHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIi0iIGluIHYpIHsgLy8gaWYgdGhlIHN1");
    sb.append("YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gZGVsZXRlIHByaW9yIGtleXMKICAgICAgICB2YXIg");
    sb.append("dmEgPSB2WyItIl07CiAgICAgICAgaWYgKCJAZSIgaW4gdmEpIHsgLy8gaWYgYXJlIGV2ZW50cyBhc3Nv");
    sb.append("Y2lhdGVkIHRvICctJwogICAgICAgICAgdmFyIGV2YSA9IHZhWyJAZSJdOwogICAgICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBldmEubGVuZ3RoOyBrKyspIHsgLy8gZm9yIGVhY2ggJy0nIGFiaWxpdHkKICAg");
    sb.append("ICAgICAgICAgZXZhW2tdKGtleSk7IC8vIGV2YWx1YXRlIHRoZSAnLScKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBhIGRlbGV0ZSBvZiBhIHRyZWUgaGFzIGJlZW4gZGV0");
    sb.append("ZWN0ZWQsIGxldCdzCiAgdmFyIGRlbCA9IGZ1bmN0aW9uIChzKSB7CiAgICAvLyBpZiB0aGUgc3Vic2Ny");
    sb.append("aXB0aW9ucyBpcyBhbiBhcnJheSwgdGhlbiBkZWxldGUgYWxsIGNoaWxkcmVuCiAgICBpZiAoQXJyYXku");
    sb.append("aXNBcnJheShzKSkgewogICAgICB2YXIgbiA9IHMubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IG47IGsrKykgewogICAgICAgIGRlbChzW2tdKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBl");
    sb.append("b2YgKHMpID09ICJvYmplY3QiKSB7IC8vIG90aGVyd2lzZSwgaXRlcmF0ZSBvdmVyIHRoZSBrZXlzCiAg");
    sb.append("ICAgIGZvciAodmFyIGtleSBpbiBzKSB7CiAgICAgICAgaWYgKCEoa2V5ID09ICcrJyB8fCBrZXkgPT0g");
    sb.append("Jy0nKSkgewogICAgICAgICAgdmFyIGNoID0gc1trZXldOwogICAgICAgICAgaWYgKGtleSA9PSAiQGUi");
    sb.append("KSB7IC8vIHdlIGhhdmUgZXZlbnRzLCBzbyBsZXQncyBzZW5kIHRob3NlIGV2ZW50cy4uLgogICAgICAg");
    sb.append("ICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY2hb");
    sb.append("al0obnVsbCk7IC8vIGEgbnVsbCB0byBpbmRpY2F0ZSBkZWxldGlvbgogICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICB9IGVsc2UgeyAvLyByZWN1cnNlIGludG8gdGhlIGNoaWxkIGZpZWxkCiAgICAgICAgICAgIGRl");
    sb.append("bChjaCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gZGVsZXRl");
    sb.append("IHRoZSBnaXZlbiBrZXkgd2l0aGluIHRoZSBzdWJzY3JpcHRpb24KICB2YXIgZGVsX2tleSA9IGZ1bmN0");
    sb.append("aW9uIChzLCBrZXkpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHMpKSB7IC8vIGlmIHdlIGhhdmUgYW4g");
    sb.append("YXJyYXkgb2Ygc3Vic2NyaXB0aW9ucywgdGhlbiBzaW1wbHkgcmVwZWF0CiAgICAgIHZhciBuID0gcy5s");
    sb.append("ZW5ndGg7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgZGVsX2tleShz");
    sb.append("W2tdLCBrZXkpOyAvLyBmb3IgZWFjaCBlbGVtZW50CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9m");
    sb.append("IChzKSA9PSAib2JqZWN0IikgeyAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWJjcmlwdGlvbiBjYWxs");
    sb.append("YmFjawogICAgICBpZiAoa2V5IGluIHMpIHsgLy8gaWYgdGhlIGtleSBpcyBpbiB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIGNhbGxiYWNrCiAgICAgICAgZGVsZXRlIHNba2V5XTsgLy8gZGVsZXRlIGl0CiAgICAgIH0KICAg");
    sb.append("IH0KICB9OwoKICAvLyBtZXJnZSB0aGUgZ2l2ZW4gZGVsdGEgaW50byB0aGUgdHJlZSBhbmQgZmlyZSBz");
    sb.append("dWJzY3JpcHRpb25zIChzKQogIHZhciBtZXJnZSA9IGZ1bmN0aW9uICh0cmVlLCBkZWx0YSwgcywgZXZl");
    sb.append("bnRzLCBvcHRpbWFsKSB7CiAgICBpZiAob3B0aW1hbCAmJiBzLmxlbmd0aCA9PSAwKSB7CiAgICAgIC8v");
    sb.append("IG5vIHZhbHVlIGluIG1lcmdpbmcgYWdhaW5zdCBhIGZhdXggdHJlZSB3aXRob3V0IHN1YnNjcmlwdGlv");
    sb.append("bnMKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yICh2YXIga2V5IGluIGRlbHRhKSB7IC8vIGZvciBl");
    sb.append("YWNoIGJpdCBvZiBkYXRhIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgZUtleSA9ICIjIiArIGtleTsg");
    sb.append("Ly8gY29tcHV0ZSB0aGUgc2VjcmV0IGRhdGEgcGF0aAogICAgICB2YXIgcHJpb3IgPSB0cmVlW2tleV07");
    sb.append("IC8vIGZpbmQgdGhlIHByaW9yIHN0YXRlIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgbmV4dCA9IGRl");
    sb.append("bHRhW2tleV07IC8vIGJyaW5nIHRoZSBjaGFuZ2UgcHJlc2VudCBmb3IgdGhlIGN1cnJlbnQga2V5CiAg");
    sb.append("ICAgIGlmIChuZXh0ID09IG51bGwpIHsgLy8gdGhlIGl0ZW0gaXMgZ29pbmcgcG9vZgogICAgICAgIC8v");
    sb.append("IHRoZSBwcmlvciB2YWx1ZSBpcyBhbiBhcnJheSwgc28gd2UgbWF5IGhhdmUgc29tZSBzcGVjaWFsIHRo");
    sb.append("aW5ncyBhc3NvY2lhdGUgd2l0aCBpdAogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByaW9yKSkgeyAv");
    sb.append("LyBVTlRFU1QKICAgICAgICAgIGlmIChlS2V5IGluIHRyZWUpIHsKICAgICAgICAgICAgZGVsKHN1Yihz");
    sb.append("LCBlS2V5KSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWxldGUgdHJlZVtlS2V5XTsKICAgICAgICB9");
    sb.append("CiAgICAgICAgZGVsKHN1YihzLCBrZXkpKTsgLy8gaXNzdWUgYSBkZWxldGUgZm9yIGFsbCB0aGUgc3Vi");
    sb.append("c2NyaXB0aW9ucyBmb3IgdGhlIGtpZAogICAgICAgIGRlbGV0ZSB0cmVlW2tleV07IC8vIGRlbGV0ZSB0");
    sb.append("aGUgZGF0YSBpbiB0aGUgdHJlZQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0eXBlb2YgKG5leHQp");
    sb.append("ID09ICJvYmplY3QiICYmICFBcnJheS5pc0FycmF5KG5leHQpKSB7IC8vIGlmIHRoZSBkZWx0YSBpcyBh");
    sb.append("biBvYmplY3QKICAgICAgICAgIHZhciBhcnIgPSBBcnJheS5pc0FycmF5KHByaW9yKSB8fCAiQG8iIGlu");
    sb.append("IG5leHQgfHwgIkBzIiBpbiBuZXh0OyAvLyBkZXRlY3QgaWYgd2UgbmVlZCB0byB1c2UgYXJyYXkgbG9n");
    sb.append("aWMKICAgICAgICAgIGlmIChhcnIpIHsgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhcnJheQogICAgICAg");
    sb.append("ICAgICBpZiAoIShrZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSB0cmVlIGhhcyBh");
    sb.append("biBlbXB0eSBhcnJheQogICAgICAgICAgICAgIHRyZWVba2V5XSA9IFtdOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgIGlmICghKGVLZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSBzZWNy");
    sb.append("ZXQgZGF0YSBleGlzdHMgYXMgd2VsbAogICAgICAgICAgICAgIHRyZWVbZUtleV0gPSB7fTsKICAgICAg");
    sb.append("ICAgICAgICBpZiAoIkBvIiBpbiBuZXh0KSB7IC8vIGlmIHdlIGhhdmUgYSBidW5jaCBvZiBrZXlzLCB0");
    sb.append("aGVuIGxldCdzIG1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSB0aGF0IGZvciBtYWtlX2RlbHRhCiAgICAgICAg");
    sb.append("ICAgICAgICB0cmVlW2VLZXldWyJAbyJdID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("ICAgdHJlZVtlS2V5XS5fX2tleSA9IGtleTsgLy8gYW5ub3RhdGUgdGhlIG5ldyBpdGVtIHdpdGggdGhl");
    sb.append("IGdpdmVuIGtleQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBlQmFzZSA9IHRyZWVbZUtleV07");
    sb.append("IC8vIGdldCB0aGUgc2VjcmV0IChhbmQgcmVhbCkgZGF0YSBmb3IgdGhlIG9iamVjdCBpbiBxdWVzdGlv");
    sb.append("bgogICAgICAgICAgICB2YXIgZVN1YiA9IHN1YihzLCBrZXkpOyAvLyBzY29wZSB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIHRvIHRoZSBrZXkKICAgICAgICAgICAgdmFyIG9yZGVyaW5nID0gbnVsbDsgLy8gZGV0ZWN0aW9u");
    sb.append("IG9mIGlmIHdlIGhhdmUgQG8gb3JkZXJpbmcgdG8gcmVvcmRlciB0aGUgdmFsdWVzCiAgICAgICAgICAg");
    sb.append("IHZhciByZXNpemUgPSBudWxsOyAvLyBkZXRlY3Rpb24gb2YgYW4gYXJyYXkgd2l0aG91dCBfX2tleQog");
    sb.append("ICAgICAgICAgICB2YXIgZGVsYXkgPSB7fTsgLy8gd2UgZGVsYXkgYWxsIGV2ZW50cyBzdWNoIHRoYXQg");
    sb.append("dGhlIGFycmF5IGNhbiBiZSBidWlsdCBmb3IgaW5saW5lIG1ha2VfZGVsdGEgY2FsbHMgdG8gd29yawog");
    sb.append("ICAgICAgICAgICBmb3IgKHZhciBhS2V5IGluIG5leHQpIHsgLy8gZm9yIGVhY2ggZmllbGQgd2l0aGlu");
    sb.append("IHRoZSBkaWZmZXJlbmNlCiAgICAgICAgICAgICAgdmFyIHZhbCA9IG5leHRbYUtleV07CiAgICAgICAg");
    sb.append("ICAgICAgaWYgKGFLZXkgPT0gIkBvIikgeyAvLyB0aGUgdmFsdWUgaXMgYSBuZXcgb3JkZXJpbmcgb2Yg");
    sb.append("dGhlIGFycmF5CiAgICAgICAgICAgICAgICBvcmRlcmluZyA9IHZhbDsKICAgICAgICAgICAgICB9IGVs");
    sb.append("c2UgaWYgKGFLZXkgPT0gIkBzIikgeyAvLyB0aGUgdmFsdWUgaXMgYSByZXNpemUgb2YgdGhlIGFycmF5");
    sb.append("CiAgICAgICAgICAgICAgICByZXNpemUgPSB2YWw7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwg");
    sb.append("PT0gbnVsbCkgeyAvLyBkZWxldGUgdGhlIGVsZW1lbnQKICAgICAgICAgICAgICAgIGlmIChhS2V5IGlu");
    sb.append("IGVCYXNlKSB7IC8vIGlmIGl0IGV4aXN0cyB3aXRoaW4gdGhlIHNlY3JldCBrZXkKICAgICAgICAgICAg");
    sb.append("ICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICAgIGRlbChz");
    sb.append("dWIoZVN1YiwgeCkpOyAvLyBpc3N1ZSBkZWxldGVzCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVC");
    sb.append("YXNlW3hdOyAvLyBkZWxldGUgdGhlIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgZGVsX2tleShlU3Vi");
    sb.append("LCB4KTsgLy8gZGVsZXRlIHRoZSBrZXlzIGZyb20gdGhlIG9iamVjdAogICAgICAgICAgICAgICAgICAg");
    sb.append("IGZpcmVfZGVsKGVTdWIsIHgpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHdlIGhhdmUgZGF0YQogICAgICAgICAgICAgICAgaWYgKCEo");
    sb.append("YUtleSBpbiBlQmFzZSkpIHsgLy8gdGhlIGRhdGEgZGlkbid0IGV4aXN0LCBzbyBmaXJlIGFuIGFkZGl0");
    sb.append("aW9uIHRvIGV4dGVuZCB0aGUgc3Vic2NyaXB0aW9ucwogICAgICAgICAgICAgICAgICBmaXJlX2FkZChl");
    sb.append("U3ViLCBhS2V5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBuVmFsID0gbmV4");
    sb.append("dFthS2V5XTsgLy8gZ2V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKG5W");
    sb.append("YWwpID09ICJvYmplY3QiKSB7IC8vIGlmIHRoZSBuZXcgdmFsdWUgaXMgYW4gb2JqZWN0CiAgICAgICAg");
    sb.append("ICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRoZW4gbWFrZSBzdXJlIHRoZSBuZXcg");
    sb.append("aXRlbSBpcyB3aXRoaW4gdGhlIHNlY3JldCB0cmVlCiAgICAgICAgICAgICAgICAgICAgZUJhc2VbYUtl");
    sb.append("eV0gPSB7fTsKICAgICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XS5fX2tleSA9IGFLZXk7CiAgICAg");
    sb.append("ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkg");
    sb.append("ewogICAgICAgICAgICAgICAgICAgIG1lcmdlKGVCYXNlW3hdLCBuZXh0W3hdLCBzdWIoZVN1YiwgeCks");
    sb.append("IGV2ZW50cywgb3B0aW1hbCk7IC8vIHJlY3Vyc2U6IG1lcmdlIHRoZSBkaWZmZXJlbmNlIGludG8gdGhl");
    sb.append("IHNlY3JldCB0cmVlIGFuZCBwdWJsaXNoIHRvIGFsbCBlbGVtZW50IHN1YnNjcmlwdGlvbnMKICAgICAg");
    sb.append("ICAgICAgICAgICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAg");
    sb.append("ICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIHNldCB0aGUg");
    sb.append("dmFsdWUgaW50byB0aGUgdHJlZQogICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XSA9IG5WYWw7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIGRlbGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAg");
    sb.append("ICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAgICAgICAgICAg");
    sb.append("IH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBhbmQgdGVsbCBldmVyeW9uZSB0");
    sb.append("aGUgbmV3IHZhbHVlIGZvciB0aGlzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIHZhciBiZWZvcmUgPSB0cmVlW2tleV07IC8vIHN0YXNoIGEgcG9pbnRlciB0byB0aGUgYXJyYXkK");
    sb.append("ICAgICAgICAgICAgdmFyIGRlbGF5T3JkZXIgPSBbXTsKCiAgICAgICAgICAgIGlmIChvcmRlcmluZyAh");
    sb.append("PSBudWxsKSB7IC8vIGFuIG9yZGVyaW5nIGNoYW5nZSBpcyBoYXBwZW5pbmcKICAgICAgICAgICAgICB2");
    sb.append("YXIgYWZ0ZXIgPSBbXTsgLy8gd2Ugd2lsbCByZWJ1aWxkIHRoZSBhcnJheSBoZXJlCiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOyAvLyBhbmQgcmVjb3JkIHRoZSBrZXlzIGhlcmUKICAgICAgICAgICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IG9yZGVyaW5nLmxlbmd0aDsgaysrKSB7IC8vIGZvciBlYWNoIG9yZGVy");
    sb.append("aW5nIGluc3RydWN0aW9uCiAgICAgICAgICAgICAgICB2YXIgaW5zdHIgPSBvcmRlcmluZ1trXTsKICAg");
    sb.append("ICAgICAgICAgICAgIHZhciB0eXBlX2luc3RyID0gdHlwZW9mIChpbnN0cik7CiAgICAgICAgICAgICAg");
    sb.append("ICBpZiAodHlwZV9pbnN0ciA9PSAic3RyaW5nIiB8fCB0eXBlX2luc3RyID09ICJudW1iZXIiKSB7IC8v");
    sb.append("IGlmIHRoZSBpbnN0cnVjdGlvbiByZWZlcnMgdG8gYW4gaXRlbQogICAgICAgICAgICAgICAgICBhZnRl");
    sb.append("ci5wdXNoKGVCYXNlW2luc3RyXSk7IC8vIHB1c2ggdGhlIGl0ZW0gaW50byB0aGUgbmV3IGFycmF5CiAg");
    sb.append("ICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgaW5zdHIpOyAvLyByZWNvcmQgdGhlIGtleSBvZiB0");
    sb.append("aGUgaXRlbQogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCB0aGUgaW5zdHJ1Y3Rp");
    sb.append("b24gaXMgYSByYW5nZQogICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBpbnN0clswXTsKICAgICAg");
    sb.append("ICAgICAgICAgICAgdmFyIGVuZCA9IGluc3RyWzFdOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBq");
    sb.append("ID0gc3RhcnQ7IGogPD0gZW5kOyBqKyspIHsgLy8gaXRlcmF0ZSBvdmVyIHRoZSByYW5nZSBhbmQgY29w");
    sb.append("eQogICAgICAgICAgICAgICAgICAgIGlmIChiZWZvcmVbal0pIHsKICAgICAgICAgICAgICAgICAgICAg");
    sb.append("IGFmdGVyLnB1c2goYmVmb3JlW2pdKTsgLy8gdGhlIGl0ZW1zIGZyb20gdGhlIHByZXZpb3VzIGNvcHkK");
    sb.append("ICAgICAgICAgICAgICAgICAgICAgIG1zZy5wdXNoKGJlZm9yZVtqXS5fX2tleSk7IC8vIGFuZCBhbm5v");
    sb.append("dGF0ZSB0aGUga2V5cwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWxheU9yZGVyLnB1c2go");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgIn4iKSwgbXNnLCBldmVu");
    sb.append("dHMpOyAvLyB0ZWxsIHN1YnNjcmlwdGlvbnMgYWJvdXQgdGhlIG5ldyBvcmRlcmluZwogICAgICAgICAg");
    sb.append("ICAgIH0pOwogICAgICAgICAgICAgIHRyZWVba2V5XSA9IGFmdGVyOwogICAgICAgICAgICB9IGVsc2Ug");
    sb.append("aWYgKHJlc2l6ZSAhPSBudWxsKSB7IC8vIGFsdGVybmF0aXZlbHksIGFuIGFycmF5IHdpdGhvdXQga2V5");
    sb.append("cyBpcyBiZWluZyByZXNpemVkCiAgICAgICAgICAgICAgdmFyIGFmdGVyID0gW107CiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOwogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcmVzaXplOyBr");
    sb.append("KyspIHsgLy8gd2UgcmVidWlsZCB0aGUgYXJyYXkKICAgICAgICAgICAgICAgIGFmdGVyW2tdID0gZUJh");
    sb.append("c2VbIiIgKyBrXTsKICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgayk7CiAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgIGRlbGF5T3JkZXIucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAg");
    sb.append("ICBmaXJlKHN1YihlU3ViLCAifiIpLCBtc2csIGV2ZW50cyk7IC8vIHRlbGwgc3Vic2NyaXB0aW9ucyBh");
    sb.append("Ym91dCB0aGUgbmV3IG9yZGVyaW5nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdHJlZVtr");
    sb.append("ZXldID0gYWZ0ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChhS2V5IGluIGRlbGF5KSB7");
    sb.append("CiAgICAgICAgICAgICAgZGVsYXlbYUtleV0oYUtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBkZWxheU9yZGVyLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAg");
    sb.append("ZGVsYXlPcmRlcltrXSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpcmUoZVN1YiwgdHJlZVtr");
    sb.append("ZXldLCBldmVudHMpOyAvLyB0ZWxsIGV2ZXJ5b25lIGFib3V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghKGtleSBpbiB0cmVlKSB8fCB0eXBlb2YgKHRyZWVba2V5");
    sb.append("XSkgIT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgICB0cmVlW2tleV0gPSB7fTsKICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICB2YXIgZSA9IHN1YihzLCBrZXkpOwogICAgICAgICAgICBtZXJnZSh0cmVlW2tl");
    sb.append("eV0sIG5leHQsIGUsIGV2ZW50cywgb3B0aW1hbCk7CiAgICAgICAgICAgIGZpcmUoZSwgdHJlZVtrZXld");
    sb.append("LCBldmVudHMpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7IC8vIG5vdCBhbiBvYmplY3QsIHNv");
    sb.append("IGl0IGlzIGEgdmFsdWUKICAgICAgICAgIHRyZWVba2V5XSA9IG5leHQ7IC8vIHN0YXNoIHRoZSBuZXcg");
    sb.append("dmFsdWUKICAgICAgICAgIGZpcmUoc3ViKHMsIGtleSksIG5leHQsIGV2ZW50cyk7IC8vIGFuZCB0ZWxs");
    sb.append("IGV2ZXJ5b25lIGFib3V0IGl0CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmaXJlKHMsIHRyZWUs");
    sb.append("IGV2ZW50cyk7CiAgfTsKCiAgdmFyIGZpcmVfZXZlbnRzID0gZnVuY3Rpb24gKGV2ZW50cykgewogICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBldmVudHMubGVuZ3RoOyBrKyspIHsKICAgICAgZXZlbnRzW2tdKCk7");
    sb.append("CiAgICB9CiAgfTsKCiAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICB0aGlzLnVwZGF0");
    sb.append("ZXMgPSAwOwogIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhKSB7CiAgICB0aGlzLnVwZGF0ZV9p");
    sb.append("bl9wcm9ncmVzcyA9IHRydWU7CiAgICB0aGlzLnVwZGF0ZXMrKzsKICAgIHZhciBhcnIgPSBbXTsgLy8g");
    sb.append("Y29udmVydCB0aGUgc3Vic2NyaXB0aW9ucyBpbnRvIGFuIGFycmF5CiAgICBmb3IgKHZhciBrIGluIGFs");
    sb.append("bF9zdWJzY3JpcHRpb25zKSB7CiAgICAgIGFyci5wdXNoKGFsbF9zdWJzY3JpcHRpb25zW2tdKTsKICAg");
    sb.append("IH0KICAgIHZhciBldmVudHMgPSBbXTsKICAgIG1lcmdlKHJvb3QsIGRlbHRhLCBhcnIsIGV2ZW50cywg");
    sb.append("ZmFsc2UpOyAvLyBleGVjdXRlIHRoZSBtZXJnZSBhbmQgZmlyZSBldmVudHMKICAgIGZpcmVfZXZlbnRz");
    sb.append("KGV2ZW50cyk7CiAgICB3aGlsZSAodGhpcy5zdWJzY3JpYmVfZGVsYXkubGVuZ3RoID4gMCkgewogICAg");
    sb.append("ICB2YXIgY29weSA9IHRoaXMuc3Vic2NyaWJlX2RlbGF5OwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eSA9IFtdOwogICAgICB2YXIgZmxhdCA9IFtdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNvcHku");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICBpZiAoIWNvcHlba10uYWJvcnRlZCkgewogICAgICAgICAgZmxh");
    sb.append("dC5wdXNoKGNvcHlba10uc3ViKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZXZlbnRzID0gW107CiAg");
    sb.append("ICAgIG1lcmdlKHt9LCBtYWtlX29wdGltYWxfZGVsdGEocm9vdCwgZmxhdCksIGZsYXQsIGV2ZW50cywg");
    sb.append("dHJ1ZSk7IC8vIGV4ZWN1dGUgdGhlIG1lcmdlIGFuZCBmaXJlIGV2ZW50cwogICAgICBmaXJlX2V2ZW50");
    sb.append("cyhldmVudHMpOwogICAgfQogICAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICAgIHNl");
    sb.append("dHRsZSgpOwogIH07CgogIC8vIGZpeCB0aGUgY2FsbGJhY2sgc3RydWN0dXJlIGZyb20gdGhlIHVzZXIn");
    sb.append("cyBoYXBweSBsYW5kIHRvIHRoZSByaWdvciBvZiB0aGUgZm9ybWF0IG5lZWRlZAogIHZhciB0cmFuc2Zv");
    sb.append("cm1fY2FsbGJhY2tfaW50b19zdWIgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHN1YikgewogICAgaWYgKEFy");
    sb.append("cmF5LmlzQXJyYXkoY2FsbGJhY2spKSB7IC8vIGlmIHRoZSBjYWxsYmFjayBpcyBhbiBhcnJheSwgdGhl");
    sb.append("biBmbGF0dGVuIHRoZSBhcnJheSBpbnRvIHRoZSBuZXcgb2JqZWN0CiAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgY2FsbGJhY2subGVuZ3RoOyBrKyspIHsKICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50");
    sb.append("b19zdWIoY2FsbGJhY2tba10sIHN1Yik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxs");
    sb.append("YmFjaykgPT0gIm9iamVjdCIpIHsgLy8gb2gsIHRoZSBjYWxsYmFjayBpcyBhbiBvYmplY3QKICAgICAg");
    sb.append("Zm9yICh2YXIga2V5IGluIGNhbGxiYWNrKSB7IC8vIGl0ZXJhdGUgb3ZlciBlYWNoIGtleQogICAgICAg");
    sb.append("IGlmIChrZXkgPT0gIkBlIikgeyAvLyBmb3JjZSB0aGUgZnVuY3Rpb25zIHRvIG1lcmdlIHRvZ2V0aGVy");
    sb.append("CiAgICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIoY2FsbGJhY2tba2V5XSwgc3ViKTsK");
    sb.append("ICAgICAgICB9IGVsc2UgeyAvLyBub3JtYWwgZmxvdwogICAgICAgICAgaWYgKCEoa2V5IGluIHN1Yikp");
    sb.append("IHsgLy8gZGl2ZSBpbnRvIHRoZSBvYmplY3QgYW5kIG1ha2Ugc3VyZSB0aGUgc3Vic2NyaXB0aW9uIGhh");
    sb.append("cyB0aGUgZmllbGQKICAgICAgICAgICAgc3ViW2tleV0gPSB7fTsKICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IHRyYW5zZm9ybV9jYWxsYmFja19pbnRvX3N1YihjYWxsYmFja1trZXldLCBzdWJba2V5XSk7IC8vIHJl");
    sb.append("Y3Vyc2UgYW5kIHBhaXIgdGhlIGV2ZW50cyB0byB0aGUgbmV3IHN1YnNjcmlwdGlvbgogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgKGNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iKSB7IC8v");
    sb.append("IGl0J3MgYSBmdW5jdGlvbgogICAgICBpZiAoISgiQGUiIGluIHN1YikpIHsgLy8gbGV0J3MgZW5zdXJl");
    sb.append("IHRoZXJlIGlzIGFuIGV2ZW50IGxpc3QKICAgICAgICBzdWJbIkBlIl0gPSBbY2FsbGJhY2tdOwogICAg");
    sb.append("ICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIGp1c3QgYWRkIGl0CiAgICAgICAgc3ViWyJAZSJdLnB1c2go");
    sb.append("Y2FsbGJhY2spOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gY29udmVydCB0aGUgdHJlZSB0byBhIGRl");
    sb.append("bHRhOyB0aGlzIHRyZWUgaXMgYXNzdW1lZCB0byBoYXZlIGJlZW4gbWVyZ2VkIGFscmVhZHkKICB2YXIg");
    sb.append("bWFrZV9kZWx0YSA9IGZ1bmN0aW9uIChzdCkgewogICAgdmFyIGRlbHRhID0ge307IC8vIHRoZSBkZWx0");
    sb.append("YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsgaW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhp");
    sb.append("biB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19r");
    sb.append("ZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQogICAgICB2YXIgdiA9IHN0W2tdOwogICAgICBpZiAo");
    sb.append("KCIjIiArIGspIGluIHN0KSB7IC8vIHRoZSByZXN1bHQgaXMgYW4gYXJyYXkKICAgICAgICB2YXIgcHYg");
    sb.append("PSBzdFsnIycgKyBrXTsKICAgICAgICB2YXIgZCA9IHt9OwogICAgICAgIGlmICgiQG8iIGluIHB2KSB7");
    sb.append("IC8vIGFuZCB3ZSBoYXZlIGEgc3BlY2lmaWMgb3JkZXJpbmcgdG8gbWVtb2l6ZQogICAgICAgICAgdmFy");
    sb.append("IG8gPSBbXTsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgeyAvLyBj");
    sb.append("b3B5IHRoZSBlbGVtZW50cyBmcm9tIHRoZSBhcnJheQogICAgICAgICAgICB2YXIgdmogPSB2W2pdOwog");
    sb.append("ICAgICAgICAgICBpZiAodmopIHsKICAgICAgICAgICAgICBkW3ZqLl9fa2V5XSA9IG1ha2VfZGVsdGEo");
    sb.append("dmopOyAvLyB1c2luZyB0aGUgX19rZXkgZW1iZWRkZWQgaW4gdGhlIG9iamVjdAogICAgICAgICAgICAg");
    sb.append("IG8ucHVzaCh2W2pdLl9fa2V5KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZFsi");
    sb.append("QG8iXSA9IG87CiAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlOyByZWNvcmQgdGhlIHNpemUgYXMg");
    sb.append("d2UgcmVjdXJzZQogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7CiAg");
    sb.append("ICAgICAgICAgIGRbIiIgKyBqXSA9IG1ha2VfZGVsdGEocHZbal0pOwogICAgICAgICAgfQogICAgICAg");
    sb.append("ICAgZFsiQHMiXSA9IHYubGVuZ3RoOwogICAgICAgIH0KICAgICAgICBkZWx0YVtrXSA9IGQ7CiAgICAg");
    sb.append("IH0gZWxzZSBpZiAodHlwZW9mICh2KSA9PSAib2JqZWN0IikgeyAvLyBpdCdzIGp1c3QgYW4gb2JqZWN0");
    sb.append("LCBzbyByZWN1cnNlIGRpcmVjdGx5CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHsKICAgICAg");
    sb.append("ICAgIHZhciBkID0ge307CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHYubGVuZ3RoOyBqKysp");
    sb.append("IHsKICAgICAgICAgICAgZFsiIiArIGpdID0gbWFrZV9kZWx0YSh2W2pdKTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIGRbIkBzIl0gPSB2Lmxlbmd0aDsKICAgICAgICAgIGRlbHRhW2tdID0gZDsKICAgICAgICB9");
    sb.append("IGVsc2UgewogICAgICAgICAgZGVsdGFba10gPSBtYWtlX2RlbHRhKHYpOwogICAgICAgIH0KICAgICAg");
    sb.append("fSBlbHNlIHsgLy8gZmluYWxseSwgaXQgaXMgYSB2YWx1ZSBzbyBqdXN0IHNldCBpdAogICAgICAgIGRl");
    sb.append("bHRhW2tdID0gdjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGRlbHRhOwogIH07CiAgdGhpcy5NYWtl");
    sb.append("RGVsdGEgPSBtYWtlX2RlbHRhOwoKICB2YXIgbWFrZV9vcHRpbWFsX2RlbHRhID0gZnVuY3Rpb24oc3Qs");
    sb.append("IHN1YnMpIHsKICAgIHZhciBmaWx0ZXIgPSB7fTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc3Vicy5s");
    sb.append("ZW5ndGg7IGsrKykgewogICAgICB2YXIgcyA9IHN1YnNba107CiAgICAgIGlmICh0eXBlb2YocykgPT0g");
    sb.append("ImZ1bmN0aW9uIikgewogICAgICAgIC8vIGZhbGxiYWNrIHdoZW4gdGhlIGhpZ2ggbGV2ZWwgaXMgYSBm");
    sb.append("dW5jdGlvbiAod2UgbmVlZCBpdCBhbGwhKQogICAgICAgIHJldHVybiBtYWtlX2RlbHRhKHN0KTsKICAg");
    sb.append("ICAgfSBlbHNlIGlmICh0eXBlb2YocykgPT0gIm9iamVjdCIpIHsKICAgICAgICBmb3IgKHZhciBqIGlu");
    sb.append("IHMpIHsKICAgICAgICAgIGZpbHRlcltqXSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAg");
    sb.append("ICB2YXIgbmV3X3N0ID0ge307IC8vIHRoZSBkZWx0YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsg");
    sb.append("aW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhpbiB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09");
    sb.append("ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19rZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQog");
    sb.append("ICAgICBpZiAoayBpbiBmaWx0ZXIpIHsKICAgICAgICBuZXdfc3Rba10gPSBzdFtrXTsKICAgICAgICBp");
    sb.append("ZiAoKCIjIiArIGspIGluIHN0KSB7CiAgICAgICAgICBuZXdfc3RbIiMiICsga10gPSBzdFsiIyIgKyBr");
    sb.append("XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtYWtlX2RlbHRhKG5ld19zdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdWJzY3JpYmVfZGVsYXkgPSBbXTsKCiAgLy8gYHN1YnNjcmliZWAgdGhlIGdpdmVu");
    sb.append("IHN0cnVjdHVyYWwgY2FsbGJhY2sKICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykg");
    sb.append("ewogICAgdmFyIHN1YiA9IHt9OwogICAgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViKGNhbGxiYWNr");
    sb.append("LCBzdWIpOyAgLy8gdHJhbnNmb3JtIHRoZSBjYWxsYmFjayBpbnRvIGEgc2FmZSBjYWxsYmFjawogICAg");
    sb.append("dmFyIFMgPSAiIiArIGlkKys7IC8vIGNyZWF0ZSBhbiBpZCBmb3IgdGhlIHN1YnNjcmlwdGlvbgogICAg");
    sb.append("YWxsX3N1YnNjcmlwdGlvbnNbU10gPSBzdWI7IC8vIHJlY29yZCB0aGUgc3Vic2NyaXB0aW9uCiAgICBp");
    sb.append("ZiAodGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MpIHsKICAgICAgdmFyIHNtID0ge307CiAgICAgIHNtLnN1");
    sb.append("YiA9IHN1YjsKICAgICAgc20uYWJvcnRlZCA9IGZhbHNlOwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eS5wdXNoKHNtKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHNtLmFib3J0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIGRlbGV0ZSBhbGxfc3Vic2NyaXB0aW9uc1tTXTsKICAgICAgfTsKICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHZhciBkZWx0YSA9IG1ha2Vfb3B0aW1hbF9kZWx0YShyb290LCBbc3ViXSk7CiAgICAg");
    sb.append("IHZhciBldmVudHMgPSBbXTsKICAgICAgbWVyZ2Uoe30sIGRlbHRhLCBbc3ViXSwgZXZlbnRzLCB0cnVl");
    sb.append("KTsgLy8gZXhlY3V0ZSB0aGUgY2FsbGJhY2sgbm93IG9uIGEgY2FsbGJhY2sgb2YgYWxsIGRhdGEgdG8g");
    sb.append("ZmlyZSBldmVudHMgYW5kIGZpbGwgdGhlIHN1YnNjcmlwdGlvbiBvYmplY3QKICAgICAgZmlyZV9ldmVu");
    sb.append("dHMoZXZlbnRzKTsKICAgICAgaWYgKHRoaXMudXBkYXRlcyA+IDApIHsKICAgICAgICBzZXR0bGUoKTsK");
    sb.append("ICAgICAgfQogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyAvLyByZXR1cm4gYSBtZXRob2QgdG8gdW5z");
    sb.append("dWJzY3JpYmUKICAgICAgICBkZWxldGUgYWxsX3N1YnNjcmlwdGlvbnNbU107CiAgICAgIH07CiAgICB9");
    sb.append("CiAgfTsKCiAgdGhpcy5hZGRfb25fc2V0dGxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBp");
    sb.append("ZCA9IHNldHRsZUlkKys7CiAgICBzZXR0bGVtZW50c1tpZF0gPSBjYWxsYmFjazsKICB9Owp9");
    return sb.toString();
  }
  public static final String DEBUGGER = new String(Base64.getDecoder().decode(make_debugger()), StandardCharsets.UTF_8);
  private static String make_debugger() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIFRoZSBBbWF6aW5nIEludGVybmFsIERlYnVnZ2VyIGZvciBSeEhUTUwgQ29ubmVjdGlvbiAqLwpB");
    sb.append("ZGFtYS5EZWJ1Z2dlciA9IChmdW5jdGlvbigpIHsKICB2YXIgc2VsZiA9IHt9OwogIHNlbGYuc2hvd24g");
    sb.append("PSBmYWxzZTsKICB2YXIgY29ubmVjdGlvbnMgPSB7fTsKICB2YXIgY3VycmVudCA9IG51bGw7CgogIC8q");
    sb.append("KiBIZWxwZXIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCAqLwogIHZhciBudWtl");
    sb.append("ID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAg");
    sb.append("d2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0g");
    sb.append("cGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwoKICBzZWxmLnNlbmQgPSBmdW5jdGlvbihuYW1lLCBj");
    sb.append("aGFubmVsLCBtc2cpIHsKICAgIGNvbnNvbGUubG9nKCJbIiArIG5hbWUgKyAiXSBzZW5kOiAiICsgY2hh");
    sb.append("bm5lbCArICIgIiArIEpTT04uc3RyaW5naWZ5KG1zZykpOwogIH07CgogIC8qKiBIZWxwZXIgfCBjcmVh");
    sb.append("dGUgYSBzaW1wbGUgZWxlbWVudCB3aXRoIHRoZSBnaXZlbiBjb250ZW50IGFzIHRoZSBpbm5lckhUTUwg");
    sb.append("Ki8KICB2YXIgc2ltcGxlID0gZnVuY3Rpb24odGFnLCBjb250ZW50KSB7CiAgICB2YXIgZCA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQodGFnKTsKICAgIGQuaW5uZXJIVE1MID0gY29udGVudDsKICAgIHJldHVy");
    sb.append("biBkOwogIH0KCiAgdmFyIGJ1dHRvblN0eWxlID0gImJhY2tncm91bmQ6IzMzMzsgYm9yZGVyOiAxcHgg");
    sb.append("c29saWQgI2YwMDsgY29sb3I6I2ZmZjsgcGFkZGluZzozcHg7IG1hcmdpbjozcHg7IGJvcmRlci1yYWRp");
    sb.append("dXM6IDNweDsiOwogIHZhciBpbnB1dFN0eWxlID0gImJhY2tncm91bmQ6I2VlZTsgY29sb3I6IzAwMDsi");
    sb.append("OwogIHZhciBwbHVzU1ZHID0gIjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wi");
    sb.append("IGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0");
    sb.append("cm9rZT1cIiM3N2Q2NTZcIiBzdHlsZT1cIndpZHRoOjE4cHg7IGhlaWdodDoxOHB4O1wiPjxwYXRoIHN0");
    sb.append("cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGQ9XCJNMTIgOXY2");
    sb.append("bTMtM0g5bTEyIDBhOSA5IDAgMTEtMTggMCA5IDkgMCAwMTE4IDB6XCIgLz48L3N2Zz4iOwogIHZhciBt");
    sb.append("aW51c1NWRyA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwi");
    sb.append("bm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIj");
    sb.append("ZjAwXCIgc3R5bGU9XCJ3aWR0aDoxOHB4OyBoZWlnaHQ6MThweDtcIj48cGF0aCBzdHJva2UtbGluZWNh");
    sb.append("cD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTE1IDEySDltMTIgMGE5IDkg");
    sb.append("MCAxMS0xOCAwIDkgOSAwIDAxMTggMHpcIiAvPjwvc3ZnPiI7CgogIC8vIHdlIGFyZSBnb2luZyB0byBj");
    sb.append("cmVhdGUgYSBkb2N1bWVudAogIHZhciB2aWV3SnNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRp");
    sb.append("diIpOwogIHZhciB2aWV3Q2hhbm5lbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCiAg");
    sb.append("dmlld0pzb24uc3R5bGUgPSAiZm9udC1mYW1pbHk6IFwiSmV0QnJhaW5zIE1vbm9cIiwgc291cmNlLWNv");
    sb.append("ZGUtcHJvLCBNZW5sbywgTW9uYWNvLCBDb25zb2xhcywgbW9ub3NwYWNlOyBmb250LXNpemU6IDE0cHg7");
    sb.append("IGNvbG9yOiAjZmZmOyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB3aWR0aDoxMDAlIgogIHZpZXdDaGFu");
    sb.append("bmVscy5zdHlsZSA9ICJmb250LWZhbWlseTogXCJKZXRCcmFpbnMgTW9ub1wiLCBzb3VyY2UtY29kZS1w");
    sb.append("cm8sIE1lbmxvLCBNb25hY28sIENvbnNvbGFzLCBtb25vc3BhY2U7IGZvbnQtc2l6ZTogMTRweDsgY29s");
    sb.append("b3I6ICNmZmY7IGJhY2tncm91bmQtY29sb3I6ICMwMDA7IHdpZHRoOjEwMCUiCgogIC8qKiBSZWZsZWN0");
    sb.append("aW9uIHwgZ2l2ZW4gYSByZWZsZWN0ZWQgdHlwZSwgZXh0cmFjdCB0aGUgc3RydWN0dXJlIHR5cGUgKiov");
    sb.append("CiAgdmFyIGV4dHJhY3RTdHJ1Y3R1cmVUeXBlID0gZnVuY3Rpb24odHlwZSwgdHlwZXMpIHsKICAgIGlm");
    sb.append("ICh0eXBlLm5hdHVyZSA9PSAicmVhY3RpdmVfcmVmIiB8fCB0eXBlLm5hdHVyZSA9PSAibmF0aXZlX3Jl");
    sb.append("ZiIpIHsKICAgICAgcmV0dXJuIGV4dHJhY3RTdHJ1Y3R1cmVUeXBlKHR5cGVzW3R5cGUucmVmXSwgdHlw");
    sb.append("ZXMpOwogICAgfQogICAgaWYgKHR5cGUubmF0dXJlID09ICJyZWFjdGl2ZV9yZWNvcmQiIHx8IHR5cGUu");
    sb.append("bmF0dXJlID09ICJuYXRpdmVfbWVzc2FnZSIpIHsKICAgICAgcmV0dXJuIHR5cGU7CiAgICB9CiAgICBy");
    sb.append("ZXR1cm4gbnVsbDsKICB9CgogIC8qKiBUcmVlVmlldyB8IEdpdmVuIGEgdHlwZSAoYW5kIGEgdHlwZSBm");
    sb.append("b3Jlc3QpIGNyZWF0ZSBhICduYW1lZCcgZG9tIGVsZW1lbnQKICAgKiAgYWxvbmcgd2l0aCBhbiB1cGRh");
    sb.append("dGUgZGVsdGEuIFRoZSB1cGRhdGUgZGVsdGEgaXMgYSBmdW5jdGlvbmFsIChvciBzdHJ1Y3R1cmFsIGZ1");
    sb.append("bmN0aW9uYWwpCiAgICogIGNsb3N1cmUgdGhhdCB3aWxsIHVwZGF0ZSB0aGUgZG9tIGVsZW1lbnQgc3Vj");
    sb.append("aCB0aGF0IGl0IGNhbiBiZSBhdHRhY2hlZCB0byBhbiBBZGFtYSBUcmVlICovCiAgdmFyIGNvbnZlcnRU");
    sb.append("eXBlVG9Eb21EZWx0YSA9IGZ1bmN0aW9uKHR5cGUsIHR5cGVzKSB7CiAgICBpZiAodHlwZS5uYXR1cmUg");
    sb.append("PT0gInJlYWN0aXZlX3JlZiIgfHwgdHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV9yZWYiKSB7CiAgICAgIC8v");
    sb.append("IGdvIHRvIHRoZSBmb3Jlc3QgYW5kIHR1cm4gdGhlIHJlZiBpbnRvIGEgbWFuaWZlc3RlZCB0eXBlCiAg");
    sb.append("ICAgIHJldHVybiBjb252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZXNbdHlwZS5yZWZdLCB0eXBlcyk7CiAg");
    sb.append("ICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV9tYXliZSIgfHwgdHlwZS5uYXR1cmUgPT0g");
    sb.append("InJlYWN0aXZlX21heWJlIikgewogICAgICAvLyBhIG1heWJlIGlzIGp1c3QgYSB3cmFwcGVyIGFyb3Vu");
    sb.append("ZCBhbm90aGVyIHR5cGUgdGhhdCBjYW4gbnVsbCBvdXQKICAgICAgdmFyIGRvbSA9IGRvY3VtZW50LmNy");
    sb.append("ZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0");
    sb.append("YSh0eXBlLnR5cGUsIHR5cGVzKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBkb206IGRvbSwKICAgICAg");
    sb.append("ICBuYW1lOiAibWF5YmUmbHQ7IiArIHJlc3VsdC5uYW1lICsgIiZndDsiLAogICAgICAgIHVwZGF0ZTog");
    sb.append("W3Jlc3VsdC51cGRhdGUsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICBudWtlKGRvbSk7CiAgICAg");
    sb.append("ICAgICBpZiAodmFsdWUgPT0gbnVsbCkgewogICAgICAgICAgICBkb20uaW5uZXJIVE1MID0gIjxpPm51");
    sb.append("bGw8L2k+IjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvbS5hcHBlbmQocmVzdWx0LmRv");
    sb.append("bSk7CiAgICAgICAgICB9CiAgICAgICAgfV0KICAgICAgfTsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVy");
    sb.append("ZSA9PSAibmF0aXZlX2xpc3QiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfYXJyYXkiKSB7CiAgICAg");
    sb.append("IC8vIHRoaXMgaXMgdGhlIG1vc3QgY29tcGxleCB0eXBlIGFzIGl0IHJlcXVpcmVzIGEgZGlmZmVyZW50");
    sb.append("aWFsIHN0cnVjdHVyZS4KCiAgICAgIC8vIHdlIGNyZWF0ZSBhIGR1bW15IHRvIGdldCB0aGUgbmFtZSBv");
    sb.append("ZiB0aGUgdHlwZQogICAgICB2YXIgZHVtbXkgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZS50eXBl");
    sb.append("LCB0eXBlcyk7CgogICAgICAvLyBzbywgd2UgaGF2ZSB0d28gY29uc2lkZXJhdGlvbnMuIEZpcnN0LCBp");
    sb.append("cyB0aGlzIGEgbGlzdCBvZiBzdHJ1Y3R1cmVzIE9SIGEgbGlzdCBvZiB2YWx1ZXMuCiAgICAgIHZhciBy");
    sb.append("ZWNvcmRUeXBlID0gZXh0cmFjdFN0cnVjdHVyZVR5cGUodHlwZS50eXBlLCB0eXBlcyk7CiAgICAgIGlm");
    sb.append("IChyZWNvcmRUeXBlICE9IG51bGwpIHsKICAgICAgICAvLyBpdCBpcyBhIGxpc3Qgb2Ygc3RydWN0dXJl");
    sb.append("cywgc28gd2Ugd2FudCB0byBjcmVhdGUgYSBuaWNlIGxvb2tpbmcgdGFibGUgd2l0aCBwYWdpbmF0aW9u");
    sb.append("IQogICAgICAgIHZhciB0YWJsZUNvbnRyb2xzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIp");
    sb.append("OwogICAgICAgIHZhciBzaG93aGlkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwog");
    sb.append("ICAgICAgIHRhYmxlQ29udHJvbHMuYXBwZW5kKHNob3doaWRlKTsKCiAgICAgICAgdmFyIHRhYmxlSG9s");
    sb.append("ZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKTsKICAgICAgICB0YWJsZUNvbnRyb2xz");
    sb.append("LmFwcGVuZCh0YWJsZUhvbGRlcik7CiAgICAgICAgdmFyIHRhYmxlSGVhZGVyID0gZG9jdW1lbnQuY3Jl");
    sb.append("YXRlRWxlbWVudCgidGhlYWQiKTsKICAgICAgICB0YWJsZUhvbGRlci5hcHBlbmQodGFibGVIZWFkZXIp");
    sb.append("OwogICAgICAgIHZhciBoZWFkZXJSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpOwogICAg");
    sb.append("ICAgIHRhYmxlSG9sZGVyLmFwcGVuZChoZWFkZXJSb3cpOwogICAgICAgIHZhciBjb2xvclN0eWxlID0g");
    sb.append("ImJvcmRlcjogMXB4IHNvbGlkICMzYjU0ZGE7IjsKICAgICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4g");
    sb.append("cmVjb3JkVHlwZS5maWVsZHMpIHsKICAgICAgICAgIHZhciBmaWVsZCA9IHJlY29yZFR5cGUuZmllbGRz");
    sb.append("W2ZpZWxkTmFtZV07CiAgICAgICAgICBpZiAoInByaXZhdGUiID09IGZpZWxkLnByaXZhY3kpIHsKICAg");
    sb.append("ICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udmVy");
    sb.append("dFR5cGVUb0RvbURlbHRhKGZpZWxkLnR5cGUsIHR5cGVzKTsKICAgICAgICAgIHZhciB0ZCA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7CiAgICAgICAgICB0ZC5pbm5lckhUTUwgPSByZXN1bHQubmFt");
    sb.append("ZSArICIgIiArIGZpZWxkTmFtZTsKICAgICAgICAgIGhlYWRlclJvdy5hcHBlbmQodGQpOwogICAgICAg");
    sb.append("ICAgdGQuc3R5bGUgPSBjb2xvclN0eWxlICsgInBhZGRpbmctbGVmdDogMC41ZW07IHBhZGRpbmctcmln");
    sb.append("aHQ6IDAuNWVtOyIKICAgICAgICB9CiAgICAgICAgdGFibGVIb2xkZXIuc3R5bGUgPSBjb2xvclN0eWxl");
    sb.append("ICsgInBhZGRpbmc6IDAuNWVtOyBtYXJnaW46MC41ZW07IGRpc3BsYXk6bm9uZSIKICAgICAgICBoZWFk");
    sb.append("ZXJSb3cuc3R5bGUgPSBjb2xvclN0eWxlOwogICAgICAgIHZhciB0YWJsZUJvZHkgPSBkb2N1bWVudC5j");
    sb.append("cmVhdGVFbGVtZW50KCJ0Ym9keSIpOwogICAgICAgIHRhYmxlSG9sZGVyLmFwcGVuZCh0YWJsZUJvZHkp");
    sb.append("OwogICAgICAgIHZhciByb3dzQnlLZXkgPSB7fTsKICAgICAgICB2YXIgcGFnaW5nID0gewogICAgICAg");
    sb.append("ICAgc2hvd246ZmFsc2UsCiAgICAgICAgICBvcmRlcjpbXSwKICAgICAgICAgIHBhZ2U6IDAsCiAgICAg");
    sb.append("ICAgICBwYWdlX2xpbWl0OiAxMCwKICAgICAgICB9OwogICAgICAgIHZhciBjb250cm9sbGVyID0gZG9j");
    sb.append("dW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICAgIHRhYmxlQ29udHJvbHMuYXBwZW5kKGNv");
    sb.append("bnRyb2xsZXIpOwogICAgICAgIHBhZ2luZy5yZWZvcm0gPWZ1bmN0aW9uKCkgewogICAgICAgICAgbnVr");
    sb.append("ZSh0YWJsZUJvZHkpOwogICAgICAgICAgdmFyIHN0YXJ0ID0gTWF0aC5taW4odGhpcy5wYWdlICogdGhp");
    sb.append("cy5wYWdlX2xpbWl0LCB0aGlzLm9yZGVyLmxlbmd0aCAtIHRoaXMucGFnZV9saW1pdCk7CiAgICAgICAg");
    sb.append("ICBmb3IgKHZhciBhdCA9IHN0YXJ0OyBhdCA8IHN0YXJ0ICsgcGFnaW5nLnBhZ2VfbGltaXQ7IGF0Kysp");
    sb.append("IHsKICAgICAgICAgICAgdmFyIHJvdyA9IHJvd3NCeUtleVtwYWdpbmcub3JkZXJbYXRdXTsKICAgICAg");
    sb.append("ICAgICAgaWYgKHJvdykgewogICAgICAgICAgICAgIHRhYmxlQm9keS5hcHBlbmQocm93KTsKICAgICAg");
    sb.append("ICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbnVrZShjb250cm9sbGVyKTsKICAgICAgICAgIGlm");
    sb.append("ICh0aGlzLnNob3duKSB7CiAgICAgICAgICAgIHZhciBwYWdlcyA9IHRoaXMub3JkZXIubGVuZ3RoIC8g");
    sb.append("dGhpcy5wYWdlX2xpbWl0OwogICAgICAgICAgICBpZiAocGFnZXMgPiAxKSB7CiAgICAgICAgICAgICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBwYWdlczsgaysrKSB7CiAgICAgICAgICAgICAgICB2YXIgZ290b1Bh");
    sb.append("Z2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICAgICAgICAgIGdvdG9Q");
    sb.append("YWdlLnN0eWxlID0gYnV0dG9uU3R5bGU7CiAgICAgICAgICAgICAgICBnb3RvUGFnZS5pbm5lckhUTUwg");
    sb.append("PSAiW1BHOiIgKyBrICsgIl0iOwogICAgICAgICAgICAgICAgZ290b1BhZ2Uub25jbGljayA9IGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5wYWdpbmcucGFnZSA9IHRoaXMucGc7CiAgICAg");
    sb.append("ICAgICAgICAgICAgIHRoaXMucGFnaW5nLnJlZm9ybSgpOwogICAgICAgICAgICAgICAgfS5iaW5kKHtw");
    sb.append("YWdpbmc6IHRoaXMsIHBnOiBrfSk7CiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmFwcGVuZChnb3Rv");
    sb.append("UGFnZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBz");
    sb.append("aG93aGlkZS5pbm5lckhUTUwgPSB0aGlzLnNob3duID8gbWludXNTVkcgOiBwbHVzU1ZHOwogICAgICAg");
    sb.append("ICAgc2hvd2hpZGUub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB0aGlzLnNob3duID0g");
    sb.append("IXRoaXMuc2hvd247CiAgICAgICAgICAgIGlmICh0aGlzLnNob3duKSB7CiAgICAgICAgICAgICAgdGFi");
    sb.append("bGVIb2xkZXIuc3R5bGUuZGlzcGxheSA9ICIiOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg");
    sb.append("ICAgIHRhYmxlSG9sZGVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgIH0KICAgICAg");
    sb.append("ICAgICAgdGhpcy5yZWZvcm0oKTsKICAgICAgICAgIH0uYmluZCh0aGlzKTsKICAgICAgICB9LmJpbmQo");
    sb.append("cGFnaW5nKTsKCgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkb206IHRhYmxlQ29udHJvbHMsCiAg");
    sb.append("ICAgICAgICBuYW1lOiAibGlzdCZsdDsiICsgZHVtbXkubmFtZSArICImZ3Q7IiwKICAgICAgICAgIHVw");
    sb.append("ZGF0ZTogewogICAgICAgICAgICAnKyc6IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgICAgICB2YXIg");
    sb.append("cm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICAgICAgICByb3dzQnlLZXlb");
    sb.append("a2V5XSA9IHJvdzsKICAgICAgICAgICAgICB2YXIgZGVsdGEgPSB7fTsKICAgICAgICAgICAgICBmb3Ig");
    sb.append("KHZhciBmaWVsZE5hbWUgaW4gcmVjb3JkVHlwZS5maWVsZHMpIHsKICAgICAgICAgICAgICAgIHZhciBm");
    sb.append("aWVsZCA9IHJlY29yZFR5cGUuZmllbGRzW2ZpZWxkTmFtZV07CiAgICAgICAgICAgICAgICBpZiAoInBy");
    sb.append("aXZhdGUiID09IGZpZWxkLnByaXZhY3kpIHsKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAg");
    sb.append("ICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udmVydFR5cGVUb0RvbURl");
    sb.append("bHRhKGZpZWxkLnR5cGUsIHR5cGVzKTsKICAgICAgICAgICAgICAgIHZhciB0ZCA9IGRvY3VtZW50LmNy");
    sb.append("ZWF0ZUVsZW1lbnQoInRkIik7CiAgICAgICAgICAgICAgICB0ZC5zdHlsZSA9IGNvbG9yU3R5bGUgKyAi");
    sb.append("cGFkZGluZzogMC4yNWVtOyB0ZXh0LWFsaWduOnRvcCI7CiAgICAgICAgICAgICAgICB0ZC5hcHBlbmQo");
    sb.append("cmVzdWx0LmRvbSk7CiAgICAgICAgICAgICAgICByb3cuYXBwZW5kKHRkKTsKICAgICAgICAgICAgICAg");
    sb.append("IGRlbHRhW2ZpZWxkTmFtZV0gPSByZXN1bHQudXBkYXRlOwogICAgICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("ICAgICByZXR1cm4gZGVsdGE7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICctJzogZnVuY3Rpb24g");
    sb.append("KGtleSkgewogICAgICAgICAgICAgIHZhciBkb20gPSByb3dzQnlLZXlba2V5XTsKICAgICAgICAgICAg");
    sb.append("ICB0YWJsZUJvZHkucmVtb3ZlKGRvbSk7CiAgICAgICAgICAgICAgZGVsZXRlIHJvd3NCeUtleVtrZXld");
    sb.append("OwogICAgICAgICAgICB9LAogICAgICAgICAgICAnfic6IGZ1bmN0aW9uIChvcmRlcikgewogICAgICAg");
    sb.append("ICAgICAgIGlmIChvcmRlciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBwYWdpbmcub3JkZXIgPSBv");
    sb.append("cmRlcjsKICAgICAgICAgICAgICAgIHBhZ2luZy5yZWZvcm0oKTsKICAgICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbm90");
    sb.append("IGEgcmVjb3JkLCBzbyB3ZSB1c2UgYSBzaW1wbGUgbGlzdAogICAgICAgIHZhciBsaXN0SG9sZGVyID0g");
    sb.append("ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgdmFyIGRvbUJ5S2V5ID0ge307CiAg");
    sb.append("ICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRvbTogbGlzdEhvbGRlciwKICAgICAgICAgIG5hbWU6ICJs");
    sb.append("aXN0PCIgKyBkdW1teS5uYW1lICsgIj4iLAogICAgICAgICAgdXBkYXRlOiB7CiAgICAgICAgICAgICcr");
    sb.append("JzogZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgIHZhciBpdGVtSG9sZGVyID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICAgICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlw");
    sb.append("ZVRvRG9tRGVsdGEodHlwZS50eXBlLCB0eXBlcyk7CiAgICAgICAgICAgICAgaXRlbUhvbGRlci5hcHBl");
    sb.append("bmQocmVzdWx0LmRvbSk7CiAgICAgICAgICAgICAgaXRlbUhvbGRlci5hcHBlbmQoc2ltcGxlKCJzcGFu");
    sb.append("IiwgIiwgIikpOwogICAgICAgICAgICAgIGRvbUJ5S2V5W2tleV0gPSBpdGVtSG9sZGVyOwogICAgICAg");
    sb.append("ICAgICAgIHJldHVybiByZXN1bHQudXBkYXRlOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnLSc6");
    sb.append("IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgICAgICB2YXIgZG9tID0gZG9tQnlLZXlba2V5XTsKICAg");
    sb.append("ICAgICAgICAgICBsaXN0SG9sZGVyLnJlbW92ZShkb20pOwogICAgICAgICAgICAgIGRlbGV0ZSBkb21C");
    sb.append("eUtleVtrZXldOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnfic6IGZ1bmN0aW9uIChvcmRlcikg");
    sb.append("ewogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfQogICAgaWYg");
    sb.append("KHR5cGUubmF0dXJlID09ICJyZWFjdGl2ZV92YWx1ZSIgfHwgdHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV92");
    sb.append("YWx1ZSIpIHsKICAgICAgLy8gaXQncyBqdXN0IGRhdGEsIHNvIGNyZWF0ZSBhIHNpbmdsZSBub2RlIHRv");
    sb.append("IGRyYXcgaXQKICAgICAgdmFyIGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAg");
    sb.append("ICAgIGl0ZW0uaW5uZXJIVE1MID0gIm51bGwiOwogICAgICBpdGVtLnN0eWxlID0gImNvbG9yOiAjNzdh");
    sb.append("NWZmOyI7CiAgICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbih2YWx1ZSkgeyBpdGVtLmlubmVySFRNTCA9");
    sb.append("IHZhbHVlOyB9OwogICAgICBpZiAodHlwZS50eXBlID09ICJzdHJpbmciKSB7CiAgICAgICAgaXRlbS5z");
    sb.append("dHlsZSA9ICJjb2xvcjogIzc3ZDY1NiI7CiAgICAgICAgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsg");
    sb.append("aXRlbS5pbm5lckhUTUwgPSAiXCIiICsgdmFsdWUgKyAiXCIiOyB9OwogICAgICB9IGVsc2UgaWYgKHR5");
    sb.append("cGUudHlwZSA9PSAicHJpbmNpcGFsIikgewogICAgICAgIGl0ZW0uc3R5bGUgPSAiY29sb3I6ICNCQTgz");
    sb.append("RkY7IjsKICAgICAgICB1cGRhdGUgPSBmdW5jdGlvbih2YWx1ZSkgeyBpdGVtLmlubmVySFRNTCA9IHZh");
    sb.append("bHVlICE9IG51bGwgPyAodmFsdWUuYWdlbnQgKyAiQCIgKyB2YWx1ZS5hdXRob3JpdHkpIDogIm51bGwi");
    sb.append("OyB9OwogICAgICB9IGVsc2UgaWYgKHR5cGUudHlwZSA9PSAiYm9vbCIpIHsKICAgICAgICBpdGVtLnN0");
    sb.append("eWxlID0gImNvbG9yOiAjRTgzQjNCOyI7CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBkb206");
    sb.append("aXRlbSwKICAgICAgICBuYW1lOiB0eXBlLnR5cGUsCiAgICAgICAgdXBkYXRlOiB1cGRhdGUKICAgICAg");
    sb.append("fTsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAicmVhY3RpdmVfcmVjb3JkIiB8fCB0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIC8vIGl0J3MgYSBzdHJ1Y3R1cmUsIHNvIGxl");
    sb.append("dCdzIGNyZWF0ZSBhIHJlY29yZCB0aGF0IGNhbiBzaG93L2hpZGUKICAgICAgdmFyIG9ial9ob2xkZXIg");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICAgIHZhciBzaG93aGlkZSA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgICBvYmpfaG9sZGVyLmFwcGVuZChzaG93aGlk");
    sb.append("ZSk7CiAgICAgIG9ial9ob2xkZXIuc2hvd0dyb3VwID0gdHlwZS5uYW1lICE9ICJSb290IjsKCiAgICAg");
    sb.append("IHZhciBncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICBvYmpfaG9sZGVy");
    sb.append("LmFwcGVuZChncm91cCk7CiAgICAgIGdyb3VwLmFwcGVuZChzaW1wbGUoImRpdiIsICJ7IikpOwogICAg");
    sb.append("ICB2YXIgY2hpbGRyZW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ1bCIpOwogICAgICBncm91cC5h");
    sb.append("cHBlbmQoY2hpbGRyZW4pOwogICAgICBncm91cC5hcHBlbmQoc2ltcGxlKCJkaXYiLCAifSIpKTsKICAg");
    sb.append("ICAgZ3JvdXAuc3R5bGUgPSAicGFkZGluZy1sZWZ0OjEwcHgiOwogICAgICBjaGlsZHJlbi5zdHlsZSA9");
    sb.append("ICJwYWRkaW5nLWxlZnQ6MTBweDsiOwogICAgICBzaG93aGlkZS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7");
    sb.append("CiAgICAgICAgb2JqX2hvbGRlci5zaG93R3JvdXAgPSAhIG9ial9ob2xkZXIuc2hvd0dyb3VwOwogICAg");
    sb.append("ICAgIGlmIChvYmpfaG9sZGVyLnNob3dHcm91cCkgewogICAgICAgICAgZ3JvdXAuc3R5bGUuZGlzcGxh");
    sb.append("eSA9ICIiOwogICAgICAgICAgc2hvd2hpZGUuaW5uZXJIVE1MID0gbWludXNTVkc7CiAgICAgICAgfSBl");
    sb.append("bHNlIHsKICAgICAgICAgIGdyb3VwLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICBzaG93");
    sb.append("aGlkZS5pbm5lckhUTUwgPSBwbHVzU1ZHOwogICAgICAgIH0KICAgICAgfTsKICAgICAgc2hvd2hpZGUu");
    sb.append("b25jbGljaygpOwoKICAgICAgdmFyIGRlbHRhID0ge307CiAgICAgIGZvciAodmFyIGZpZWxkTmFtZSBp");
    sb.append("biB0eXBlLmZpZWxkcykgewogICAgICAgIHZhciBmaWVsZCA9IHR5cGUuZmllbGRzW2ZpZWxkTmFtZV07");
    sb.append("CiAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBmaWVsZC5wcml2YWN5KSB7CiAgICAgICAgICBjb250aW51");
    sb.append("ZTsKICAgICAgICB9CiAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShmaWVs");
    sb.append("ZC50eXBlLCB0eXBlcyk7CiAgICAgICAgdmFyIGZpZWxkRG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgibGkiKTsKICAgICAgICBmaWVsZERvbS5hcHBlbmQoc2ltcGxlKCJzcGFuIiwgIGZpZWxkLnByaXZh");
    sb.append("Y3kgKyAiICIgKyByZXN1bHQubmFtZSArICIgIiArIGZpZWxkTmFtZSArICIgPSAiKSk7CiAgICAgICAg");
    sb.append("ZmllbGREb20uYXBwZW5kKHJlc3VsdC5kb20pOwogICAgICAgIGNoaWxkcmVuLmFwcGVuZChmaWVsZERv");
    sb.append("bSk7CiAgICAgICAgZGVsdGFbZmllbGROYW1lXSA9IHJlc3VsdC51cGRhdGU7CiAgICAgIH0KICAgICAg");
    sb.append("cmV0dXJuIHsKICAgICAgICBkb206IG9ial9ob2xkZXIsCiAgICAgICAgbmFtZTogdHlwZS5uYW1lLAog");
    sb.append("ICAgICAgIHVwZGF0ZTpkZWx0YQogICAgICB9OwogICAgfQogICAgdmFyIHVua25vd24gPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHVua25vd24uaW5uZXJIVE1MID0gSlNPTi5zdHJpbmdp");
    sb.append("ZnkodHlwZSk7CiAgICByZXR1cm4ge2RvbTogdW5rbm93biwgdXBkYXRlOiBmdW5jdGlvbigpIHt9fTsK");
    sb.append("ICB9OwoKICBzZWxmLmZvcm1JZEdlbiA9IDA7CiAgdmFyIG5leHRGb3JtSWQgPSBmdW5jdGlvbigpIHsK");
    sb.append("ICAgIHNlbGYuZm9ybUlkR2VuKys7CiAgICByZXR1cm4gc2VsZi5mb3JtSWRHZW47CiAgfTsKICB2YXIg");
    sb.append("ZmlsbE91dEZvcm1Gb3JUeXBlID0gZnVuY3Rpb24oZG9tLCBuYW1lLCB0eXBlLCB0eXBlcykgewogICAg");
    sb.append("aWYgKHR5cGUubmF0dXJlID09ICJuYXRpdmVfcmVmIikgewogICAgICBmaWxsT3V0Rm9ybUZvclR5cGUo");
    sb.append("ZG9tLCBuYW1lLCB0eXBlc1t0eXBlLnJlZl0sIHR5cGVzKTsKICAgICAgcmV0dXJuOwogICAgfQogICAg");
    sb.append("aWYgKHR5cGUubmF0dXJlID09ICJuYXRpdmVfbWVzc2FnZSIpIHsKICAgICAgZm9yICh2YXIgZmllbGQg");
    sb.append("aW4gdHlwZS5maWVsZHMpIHsKICAgICAgICB2YXIgZmllbGRUeXBlID0gdHlwZS5maWVsZHNbZmllbGRd");
    sb.append("LnR5cGU7CiAgICAgICAgdmFyIGZpZWxkSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2");
    sb.append("Iik7CiAgICAgICAgZmlsbE91dEZvcm1Gb3JUeXBlKGZpZWxkSG9sZGVyLCBuYW1lID09ICIiID8gZmll");
    sb.append("bGQgOiAobmFtZSArICIuIiArIGZpZWxkKSwgZmllbGRUeXBlLCB0eXBlcyk7CiAgICAgICAgZG9tLmFw");
    sb.append("cGVuZChmaWVsZEhvbGRlcik7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHR5cGUu");
    sb.append("bmF0dXJlID09ICJuYXRpdmVfYXJyYXkiKSB7CiAgICAgIC8vIFRPRE8KICAgIH0KICAgIGlmICh0eXBl");
    sb.append("Lm5hdHVyZSA9PSAibmF0aXZlX21heWJlIikgewogICAgICB2YXIgbWF5YmVIb2xkZXIgPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgibGFiZWwiKTsKICAgICAgbGFiZWwuaW5uZXJIVE1MID0gImVuYWJsZSAiICsgbmFtZTsKICAg");
    sb.append("ICAgdmFyIGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgY2hl");
    sb.append("Y2tib3gudHlwZSA9ICJjaGVja2JveCI7CiAgICAgIGNoZWNrYm94LmlkID0gbmV4dEZvcm1JZCgpOwog");
    sb.append("ICAgICBjaGVja2JveC5uYW1lID0gIiI7CiAgICAgIGxhYmVsLmh0bWxGb3IgPSBjaGVja2JveC5pZDsK");
    sb.append("ICAgICAgdmFyIG1heWJlVmFsdWVSZWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAg");
    sb.append("ICAgdmFyIG1heWJlVmFsdWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgZmls");
    sb.append("bE91dEZvcm1Gb3JUeXBlKG1heWJlVmFsdWUsIG5hbWUsIHR5cGUudHlwZSwgdHlwZXMpOwogICAgICBt");
    sb.append("YXliZUhvbGRlci5hcHBlbmQobGFiZWwpOwogICAgICBtYXliZUhvbGRlci5hcHBlbmQoY2hlY2tib3gp");
    sb.append("OwogICAgICBtYXliZUhvbGRlci5hcHBlbmQobWF5YmVWYWx1ZVJlZik7CiAgICAgIGRvbS5hcHBlbmQo");
    sb.append("bWF5YmVIb2xkZXIpOwogICAgICBjaGVja2JveC5vbmNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAg");
    sb.append("IG51a2UobWF5YmVWYWx1ZVJlZik7CiAgICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHsKICAgICAg");
    sb.append("ICAgIG1heWJlVmFsdWVSZWYuYXBwZW5kKG1heWJlVmFsdWUpOwogICAgICAgIH0KICAgICAgfTsKICAg");
    sb.append("ICAgcmV0dXJuOwogICAgfQogICAgaWYgKHR5cGUubmF0dXJlID09ICJuYXRpdmVfdmFsdWUiKSB7CiAg");
    sb.append("ICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CiAgICAgIHZhciBp");
    sb.append("bnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgogICAgICBpbnB1dC5pZCA9ICJk");
    sb.append("ZWJ1Z2dlcl9mb3JtX2lkXyIgKyBuZXh0Rm9ybUlkKCk7CiAgICAgIGxhYmVsLmlubmVySFRNTCA9IG5h");
    sb.append("bWU7CiAgICAgIGlucHV0Lm5hbWUgPSBuYW1lOwogICAgICBpbnB1dC5zdHlsZSA9IGlucHV0U3R5bGU7");
    sb.append("CiAgICAgIGlucHV0LnR5cGUgPSAidGV4dCI7CiAgICAgIGxhYmVsLmZvckh0bWwgPSBpbnB1dC5pZDsK");
    sb.append("ICAgICAgZG9tLmFwcGVuZChsYWJlbCk7CiAgICAgIGRvbS5hcHBlbmQoaW5wdXQpOwogICAgICByZXR1");
    sb.append("cm47CiAgICB9CiAgICBkb20uaW5uZXJIVE1MID0gbmFtZSArICItLT4iICsgSlNPTi5zdHJpbmdpZnko");
    sb.append("dHlwZSk7CiAgfTsKCiAgdmFyIG1ha2VDaGFubmVsRGVidWdnZXIgPSBmdW5jdGlvbihjaGFubmVscywg");
    sb.append("dHlwZXMsIGNvbm5lY3Rpb24pIHsKICAgIHZhciBzZWxlY3RvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoInNlbGVjdCIpOwogICAgc2VsZWN0b3Iuc3R5bGUgPSAiYmFja2dyb3VuZDogIzMzMzsgY29sb3I6");
    sb.append("I2ZmZjsiOwogICAgdmlld0NoYW5uZWxzLmFwcGVuZChzZWxlY3Rvcik7CiAgICB2YXIgZm9ybUhvbGRl");
    sb.append("ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgdmlld0NoYW5uZWxzLmFwcGVuZChm");
    sb.append("b3JtSG9sZGVyKTsKICAgIHZhciBjaG9vc2UgPSBmdW5jdGlvbihjaGFubmVsKSB7CiAgICAgIG51a2Uo");
    sb.append("Zm9ybUhvbGRlcik7CiAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZm9ybSIp");
    sb.append("OwogICAgICBmb3JtSG9sZGVyLmFwcGVuZChmb3JtKTsKICAgICAgdmFyIHR5cGUgPSB0eXBlc1tjaGFu");
    sb.append("bmVsc1tjaGFubmVsXV07CiAgICAgIGZpbGxPdXRGb3JtRm9yVHlwZShmb3JtLCAiIiwgdHlwZSwgdHlw");
    sb.append("ZXMpOwoKICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwog");
    sb.append("ICAgICBidXR0b24uc3R5bGUgPSBidXR0b25TdHlsZTsKICAgICAgYnV0dG9uLm9uY2xpY2sgPSBmdW5j");
    sb.append("dGlvbihldmVudCkgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdmFyIG1l");
    sb.append("c3NhZ2UgPSBSeEhUTUwuQnVpbGRGb3JtT2JqZWN0KGZvcm0pOwogICAgICAgIGJ1dHRvbi5pbm5lckhU");
    sb.append("TUwgPSAiU2VuZGluZyI7CiAgICAgICAgY29uc29sZS5sb2coY2hhbm5lbCArICI6IiArIEpTT04uc3Ry");
    sb.append("aW5naWZ5KG1lc3NhZ2UpKTsKICAgICAgICBjb25uZWN0aW9uLnNlbmQoY2hhbm5lbCwgbWVzc2FnZSwg");
    sb.append("ewogICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGJ1dHRvbi5pbm5lckhU");
    sb.append("TUwgPSAiU3VjY2VzcyEgU2VuZCBBbm90aGVyISI7CiAgICAgICAgICB9LAogICAgICAgICAgZmFpbHVy");
    sb.append("ZTogZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAiW0ZhaWxl");
    sb.append("ZDoiICsgcmVhc29uICsgIl0sIFRyeSBBZ2FpbiI7CiAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICAg");
    sb.append("IH07CiAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAiU2VuZCI7CiAgICAgIGZvcm0uYXBwZW5kKGJ1dHRv");
    sb.append("bik7CiAgICAgIC8vIEJ1aWxkRm9ybU9iamVjdAogICAgfTsKICAgIHZhciBmaXJzdCA9IG51bGw7CiAg");
    sb.append("ICB2YXIgY2hhbm5lbHNTb3J0ZWQgPSBbXTsKICAgIGZvciAodmFyIGNoIGluIGNoYW5uZWxzKSB7CiAg");
    sb.append("ICAgIGNoYW5uZWxzU29ydGVkLnB1c2goY2gpOwogICAgfQogICAgY2hhbm5lbHNTb3J0ZWQuc29ydCgp");
    sb.append("OwogICAgZm9yICh2YXIgayBpbiBjaGFubmVsc1NvcnRlZCkgewogICAgICB2YXIgY2ggPSBjaGFubmVs");
    sb.append("c1NvcnRlZFtrXTsKICAgICAgaWYgKGZpcnN0ID09IG51bGwpIHsKICAgICAgICBmaXJzdCA9IGNoOwog");
    sb.append("ICAgICB9CiAgICAgIHZhciBtc2dUeXBlID0gY2hhbm5lbHNbY2hdOwogICAgICB2YXIgb3B0ID0gZG9j");
    sb.append("dW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CiAgICAgIG9wdC5pbm5lckhUTUwgPSBjaCArICIg");
    sb.append("OiAiICsgbXNnVHlwZTsKICAgICAgb3B0LmxhYmVsID0gY2ggKyAiIDogIiArIG1zZ1R5cGU7CiAgICAg");
    sb.append("IG9wdC52YWx1ZSA9IGNoOwogICAgICBzZWxlY3Rvci5hcHBlbmQob3B0KTsKICAgICAgc2VsZWN0b3Iu");
    sb.append("b25jaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBjaG9vc2Uoc2VsZWN0b3IudmFsdWUpOwogICAg");
    sb.append("ICB9OwogICAgfQoKICAgIGlmIChmaXJzdCAhPSBudWxsKSB7CiAgICAgIGNob29zZShmaXJzdCk7CiAg");
    sb.append("ICB9CiAgfTsKCiAgdmFyIHJlbmRlciA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHZhciBjbyA9IGNvbm5l");
    sb.append("Y3Rpb25zW25hbWVdOwogICAgaWYgKGNvLnJlbmRlcmVkID09IGNvLmJvdW5kKSB7CiAgICAgIHJldHVy");
    sb.append("bjsKICAgIH0KICAgIGNvLnJlbmRlcmVkID0gY28uYm91bmQ7CiAgICBjby5kZWJ1Z190cmVlLm51a2Uo");
    sb.append("KTsKICAgIG51a2Uodmlld0pzb24pOwogICAgbnVrZSh2aWV3Q2hhbm5lbHMpOwoKICAgIHZhciBoYW5k");
    sb.append("bGVyID0gewogICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgIC8vIGhhbmRs");
    sb.append("ZSB0aGUgZGF0YSBpbnNwZWN0b3IgdGFiCiAgICAgICAgdmFyIHJlZmxlY3Rpb24gPSBwYXlsb2FkLnJl");
    sb.append("ZmxlY3Rpb247CiAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShyZWZsZWN0");
    sb.append("aW9uLnR5cGVzWyJfX1Jvb3QiXSwgcmVmbGVjdGlvbi50eXBlcyk7CiAgICAgICAgdmlld0pzb24uYXBw");
    sb.append("ZW5kKHJlc3VsdC5kb20pOwogICAgICAgIGNvLmRlYnVnX3RyZWUuc3Vic2NyaWJlKHJlc3VsdC51cGRh");
    sb.append("dGUpOwogICAgICAgIC8vIGhhbmRsZSB0aGUgY2hhbm5lbHMgdGFiCiAgICAgICAgbWFrZUNoYW5uZWxE");
    sb.append("ZWJ1Z2dlcihyZWZsZWN0aW9uLmNoYW5uZWxzLCByZWZsZWN0aW9uLnR5cGVzLCBjby5wdHIpOwogICAg");
    sb.append("ICB9LAogICAgICBmYWlsdXJlOiBmdW5jdGlvbihyZWFzb24pIHsKICAgICAgICB2aWV3SnNvbi5pbm5l");
    sb.append("ckhUTUwgPSAiW0ZBSUxFRCBUTyBHRVQgU0NIRU1BOiIgKyByZWFzb24gKyAiXSI7CiAgICAgICAgdmll");
    sb.append("d0NoYW5uZWxzLmlubmVySFRNTCA9ICJbRkFJTEVEIFRPIEdFVCBTQ0hFTUE6IiArIHJlYXNvbiArICJd");
    sb.append("IjsKICAgICAgfQogICAgfTsKICAgIGlmIChjby52aWFfYmlsbGluZykgewogICAgICB2aWV3SnNvbi5p");
    sb.append("bm5lckhUTUwgPSAiQmlsaWxuZyBkb2N1bWVudCBub3Qgc3VwcG9ydGVkIjsKICAgICAgdmlld0NoYW5u");
    sb.append("ZWxzLmlubmVySFRNTCA9IHZpZXdKc29uLmlubmVySFRNTDsKICAgICAgcmV0dXJuOwogICAgfQogICAg");
    sb.append("aWYgKGNvLnZpYV9kb21haW4pIHsKICAgICAgY28ucmF3LkRvbWFpblJlZmxlY3QoY28uaWRlbnRpdHks");
    sb.append("IGNvLmRvbWFpbiwgaGFuZGxlcik7CiAgICB9IGVsc2UgewogICAgICBjby5yYXcuU3BhY2VSZWZsZWN0");
    sb.append("KGNvLmlkZW50aXR5LCBjby5zcGFjZSwgY28ua2V5LCBoYW5kbGVyKTsKICAgIH0KICB9OwoKICB2YXIg");
    sb.append("Y29ubmVjdGlvblNlbGVjdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7CiAgY29u");
    sb.append("bmVjdGlvblNlbGVjdG9yLnN0eWxlID0gImJhY2tncm91bmQ6ICMzMzM7IGNvbG9yOiAjZmZmIjsKICB2");
    sb.append("YXIgc3dpdGNoX3RvX2Nvbm5lY3Rpb24gPSBmdW5jdGlvbihuYW1lKSB7CiAgICBjdXJyZW50ID0gbmFt");
    sb.append("ZTsKICAgIG51a2Uodmlld0NoYW5uZWxzKTsKICAgIG51a2Uodmlld0pzb24pOwogICAgY29ubmVjdGlv");
    sb.append("bnNbbmFtZV0ucmVuZGVyZWQgPSAiIjsKICAgIHJlbmRlcihuYW1lKTsKICB9OwogIGNvbm5lY3Rpb25T");
    sb.append("ZWxlY3Rvci5vbmNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgc3dpdGNoX3RvX2Nvbm5lY3Rpb24oY29u");
    sb.append("bmVjdGlvblNlbGVjdG9yLnZhbHVlKTsKICB9OwogIHZhciByZWZyZXNoX3NlbGVjdCA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgbnVrZShjb25uZWN0aW9uU2VsZWN0b3IpOwogICAgZm9yICh2YXIgbmFtZSBpbiBjb25u");
    sb.append("ZWN0aW9ucykgewogICAgICB2YXIgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7");
    sb.append("CiAgICAgIG9wdC52YWx1ZSA9IG5hbWU7CiAgICAgIG9wdC5pbm5lclRleHQgPSBuYW1lOwogICAgICBj");
    sb.append("b25uZWN0aW9uU2VsZWN0b3IuYXBwZW5kQ2hpbGQob3B0KTsKICAgICAgaWYgKGN1cnJlbnQgPT0gbnVs");
    sb.append("bCkgewogICAgICAgIHN3aXRjaF90b19jb25uZWN0aW9uKG5hbWUpOwogICAgICAgIGNvbm5lY3Rpb25T");
    sb.append("ZWxlY3Rvci52YWx1ZSA9IG5hbWU7CiAgICAgIH0KICAgIH0KICB9OwoKICBzZWxmLnRvZ2dsZSA9IGZ1");
    sb.append("bmN0aW9uKCkgewogICAgaWYgKHNlbGYuc2hvd24pIHsKICAgICAgdHJ5IHsKICAgICAgICBkb2N1bWVu");
    sb.append("dC5ib2R5LnJlbW92ZUNoaWxkKHNlbGYucm9vdCk7CiAgICAgIH0gY2F0Y2ggKG5vdHByZXNlbnQpIHsK");
    sb.append("ICAgICAgICBzZWxmLnNob3duID0gIXNlbGYuc2hvd247CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBl");
    sb.append("bmQoc2VsZi5yb290KTsKICAgICAgfQogICAgfQogICAgZWxzZQogICAgewogICAgICBzZWxmLnJvb3Qg");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgZGVidWdnZXJQb3NpdGlvbiA9IGxv");
    sb.append("Y2FsU3RvcmFnZS5nZXRJdGVtKCJBZGFtYURlYnVnZ2VyUG9zaXRpb24iKTsKICAgICAgaWYgKCFkZWJ1");
    sb.append("Z2dlclBvc2l0aW9uIHx8IGRlYnVnZ2VyUG9zaXRpb24gPT0gIiIpIHsKICAgICAgICBkZWJ1Z2dlclBv");
    sb.append("c2l0aW9uID0gInRvcDowcHg7IGxlZnQ6MHB4O3dpZHRoOjgwMHB4O2hlaWdodDo2MDBweCI7CiAgICAg");
    sb.append("IH0KICAgICAgc2VsZi5yb290LnN0eWxlID0gInBvc2l0aW9uOmFic29sdXRlOyIgKyBkZWJ1Z2dlclBv");
    sb.append("c2l0aW9uICsgIjtiYWNrZ3JvdW5kOiAjMDAwO2JvcmRlcjoxcHggc29saWQgcmVkO3otaW5kZXg6MTAw");
    sb.append("MDsgb3ZlcmZsb3c6c2Nyb2xsIjsKICAgICAgdmFyIHRpdGxlQmFyID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICAgIHRpdGxlQmFyLmlubmVySFRNTCA9ICJBZGFtYSBEZWJ1Z2dlciI7CiAg");
    sb.append("ICAgIHRpdGxlQmFyLnN0eWxlID0gImJhY2tncm91bmQ6ICMyMjI7IGNvbG9yOiAjMGYwOyBjdXJzb3I6");
    sb.append("bW92ZTsgd2lkdGg6MTAwJTsgZm9udC12YXJpYW50OiBzbWFsbC1jYXBzOyBwYWRkaW5nOjJweDsgdGV4");
    sb.append("dC1hbGlnbjogY2VudGVyOyI7CiAgICAgIHRpdGxlQmFyLm9ubW91c2Vkb3duID0gZnVuY3Rpb24oZXYp");
    sb.append("IHsKICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciByZWN0ID0gc2VsZi5yb290");
    sb.append("LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIHZhciBzdGFydCA9IHt4OiBldi5jbGllbnRY");
    sb.append("LCB5OiBldi5jbGllbnRZfTsKICAgICAgICB2YXIgdXBkYXRlID0gZnVuY3Rpb24obngpIHsKICAgICAg");
    sb.append("ICAgIHNlbGYucm9vdC5zdHlsZS5sZWZ0ID0gKHJlY3QubGVmdCArIG54LmNsaWVudFggLSBzdGFydC54");
    sb.append("KSArICJweCI7CiAgICAgICAgICBzZWxmLnJvb3Quc3R5bGUudG9wID0gKHJlY3QudG9wICsgbnguY2xp");
    sb.append("ZW50WSAtIHN0YXJ0LnkpICsgInB4IjsKICAgICAgICB9OwogICAgICAgIHdpbmRvdy5vbm1vdXNlbW92");
    sb.append("ZSA9IGZ1bmN0aW9uKG54KSB7CiAgICAgICAgICB1cGRhdGUobngpOwogICAgICAgICAgbG9jYWxTdG9y");
    sb.append("YWdlLnNldEl0ZW0oIkFkYW1hRGVidWdnZXJQb3NpdGlvbiIsICJ0b3A6IitzZWxmLnJvb3Quc3R5bGUu");
    sb.append("dG9wKyI7IGxlZnQ6IitzZWxmLnJvb3Quc3R5bGUubGVmdCsiO3dpZHRoOjgwMHB4O2hlaWdodDo2MDBw");
    sb.append("eCIpOwogICAgICAgIH07CiAgICAgICAgd2luZG93Lm9ubW91c2V1cCA9IGZ1bmN0aW9uKG54KSB7CiAg");
    sb.append("ICAgICAgICB1cGRhdGUobngpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIkFkYW1hRGVi");
    sb.append("dWdnZXJQb3NpdGlvbiIsICJ0b3A6IitzZWxmLnJvb3Quc3R5bGUudG9wKyI7IGxlZnQ6IitzZWxmLnJv");
    sb.append("b3Quc3R5bGUubGVmdCsiO3dpZHRoOjgwMHB4O2hlaWdodDo2MDBweCIpOwogICAgICAgICAgd2luZG93");
    sb.append("Lm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24oKSB7fTsKICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBm");
    sb.append("dW5jdGlvbigpIHt9OwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAg");
    sb.append("IHNlbGYucm9vdC5hcHBlbmRDaGlsZCh0aXRsZUJhcik7CiAgICAgIHNlbGYucm9vdC5hcHBlbmRDaGls");
    sb.append("ZChjb25uZWN0aW9uU2VsZWN0b3IpOwogICAgICBzZWxmLnJvb3QuYXBwZW5kQ2hpbGQodmlld0pzb24p");
    sb.append("OwogICAgICBzZWxmLnJvb3QuYXBwZW5kQ2hpbGQodmlld0NoYW5uZWxzKTsKICAgICAgZG9jdW1lbnQu");
    sb.append("Ym9keS5hcHBlbmRDaGlsZChzZWxmLnJvb3QpOwogICAgfQogICAgc2VsZi5zaG93biA9ICFzZWxmLnNo");
    sb.append("b3duOwogIH07CgogIHNlbGYucmVnaXN0ZXIgPSBmdW5jdGlvbihjb25uZWN0aW9uKSB7CiAgICBjb25u");
    sb.append("ZWN0aW9uc1tjb25uZWN0aW9uLm5hbWVdID0gY29ubmVjdGlvbjsKICAgIGNvbm5lY3Rpb24uZGVidWdf");
    sb.append("dHJlZSA9IG5ldyBBZGFtYVRyZWUoKTsKICAgIGNvbm5lY3Rpb24uZGVidWdnaW5nID0gIj8iOwogICAg");
    sb.append("cmVmcmVzaF9zZWxlY3QoKTsKICAgIHJldHVybiBmdW5jdGlvbihwYXlsb2FkKSB7CiAgICAgIGlmIChj");
    sb.append("b25uZWN0aW9uLmJvdW5kICE9IGNvbm5lY3Rpb24uZGVidWdnaW5nICYmIGN1cnJlbnQgPT0gY29ubmVj");
    sb.append("dGlvbi5uYW1lKSB7CiAgICAgICAgcmVuZGVyKGNvbm5lY3Rpb24ubmFtZSk7CiAgICAgIH0KICAgICAg");
    sb.append("aWYgKCJkYXRhIiBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgY29ubmVjdGlvbi5kZWJ1Z190cmVl");
    sb.append("LnVwZGF0ZShwYXlsb2FkLmRlbHRhLmRhdGEpOwogICAgICB9CiAgICAgIC8qCiAgICAgIGlmICgib3V0");
    sb.append("c3RhbmRpbmciIGluIHBheWxvYWQuZGVsdGEpIHsKLy8gICAgICAgIGNvLm9uZGVjaWRlKHBheWxvYWQu");
    sb.append("ZGVsdGEub3V0c3RhbmRpbmcpOwogICAgICB9CiAgICAgIGlmICgndmlld3N0YXRlJyBpbiBwYXlsb2Fk");
    sb.append("LmRlbHRhKSB7Ci8vICAgICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHBheWxvYWQuZGVsdGEudmll");
    sb.append("d3N0YXRlKTsKICAgICAgfQogICAgICBpZiAoJ2dvdG8nIGluIHBheWxvYWQuZGVsdGEpIHsKLy8gICAg");
    sb.append("ICAgIHNlbGYuZ290byhwYXlsb2FkLmRlbHRhLmdvdG8pOwogICAgICB9CiAgICAgICovCiAgICB9CiAg");
    sb.append("fTsKICByZXR1cm4gc2VsZjsKfSkoKTs=");
    return sb.toString();
  }
  public static final String RXHTML = new String(Base64.getDecoder().decode(make_rxhtml()), StandardCharsets.UTF_8);
  private static String make_rxhtml() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIFJ4SFRNTCA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB7fTsKCiAgdmFyIHRlbXBsYXRl");
    sb.append("cyA9IHt9OwogIHZhciByb3V0ZXIgPSB7fTsKICBzZWxmLl9pbmZsaWdodCA9IDA7CgogIHZhciBkZWZh");
    sb.append("dWx0RW5kcG9pbnQgPSAvKkVORFBPSU5UPVsqL0FkYW1hLlByb2R1Y3Rpb24vKl0qLzsKCiAgLy8gb3Zl");
    sb.append("cnJpZGUgZW5kcG9pbnQgYmFzZWQgb24gdGhlIHByZXNlbmNlIG9mIF9fbWRfZW5kcG9pbnQKICB2YXIg");
    sb.append("bWRPdmVycmlkZUVuZHBvaW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm1kZWMiKTsgLy8gbXVsdGkg");
    sb.append("ZG9tYWluIGVuZHBvaW50IGNob2ljZQogIGlmIChtZE92ZXJyaWRlRW5kcG9pbnQgIT0gbnVsbCAmJiAi");
    sb.append("YmV0YSIgPT0gbWRPdmVycmlkZUVuZHBvaW50KSB7CiAgICBkZWZhdWx0RW5kcG9pbnQgPSBBZGFtYS5C");
    sb.append("ZXRhOwogIH0KCiAgLy8gVGhpcyBzdHJhbmdlIGVzY2FwaW5nIGlzIGZvciBkZXZlbG9wZXIgbW9kZSB0");
    sb.append("byBwcm94eSB0byBsb2NhbGhvc3QuCiAgdmFyIGNvbm5lY3Rpb24gPSBuZXcgQWRhbWEuQ29ubmVjdGlv");
    sb.append("bihkZWZhdWx0RW5kcG9pbnQpOwogIHZhciBjb25uZWN0aW9ucyA9IHt9OwogIHNlbGYuY29ubmVjdGlv");
    sb.append("biA9IGNvbm5lY3Rpb247CiAgc2VsZi5idW1wID0gZnVuY3Rpb24obSkgewogICAgY29ubmVjdGlvbi5i");
    sb.append("dW1wKG0pOwogIH07CgogIHZhciBjb25uZWN0aW9uTW9uaXRvckRvbSA9IGRvY3VtZW50LmNyZWF0ZUVs");
    sb.append("ZW1lbnQoImRpdiIpOwogIGNvbm5lY3Rpb24ub25zdGF0dXNjaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdHVz");
    sb.append("KSB7CiAgICB2YXIgaWNvbiA9IGZ1bmN0aW9uIChjb2xvcikgeyByZXR1cm4gIjxzdmcgeG1sbnM9XCJo");
    sb.append("dHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAy");
    sb.append("NFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZT1cIiIgKyBjb2xvciArICJcIiBzdHlsZT1cIndp");
    sb.append("ZHRoOjE2cHg7IGhlaWdodDoxNnB4XCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9r");
    sb.append("ZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk04LjI4OCAxNS4wMzhhNS4yNSA1LjI1IDAgMDE3LjQyNCAw");
    sb.append("TTUuMTA2IDExLjg1NmMzLjgwNy0zLjgwOCA5Ljk4LTMuODA4IDEzLjc4OCAwTTEuOTI0IDguNjc0YzUu");
    sb.append("NTY1LTUuNTY1IDE0LjU4Ny01LjU2NSAyMC4xNTIgME0xMi41MyAxOC4yMmwtLjUzLjUzLS41My0uNTNh");
    sb.append("Ljc1Ljc1IDAgMDExLjA2IDB6XCIgLz48L3N2Zz5cbiI7IH07CiAgICBpZiAoIXN0YXR1cykgewogICAg");
    sb.append("ICBjb25uZWN0aW9uTW9uaXRvckRvbS50aXRsZSA9ICJkaXNjb25uZWN0ZWQiOwogICAgICBjb25uZWN0");
    sb.append("aW9uTW9uaXRvckRvbS5pbm5lckhUTUwgPSBpY29uKCJyZWQiKTsKICAgICAgY29ubmVjdGlvbi5vbnBp");
    sb.append("bmcgPSBmdW5jdGlvbiAoXzEsIF8yKSB7IH07CiAgICB9IGVsc2UgewogICAgICBjb25uZWN0aW9uLm9u");
    sb.append("cGluZyA9IGZ1bmN0aW9uIChfLCBsYXRlbmN5KSB7CiAgICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20u");
    sb.append("dGl0bGUgPSAiY29ubmVjdGVkOyBsYXRlbmN5PSIgKyBsYXRlbmN5ICsgIm1zIjsKICAgICAgICBpZiAo");
    sb.append("bGF0ZW5jeSA+PSAxMDApIHsKICAgICAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmlubmVySFRNTCA9");
    sb.append("IGljb24oIm9yYW5nZSIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25uZWN0aW9uTW9uaXRv");
    sb.append("ckRvbS5pbm5lckhUTUwgPSBpY29uKCJncmVlbiIpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9");
    sb.append("OwogIGNvbm5lY3Rpb25Nb25pdG9yRG9tLnN0eWxlID0gInBvc2l0aW9uOmZpeGVkOyBib3R0b206MHB4");
    sb.append("OyByaWdodDowcHgiOwogIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmNsYXNzTmFtZSA9ICJhZGFtYS1kZWJ1");
    sb.append("Z2dlciIKICBpZiAoQWRhbWEuRGVidWdnZXIpIHsKICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLm9uY2xp");
    sb.append("Y2sgPSBBZGFtYS5EZWJ1Z2dlci50b2dnbGU7CiAgfQogIGNvbm5lY3Rpb24uc3RhcnQoKTsKICBjb25u");
    sb.append("ZWN0aW9uLmtlZXBhbGl2ZSgpOwoKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5j");
    sb.append("dGlvbihldmVudCkgewogICAgdmFyIHBheWxvYWQgPSB7fTsKICAgIHBheWxvYWQubWVzc2FnZSA9IGV2");
    sb.append("ZW50Lm1lc3NhZ2U7CiAgICBwYXlsb2FkLmZpbGVuYW1lID0gZXZlbnQuZmlsZW5hbWU7CiAgICBwYXls");
    sb.append("b2FkLmxpbmVubyA9IGV2ZW50LmxpbmVubzsKICAgIHBheWxvYWQuY29sbm8gPSBldmVudC5jb2xubzsK");
    sb.append("ICAgIHBheWxvYWQuZmlsZW5hbWUgPSBldmVudC5maWxlbmFtZTsKICAgIGNvbm5lY3Rpb24ubG9nKCJ3");
    sb.append("aW5kb3cuZXJyb3IiLCBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSk7CiAgICBjb25zb2xlLmVycm9yKCJb");
    sb.append("ZXJyb3JdIiArIGV2ZW50Lm1lc3NhZ2UpOwogIH0pOwoKICBjb25uZWN0aW9uLmJ1bXAoInJ4aHRtbCIp");
    sb.append("OwoKICB2YXIgcm9vdFJlcGxhY2UgPSAiLyI7CiAgdmFyIGZpeFBhdGggPSBmdW5jdGlvbiAocGF0aCkg");
    sb.append("ewogICAgcmV0dXJuIHBhdGg7CiAgfTsKICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmVuZHNX");
    sb.append("aXRoKCIuYWRhbWEtcGxhdGZvcm0uY29tIikgJiYgIXdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5lbmRz");
    sb.append("V2l0aCgiaWRlLmFkYW1hLXBsYXRmb3JtLmNvbSIpKSB7CiAgICAvLyB0aGlzIGV4aXN0cyBpZiBzb21l");
    sb.append("b25lIGlzIHRyeWluZyB0byB1c2UgdGhlIGdsb2JhbCBkb21haW4gZm9yIHRoZWlyIHNpdGUKICAgIHZh");
    sb.append("ciBwYXJ0cyA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgiLyIpOwogICAgcm9vdFJlcGxh");
    sb.append("Y2UgPSBbcGFydHNbMF0sIHBhcnRzWzFdLCBwYXJ0c1syXSwgIiJdLmpvaW4oIi8iKTsKICAgIHZhciBv");
    sb.append("ZmZzZXQgPSBwYXJ0c1swXS5sZW5ndGggKyBwYXJ0c1sxXS5sZW5ndGggKyBwYXJ0c1syXS5sZW5ndGgg");
    sb.append("KyAyOwogICAgZml4UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgIHJldHVybiBwYXRoLnN1YnN0");
    sb.append("cmluZyhvZmZzZXQpOwogICAgfTsKICB9CgogIHZhciBmaXhIcmVmID0gZnVuY3Rpb24gKGhyZWYpIHsK");
    sb.append("ICAgIGlmICghaHJlZikgewogICAgICByZXR1cm4gIiMiOwogICAgfQogICAgaWYgKGhyZWYuc3RhcnRz");
    sb.append("V2l0aCgiLyIpKSB7CiAgICAgIHJldHVybiByb290UmVwbGFjZSArIGhyZWYuc3Vic3RyaW5nKDEpOwog");
    sb.append("ICAgfQogICAgcmV0dXJuIGhyZWY7CiAgfTsKCiAgdmFyIGdldF9jb25uZWN0aW9uX29iaiA9IGZ1bmN0");
    sb.append("aW9uIChuYW1lKSB7CiAgICBpZiAobmFtZSBpbiBjb25uZWN0aW9ucykgewogICAgICByZXR1cm4gY29u");
    sb.append("bmVjdGlvbnNbbmFtZV07CiAgICB9IGVsc2UgewogICAgICB2YXIgb2JqID0gewogICAgICAgIG5hbWU6");
    sb.append("IG5hbWUsCiAgICAgICAgcHRyOiBudWxsLAogICAgICAgIHRyZWU6IG5ldyBBZGFtYVRyZWUoKSwKICAg");
    sb.append("ICAgICBvdXRzdGFuZGluZzoge30sCiAgICAgICAgZGVjaXNpb25zOiB7fSwKICAgICAgICBjaG9pY2Vf");
    sb.append("c3Viczoge30sCiAgICAgICAgcmVzZXRzOiB7fSwKICAgICAgICBjb25uZWN0aW9uX2V2ZW50czoge30s");
    sb.append("CiAgICAgICAgc3luY19ldmVudHM6IHt9LAogICAgICAgIGlkOiAwLAogICAgICAgIGNvbm5lY3Rpb25f");
    sb.append("c3RhdGU6IGZhbHNlLAogICAgICAgIGNob2ljZXM6IHt9LAogICAgICAgIGJvdW5kOiAiIiwKICAgICAg");
    sb.append("ICB2aWV3c3RhdGVfc2VudDogdHJ1ZSwKICAgICAgICB2aWV3c3RhdGVfY2xvbmU6ICIiLAogICAgICAg");
    sb.append("IGhhc19maWx0ZXI6IGZhbHNlLAogICAgICAgIHN5bmNlZDogZmFsc2UsCiAgICAgICAgZmlsdGVyOiB7");
    sb.append("fSwKICAgICAgICB2c3NlcTogMCwKICAgICAgICBkZWJ1Z2dlcjogZnVuY3Rpb24gKGRlbHRhKSB7IH0s");
    sb.append("CiAgICAgICAgcmF3OiBjb25uZWN0aW9uCiAgICAgIH07CiAgICAgIG9iai5udWtlID0gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgIHRoaXMuY29ubmVjdGlvbl9ldmVudHMgPSB7fTsKICAgICAgICB0aGlzLnN5bmNf");
    sb.append("ZXZlbnRzID0ge307CiAgICAgICAgdGhpcy5jaG9pY2Vfc3VicyA9IHt9OwogICAgICB9LmJpbmQob2Jq");
    sb.append("KTsKICAgICAgaWYgKEFkYW1hLkRlYnVnZ2VyKSB7CiAgICAgICAgb2JqLmRlYnVnZ2VyID0gQWRhbWEu");
    sb.append("RGVidWdnZXIucmVnaXN0ZXIob2JqKTsKICAgICAgfQogICAgICBvYmouc3luYyA9IGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgICB2YXIgc3luY2VkID0gdGhpcy5jb25uZWN0aW9uX3N0YXRlICYmIHRoaXMudmlld3N0");
    sb.append("YXRlX3NlbnQ7CiAgICAgICAgaWYgKHRoaXMuc3luY2VkID09IHN5bmNlZCkgewogICAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLnN5bmNlZCA9IHN5bmNlZDsKICAgICAgICB2YXIgYXhl");
    sb.append("ID0gW107CiAgICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5zeW5jX2V2ZW50cykgewogICAgICAgICAg");
    sb.append("aWYgKCEob2JqLnN5bmNfZXZlbnRzW3N1Yl0oc3luY2VkKSkpIHsKICAgICAgICAgICAgYXhlLnB1c2go");
    sb.append("c3ViKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUu");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0ZSBvYmouc3luY19ldmVudHNbYXhlW2tdXTsKICAg");
    sb.append("ICAgICB9CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vic2NyaWJlX3N5bmMgPSBmdW5jdGlv");
    sb.append("biAoY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9ICItfCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhp");
    sb.append("cy5zeW5jX2V2ZW50c1tzXSA9IGNhbGxiYWNrOwogICAgICAgIGNhbGxiYWNrKHRoaXMuc3luY2VkKTsK");
    sb.append("ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGVsZXRlIHRoaXMuc3luY19ldmVu");
    sb.append("dHNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9OwogICAgICBvYmouc2V0X2Nvbm5lY3Rl");
    sb.append("ZCA9IGZ1bmN0aW9uIChjcykgewogICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25fc3RhdGUgPT0gY3Mp");
    sb.append("IHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5jb25uZWN0aW9uX3N0YXRl");
    sb.append("ID0gY3M7CiAgICAgICAgdmFyIGF4ZSA9IFtdOwogICAgICAgIGZvciAodmFyIHN1YiBpbiBvYmouY29u");
    sb.append("bmVjdGlvbl9ldmVudHMpIHsKICAgICAgICAgIGlmICghKG9iai5jb25uZWN0aW9uX2V2ZW50c1tzdWJd");
    sb.append("KGNzKSkpIHsKICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAgICAgICAgIH0KICAgICAgICB9CiAg");
    sb.append("ICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0");
    sb.append("ZSBvYmouY29ubmVjdGlvbl9ldmVudHNbYXhlW2tdXTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zeW5j");
    sb.append("KCk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouY29ubmVjdGVkID0gZnVuY3Rpb24gKGNhbGxi");
    sb.append("YWNrKSB7CiAgICAgICAgdmFyIHMgPSAiLXwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMuY29ubmVj");
    sb.append("dGlvbl9ldmVudHNbc10gPSBjYWxsYmFjazsKICAgICAgICBjYWxsYmFjayh0aGlzLmNvbm5lY3Rpb25f");
    sb.append("c3RhdGUpOwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5j");
    sb.append("b25uZWN0aW9uX2V2ZW50c1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH0uYmluZChvYmop");
    sb.append("OwogICAgICBvYmouc3Vic2NyaWJlX2FueSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHZh");
    sb.append("ciBzID0gIi18IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLmRlY2lzaW9uc1tzXSA9IGNhbGxiYWNr");
    sb.append("OwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5kZWNpc2lv");
    sb.append("bnNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1");
    sb.append("YnNjcmliZSA9IGZ1bmN0aW9uIChjaGFubmVsLCBjYWxsYmFjaykgewogICAgICAgIHZhciBzID0gY2hh");
    sb.append("bm5lbCArICJ8IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLmRlY2lzaW9uc1tzXSA9IGNhbGxiYWNr");
    sb.append("OwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5kZWNpc2lv");
    sb.append("bnNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1");
    sb.append("YnNjcmliZV9yZXNldCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHZhciBkciA9ICJyZXNl");
    sb.append("dHwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMucmVzZXRzW2RyXSA9IGNhbGxiYWNrOwogICAgICAg");
    sb.append("IHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5yZXNldHNbZHJdOwogICAg");
    sb.append("ICAgIH0uYmluZCh0aGlzKTsKICAgICAgfS5iaW5kKG9iaik7CiAgICAgIG9iai5zdWJzY3JpYmVfY2hv");
    sb.append("aWNlID0gZnVuY3Rpb24gKGNoYW5uZWwsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSBjaGFubmVs");
    sb.append("ICsgInwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMuY2hvaWNlX3N1YnNbc10gPSBjYWxsYmFjazsK");
    sb.append("ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGVsZXRlIHRoaXMuY2hvaWNlX3N1");
    sb.append("YnNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLm9u");
    sb.append("Y2hvaWNlcyA9IGZ1bmN0aW9uIChjaGFubmVsLCBjaG9pY2UpIHsKICAgICAgICB2YXIgYXhlID0gW107");
    sb.append("CiAgICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5jaG9pY2Vfc3VicykgewogICAgICAgICAgaWYgKHN1");
    sb.append("Yi5zdGFydHNXaXRoKGNoYW5uZWwgKyAifCIpKSB7CiAgICAgICAgICAgIGlmICghb2JqLmNob2ljZV9z");
    sb.append("dWJzW3N1Yl0oY2hvaWNlKSkgewogICAgICAgICAgICAgIGF4ZS5wdXNoKHN1Yik7CiAgICAgICAgICAg");
    sb.append("IH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVu");
    sb.append("Z3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0ZSBvYmouY2hvaWNlX3N1YnNbYXhlW2tdXTsKICAgICAg");
    sb.append("ICB9CiAgICAgIH07CiAgICAgIG9iai5vbmRlY2lkZSA9IGZ1bmN0aW9uIChvdXRzdGFuZGluZykgewog");
    sb.append("ICAgICAgIHZhciBheGVSZXNldCA9IFtdOwogICAgICAgIGZvciAodmFyIGRyIGluIG9iai5yZXNldHMp");
    sb.append("IHsKICAgICAgICAgIHZhciByID0gb2JqLnJlc2V0c1tkcl07CiAgICAgICAgICBpZiAoIShyKCkpKSB7");
    sb.append("CiAgICAgICAgICAgIGF4ZVJlc2V0LnB1c2goZHIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAg");
    sb.append("ICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZVJlc2V0Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBkZWxl");
    sb.append("dGUgb2JqLnJlc2V0c1theGVSZXNldFtrXV07CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGNoIGlu");
    sb.append("IG9iai5vdXRzdGFuZGluZykgewogICAgICAgICAgb2JqLm91dHN0YW5kaW5nW2NoXSA9IHsgb3B0aW9u");
    sb.append("czogW10gfTsKICAgICAgICB9CiAgICAgICAgdmFyIG4gPSBvdXRzdGFuZGluZy5sZW5ndGg7CiAgICAg");
    sb.append("ICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAgIHZhciBvID0gb3V0c3RhbmRp");
    sb.append("bmdba107CiAgICAgICAgICBvYmoub3V0c3RhbmRpbmdbby5jaGFubmVsXSA9IG87CiAgICAgICAgfQog");
    sb.append("ICAgICAgIGZvciAodmFyIGNoIGluIG9iai5vdXRzdGFuZGluZykgewogICAgICAgICAgdmFyIG91dCA9");
    sb.append("IG9iai5vdXRzdGFuZGluZ1tjaF07CiAgICAgICAgICB2YXIgYXhlID0gW107CiAgICAgICAgICBmb3Ig");
    sb.append("KHZhciBzdWIgaW4gb2JqLmRlY2lzaW9ucykgewogICAgICAgICAgICBpZiAoc3ViLnN0YXJ0c1dpdGgo");
    sb.append("Y2ggKyAifCIpIHx8IHN1Yi5zdGFydHNXaXRoKCItfCIpKSB7CiAgICAgICAgICAgICAgaWYgKCFvYmou");
    sb.append("ZGVjaXNpb25zW3N1Yl0ob3V0LCBjaCkpIHsKICAgICAgICAgICAgICAgIGF4ZS5wdXNoKHN1Yik7CiAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciBr");
    sb.append("ID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAgICBkZWxldGUgb2JqLmRlY2lzaW9u");
    sb.append("c1theGVba11dOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgY29ubmVjdGlvbnNb");
    sb.append("bmFtZV0gPSBvYmo7CiAgICAgIHJldHVybiBvYmo7CiAgICB9CiAgfTsKICBzZWxmLmdldENvbm5lY3Rp");
    sb.append("b25CeU5hbWUgPSBnZXRfY29ubmVjdGlvbl9vYmo7CgogIHNlbGYubWFrZSA9IGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgIHJldHVybiBuZXcgQWRhbWFUcmVlKCk7CiAgfTsKCiAgLy8gSEVMUEVSIHwgc3Vic2NyaWJlIHRo");
    sb.append("ZSBnaXZlbiAnc3ViJyB0byBjaGFuZ2VzIHdpdGhpbiBzdGF0ZSBmb3IgdGhlIGdpdmVuIGZpZWxkIG5h");
    sb.append("bWVkIG5hbWUKICB2YXIgc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCBzdWIpIHsKICAg");
    sb.append("IHZhciBzcyA9IHNlbGYucEkoc3RhdGUsIG5hbWUpOwogICAgdmFyIHMgPSBzc1tzcy5jdXJyZW50XTsK");
    sb.append("ICAgIGlmIChzID09IG51bGwpIHsKICAgICAgY29uc29sZS5lcnJvcihzcy5jdXJyZW50ICsgIiBpcyBu");
    sb.append("b3QgYXZhaWxhYmxlOyB1bmFibGUgdG8gc3Vic2NyaWJlLiIpOwogICAgICByZXR1cm47CiAgICB9CiAg");
    sb.append("ICBpZiAoIkBlIiBpbiBzLmRlbHRhKSB7CiAgICAgIHMuZGVsdGFbIkBlIl0ucHVzaChzdWIpOwogICAg");
    sb.append("fSBlbHNlIHsKICAgICAgcy5kZWx0YVsiQGUiXSA9IFtzdWJdOwogICAgfQogIH07CiAgc2VsZi5zdWJz");
    sb.append("Y3JpYmUgPSBzdWJzY3JpYmU7CgogIC8vIEhFTFBFUiB8IGNyZWF0ZSBmcmVzaCBzdGF0ZQogIHZhciBm");
    sb.append("cmVzaCA9IGZ1bmN0aW9uICh3aGVyZSkgewogICAgcmV0dXJuIHsKICAgICAgdHJlZTogbmV3IEFkYW1h");
    sb.append("VHJlZSgpLAogICAgICBkZWx0YToge30sCiAgICAgIHBhcmVudDogbnVsbCwKICAgICAgcGF0aDogbnVs");
    sb.append("bCwKICAgICAgd2hlcmU6IHdoZXJlCiAgICB9OwogIH07CiAgc2VsZi5mcmVzaCA9IGZyZXNoOwoKICAv");
    sb.append("LyBIRUxQRVI6IHJlbW92ZSBwb3RlbnRpYWxseSBzZW5zaXRpdmUgaW5mb3JtYXRpb24gZnJvbSBhbiBv");
    sb.append("YmplY3QKICB2YXIgc2FmZV9maWx0ZXIgPSBmdW5jdGlvbihvKSB7CiAgICBpZiAoJ3Bhc3N3b3JkJyBp");
    sb.append("biBvKSB7CiAgICAgIGRlbGV0ZSBvWydwYXNzd29yZCddOwogICAgfQogICAgaWYgKCdvbmVfdGltZV9w");
    sb.append("YXNzd29yZCcgaW4gbykgewogICAgICBkZWxldGUgb1snb25lX3RpbWVfcGFzc3dvcmQnXTsKICAgIH0K");
    sb.append("ICAgIHJldHVybiBvOwogIH0KCiAgLy8gSEVMUEVSIHwgY3JlYXRlIGEgbmV3IGRlbHRhIGNvcHkgZnJv");
    sb.append("bSB0aGUgZ2l2ZW4gc3BlY2lmaWMgc3RhdGUgKGkuZS4gZWl0aGVyIGRhdGEgb3IgdmlldykKICB2YXIg");
    sb.append("bmV3X2RlbHRhX2NvcHkgPSBmdW5jdGlvbiAoc3MpIHsKICAgIGlmIChzcyA9PSBudWxsKSB7CiAgICAg");
    sb.append("IHJldHVybiBudWxsOwogICAgfQogICAgdmFyIHBhcmVudCA9IG51bGw7CiAgICBpZiAoc3MucGFyZW50");
    sb.append("ICE9IG51bGwpIHsKICAgICAgcGFyZW50ID0gbmV3X2RlbHRhX2NvcHkoc3MucGFyZW50KTsKICAgIH0K");
    sb.append("ICAgIHZhciBuZXdfZGVsdGEgPSB7fTsKICAgIGlmIChwYXJlbnQgIT0gbnVsbCkgewogICAgICBwYXJl");
    sb.append("bnQuZGVsdGFbc3MucGF0aF0gPSBuZXdfZGVsdGE7CiAgICB9CiAgICB2YXIgcmVzdWx0ID0geyB0cmVl");
    sb.append("OiBzcy50cmVlLCBwYXJlbnQ6IHBhcmVudCwgZGVsdGE6IG5ld19kZWx0YSwgcGF0aDogc3MucGF0aCB9");
    sb.append("OwogICAgaWYgKCdjb25uZWN0aW9uJyBpbiBzcykgewogICAgICByZXN1bHQuY29ubmVjdGlvbiA9IHNz");
    sb.append("LmNvbm5lY3Rpb247CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgc2VsZi5tYWtlRGVsdGFD");
    sb.append("b3B5ID0gbmV3X2RlbHRhX2NvcHk7CgogIC8vIEhFTFBFUiB8IGNvbnN0cnVjdCBhIHBhdGggdG8KICB2");
    sb.append("YXIgcGF0aF90byA9IGZ1bmN0aW9uIChzcywgb2JqKSB7CiAgICBpZiAoc3MucGFyZW50ICE9IG51bGwp");
    sb.append("IHsKICAgICAgdmFyIHBlZWwgPSB7fTsKICAgICAgcGVlbFtzcy5wYXRoXSA9IG9iajsKICAgICAgcmV0");
    sb.append("dXJuIHBhdGhfdG8oc3MucGFyZW50LCBwZWVsKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBvYmo7");
    sb.append("CiAgICB9CiAgfTsKICBzZWxmLnBhdGhUbyA9IHBhdGhfdG87CgogIC8vIEhFTFBFUiB8IGdldCB0aGUg");
    sb.append("cm9vdCBvZiB0aGUgc3BlY2lmaWMgc3RhdGUgKGkuZS4gZWl0aGVyIHRoZSBkYXRhJ3Mgcm9vdCBvciB0");
    sb.append("aGUgdmlldydzIHJvb3QpCiAgdmFyIHJvb3Rfb2YgPSBmdW5jdGlvbiAoc3MpIHsKICAgIHZhciB4ID0g");
    sb.append("c3M7CiAgICB3aGlsZSAoeC5wYXJlbnQgIT0gbnVsbCkgewogICAgICB4ID0geC5wYXJlbnQ7CiAgICB9");
    sb.append("CiAgICByZXR1cm4geDsKICB9OwogIHNlbGYucm9vdE9mID0gcm9vdF9vZjsKCiAgLy8gSEVMUEVSIHwg");
    sb.append("cmVtb3ZlIGFsbCB0aGUgY2hpbGRyZW4gZnJvbSB0aGUgZ2l2ZW4gRE9NIG5vZGUKICB2YXIgbnVrZSA9");
    sb.append("IGZ1bmN0aW9uIChwYXJlbnQpIHsKICAgIHZhciBsYXN0ID0gcGFyZW50Lmxhc3RDaGlsZDsKICAgIHdo");
    sb.append("aWxlIChsYXN0KSB7CiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChsYXN0KTsKICAgICAgbGFzdCA9IHBh");
    sb.append("cmVudC5sYXN0Q2hpbGQ7CiAgICB9CiAgfTsKICBzZWxmLm51a2UgPSBudWtlOwoKICAvLyBIRUxQRVI6");
    sb.append("IGRlYm91bmNlIHRoZSBnaXZlbiBmdW5jdGlvbmFsIHdoZW4gcmFwaWQgZnVuY3Rpb24gc3ByZWFkIGlz");
    sb.append("IGV4cGVjdGVkCiAgdmFyIGRlYm91bmNlID0gZnVuY3Rpb24gKG1zLCBmb28pIHsKICAgIHZhciBzdGF0");
    sb.append("dXMgPSB7IGluZmxpZ2h0OiBmYWxzZSwgdGltZW91dDogbnVsbCB9OwogICAgc3RhdHVzLmluZmxpZ2h0");
    sb.append("ID0gZmFsc2U7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBpZiAoIXN0YXR1cy5pbmZsaWdo");
    sb.append("dCkgewogICAgICAgIHN0YXR1cy5pbmZsaWdodCA9IHRydWU7CiAgICAgICAgc3RhdHVzLnRpbWVvdXQg");
    sb.append("PSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzdGF0dXMuaW5mbGlnaHQg");
    sb.append("PSBmYWxzZTsKICAgICAgICAgIHN0YXR1cy50aW1lb3V0ID0gbnVsbDsKICAgICAgICAgIGZvbygpOwog");
    sb.append("ICAgICAgIH0sIG1zIC8qIG1zICovKTsgLy8gZGVib3VuY2UgdGhlIHBhcmFtZXRlcnMKICAgICAgfQog");
    sb.append("ICAgfTsKICB9OwogIHNlbGYuZGVib3VuY2UgPSBkZWJvdW5jZTsKCiAgdmFyIGRlbGF5ID0gZnVuY3Rp");
    sb.append("b24obXMsIGZvbykgewogICAgdmFyIHN0YXR1cyA9IHsgYXZhaWw6IHRydWUsIGFnYWluOmZhbHNlLCB0");
    sb.append("aW1lb3V0OiBudWxsIH07CiAgICBzdGF0dXMuZ28gPSBmdW5jdGlvbigpIHsKICAgICAgaWYgKHN0YXR1");
    sb.append("cy5hdmFpbCkgewogICAgICAgIHN0YXR1cy5hdmFpbCA9IGZhbHNlOwogICAgICAgIHN0YXR1cy50aW1l");
    sb.append("b3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBzdGF0dXMuYXZhaWwg");
    sb.append("PSB0cnVlOwogICAgICAgICAgaWYgKHN0YXR1cy5hZ2FpbikgewogICAgICAgICAgICBzdGF0dXMuYWdh");
    sb.append("aW4gPSBmYWxzZTsKICAgICAgICAgICAgc3RhdHVzLmdvKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwg");
    sb.append("bXMpOwogICAgICAgIGZvbygpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXR1cy5hZ2FpbiA9IHRy");
    sb.append("dWU7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gc3RhdHVzLmdvOwogIH07CiAgc2VsZi5kZWxheSA9");
    sb.append("IGRlbGF5OwoKICAvLyBIRUxQRVIgfCBwcmVwYXJlIGEgZnJlZSB1bnN1YnNjcmliZSBvYmplY3QKICB2");
    sb.append("YXIgbWFrZV91bnN1YiA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIF9fZGF0YTogZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICB9LCBfX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgICAgfQogICAgfTsKICB9");
    sb.append("OwoKICAvLyBIRUxQRVIgfCBhdWdtZW50IGFuIGV4aXN0aW5nIG9iamVjdCB3aXRoIHVuc3Vic2NyaWJl");
    sb.append("IGRhdGEKICB2YXIgYWRkX3Vuc3ViID0gZnVuY3Rpb24gKG9iaikgewogICAgb2JqLl9fZGF0YSA9IGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgIH07CiAgICBvYmouX192aWV3ID0gZnVuY3Rpb24gKCkgewogICAgfTsKICB9");
    sb.append("OwoKICAvLyBIRUxQRVIgfCBmaXJlIHRoZSB1bnN1YnNjcmliZSBjYWxscyB3aXRoaW4gYW4gb2JqZWN0");
    sb.append("CiAgdmFyIGZpcmVfdW5zdWIgPSBmdW5jdGlvbiAodW5zdWIpIHsKICAgIHVuc3ViLl9fZGF0YSgpOwog");
    sb.append("ICAgdW5zdWIuX192aWV3KCk7CiAgfTsKCiAgdmFyIGlzRW1wdHlEZWx0YSA9IGZ1bmN0aW9uKGRlbHRh");
    sb.append("KSB7CiAgICBpZiAodHlwZW9mKGRlbHRhKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVybiBmYWxz");
    sb.append("ZTsKICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkZWx0YSkpIHsKICAgICAgZm9yICh2YXIgaiA9");
    sb.append("IDA7IGogPCBkZWx0YS5sZW5ndGg7IGorKykgewogICAgICAgIGlmICghaXNFbXB0eURlbHRhKGRlbHRh");
    sb.append("W2pdKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNl");
    sb.append("IGlmICh0eXBlb2YoZGVsdGEpID09ICJvYmplY3QiKSB7CiAgICAgIGZvciAodmFyIGsgaW4gZGVsdGEp");
    sb.append("IHsKICAgICAgICBpZiAoIWlzRW1wdHlEZWx0YShkZWx0YVtrXSkpIHsKICAgICAgICAgIHJldHVybiBm");
    sb.append("YWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy8gSEVM");
    sb.append("UEVSIHwgc3Vic2NyaWJlIHRvIHN0YXRlIGFuZCBwb3B1bGF0ZSB1bnN1YnNjcmliZSBvYmplY3QKICB2");
    sb.append("YXIgc3Vic2NyaWJlX3N0YXRlID0gZnVuY3Rpb24gKHN0YXRlLCB1bnN1YikgewogICAgLy8gICYmICFp");
    sb.append("c0VtcHR5RGVsdGEoc3RhdGUuZGF0YSkKICAgIHVuc3ViLl9fZGF0YSA9IGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("IH07CiAgICB1bnN1Yi5fX3ZpZXcgPSBmdW5jdGlvbiAoKSB7CiAgICB9OwoKICAgIGlmIChzdGF0ZS5k");
    sb.append("YXRhICE9IG51bGwpIHsKICAgICAgdmFyIGRlbHRhID0gcm9vdF9vZihzdGF0ZS5kYXRhKS5kZWx0YTsK");
    sb.append("ICAgICAgaWYgKCFpc0VtcHR5RGVsdGEoZGVsdGEpKSB7CiAgICAgICAgdW5zdWIuX19kYXRhID0gc3Rh");
    sb.append("dGUuZGF0YS50cmVlLnN1YnNjcmliZShkZWx0YSk7CiAgICAgIH0KICAgIH0KICAgIC8vICAmJiAhaXNF");
    sb.append("bXB0eURlbHRhKHN0YXRlLnZpZXcpCiAgICBpZiAoc3RhdGUudmlldyAhPSBudWxsKSB7CiAgICAgIHZh");
    sb.append("ciBkZWx0YSA9IHJvb3Rfb2Yoc3RhdGUudmlldykuZGVsdGE7CiAgICAgIGlmICghaXNFbXB0eURlbHRh");
    sb.append("KGRlbHRhKSkgewogICAgICAgIHVuc3ViLl9fdmlldyA9IHN0YXRlLnZpZXcudHJlZS5zdWJzY3JpYmUo");
    sb.append("ZGVsdGEpOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8IFN3aXRjaCB0byB0aGUgdmll");
    sb.append("dyBvYmplY3QKICBzZWxmLnBWID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4geyBzZXJ2aWNl");
    sb.append("OiBzdGF0ZS5zZXJ2aWNlLCBkYXRhOiBzdGF0ZS5kYXRhLCB2aWV3OiBzdGF0ZS52aWV3LCBjdXJyZW50");
    sb.append("OiAidmlldyIgfTsKICB9OwogIHNlbGYubmV3U3RhdGVWaWV3T2YgPSBzZWxmLnBWOwoKICAvLyBSVU5U");
    sb.append("SU1FIHwgU3dpdGNoIHRvIHRoZSBkYXRhIG9iamVjdAogIHNlbGYucEQgPSBmdW5jdGlvbiAoc3RhdGUp");
    sb.append("IHsKICAgIHJldHVybiB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZp");
    sb.append("ZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6ICJkYXRhIiB9OwogIH07CiAgc2VsZi5uZXdTdGF0ZURhdGFP");
    sb.append("ZiA9IHNlbGYucEQ7CgogIC8vIFJVTlRJTUUgfCBTd2l0Y2ggdG8gdGhlIHJvb3Qgb2JqZWN0IC8gKFJv");
    sb.append("b3QpCiAgc2VsZi5wUiA9IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6");
    sb.append("IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6");
    sb.append("IHN0YXRlLmN1cnJlbnQgfTsKICAgIHZhciBwcmlvciA9IG5leHRbc3RhdGUuY3VycmVudF07CiAgICB3");
    sb.append("aGlsZSAocHJpb3IgIT0gbnVsbCkgewogICAgICBuZXh0W3N0YXRlLmN1cnJlbnRdID0gcHJpb3I7CiAg");
    sb.append("ICAgIHByaW9yID0gcHJpb3IucGFyZW50OwogICAgfQogICAgcmV0dXJuIG5leHQ7CiAgfTsKICBzZWxm");
    sb.append("Lm5ld1N0YXRlUm9vdE9mID0gc2VsZi5wUjsKCiAgLy8gUlVOVElNRSB8IC4uLyAoVXApCiAgc2VsZi5w");
    sb.append("VSA9IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6IHN0YXRlLnNlcnZp");
    sb.append("Y2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6IHN0YXRlLmN1cnJl");
    sb.append("bnQgfTsKICAgIHZhciBwcmlvciA9IG5leHRbc3RhdGUuY3VycmVudF07CiAgICBpZiAocHJpb3IucGFy");
    sb.append("ZW50ICE9IG51bGwpIHsKICAgICAgbmV4dFtzdGF0ZS5jdXJyZW50XSA9IHByaW9yLnBhcmVudDsKICAg");
    sb.append("IH0KICAgIHJldHVybiBuZXh0OwogIH07CiAgc2VsZi5uZXdTdGF0ZVBhcmVudE9mID0gc2VsZi5wVTsK");
    sb.append("CiAgLy8gUlVOVElNRSB8IGRpdmUgb25lIGxldmVsIEludG8gcGF0aDEvcGF0aDIvLi4uLi9wYXRoTgog");
    sb.append("IHNlbGYucEkgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUpIHsKICAgIHZhciBwcmlvciA9IHN0YXRlW3N0");
    sb.append("YXRlLmN1cnJlbnRdOwogICAgaWYgKHByaW9yID09IG51bGwpIHsKICAgICAgY29uc29sZS5lcnJvcihz");
    sb.append("dGF0ZS5jdXJyZW50ICsgIiBpcyBub3QgcHJlc2VudCIpOwogICAgICByZXR1cm4gc3RhdGU7CiAgICB9");
    sb.append("CiAgICBpZiAoIShuYW1lIGluIHByaW9yLmRlbHRhKSkgewogICAgICBwcmlvci5kZWx0YVtuYW1lXSA9");
    sb.append("IHt9OwogICAgfQogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0");
    sb.append("YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6IHN0YXRlLmN1cnJlbnQgfTsKICAgIG5l");
    sb.append("eHRbc3RhdGUuY3VycmVudF0gPSB7CiAgICAgIHRyZWU6IHByaW9yLnRyZWUsCiAgICAgIGRlbHRhOiBw");
    sb.append("cmlvci5kZWx0YVtuYW1lXSwKICAgICAgcGFyZW50OiBwcmlvciwKICAgICAgcGF0aDogbmFtZQogICAg");
    sb.append("fTsKICAgIGlmIChuZXh0LmN1cnJlbnQgPT0gImRhdGEiKSB7CiAgICAgIG5leHQuZGF0YS5jb25uZWN0");
    sb.append("aW9uID0gcHJpb3IuY29ubmVjdGlvbjsKICAgIH0KICAgIHJldHVybiBuZXh0OwogIH07CiAgc2VsZi5u");
    sb.append("ZXdTdGF0ZURpdmVJbnRvID0gc2VsZi5wSTsKCiAgLy8gUlVOVElNRSB8IGV4dGVuZCB0aGUgZ2l2ZW4g");
    sb.append("c3RhdGUgd2l0aCB0aGUgdmlldyBoYXZpbmcgYSBzZXBhcmF0ZSBjaGlsZAogIHNlbGYucEVWID0gZnVu");
    sb.append("Y3Rpb24gKHN0YXRlLCBuYW1lKSB7CiAgICBpZiAoIShuYW1lIGluIHN0YXRlLnZpZXcuZGVsdGEpKSB7");
    sb.append("CiAgICAgIHN0YXRlLnZpZXcuZGVsdGFbbmFtZV0gPSB7fTsKICAgIH0KICAgIHJldHVybiB7CiAgICAg");
    sb.append("IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsCiAgICAgIGRhdGE6IHN0YXRlLmRhdGEsCiAgICAgIHZpZXc6");
    sb.append("IHsKICAgICAgICB0cmVlOiBzdGF0ZS52aWV3LnRyZWUsCiAgICAgICAgZGVsdGE6IHN0YXRlLnZpZXcu");
    sb.append("ZGVsdGFbbmFtZV0sCiAgICAgICAgcGFyZW50OiBzdGF0ZS52aWV3LAogICAgICAgIHBhdGg6IG5hbWUK");
    sb.append("ICAgICAgfSwKICAgICAgY3VycmVudDogc3RhdGUuY3VycmVudAogICAgfTsKICB9OwogIHNlbGYubmV3");
    sb.append("U3RhdGVDcmVhdGVWaWV3Q2hpbGQgPSBzZWxmLnBFVjsKCiAgc2VsZi5wSUUgPSBmdW5jdGlvbiAoc3Rh");
    sb.append("dGUsIG5hbWUsIGV4cGFuZFZpZXcpIHsKICAgIHZhciBuZXh0ID0gc2VsZi5wSShzdGF0ZSwgbmFtZSk7");
    sb.append("CiAgICBpZiAoZXhwYW5kVmlldykgewogICAgICByZXR1cm4gc2VsZi5wRVYobmV4dCwgbmFtZSk7CiAg");
    sb.append("ICB9IGVsc2UgewogICAgICByZXR1cm4gbmV4dDsKICAgIH0KICB9OwoKICB2YXIgZm9yayA9IGZ1bmN0");
    sb.append("aW9uIChwcmlvclN0YXRlKSB7CiAgICB2YXIgc3RhdGUgPSB7CiAgICAgIHNlcnZpY2U6IHByaW9yU3Rh");
    sb.append("dGUuc2VydmljZSwKICAgICAgZGF0YTogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS5kYXRhKSwKICAg");
    sb.append("ICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgY3VycmVudDogcHJp");
    sb.append("b3JTdGF0ZS5jdXJyZW50CiAgICB9OwogICAgaWYgKHN0YXRlLmRhdGEgIT0gbnVsbCkgewogICAgICBz");
    sb.append("dGF0ZS5kYXRhLmNvbm5lY3Rpb24gPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbjsKICAgIH0KICAg");
    sb.append("IHJldHVybiBzdGF0ZTsKICB9OwoKICAvLyBSVU5USU1FIHwgc3Vic2NyaWJlIGJldHdlZW4gdGhlIHN0");
    sb.append("YXRlIGFuZCB0aGUgb2JqZWN0LgogIC8vIFdoZW4gdGhlIG1lbWJlciBmaWVsZCB3aXRoaW4gc3RhdGUg");
    sb.append("b2YgbmFtZSBjaGFuZ2VzLCBjb3B5IHRoYXQgdmFsdWUgaW50byB0aGUgb2JqIGFuZCBydW4gcmVjb21w");
    sb.append("dXRlKCkKICBzZWxmLlkgPSBmdW5jdGlvbiAoc3RhdGUsIG9iaiwgbmFtZSwgcmVjb21wdXRlKSB7CiAg");
    sb.append("ICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAg");
    sb.append("ICByZWNvbXB1dGUoKTsKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfTsK");
    sb.append("CiAgc2VsZi5ZMiA9IGZ1bmN0aW9uIChzdGF0ZSwgciwga2V5LCBuYW1lLCByZWNvbXB1dGUpIHsKICAg");
    sb.append("IHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG9iaiA9IHIuX1trZXldOwogICAg");
    sb.append("ICBvYmpbbmFtZV0gPSB2YWx1ZTsKICAgICAgcmVjb21wdXRlKG9iaik7CiAgICAgIHJldHVybiB0cnVl");
    sb.append("OwogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBSVU5USU1F");
    sb.append("OiBidWlsZCBhbiByeG9iagogIHNlbGYuUlggPSBmdW5jdGlvbiAodmFycykgewogICAgdmFyIG8gPSB7");
    sb.append("fTsKICAgIG8uXyA9IHt9OwogICAgZm9yICh2YXIgayA9IDA7IGsgPCB2YXJzLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgIG8uX1t2YXJzW2tdXSA9IHt9OwogICAgfQogICAgby5fXyA9IGZ1bmN0aW9uKCkge307CiAg");
    sb.append("ICByZXR1cm4gbzsKICB9OwoKICAvLyBSVU5USU1FIHwgSnVzdCBzdWJzY3JpYmVlIHZhbHVlIHRvIHRo");
    sb.append("ZSBvYmplY3QgZmllbGQgb2YgbmFtZSAobm8tcmVjb21wdXRlKQogIHNlbGYuWVMgPSBmdW5jdGlvbiAo");
    sb.append("c3RhdGUsIG9iaiwgbmFtZSkgewogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBv");
    sb.append("YmpbbmFtZV0gPSB2YWx1ZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogICAgc3Vic2NyaWJlKHN0");
    sb.append("YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJTUUgfCAiVGV4dCIKICBzZWxmLlQgPSBmdW5j");
    sb.append("dGlvbiAodHgpIHsKICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0eCk7CiAgfTsKCiAg");
    sb.append("Ly8gY29udmVydCBhIHZhbHVlIGludG8gYSBib29sZWFuCiAgc2VsZi5CID0gZnVuY3Rpb24odmFsKSB7");
    sb.append("CiAgICBpZiAodmFsID09PSB0cnVlKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJu");
    sb.append("IHZhbCA9PSAidHJ1ZSI7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx2aWV3LXdyaXRlIG5hbWU9IiIgdmFs");
    sb.append("dWU9IiI+CiAgc2VsZi5WVyA9IGZ1bmN0aW9uKHN0YXRlLCBuYW1lLCByeE9iaikgewogICAgcnhPYmou");
    sb.append("X18gPSBkZWJvdW5jZSg1MCwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgdmFy");
    sb.append("IHZhbHVlID0gcnhPYmoudmFsdWU7CiAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24i");
    sb.append("KSB7CiAgICAgICAgb2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvYmpb");
    sb.append("bmFtZV0gPSB2YWx1ZTsKICAgICAgfQogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcs");
    sb.append("IG9iaik7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgfTsKCiAg");
    sb.append("Ly8gUlVOVElNRSB8IDxsb29rdXAgcGF0aD0uLi4+CiAgc2VsZi5MID0gZnVuY3Rpb24gKHN0YXRlLCBu");
    sb.append("YW1lKSB7CiAgICB2YXIgZG9tID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpOwogICAgdmFyIHN1");
    sb.append("YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBkb20ubm9kZVZhbHVlID0gdmFsdWU7CiAgICB9Owog");
    sb.append("ICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogICAgcmV0dXJuIGRvbTsKICB9OwoKICAvLyBS");
    sb.append("VU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLiB0cmFuc2Zvcm09IiR0cmFuc2Zvcm0iIC8+CiAgc2VsZi5M");
    sb.append("VCA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSwgdHJhbnNmb3JtKSB7CiAgICB2YXIgZG9tID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlVGV4dE5vZGUoIiIpOwogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAg");
    sb.append("ICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAgICAgIGRvbS5ub2RlVmFsdWUgPSB0cmFuc2Zvcm0odmFs");
    sb.append("dWUpOwogICAgICB9CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogICAgcmV0");
    sb.append("dXJuIGRvbTsKICB9OwoKICBzZWxmLkxoID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lKSB7CiAgICB2YXIg");
    sb.append("ZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgdmFyIHN1YiA9IGZ1bmN0aW9u");
    sb.append("ICh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAgICAgIGRvbS5pbm5lckhUTUwg");
    sb.append("PSB2YWx1ZTsKICAgICAgfQogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICAg");
    sb.append("IHJldHVybiBkb207CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxsb29rdXAgcGF0aD0uLi4gdHJhbnNmb3Jt");
    sb.append("PSIkdHJhbnNmb3JtIiAvPgogIHNlbGYuTFRkVCA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSwgdHJhbnNm");
    sb.append("b3JtLCBmcmVxKSB7CiAgICB2YXIgZG9tID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpOwogICAg");
    sb.append("Ly8gY3JlYXRlIHRoZSBuZXh1cyBvYmplY3QKICAgIHZhciBvYmogPSB7fTsKICAgIG9iai5mcmVxID0g");
    sb.append("ZnJlcTsKICAgIG9iai52YWx1ZSA9ICIiOwoKICAgIC8vIHVwZGF0ZSB3aWxsIGV4ZWN1dGUgdGhlIHRy");
    sb.append("YW5zZm9ybSBvbiB0aGUgdmFsdWUKICAgIG9iai51cGRhdGUgPSBmdW5jdGlvbigpIHsKICAgICAgZG9t");
    sb.append("Lm5vZGVWYWx1ZSA9IHRyYW5zZm9ybSh0aGlzLnZhbHVlKTsKICAgIH0uYmluZChvYmopOwoKICAgIC8v");
    sb.append("IHN1YnNjcmlwdGlvbiB3aWxsIHN5bmMgdGhlIHZhbHVlCiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZh");
    sb.append("bHVlKSB7CiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVl");
    sb.append("OwogICAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgIH0KICAgIH0uYmluZChvYmopOwoKICAgIC8vIHJl");
    sb.append("ZnJlc2ggd2lsbCByZS1leGVjdXRlIHRoZSB1cGRhdGUgKGFuZCB0aHVzIHRoZSB0cmFuc2Zvcm0pCiAg");
    sb.append("ICBvYmoucmVmcmVzaCA9IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgICBpZiAo");
    sb.append("ZG9jdW1lbnQuYm9keS5jb250YWlucyhkb20pKSB7IC8vIHdpbGwgcnVuIHNvIGxvbmcgYXMgdGhlIERP");
    sb.append("TSBjb250YWlucyB0aGUgbm9kZSB3ZSBtYW5pcHVsYXRlZAogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0");
    sb.append("KHRoaXMucmVmcmVzaCwgdGhpcy5mcmVxKTsKICAgICAgfQogICAgfS5iaW5kKG9iaik7CiAgICAvLyBr");
    sb.append("aWNrIG9mZiB0aGUgYXV0byB0cmFuc2Zvcm0KICAgIHdpbmRvdy5zZXRUaW1lb3V0KG9iai5yZWZyZXNo");
    sb.append("LCBmcmVxKTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICAgIHJldHVybiBkb207CiAg");
    sb.append("fTsKCiAgLy8gUlVOVElNRSB8IDx0YWc+CiAgc2VsZi5FID0gZnVuY3Rpb24gKHRhZywgbnMpIHsKICAg");
    sb.append("IGlmIChucyA9PSB1bmRlZmluZWQgfHwgbnMgPT0gbnVsbCkgewogICAgICB2YXIgZG9tID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCh0YWcpOwogICAgICBpZiAodGFnID09ICJzZWxlY3QiKSB7CiAgICAgICAg");
    sb.append("ZG9tLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkgeyBkb20ucnh2YWx1ZSA9IGRv");
    sb.append("bS52YWx1ZTsgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRvbTsKICAgIH0gZWxzZSB7CiAgICAgIHZh");
    sb.append("ciByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsIHRhZyk7CiAgICAgIHJlc3VsdC5z");
    sb.append("ZXRBdHRyaWJ1dGUoInhtbG5zIiwgbnMpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH07Cgog");
    sb.append("IHNlbGYuQ1N0ID0gZnVuY3Rpb24gKHBhcmVudCwgc3RhdGUsIGNoaWxkTWFrZXJDb25uZWN0ZWQsIGNo");
    sb.append("aWxkTWFrZXJEaXNjb25uZWN0ZWQpIHsKICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIGlm");
    sb.append("ICghc3RhdGUuZGF0YS5jb25uZWN0aW9uKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHN0YXRlLmRh");
    sb.append("dGEuY29ubmVjdGlvbi5jb25uZWN0ZWQoZnVuY3Rpb24oY3MpIHsKICAgICAgaWYgKHRoaXMucHJpb3Ig");
    sb.append("PT0gY3MpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbnVrZShwYXJlbnQpOwogICAgICBm");
    sb.append("aXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgdGhpcy5wcmlvciA9IGNzOwogICAgICB2YXIgbmV3U3RhdGUg");
    sb.append("PSBmb3JrKHN0YXRlKTsKICAgICAgaWYgKGNzKSB7CiAgICAgICAgY2hpbGRNYWtlckNvbm5lY3RlZChw");
    sb.append("YXJlbnQsIG5ld1N0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGlsZE1ha2VyRGlzY29ubmVj");
    sb.append("dGVkKHBhcmVudCwgbmV3U3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShuZXdTdGF0");
    sb.append("ZSwgdW5zdWIpOwogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5jb250YWlucyhwYXJlbnQpOwogICAg");
    sb.append("fS5iaW5kKHtwcmlvcjpudWxsfSkpOwogIH07CgogIC8vIFJVTlRJTUUgfCA8bG9jYWwtc3RvcmFnZS1w");
    sb.append("b2xsIGtleT0ka2V5IFttcz0kbXNdPgogIHNlbGYuTG9TdFBvID0gZnVuY3Rpb24ocGFyZW50LCBwcmlv");
    sb.append("clN0YXRlLCByeE9iaiwgY2hpbGRNYWtlckZvdW5kLCBjaGlsZE1ha2VyTm90Rm91bmQpIHsKICAgIHZh");
    sb.append("ciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIHZhciBzbSA9IHt9OwogICAgc20ua2V5ID0gbnVsbDsK");
    sb.append("ICAgIHNtLm1zID0gNTAwMDsKICAgIHNtLmxhc3QgPSAiISI7CiAgICBzbS5wID0gZnVuY3Rpb24oKSB7");
    sb.append("CiAgICAgIGlmICh0aGlzLmtleSA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAg");
    sb.append("IHZhciB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMua2V5KTsKICAgICAgaWYgKHZhbHVl");
    sb.append("ID09IHRoaXMubGFzdCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmxhc3QgPSB2");
    sb.append("YWx1ZTsKICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFy");
    sb.append("IHRyZWUgPSBuZXcgQWRhbWFUcmVlKCk7CiAgICAgIHZhciBzdGF0ZSA9IHsKICAgICAgICBzZXJ2aWNl");
    sb.append("OiBwcmlvclN0YXRlLnNlcnZpY2UsCiAgICAgICAgZGF0YTogeyBjb25uZWN0aW9uOiBwcmlvclN0YXRl");
    sb.append("LmNvbm5lY3Rpb24sIHRyZWU6IHRyZWUsIGRlbHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxs");
    sb.append("IH0sCiAgICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICBj");
    sb.append("dXJyZW50OiAiZGF0YSIKICAgICAgfTsKICAgICAgaWYgKHZhbHVlID09IG51bGwpIHsKICAgICAgICBj");
    sb.append("aGlsZE1ha2VyTm90Rm91bmQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0");
    sb.append("YXRlLCB1bnN1Yik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hpbGRNYWtlckZvdW5kKHBhcmVudCwg");
    sb.append("c3RhdGUpOwogICAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAgICAgIHRyZWUu");
    sb.append("dXBkYXRlKHRyZWUuTWFrZURlbHRhKEpTT04ucGFyc2UodmFsdWUpKSk7CiAgICAgIH0KCiAgICB9LmJp");
    sb.append("bmQoc20pOwogICAgcnhPYmouX18gPSBkZWJvdW5jZSg1MCwgZnVuY3Rpb24gKCkgewogICAgICBpZiAo");
    sb.append("J2tleScgaW4gcnhPYmopIHsKICAgICAgICB0aGlzLmtleSA9IHJ4T2JqLmtleTsKICAgICAgfQogICAg");
    sb.append("ICBpZiAoJ21zJyBpbiByeE9iaikgewogICAgICAgIHRoaXMubXMgPSBwYXJzZUludChyeE9iai5tcyk7");
    sb.append("CiAgICAgICAgaWYgKGlzTmFOKHRoaXMubXMpKSB7CiAgICAgICAgICB0aGlzLm1zID0gNTAwMDsKICAg");
    sb.append("ICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5wKCk7CiAgICB9LmJpbmQoc20pKTsKCiAgICBzbS50aW1l");
    sb.append("b3V0ID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHBhcmVudCkp");
    sb.append("IHsKICAgICAgICB0aGlzLnAoKTsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnRpbWVvdXQs");
    sb.append("IHRoaXMubXMpOwogICAgICB9CiAgICB9LmJpbmQoc20pOwogICAgd2luZG93LnNldFRpbWVvdXQoc20u");
    sb.append("dGltZW91dCwgNTApOwogIH07CgogIC8vIFJVTlRJTUUgfCA8ZG9jdW1lbnQtZ2V0IHNwYWNlPSIkc3Bh");
    sb.append("Y2UiIGtleT0iJGtleSIgdXJsPSIkcGF0aCIgc2VhcmNoOng9Ii4uLiIgLi4uPgogIHNlbGYuRGNHID0g");
    sb.append("ZnVuY3Rpb24ocGFyZW50LCBwcmlvclN0YXRlLCByeE9iaiwgY2hpbGRNYWtlckZldGNoZWQsIGNoaWxk");
    sb.append("TWFrZXJGYWlsZWQpIHsKICAgIC8vIFRPRE8KICB9OwoKICAvLyBSVU5USU1FIHwgPGRvbWFpbi1nZXQg");
    sb.append("dXJsPSJwYXRoIiBzZWFyY2g6eD0iLi4uIiAuLi4+CiAgc2VsZi5ERyA9IGZ1bmN0aW9uKHBhcmVudCwg");
    sb.append("cHJpb3JTdGF0ZSwgcnhPYmosIGNoaWxkTWFrZXJGZXRjaGVkLCBjaGlsZE1ha2VyRmFpbGVkLCBkZWxh");
    sb.append("eUxpbWl0KSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICB2YXIgZGVsYXlUb1VzZSA9");
    sb.append("IHR5cGVvZihkZWxheUxpbWl0KSA9PSAibnVtYmVyIiA/IGRlbGF5TGltaXQgOiAyNTA7CiAgICB2YXIg");
    sb.append("c2VsZlBhcmVudCA9IHNlbGY7CiAgICByeE9iai5fXyA9IGRlYm91bmNlKDUwLCBkZWxheShkZWxheVRv");
    sb.append("VXNlLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghKCd1cmwnIGluIHJ4T2JqKSkgewogICAgICAgIHJl");
    sb.append("dHVybjsKICAgICAgfQogICAgICB2YXIgYXJncyA9IFtdOwogICAgICB2YXIgaWRlbnRpdHkgPSBudWxs");
    sb.append("OwogICAgICBmb3IgKHZhciBhcmcgaW4gcnhPYmopIHsKICAgICAgICB2YXIgdmFsID0gcnhPYmpbYXJn");
    sb.append("XTsKICAgICAgICBzd2l0Y2ggKGFyZykgewogICAgICAgICAgY2FzZSAiX18iOgogICAgICAgICAgY2Fz");
    sb.append("ZSAiXyI6CiAgICAgICAgICBjYXNlICJ1cmwiOgogICAgICAgICAgY2FzZSAicmVkaXJlY3QiOgogICAg");
    sb.append("ICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImlkZW50aXR5IjoKICAgICAgICAgICAgaWYgKHR5");
    sb.append("cGVvZih2YWwpID09ICJzdHJpbmciKSB7CiAgICAgICAgICAgICAgdmFyIGlkTG9va3VwID0gc2VsZlBh");
    sb.append("cmVudC5JRChyeE9iai5pZGVudGl0eSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJu");
    sb.append("IHJ4T2JqLnJlZGlyZWN0OwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmIChpZExvb2t1");
    sb.append("cC5hYm9ydCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("ICAgICBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("IGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgYXJncy5wdXNoKGFyZyArICI9IiAr");
    sb.append("IGVuY29kZVVSSUNvbXBvbmVudCh2YWwpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIHVybCA9");
    sb.append("IHJ4T2JqLnVybCArIChhcmdzLmxlbmd0aCA+IDAgPyAiPyIgKyBhcmdzLmpvaW4oIiYiKSA6ICIiKTsK");
    sb.append("ICAgICAgdGhpcy5nZW4gKys7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIHhodHRwID0g");
    sb.append("bmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICBpZiAodGhpcy54aHR0cC5yZWFkeVN0YXRlID09IDQgJiYgdGhpcy5nZW4g");
    sb.append("PT0gc2VsZi5nZW4pIHsKICAgICAgICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICAgICAgbnVrZShw");
    sb.append("YXJlbnQpOwogICAgICAgICAgdmFyIHRyZWUgPSBuZXcgQWRhbWFUcmVlKCk7CiAgICAgICAgICB2YXIg");
    sb.append("c3RhdGUgPSB7CiAgICAgICAgICAgIHNlcnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwKICAgICAgICAg");
    sb.append("ICAgZGF0YTogeyBjb25uZWN0aW9uOiBwcmlvclN0YXRlLmNvbm5lY3Rpb24sIHRyZWU6IHRyZWUsIGRl");
    sb.append("bHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAgICAgICAgIHZpZXc6IG5ld19k");
    sb.append("ZWx0YV9jb3B5KHByaW9yU3RhdGUudmlldyksCiAgICAgICAgICAgIGN1cnJlbnQ6ICJkYXRhIgogICAg");
    sb.append("ICAgICAgfTsKCiAgICAgICAgICBpZiAodGhpcy54aHR0cC5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAg");
    sb.append("ICAgIHZhciB0eXBlID0gdGhpcy54aHR0cC5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIik7");
    sb.append("CiAgICAgICAgICAgIGlmICh0eXBlID09ICJhcHBsaWNhdGlvbi9qc29uIikgewogICAgICAgICAgICAg");
    sb.append("IHZhciB0b1B1c2ggPSB0cmVlLk1ha2VEZWx0YShKU09OLnBhcnNlKHRoaXMueGh0dHAucmVzcG9uc2VU");
    sb.append("ZXh0KSk7CiAgICAgICAgICAgICAgY2hpbGRNYWtlckZldGNoZWQocGFyZW50LCBzdGF0ZSk7CiAgICAg");
    sb.append("ICAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgICAgICAgICAgdHJlZS51");
    sb.append("cGRhdGUodG9QdXNoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjaGlsZE1ha2Vy");
    sb.append("RmFpbGVkKHBhcmVudCwgc3RhdGUpOwogICAgICAgICAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwg");
    sb.append("dW5zdWIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjaGlsZE1h");
    sb.append("a2VyRmFpbGVkKHBhcmVudCwgc3RhdGUpOwogICAgICAgICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUs");
    sb.append("IHVuc3ViKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0uYmluZCh7Z2VuOnNlbGYuZ2VuLCB4");
    sb.append("aHR0cDp4aHR0cH0pOwogICAgICB4aHR0cC5vcGVuKCJHRVQiLCAgc2VsZi5iYXNlICsgIi9+ZCIgKyB1");
    sb.append("cmwsIHRydWUpOwogICAgICBpZiAoaWRlbnRpdHkgIT0gbnVsbCkgewogICAgICAgIHhodHRwLnNldFJl");
    sb.append("cXVlc3RIZWFkZXIoIkF1dGhvcml6YXRpb24iLCAiQmVhcmVyICIgKyBpZGVudGl0eSk7CiAgICAgIH0K");
    sb.append("ICAgICAgeGh0dHAud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsKICAgICAgeGh0dHAuc2VuZCgpOwogICAg");
    sb.append("fS5iaW5kKHt1cmw6IiIsIGdlbjowLCBiYXNlOnNlbGYucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0");
    sb.append("fSkpKTsKICAgIHJ4T2JqLl9fKCk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxwaWNrIG5hbWU9Li4uPgog");
    sb.append("IHNlbGYuUCA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIHJ4T2JqLCBjaGlsZE1ha2VyQ29u");
    sb.append("bmVjdGVkLCBjaGlsZE1ha2VyRGlzY29ubmVjdGVkLCBrZWVwT3BlbikgewogICAgdmFyIHVuc3ViID0g");
    sb.append("bWFrZV91bnN1YigpOwogICAgcnhPYmouX18gPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghKCduYW1l");
    sb.append("JyBpbiByeE9iaikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmFtZSA9");
    sb.append("PSByeE9iai5uYW1lKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBjbyA9IGdldF9j");
    sb.append("b25uZWN0aW9uX29iaihyeE9iai5uYW1lKTsKICAgICAgdGhpcy5uYW1lID0gcnhPYmoubmFtZTsKICAg");
    sb.append("ICAgY28uY29ubmVjdGVkKGZ1bmN0aW9uIChjcykgewogICAgICAgIGlmICh0aGlzLnJlbmRlcmVkICYm");
    sb.append("IGtlZXBPcGVuKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIG51a2UocGFyZW50");
    sb.append("KTsKICAgICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgICB2YXIgc3RhdGUgPSB7CiAgICAgICAg");
    sb.append("ICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2UsCiAgICAgICAgICBkYXRhOiB7IGNvbm5lY3Rpb246");
    sb.append("IGNvLCB0cmVlOiBjby50cmVlLCBkZWx0YToge30sIHBhcmVudDogbnVsbCwgcGF0aDogbnVsbCB9LAog");
    sb.append("ICAgICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICAgIGN1");
    sb.append("cnJlbnQ6ICJkYXRhIgogICAgICAgIH07CiAgICAgICAgaWYgKGNzKSB7CiAgICAgICAgICB0aGlzLnJl");
    sb.append("bmRlcmVkID0gdHJ1ZTsKICAgICAgICAgIGNoaWxkTWFrZXJDb25uZWN0ZWQocGFyZW50LCBzdGF0ZSk7");
    sb.append("CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNoaWxkTWFrZXJEaXNjb25uZWN0ZWQocGFyZW50LCBz");
    sb.append("dGF0ZSk7CiAgICAgICAgfQogICAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAg");
    sb.append("ICAgIC8vIFRPRE86IHJldHVybiBmYWxzZSB0byB1bnN1YgogICAgICAgIHJldHVybiB0cnVlOwogICAg");
    sb.append("ICB9LmJpbmQodGhpcykpOwogICAgfS5iaW5kKHsgbmFtZTogIiIsIHJlbmRlcmVkOmZhbHNlIH0pOwog");
    sb.append("IH07CgogIC8vIFJVTlRJTUUgfCA8dGVtcGxhdGUgbmFtZT0iLi4uIj4KICBzZWxmLlRQID0gZnVuY3Rp");
    sb.append("b24gKG5hbWUsIGZvbykgewogICAgdGVtcGxhdGVzW25hbWVdID0gZm9vOwogIH07CgogIC8vIGNvbmZp");
    sb.append("ZzppZj0ia2V5PXZhbHVlIgogIHNlbGYuQ0ZHdCA9IGZ1bmN0aW9uIChjb25maWcsIGtleSwgdmFsdWUp");
    sb.append("IHsKICAgIGlmIChrZXkgaW4gY29uZmlnKSB7CiAgICAgIHJldHVybiBjb25maWdba2V5XSA9PSB2YWx1");
    sb.append("ZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9OwogIC8vIGNvbmZpZzppZj0ia2V5IgogIHNlbGYu");
    sb.append("Q0ZHYiA9IGZ1bmN0aW9uIChjb25maWcsIGtleSkgewogICAgY29uc29sZS5sb2coY29uZmlnKTsKICAg");
    sb.append("IGlmIChrZXkgaW4gY29uZmlnKSB7CiAgICAgIHJldHVybiBjb25maWdba2V5XSA9PT0gdHJ1ZTsKICAg");
    sb.append("IH0KICAgIHJldHVybiBmYWxzZTsKICB9OwoKICAvLyBSVU5USU1FIHwgPHRhZyByeDp0ZW1wbGF0ZT0k");
    sb.append("bmFtZT4KICBzZWxmLlVUID0gZnVuY3Rpb24gKHBhcmVudCwgc3RhdGUsIG5hbWUsIGNoaWxkX21ha2Vy");
    sb.append("LCBjZmcpIHsKICAgIHZhciBmb28gPSB0ZW1wbGF0ZXNbbmFtZV07CiAgICBpZiAodHlwZW9mKGZvbykg");
    sb.append("PT0gImZ1bmN0aW9uIikgewogICAgICBmb28ocGFyZW50LCBzdGF0ZSwgY2hpbGRfbWFrZXIsIGNmZyk7");
    sb.append("CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmVycm9yKCJmYWlsZWQgdG8gZmluZCB0ZW1wbGF0ZTog");
    sb.append("IiArIG5hbWUpOwogICAgfQogIH07CgogIC8vIFJVTlRJTUUgfCA8dGFnIHJ4OnN3aXRjaD1wYXRoIC4u");
    sb.append("PgogIHNlbGYuU1cgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBuYW1lLCBjaGlsZHJlbk1h");
    sb.append("a2VyKSB7CiAgICB2YXIgc3dzdCA9IHsgcHJpb3I6IG51bGwgfTsKICAgIGFkZF91bnN1Yihzd3N0KTsK");
    sb.append("ICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09IHRoaXMucHJp");
    sb.append("b3IpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5wcmlvciA9IHZhbHVlOwogICAg");
    sb.append("ICBmaXJlX3Vuc3ViKHRoaXMpOwogICAgICBudWtlKHBhcmVudCk7CiAgICAgIHZhciBzdGF0ZSA9IGZv");
    sb.append("cmsocHJpb3JTdGF0ZSk7CiAgICAgIGNoaWxkcmVuTWFrZXIocGFyZW50LCBzZWxmLnBEKHN0YXRlKSwg");
    sb.append("IiIgKyB2YWx1ZSk7CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdGhpcyk7CiAgICB9LmJpbmQo");
    sb.append("c3dzdCk7CiAgICBzdWJzY3JpYmUocHJpb3JTdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBSVU5U");
    sb.append("SU1FIHwgPHRhZyByeDppdGVyYXRlPXBhdGggLi4uPgogIHNlbGYuSVQgPSBmdW5jdGlvbiAocGFyZW50");
    sb.append("RG9tLCBzdGF0ZSwgbmFtZSwgZXhwYW5kVmlldywgbWFrZXIsIGhpZGVPblplcm8pIHsKICAgIHZhciBp");
    sb.append("dF9zdGF0ZSA9IHNlbGYucElFKHN0YXRlLCBuYW1lLCBleHBhbmRWaWV3KTsKICAgIHZhciBkb21CeUtl");
    sb.append("eSA9IHt9OwogICAgdmFyIHZpZXdVblN1YkJ5S2V5ID0ge307CiAgICB2YXIga2lsbCA9IGZ1bmN0aW9u");
    sb.append("ICgpIHsKICAgICAgZm9yICh2YXIga2V5IGluIHZpZXdVblN1YkJ5S2V5KSB7CiAgICAgICAgZmlyZV91");
    sb.append("bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAgICAgICBkZWxldGUgdmlld1VuU3ViQnlLZXlba2V5");
    sb.append("XTsKICAgICAgfQogICAgICBmb3IgKHZhciBrZXkgaW4gZG9tQnlLZXkpIHsKICAgICAgICBkZWxldGUg");
    sb.append("ZG9tQnlLZXlba2V5XTsKICAgICAgfQogICAgfTsKICAgIGlmIChoaWRlT25aZXJvKSB7CiAgICAgIHBh");
    sb.append("cmVudERvbS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgfQoKICAgIHZhciBzaWduYWxzID0ge2lz");
    sb.append("TmV3OmZhbHNlfTsKCiAgICB2YXIgc3ViID0gewogICAgICAiKyI6IGZ1bmN0aW9uIChrZXkpIHsKICAg");
    sb.append("ICAgICB2YXIgbmV3X3N0YXRlID0gZm9yayhzZWxmLnBJRShpdF9zdGF0ZSwga2V5LCBleHBhbmRWaWV3");
    sb.append("KSk7CiAgICAgICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgICAgIHZhciBkb20gPSBtYWtl");
    sb.append("cihuZXdfc3RhdGUpOwogICAgICAgIHNpZ25hbHMuaXNOZXcgPSB0cnVlOwogICAgICAgIGRvbUJ5S2V5");
    sb.append("W2tleV0gPSBkb207CiAgICAgICAgdmlld1VuU3ViQnlLZXlba2V5XSA9IHVuc3ViOwogICAgICAgIHBh");
    sb.append("cmVudERvbS5hcHBlbmQoZG9tKTsKICAgICAgICB2YXIgaXRlbV9kZWx0YSA9IG5ld19zdGF0ZS5kYXRh");
    sb.append("LmRlbHRhOwogICAgICAgIG5ld19zdGF0ZS5kYXRhLmRlbHRhID0ge307CiAgICAgICAgaWYgKG5ld19z");
    sb.append("dGF0ZS5kYXRhLnBhcmVudCAmJiBuZXdfc3RhdGUuZGF0YS5wYXRoICYmIG5ld19zdGF0ZS5kYXRhLnBh");
    sb.append("cmVudC5kZWx0YSkgewogICAgICAgICAgbmV3X3N0YXRlLmRhdGEucGFyZW50LmRlbHRhW25ld19zdGF0");
    sb.append("ZS5kYXRhLnBhdGhdID0gbmV3X3N0YXRlLmRhdGEuZGVsdGE7CiAgICAgICAgfQogICAgICAgIHN1YnNj");
    sb.append("cmliZV9zdGF0ZShuZXdfc3RhdGUsIHVuc3ViKTsKICAgICAgICBpZiAoZXhwYW5kVmlldykgewogICAg");
    sb.append("ICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXRoX3RvKG5ld19zdGF0ZS52aWV3LCB7IiRrZXki");
    sb.append("OiBrZXl9KSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gaXRlbV9kZWx0YTsKICAgICAgfSwKICAg");
    sb.append("ICAgIi0iOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKGtleSBpbiBkb21CeUtleSkgewogICAg");
    sb.append("ICAgICAgdHJ5IHsKICAgICAgICAgICAgcGFyZW50RG9tLnJlbW92ZUNoaWxkKGRvbUJ5S2V5W2tleV0p");
    sb.append("OwogICAgICAgICAgfSBjYXRjaCAoZXgpIHt9CiAgICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsK");
    sb.append("ICAgICAgICB9CiAgICAgICAgaWYgKGtleSBpbiB2aWV3VW5TdWJCeUtleSkgewogICAgICAgICAgZmly");
    sb.append("ZV91bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAgICAgICAgIGRlbGV0ZSB2aWV3VW5TdWJCeUtl");
    sb.append("eVtrZXldOwogICAgICAgIH0KICAgICAgfSwKICAgICAgIn4iOiBmdW5jdGlvbiAob3JkKSB7CiAgICAg");
    sb.append("ICAgdmFyIHZhbHVlVG9TZXQgPSBmYWxzZTsKICAgICAgICAvLyB0aGUgdmFsdWVzIGFyZSBmaWxsaW5n");
    sb.append("IHVwIEFGVEVyIHRoZSB2YWx1ZSB3YXMgc2V0LAogICAgICAgIC8vIHNvIGRldGVjdCB0aGUgYWJzZW5j");
    sb.append("ZSBvZiBhIHZhbHVlIGFsb25nIHdpdGggdGhlIGV4aXN0ZW5jZSBvZiBhIHZhbHVlCiAgICAgICAgaWYg");
    sb.append("KCFwYXJlbnREb20udmFsdWUgJiYgcGFyZW50RG9tLnJ4dmFsdWUgIT0gIiIpIHsKICAgICAgICAgIHZh");
    sb.append("bHVlVG9TZXQgPSBwYXJlbnREb20ucnh2YWx1ZTsKICAgICAgICAgIC8vIHRoaXMgdmFsdWUsIHdlIHdh");
    sb.append("bnQgdG8gcmVzdG9yZSBvbmNlCiAgICAgICAgfQogICAgICAgIGlmIChoaWRlT25aZXJvKSB7CiAgICAg");
    sb.append("ICAgICBpZiAob3JkLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHBhcmVudERvbS5zdHlsZS5kaXNw");
    sb.append("bGF5ID0gIm5vbmUiOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcGFyZW50RG9tLnN0eWxl");
    sb.append("LmRpc3BsYXkgPSAiIjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgbnVrZShwYXJlbnREb20p");
    sb.append("OwogICAgICAgIGlmIChvcmQgPT0gbnVsbCkgewogICAgICAgICAga2lsbCgpOwogICAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG9yZC5sZW5ndGg7IGsrKykg");
    sb.append("ewogICAgICAgICAgcGFyZW50RG9tLmFwcGVuZChkb21CeUtleVtvcmRba11dKTsKICAgICAgICB9CiAg");
    sb.append("ICAgICAgaWYgKHZhbHVlVG9TZXQpIHsKICAgICAgICAgIHBhcmVudERvbS52YWx1ZSA9IHZhbHVlVG9T");
    sb.append("ZXQ7CiAgICAgICAgfQogICAgICAgIHBhcmVudERvbS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgib3Jk");
    sb.append("ZXJlZCIpKTsKICAgICAgICBpZiAoc2lnbmFscy5pc05ldykgewogICAgICAgICAgcGFyZW50RG9tLmRp");
    sb.append("c3BhdGNoRXZlbnQobmV3IEV2ZW50KCJuZXciKSk7CiAgICAgICAgICBzaWduYWxzLmlzTmV3ID0gZmFs");
    sb.append("c2U7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIp");
    sb.append("OwogIH07CgogIC8vIFJVTlRJTUUgfCA8aW5saW5lLWl0ZXJhdGUgcGF0aD0iLi4uIj4uLi48L2lubGlu");
    sb.append("ZS10ZW1wbGF0ZT4KICAvLyBSVU5USU1FIHwgPHRhZyByeDpyZXBsaWNhdGU9Ii4uLiIgLi4uPi4uLjwv");
    sb.append("dGFnPgogIHNlbGYuSUlUID0gZnVuY3Rpb24gKHBhcmVudERvbSwgc2libGluZ0RvbSwgc3RhdGUsIG5h");
    sb.append("bWUsIGV4cGFuZFZpZXcsIG1ha2VyKSB7CiAgICB2YXIgaXRfc3RhdGUgPSBzZWxmLnBJRShzdGF0ZSwg");
    sb.append("bmFtZSwgZXhwYW5kVmlldyk7CiAgICB2YXIgZG9tQnlLZXkgPSB7fTsKICAgIHZhciB2aWV3VW5TdWJC");
    sb.append("eUtleSA9IHt9OwogICAgdmFyIGtpbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFyIGtleSBp");
    sb.append("biB2aWV3VW5TdWJCeUtleSkgewogICAgICAgIGZpcmVfdW5zdWIodmlld1VuU3ViQnlLZXlba2V5XSk7");
    sb.append("CiAgICAgICAgZGVsZXRlIHZpZXdVblN1YkJ5S2V5W2tleV07CiAgICAgIH0KICAgICAgZm9yICh2YXIg");
    sb.append("a2V5IGluIGRvbUJ5S2V5KSB7CiAgICAgICAgZGVsZXRlIGRvbUJ5S2V5W2tleV07CiAgICAgIH0KICAg");
    sb.append("IH07CiAgICB2YXIgc2lnbmFscyA9IHtpc05ldzpmYWxzZX07CiAgICB2YXIgc3ViID0gewogICAgICAi");
    sb.append("KyI6IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB2YXIgbmV3X3N0YXRlID0gZm9yayhzZWxmLnBJRShp");
    sb.append("dF9zdGF0ZSwga2V5LCBleHBhbmRWaWV3KSk7CiAgICAgICAgdmFyIHVuc3ViID0gbWFrZV91bnN1Yigp");
    sb.append("OwogICAgICAgIHZhciBkb20gPSBtYWtlcihuZXdfc3RhdGUpOwogICAgICAgIHNpZ25hbHMuaXNOZXcg");
    sb.append("PSB0cnVlOwogICAgICAgIGRvbUJ5S2V5W2tleV0gPSBkb207CiAgICAgICAgdmlld1VuU3ViQnlLZXlb");
    sb.append("a2V5XSA9IHVuc3ViOwogICAgICAgIHZhciBiZWZvcmUgPSBzaWJsaW5nRG9tID09IG51bGwgPyBwYXJl");
    sb.append("bnREb20uZmlyc3RDaGlsZCA6IHNpYmxpbmdEb20ubmV4dFNpYmxpbmc7CiAgICAgICAgcGFyZW50RG9t");
    sb.append("Lmluc2VydEJlZm9yZShkb20sIGJlZm9yZSk7CiAgICAgICAgdmFyIGl0ZW1fZGVsdGEgPSBuZXdfc3Rh");
    sb.append("dGUuZGF0YS5kZWx0YTsKICAgICAgICBuZXdfc3RhdGUuZGF0YS5kZWx0YSA9IHt9OwogICAgICAgIGlm");
    sb.append("IChuZXdfc3RhdGUuZGF0YS5wYXJlbnQgJiYgbmV3X3N0YXRlLmRhdGEucGF0aCAmJiBuZXdfc3RhdGUu");
    sb.append("ZGF0YS5wYXJlbnQuZGVsdGEpIHsKICAgICAgICAgIG5ld19zdGF0ZS5kYXRhLnBhcmVudC5kZWx0YVtu");
    sb.append("ZXdfc3RhdGUuZGF0YS5wYXRoXSA9IG5ld19zdGF0ZS5kYXRhLmRlbHRhOwogICAgICAgIH0KICAgICAg");
    sb.append("ICBzdWJzY3JpYmVfc3RhdGUobmV3X3N0YXRlLCB1bnN1Yik7CiAgICAgICAgaWYgKGV4cGFuZFZpZXcp");
    sb.append("IHsKICAgICAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUocGF0aF90byhuZXdfc3RhdGUudmlldywg");
    sb.append("eyIka2V5Ijoga2V5fSkpOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIGl0ZW1fZGVsdGE7CiAgICAg");
    sb.append("IH0sCiAgICAgICItIjogZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmIChrZXkgaW4gZG9tQnlLZXkp");
    sb.append("IHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHBhcmVudERvbS5yZW1vdmVDaGlsZChkb21CeUtl");
    sb.append("eVtrZXldKTsKICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7fQogICAgICAgICAgZGVsZXRlIGRvbUJ5S2V5");
    sb.append("W2tleV07CiAgICAgICAgfQogICAgICAgIGlmIChrZXkgaW4gdmlld1VuU3ViQnlLZXkpIHsKICAgICAg");
    sb.append("ICAgIGZpcmVfdW5zdWIodmlld1VuU3ViQnlLZXlba2V5XSk7CiAgICAgICAgICBkZWxldGUgdmlld1Vu");
    sb.append("U3ViQnlLZXlba2V5XTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgICJ+IjogZnVuY3Rpb24gKG9yZCkg");
    sb.append("ewogICAgICAgIGlmIChvcmQgPT0gbnVsbCkgewogICAgICAgICAga2lsbCgpOwogICAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gb3JkLmxlbmd0aCAtIDE7IGsgPj0gMDsg");
    sb.append("ay0tKSB7CiAgICAgICAgICB2YXIgYmVmb3JlID0gc2libGluZ0RvbSA9PSBudWxsID8gcGFyZW50RG9t");
    sb.append("LmZpcnN0Q2hpbGQgOiBzaWJsaW5nRG9tLm5leHRTaWJsaW5nOwogICAgICAgICAgcGFyZW50RG9tLmlu");
    sb.append("c2VydEJlZm9yZShkb21CeUtleVtvcmRba11dLCBiZWZvcmUpOwogICAgICAgIH0KICAgICAgICBwYXJl");
    sb.append("bnREb20uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoIm9yZGVyZWQiKSk7CiAgICAgICAgaWYgKHNpZ25h");
    sb.append("bHMuaXNOZXcpIHsKICAgICAgICAgIHBhcmVudERvbS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgibmV3");
    sb.append("IikpOwogICAgICAgICAgc2lnbmFscy5pc05ldyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAg");
    sb.append("fTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICBzZWxmLmZpZGJhc2lzID0g");
    sb.append("MDsKICBzZWxmLkZBID0gZnVuY3Rpb24gKGRvbSwgc3RhdGUsIHJ4b2JqLCB1c2VEb21haW4sIG1ha2Vy");
    sb.append("KSB7CgogICAgdmFyIGlkID0gIl9hdXRvX2ZpZF8iICsgc2VsZi5maWRiYXNpczsKICAgIHNlbGYuZmlk");
    sb.append("YmFzaXMrKzsKCiAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwog");
    sb.append("ICAgaW5wdXQuaWQgPSBpZDsKICAgIGlucHV0LnR5cGUgPSAiZmlsZSI7CiAgICBpbnB1dC5zdHlsZS5k");
    sb.append("aXNwbGF5ID0gIm5vbmUiOwogICAgaW5wdXQuaWdub3JlX2J1aWxkX29iamVjdCA9IHRydWU7CiAgICBk");
    sb.append("b20uYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgdmFyIHZhbHVlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoImRpdiIpOwogICAgZG9tLmFwcGVuZENoaWxkKHZhbHVlcyk7CgogICAgdmFyIGxhYmVsID0gZG9j");
    sb.append("dW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKICAgIGxhYmVsLmh0bWxGb3IgPSBpZDsKICAgIG1h");
    sb.append("a2VyKHN0YXRlLCBsYWJlbCk7CiAgICBkb20uYXBwZW5kQ2hpbGQobGFiZWwpOwoKICAgIC8vIFRPRE86");
    sb.append("IGluZGV4IGxhYmVsIGNoaWxkcmVuCgogICAgdmFyIGhhbmRsZV9maW5kaW5nX2ZpbGUgPSBmdW5jdGlv");
    sb.append("bigpIHsKICAgICAgY29uc29sZS5sb2coInBpY2tpbmcgYSBmaWxlIik7CiAgICB9OwogICAgdmFyIGhh");
    sb.append("bmRsZV9zdGFydGVkID0gZnVuY3Rpb24oKSB7CiAgICAgIGNvbnNvbGUubG9nKCJ1cGxvYWQgc3RhcnRl");
    sb.append("ZCIpOwogICAgfTsKICAgIHZhciBoYW5kbGVfZmFpbHVyZSA9IGZ1bmN0aW9uKHJlYXNvbikgewogICAg");
    sb.append("ICBjb25zb2xlLmxvZygiZmFpbGVkOiIgKyByZWFzb24pOwogICAgfTsKICAgIHZhciBoYW5kbGVfc3Rh");
    sb.append("dHVzID0gZnVuY3Rpb24oYXQsIG14KSB7CiAgICAgIGNvbnNvbGUubG9nKCJ1cGxvYWQgc3RhdHVzOiIg");
    sb.append("KyBhdCArICIvIiArIG14KTsKICAgIH07CiAgICB2YXIgaGFuZGxlX3N1Y2Nlc3MgPSBmdW5jdGlvbihp");
    sb.append("ZCkgewogICAgICB2YXIgaWRBc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIp");
    sb.append("OwogICAgICBpZEFzRWxlbWVudC50eXBlID0gImhpZGRlbiI7CiAgICAgIGlkQXNFbGVtZW50Lm5hbWUg");
    sb.append("PSByeG9iai5uYW1lOwogICAgICBpZEFzRWxlbWVudC52YWx1ZSA9IGlkOwogICAgICBpZiAoIWlkQXNF");
    sb.append("bGVtZW50Lm5hbWUuZW5kc1dpdGgoIisiKSkgewogICAgICAgIG51a2UodmFsdWVzKTsKICAgICAgfQog");
    sb.append("ICAgICB2YWx1ZXMuYXBwZW5kQ2hpbGQoaWRBc0VsZW1lbnQpOwogICAgICAvLyBUT0RPOiBhZGQgYSBw");
    sb.append("cmV2aWV3IHRoaW5neQogICAgfTsKICAgIGxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFu");
    sb.append("ZGxlX2ZpbmRpbmdfZmlsZSk7CiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKAogICAgICAnY2hhbmdl");
    sb.append("JywKICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIGhhbmRsZV9zdGFydGVkKCk7CiAgICAgICAgdmFy");
    sb.append("IGZpbGVzID0gaW5wdXQuZmlsZXM7CiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCAhPSAxKSB7CiAgICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBmaWxlID0gZmlsZXNbMF07CiAgICAgICAg");
    sb.append("Ly8gcmVzb2x2ZSBpZGVudGl0eQogICAgICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQocnhvYmouaWRl");
    sb.append("bnRpdHksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0OyB9KTsKICAgICAgICBpZiAo");
    sb.append("aWRMb29rdXAuYWJvcnQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJhYm9ydCIpOwogICAgICAgICAg");
    sb.append("cmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAg");
    sb.append("ICAgICAgcmVhZGVyLm9ubG9hZCA9IChldnQpID0+IHsKICAgICAgICAgIHZhciB1OCA9IG5ldyBVaW50");
    sb.append("OEFycmF5KCBldnQudGFyZ2V0LnJlc3VsdCApOwogICAgICAgICAgdmFyIHByb2dyZXNzID0gewogICAg");
    sb.append("ICAgICAgICBwdHI6IG51bGwsCiAgICAgICAgICAgIGF0OiAwLAogICAgICAgICAgICBuZXh0OiBmdW5j");
    sb.append("dGlvbihjaHVua1JlcXVlc3QpIHsKICAgICAgICAgICAgICB2YXIgc3ogPSBjaHVua1JlcXVlc3QuY2h1");
    sb.append("bmtfcmVxdWVzdF9zaXplOwogICAgICAgICAgICAgIHZhciBhdCA9IHByb2dyZXNzLmF0OwogICAgICAg");
    sb.append("ICAgICAgIHZhciBteCA9IE1hdGgubWluKGF0ICsgc3osIHU4Lmxlbmd0aCk7CiAgICAgICAgICAgICAg");
    sb.append("aWYgKGF0ID09IG14KSB7CiAgICAgICAgICAgICAgICBwcm9ncmVzcy5wdHIuZmluaXNoKHsKICAgICAg");
    sb.append("ICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGhhcHB5KSB7CiAgICAgICAgICAgICAgICAgICAg");
    sb.append("aGFuZGxlX3N1Y2Nlc3MoaGFwcHkuYXNzZXRJZCk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAg");
    sb.append("ICAgICAgICAgIGZhaWx1cmUgOiBoYW5kbGVfZmFpbHVyZQogICAgICAgICAgICAgICAgfSk7CiAgICAg");
    sb.append("ICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBzbGljZWQgPSB1OC5zbGljZShhdCwg");
    sb.append("bXgpOwogICAgICAgICAgICAgICAgYXQgPSBteDsKICAgICAgICAgICAgICAgIHByb2dyZXNzLmF0ID0g");
    sb.append("YXQ7CiAgICAgICAgICAgICAgICB2YXIgYjY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLnNs");
    sb.append("aWNlZCkpOwogICAgICAgICAgICAgICAgcHJvZ3Jlc3MucHRyLmFwcGVuZCgibi9hIiwgYjY0LCB7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChzZXEpIHsKICAgICAgICAgICAgICAgICAg");
    sb.append("ICBoYW5kbGVfc3RhdHVzKGF0LCBteCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAg");
    sb.append("ICAgZmFpbHVyZSA6IGhhbmRsZV9mYWlsdXJlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWx1cmU6IGhhbmRsZV9mYWlsdXJlLAogICAg");
    sb.append("ICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7fQogICAgICAgICAgfTsKICAgICAgICAgIGlmICh1");
    sb.append("c2VEb21haW4pIHsKICAgICAgICAgICAgcHJvZ3Jlc3MucHRyID0gc3RhdGUuc2VydmljZS5BdHRhY2ht");
    sb.append("ZW50U3RhcnRCeURvbWFpbihpZExvb2t1cC5pZGVudGl0eSwgc2VsZi5kb21haW4sIGZpbGUubmFtZSwg");
    sb.append("ZmlsZS50eXBlLCBwcm9ncmVzcyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcm9ncmVz");
    sb.append("cy5wdHIgPSBzdGF0ZS5zZXJ2aWNlLkF0dGFjaG1lbnRTdGFydChpZExvb2t1cC5pZGVudGl0eSwgcnhv");
    sb.append("Ymouc3BhY2UsIHJ4b2JqLmtleSwgZmlsZS5uYW1lLCBmaWxlLnR5cGUsIHByb2dyZXNzKTsKICAgICAg");
    sb.append("ICAgIH0KICAgICAgICB9OwogICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKICAg");
    sb.append("ICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLi4gcng6bW9uaXRvcj0ic3RhdGUtcGF0aCIg");
    sb.append("cng6cmlzZT0iY29tbWFuZHMuLi4iIHJ4OmZhbGw9ImNvbW1hbmRzLi4uIgogIHNlbGYuTU4gPSBmdW5j");
    sb.append("dGlvbiAoZG9tLCBzdGF0ZSwgbmFtZSwgc2tpcEZpcnN0LCBkZWxheSkgewogICAgdmFyIHN1YiA9IGZ1");
    sb.append("bmN0aW9uICh2YWx1ZSkgewogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAg");
    sb.append("ICB2YXIgbiA9IDA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIG4gPSB0eXBlb2YgKHZhbHVlKSA9PSAn");
    sb.append("bnVtYmVyJyA/IHZhbHVlIDogcGFyc2VJbnQodmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGZhaWxlZFBh");
    sb.append("cnNpbmdOKSB7CiAgICAgICAgICBpZiAodmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT0gInRydWUiKSB7");
    sb.append("CiAgICAgICAgICAgIG4gPSAxOwogICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gZmFsc2UgfHwg");
    sb.append("dmFsdWUgPT0gImZhbHNlIikgewogICAgICAgICAgICBuID0gMDsKICAgICAgICAgIH0KICAgICAgICB9");
    sb.append("CiAgICAgICAgaWYgKHRoaXMuZmlyc3QpIHsKICAgICAgICAgIHRoaXMuYXQgPSBuOwogICAgICAgICAg");
    sb.append("dGhpcy5maXJzdCA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAo");
    sb.append("dGhpcy5hdCA8IG4pIHsKICAgICAgICAgIHZhciBlID0gbmV3IEV2ZW50KCJyaXNlIik7CiAgICAgICAg");
    sb.append("ICBkb20uZGlzcGF0Y2hFdmVudChlKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXQgPiBuKSB7CiAg");
    sb.append("ICAgICAgICB2YXIgZSA9IG5ldyBFdmVudCgiZmFsbCIpOwogICAgICAgICAgZG9tLmRpc3BhdGNoRXZl");
    sb.append("bnQoZSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuYXQgPSBuOwogICAgICB9LmJpbmQodGhpcyksIHRo");
    sb.append("aXMuZGVsYXkpOwogICAgfS5iaW5kKHthdDotMSwgZmlyc3Q6c2tpcEZpcnN0LCBkZWxheTpkZWxheSA/");
    sb.append("IGRlbGF5IDogMTB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBS");
    sb.append("VU5USU1FOiA8dGFnIC4uLiByeDpyZXBlYXQ9JD4KICBzZWxmLlJQID0gZnVuY3Rpb24gKHBhcmVudERv");
    sb.append("bSwgc3RhdGUsIG5hbWUsIGV4cGFuZFZpZXcsIG1ha2VyLCBoaWRlT25aZXJvKSB7CiAgICB2YXIgaXRf");
    sb.append("c3RhdGUgPSBzZWxmLnBJRShzdGF0ZSwgIiQiICsgbmFtZSwgZXhwYW5kVmlldyk7CiAgICBpZiAoaGlk");
    sb.append("ZU9uWmVybykgewogICAgICBwYXJlbnREb20uc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIH0KICAg");
    sb.append("IHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG4gPSAwOwogICAgICB0cnkgewog");
    sb.append("ICAgICAgIG4gPSB0eXBlb2YgKHZhbHVlKSA9PSAnbnVtYmVyJyA/IHZhbHVlIDogcGFyc2VJbnQodmFs");
    sb.append("dWUpOwogICAgICB9IGNhdGNoIChmYWlsZWRQYXJzaW5nTikgewogICAgICB9CiAgICAgIGlmIChoaWRl");
    sb.append("T25aZXJvKSB7CiAgICAgICAgaWYgKG4gPD0gMCkgewogICAgICAgICAgcGFyZW50RG9tLnN0eWxlLmRp");
    sb.append("c3BsYXkgPSAibm9uZSI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBhcmVudERvbS5zdHlsZS5k");
    sb.append("aXNwbGF5ID0gIiI7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBpc05ldyA9IGZhbHNlOwogICAg");
    sb.append("ICB3aGlsZSAodGhpcy5hdCA8IG4gLSAxKSB7CiAgICAgICAgdGhpcy5hdCArKzsKICAgICAgICB0aGlz");
    sb.append("LnRyYWNrICsrOwogICAgICAgIHZhciBuZXdfc3RhdGUgPSBmb3JrKHNlbGYucElFKGl0X3N0YXRlLCB0");
    sb.append("aGlzLnRyYWNrICsgIiIsIGV4cGFuZFZpZXcpKTsKICAgICAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3Vi");
    sb.append("KCk7CiAgICAgICAgdmFyIGRvbSA9IG1ha2VyKHNlbGYucEQobmV3X3N0YXRlKSk7CiAgICAgICAgdGhp");
    sb.append("cy5pdGVtc1t0aGlzLmF0XSA9IHt1bnN1Yjp1bnN1YiwgZG9tOmRvbX07CiAgICAgICAgcGFyZW50RG9t");
    sb.append("LmFwcGVuZChkb20pOwogICAgICAgIGlmIChleHBhbmRWaWV3KSB7CiAgICAgICAgICBzdGF0ZS52aWV3");
    sb.append("LnRyZWUudXBkYXRlKHBhdGhfdG8obmV3X3N0YXRlLnZpZXcsIHsiJGluZGV4IjogdGhpcy50cmFja30p");
    sb.append("KTsKICAgICAgICB9CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKG5ld19zdGF0ZSwgdW5zdWIpOwogICAg");
    sb.append("ICAgIGlzTmV3ID0gdHJ1ZTsKICAgICAgfQogICAgICB3aGlsZSAodGhpcy5hdCA+PSBuICYmIHRoaXMu");
    sb.append("YXQgPj0gMCkgewogICAgICAgIGZpcmVfdW5zdWIodGhpcy5pdGVtc1t0aGlzLmF0XS51bnN1Yik7CiAg");
    sb.append("ICAgICAgcGFyZW50RG9tLnJlbW92ZUNoaWxkKHRoaXMuaXRlbXNbdGhpcy5hdF0uZG9tKTsKICAgICAg");
    sb.append("ICB0aGlzLml0ZW1zW3RoaXMuYXRdID0gbnVsbDsKICAgICAgICBkZWxldGUgdGhpcy5pdGVtc1t0aGlz");
    sb.append("LmF0XTsKICAgICAgICB0aGlzLmF0LS07CiAgICAgIH0KICAgICAgaWYgKGlzTmV3KSB7CiAgICAgICAg");
    sb.append("cGFyZW50RG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJuZXciKSk7CiAgICAgIH0KICAgIH0uYmlu");
    sb.append("ZCh7aXRlbXM6W10sIGF0Oi0xLCB0cmFjazowfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1");
    sb.append("Yik7CiAgfQogIHZhciBmaW5kID0gZnVuY3Rpb24gKHN0YXRlLCBjaGFubmVsLCBrZXksIHZhbHVlKSB7");
    sb.append("CiAgICBpZiAoY2hhbm5lbCBpbiBzdGF0ZVsiZGF0YSJdLmNvbm5lY3Rpb24ub3V0c3RhbmRpbmcpIHsK");
    sb.append("ICAgICAgdmFyIGFyciA9IHN0YXRlWyJkYXRhIl0uY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVs");
    sb.append("XS5vcHRpb25zOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGFyci5sZW5ndGg7IGsrKykgewogICAg");
    sb.append("ICAgIHZhciBzID0gYXJyW2tdOwogICAgICAgIGlmIChrZXkgaW4gcyAmJiBzW2tleV0gPT0gdmFsdWUp");
    sb.append("IHsKICAgICAgICAgIHJldHVybiBzOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsK");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH07CgogIHZhciBjdXN0b21zID0g");
    sb.append("e307CgogIHNlbGYuUFJDVUFDID0gZnVuY3Rpb24gKG5hbWUsIGZvbykgewogICAgY3VzdG9tc1tuYW1l");
    sb.append("XSA9IGZvbzsKICB9OwoKICBzZWxmLmV4Q0MgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgY3Vz");
    sb.append("dG9tQ29tbWFuZE5hbWUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAo");
    sb.append("KSB7CiAgICAgIGlmIChjdXN0b21Db21tYW5kTmFtZSBpbiBjdXN0b21zKSB7CiAgICAgICAgY3VzdG9t");
    sb.append("c1tjdXN0b21Db21tYW5kTmFtZV0oc3RhdGUsIGRvbSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8v");
    sb.append("IGN1c3RvbSBldmVudCBvbiBmb3Jtczsgcng6c3VjY2Vzcz0iLi4uIgogIHZhciBmaXJlX3N1Y2Nlc3Mg");
    sb.append("PSBmdW5jdGlvbiAoZm9ybSkgewogICAgZm9ybS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgic3VjY2Vz");
    sb.append("cyIpKTsKICAgIGZvcm0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInN1Ym1pdHRlZCIpKTsKICB9Owog");
    sb.append("IHNlbGYuZmlyZV9zdWNjZXNzID0gZmlyZV9zdWNjZXNzOwoKICAvLyBjdXN0b20gZXZlbnQgb24gZm9y");
    sb.append("bXM7IHJ4OmZhaWxlZD0iLi4uIgogIHZhciBmaXJlX2ZhaWx1cmUgPSBmdW5jdGlvbiAoZG9tLCBtc2cp");
    sb.append("IHsKICAgIHZhciBlID0gbmV3IEV2ZW50KCJmYWlsdXJlIik7CiAgICBlLm1lc3NhZ2UgPSBtc2c7CiAg");
    sb.append("ICBjb25zb2xlLmVycm9yKG1zZyk7CiAgICBkb20uZGlzcGF0Y2hFdmVudChlKTsKICB9OwogIHNlbGYu");
    sb.append("ZmlyZV9mYWlsdXJlID0gZmlyZV9mYWlsdXJlOwoKICBzZWxmLmFDQyA9IGZ1bmN0aW9uIChmb3JtLCBz");
    sb.append("dGF0ZSwgY3VzdG9tQ29tbWFuZE5hbWUpIHsKICAgIHZhciBzaWduYWwgPSBmdW5jdGlvbiAobXNnKSB7");
    sb.append("CiAgICAgIGlmIChzaWduYWwgPT0gbnVsbCkgewogICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAg");
    sb.append("ICAgfSBlbHNlIHsKICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgbXNnKTsKICAgICAgfQogICAgfTsK");
    sb.append("ICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBp");
    sb.append("ZiAoY3VzdG9tQ29tbWFuZE5hbWUgaW4gY3VzdG9tcykgewogICAgICAgIGV2dC5wcmV2ZW50RGVmYXVs");
    sb.append("dCgpOwogICAgICAgIHZhciBvYmogPSBnZXRfZm9ybShmb3JtLCB7fSk7CiAgICAgICAgY3VzdG9tc1tj");
    sb.append("dXN0b21Db21tYW5kTmFtZV0ob2JqLCBzdGF0ZSwgc2lnbmFsLCBzZWxmKTsKICAgICAgICBmaXJlX3N1");
    sb.append("Y2Nlc3MoZm9ybSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWls");
    sb.append("ZWQgdG8gZmluZCAnIiArIGN1c3RvbUNvbW1hbmROYW1lICsgIiciKTsKICAgICAgfQogICAgfSwgdHJ1");
    sb.append("ZSk7CiAgfTsKCiAgdmFyIG1ha2VfY2hvaWNlX2FycmF5ID0gZnVuY3Rpb24gKHN0YXRlLCBjaGFubmVs");
    sb.append("KSB7CiAgICB2YXIgY2hvaWNlcyA9IHN0YXRlLmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwogICAgaWYg");
    sb.append("KCEoY2hhbm5lbCBpbiBjaG9pY2VzKSkgewogICAgICBjaG9pY2VzW2NoYW5uZWxdID0ge307CiAgICB9");
    sb.append("CiAgICB2YXIgY2hvaWNlID0gY2hvaWNlc1tjaGFubmVsXTsKICAgIHZhciBhcnIgPSBbXTsKICAgIGZv");
    sb.append("ciAodmFyIGlkIGluIGNob2ljZSkgewogICAgICBhcnIucHVzaChjaG9pY2VbaWRdKTsKICAgIH0KICAg");
    sb.append("IHJldHVybiBhcnI7CiAgfQoKICBzZWxmLmV4RklOID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUs");
    sb.append("IGNoYW5uZWwpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgIHZhciBhcnIgPSBtYWtlX2Nob2ljZV9hcnJheShzdGF0ZSwgY2hhbm5lbCk7CiAgICAgIHZhciBj");
    sb.append("bGVhciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBkZWxldGUgc3RhdGUuZGF0YS5jb25uZWN0aW9uLmNo");
    sb.append("b2ljZXNbY2hhbm5lbF07CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLm9uY2hvaWNlcyhjaGFu");
    sb.append("bmVsLCB7fSk7CiAgICAgIH07CiAgICAgIHN0YXRlLmRhdGEuY29ubmVjdGlvbi5wdHIuc2VuZChjaGFu");
    sb.append("bmVsLCBhcnIsIHsKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBj");
    sb.append("bGVhcigpOwogICAgICAgICAgY29uc29sZS5sb2coImZhaWxlZDoiICsgcmVhc29uKTsKICAgICAgICB9");
    sb.append("LAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBjbGVhcigpOwog");
    sb.append("ICAgICAgICAgY29uc29sZS5sb2coIlN1Y2Nlc3N8IiArIHBheWxvYWQuc2VxKTsKICAgICAgICB9CiAg");
    sb.append("ICAgIH0pOwogICAgfSk7CiAgfTsKCiAgc2VsZi5GSU4gPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0");
    sb.append("YXRlLCBjaGFubmVsLCBzaG91bGRCZSwgX2V4cGFuZCwgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7CiAg");
    sb.append("ICB2YXIgZmluYWxpemUgPSB7CiAgICAgIG93bmVyOiBwYXJlbnQsCiAgICAgIHNob3duOiBmYWxzZQog");
    sb.append("ICAgfTsKICAgIGFkZF91bnN1YihmaW5hbGl6ZSk7CgogICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9uIChz");
    sb.append("aG93KSB7CiAgICAgIGZpcmVfdW5zdWIoZmluYWxpemUpOwogICAgICBudWtlKHBhcmVudCk7CiAgICAg");
    sb.append("IHZhciBzdGF0ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGlmIChzaG93ID09PSBzaG91bGRCZSkg");
    sb.append("ewogICAgICAgIG1ha2VyVHJ1ZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBt");
    sb.append("YWtlckZhbHNlKHBhcmVudCwgc3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0");
    sb.append("ZSwgZmluYWxpemUpOwogICAgfTsKCiAgICBmaW5hbGl6ZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgIHZhciBvdXQgPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVs");
    sb.append("XTsKICAgICAgaWYgKCEob3V0KSkgcmV0dXJuOwogICAgICB2YXIgYXJyID0gbWFrZV9jaG9pY2VfYXJy");
    sb.append("YXkocHJpb3JTdGF0ZSwgY2hhbm5lbCk7CiAgICAgIHZhciByZXN1bHQgPSAoJ21pbicgaW4gb3V0ICYm");
    sb.append("ICdtYXgnIGluIG91dCkgPyAob3V0Lm1pbiA8PSBhcnIubGVuZ3RoICYmIGFyci5sZW5ndGggPD0gb3V0");
    sb.append("Lm1heCkgOiB0cnVlOwogICAgICBpZiAoZmluYWxpemUuZXZhbCAhPSByZXN1bHQpIHsKICAgICAgICBm");
    sb.append("aW5hbGl6ZS5ldmFsID0gcmVzdWx0OwogICAgICAgIGNoYW5nZShmaW5hbGl6ZS5ldmFsKTsKICAgICAg");
    sb.append("fQogICAgfTsKCiAgICBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5zdWJzY3JpYmVfY2hvaWNlKGNo");
    sb.append("YW5uZWwsIGZ1bmN0aW9uICgpIHsKICAgICAgZmluYWxpemUudXBkYXRlKCk7CiAgICAgIC8vIFRPRE86");
    sb.append("IHJldHVybiB3aGV0aGVyIG9yIG5vdCB0aGlzIG5lZWRzIHRvIGJlIGF4ZWQKICAgICAgcmV0dXJuIHRy");
    sb.append("dWU7CiAgICB9KTsKICB9OwoKICB2YXIgZm9ybV9vZiA9IGZ1bmN0aW9uKGRvbSkgewogICAgdmFyIG5l");
    sb.append("eHQgPSBkb207CiAgICB3aGlsZSAobmV4dCAhPSBudWxsKSB7CiAgICAgIGlmIChuZXh0LnRhZ05hbWUu");
    sb.append("dG9VcHBlckNhc2UoKSA9PSAiRk9STSIpIHsKICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgfQogICAg");
    sb.append("ICBuZXh0ID0gbmV4dC5wYXJlbnRFbGVtZW50OwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2");
    sb.append("YXIgcmVnX2V2ZW50ID0gZnVuY3Rpb24gKHN0YXRlLCBkb20sIHR5cGUsIHJ1bm5hYmxlKSB7CiAgICAv");
    sb.append("LyBUT0RPOiBjb25uZWN0ZWQvZGlzY29ubmVjdGVkIGFzIHNwZWNpYWwgZXZlbnRzIHRvIGNvbnNpZGVy");
    sb.append("CiAgICBpZiAodHlwZSA9PSAiY2hlY2siIHx8IHR5cGUgPT0gInVuY2hlY2siKSB7CiAgICAgIGRvbS5h");
    sb.append("ZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgICAgICBpZiAodGhpcy50eXBl");
    sb.append("ID09ICJjaGVjayIgJiYgZG9tLmNoZWNrZWQpIHsKICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAg");
    sb.append("fSBlbHNlIGlmICh0aGlzLnR5cGUgPT0gInVuY2hlY2siICYmICFkb20uY2hlY2tlZCkgewogICAgICAg");
    sb.append("ICAgcnVubmFibGUoKTsKICAgICAgICB9CiAgICAgIH0uYmluZCh7dHlwZTp0eXBlfSkpOwogICAgfSBl");
    sb.append("bHNlIGlmICh0eXBlID09ICJsb2FkIikgewogICAgICB3aW5kb3cuc2V0VGltZW91dChydW5uYWJsZSwg");
    sb.append("MSk7CiAgICB9IGVsc2UgaWYgKHR5cGU9PSJzdWJtaXQiIHx8IHR5cGU9PSJzdWJtaXR0ZWQiKSB7CiAg");
    sb.append("ICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBmb3JtID0gZm9ybV9v");
    sb.append("Zihkb20pOwogICAgICAgIGlmIChmb3JtKSB7CiAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIo");
    sb.append("dHlwZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyhk");
    sb.append("b20pKSB7CiAgICAgICAgICAgICAgcnVubmFibGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7");
    sb.append("CiAgICAgICAgfQogICAgICB9LCAxKTsKICAgIH0gZWxzZSBpZiAodHlwZS5zdGFydHNXaXRoKCJkZWxh");
    sb.append("eToiKSkgewogICAgICAvLyBkZWxheSB3aWxsIHJ1biBhZnRlciAkZGVsYXlUaW1lTVMgSUYgdGhlIGRv");
    sb.append("bSBlbGVtZW50IGlzIHN0aWxsIHZpc2libGUgdG8gdGhlIGRvY3VtZW50CiAgICAgIHZhciBkZWxheVRp");
    sb.append("bWVNUyA9IHBhcnNlSW50KHR5cGUuc3Vic3RyaW5nKDYpKTsKICAgICAgd2luZG93LnNldFRpbWVvdXQo");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAg");
    sb.append("ICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgfQogICAgICB9LCBkZWxheVRpbWVNUyk7CiAgICB9IGVs");
    sb.append("c2UgaWYgKHR5cGUgPT0gInNldHRsZSIpIHsKICAgICAgc3RhdGUuZGF0YS50cmVlLmFkZF9vbl9zZXR0");
    sb.append("bGUoZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gaWYgdGhlIERPTSBoYXMgYmVlbiBhZGRlZCB0byB0aGUg");
    sb.append("Ym9keSwgdGhlbiBydW4gdGhlIGNvZGUKICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyhk");
    sb.append("b20pKSB7CiAgICAgICAgICBydW5uYWJsZSgpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAg");
    sb.append("fQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gInNl");
    sb.append("dHRsZS1vbmNlIikgewogICAgICBzdGF0ZS5kYXRhLnRyZWUuYWRkX29uX3NldHRsZShmdW5jdGlvbigp");
    sb.append("IHsKICAgICAgICAvLyBpZiB0aGUgRE9NIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBib2R5LCB0aGVuIHJ1");
    sb.append("biB0aGUgY29kZQogICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAgICAg");
    sb.append("ICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSk7CiAg");
    sb.append("ICB9IGVsc2UgewogICAgICBpZiAodHlwZSA9PSAiY2xpY2siKSB7CiAgICAgICAgZG9tLmFkZEV2ZW50");
    sb.append("TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgIHZhciBmaXJlID0gdHJ1ZTsK");
    sb.append("ICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciBlbCA9IGV2ZW50LnRhcmdldDsKICAgICAgICAg");
    sb.append("ICAgd2hpbGUgKGVsICYmIGZpcmUpIHsKICAgICAgICAgICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdw");
    sb.append("cmV2ZW50OmNsaWNrJykpIHsKICAgICAgICAgICAgICAgIGZpcmUgPSBmYWxzZTsKICAgICAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50OwogICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICB9IGNhdGNoIChleCkgewogICAgICAgICAgfQogICAgICAgICAgaWYgKGZpcmUpIHsKICAgICAg");
    sb.append("ICAgICAgcnVubmFibGUoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBydW5uYWJsZSk7CiAgICAgIH0KICAgIH0KICB9");
    sb.append("CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4uIHJ4OmV2ZW50PSJzaWduLW91dCIgLi4uPgogIHNlbGYuYlNP");
    sb.append("ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgcnVuOiBmdW5jdGlvbigpIHsKICAgICAg");
    sb.append("ICBzZWxmLlNJR05PVVQoKTsKICAgICAgfSwKICAgICAgbWVyZ2UgOiBmdW5jdGlvbigpIHsgcmV0dXJu");
    sb.append("IHt9OyB9CiAgICB9OwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBzZXQ6");
    sb.append("bmFtZT12YWx1ZSAuLi4iPgogIHNlbGYuYlMgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgbmFtZSwgdmFs");
    sb.append("dWUpIHsKICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVybiB7");
    sb.append("CiAgICAgICAgcnVuOiBmdW5jdGlvbigpIHt9LCAvLyBkbyBub3RoaW5nLCB0aGlzIGlzIGEgc2ltcGxl");
    sb.append("IG1lcmdlCiAgICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIG9iaiA9IHt9Owog");
    sb.append("ICAgICAgICAgb2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8o");
    sb.append("c3RhdGUudmlldywgb2JqKTsKICAgICAgICAgIHJldHVybiBkZWx0YTsKICAgICAgICB9CiAgICAgIH0K");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAg");
    sb.append("ICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgcmV0dXJuIHsKICAg");
    sb.append("ICAgICBydW46IGZ1bmN0aW9uKCkge30sIC8vIGRvIG5vdGhpbmcsIHRoaXMgaXMgYSBzaW1wbGUgbWVy");
    sb.append("Z2UKICAgICAgICBtZXJnZTogZnVuY3Rpb24oKSB7IHJldHVybiBkZWx0YTsgfQogICAgICB9CiAgICB9");
    sb.append("CiAgfTsKCiAgdmFyIG1lcmdlX2RlbHRhID0gZnVuY3Rpb24oYSwgYikgewogICAgaWYgKHR5cGVvZihh");
    sb.append("KSA9PSAib2JqZWN0IiAmJiB0eXBlb2YoYikgPT0gIm9iamVjdCIpIHsKICAgICAgdmFyIHJlc3VsdCA9");
    sb.append("IHt9OwogICAgICBmb3IgKHZhciBrIGluIGEpIHsKICAgICAgICBpZiAoayBpbiBiKSB7CiAgICAgICAg");
    sb.append("ICByZXN1bHRba10gPSBtZXJnZV9kZWx0YShhW2tdLCBiW2tdKTsKICAgICAgICB9IGVsc2UgewogICAg");
    sb.append("ICAgICAgcmVzdWx0W2tdID0gYVtrXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yKHZhciBrIGlu");
    sb.append("IGIpIHsKICAgICAgICBpZiAoIShrIGluIGEpKSB7CiAgICAgICAgICByZXN1bHRba10gPSBiW2tdOwog");
    sb.append("ICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmV0dXJuIGE7CiAg");
    sb.append("fTsKICBzZWxmLk1EID0gbWVyZ2VfZGVsdGE7CgogIHNlbGYub25CID0gZnVuY3Rpb24oZG9tLCB0eXBl");
    sb.append("LCBzdGF0ZSwgYXJyKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24oKSB7");
    sb.append("CiAgICAgIHZhciBzdW0gPSB7fTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBhcnIubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgICB2YXIgY21kID0gYXJyW2tdOwogICAgICAgIGNtZC5ydW4oKTsKICAgICAgICB2");
    sb.append("YXIgdG9NZXJnZSA9IGNtZC5tZXJnZSgpCiAgICAgICAgc3VtID0gbWVyZ2VfZGVsdGEoc3VtLCB0b01l");
    sb.append("cmdlKTsKICAgICAgfQogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHN1bSk7CiAgICB9KTsKICB9");
    sb.append("OwoKICAvLyBjaG9vc2UKICBzZWxmLmV4Q0ggPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFt");
    sb.append("ZSwgY2hhbm5lbCwga2V5KSB7CiAgICB2YXIgZGVjaWRlID0geyB2YWx1ZTogbnVsbCB9OwogICAgcmVn");
    sb.append("X2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHJlc3VsdCA9IGZp");
    sb.append("bmQoc3RhdGUsIGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKTsKICAgICAgaWYgKHJlc3VsdCAhPSBu");
    sb.append("dWxsKSB7CiAgICAgICAgdmFyIGNob2ljZXMgPSBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24uY2hvaWNlczsK");
    sb.append("ICAgICAgICBpZiAoIShjaGFubmVsIGluIGNob2ljZXMpKSB7CiAgICAgICAgICBjaG9pY2VzW2NoYW5u");
    sb.append("ZWxdID0ge307CiAgICAgICAgfQogICAgICAgIHZhciBjaG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxdOwog");
    sb.append("ICAgICAgIHZhciB2YWxLZXkgPSByZXN1bHRba2V5XTsKICAgICAgICBpZiAodmFsS2V5IGluIGNob2lj");
    sb.append("ZSkgewogICAgICAgICAgZGVsZXRlIGNob2ljZVt2YWxLZXldOwogICAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgICBjaG9pY2VbdmFsS2V5XSA9IHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgc3RhdGUuZGF0YS5j");
    sb.append("b25uZWN0aW9uLm9uY2hvaWNlcyhjaGFubmVsLCBjaG9pY2UpOwogICAgICB9CiAgICB9KTsKICAgIHN1");
    sb.append("YnNjcmliZShzdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRlY2lkZS52YWx1ZSA9");
    sb.append("IHZhbHVlOwogICAgfSk7CiAgfTsKCiAgLy8gZGVjaWRlCiAgc2VsZi5leEQgPSBmdW5jdGlvbiAoZG9t");
    sb.append("LCB0eXBlLCBzdGF0ZSwgbmFtZSwgY2hhbm5lbCwga2V5KSB7CiAgICB2YXIgZGVjaWRlID0geyB2YWx1");
    sb.append("ZTogbnVsbCB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgdmFyIHJlc3VsdCA9IGZpbmQoc3RhdGUsIGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKTsKICAg");
    sb.append("ICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7CiAgICAgICAgbGV0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93");
    sb.append("KCk7CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5kKGNoYW5uZWwsIHJlc3VsdCwg");
    sb.append("ewogICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewoKICAgICAgICAgIH0sCiAgICAg");
    sb.append("ICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygi");
    sb.append("U3VjY2Vzc3wiICsgcGF5bG9hZC5zZXEgKyAiO2xhdGVuY3k9IiArIChwZXJmb3JtYW5jZS5ub3coKSAt");
    sb.append("IHN0YXJ0KSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgc3Vic2Ny");
    sb.append("aWJlKHN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgZGVjaWRlLnZhbHVlID0gdmFs");
    sb.append("dWU7CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZmlyZTpj");
    sb.append("aGFubmVsIC4uLiIgLi4uPgogIHNlbGYub25GUiA9IGZ1bmN0aW9uIChzdGF0ZSwgZG9tLCB0eXBlLCBj");
    sb.append("aGFubmVsKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAg");
    sb.append("ICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbCwge30sIHsKICAgICAgICBzdWNj");
    sb.append("ZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiU0VOVCAnIiArIGNoYW5uZWwg");
    sb.append("KyAiJyIpOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAg");
    sb.append("ICAgICAgY29uc29sZS5sb2coIkZBSUxFRCBUTyBGSVJFICciICsgY2hhbm5lbCArICInIERVRToiICsg");
    sb.append("cmVhc29uKTsgJycKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICAvLyBSVU5USU1FOiA8");
    sb.append("dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZm9yY2UtYXV0aD1uYW1lLHRva2VuIC4uLiI+CiAgc2VsZi5vbkZP");
    sb.append("UkNFX0FVVEggPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBpZGVudGl0eU5hbWUsIGlkZW50aXR5KSB7CiAg");
    sb.append("ICByZWdfZXZlbnQobnVsbCwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIFRPRE86IHJl");
    sb.append("bW92ZSB0aGlzCiAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IGlkZW50aXR5OwogICAgICBs");
    sb.append("b2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgaWRlbnRpdHkpOwog");
    sb.append("ICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHRlOm5hbWUgLi4u");
    sb.append("Ij4KICBzZWxmLm9uVE0gPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgb3gsIG95KSB7");
    sb.append("CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZh");
    sb.append("ciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gewogICAgICAgIHg6ZXZlbnQuY2xpZW50WCArIHdp");
    sb.append("bmRvdy5zY3JvbGxYICsgb3gsCiAgICAgICAgeTpldmVudC5jbGllbnRZICsgd2luZG93LnNjcm9sbFkg");
    sb.append("KyBveQogICAgICB9OwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAg");
    sb.append("ICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsKICAgIH0pOwogIH07Cgog");
    sb.append("IC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiB0ZTpuYW1lIC4uLiI+CiAgc2VsZi5vblRF");
    sb.append("ID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG5hbWUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwg");
    sb.append("ZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpb");
    sb.append("bmFtZV0gPSBldmVudC5tZXNzYWdlOwogICAgICBpZiAoZXZlbnQubWVzc2FnZSkgewogICAgICAgIHZh");
    sb.append("ciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgICBzdGF0ZVtzdGF0ZS5jdXJy");
    sb.append("ZW50XS50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6");
    sb.append("IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiByZXNldCAuLi4iPgogIHNlbGYub1JTVCA9IGZ1bmN0aW9uIChk");
    sb.append("b20sIHR5cGUsIHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24g");
    sb.append("KGV2ZW50KSB7CiAgICAgIHZhciBmID0gZm9ybV9vZihkb20pOwogICAgICBpZiAoZiAhPSBudWxsKSB7");
    sb.append("CiAgICAgICAgZi5yZXNldCgpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFn");
    sb.append("IC4uIHJ4OmV2ZW50PSIuLi4gcmVzZXQgLi4uIj4KICBzZWxmLm9STEQgPSBmdW5jdGlvbiAoZG9tLCB0");
    sb.append("eXBlLCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVu");
    sb.append("dCkgewogICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0pOwogIH07CgogIHNlbGYuYlNCID0gZnVu");
    sb.append("Y3Rpb24oZG9tKSB7CiAgICByZXR1cm4gewogICAgICBydW46IGZ1bmN0aW9uKCkgewogICAgICAgIHZh");
    sb.append("ciBmID0gZm9ybV9vZihkb20pOwogICAgICAgIGlmIChmICE9IG51bGwpIHsKICAgICAgICAgIHZhciBl");
    sb.append("ID0gbmV3IFN1Ym1pdEV2ZW50KCdzdWJtaXQnLCB7CiAgICAgICAgICAgICdidWJibGVzJyAgICA6IHRy");
    sb.append("dWUsCiAgICAgICAgICAgICdjYW5jZWxhYmxlJyA6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAg");
    sb.append("Zi5kaXNwYXRjaEV2ZW50KGUpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWVyZ2U6IGZ1bmN0aW9u");
    sb.append("KCkgeyByZXR1cm4ge307IH0KICAgIH07CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVu");
    sb.append("dD0iLi4uIHN1Ym1pdCAuLi4iPgogIC8vIFRPRE86IERFUFJFQ0FURQogIHNlbGYub1NCTVQgPSBmdW5j");
    sb.append("dGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1");
    sb.append("bmN0aW9uIChldmVudCkgewogICAgICB2YXIgZiA9IGZvcm1fb2YoZG9tKTsKICAgICAgaWYgKGYgIT0g");
    sb.append("bnVsbCkgewogICAgICAgIHZhciBlID0gbmV3IFN1Ym1pdEV2ZW50KCdzdWJtaXQnLCB7CiAgICAgICAg");
    sb.append("ICAnYnViYmxlcycgICAgOiB0cnVlLAogICAgICAgICAgJ2NhbmNlbGFibGUnIDogdHJ1ZQogICAgICAg");
    sb.append("IH0pOwogICAgICAgIGYuZGlzcGF0Y2hFdmVudChlKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8g");
    sb.append("UlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHN1Ym1pdDokaWQgLi4uIj4KICBzZWxmLm9TRkkg");
    sb.append("PSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgaWQpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9t");
    sb.append("LCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGYgPSBkb2N1bWVudC5nZXRFbGVtZW50");
    sb.append("QnlJZChpZCk7CiAgICAgIGlmIChmICE9IG51bGwpIHsKICAgICAgICB2YXIgZSA9IG5ldyBTdWJtaXRF");
    sb.append("dmVudCgnc3VibWl0JywgewogICAgICAgICAgJ2J1YmJsZXMnICAgIDogdHJ1ZSwKICAgICAgICAgICdj");
    sb.append("YW5jZWxhYmxlJyA6IHRydWUKICAgICAgICB9KTsKICAgICAgICBmLmRpc3BhdGNoRXZlbnQoZSk7CiAg");
    sb.append("ICAgIH0KICAgIH0pOwogIH07CgogIHNlbGYuYk5LID0gZnVuY3Rpb24gKGRvbSkgewogICAgcmV0dXJu");
    sb.append("IHsKICAgICAgcnVuOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgY3VyID0gZG9tOwogICAgICAgIHdo");
    sb.append("aWxlIChjdXIudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9ICJOVUNMRUFSIikgewogICAgICAgICAgY3Vy");
    sb.append("ID0gY3VyLnBhcmVudEVsZW1lbnQ7CiAgICAgICAgfQogICAgICAgIGlmIChjdXIgIT0gbnVsbCkgewog");
    sb.append("ICAgICAgICAgbnVrZShjdXIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWVyZ2U6IGZ1bmN0aW9u");
    sb.append("KCkge30KICAgIH07CiAgfQoKICBzZWxmLm9OSyA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlKSB7");
    sb.append("CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZh");
    sb.append("ciBjdXIgPSBkb207CiAgICAgIHdoaWxlIChjdXIudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9ICJOVUNM");
    sb.append("RUFSIikgewogICAgICAgIGN1ciA9IGN1ci5wYXJlbnRFbGVtZW50OwogICAgICB9CiAgICAgIGlmIChj");
    sb.append("dXIgIT0gbnVsbCkgewogICAgICAgIG51a2UoY3VyKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgc2Vs");
    sb.append("Zi5wVXMgPSBmdW5jdGlvbihkb20sIG1zRGVsYXkpIHsKICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKCdz");
    sb.append("Y3JvbGwnLCBmdW5jdGlvbihldikgewogICAgICBpZiAoZG9tLmlzUHJvdGVjdGVkKSB7CiAgICAgICAg");
    sb.append("Ly8gVE9ETzogaWYgZWxUb1Njcm9sbC5sYXN0X3Njcm9sbF9jb21tYW5kIGlzIG1heCBhbmQgdGhlIHNj");
    sb.append("cm9sbCBpcyB0aGVyZSwgdGhlbiBsb3dlciBpc1Byb3RlY3RlZAogICAgICB9CiAgICAgIGlmIChkb20u");
    sb.append("aWdub3JlRXZlbnQgfHwgZG9tLmlzUHJvdGVjdGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAg");
    sb.append("ICAgIGRvbS5pc1Byb3RlY3RlZCA9IHRydWU7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9u");
    sb.append("KCkgewogICAgICAgIGRvbS5pc1Byb3RlY3RlZCA9IGZhbHNlOwogICAgICB9LCBtc0RlbGF5KTsKICAg");
    sb.append("IH0pOwogIH07CgogIHNlbGYub1NDUiA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBvcmlnaW5h");
    sb.append("bENvbW1hbmQpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQp");
    sb.append("IHsKICAgICAgdmFyIGVsVG9TY3JvbGwgPSBkb207CiAgICAgIHZhciBjb21tYW5kID0gb3JpZ2luYWxD");
    sb.append("b21tYW5kOwogICAgICB3aGlsZSAoY29tbWFuZC5zdGFydHNXaXRoKCdwYXJlbnQtJykpIHsKICAgICAg");
    sb.append("ICBpZiAoZWxUb1Njcm9sbC5wYXJlbnRFbGVtZW50KSB7CiAgICAgICAgICBlbFRvU2Nyb2xsID0gZWxU");
    sb.append("b1Njcm9sbC5wYXJlbnRFbGVtZW50OwogICAgICAgIH0KICAgICAgICBjb21tYW5kID0gY29tbWFuZC5z");
    sb.append("dWJzdHJpbmcoNyk7CiAgICAgIH0KICAgICAgaWYgKGVsVG9TY3JvbGwuaXNQcm90ZWN0ZWQpIHsKICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZWxUb1Njcm9sbC5pZ25vcmVFdmVudCA9IHRydWU7CiAg");
    sb.append("ICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGVsVG9TY3JvbGwuaWdub3Jl");
    sb.append("RXZlbnQgPSBmYWxzZTsKICAgICAgfSwgMTAwKTsKICAgICAgc3dpdGNoIChjb21tYW5kKSB7CiAgICAg");
    sb.append("ICAgY2FzZSAnbWluJzogewogICAgICAgICAgZWxUb1Njcm9sbC5sYXN0X3Njcm9sbF9jb21tYW5kID0g");
    sb.append("J21pbic7CiAgICAgICAgICBlbFRvU2Nyb2xsLnNjcm9sbFRvKDAsIDApOwogICAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICAgIH0KICAgICAgICBjYXNlICdtYXgnOiB7CiAgICAgICAgICBlbFRvU2Nyb2xsLmxhc3Rf");
    sb.append("c2Nyb2xsX2NvbW1hbmQgPSAnbWF4JzsKICAgICAgICAgIGVsVG9TY3JvbGwuc2Nyb2xsVG8oMCwgZWxU");
    sb.append("b1Njcm9sbC5zY3JvbGxIZWlnaHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQog");
    sb.append("ICAgfSk7CiAgfTsKCiAgc2VsZi5vVUNLID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUpIHsKICAg");
    sb.append("IHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgZG9tLmNo");
    sb.append("ZWNrZWQgPSBmYWxzZTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9");
    sb.append("Ii4uLiBnb3RvOnVyaSAuLi4iPgogIHNlbGYub25HTyA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRl");
    sb.append("LCB2YWx1ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgdmFyIHVyaSA9ICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24iKSA/IHZhbHVlKCkgOiB2YWx1");
    sb.append("ZTsKICAgICAgc2VsZi5nb3RvKHVyaSwgZmFsc2UpOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTog");
    sb.append("PHRhZyAuLiByeDpldmVudD0iLi4uIHRvZ2dsZTpuYW1lIC4uLiI+CiAgc2VsZi5vblQgPSBmdW5jdGlv");
    sb.append("biAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSkgewogICAgdmFyIGNhcHR1cmVkID0geyB2YWx1ZTogZmFs");
    sb.append("c2UgfTsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZh");
    sb.append("ciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gIWNhcHR1cmVkLnZhbHVlOwogICAgICB2YXIgZGVs");
    sb.append("dGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUo");
    sb.append("ZGVsdGEpOwogICAgfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkg");
    sb.append("ewogICAgICBjYXB0dXJlZC52YWx1ZSA9IHZhbHVlID09IHRydWU7CiAgICB9KTsKICB9OwoKICB2YXIg");
    sb.append("b3JkZXJfdG9nZ2xlID0gZnVuY3Rpb24ocHJpb3IsIHZhbCkgewogICAgdmFyIHBhcnRzID0gcHJpb3Iu");
    sb.append("c3BsaXQoIiwiKTsKICAgIHZhciBwcmVmaXggPSAnJzsKICAgIHZhciBuZXh0ID0gWyIiXTsKICAgIGZv");
    sb.append("ciAodmFyIGsgPSAwOyBrIDwgcGFydHMubGVuZ3RoOyBrKyspIHsKICAgICAgaWYgKHBhcnRzW2tdID09");
    sb.append("ICIiKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSBpZiAodmFsID09IHBhcnRzW2tdKSB7");
    sb.append("CiAgICAgICAgcHJlZml4ID0gJy0nOwogICAgICB9IGVsc2UgaWYgKCItIiArIHZhbCA9PXBhcnRzW2td");
    sb.append("KSB7CiAgICAgICAgcHJlZml4ID0gJyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dC5wdXNoKHBh");
    sb.append("cnRzW2tdKTsKICAgICAgfQogICAgfQogICAgbmV4dFswXSA9IHByZWZpeCArIHZhbDsKICAgIHJldHVy");
    sb.append("biBuZXh0LmpvaW4oIiwiKTsKICB9CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBv");
    sb.append("cmRlci10b2dnbGU6bmFtZT12YWwgLi4uIj4KICBzZWxmLm9uT1QgPSBmdW5jdGlvbiAoZG9tLCB0eXBl");
    sb.append("LCBzdGF0ZSwgbmFtZSwgdmFsKSB7CiAgICB2YXIgY2FwdHVyZWQgPSB7IHZhbHVlOiAiIiB9OwogICAg");
    sb.append("cmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9iaiA9IHt9");
    sb.append("OwogICAgICBvYmpbbmFtZV0gPSBvcmRlcl90b2dnbGUoY2FwdHVyZWQudmFsdWUsIHZhbCk7CiAgICAg");
    sb.append("IHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgc3RhdGVbc3RhdGUuY3Vy");
    sb.append("cmVudF0udHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUs");
    sb.append("IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBjYXB0dXJlZC52YWx1ZSA9IHZhbHVlOwogICAgfSk7CiAg");
    sb.append("fTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIGRlbHRhOm5hbWU9ZGlmZiIgLi4u");
    sb.append("Ij4KICBzZWxmLm9uRCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBuYW1lLCBkaWZmKSB7CiAg");
    sb.append("ICB2YXIgY2FwdHVyZWQgPSB7IHZhbHVlOiAwIH07CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlw");
    sb.append("ZSwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgb2JqID0ge307CiAgICAgIG9ialtuYW1lXSA9IGNhcHR1");
    sb.append("cmVkLnZhbHVlICsgZGlmZjsKICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmop");
    sb.append("OwogICAgICBzdGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9KTsKICAg");
    sb.append("IHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGlmICh0eXBlb2Yg");
    sb.append("KHZhbHVlKSA9PSAibnVtYmVyIikgewogICAgICAgIGNhcHR1cmVkLnZhbHVlID0gdmFsdWU7CiAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgdmFyIHZhbCA9IHBhcnNlRmxvYXQodmFsdWUpOwogICAgICAgIGlmICgh");
    sb.append("aXNOYU4odmFsKSkgewogICAgICAgICAgY2FwdHVyZWQudmFsdWUgPSB2YWw7CiAgICAgICAgfQogICAg");
    sb.append("ICB9CiAgICB9KTsKICB9OwogIHNlbGYuQ1NFTiA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUs");
    sb.append("IGV2YWxTdGF0ZSwgY2hhbm5lbCwga2V5LCBuYW1lLCBzaG91bGRCZSwgX2V4cGFuZCwgbWFrZXJUcnVl");
    sb.append("LCBtYWtlckZhbHNlKSB7CiAgICB2YXIgY2hvc2VuID0gewogICAgICB2YWx1ZTogIiIsCiAgICAgIG93");
    sb.append("bmVyOiBwYXJlbnQsCiAgICAgIHNob3duOiBmYWxzZSwKICAgICAgZXZhbDogbnVsbAogICAgfTsKICAg");
    sb.append("IGFkZF91bnN1YihjaG9zZW4pOwogICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9uIChzaG93KSB7CiAgICAg");
    sb.append("IGZpcmVfdW5zdWIoY2hvc2VuKTsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICB2YXIgc3RhdGUgPSBm");
    sb.append("b3JrKHByaW9yU3RhdGUpOwogICAgICBpZiAoc2hvdyA9PT0gc2hvdWxkQmUpIHsKICAgICAgICBtYWtl");
    sb.append("clRydWUocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWFrZXJGYWxzZShwYXJl");
    sb.append("bnQsIHN0YXRlKTsKICAgICAgfQogICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIGNob3Nlbik7CiAg");
    sb.append("ICB9OwoKICAgIGNob3Nlbi51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvdXQgPSBwcmlv");
    sb.append("clN0YXRlLmRhdGEuY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVsXTsKICAgICAgaWYgKCEob3V0");
    sb.append("KSkgcmV0dXJuOwoKICAgICAgdmFyIGNob2ljZXMgPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5j");
    sb.append("aG9pY2VzOwogICAgICBpZiAoIShjaGFubmVsIGluIGNob2ljZXMpKSB7CiAgICAgICAgY2hvaWNlc1tj");
    sb.append("aGFubmVsXSA9IHt9OwogICAgICB9CiAgICAgIHZhciBjaG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxdOwog");
    sb.append("ICAgICB2YXIgcmVzdWx0ID0gY2hvc2VuLnZhbHVlIGluIGNob2ljZTsKICAgICAgaWYgKGNob3Nlbi5l");
    sb.append("dmFsICE9IHJlc3VsdCkgewogICAgICAgIGNob3Nlbi5ldmFsID0gcmVzdWx0OwogICAgICAgIGNoYW5n");
    sb.append("ZShjaG9zZW4uZXZhbCk7CiAgICAgIH0KICAgIH07CgogICAgcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rp");
    sb.append("b24uc3Vic2NyaWJlX2Nob2ljZShjaGFubmVsLCBmdW5jdGlvbiAoKSB7CiAgICAgIGNob3Nlbi51cGRh");
    sb.append("dGUoKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKCiAgICBzdWJzY3JpYmUoZXZhbFN0YXRlLCBu");
    sb.append("YW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgY2hvc2VuLnZhbHVlID0gdmFsdWU7CiAgICAgIGNo");
    sb.append("b3Nlbi51cGRhdGUoKTsKICAgIH0pOwogIH07CgogIHNlbGYuREUgPSBmdW5jdGlvbiAocGFyZW50LCBw");
    sb.append("cmlvclN0YXRlLCBldmFsU3RhdGUsIGNoYW5uZWwsIGtleSwgbmFtZSwgc2hvdWxkQmUsIF9leHBhbmQs");
    sb.append("IG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSkgewogICAgdmFyIGRlY2lkZSA9IHsKICAgICAgdmFsdWU6ICIi");
    sb.append("LAogICAgICBvd25lcjogcGFyZW50LAogICAgICBzaG93bjogZmFsc2UsCiAgICAgIGV2YWw6IG51bGwK");
    sb.append("ICAgIH07CiAgICBhZGRfdW5zdWIoZGVjaWRlKTsKICAgIHZhciBjaGFuZ2UgPSBmdW5jdGlvbiAoc2hv");
    sb.append("dykgewogICAgICBmaXJlX3Vuc3ViKGRlY2lkZSk7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFy");
    sb.append("IHN0YXRlID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgaWYgKHNob3cgPT09IHNob3VsZEJlKSB7CiAg");
    sb.append("ICAgICAgbWFrZXJUcnVlKHBhcmVudCwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIG1ha2Vy");
    sb.append("RmFsc2UocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCBk");
    sb.append("ZWNpZGUpOwogICAgfTsKCiAgICBkZWNpZGUudXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIg");
    sb.append("cmVzdWx0ID0gZmluZChwcmlvclN0YXRlLCBjaGFubmVsLCBrZXksIGRlY2lkZS52YWx1ZSkgIT0gbnVs");
    sb.append("bDsKICAgICAgaWYgKGRlY2lkZS5ldmFsICE9IHJlc3VsdCkgewogICAgICAgIGRlY2lkZS5ldmFsID0g");
    sb.append("cmVzdWx0OwogICAgICAgIGNoYW5nZShkZWNpZGUuZXZhbCk7CiAgICAgIH0KICAgIH07CgogICAgcHJp");
    sb.append("b3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24uc3Vic2NyaWJlKGNoYW5uZWwsIGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgZGVjaWRlLnVwZGF0ZSgpOwogICAgICAvLyBUT0RPOiByZXR1cm4gd2hldGhlciBvciBub3QgdGhp");
    sb.append("cyBuZWVkcyB0byBiZSBheGVkCiAgICAgIHJldHVybiB0cnVlOwogICAgfSk7CgogICAgc3Vic2NyaWJl");
    sb.append("KGV2YWxTdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRlY2lkZS52YWx1ZSA9IHZh");
    sb.append("bHVlOwogICAgICBkZWNpZGUudXBkYXRlKCk7CiAgICB9KTsKICB9OwoKICB2YXIgY29tbW9uSWYgPSBm");
    sb.append("dW5jdGlvbihwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHNob3VsZEJlLCBleHBhbmRWaWV3LCBtYWtlclRy");
    sb.append("dWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5nKSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7");
    sb.append("CiAgICBpZiAoZm9yY2VIaWRpbmcpIHsKICAgICAgcGFyZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7");
    sb.append("CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHZhciBzaG93ID0gKHZhbHVl");
    sb.append("ID8gdHJ1ZSA6IGZhbHNlKSA9PT0gc2hvdWxkQmU7CiAgICAgIGlmICh0aGlzLnNob3duID09IHNob3cp");
    sb.append("IHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5zaG93biA9IHNob3c7CiAgICAgIG51");
    sb.append("a2UocGFyZW50KTsKICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgIHZhciBuZXh0ID0gc2VsZi5w");
    sb.append("RChmb3JrKG9yaWdpbmFsU3RhdGUpKTsKICAgICAgaWYgKHNob3cpIHsKICAgICAgICBpZiAoZm9yY2VI");
    sb.append("aWRpbmcpIHsKICAgICAgICAgIHBhcmVudC5zdHlsZS5kaXNwbGF5ID0gIiI7CiAgICAgICAgfQogICAg");
    sb.append("ICAgIG1ha2VyVHJ1ZShwYXJlbnQsIG5leHQpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChmb3Jj");
    sb.append("ZUhpZGluZykgewogICAgICAgICAgcGFyZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAg");
    sb.append("fSBlbHNlIHsKICAgICAgICAgIG1ha2VyRmFsc2UocGFyZW50LCBuZXh0KTsKICAgICAgICB9CiAgICAg");
    sb.append("IH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKG5leHQsIHVuc3ViKTsKICAgIH0uYmluZCh7IHNob3duOiAn");
    sb.append("bm8nIH0pOwogIH0KCiAgLy8gUlVOVElNRSB8IHJ4OmlmIC8gcng6aWZub3QgPSAicGF0aDE9cGF0aDIi");
    sb.append("CiAgc2VsZi5JRmVxID0gZnVuY3Rpb24gKHBhcmVudCwgb3JpZ2luYWxTdGF0ZSwgcXVlcnlTdGF0ZUxl");
    sb.append("ZnQsIG5hbWVMZWZ0LCBxdWVyeVN0YXRlUmlnaHQsIG5hbWVSaWdodCwgc2hvdWxkQmUsIGV4cGFuZFZp");
    sb.append("ZXcsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpIHsKICAgIHZhciBjb21tb24gPSB7");
    sb.append("bGVmdDpmYWxzZSwgcmlnaHQ6dHJ1ZX07CiAgICBjb21tb24ucyA9IGNvbW1vbklmKHBhcmVudCwgb3Jp");
    sb.append("Z2luYWxTdGF0ZSwgc2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwgZm9y");
    sb.append("Y2VIaWRpbmcpOwogICAgY29tbW9uLmsgPSBkZWJvdW5jZSg1LCBmdW5jdGlvbigpIHsKICAgICAgdGhp");
    sb.append("cy5zKHRoaXMubGVmdCA9PSB0aGlzLnJpZ2h0KTsKICAgIH0uYmluZChjb21tb24pKTsKICAgIHN1YnNj");
    sb.append("cmliZShxdWVyeVN0YXRlTGVmdCwgbmFtZUxlZnQsIGZ1bmN0aW9uIChsZWZ0KSB7CiAgICAgIHRoaXMu");
    sb.append("bGVmdCA9IGxlZnQ7CiAgICAgIHRoaXMuaygpOwogICAgfS5iaW5kKGNvbW1vbikpCiAgICBzdWJzY3Jp");
    sb.append("YmUocXVlcnlTdGF0ZVJpZ2h0LCBuYW1lUmlnaHQsIGZ1bmN0aW9uIChyaWdodCkgewogICAgICB0aGlz");
    sb.append("LnJpZ2h0ID0gcmlnaHQ7CiAgICAgIHRoaXMuaygpOwogICAgfS5iaW5kKGNvbW1vbikpOwogIH07Cgog");
    sb.append("IC8qKiB0aGUgYWJvdmUgc3BlYWtzIHRvIGEgZGVlcCBwYXR0ZXJuLiBXZSBjb3VsZCB0YWtlIGFueSBl");
    sb.append("eHByZXNzaW9uIGFuZCB0aGVuIGxpbmVhcml6ZSBpdCBpbnRvIHJlYWN0aXZlIHBhcnRzLCBhbmQgdGhl");
    sb.append("biBhc3NlbWJsZSBhIHN0YXRlbWVudCBzdGF0ZW1lbnQgb24gdGhlIGZseS4gV2Ugc2hvdWxkIGxvb2sg");
    sb.append("aW50byB1c2luZyB0aGUgY29uZGl0aW9uIGxhbmd1YWdlIGZvciB0aGlzICovCgogIC8vIFJVTlRJTUUg");
    sb.append("fCByeDppZiAvIHJ4Omlmbm90ID0gInBhdGgiCiAgc2VsZi5JRiA9IGZ1bmN0aW9uIChwYXJlbnQsIG9y");
    sb.append("aWdpbmFsU3RhdGUsIHF1ZXJ5U3RhdGUsIG5hbWUsIHNob3VsZEJlLCBleHBhbmRWaWV3LCBtYWtlclRy");
    sb.append("dWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5nKSB7CiAgICBzdWJzY3JpYmUocXVlcnlTdGF0ZSwgbmFt");
    sb.append("ZSwgY29tbW9uSWYocGFyZW50LCBvcmlnaW5hbFN0YXRlLCBzaG91bGRCZSwgZXhwYW5kVmlldywgbWFr");
    sb.append("ZXJUcnVlLCBtYWtlckZhbHNlLCBmb3JjZUhpZGluZykpOwogIH07CgogIC8vLyBSVU5USU1FIHwgcng6");
    sb.append("YWN0aW9uPWNvcHk6cGF0aAogIHNlbGYuYUNQID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBuYW1lKSB7");
    sb.append("CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAg");
    sb.append("ZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBvYmogPSBnZXRfZm9ybShmb3JtLCB7fSk7CiAg");
    sb.append("ICAgIGlmIChuYW1lICE9ICIuIiAmJiBuYW1lICE9ICIiKSB7CiAgICAgICAgdmFyIG5vID0ge307CiAg");
    sb.append("ICAgICAgbm9bbmFtZV0gPSBvYmo7CiAgICAgICAgb2JqID0gbm87CiAgICAgIH0KICAgICAgdmFyIGRl");
    sb.append("bHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRl");
    sb.append("KGRlbHRhKTsKICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgc2Vs");
    sb.append("Zi5WU1AgPSBmdW5jdGlvbihkb20sIHN0YXRlLCB2YXJzKSB7CiAgICB2YXIgc20gPSB7fTsKICAgIHNt");
    sb.append("LnZhcnMgPSB2YXJzOwogICAgc20ubGFzdCA9IHt9OwogICAgc20ucGFyYW1zID0gIiI7CiAgICBzbS5t");
    sb.append("b2RlID0gInJlcGxhY2UiOwogICAgc20ucGluZyA9IGRlYm91bmNlKDUwMCwgZnVuY3Rpb24oKSB7CiAg");
    sb.append("ICAgIGlmICghZG9jdW1lbnQuYm9keS5jb250YWlucyhkb20pKSB7CiAgICAgICAgcmV0dXJuOwogICAg");
    sb.append("ICB9CiAgICAgIHZhciBhcmdzID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy52YXJz");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgdmFyIGFyZyA9IHRoaXMudmFyc1trXTsKICAgICAgICBpZiAo");
    sb.append("YXJnIGluIHRoaXMubGFzdCkgewogICAgICAgICAgYXJncy5wdXNoKGFyZyArICI9IiArIHRoaXMubGFz");
    sb.append("dFthcmddKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIHJlc3VsdCA9ICI/IiArYXJncy5qb2lu");
    sb.append("KCImIik7CiAgICAgIGlmIChyZXN1bHQgIT0gIj8iICYmIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggIT09");
    sb.append("IHJlc3VsdCkgewogICAgICAgIHZhciBvYmogPSB7fTsKICAgICAgICBvYmoudmlld2VyX3NlYXJjaF9x");
    sb.append("dWVyeSA9IHJlc3VsdDsKICAgICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7");
    sb.append("CiAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgICAgdHJ5IHsKICAgICAg");
    sb.append("ICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgIiIsIGZpeEhyZWYod2luZG93LmxvY2F0");
    sb.append("aW9uLnBhdGhuYW1lICsgcmVzdWx0KSk7CiAgICAgICAgfSBjYXRjaChmYWlsZWRUb1JlcGxhY2VTdGF0");
    sb.append("ZSkgewoKICAgICAgICB9CiAgICAgIH0KICAgIH0uYmluZChzbSkpOwogICAgc3RhdGUudmlldy50cmVl");
    sb.append("LnN1YnNjcmliZShmdW5jdGlvbihzKSB7CiAgICAgIHRoaXMubGFzdCA9IHM7CiAgICAgIHRoaXMucGlu");
    sb.append("ZygpOwogICAgfS5iaW5kKHNtKSk7CiAgfTsKCiAgc2VsZi5GID0gZnVuY3Rpb24obyxrKSB7CiAgICBp");
    sb.append("ZiAoayBpbiBvKSB7CiAgICAgIHJldHVybiBvW2tdOwogICAgfQogICAgcmV0dXJuICIiOwogIH07Cgog");
    sb.append("IC8vIFJVTlRJTUUgfCA8aW5wdXQgLi4uIHJ4OnN5bmM9cGF0aCAuLi4+CiAgc2VsZi5TWSA9IGZ1bmN0");
    sb.append("aW9uIChlbCwgc3RhdGUsIG5hbWUsIG1zKSB7CiAgICB2YXIgdHlwZSA9ICgidHlwZSIgaW4gZWwpID8g");
    sb.append("ZWwudHlwZS50b1VwcGVyQ2FzZSgpIDogInRleHQiOwogICAgdmFyIHNpZ25hbCA9IGZ1bmN0aW9uICh2");
    sb.append("YWx1ZSkgewogICAgICB2YXIgb2JqID0ge307CiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICB2");
    sb.append("YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51");
    sb.append("cGRhdGUoZGVsdGEpOwogICAgICBpZiAodGhpcy5kZWR1cGUgIT0gdmFsdWUpIHsKICAgICAgICB0aGlz");
    sb.append("LmRlZHVwZSA9IHZhbHVlOwogICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJhZnRlcnN5");
    sb.append("bmMiKSk7CiAgICAgIH0KICAgIH0uYmluZCh7ZGVkdXBlOiIifSk7CiAgICBpZiAodHlwZSA9PSAiQ0hF");
    sb.append("Q0tCT1giKSB7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGRlYm91bmNlKG1zLCBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgICAgc2lnbmFsKGVsLmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpOwogICAg");
    sb.append("ICB9KSk7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzaWduYWwo");
    sb.append("ZWwuY2hlY2tlZCA/IHRydWUgOiBmYWxzZSk7CiAgICAgIH0sIDEpOwogICAgfSBlbHNlIGlmICh0eXBl");
    sb.append("ID09ICJSQURJTyIpIHsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZGVib3VuY2Uo");
    sb.append("bXMsIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoZWwuY2hlY2tlZCkgewogICAgICAgICAgc2lnbmFs");
    sb.append("KGVsLnZhbHVlKTsKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBmID0g");
    sb.append("ZGVib3VuY2UobXMsIGZ1bmN0aW9uICgpIHsKICAgICAgICBzaWduYWwoZWwudmFsdWUpOwogICAgICB9");
    sb.append("KTsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZik7CiAgICAgIGVsLmFkZEV2ZW50");
    sb.append("TGlzdGVuZXIoJ2tleXVwJywgZikKICAgICAgZWwub25rZXl1cCA9IGVsLm9uY2hhbmdlOwogICAgICB3");
    sb.append("aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2lnbmFsKGVsLnZhbHVlKTsKICAg");
    sb.append("ICAgfSwgNSk7CiAgICB9CiAgfTsKCiAgdmFyIGZpcnN0T2NjdXIgPSBmdW5jdGlvbihhLCBiKSB7CiAg");
    sb.append("ICBpZiAoYSA+IDAgJiYgYiA+IDApIHsKICAgICAgcmV0dXJuIE1hdGgubWluKGEsIGIpOwogICAgfQog");
    sb.append("ICAgaWYgKGEgPiAwKSB7CiAgICAgIHJldHVybiBhOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGI7");
    sb.append("CiAgICB9CiAgfTsKICAvLyBIRUxQRVIgfCBleHRyYWN0IGFsbCB0aGUgaW5wdXRzIGZyb20gdGhlIGdp");
    sb.append("dmVuIGVsZW1lbnQgYW5kIGJ1aWxkIGFuIG9iamVjdAogIHZhciBidWlsZF9vYmogPSBmdW5jdGlvbiAo");
    sb.append("ZWwsIG9ialRvSW5zZXJ0SW50bywgcGFzc3dvcmRzLCBpc1Jvb3QpIHsKICAgIGlmIChlbC50YWdOYW1l");
    sb.append("LnRvVXBwZXJDYXNlKCkgPT0gIkZPUk0iICYmICFpc1Jvb3QpIHsKICAgICAgLy8gZG9uJ3QgY2FyZSBh");
    sb.append("Ym91dCBuZXN0ZWQgZm9ybXMKICAgICAgcmV0dXJuOwogICAgfQogICAgdmFyIHVwcGVyVGFnID0gZWwu");
    sb.append("dGFnTmFtZS50b1VwcGVyQ2FzZSgpOwogICAgdmFyIGp1c3RTZXQgPSB1cHBlclRhZyA9PSAiVEVYVEFS");
    sb.append("RUEiIHx8IHVwcGVyVGFnID09ICJTRUxFQ1QiOwogICAgdmFyIGlzSW5wdXRCb3ggPSB1cHBlclRhZyA9");
    sb.append("PSAiSU5QVVQiOwogICAgdmFyIGlzRmllbGRTZXQgPSB1cHBlclRhZyA9PSAiRklFTERTRVQiOwogICAg");
    sb.append("dmFyIGlzUHVsbCA9IHVwcGVyVGFnID09ICJQVUxMVkFMVUUiOwogICAgdmFyIGhhc05hbWUgPSAibmFt");
    sb.append("ZSIgaW4gZWw7CiAgICB2YXIgaW5zZXJ0QXQgPSBvYmpUb0luc2VydEludG87CiAgICAvLyB0aGUgYXBw");
    sb.append("bHkgZnVuY3Rpb24gaXMgaG93IHdlIGluamVjdCB0aGUgdmFsdWUgaW50byB0aGUgb2JqZWN0CiAgICB2");
    sb.append("YXIgYXBwbHkgPSBmdW5jdGlvbiAodmFsKSB7IH07CgogICAgdmFyIG5hbWUgPSAiIjsKICAgIGlmICho");
    sb.append("YXNOYW1lKSB7CiAgICAgIG5hbWUgPSBlbC5uYW1lOwogICAgICBpZihuYW1lID09ICIiKSB7CiAgICAg");
    sb.append("ICAgaGFzTmFtZSA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgICBpZiAoaGFzTmFtZSAmJiAoanVzdFNl");
    sb.append("dCB8fCBpc0lucHV0Qm94IHx8IGlzRmllbGRTZXQgfHwgaXNQdWxsKSkgewogICAgICB2YXIga0RvdE9y");
    sb.append("U2xhc2ggPSBmaXJzdE9jY3VyKG5hbWUuaW5kZXhPZignLicpLCBuYW1lLmluZGV4T2YoJy8nKSk7CiAg");
    sb.append("ICAgIHdoaWxlIChrRG90T3JTbGFzaCA+IDApIHsKICAgICAgICB2YXIgcGFyID0gbmFtZS5zdWJzdHJp");
    sb.append("bmcoMCwga0RvdE9yU2xhc2gpOwogICAgICAgIGlmICghKHBhciBpbiBpbnNlcnRBdCkpIHsKICAgICAg");
    sb.append("ICAgIGluc2VydEF0W3Bhcl0gPSB7fTsKICAgICAgICB9CiAgICAgICAgaW5zZXJ0QXQgPSBpbnNlcnRB");
    sb.append("dFtwYXJdOwogICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZyhrRG90T3JTbGFzaCArIDEpOwogICAg");
    sb.append("ICAgIGtEb3RPclNsYXNoID0gZmlyc3RPY2N1cihuYW1lLmluZGV4T2YoJy4nKSwgbmFtZS5pbmRleE9m");
    sb.append("KCcvJykpOwogICAgICB9CgogICAgICBpZiAobmFtZS5lbmRzV2l0aCgiKyIpKSB7CiAgICAgICAgLy8g");
    sb.append("aGVyZSwgd2UgcHVzaCB0aGUgdmFsdWUgaW50byB0aGUgYXJyYXkKICAgICAgICBuYW1lID0gbmFtZS5z");
    sb.append("dWJzdHJpbmcoMCwgbmFtZS5sZW5ndGggLSAxKTsKICAgICAgICBhcHBseSA9IGZ1bmN0aW9uICh2KSB7");
    sb.append("CiAgICAgICAgICBpZiAoIShuYW1lIGluIGluc2VydEF0KSkgewogICAgICAgICAgICBpbnNlcnRBdFtu");
    sb.append("YW1lXSA9IFt2XTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGluc2VydEF0W25hbWVdLnB1");
    sb.append("c2godik7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBoZXJl");
    sb.append("IHdlIHNldCB0aGUgb2JqZWN0CiAgICAgICAgYXBwbHkgPSBmdW5jdGlvbiAodikgewogICAgICAgICAg");
    sb.append("aW5zZXJ0QXRbbmFtZV0gPSB2OwogICAgICAgIH07CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaXNQdWxs");
    sb.append("KSB7CiAgICAgIGFwcGx5KGVsLnB1bGwoKSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoanVz");
    sb.append("dFNldCkgewogICAgICBhcHBseShlbC52YWx1ZSk7CiAgICB9IGVsc2UgaWYgKGlzRmllbGRTZXQgJiYg");
    sb.append("aGFzTmFtZSkgewogICAgICB2YXIgbmV4dE9iamVjdCA9IHt9OwogICAgICBpZiAoImNoaWxkcmVuIiBp");
    sb.append("biBlbCkgewogICAgICAgIHZhciBhcnIgPSBlbC5jaGlsZHJlbjsKICAgICAgICB2YXIgbiA9IGFyci5s");
    sb.append("ZW5ndGg7CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAgIHZhciBj");
    sb.append("aCA9IGVsLmNoaWxkcmVuW2tdOwogICAgICAgICAgYnVpbGRfb2JqKGNoLCBuZXh0T2JqZWN0LCBwYXNz");
    sb.append("d29yZHMsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgYXBwbHkobmV4dE9iamVjdCk7CiAg");
    sb.append("ICB9IGVsc2UgaWYgKGlzSW5wdXRCb3gpIHsKICAgICAgdmFyIHR5cGUgPSAoInR5cGUiIGluIGVsKSA/");
    sb.append("IGVsLnR5cGUudG9VcHBlckNhc2UoKSA6ICJURVhUIjsKICAgICAgaWYgKHR5cGUgPT0gIlNVQk1JVCIg");
    sb.append("fHwgdHlwZSA9PSAiUkVTRVQiKSByZXR1cm47CiAgICAgIGlmICgodHlwZSA9PSAiUEFTU1dPUkQiIHx8");
    sb.append("IG5hbWUgPT0gInBhc3N3b3JkIiB8fCBuYW1lID09ICJjb25maXJtLXBhc3N3b3JkIiB8fCBuYW1lID09");
    sb.append("ICJuZXdfcGFzc3dvcmQiIHx8IG5hbWUgPT0gImNvbmZpcm0tbmV3X3Bhc3N3b3JkIikpIHsKICAgICAg");
    sb.append("ICBwYXNzd29yZHNbbmFtZV0gPSBlbC52YWx1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAg");
    sb.append("aWYgKHR5cGUgPT0gIkNIRUNLQk9YIikgewogICAgICAgIGFwcGx5KGVsLmNoZWNrZWQgPyB0cnVlIDog");
    sb.append("ZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gIlJBRElPIikgewogICAgICAgIGlmIChlbC5j");
    sb.append("aGVja2VkKSB7CiAgICAgICAgICBhcHBseShlbC52YWx1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2Ug");
    sb.append("ewogICAgICAgIGFwcGx5KGVsLnZhbHVlKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKCJj");
    sb.append("aGlsZHJlbiIgaW4gZWwpIHsKICAgICAgICB2YXIgYXJyID0gZWwuY2hpbGRyZW47CiAgICAgICAgdmFy");
    sb.append("IG4gPSBhcnIubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAg");
    sb.append("ICAgICB2YXIgY2ggPSBlbC5jaGlsZHJlbltrXTsKICAgICAgICAgIGJ1aWxkX29iaihjaCwgb2JqVG9J");
    sb.append("bnNlcnRJbnRvLCBwYXNzd29yZHMsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoK");
    sb.append("ICBzZWxmLkJ1aWxkRm9ybU9iamVjdCA9IGZ1bmN0aW9uKGZvcm0pIHsKICAgIHZhciBvYmogPSB7fTsK");
    sb.append("ICAgIGJ1aWxkX29iaihmb3JtLCBvYmosIGZhbHNlLCB0cnVlKTsKICAgIHJldHVybiBvYmo7CiAgfTsK");
    sb.append("CiAgLy8gSEVMUEVSIHwgcmV0dXJuIGFuIG9iamVjdCBvZiBhbGwgdGhlIGlucHV0cyBvZiB0aGUgZ2l2");
    sb.append("ZW4gZm9ybSBlbGVtZW50CiAgdmFyIGdldF9mb3JtID0gZnVuY3Rpb24gKGZvcm0sIHBhc3N3b3Jkcykg");
    sb.append("ewogICAgdmFyIG9iaiA9IHt9OwogICAgYnVpbGRfb2JqKGZvcm0sIG9iaiwgcGFzc3dvcmRzLCB0cnVl");
    sb.append("KTsKICAgIHJldHVybiBvYmo7CiAgfTsKCiAgLy8gPC4uLiByeDp3cmFwPWNvbnN0ID4KICB2YXIgY3Vz");
    sb.append("dG9tc19jb21wb25lbnRzID0ge307CiAgc2VsZi5wcm92aWRlQ3VzdG9tQ29tcG9uZW50ID0gZnVuY3Rp");
    sb.append("b24obmFtZSwgZm9vKSB7CiAgICBjdXN0b21zX2NvbXBvbmVudHNbbmFtZV0gPSBmb287CiAgfTsKCiAg");
    sb.append("Ly8gUlVOVElNRSB8IDx0YWcgLi4uIHJ4OmN1c3RvbT0iPyIgcG9ydDokbmFtZT0kb3V0cHV0IC4uLiA+");
    sb.append("Li4uPC90YWc+IHwgYXNzZW1ibGUgYSB3cml0ZXIgb2JqZWN0CiAgc2VsZi5XWCA9IGZ1bmN0aW9uKGlu");
    sb.append("c3RydWN0aW9ucykgewogICAgdmFyIHdyaXRlciA9IHt9OwogICAgZm9yICh2YXIgayA9IDA7IGsgKyAy");
    sb.append("IDwgaW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaysrKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgd3Jp");
    sb.append("dGVyW2luc3RydWN0aW9uc1trXV0gPSBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIHZhciBzID0gdGhp");
    sb.append("czsKICAgICAgICBzLndbcy5rXSA9IHZhbHVlOwogICAgICAgIHMudC51cGRhdGUocy5kKTsKICAgICAg");
    sb.append("fS5iaW5kKHsKICAgICAgICBkOnBhdGhfdG8oaW5zdHJ1Y3Rpb25zWzFdLnZpZXcsIG9iaiksCiAgICAg");
    sb.append("ICAgdzogb2JqLAogICAgICAgIGs6IGluc3RydWN0aW9uc1syXSwKICAgICAgICB0OiBpbnN0cnVjdGlv");
    sb.append("bnNbMV0udmlldy50cmVlCiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIHdyaXRlcjsKICB9OwogIHNl");
    sb.append("bGYuQyA9IGZ1bmN0aW9uIChkb20sIHN0YXRlLCBuYW1lLCByeG9iaiwgd3JpdGVyLCBjaGlsZE1ha2Vy");
    sb.append("V2l0aENhc2UsIGNvbmZpZykgewogICAgdmFyIG9iaiA9IHsKICAgICAgZG9tOiBkb20sCiAgICAgIHN0");
    sb.append("YXRlOiBzdGF0ZSwKICAgICAgaW5wdXRzOiByeG9iaiwKICAgICAgb3V0cHV0czogd3JpdGVyLAogICAg");
    sb.append("ICBtYWtlcjogY2hpbGRNYWtlcldpdGhDYXNlLAogICAgICBjb25maWc6IGNvbmZpZywKICAgICAgZnJh");
    sb.append("bWV3b3JrOiBzZWxmCiAgICB9OwogICAgaWYgKG5hbWUgaW4gY3VzdG9tc19jb21wb25lbnRzKSB7CiAg");
    sb.append("ICAgIGN1c3RvbXNfY29tcG9uZW50c1tuYW1lXShvYmopOwogICAgfSBlbHNlIHsKICAgICAgY29uc29s");
    sb.append("ZS5lcnJvcigiZmFpbGVkIHRvIGZpbmQgY3VzdG9tIGNvbXBvbmVudDogJyIgKyBuYW1lICsgIiciKTsK");
    sb.append("ICAgIH0KICB9OwoKICB2YXIgd3JhcHBlcnMgPSB7fTsKICB2YXIgd3JhcHBlcnNfb25sb2FkID0ge307");
    sb.append("IC8vIFRPRE86IHN0dWR5IGlmIHRoaXMgY2FuIGJlIHJlbW92ZWQKICBzZWxmLlBSV1AgPSBmdW5jdGlv");
    sb.append("biAobmFtZSwgZm9vKSB7CiAgICB3cmFwcGVyc1tuYW1lXSA9IGZvbzsKICAgIGlmIChuYW1lIGluIHdy");
    sb.append("YXBwZXJzX29ubG9hZCkgewogICAgICB2YXIgdG9sb2FkID0gd3JhcHBlcnNfb25sb2FkW25hbWVdOwog");
    sb.append("ICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRvbG9hZC5sZW5ndGg7IGsrKykgewogICAgICAgIHRvbG9h");
    sb.append("ZFtrXSgpOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gPC4uLiByeDp3cmFwPWNvbnN0ID4KICBzZWxm");
    sb.append("LldQID0gZnVuY3Rpb24gKGRvbSwgc3RhdGUsIG5hbWUsIHJ4b2JqLCBjaGlsZE1ha2VyV2l0aENhc2Up");
    sb.append("IHsKICAgIGlmIChuYW1lIGluIHdyYXBwZXJzKSB7CiAgICAgIHdyYXBwZXJzW25hbWVdKGRvbSwgc3Rh");
    sb.append("dGUsIHJ4b2JqLCBjaGlsZE1ha2VyV2l0aENhc2UsIHNlbGYpOwogICAgfSBlbHNlIHsKICAgICAgdmFy");
    sb.append("IGxvYWRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB3cmFwcGVyc1tuYW1lXShkb20sIHN0YXRlLCBy");
    sb.append("eG9iaiwgY2hpbGRNYWtlcldpdGhDYXNlLCBzZWxmKTsKICAgICAgfTsKICAgICAgaWYgKG5hbWUgaW4g");
    sb.append("d3JhcHBlcnNfb25sb2FkKSB7CiAgICAgICAgd3JhcHBlcnNfb25sb2FkW25hbWVdLnB1c2gobG9hZGVy");
    sb.append("KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3cmFwcGVyc19vbmxvYWRbbmFtZV0gPSBbbG9hZGVyXTsK");
    sb.append("ICAgICAgfQogICAgfQogIH07CgogIHZhciBiZWhhdmlvcnMgPSB7fTsKICBzZWxmLmRlZmluZUJlaGF2");
    sb.append("aW9yID0gZnVuY3Rpb24obmFtZSwgYmVoYXZpb3IpIHsKICAgIGlmICh0eXBlb2YoYmVoYXZpb3IpID09");
    sb.append("ICdmdW5jdGlvbicpIHsKICAgICAgYmVoYXZpb3JzW25hbWVdID0gYmVoYXZpb3I7CiAgICB9IGVsc2Ug");
    sb.append("ewogICAgICB0aHJvdyBuZXcgRXJyb3IoImRlZmluaW5nIGJlaGF2aW9yICciICsgbmFtZSArICInIGZh");
    sb.append("aWxlZCBkdWUgdG8gbm90IGEgZnVuY3Rpb24iKQogICAgfQogIH07CgogIC8vIFJVTlRJTUUgfCByeDpi");
    sb.append("ZWhhdmlvcj0kbmFtZQogIHNlbGYuQkhWID0gZnVuY3Rpb24oZG9tLCBzdGF0ZSwgbmFtZSwgY29uZmln");
    sb.append("KSB7CiAgICBpZiAobmFtZSBpbiBiZWhhdmlvcnMpIHsKICAgICAgdmFyIGNvbm4gPSBudWxsOwogICAg");
    sb.append("ICB0cnkgewogICAgICAgIGNvbm4gPSBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyOwogICAgICB9IGNh");
    sb.append("dGNoIChlKSB7fQogICAgICBiZWhhdmlvcnNbbmFtZV0oZG9tLCBjb25uLCBjb25maWcsIHNlbGYpOwog");
    sb.append("ICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coImNvdWxkbid0IGZpbmQgYmVoYXZpb3I6IiArIG5h");
    sb.append("bWUpOwogICAgfQogIH07CgogIC8vIFJVTlRJTUUgfCByZWdpc3RlciB0aGUgcGFnZSBmb3IgdGhlIHVy");
    sb.append("aSB0byB0aGUgZ2l2ZW4gZm9vKCkuCiAgc2VsZi5QRyA9IGZ1bmN0aW9uICh1cmksIGZvbykgewogICAg");
    sb.append("dmFyIGhlYWQgPSByb3V0ZXI7CiAgICBmb3IgKHZhciBrID0gMDsgayA8IHVyaS5sZW5ndGg7IGsrKykg");
    sb.append("ewogICAgICB2YXIgcGFydCA9IHVyaVtrXTsKICAgICAgaWYgKCEocGFydCBpbiBoZWFkKSkgewogICAg");
    sb.append("ICAgIGhlYWRbcGFydF0gPSB7fTsKICAgICAgfQogICAgICBoZWFkID0gaGVhZFtwYXJ0XTsKICAgIH0K");
    sb.append("ICAgIGhlYWRbIkAiXSA9IGZvbzsKICB9OwoKICB2YXIgcm91dGUgPSBmdW5jdGlvbiAocGFydHMsIGF0");
    sb.append("LCBoZWFkLCB2aWV3KSB7CiAgICBpZiAoYXQgPCBwYXJ0cy5sZW5ndGgpIHsKICAgICAgaWYgKCJudW1i");
    sb.append("ZXIiIGluIGhlYWQpIHsKICAgICAgICB2YXIgbmVjayA9IGhlYWRbIm51bWJlciJdOwogICAgICAgIHZh");
    sb.append("ciB2YWwgPSBwYXJzZUZsb2F0KHBhcnRzW2F0XSk7CiAgICAgICAgaWYgKCFpc05hTih2YWwpKSB7CiAg");
    sb.append("ICAgICAgICBmb3IgKHZhciBicmFuY2ggaW4gbmVjaykgewogICAgICAgICAgICB2aWV3W2JyYW5jaF0g");
    sb.append("PSB2YWw7CiAgICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSByb3V0ZShwYXJ0cywgYXQgKyAxLCBuZWNr");
    sb.append("W2JyYW5jaF0sIHZpZXcpOwogICAgICAgICAgICBpZiAoY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAg");
    sb.append("ICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWxldGUg");
    sb.append("dmlld1ticmFuY2hdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoInRleHQi");
    sb.append("IGluIGhlYWQpIHsKICAgICAgICB2YXIgbmVjayA9IGhlYWRbInRleHQiXTsKICAgICAgICB2YXIgdmFs");
    sb.append("ID0gcGFydHNbYXRdOwogICAgICAgIGZvciAodmFyIGJyYW5jaCBpbiBuZWNrKSB7CiAgICAgICAgICB2");
    sb.append("aWV3W2JyYW5jaF0gPSB2YWw7CiAgICAgICAgICB2YXIgY2FuZGlkYXRlID0gcm91dGUocGFydHMsIGF0");
    sb.append("ICsgMSwgbmVja1ticmFuY2hdLCB2aWV3KTsKICAgICAgICAgIGlmIChjYW5kaWRhdGUgIT09IG51bGwp");
    sb.append("IHsKICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTsKICAgICAgICAgIH0KICAgICAgICAgIGRlbGV0");
    sb.append("ZSB2aWV3W2JyYW5jaF07CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICgiZml4ZWQiIGluIGhlYWQp");
    sb.append("IHsKICAgICAgICB2YXIgbmVjayA9IGhlYWRbImZpeGVkIl07CiAgICAgICAgZm9yICh2YXIgYnJhbmNo");
    sb.append("IGluIG5lY2spIHsKICAgICAgICAgIGlmIChicmFuY2ggPT0gcGFydHNbYXRdKSB7CiAgICAgICAgICAg");
    sb.append("IHZhciBjYW5kaWRhdGUgPSByb3V0ZShwYXJ0cywgYXQgKyAxLCBuZWNrW2JyYW5jaF0sIHZpZXcpOwog");
    sb.append("ICAgICAgICAgICBpZiAoY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNh");
    sb.append("bmRpZGF0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSBl");
    sb.append("bHNlIHsKICAgICAgaWYgKCJAIiBpbiBoZWFkKSB7CiAgICAgICAgcmV0dXJuIGhlYWRbIkAiXTsKICAg");
    sb.append("ICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfTsKCgogIHNlbGYucmVzdW1lX3VyaSA9ICIvIjsK");
    sb.append("ICBzZWxmLmdhdGVzID0gW107CiAgLyoqIFJVTlRJTUUgfCA8Z2F0ZS1leGl0IGd1YXJkPSJyZWFkIiBz");
    sb.append("ZXQ9IiI+ICovCiAgc2VsZi5JRyA9IGZ1bmN0aW9uKHN0YXRlUmVhZCwgcmVhZCwgc3RhdGVXcml0ZSwg");
    sb.append("d3JpdGUpIHsKICAgIHZhciBzbSA9IHsKICAgICAgdmFsdWU6IGZhbHNlLAogICAgICBydW46IGZ1bmN0");
    sb.append("aW9uKCkgewogICAgICAgIGlmICh0aGlzLnZhbHVlKSB7CiAgICAgICAgICB2YXIgb2JqID0ge307CiAg");
    sb.append("ICAgICAgICBvYmpbd3JpdGVdID0gdHJ1ZTsKICAgICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3Rh");
    sb.append("dGVXcml0ZS52aWV3LCBvYmopOwogICAgICAgICAgc3RhdGVXcml0ZS52aWV3LnRyZWUudXBkYXRlKGRl");
    sb.append("bHRhKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7");
    sb.append("CiAgICAgIH0sCiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlUmVhZCwgcmVhZCwgZnVuY3Rpb24odmFs");
    sb.append("dWUpIHsKICAgICAgc20udmFsdWUgPSB2YWx1ZTsKICAgIH0pOwogICAgc2VsZi5nYXRlcy5wdXNoKHNt");
    sb.append("KTsKICB9OwogIHNlbGYuZ290byA9IGZ1bmN0aW9uICh1cmksIG5vdykgewogICAgc2VsZi5yZXN1bWVf");
    sb.append("dXJpID0gdXJpOwogICAgdmFyIGJsb2NrZWQgPSBmYWxzZTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwg");
    sb.append("c2VsZi5nYXRlcy5sZW5ndGg7IGsrKykgewogICAgICBpZiAoc2VsZi5nYXRlc1trXS5ydW4oKSkgewog");
    sb.append("ICAgICAgIGJsb2NrZWQgPSB0cnVlOwogICAgICB9CiAgICB9CiAgICBpZiAoYmxvY2tlZCkgewogICAg");
    sb.append("ICByZXR1cm47CiAgICB9CiAgICBpZiAobm93KSB7CiAgICAgIHNlbGYuZ290b19ub3codXJpKTsKICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxm");
    sb.append("LmdvdG9fbm93KHVyaSk7CiAgICAgIH0sIDEpOwogICAgfQogIH07CiAgLy8gUlVOVElNRTogPHRhZyAu");
    sb.append("Li4gcng6ZXZlbnQ9Ii4uLiByZXN1bWUgLi4uIj4uLgogIHNlbGYuYlIgPSBmdW5jdGlvbigpIHsKICAg");
    sb.append("IHJldHVybiB7CiAgICAgIHJ1bjogZnVuY3Rpb24oKSB7CiAgICAgICAgc2VsZi5nYXRlcyA9IFtdOwog");
    sb.append("ICAgICAgIHNlbGYuZ290byhzZWxmLnJlc3VtZV91cmksIGZhbHNlKTsKICAgICAgfSwKICAgICAgbWVy");
    sb.append("Z2U6IGZ1bmN0aW9uKCkge30KICAgIH07CiAgfTsKICBzZWxmLmdvdG9fbm93ID0gZnVuY3Rpb24odXJp");
    sb.append("KSB7CiAgICBpZiAodXJpLnN0YXJ0c1dpdGgoIi8iKSkgewogICAgICBzZWxmLnJ1bihkb2N1bWVudC5i");
    sb.append("b2R5LCB1cmksIHRydWUpOwogICAgfSBlbHNlIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBm");
    sb.append("aXhIcmVmKHVyaSk7CiAgICB9CiAgfTsKCiAgdmFyIHVybEJhc2U2NFRvVWludDhBcnJheSA9IGZ1bmN0");
    sb.append("aW9uKGJhc2U2NCkgewogICAgdmFyIHJhd0RhdGEgPSB3aW5kb3cuYXRvYihiYXNlNjQpOwogICAgdmFy");
    sb.append("IG91dHB1dEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkocmF3RGF0YS5sZW5ndGgpOwogICAgZm9yICh2YXIg");
    sb.append("aSA9IDA7IGkgPCByYXdEYXRhLmxlbmd0aDsgKytpKSB7CiAgICAgIG91dHB1dEFycmF5W2ldID0gcmF3");
    sb.append("RGF0YS5jaGFyQ29kZUF0KGkpOwogICAgfQogICAgcmV0dXJuIG91dHB1dEFycmF5OwogIH0KCiAgc2Vs");
    sb.append("Zi5jdXJyZW50UHVzaEV2ZW50ID0gZnVuY3Rpb24oKSB7fTsKCiAgdmFyIGdldFdlYlB1c2hTdGF0dXMg");
    sb.append("PSBmdW5jdGlvbigpIHsKICAgIHZhciByZXN1bHQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgid2VicHVz");
    sb.append("aF9zdGF0dXMiKTsKICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mKHJlc3VsdCkgPT0gInN0cmluZyIpIHsK");
    sb.append("ICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIHJldHVybiAidW5rbm93biI7CiAgfQoKICB2YXIg");
    sb.append("c2V0UHVzaFN0YXR1cyA9IGZ1bmN0aW9uKHN0YXR1cykgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0o");
    sb.append("IndlYnB1c2hfc3RhdHVzIiwgc3RhdHVzKTsKICAgIHNlbGYuY3VycmVudFB1c2hFdmVudCgpOwogIH07");
    sb.append("CiAgc2VsZi5zZXRQdXNoU3RhdHVzID0gc2V0UHVzaFN0YXR1czsKCiAgdmFyIHNldFB1c2hFdmVudCA9");
    sb.append("IGZ1bmN0aW9uKGZvbykgewogICAgc2VsZi5jdXJyZW50UHVzaEV2ZW50ID0gZm9vOwogIH07CgogIHZh");
    sb.append("ciBzZXR1cFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIChyZWdpc3RyYXRpb24sIHZhcGlkUHVibGljS2V5");
    sb.append("LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9uKSB7CiAgICBjb25uZWN0aW9uLmJ1bXAoIndw");
    sb.append("cyIpOwogICAgdmFyIHB1c2hLZXlMb2NhbCA9ICJwdXNoX2VuZHBvaW50XyIgKyBpZGVudGl0eU5hbWU7");
    sb.append("CiAgICByZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIKICAgIC5nZXRTdWJzY3JpcHRpb24oKS50aGVuKGFz");
    sb.append("eW5jIGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHsKICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAg");
    sb.append("ICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uOwogICAgICAgIH0KICAgICAgICBjb25zdCBjb252ZXJ0");
    sb.append("ZWRWYXBpZEtleSA9IHVybEJhc2U2NFRvVWludDhBcnJheSh2YXBpZFB1YmxpY0tleSk7CiAgICAgICAg");
    sb.append("cmV0dXJuIHJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5zdWJzY3JpYmUoewogICAgICAgICAgdXNlclZp");
    sb.append("c2libGVPbmx5OiB0cnVlLAogICAgICAgICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IGNvbnZlcnRlZFZh");
    sb.append("cGlkS2V5CiAgICAgICAgfSk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHsKICAg");
    sb.append("ICAgLy8gbWFrZSBzdXJlIHdlIGhhdmUgYW4gZW5kcG9pbnQgc2F2ZWQgcmVsYXRlZCB0byB0aGUgcmln");
    sb.append("aHQgdmVyc2lvbgogICAgICBjb25uZWN0aW9uLklkZW50aXR5SGFzaChpZGVudGl0eSwgewogICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJ");
    sb.append("dGVtKCJwdXNoX3dvcmtlcl92ZXJzaW9uIikgIT0gdmVyc2lvbiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRl");
    sb.append("bSgibGFzdF9pZGVudGl0eV91c2VkIikgIT0gcmVzdWx0LmlkZW50aXR5SGFzaCkgewogICAgICAgICAg");
    sb.append("ICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwdXNoS2V5TG9jYWwpOwogICAgICAgICAgICBsb2NhbFN0");
    sb.append("b3JhZ2Uuc2V0SXRlbSgicHVzaF93b3JrZXJfdmVyc2lvbiIsIHZlcnNpb24pOwogICAgICAgICAgICBs");
    sb.append("b2NhbFN0b3JhZ2Uuc2V0SXRlbSgibGFzdF9pZGVudGl0eV91c2VkIiwgcmVzdWx0LmlkZW50aXR5SGFz");
    sb.append("aCk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgc3ViID0gc3Vic2NyaXB0aW9uLnRvSlNPTigpOwog");
    sb.append("ICAgICAgICAgdmFyIHZhbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHB1c2hLZXlMb2NhbCk7CiAgICAg");
    sb.append("ICAgICBpZiAodmFsICYmIHZhbCA9PSBzdWIuZW5kcG9pbnQpIHsKICAgICAgICAgICAgY29ubmVjdGlv");
    sb.append("bi5idW1wKCJ3cGEiKTsKICAgICAgICAgICAgc2V0UHVzaFN0YXR1cygic3VjY2VzcyIpOwogICAgICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBzdWJbJ0BtZXRob2QnXSA9ICd3ZWJwdXNo");
    sb.append("JzsKICAgICAgICAgIHN1YlsnQHRpbWUnXSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAg");
    sb.append("dmFyIGRldmljZSA9IHt9OwogICAgICAgICAgZGV2aWNlLm1vZGUgPSAnd2ViJwogICAgICAgICAgaWYg");
    sb.append("KHdpbmRvdyAmJiB3aW5kb3cubmF2aWdhdG9yICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSB7");
    sb.append("CiAgICAgICAgICAgIGRldmljZS51YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50OwogICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgY29ubmVjdGlvbi5QdXNoUmVnaXN0ZXIoaWRlbnRpdHksIHNlbGYuZG9tYWlu");
    sb.append("LCBzdWIsIGRldmljZSwgewogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHsKICAgICAgICAg");
    sb.append("ICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwdXNoS2V5TG9jYWwsIHN1Yi5lbmRwb2ludCk7CiAgICAg");
    sb.append("ICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIndlYnB1c2hfc3RhdHVzIiwgInN1Y2Nlc3MiKTsK");
    sb.append("ICAgICAgICAgICAgICBzZXRQdXNoU3RhdHVzKCJzdWNjZXNzIik7CiAgICAgICAgICAgIH0sCiAgICAg");
    sb.append("ICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGNvbm5lY3Rpb24uYnVtcCgi");
    sb.append("d3BmIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVy");
    sb.append("ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjb25uZWN0aW9uLmJ1bXAoIndwZiIpOwogICAgICAgIH0K");
    sb.append("ICAgICAgfSk7CiAgICB9LCBmdW5jdGlvbihlcnIpIHsKICAgICAgc2V0UHVzaFN0YXR1cygiZmFpbGVk");
    sb.append("Iik7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHB1c2hLZXlMb2NhbCk7CiAgICAgIGxvY2Fs");
    sb.append("U3RvcmFnZS5yZW1vdmVJdGVtKCJsYXN0X2lkZW50aXR5X3VzZWQiKTsKICAgICAgbG9jYWxTdG9yYWdl");
    sb.append("LnJlbW92ZUl0ZW0oInB1c2hfd29ya2VyX3ZlcnNpb24iKTsKICAgICAgY29ubmVjdGlvbi5idW1wKCJ3");
    sb.append("cGQiKTsKICAgICAgY29ubmVjdGlvbi5sb2coInB1c2hzZXR1cCIsICIiICsgZXJyKTsKICAgIH0pOwog");
    sb.append("IH0KCiAgdmFyIHNldHVwUHVzaCA9IGZ1bmN0aW9uKHBhdGgsIHZhcGlkUHVibGljS2V5LCBpZGVudGl0");
    sb.append("eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9uKSB7CiAgICBpZiAobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIp");
    sb.append("IHsKICAgICAgdHJ5IHsKICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5nZXRSZWdpc3RyYXRp");
    sb.append("b25zKCkudGhlbihmdW5jdGlvbiAocmVnaXN0cmF0aW9ucykgewogICAgICAgICAgdmFyIGZvdW5kID0g");
    sb.append("ZmFsc2U7CiAgICAgICAgICBmb3IgKGxldCByZWdpc3RyYXRpb24gb2YgcmVnaXN0cmF0aW9ucykgewog");
    sb.append("ICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uLmFjdGl2ZSkgewogICAgICAgICAgICAgIGlmICghcmVn");
    sb.append("aXN0cmF0aW9uLmFjdGl2ZS5zY3JpcHRVUkwuZW5kc1dpdGgocGF0aCkpIHsKICAgICAgICAgICAgICAg");
    sb.append("IHJlZ2lzdHJhdGlvbi51bnJlZ2lzdGVyKCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg");
    sb.append("ICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHNldHVwU3Vic2NyaXB0aW9uKHJlZ2lz");
    sb.append("dHJhdGlvbiwgdmFwaWRQdWJsaWNLZXksIGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pOwog");
    sb.append("ICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKCFmb3Vu");
    sb.append("ZCkgewogICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihwYXRoKTsKICAg");
    sb.append("ICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHkudGhlbihmdW5jdGlvbiAocmVnaXN0");
    sb.append("cmF0aW9uKSB7CiAgICAgICAgICAgICAgc2V0dXBTdWJzY3JpcHRpb24ocmVnaXN0cmF0aW9uLCB2YXBp");
    sb.append("ZFB1YmxpY0tleSwgaWRlbnRpdHksIGlkZW50aXR5TmFtZSwgdmVyc2lvbik7CiAgICAgICAgICAgIH0p");
    sb.append("OwogICAgICAgICAgfQogICAgICAgIH0sIGZ1bmN0aW9uKGV4KSB7CiAgICAgICAgICBjb25uZWN0aW9u");
    sb.append("LmJ1bXAoIndwaTMiKTsKICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKCJ3b3JrZXItZmluZCIsICIiICsg");
    sb.append("ZXgpOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUuZXJyb3Io");
    sb.append("ImZhaWxlZCB0byByZWdpc3RlciBzZXJ2aWNlIHdvcmtlciIsIGV4KTsKICAgICAgICBzZXRQdXNoU3Rh");
    sb.append("dHVzKCJpbXBvc3NpYmxlIik7CiAgICAgICAgY29ubmVjdGlvbi5idW1wKCJ3cGkyIik7CiAgICAgICAg");
    sb.append("Y29ubmVjdGlvbi5sb2coIndvcmtlci1pbnN0YWxsIiwgIiIgKyBleCk7CiAgICAgIH0KICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIGNvbnNvbGUubG9nKCJubyBzZXJ2aWNlIHdvcmtlciBhdmFpbGFibGUiKTsKICAgICAg");
    sb.append("c2V0UHVzaFN0YXR1cygiaW1wb3NzaWJsZSIpOwogICAgICBjb25uZWN0aW9uLmJ1bXAoIndwaTEiKTsK");
    sb.append("ICAgIH0KICB9CgogIHNlbGYud29ya2VyID0gZnVuY3Rpb24oaWRlbnRpdHlOYW1lLCBwYXRoLCB2ZXJz");
    sb.append("aW9uKSB7CiAgICB0cnkgewogICAgICBhZnRlckhhdmVJZGVudGl0eShpZGVudGl0eU5hbWUsIGZ1bmN0");
    sb.append("aW9uKGlkZW50aXR5KSB7CiAgICAgICAgY29ubmVjdGlvbi5Eb21haW5HZXRWYXBpZFB1YmxpY0tleShp");
    sb.append("ZGVudGl0eSwgc2VsZi5kb21haW4sIHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNl");
    sb.append("KSB7CiAgICAgICAgICAgIHNldHVwUHVzaChwYXRoLCByZXNwb25zZS5wdWJsaWNLZXksIGlkZW50aXR5");
    sb.append("LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1");
    sb.append("bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcigiZmFpbGVkIHRvIGdldCBw");
    sb.append("dWJsaWMta2V5OiIgKyByZWFzb24pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pOwogICAg");
    sb.append("fSBjYXRjaCAoZXgpIHsKICAgICAgY29uc29sZS5lcnJvcigiZmFpbGVkIHRvIGluaXRpYWxpemUgd29y");
    sb.append("a2VyIiwgZXgpOwogICAgfQogIH07CgogIHNlbGYuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgIHNlbGYu");
    sb.append("cnVuKGRvY3VtZW50LmJvZHksIGZpeFBhdGgod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93");
    sb.append("LmxvY2F0aW9uLnNlYXJjaCArIHdpbmRvdy5sb2NhdGlvbi5oYXNoKSwgZmFsc2UpOwogICAgd2luZG93");
    sb.append("Lm9ucG9wc3RhdGUgPSBmdW5jdGlvbiAocCkgewogICAgICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5LCBm");
    sb.append("aXhQYXRoKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyB3");
    sb.append("aW5kb3cubG9jYXRpb24uaGFzaCksIGZhbHNlKTsKICAgIH07CiAgfTsKCiAgdmFyIGN1cnJlbnRNZXNz");
    sb.append("YWdlSGFuZGxlcnMgPSB7fTsKICB2YXIgcmVtb3ZlQWxsTWVzc2FnZUhhbmRsZXJzID0gZnVuY3Rpb24o");
    sb.append("KSB7CiAgICBmb3IgKHZhciBrIGluIGN1cnJlbnRNZXNzYWdlSGFuZGxlcnMpIHsKICAgICAgZGVsZXRl");
    sb.append("IGN1cnJlbnRNZXNzYWdlSGFuZGxlcnNba107CiAgICB9CiAgfTsKCiAgc2VsZi5yZWdpc3Rlck1lc3Nh");
    sb.append("Z2VIYW5kbGVyID0gZnVuY3Rpb24oY2hhbm5lbCwgaGFuZGxlcikgewogICAgaWYgKGNoYW5uZWwgaW4g");
    sb.append("Y3VycmVudE1lc3NhZ2VIYW5kbGVycykgewogICAgICBjdXJyZW50TWVzc2FnZUhhbmRsZXJzW2NoYW5u");
    sb.append("ZWxdLnB1c2goaGFuZGxlcik7CiAgICB9IGVsc2UgewogICAgICBjdXJyZW50TWVzc2FnZUhhbmRsZXJz");
    sb.append("W2NoYW5uZWxdID0gW2hhbmRsZXJdOwogICAgfQogIH07CgogIHZhciByb3V0ZU1lc3NhZ2UgPSBmdW5j");
    sb.append("dGlvbihldmVudCkgewogICAgdHJ5IHsKICAgICAgaWYgKCEoJ2RhdGEnIGluIGV2ZW50KSkgewogICAg");
    sb.append("ICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodHlwZW9mIChldmVudC5kYXRhKSAhPSAnb2JqZWN0");
    sb.append("JykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoISgnY2hhbm5lbCcgaW4gZXZlbnQu");
    sb.append("ZGF0YSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNoYW5uZWwgPSBldmVudC5k");
    sb.append("YXRhLmNoYW5uZWw7CiAgICAgIHZhciBsaXN0ID0gY3VycmVudE1lc3NhZ2VIYW5kbGVyc1tjaGFubmVs");
    sb.append("XTsKICAgICAgaWYgKGxpc3QgIT09IG51bGwpIHsKICAgICAgICB2YXIgbiA9IGxpc3QubGVuZ3RoOwog");
    sb.append("ICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgICBsaXN0W2tdKGV2ZW50");
    sb.append("LmRhdGEsIGV2ZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gY2F0Y2ggKHdlbGxNYXliZVRoZUVy");
    sb.append("cm9yRG9lc250QmVsb25nVG9NZSkgewogICAgICAvLyA6c2hydWc6CiAgICB9CiAgfTsKCiAgaWYgKHdp");
    sb.append("bmRvdy5hZGRFdmVudExpc3RlbmVyKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2Fn");
    sb.append("ZSIsIHJvdXRlTWVzc2FnZSwgZmFsc2UpOwogIH0gZWxzZSBpZiAod2luZG93LmF0dGFjaEV2ZW50KSB7");
    sb.append("CiAgICB3aW5kb3cuYXR0YWNoRXZlbnQoIm9ubWVzc2FnZSIsIHJvdXRlTWVzc2FnZSwgZmFsc2UpOwog");
    sb.append("IH0KCiAgc2VsZi5jdXJyZW50Vmlld2VySWQgPSAwOwogIC8vIEFQSSB8IFJ1biB0aGUgcGFnZSBpbiB0");
    sb.append("aGUgZ2l2ZW4gcGxhY2UKICBzZWxmLnJ1biA9IGZ1bmN0aW9uICh3aGVyZSwgcmF3UGF0aCwgcHVzaCkg");
    sb.append("ewogICAgcmVtb3ZlQWxsTWVzc2FnZUhhbmRsZXJzKCk7CiAgICB2YXIgcGF0aCA9IHJhd1BhdGg7CiAg");
    sb.append("ICB3aGlsZSAocGF0aC5lbmRzV2l0aCgiLyIpICYmIHBhdGggIT0gIi8iKSB7CiAgICAgIHBhdGggPSBw");
    sb.append("YXRoLnN1YnN0cmluZygwLCBwYXRoLmxlbmd0aCAtIDEpOwogICAgfQogICAgZm9yIChjb25LZXkgaW4g");
    sb.append("Y29ubmVjdGlvbnMpIHsKICAgICAgY29ubmVjdGlvbnNbY29uS2V5XS50cmVlLm51a2UoKTsKICAgICAg");
    sb.append("Y29ubmVjdGlvbnNbY29uS2V5XS5udWtlKCk7CiAgICB9CiAgICB2YXIgc2VhcmNoID0gIiI7CiAgICB2");
    sb.append("YXIga1F1ZXN0aW9uID0gcGF0aC5pbmRleE9mKCc/Jyk7CiAgICBpZiAoa1F1ZXN0aW9uID4gMCkgewog");
    sb.append("ICAgICBzZWFyY2ggPSBwYXRoLnN1YnN0cmluZyhrUXVlc3Rpb24pOwogICAgICBwYXRoID0gcGF0aC5z");
    sb.append("dWJzdHJpbmcoMCwga1F1ZXN0aW9uKTsKICAgIH0KICAgIHZhciBwYXJ0cyA9IChwYXRoLnN0YXJ0c1dp");
    sb.append("dGgoIi8iKSA/IHBhdGguc3Vic3RyaW5nKDEpIDogcGF0aCkuc3BsaXQoIi8iKTsKICAgIHZhciBpbml0");
    sb.append("ID0ge307CiAgICBzZWxmLmN1cnJlbnRWaWV3ZXJJZCsrOwogICAgaW5pdC52aWV3ZXJfY3VycmVudF9w");
    sb.append("YWdlX2lkID0gc2VsZi5jdXJyZW50Vmlld2VySWQ7CiAgICBpbml0LnZpZXdlcl9kb21haW4gPSBzZWxm");
    sb.append("LmRvbWFpbjsKICAgIGluaXQudmlld2VyX3VybF9wcmVmaXggPSBzZWxmLnVybF9wcmVmaXg7CiAgICB0");
    sb.append("cnkgewogICAgICBpbml0LnZpZXdlcl90aW1lem9uZSA9IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNv");
    sb.append("bHZlZE9wdGlvbnMoKS50aW1lWm9uZTsKICAgICAgaW5pdC52aWV3ZXJfbGFuZ3VhZ2UgPSBuYXZpZ2F0");
    sb.append("b3IubGFuZ3VhZ2U7CiAgICB9IGNhdGNoIChicm93c2VyQmFkKSB7CiAgICAgIC8vIHdlIGp1c3QgZG9u");
    sb.append("J3Qgc2VlIHRoZSB2aWV3c3RhdGUgaWYgd2UgZG9uJ3QgaGF2ZSB0aGVzZSBhdmFpbGFibGUKICAgIH0K");
    sb.append("ICAgIGluaXQudmlld2VyX3NlYXJjaF9xdWVyeSA9ICIiOwogICAgaW5pdC52aWV3ZXJfd2ViX3B1c2hf");
    sb.append("c3RhdHVzID0gZ2V0V2ViUHVzaFN0YXR1cygpOwogICAgaWYgKHNlYXJjaCAhPSAiPyIpIHsKICAgICAg");
    sb.append("aW5pdC52aWV3ZXJfc2VhcmNoX3F1ZXJ5ID0gc2VhcmNoOwogICAgICBjb25zdCBwYXJhbXMgPSBuZXcg");
    sb.append("VVJMU2VhcmNoUGFyYW1zKHNlYXJjaC5zdWJzdHJpbmcoMSkpOwogICAgICB2YXIga0l0ID0gcGFyYW1z");
    sb.append("LmtleXMoKTsKICAgICAgdmFyIHAgPSBrSXQubmV4dCgpOwogICAgICB3aGlsZSAoIXAuZG9uZSkgewog");
    sb.append("ICAgICAgIGluaXRbcC52YWx1ZV0gPSBwYXJhbXMuZ2V0KHAudmFsdWUpOwogICAgICAgIHAgPSBrSXQu");
    sb.append("bmV4dCgpOwogICAgICB9CiAgICB9CiAgICB2YXIgZm9vID0gcm91dGUocGFydHMsIDAsIHJvdXRlciwg");
    sb.append("aW5pdCk7CiAgICBudWtlKHdoZXJlKTsKICAgIGlmIChmb28gIT0gbnVsbCkgewogICAgICB3aW5kb3cu");
    sb.append("c2Nyb2xsVG8oMCwgMCk7CiAgICAgIHZhciBzdGF0ZSA9IHsgc2VydmljZTogY29ubmVjdGlvbiwgZGF0");
    sb.append("YTogbnVsbCwgdmlldzogZnJlc2god2hlcmUpLCBjdXJyZW50OiAidmlldyIgfTsKICAgICAgc2VsZi5f");
    sb.append("X2N1cnJlbnQgPSBzdGF0ZTsKCiAgICAgIGNvbnN0IHZpZXdzdGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJ");
    sb.append("dGVtKCdyeHZpZXdzdGF0ZScpOwogICAgICBpZiAobnVsbCAhPT0gdmlld3N0YXRlKSB7CiAgICAgICAg");
    sb.append("bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3J4dmlld3N0YXRlJyk7CiAgICAgICAgaW5pdCA9IE9iamVj");
    sb.append("dC5hc3NpZ24oe30sIGluaXQsIEpTT04ucGFyc2Uodmlld3N0YXRlKSk7CiAgICAgIH0KCiAgICAgIHN0");
    sb.append("YXRlLnZpZXcuaW5pdCA9IGluaXQ7CiAgICAgIHNlbGYuZ2F0ZXMgPSBbXTsKICAgICAgc2VsZi5yZXN1");
    sb.append("bWVfdXJpID0gcGF0aDsKICAgICAgc2VsZi5faW5mbGlnaHQgKys7CiAgICAgIGZvbyh3aGVyZSwgc3Rh");
    sb.append("dGUpOwogICAgICBzdGF0ZS52aWV3LnRyZWUuc3Vic2NyaWJlKHN0YXRlLnZpZXcuZGVsdGEpOwogICAg");
    sb.append("ICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKGluaXQpOwogICAgICBzZWxmLl9pbmZsaWdodCAtLTsKICAg");
    sb.append("ICAgaWYgKHB1c2gpIHsKICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe21lcmdlOmZhbHNl");
    sb.append("fSwgIiIsIGZpeEhyZWYocGF0aCkgKyBzZWFyY2gpOwogICAgICB9CiAgICAgIHNldFB1c2hFdmVudChm");
    sb.append("dW5jdGlvbigpIHsKICAgICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHsgdmlld2VyX3dlYl9wdXNo");
    sb.append("X3N0YXR1czogZ2V0V2ViUHVzaFN0YXR1cygpfSk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAg");
    sb.append("aWYgKHBhdGggIT0gIi80MDQiKSB7CiAgICAgICAgc2VsZi5ydW4od2hlcmUsICIvNDA0Iik7CiAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgLy8gZGVmYXVsdCA0MDQKICAgICAgfQogICAgfQogICAgd2hlcmUuYXBw");
    sb.append("ZW5kQ2hpbGQoY29ubmVjdGlvbk1vbml0b3JEb20pOwogIH07CgogIHZhciBpZGVudGl0aWVzID0ge307");
    sb.append("CgogIHZhciBzdGFzaF9pZGVudGl0eSA9IGZ1bmN0aW9uKG5hbWUsIGlkZW50aXR5LCBjb25uZWN0aW9u");
    sb.append("KSB7CiAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMgKE9LLCB3aGF0IGRvZXMgdGhpcyBt");
    sb.append("ZWFuKQogICAgaWRlbnRpdGllc1tuYW1lXSA9IGlkZW50aXR5OwogICAgbG9jYWxTdG9yYWdlLnNldEl0");
    sb.append("ZW0oImlkZW50aXR5XyIgKyBuYW1lLCBpZGVudGl0eSk7CiAgICB2YXIgcmVxID0ge307CiAgICByZXFb");
    sb.append("J25hbWUnXSA9IG5hbWU7CiAgICByZXFbJ2lkZW50aXR5J10gPSBpZGVudGl0eTsKICAgIHJlcVsnbWF4");
    sb.append("LWFnZSddID0gNTUyOTYwMDsKCiAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAg");
    sb.append("IHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMucmVh");
    sb.append("ZHlTdGF0ZSA9PSA0KSB7CiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAg");
    sb.append("bG9jYWxTdG9yYWdlLnNldEl0ZW0oImxhc3Rfc3Rhc2hlZF9pZGVudGl0eV8iICsgbmFtZSwgIiIgKyBE");
    sb.append("YXRlLm5vdygpKQogICAgICAgICAgaWYgKGNvbm5lY3Rpb24gIT0gbnVsbCkgewogICAgICAgICAgICBj");
    sb.append("b25uZWN0aW9uLklkZW50aXR5U3Rhc2goaWRlbnRpdHksIG5hbWUsIHsKICAgICAgICAgICAgICBzdWNj");
    sb.append("ZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyBUSElTIEhBUyBEUkFHT05TIFVOVElM");
    sb.append("IEEgRlVMTCBQUk9EVUNUSU9OIERFUExPWU1FTlQKICAgICAgICAgICAgICAgIC8vIGxvY2FsU3RvcmFn");
    sb.append("ZS5zZXRJdGVtKCJpZGVudGl0eV8iICsgbmFtZSwgImNvb2tpZToiICsgbmFtZSk7CiAgICAgICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAoeHl6KSB7CgogICAgICAgICAgICAg");
    sb.append("IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAg");
    sb.append("eGh0dHAub3BlbigiUFVUIiwgc2VsZi5wcm90b2NvbCArICIvLyIgKyBzZWxmLmhvc3QgKyAiL35zdGFz");
    sb.append("aC8iICsgRGF0ZS5ub3coKSwgdHJ1ZSk7CiAgICB4aHR0cC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwog");
    sb.append("ICAgeGh0dHAuc2VuZChKU09OLnN0cmluZ2lmeShyZXEpKTsKICB9OwoKICB2YXIgc2hvdWxkX3N0YXNo");
    sb.append("X2lkZW50aXR5ID0gZnVuY3Rpb24obmFtZSkgewogICAgdmFyIHN0YXNoX2tleSA9ICJsYXN0X3N0YXNo");
    sb.append("ZWRfaWRlbnRpdHlfIiArIG5hbWU7CiAgICB2YXIgbGFzdFN0YXNoID0gbG9jYWxTdG9yYWdlLmdldEl0");
    sb.append("ZW0oc3Rhc2hfa2V5KTsKICAgIHRyeSB7CiAgICAgIHZhciBwYXJzZWQgPSBwYXJzZUZsb2F0KGxhc3RT");
    sb.append("dGFzaCk7CiAgICAgIGlmIChpc05hTihwYXJzZWQpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAg");
    sb.append("IH0KICAgICAgdmFyIGFnZSA9IERhdGUubm93KCkgLSBuZXcgRGF0ZShwYXJzZWQpLmdldFRpbWUoKTsK");
    sb.append("ICAgICAgcmV0dXJuIGFnZSA+PSAxLjQ0ZSs3OwogICAgfSBjYXRjaCAoZXgpIHsKICAgICAgcmV0dXJu");
    sb.append("IHRydWU7CiAgICB9CiAgfTsKCiAgc2VsZi5TSUdOT1VUID0gZnVuY3Rpb24gKCkgewogICAgaWRlbnRp");
    sb.append("dGllcyA9IHt9OwogICAgZm9yICh2YXIgaWRlbnRpdHlOYW1lIGluIGlkZW50aXRpZXMpIHsKICAgICAg");
    sb.append("bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUpOwogICAgfQog");
    sb.append("ICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImlkZW50aXR5X2RlZmF1bHQiKTsKICAgIHZhciBheGUg");
    sb.append("PSBbXTsKICAgIGZvciAodmFyIGNpZCBpbiBjb25uZWN0aW9ucykgewogICAgICB2YXIgY28gPSBjb25u");
    sb.append("ZWN0aW9uc1tjaWRdOwogICAgICBpZiAoY28ucHRyICE9IG51bGwpIHsKICAgICAgICBjby5wdHIuZW5k");
    sb.append("KHsgc3VjY2VzczogZnVuY3Rpb24gKCkgeyB9LCBmYWlsdXJlOiBmdW5jdGlvbiAoKSB7IH0gfSk7CiAg");
    sb.append("ICAgIH0KICAgICAgYXhlLnB1c2goY2lkKTsKICAgIH0KICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXhl");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgIGRlbGV0ZSBjb25uZWN0aW9uc1theGVba11dOwogICAgfQogIH07");
    sb.append("CgogIHNlbGYuR09PR0xFX1NJR05fT04gPSBmdW5jdGlvbiAoYWNjZXNzVG9rZW4pIHsKICAgIGNvbm5l");
    sb.append("Y3Rpb24uSW5pdENvbnZlcnRHb29nbGVVc2VyKGFjY2Vzc1Rva2VuLCB7CiAgICAgIHN1Y2Nlc3M6IGZ1");
    sb.append("bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgc3Rhc2hfaWRlbnRpdHkoImRlZmF1bHQiLCBwYXlsb2Fk");
    sb.append("LmlkZW50aXR5LCBjb25uZWN0aW9uKTsKICAgICAgICBzZWxmLmdvdG8oIi8iLCBmYWxzZSk7CiAgICAg");
    sb.append("IH0sCiAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICBjb25zb2xlLmxvZygi");
    sb.append("R29vZ2xlIGZhaWx1cmU6ICIgKyByZWFzb24pOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvKiogUlVO");
    sb.append("VElNRSB8IHJlZGlyZWN0IHRvIGEgcGFnZSB3aXRoIHN0YXRlICovCiAgc2VsZi5hUkRwID0gZnVuY3Rp");
    sb.append("b24gKHN0YXRlLCBwdWxsZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB1cmkg");
    sb.append("PSBwdWxsZXIoc3RhdGUudmlldy5pbml0KTsKICAgICAgcmV0dXJuIHVyaTsKICAgIH07CiAgfTsKCiAg");
    sb.append("LyoqIFJVTlRJTUUgfCByZWRpcmVjdCB0byBhIHN0YXRpYyBwYWdlICovCiAgc2VsZi5hUkR6ID0gZnVu");
    sb.append("Y3Rpb24gKHJhdykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHJhdzsKICAg");
    sb.append("IH0KICB9OwoKICB2YXIgaWRlbnRpdHlFdmVudHMgPSB7fTsKICB2YXIgYWZ0ZXJIYXZlSWRlbnRpdHkg");
    sb.append("PSBmdW5jdGlvbihpZGVudGl0eU5hbWUsIGNhbGxiYWNrKSB7CiAgICBpZGVudGl0eUV2ZW50c1tpZGVu");
    sb.append("dGl0eU5hbWVdID0gY2FsbGJhY2s7CiAgfTsKICBzZWxmLmFmdGVySGF2ZUlkZW50aXR5ID0gYWZ0ZXJI");
    sb.append("YXZlSWRlbnRpdHk7CgogIC8qKiBmb3IgY3VzdG9tIGVsZW1lbnRzIHRvIGxlYXJuIG9mIHRoZSBpZGVu");
    sb.append("dGl0eSAqLwogIHNlbGYuSUQgPSBmdW5jdGlvbiAoaWRlbnRpdHlOYW1lLCByZWRpcmVjdFRvRnVuYykg");
    sb.append("ewogICAgaWYgKGlkZW50aXR5TmFtZSA9PT0gdHJ1ZSkgewogICAgICBpZGVudGl0eU5hbWUgPSAiZGVm");
    sb.append("YXVsdCI7CiAgICB9CiAgICAvLyBJRiBpZGVudGl0eSBjb250YWlucyBkb3RzCiAgICB2YXIgaWRlbnRp");
    sb.append("dHkgPSBudWxsOwogICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbiAoKSB7CiAgICB9OwoKICAgIHZhciB2");
    sb.append("YWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSk7CiAgICBp");
    sb.append("ZiAodmFsKSB7CiAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHZhbDsKICAgICAgaWYgKHNo");
    sb.append("b3VsZF9zdGFzaF9pZGVudGl0eShpZGVudGl0eU5hbWUpKSB7CiAgICAgICAgc3Rhc2hfaWRlbnRpdHko");
    sb.append("aWRlbnRpdHlOYW1lLCB2YWwsIG51bGwpOwogICAgICB9CiAgICB9CgogICAgaWYgKGlkZW50aXR5TmFt");
    sb.append("ZS5zdGFydHNXaXRoKCJkaXJlY3Q6IikpIHsKICAgICAgLy8gVXNlLCBhcyBpcwogICAgICBpZGVudGl0");
    sb.append("eSA9IGlkZW50aXR5TmFtZS5zdWJzdHJpbmcoNyk7CiAgICB9IGVsc2UgaWYgKGlkZW50aXR5TmFtZSBp");
    sb.append("biBpZGVudGl0aWVzKSB7CiAgICAgIGlkZW50aXR5ID0gaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdOwog");
    sb.append("ICAgICBjbGVhbnVwID0gZnVuY3Rpb24gKCkgewogICAgICAgIGRlbGV0ZSBpZGVudGl0aWVzW2lkZW50");
    sb.append("aXR5TmFtZV07CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImlkZW50aXR5XyIgKyBpZGVu");
    sb.append("dGl0eU5hbWUpOwogICAgICAgIHNlbGYuZ290byhyZWRpcmVjdFRvRnVuYygpLCBmYWxzZSk7CiAgICAg");
    sb.append("IH07CiAgICB9IGVsc2UgewogICAgICAvLyB3aGF0ZXZlciBwYWdlIHdlIGFyZSwgbmVlZHMgdG8gZGll");
    sb.append("IHdoaWNoIG1lYW5zIHdlIG5lZWQgdG8gbnVrZSBldmVyeXRoaW5nIQogICAgICB3aW5kb3cuc2V0VGlt");
    sb.append("ZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2VsZi5nb3RvKHJlZGlyZWN0VG9GdW5jKCksIGZhbHNl");
    sb.append("KTsKICAgICAgfSwgMTApOwogICAgICByZXR1cm4geyBhYm9ydDogdHJ1ZSB9OwogICAgfQogICAgaWYg");
    sb.append("KGlkZW50aXR5TmFtZSBpbiBpZGVudGl0eUV2ZW50cykgewogICAgICBpZGVudGl0eUV2ZW50c1tpZGVu");
    sb.append("dGl0eU5hbWVdKGlkZW50aXR5KTsKICAgICAgZGVsZXRlIGlkZW50aXR5RXZlbnRzW2lkZW50aXR5TmFt");
    sb.append("ZV07CiAgICB9CiAgICByZXR1cm4geyBhYm9ydDogZmFsc2UsIGNsZWFudXA6IGNsZWFudXAsIGlkZW50");
    sb.append("aXR5OiBpZGVudGl0eSB9OwogIH07CgogIC8qIEZvciBjdXN0b20gY2FsbGJhY2tzIHRvIHJlZGlyZWN0");
    sb.append("IGFuZCBpbnZhbGlkYXRlIElEIGZhaWx1cmVzICovCiAgc2VsZi5GSURDTCA9IGZ1bmN0aW9uIChjYWxs");
    sb.append("YmFjaywgbG9va3VwKSB7CiAgICByZXR1cm4gewogICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0");
    sb.append("KSB7CiAgICAgICAgY2FsbGJhY2suc3VjY2VzcyhyZXN1bHQpOwogICAgICB9LAogICAgICBuZXh0OiBm");
    sb.append("dW5jdGlvbiAoaXRlbSkgewogICAgICAgIGNhbGxiYWNrLm5leHQoaXRlbSk7CiAgICAgIH0sCiAgICAg");
    sb.append("IGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgY2FsbGJhY2suY29tcGxldGUoKTsKICAgICAg");
    sb.append("fSwKICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIGNhbGxiYWNrLmZhaWx1");
    sb.append("cmUocmVhc29uKTsKICAgICAgICBpZiAocmVhc29uID09IDQwMzQwMyB8fCByZWFzb24gPT0gNDAzNTAw");
    sb.append("IHx8IHJlYXNvbiA9PSAxODQzMzMgfHwgcmVhc29uID09IDk4MjI1MykgewogICAgICAgICAgbG9va3Vw");
    sb.append("LmNsZWFudXAoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfTsKCiAgdmFyIGN1c3RvbURhdGFT");
    sb.append("b3VyY2VzID0ge307CgogIC8qKiBwcm92aWRlIGN1c3RvbSBkYXRhICovCiAgc2VsZi5QUkNVREEgPSBm");
    sb.append("dW5jdGlvbiAobmFtZSwgZm9vKSB7CiAgICBjdXN0b21EYXRhU291cmNlc1tuYW1lXSA9IGZvbzsKICB9");
    sb.append("OwoKICAvLyA8Y3VzdG9tZGF0YSBzcmM9c3JjIChwYXJhbWV0ZXI6eD15KSogPgogIHNlbGYuQ1VEQSA9");
    sb.append("IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIHNyYywgcnhvYmosIHJlZGlyZWN0VG8sIGNoaWxk");
    sb.append("TWFrZXIpIHsKICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIHJ4b2JqLl9fID0gZGVib3Vu");
    sb.append("Y2UoMTAsIGZ1bmN0aW9uICgpIHsKICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgIG51a2UocGFy");
    sb.append("ZW50KTsKICAgICAgdmFyIGN1c3RvbVRyZWUgPSBmYWxzZTsKICAgICAgaWYgKHNyYyBpbiBjdXN0b21E");
    sb.append("YXRhU291cmNlcykgewogICAgICAgIHZhciBjb25zID0gY3VzdG9tRGF0YVNvdXJjZXNbc3JjXTsKICAg");
    sb.append("ICAgICBpZiAodHlwZW9mIChjb25zKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICBjdXN0b21UcmVl");
    sb.append("ID0gY29ucyhyeG9iaiwgcHJpb3JTdGF0ZSwgcmVkaXJlY3RUbywgc2VsZik7CiAgICAgICAgfQogICAg");
    sb.append("ICB9CiAgICAgIGlmICghY3VzdG9tVHJlZSkgewogICAgICAgIGN1c3RvbVRyZWUgPSBuZXcgQWRhbWFU");
    sb.append("cmVlKCk7CiAgICAgIH0KICAgICAgdmFyIHN0YXRlID0gewogICAgICAgIHNlcnZpY2U6IHByaW9yU3Rh");
    sb.append("dGUuc2VydmljZSwKICAgICAgICBkYXRhOiB7IGNvbm5lY3Rpb246IHByaW9yU3RhdGUuY29ubmVjdGlv");
    sb.append("biwgdHJlZTogY3VzdG9tVHJlZSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwK");
    sb.append("ICAgICAgICB2aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICAgIGN1cnJl");
    sb.append("bnQ6ICJkYXRhIgogICAgICB9OwogICAgICBjaGlsZE1ha2VyKHN0YXRlKTsKICAgICAgc3Vic2NyaWJl");
    sb.append("X3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICB9KTsKICB9OwoKICAvLyA8dGl0bGUgdmFsdWU9Ii4uLiIg");
    sb.append("Lz4KICBzZWxmLlNUID0gZnVuY3Rpb24gKHJ4b2JqKSB7CiAgICBpZiAocnhvYmoudmFsdWUpIHsKICAg");
    sb.append("ICAgZG9jdW1lbnQudGl0bGUgPSByeG9iai52YWx1ZTsKICAgIH0KICAgIHJ4b2JqLl9fID0gZGVib3Vu");
    sb.append("Y2UoNSwgZnVuY3Rpb24gKCkgewogICAgICBpZiAocnhvYmoudmFsdWUpIHsKICAgICAgICBkb2N1bWVu");
    sb.append("dC50aXRsZSA9IHJ4b2JqLnZhbHVlOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyA8dmlld3N5bmM+");
    sb.append("CiAgc2VsZi5WU3kgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBhdmFpbCwgbm90YXZhaWwp");
    sb.append("IHsKICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIHByaW9yU3RhdGUuZGF0YS5jb25uZWN0");
    sb.append("aW9uLnN1YnNjcmliZV9zeW5jKGZ1bmN0aW9uIChzeW5jZWQpIHsKICAgICAgbnVrZShwYXJlbnQpOwog");
    sb.append("ICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgdmFyIHN0YXRlID0gZm9yayhwcmlvclN0YXRlKTsK");
    sb.append("ICAgICAgaWYgKHN5bmNlZCkgewogICAgICAgIGF2YWlsKHBhcmVudCwgc3RhdGUpOwogICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgIG5vdGF2YWlsKHBhcmVudCwgc3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmli");
    sb.append("ZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAgICAvLyBUT0RPOiByZXR1cm4gZmFsc2UgdG8gdW5zdWIK");
    sb.append("ICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKICB9OwoKICB2YXIgYmluZF9yZXNwb25kZXIgPSBmdW5j");
    sb.append("dGlvbiAoY28sIGNsZWFudXAsIHJldHJ5X3NtKSB7CiAgICByZXRyeV9zbS51bmV4cGVjdGVkX2Vycm9y");
    sb.append("cyA9IDA7CiAgICByZXRyeV9zbS5iYWNrb2ZmID0gMTsKICAgIHJldHVybiB7CiAgICAgIG5leHQ6IGZ1");
    sb.append("bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgY28uZGVidWdnZXIocGF5bG9hZCk7CiAgICAgICAgY28u");
    sb.append("c2V0X2Nvbm5lY3RlZCh0cnVlKTsKICAgICAgICByZXRyeV9zbS51bmV4cGVjdGVkX2Vycm9ycyA9IDA7");
    sb.append("CiAgICAgICAgcmV0cnlfc20uYmFja29mZiA9IDE7CiAgICAgICAgaWYgKCJkYXRhIiBpbiBwYXlsb2Fk");
    sb.append("LmRlbHRhKSB7CiAgICAgICAgICBjby50cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLmRhdGEpOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBpZiAoIm91dHN0YW5kaW5nIiBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAg");
    sb.append("ICBjby5vbmRlY2lkZShwYXlsb2FkLmRlbHRhLm91dHN0YW5kaW5nKTsKICAgICAgICB9CiAgICAgICAg");
    sb.append("aWYgKCd2aWV3c3RhdGUnIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIGNvLnZpZXdzdGF0ZXRy");
    sb.append("ZWUudXBkYXRlKHBheWxvYWQuZGVsdGEudmlld3N0YXRlKTsKICAgICAgICB9CiAgICAgICAgaWYgKCds");
    sb.append("b2cnIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHBheWxvYWQuZGVsdGEu");
    sb.append("bG9nKTsKICAgICAgICB9CiAgICAgICAgaWYgKCdyZWxvYWQnIGluIHBheWxvYWQuZGVsdGEpIHsKICAg");
    sb.append("ICAgICAgIGlmIChwYXlsb2FkLmRlbHRhLnJlbG9hZFsncHJlc2VydmUtdmlldyddKSB7CiAgICAgICAg");
    sb.append("ICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyeHZpZXdzdGF0ZScsIEpTT04uc3RyaW5naWZ5KGNvLnZp");
    sb.append("ZXdzdGF0ZXRyZWUucmF3KCkpKTsKICAgICAgICAgIH0KICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5y");
    sb.append("ZWxvYWQoKTsKICAgICAgICB9CiAgICAgICAgaWYgKCd2aWV3cG9ydCcgaW4gcGF5bG9hZC5kZWx0YSAm");
    sb.append("JiAnbWVzc2FnZScgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgdmFyIHZpZXdwb3J0ID0gcGF5");
    sb.append("bG9hZC5kZWx0YS52aWV3cG9ydDsKICAgICAgICAgIGlmICh2aWV3cG9ydCBpbiBjby5oYW5kbGVycykg");
    sb.append("ewogICAgICAgICAgICBjby5oYW5kbGVyc1t2aWV3cG9ydF0ocGF5bG9hZC5kZWx0YS5tZXNzYWdlLCBj");
    sb.append("byk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgndmlldy1zdGF0ZS1maWx0ZXInIGlu");
    sb.append("IHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIHZhciBmaWx0ZXIgPSB7fTsKICAgICAgICAgIHZhciBr");
    sb.append("ZXlzID0gcGF5bG9hZC5kZWx0YVsndmlldy1zdGF0ZS1maWx0ZXInXTsKICAgICAgICAgIGZvciAodmFy");
    sb.append("IGsgPSAwOyBrIDwga2V5cy5sZW5ndGg7IGsrKykgewogICAgICAgICAgICBmaWx0ZXJba2V5c1trXV0g");
    sb.append("PSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgY28uZmlsdGVyID0gZmlsdGVyOwogICAgICAgICAg");
    sb.append("Y28uaGFzX2ZpbHRlciA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmICgnZ290bycgaW4gcGF5bG9h");
    sb.append("ZC5kZWx0YSkgewogICAgICAgICAgc2VsZi5nb3RvKHBheWxvYWQuZGVsdGEuZ290bywgZmFsc2UpOwog");
    sb.append("ICAgICAgIH0KICAgICAgfSwKICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBz");
    sb.append("aG91bGRuJ3QgcmVhbGlzdGljYWxseSBoYXBwZW4gVE9ETzogdmFsaWRhdGUgPC0gdHJ1dGgKICAgICAg");
    sb.append("ICBjby5zZXRfY29ubmVjdGVkKGZhbHNlKTsKICAgICAgICBjby5wdHIgPSBudWxsOwogICAgICB9LAog");
    sb.append("ICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgLy8gcmVnaXN0ZXIgdGhlIGZh");
    sb.append("aWx1cmUKICAgICAgICBjby5zZXRfY29ubmVjdGVkKGZhbHNlKTsKICAgICAgICBjby5wdHIgPSBudWxs");
    sb.append("OwogICAgICAgIGlmIChyZWFzb24gPT0gNDAzNDAzIHx8IHJlYXNvbiA9PSA0MDM1MDAgfHwgcmVhc29u");
    sb.append("ID09IDE4NDMzMyB8fCByZWFzb24gPT0gOTgyMjUzKSB7CiAgICAgICAgICBjbGVhbnVwKCk7CiAgICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIGlzIGl0IGFuIGV4cGVjdGVkIGVycm9yIHRo");
    sb.append("YXQgd2lsbCBoYXBwZW4gYSBidW5jaD8KICAgICAgICB2YXIgZXhwZWN0ZWRfZXJyb3IgPSByZWFzb24g");
    sb.append("PT0gOTk5OwogICAgICAgIC8vIGRvIHdlIG5vdCBrbm93IGFib3V0IGFuIGVycm9yIHRoYXQgaGFwcGVu");
    sb.append("cyBhIGJ1bmNoPyBpZiBzbywgdGhlbiBsZXQncyBhdCBsZWFzdCB0cnkgYWdhaW4gYSBudW1iZXIgb2Yg");
    sb.append("ZmluaXRlIHRpbWVzLgogICAgICAgIHZhciBibGluZF9yZXRyeSA9IHJldHJ5X3NtLnVuZXhwZWN0ZWRf");
    sb.append("ZXJyb3JzIDwgMTY7CiAgICAgICAgaWYgKGJsaW5kX3JldHJ5KSB7CiAgICAgICAgICByZXRyeV9zbS51");
    sb.append("bmV4cGVjdGVkX2Vycm9ycysrOwogICAgICAgIH0KICAgICAgICAvLyByZXRyeSBvbiBlaXRoZXIgY2Fz");
    sb.append("ZQogICAgICAgIGlmIChleHBlY3RlZF9lcnJvciB8fCBibGluZF9yZXRyeSkgewogICAgICAgICAgcmV0");
    sb.append("cnlfc20uYmFja29mZiA9IE1hdGguY2VpbChNYXRoLm1pbihyZXRyeV9zbS5iYWNrb2ZmICsgTWF0aC5y");
    sb.append("YW5kb20oKSAqIHJldHJ5X3NtLmJhY2tvZmYgKyAoYmxpbmRfcmV0cnkgPyAxMjUgOiAxKSwgMjUwMCkp");
    sb.append("OwogICAgICAgICAgaWYgKGV4cGVjdGVkX2Vycm9yKSB7CiAgICAgICAgICAgIC8vIHRoZSBleHBlY3Rl");
    sb.append("ZCBlcnJvciBpcyBhIGNvbm5lY3Rpb24gZXZlbnQsIHNvIHdlIHByb3RlY3QgdGhlIHNlcnZpY2UgYW5k");
    sb.append("IGp1bXAgYmFjay1vZmYgcmlnaHQgdG8gbmVhciBtYXggb3ZlciBhIG5pY2Ugc3ByZWFkCiAgICAgICAg");
    sb.append("ICAgIHJldHJ5X3NtLmJhY2tvZmYgPSBNYXRoLm1pbigxMjUwLCByZXRyeV9zbS5iYWNrb2ZmKSArIE1h");
    sb.append("dGgucmFuZG9tKCkgKiAxMjUwOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGV4cGVjdGVkX2Vycm9y");
    sb.append("KSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjb25uZWN0LWxvc3N8cmV0cnlpbmcuLi4gKCIgKyBy");
    sb.append("ZXRyeV9zbS5iYWNrb2ZmICsgIik7IHJlYXNvbj0iICsgcmVhc29uICsgKGJsaW5kX3JldHJ5ID8gIiBb");
    sb.append("YmxpbmRdIiA6ICIiKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygi");
    sb.append("Y29ubmVjdC1mYWlsdXJlfHJldHJ5aW5nLi4uICgiICsgcmV0cnlfc20uYmFja29mZiArICIpOyByZWFz");
    sb.append("b249IiArIHJlYXNvbiArIChibGluZF9yZXRyeSA/ICIgW2JsaW5kXSIgOiAiIikpOwogICAgICAgICAg");
    sb.append("fQogICAgICAgICAgLy8gVE9ETzogbmVlZCBhIGRpZmZlcmVudCBmZWVkYmFjayBtZWNoYW5pc20gKG1h");
    sb.append("eWJlIGEgbnVtYmVyIHVuZGVyIHRoZSB3aWZpIGljb24/KQogICAgICAgICAgd2luZG93LnNldFRpbWVv");
    sb.append("dXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHJ5X3NtLmdvKCk7CiAgICAgICAgICB9LCByZXRy");
    sb.append("eV9zbS5iYWNrb2ZmKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coImdhdmUg");
    sb.append("dXAgY29ubmVjdGlvbjsiICsgY28ubGFiZWwgKyAiOyByZWFzb249IiArIHJlYXNvbik7CiAgICAgICAg");
    sb.append("fQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIHNldHVwX2NvID0gZnVuY3Rpb24oZGVzaXJlZCwgdW5z");
    sb.append("dWIsIGNvLCBzdGF0ZSkgewogICAgY28udmlld3N0YXRldHJlZSA9IHN0YXRlLnZpZXcudHJlZTsKICAg");
    sb.append("IHZhciBzeW5jX3RyZWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIGxldCdzIGNvcHkgb3V0IHRoZSB0");
    sb.append("cmVlIGZyb20gdGhlIHZpZXdzdGF0ZQogICAgICB2YXIgbmV3X3RyZWUgPSBzYWZlX2ZpbHRlcihzdGF0");
    sb.append("ZS52aWV3LnRyZWUuY29weSgpKTsKCiAgICAgIC8vIGlmIHdlIGhhdmUgZ290IGEgZmlsdGVyIGZyb20g");
    sb.append("dGhlIHNlcnZlciwgdGhlbiBsZXQncyBmaWx0ZXIKICAgICAgaWYgKGNvLmhhc19maWx0ZXIpIHsKICAg");
    sb.append("ICAgICAvLyByZWNvbnN0cnVjdCB0aGUgbmV3IHZpZXcgYmFzZWQgb24gdGhlIGludGVyc2VjdGlvbiBv");
    sb.append("ZiB0aGUgZmlsdGVyIGFuZCB0aGUgbmV3IHN0YXRlCiAgICAgICAgdmFyIGZpbHRlcmVkID0ge307CiAg");
    sb.append("ICAgICAgZm9yICh2YXIgayBpbiBuZXdfdHJlZSkgewogICAgICAgICAgaWYgKGNvLmZpbHRlcltrXSkg");
    sb.append("ewogICAgICAgICAgICBmaWx0ZXJlZFtrXSA9IG5ld190cmVlW2tdOwogICAgICAgICAgfQogICAgICAg");
    sb.append("IH0KICAgICAgICAvLyBhc3N1bWUgdGhlIG5ldyB0cmVlCiAgICAgICAgbmV3X3RyZWUgPSBmaWx0ZXJl");
    sb.append("ZDsKICAgICAgfQogICAgICAvLyBpZiB0aGUgY2xvbmUgKGkuZS4gc3RyaW5naWZpZWQgdmVyc2lvbikg");
    sb.append("aXMgdGhlIHNhbWUgYXMgd2hhdCB3ZSBsYXN0IHNlbnQsIHRoZW4gZG9uJ3Qgc2VuZCBhbnl0aGluZwog");
    sb.append("ICAgICB2YXIgcHJpb3JfY2xvbmUgPSBKU09OLnN0cmluZ2lmeShuZXdfdHJlZSk7CiAgICAgIGlmIChw");
    sb.append("cmlvcl9jbG9uZSA9PSBjby52aWV3c3RhdGVfY2xvbmUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0K");
    sb.append("ICAgICAgY28udmlld3N0YXRlX3NlbnQgPSBmYWxzZTsKICAgICAgY28udnNzZXErKzsKICAgICAgY28u");
    sb.append("c3luYygpOwogICAgICB2YXIgc3luY2VkID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChjby52c3Nl");
    sb.append("cSA9PSB0aGlzLmJvdW5kKSB7CiAgICAgICAgICBjby52aWV3c3RhdGVfc2VudCA9IHRydWU7CiAgICAg");
    sb.append("ICAgICBjby5zeW5jKCk7CiAgICAgICAgfQogICAgICB9LmJpbmQoeyBib3VuZDogY28udnNzZXEgfSk7");
    sb.append("CiAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9IEpTT04uc3RyaW5naWZ5KG5ld190cmVlKTsKICAgICAg");
    sb.append("Y28ucHRyLnVwZGF0ZShuZXdfdHJlZSwgeyBzdWNjZXNzOiBzeW5jZWQsIGZhaWx1cmU6IHN5bmNlZCB9");
    sb.append("KTsKICAgIH07CiAgICB2YXIgYmluZCA9IGZ1bmN0aW9uIChzZW5kTm93KSB7CiAgICAgIHVuc3ViLnZp");
    sb.append("ZXcgPSBzdGF0ZS52aWV3LnRyZWUuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoY28u");
    sb.append("cHRyID09IG51bGwpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgc3luY190cmVl");
    sb.append("KCk7CiAgICAgIH0pOwogICAgICBpZiAoc2VuZE5vdykgewogICAgICAgIHN5bmNfdHJlZSgpOwogICAg");
    sb.append("ICB9CiAgICB9OwogICAgaWYgKGNvLnB0ciAhPSBudWxsICYmIGNvLmJvdW5kID09IGRlc2lyZWQpIHsK");
    sb.append("ICAgICAgYmluZCh0cnVlKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKGNvLnB0ciAh");
    sb.append("PSBudWxsKSB7CiAgICAgIGNvLnB0ci5lbmQoeyBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7IH0sIGZhaWx1");
    sb.append("cmU6IGZ1bmN0aW9uICgpIHsgfSB9KTsKICAgICAgY28ucHRyID0gbnVsbDsKICAgIH0KICAgIHJldHVy");
    sb.append("biBiaW5kOwogIH07CgogIC8vIDxjb25uZWN0aW9uIGJpbGxpbmcgLi4uPgogIHNlbGYuQkNPTk5FQ1Qg");
    sb.append("PSBmdW5jdGlvbiAoc3RhdGUsIHJ4b2JqKSB7CiAgICB2YXIgdW5zdWIgPSB7CiAgICAgIHZpZXc6IGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgfQogICAgfTsKICAgIHJ4b2JqLl9fID0gZGVib3VuY2UoNSwgZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICBpZiAoISgnbmFtZScgaW4gcnhvYmopKSB7CiAgICAgICAgcmV0dXJuOwogICAg");
    sb.append("ICB9CiAgICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQocnhvYmouaWRlbnRpdHksIGZ1bmN0aW9uICgp");
    sb.append("IHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0OyB9KTsKICAgICAgaWYgKGlkTG9va3VwLmFib3J0KSB7CiAg");
    sb.append("ICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBjbyA9IGdldF9jb25uZWN0aW9uX29iaihyeG9i");
    sb.append("ai5uYW1lKTsKICAgICAgdmFyIGRlc2lyZWQgPSAiOmJpbGxpbmc6IiArIGlkTG9va3VwLmlkZW50aXR5");
    sb.append("OwogICAgICB2YXIgYmluZCA9IHNldHVwX2NvKGRlc2lyZWQsIHVuc3ViLCBjbywgc3RhdGUpOwogICAg");
    sb.append("ICBpZiAoYmluZCA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY28uYm91");
    sb.append("bmQgPSBkZXNpcmVkOwogICAgICB2YXIgaWRlbnRpdHkgPSBpZExvb2t1cC5pZGVudGl0eTsKICAgICAg");
    sb.append("dmFyIGNsZWFudXAgPSBpZExvb2t1cC5jbGVhbnVwOwogICAgICB1bnN1Yi52aWV3KCk7CiAgICAgIGNv");
    sb.append("LmlkZW50aXR5ID0gaWRlbnRpdHk7CiAgICAgIGNvLmhhbmRsZXJzID0ge307CiAgICAgIGNvLnZpZXdz");
    sb.append("dGF0ZV9zZW50ID0gdHJ1ZTsKICAgICAgY28ubGFiZWwgPSAiQmlsbGluZyBbICIgKyByeG9iai5uYW1l");
    sb.append("ICsgIl0iOwogICAgICBjby52aWFfYmlsbGluZyA9IHRydWU7CiAgICAgIGNvLnZpYV9kb21haW4gPSBm");
    sb.append("YWxzZTsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAgICAgIHJldHJ5X3NtLnJlc3BvbmRlciA9IGJp");
    sb.append("bmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9zbSk7CiAgICAgIHJldHJ5X3NtLmdvID0gZnVu");
    sb.append("Y3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3RoaW5nIG5ldwogICAgICAgIGNvLnZpZXdzdGF0");
    sb.append("ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0gY29ubmVjdGlvbi5CaWxsaW5nQ29ubmVjdGlv");
    sb.append("bkNyZWF0ZShpZGVudGl0eSwgcmV0cnlfc20ucmVzcG9uZGVyKTsKICAgICAgfTsKICAgICAgcmV0cnlf");
    sb.append("c20uZ28oKTsKICAgICAgY28udHJlZS51cGRhdGUoe30pOwogICAgICBiaW5kKGZhbHNlKTsKICAgIH0p");
    sb.append("OwogIH07CgogIC8vIENIRUNLIEZPUiBPVkVSUklERSBTSUdOQUwgSEVSRQogIHNlbGYuZG9tYWluID0g");
    sb.append("bG9jYXRpb24uaG9zdG5hbWU7CiAgc2VsZi5ob3N0ID0gbG9jYXRpb24uaG9zdDsKICBzZWxmLnByb3Rv");
    sb.append("Y29sID0gbG9jYXRpb24ucHJvdG9jb2w7CiAgc2VsZi5pc19tb2JpbGUgPSBmYWxzZTsKCiAgdmFyIGhv");
    sb.append("c3RPdmVycmlkZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJtZG9faG9zdCIpOyAvLyBtdWx0aSBkb21h");
    sb.append("aW4gZW5kcG9pbnQgY2hvaWNlCiAgaWYgKGhvc3RPdmVycmlkZSAhPSBudWxsKSB7CiAgICBzZWxmLmhv");
    sb.append("c3QgPSBob3N0T3ZlcnJpZGU7CiAgICBzZWxmLmRvbWFpbiA9IGhvc3RPdmVycmlkZS5zcGxpdCgiOiIp");
    sb.append("WzBdOwogIH0KCiAgc2VsZi51cmxfcHJlZml4ID0gc2VsZi5wcm90b2NvbCArICIvLyIgKyBzZWxmLmhv");
    sb.append("c3Q7CgoKICBzZWxmLm1vYmlsZUluaXQgPSBmdW5jdGlvbihkZWZhdWx0T3ZlcnJpZGVEb21haW4pIHsK");
    sb.append("ICAgIHNlbGYuZG9tYWluID0gZGVmYXVsdE92ZXJyaWRlRG9tYWluOwogICAgc2VsZi5ob3N0ID0gZGVm");
    sb.append("YXVsdE92ZXJyaWRlRG9tYWluOwogICAgc2VsZi5wcm90b2NvbCA9ICJodHRwczoiOwogICAgY29ubmVj");
    sb.append("dGlvbi5wcm90b2NvbCA9ICJodHRwczoiOwogICAgc2VsZi5pc19tb2JpbGUgPSB0cnVlOwogIH07CiAg");
    sb.append("c2VsZi5tb2JpbGVJbml0TXVsdGlEb21haW4gPSBmdW5jdGlvbihzdGFydCwgYmV0YVByZWZpeCwgcHJv");
    sb.append("ZFByZWZpeCkgewogICAgc2VsZi5tZF9iZXRhUHJlZml4ID0gYmV0YVByZWZpeDsKICAgIHNlbGYubWRf");
    sb.append("cHJvZFByZWZpeCA9IHByb2RQcmVmaXg7CiAgICBzZWxmLnByb3RvY29sID0gImh0dHBzOiI7CiAgICBj");
    sb.append("b25uZWN0aW9uLnByb3RvY29sID0gImh0dHBzOiI7CiAgICBzZWxmLmlzX21vYmlsZSA9IHRydWU7CiAg");
    sb.append("ICB2YXIgaW5pdGlhbF9wYXRoID0gc3RhcnQ7CiAgICBpZiAoInJlYWR5IiA9PSBsb2NhbFN0b3JhZ2Uu");
    sb.append("Z2V0SXRlbSgibWRsIikpIHsKICAgICAgaW5pdGlhbF9wYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhu");
    sb.append("YW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIHdpbmRvdy5sb2NhdGlvbi5oYXNoOwogICAgfQog");
    sb.append("ICAgc2VsZi5ydW4oZG9jdW1lbnQuYm9keSwgZml4UGF0aChpbml0aWFsX3BhdGgpLCBmYWxzZSk7CiAg");
    sb.append("ICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uIChwKSB7CiAgICAgIHNlbGYucnVuKGRvY3VtZW50");
    sb.append("LmJvZHksIGZpeFBhdGgoaW5pdGlhbF9wYXRoKSwgZmFsc2UpOwogICAgfTsKICB9OwogIHZhciBnZXRP");
    sb.append("ckNyZWF0ZU1hbmlmZXN0cyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGRiID0gbG9jYWxTdG9yYWdlLmdl");
    sb.append("dEl0ZW0oIl9fZG9tYWluX21hbmlmZXN0cyIpOwogICAgaWYgKGRiID09IG51bGwpIHsKICAgICAgZGIg");
    sb.append("PSB7c2VxOjAsIG1hbmlmZXN0czpbXX07CiAgICB9IGVsc2UgewogICAgICBkYiA9IEpTT04ucGFyc2Uo");
    sb.append("ZGIpOwogICAgfQogICAgcmV0dXJuIGRiOwogIH07CiAgdmFyIHNhdmVNYW5pZmVzdHMgPSBmdW5jdGlv");
    sb.append("bihkYikgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIl9fZG9tYWluX21hbmlmZXN0cyIsIEpTT04u");
    sb.append("c3RyaW5naWZ5KGRiKSk7CiAgfTsKICBzZWxmLnJlZ2lzdGVyTWFuaWZlc3QgPSBmdW5jdGlvbih1cmws");
    sb.append("IHVzZSA9IGZhbHNlKSB7CiAgICB2YXIgZGIgPSBnZXRPckNyZWF0ZU1hbmlmZXN0cygpOwogICAgdmFy");
    sb.append("IGFkZCA9IGZ1bmN0aW9uKG1hbmlmZXN0KSB7CiAgICAgIG1hbmlmZXN0LnNvdXJjZSA9IHVybDsKICAg");
    sb.append("ICAgbWFuaWZlc3QuaWQgPSBkYi5zZXE7CiAgICAgIGRiLnNlcSsrOwogICAgICBmb3IgKHZhciBrID0g");
    sb.append("MDsgayA8IGRiLm1hbmlmZXN0cy5sZW5ndGg7IGsrKykgewogICAgICAgIGlmIChkYi5tYW5pZmVzdHNb");
    sb.append("a10uc291cmNlID09IHVybCkgewogICAgICAgICAgZGIubWFuaWZlc3RzW2tdID0gbWFuaWZlc3Q7CiAg");
    sb.append("ICAgICAgICBzYXZlTWFuaWZlc3RzKGRiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAg");
    sb.append("IH0KICAgICAgZGIubWFuaWZlc3RzLnB1c2gobWFuaWZlc3QpOwogICAgICBzYXZlTWFuaWZlc3RzKGRi");
    sb.append("KTsKICAgIH07CiAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHhodHRwLm9u");
    sb.append("cmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9");
    sb.append("PSA0KSB7CiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgYWRkKEpTT04u");
    sb.append("cGFyc2UodGhpcy5yZXNwb25zZVRleHQpKTsKCiAgICAgICAgICBpZih1c2UpIHsKICAgICAgICAgICAg");
    sb.append("aWYgKGRiLm1hbmlmZXN0cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7");
    sb.append("IGsgPCBkYi5tYW5pZmVzdHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICAgIGlmIChkYi5tYW5p");
    sb.append("ZmVzdHNba10uc291cmNlID09IHVybCkgewogICAgICAgICAgICAgICAgICBzZWxmLnVzZU1hbmlmZXN0");
    sb.append("KGRiLm1hbmlmZXN0c1trXS5pZCk7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAg");
    sb.append("ICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAg");
    sb.append("ICAgIH0KICAgIH07CiAgICB4aHR0cC5vcGVuKCJHRVQiLCB1cmwsIHRydWUpOwogICAgeGh0dHAuc2Vu");
    sb.append("ZCgpOwogIH07CiAgLy8gUlVOVElNRShtb2JpbGUpIHwgcng6YWN0aW9uPSJtYW5pZmVzdC1hZGQ6Igog");
    sb.append("IHNlbGYuTURfYSA9IGZ1bmN0aW9uKGRvbSwgdHlwZSwgdmFsdWUpIHsKICAgIHJlZ19ldmVudChudWxs");
    sb.append("LCBkb20sIHR5cGUsIGZ1bmN0aW9uKCkgewogICAgICBzZWxmLnJlZ2lzdGVyTWFuaWZlc3QodHlwZW9m");
    sb.append("KHZhbHVlKSA9PSAnZnVuY3Rpb24nID8gdmFsdWUoKSA6IHZhbHVlKTsKICAgIH0pOwogIH07CgogIHNl");
    sb.append("bGYudXNlTWFuaWZlc3QgPSBmdW5jdGlvbihpZCkgewogICAgICB2YXIgZGIgPSBnZXRPckNyZWF0ZU1h");
    sb.append("bmlmZXN0cygpOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGRiLm1hbmlmZXN0cy5sZW5ndGg7IGsr");
    sb.append("KykgewogICAgICAgIHZhciBtYW5pZmVzdCA9IGRiLm1hbmlmZXN0c1trXTsKICAgICAgICBpZiAobWFu");
    sb.append("aWZlc3QuaWQgPT0gaWQpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJtZG9faG9zdCIs");
    sb.append("IG5ldyBVUkwoZGIubWFuaWZlc3RzW2tdLnNvdXJjZSkuaG9zdCk7CiAgICAgICAgICBpZiAobWFuaWZl");
    sb.append("c3QuYmV0YSkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibWRlYyIsICJiZXRhIik7");
    sb.append("CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibWRlYyIs");
    sb.append("ICJwcm9kIik7CiAgICAgICAgICB9CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibWRsIiwg");
    sb.append("InJlYWR5Iik7CiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICIvIjsKICAgICAgICB9CiAg");
    sb.append("ICAgIH0KICAgIH0KICAvLyBSVU5USU1FKG1vYmlsZSkgfCByeDphY3Rpb249Im1hbmlmZXN0LXVzZToi");
    sb.append("CiAgc2VsZi5NRF91ID0gZnVuY3Rpb24oZG9tLCB0eXBlLCB2YWx1ZSkgewogICAgcmVnX2V2ZW50KG51");
    sb.append("bGwsIGRvbSwgdHlwZSwgZnVuY3Rpb24oKSB7CiAgICAgIHNlbGYudXNlTWFuaWZlc3QodHlwZW9mKHZh");
    sb.append("bHVlKSA9PSAnZnVuY3Rpb24nID8gdmFsdWUoKSA6IHZhbHVlKTsKICAgIH0pOwogIH07CiAgc2VsZi5t");
    sb.append("b2JpbGVMb2FkID0gZnVuY3Rpb24odXJsKSB7CiAgICB2YXIgcGFyc2VkID0gbmV3IFVSTCh1cmwpOwog");
    sb.append("ICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kb19ob3N0IiwgcGFyc2VkLmhvc3QpOwogICAgaWYgKHBh");
    sb.append("cnNlZC5ob3N0LmVuZHNXaXRoKHNlbGYubWRfYmV0YVByZWZpeCkpIHsKICAgICAgbG9jYWxTdG9yYWdl");
    sb.append("LnNldEl0ZW0oIm1kZWMiLCAiYmV0YSIpOwogICAgfSBlbHNlIHsKICAgICAgbG9jYWxTdG9yYWdlLnNl");
    sb.append("dEl0ZW0oIm1kZWMiLCAicHJvZCIpOwogICAgfQogICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwYXJz");
    sb.append("ZWQucGF0aDsKICB9OwogIC8vIFJVTlRJTUUobW9iaWxlKSB8IHJ4OmFjdGlvbj0ibWFuaWZlc3QtZGVs");
    sb.append("OiIKICBzZWxmLk1EX2QgPSBmdW5jdGlvbihkb20sIHR5cGUsIHZhbHVlKSB7CiAgICByZWdfZXZlbnQo");
    sb.append("bnVsbCwgZG9tLCB0eXBlLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIGlkID0gcGFyc2VJbnQodHlwZW9m");
    sb.append("KHZhbHVlKSA9PSAnZnVuY3Rpb24nID8gdmFsdWUoKSA6IHZhbHVlKTsKICAgICAgdmFyIGRiID0gZ2V0");
    sb.append("T3JDcmVhdGVNYW5pZmVzdHMoKTsKICAgICAgdmFyIG5ld19tYW5pZmVzdHMgPSBbXTsKICAgICAgZm9y");
    sb.append("ICh2YXIgayA9IDA7IGsgPCBkYi5tYW5pZmVzdHMubGVuZ3RoOyBrKyspIHsKICAgICAgICBpZiAoZGIu");
    sb.append("bWFuaWZlc3RzW2tdLmlkICE9IGlkKSB7CiAgICAgICAgICBuZXdfbWFuaWZlc3RzLnB1c2goZGIubWFu");
    sb.append("aWZlc3RzW2tdKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZGIubWFuaWZlc3RzID0gbmV3X21hbmlm");
    sb.append("ZXN0czsKICAgICAgc2F2ZU1hbmlmZXN0cyhkYik7CiAgICB9KTsKICB9OwoKICAvLyA8Y29ubmVjdGlv");
    sb.append("biB1c2UtZG9tYWluIC4uLj4KICBzZWxmLkRDT05ORUNUID0gZnVuY3Rpb24gKHN0YXRlLCByeG9iaikg");
    sb.append("ewogICAgdmFyIHVuc3ViID0gewogICAgICB2aWV3OiBmdW5jdGlvbiAoKSB7CiAgICAgIH0KICAgIH07");
    sb.append("CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDUsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCEoJ25hbWUn");
    sb.append("IGluIHJ4b2JqKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgaWRMb29rdXAgPSBz");
    sb.append("ZWxmLklEKHJ4b2JqLmlkZW50aXR5LCBmdW5jdGlvbiAoKSB7IHJldHVybiByeG9iai5yZWRpcmVjdDsg");
    sb.append("fSk7CiAgICAgIGlmIChpZExvb2t1cC5hYm9ydCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAg");
    sb.append("ICB2YXIgY28gPSBnZXRfY29ubmVjdGlvbl9vYmoocnhvYmoubmFtZSk7CiAgICAgIHZhciBkb21haW4g");
    sb.append("PSBzZWxmLmRvbWFpbjsKICAgICAgdmFyIGRlc2lyZWQgPSBkb21haW4gKyBpZExvb2t1cC5pZGVudGl0");
    sb.append("eTsKICAgICAgdmFyIGJpbmQgPSBzZXR1cF9jbyhkZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKTsKICAg");
    sb.append("ICAgaWYgKGJpbmQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvLmJv");
    sb.append("dW5kID0gZGVzaXJlZDsKCiAgICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAg");
    sb.append("ICB2YXIgY2xlYW51cCA9IGlkTG9va3VwLmNsZWFudXA7CiAgICAgIHVuc3ViLnZpZXcoKTsKICAgICAg");
    sb.append("Y28uaWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAgY28uaGFuZGxlcnMgPSB7fTsKICAgICAgY28udmll");
    sb.append("d3N0YXRlX3NlbnQgPSB0cnVlOwogICAgICBjby5sYWJlbCA9ICJEb21haW46IiArIGRvbWFpbiArICIg");
    sb.append("WyAiICsgcnhvYmoubmFtZSArICJdIjsKICAgICAgY28udmlhX2RvbWFpbiA9IHRydWU7CiAgICAgIGNv");
    sb.append("LnZpYV9iaWxsaW5nID0gZmFsc2U7CiAgICAgIGNvLmRvbWFpbiA9IGRvbWFpbjsKICAgICAgdmFyIHJl");
    sb.append("dHJ5X3NtID0ge307CiAgICAgIHJldHJ5X3NtLnJlc3BvbmRlciA9IGJpbmRfcmVzcG9uZGVyKGNvLCBj");
    sb.append("bGVhbnVwLCByZXRyeV9zbSk7CiAgICAgIHJldHJ5X3NtLmdvID0gZnVuY3Rpb24oKSB7CiAgICAgICAg");
    sb.append("Ly8gYmlhcyB0byBub3RoaW5nIG5ldwogICAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7CiAg");
    sb.append("ICAgICAgY28ucHRyID0gY29ubmVjdGlvbi5Db25uZWN0aW9uQ3JlYXRlVmlhRG9tYWluKGlkZW50aXR5");
    sb.append("LCBkb21haW4sIHNhZmVfZmlsdGVyKHN0YXRlLnZpZXcudHJlZS5jb3B5KCkpLCByZXRyeV9zbS5yZXNw");
    sb.append("b25kZXIpOwogICAgICB9OwogICAgICByZXRyeV9zbS5nbygpOwogICAgICBjby50cmVlLnVwZGF0ZSh7");
    sb.append("fSk7CiAgICAgIGJpbmQoZmFsc2UpOwogICAgfSk7CiAgfTsKCiAgLy8gPGNvbm5lY3Rpb24gLi4uPgog");
    sb.append("IHNlbGYuQ09OTkVDVCA9IGZ1bmN0aW9uIChzdGF0ZSwgcnhvYmopIHsKICAgIHZhciB1bnN1YiA9IHsK");
    sb.append("ICAgICAgdmlldzogZnVuY3Rpb24gKCkgewogICAgICB9CiAgICB9OwogICAgcnhvYmouX18gPSBkZWJv");
    sb.append("dW5jZSg1LCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2YWxpZCA9ICdrZXknIGluIHJ4b2JqICYmICdz");
    sb.append("cGFjZScgaW4gcnhvYmogJiYgJ25hbWUnIGluIHJ4b2JqOwogICAgICBpZiAoIXZhbGlkKSB7CiAgICAg");
    sb.append("ICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQocnhvYmouaWRlbnRp");
    sb.append("dHksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0OyB9KTsKICAgICAgaWYgKGlkTG9v");
    sb.append("a3VwLmFib3J0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBjbyA9IGdldF9jb25u");
    sb.append("ZWN0aW9uX29iaihyeG9iai5uYW1lKTsKICAgICAgdmFyIGRlc2lyZWQgPSByeG9iai5zcGFjZSArICIv");
    sb.append("IiArIHJ4b2JqLmtleSArICIvIiArIGlkTG9va3VwLmlkZW50aXR5OyAvLyBUT0RPOiBuZWVkIHNvbWUg");
    sb.append("a2luZCBvZiBoYXNoaW5nIGZ1bmN0aW9uIGhlcmUKICAgICAgdmFyIGJpbmQgPSBzZXR1cF9jbyhkZXNp");
    sb.append("cmVkLCB1bnN1YiwgY28sIHN0YXRlKTsKICAgICAgaWYgKGJpbmQgPT09IGZhbHNlKSB7CiAgICAgICAg");
    sb.append("cmV0dXJuOwogICAgICB9CiAgICAgIGNvLmJvdW5kID0gZGVzaXJlZDsKCiAgICAgIHZhciBpZGVudGl0");
    sb.append("eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2YXIgY2xlYW51cCA9IGlkTG9va3VwLmNsZWFudXA7");
    sb.append("CiAgICAgIHVuc3ViLnZpZXcoKTsKICAgICAgY28uc3BhY2UgPSByeG9iai5zcGFjZTsKICAgICAgY28u");
    sb.append("a2V5ID0gcnhvYmoua2V5OwogICAgICBjby5pZGVudGl0eSA9IGlkZW50aXR5OwogICAgICBjby5oYW5k");
    sb.append("bGVycyA9IHt9OwogICAgICBjby52aWV3c3RhdGVfc2VudCA9IHRydWU7CiAgICAgIGNvLmxhYmVsID0g");
    sb.append("Y28uc3BhY2UgKyAiLyIgKyBjby5rZXkgKyAiIFsgIiArIHJ4b2JqLm5hbWUgKyAiXSI7CiAgICAgIGNv");
    sb.append("LnZpYV9kb21haW4gPSBmYWxzZTsKICAgICAgY28udmlhX2JpbGxpbmcgPSBmYWxzZTsKICAgICAgdmFy");
    sb.append("IHJldHJ5X3NtID0ge307CiAgICAgIHJldHJ5X3NtLnJlc3BvbmRlciA9IGJpbmRfcmVzcG9uZGVyKGNv");
    sb.append("LCBjbGVhbnVwLCByZXRyeV9zbSk7CiAgICAgIHJldHJ5X3NtLmdvID0gZnVuY3Rpb24oKSB7CiAgICAg");
    sb.append("ICAgLy8gYmlhcyB0byBub3RoaW5nIG5ldwogICAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7");
    sb.append("CiAgICAgICAgY28ucHRyID0gY29ubmVjdGlvbi5Db25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5LCByeG9i");
    sb.append("ai5zcGFjZSwgcnhvYmoua2V5LCBzYWZlX2ZpbHRlcihzdGF0ZS52aWV3LnRyZWUuY29weSgpKSwgcmV0");
    sb.append("cnlfc20ucmVzcG9uZGVyKTsKICAgICAgfTsKICAgICAgcmV0cnlfc20uZ28oKTsKICAgICAgY28udHJl");
    sb.append("ZS51cGRhdGUoe30pOwogICAgICBiaW5kKGZhbHNlKTsKICAgIH0pOwogIH07CgogIHNlbGYuSU5URVJO");
    sb.append("QUwgPSBmdW5jdGlvbiAocHJpb3JTdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgc2VydmljZTogcHJp");
    sb.append("b3JTdGF0ZS5zZXJ2aWNlLAogICAgICBkYXRhOiB7IGNvbm5lY3Rpb246IG51bGwsIHRyZWU6IG5ldyBB");
    sb.append("ZGFtYVRyZWUoKSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAgICAgdmll");
    sb.append("dzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgY3VycmVudDogImRhdGEiCiAg");
    sb.append("ICB9OwogIH07CgogIHZhciByZWNhbGxfZW1haWwgPSBmdW5jdGlvbiAoZWwpIHsKICAgIGlmIChlbC50");
    sb.append("YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIklOUFVUIikgewogICAgICBpZiAoImVtYWlsIiA9PSBlbC50");
    sb.append("eXBlICYmICJlbWFpbCIgPT0gZWwubmFtZSkgewogICAgICAgIGVsLnZhbHVlID0gbG9jYWxTdG9yYWdl");
    sb.append("LmdldEl0ZW0oImVtYWlsX3JlbWVtYmVyIik7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICgi");
    sb.append("Y2hpbGRyZW4iIGluIGVsKSB7CiAgICAgICAgdmFyIGFyciA9IGVsLmNoaWxkcmVuOwogICAgICAgIHZh");
    sb.append("ciBuID0gYXJyLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAg");
    sb.append("ICAgICAgcmVjYWxsX2VtYWlsKGVsLmNoaWxkcmVuW2tdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0K");
    sb.append("ICB9OwoKICBzZWxmLmFVUCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9i");
    sb.append("aikgewogICAgdmFyIGlkTG9va3VwID0gc2VsZi5JRChpZGVudGl0eU5hbWUsIGZ1bmN0aW9uICgpIHsg");
    sb.append("cmV0dXJuIHJ4b2JqLnJ4X2ZvcndhcmQ7IH0pOyAvLyBUT0RPOiBtYWtlIHJ4dmFyCiAgICBpZiAoaWRM");
    sb.append("b29rdXAuYWJvcnQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9ybS5hY3Rpb24gPSAiaHR0cHM6");
    sb.append("Ly8iICsgQWRhbWEuUHJvZHVjdGlvbiArICIvfnVwbG9hZCI7CiAgICBmb3JtLm1ldGhvZCA9ICJwb3N0");
    sb.append("IjsKICAgIGZvcm0uZW5jdHlwZSA9ICJtdWx0aXBhcnQvZm9ybS1kYXRhIjsKICAgIHZhciBpZGVudGl0");
    sb.append("eUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgIGlkZW50aXR5SW5wdXQu");
    sb.append("dHlwZSA9ICJoaWRkZW4iOwogICAgaWRlbnRpdHlJbnB1dC5uYW1lID0gImlkZW50aXR5IjsKICAgIGlk");
    sb.append("ZW50aXR5SW5wdXQudmFsdWUgPSBpZExvb2t1cC5pZGVudGl0eTsKICAgIGZvcm0uYXBwZW5kQ2hpbGQo");
    sb.append("aWRlbnRpdHlJbnB1dCk7CiAgICB2YXIgaWZyYW1lVGFyZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgiaWZyYW1lIik7CiAgICBpZnJhbWVUYXJnZXQubmFtZSA9ICJVUExPQURfIiArIE1hdGgucmFuZG9t");
    sb.append("KCk7CiAgICBpZnJhbWVUYXJnZXQud2lkdGggPSAiMSI7CiAgICBpZnJhbWVUYXJnZXQuaGVpZ2h0ID0g");
    sb.append("IjEiOwoKICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWZyYW1lVGFyZ2V0KTsKICAgIGZvcm0udGFyZ2V0ID0g");
    sb.append("aWZyYW1lVGFyZ2V0Lm5hbWU7CiAgfTsKCiAgc2VsZi5hRFVQID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRl");
    sb.append("LCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKGlkZW50aXR5");
    sb.append("TmFtZSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhvYmoucnhfZm9yd2FyZDsgfSk7IC8vIFRPRE86IG1h");
    sb.append("a2Ugcnh2YXIKICAgIGlmIChpZExvb2t1cC5hYm9ydCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBm");
    sb.append("b3JtLmFjdGlvbiA9IHNlbGYucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0ICsgIi9+dXBsb2FkIjsK");
    sb.append("ICAgIGZvcm0ubWV0aG9kID0gInBvc3QiOwogICAgZm9ybS5lbmN0eXBlID0gIm11bHRpcGFydC9mb3Jt");
    sb.append("LWRhdGEiOwogICAgewogICAgICB2YXIgaWRlbnRpdHlJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoImlucHV0Iik7CiAgICAgIGlkZW50aXR5SW5wdXQudHlwZSA9ICJoaWRkZW4iOwogICAgICBpZGVu");
    sb.append("dGl0eUlucHV0Lm5hbWUgPSAiaWRlbnRpdHkiOwogICAgICBpZGVudGl0eUlucHV0LnZhbHVlID0gaWRM");
    sb.append("b29rdXAuaWRlbnRpdHk7CiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWRlbnRpdHlJbnB1dCk7CiAgICB9");
    sb.append("CiAgICB7CiAgICAgIHZhciBkb21haW5JbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0");
    sb.append("Iik7CiAgICAgIGRvbWFpbklucHV0LnR5cGUgPSAiaGlkZGVuIjsKICAgICAgZG9tYWluSW5wdXQubmFt");
    sb.append("ZSA9ICJkb21haW4iOwogICAgICBkb21haW5JbnB1dC52YWx1ZSA9IHNlbGYuZG9tYWluOwogICAgICBm");
    sb.append("b3JtLmFwcGVuZENoaWxkKGRvbWFpbklucHV0KTsKICAgIH0KICAgIHZhciBpZnJhbWVUYXJnZXQgPSBk");
    sb.append("b2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsKICAgIGlmcmFtZVRhcmdldC5uYW1lID0gIlVQ");
    sb.append("TE9BRF8iICsgTWF0aC5yYW5kb20oKTsKICAgIGlmcmFtZVRhcmdldC53aWR0aCA9ICIxIjsKICAgIGlm");
    sb.append("cmFtZVRhcmdldC5oZWlnaHQgPSAiMSI7CiAgICBmb3JtLmFwcGVuZENoaWxkKGlmcmFtZVRhcmdldCk7");
    sb.append("CiAgICBmb3JtLnRhcmdldCA9IGlmcmFtZVRhcmdldC5uYW1lOwogIH07CgoKCiAgdmFyIGdldF9mb3Jt");
    sb.append("X2FuZF9wdyA9IGZ1bmN0aW9uKGZvcm0pIHsKICAgIHZhciBwYXNzd29yZHMgPSB7fTsKICAgIHZhciBy");
    sb.append("ZXEgPSBnZXRfZm9ybShmb3JtLCBwYXNzd29yZHMpOwogICAgaWYgKCdwYXNzd29yZCcgaW4gcGFzc3dv");
    sb.append("cmRzKSB7CiAgICAgIHJlcVsncGFzc3dvcmQnXSA9IHBhc3N3b3Jkc1sncGFzc3dvcmQnXTsKICAgIH0K");
    sb.append("ICAgIGlmICgnbmV3X3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgcmVxWyduZXdfcGFzc3dv");
    sb.append("cmQnXSA9IHBhc3N3b3Jkc1snbmV3X3Bhc3N3b3JkJ107CiAgICB9CiAgICByZXR1cm4gcmVxOwogIH0K");
    sb.append("CiAgdmFyIGNvbW1vbkF1dGhvcml6ZSA9IGZ1bmN0aW9uKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUs");
    sb.append("IHJ4b2JqLCBuZXh0U3RlcCkgewogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBmb3Jt");
    sb.append("LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZl");
    sb.append("bnREZWZhdWx0KCk7CiAgICAgIHZhciBzZW5kUmVxID0gZnVuY3Rpb24ocmVxKSB7CiAgICAgICAgdmFy");
    sb.append("IHNtID0ge2F0dGVtcHRzOjB9OwogICAgICAgIHNtLnJlc3BvbmRlciA9IHsKICAgICAgICAgIHN1Y2Nl");
    sb.append("c3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5");
    sb.append("TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICAgIHNlbGYuZ290byhy");
    sb.append("eG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAg");
    sb.append("ICAgICAgIH0sCiAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAg");
    sb.append("IGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHNpZ25pbmcgaW50byBkb2N1bWVudDoiICsgcmVhc29u");
    sb.append("KTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIG5leHRTdGVwKHJlcSwgc20ucmVzcG9uZGVy");
    sb.append("KTsKICAgICAgfQogICAgICB2YXIgcGFzc3dvcmRzID0ge307CiAgICAgIHZhciByZXEgPSBnZXRfZm9y");
    sb.append("bShmb3JtLCBwYXNzd29yZHMpOwogICAgICBpZiAoJ3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAg");
    sb.append("ICAgICByZXFbJ3Bhc3N3b3JkJ10gPSBwYXNzd29yZHNbJ3Bhc3N3b3JkJ107CiAgICAgIH0KICAgICAg");
    sb.append("aWYgKCduZXdfcGFzc3dvcmQnIGluIHBhc3N3b3JkcykgewogICAgICAgIGNvbm5lY3Rpb24uRG9jdW1l");
    sb.append("bnRzSGFzaFBhc3N3b3JkKHBhc3N3b3Jkc1snbmV3X3Bhc3N3b3JkJ10sIHsKICAgICAgICAgIHN1Y2Nl");
    sb.append("c3M6IGZ1bmN0aW9uIChoYXNoZWRfcHcpIHsKICAgICAgICAgICAgcmVxWyduZXdfcGFzc3dvcmQnXSA9");
    sb.append("IGhhc2hlZF9wdy5wYXNzd29yZEhhc2g7CiAgICAgICAgICAgIHNlbmRSZXEocmVxKTsKICAgICAgICAg");
    sb.append("IH0sCiAgICAgICAgICBmYWlsZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZmlyZV9mYWlsdXJl");
    sb.append("KGZvcm0sICJGYWlsZWQgdG8gaGFzaCBwYXNzd29yZCIpOwogICAgICAgICAgfQogICAgICAgIH0pOwog");
    sb.append("ICAgICB9IGVsc2UgewogICAgICAgIHNlbmRSZXEocmVxKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7CiAg");
    sb.append("fQoKICAvLyByeDphY3Rpb249ZG9jdW1lbnQ6YXV0aG9yaXplCiAgc2VsZi5hRE9DID0gZnVuY3Rpb24g");
    sb.append("KGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICBjb21tb25BdXRob3JpemUoZm9y");
    sb.append("bSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmosIGZ1bmN0aW9uKHJlcSwgcmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRBdXRob3JpemF0aW9uKHJlcS5zcGFjZSwgcmVxLmtleSwgcmVx");
    sb.append("LCByZXNwb25kZXIpOwogICAgfSk7CiAgfTsKCiAgLy8gcng6YWN0aW9uPWRvbWFpbjphdXRob3JpemUK");
    sb.append("ICBzZWxmLmFET00gPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsK");
    sb.append("ICAgIGNvbW1vbkF1dGhvcml6ZShmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgZnVuY3Rp");
    sb.append("b24ocmVxLCByZXNwb25kZXIpIHsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6YXRpb25E");
    sb.append("b21haW4oc2VsZi5kb21haW4sIHJlcSwgcmVzcG9uZGVyKTsKICAgIH0pOwogIH07CgogIC8vIHJ4OmV2");
    sb.append("ZW50PXRvZ2dsZS1wYXNzd29yZAogIHNlbGYub25QV1QgPSBmdW5jdGlvbihkb20sIHN0YXRlLCB0eXBl");
    sb.append("KSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAg");
    sb.append("IHZhciBjdXIgPSBkb207CiAgICAgIHdoaWxlIChjdXIudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9ICJQ");
    sb.append("QVNTV09SRC1IT0xERVIiKSB7CiAgICAgICAgY3VyID0gY3VyLnBhcmVudEVsZW1lbnQ7CiAgICAgIH0K");
    sb.append("ICAgICAgdmFyIGh1bnQgPSBmdW5jdGlvbihub2RlKSB7CiAgICAgICAgaWYgKG5vZGUudGFnTmFtZS50");
    sb.append("b1VwcGVyQ2FzZSgpID09ICJJTlBVVCIgJiYgKG5vZGUubmFtZSA9PSAicGFzc3dvcmQiIHx8IG5vZGUu");
    sb.append("bmFtZSA9PSAiY29uZmlybS1wYXNzd29yZCIgfHwgbmFtZSA9PSAibmV3X3Bhc3N3b3JkIiB8fCBuYW1l");
    sb.append("ID09ICJjb25maXJtLW5ld19wYXNzd29yZCIpKSB7CiAgICAgICAgICBpZiAobm9kZS50eXBlID09ICJw");
    sb.append("YXNzd29yZCIpIHsKICAgICAgICAgICAgbm9kZS50eXBlID0gInRleHQiCiAgICAgICAgICB9IGVsc2Ug");
    sb.append("ewogICAgICAgICAgICBub2RlLnR5cGUgPSAicGFzc3dvcmQiCiAgICAgICAgICB9CiAgICAgICAgfQog");
    sb.append("ICAgICAgIGlmICgnY2hpbGRyZW4nIGluIG5vZGUpIHsKICAgICAgICAgIHZhciBjaCA9IG5vZGUuY2hp");
    sb.append("bGRyZW47CiAgICAgICAgICB2YXIgbiA9IGNoLmxlbmd0aDsKICAgICAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgbjsgaysrKSB7CiAgICAgICAgICAgIGh1bnQoY2hba10pOwogICAgICAgICAgfQogICAgICAg");
    sb.append("IH0KICAgICAgfTsKICAgICAgaWYgKGN1ciAhPSBudWxsKSB7CiAgICAgICAgaHVudChjdXIpOwogICAg");
    sb.append("ICB9CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWRvbWFpbjpzaWduLWluICh0");
    sb.append("byBkZXByZWNhdGUpCiAgc2VsZi5hZERTTyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlO");
    sb.append("YW1lLCByeG9iaikgewogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFkZEV2");
    sb.append("ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZh");
    sb.append("dWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybV9hbmRfcHcoZm9ybSk7CiAgICAgIHZhciBzbSA9");
    sb.append("IHthdHRlbXB0czowfTsKICAgICAgc20ucmVzcG9uZGVyID0gewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0");
    sb.append("aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBzdGFzaF9pZGVudGl0eShpZGVudGl0eU5hbWUsIHBheWxv");
    sb.append("YWQuaWRlbnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgICAgLy8gVE9ETzogYmxvdyBhd2F5IGNvbm5l");
    sb.append("Y3Rpb25zCiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAg");
    sb.append("ICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24g");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2lnbmluZyBpbnRv");
    sb.append("IGRvY3VtZW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfTsKICAgICAgY29ubmVjdGlvbi5E");
    sb.append("b2N1bWVudEF1dGhvcml6ZURvbWFpbihzZWxmLmRvbWFpbiwgcmVxLnVzZXJuYW1lLCByZXEucGFzc3dv");
    sb.append("cmQsIHNtLnJlc3BvbmRlcik7CiAgICB9LCB0cnVlKTsKICB9CgogIC8vIFJVTlRJTUUgfCByeDphY3Rp");
    sb.append("b249ZG9jdW1lbnQ6c2lnbi1pbiAodG8gZGVwcmVjYXRlKQogIHNlbGYuYURTTyA9IGZ1bmN0aW9uIChm");
    sb.append("b3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgeyAvLyBERVBSRUNBVEVECiAgICByeG9iai5f");
    sb.append("XyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVu");
    sb.append("Y3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdl");
    sb.append("dF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZShyZXEu");
    sb.append("c3BhY2UsIHJlcS5rZXksIHJlcS51c2VybmFtZSwgcmVxLnBhc3N3b3JkLCB7CiAgICAgICAgc3VjY2Vz");
    sb.append("czogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFt");
    sb.append("ZSwgcGF5bG9hZC5pZGVudGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3");
    sb.append("YXkgY29ubmVjdGlvbnMKICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7");
    sb.append("CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBm");
    sb.append("dW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWdu");
    sb.append("aW5nIGludG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIHRy");
    sb.append("dWUpOwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9tYWluOnNpZ24taW4tcmVzZXQgKHRv");
    sb.append("IGRlcHJlY2F0ZSkKICBzZWxmLmFkRFNPciA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlO");
    sb.append("YW1lLCByeG9iaikgeyAvLyBERVBSRUNBVEVECiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsK");
    sb.append("ICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBl");
    sb.append("dnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsK");
    sb.append("ICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZURvbWFpbldpdGhSZXNldChzZWxmLmRvbWFp");
    sb.append("biwgcmVxLnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHJlcS5uZXdfcGFzc3dvcmQsewogICAgICAgIHN1");
    sb.append("Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBzdGFzaF9pZGVudGl0eShpZGVudGl0");
    sb.append("eU5hbWUsIHBheWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgICAgLy8gVE9ETzogYmxv");
    sb.append("dyBhd2F5IGNvbm5lY3Rpb25zCiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFs");
    sb.append("c2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVy");
    sb.append("ZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQg");
    sb.append("c2lnbmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9");
    sb.append("LCB0cnVlKTsKICB9CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9jdW1lbnQ6c2lnbi1pbi1yZXNl");
    sb.append("dCAodG8gZGVwcmVjYXRlKQogIHNlbGYuYURTT3IgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50");
    sb.append("aXR5TmFtZSwgcnhvYmopIHsgLy8gREVQUkVDQVRFRAogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7");
    sb.append("IH07CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAg");
    sb.append("ICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybV9hbmRfcHcoZm9y");
    sb.append("bSk7CiAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRBdXRob3JpemVXaXRoUmVzZXQocmVxLnNwYWNlLCBy");
    sb.append("ZXEua2V5LCByZXEudXNlcm5hbWUsIHJlcS5wYXNzd29yZCwgcmVxLm5ld19wYXNzd29yZCx7CiAgICAg");
    sb.append("ICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlk");
    sb.append("ZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICAvLyBUT0RP");
    sb.append("OiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJk");
    sb.append("LCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBm");
    sb.append("YWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZh");
    sb.append("aWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9LCB0");
    sb.append("cnVlKTsKICAgIH0pOwogIH07CgogIHNlbGYuYXV0b2dlbmlkID0gMTsKICBzZWxmLlggPSBmdW5jdGlv");
    sb.append("bigpIHsKICAgIHNlbGYuYXV0b2dlbmlkKys7CiAgICByZXR1cm4gJ3gnICsgc2VsZi5hdXRvZ2VuaWQ7");
    sb.append("CiAgfTsKCiAgdmFyIHRyYW5zZm9ybXMgPSB7fTsKICB0cmFuc2Zvcm1zWydwcmluY2lwYWwuYWdlbnQn");
    sb.append("XSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguYWdlbnQ7IH07CiAgdHJhbnNmb3Jtc1sncHJpbmNpcGFs");
    sb.append("LmF1dGhvcml0eSddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geC5hdXRob3JpdHk7IH07CiAgdHJhbnNm");
    sb.append("b3Jtc1sndHJpbSddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4gKCcnICsgeCkudHJpbSgpOyB9OwogIHRy");
    sb.append("YW5zZm9ybXNbJ3VwcGVyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiAoJycgKyB4KS50b1VwcGVyQ2Fz");
    sb.append("ZSgpOyB9OwogIHRyYW5zZm9ybXNbJ2xvd2VyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiAoJycgKyB4");
    sb.append("KS50b0xvd2VyQ2FzZSgpOyB9OwogIHRyYW5zZm9ybXNbJ2lzX2VtcHR5X3N0ciddID0gZnVuY3Rpb24o");
    sb.append("eCkgeyByZXR1cm4geCA9PSAiIjsgfTsKICB0cmFuc2Zvcm1zWydpc19ub3RfZW1wdHlfc3RyJ10gPSBm");
    sb.append("dW5jdGlvbih4KSB7IHJldHVybiB4ICE9ICIiOyB9OwogIHRyYW5zZm9ybXNbJ2pzb25pZnknXSA9IGZ1");
    sb.append("bmN0aW9uKHgpIHsgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHgpOyB9OwogIHRyYW5zZm9ybXNbJ3RpbWVf");
    sb.append("bm93J10gPSBmdW5jdGlvbih4KSB7IHJldHVybiBEYXRlLm5vdygpICsgIiI7IH07CiAgdHJhbnNmb3Jt");
    sb.append("c1snc2l6ZV9ieXRlcyddID0gZnVuY3Rpb24oeHJhdykgewogICAgdmFyIHggPSAwLjA7CiAgICBpZiAo");
    sb.append("dHlwZW9mKHhyYXcpID09ICdudW1iZXInKSB7CiAgICAgIHggPSB4cmF3OwogICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgdHJ5IHsKICAgICAgICB4ID0gcGFyc2VGbG9hdCh4cmF3KTsKICAgICAgfSBjYXRjaCAoZXgpIHsK");
    sb.append("CiAgICAgIH0KICAgIH0KICAgIHZhciBpdmFsID0gTWF0aC5mbG9vcih4KTsKICAgIGlmIChpdmFsIDwg");
    sb.append("MTAyNCkgewogICAgICByZXR1cm4gaXZhbCArICIgQiI7CiAgICB9CiAgICBpdmFsIC89IDEwMjQ7CiAg");
    sb.append("ICBpZiAoaXZhbCA8IDEwMjQpIHsKICAgICAgcmV0dXJuIE1hdGgucm91bmQoaXZhbCAqIDEwKSAvIDEw");
    sb.append("LjAgKyAiIEtCIjsKICAgIH0KICAgIGl2YWwgLz0gMTAyNDsKICAgIGlmIChpdmFsIDwgMTAyNCkgewog");
    sb.append("ICAgICByZXR1cm4gTWF0aC5yb3VuZChpdmFsICogMTApIC8gMTAuMCArICIgTUIiOwogICAgfQogICAg");
    sb.append("aXZhbCAvPSAxMDI0OwogICAgaWYgKGl2YWwgPCAxMDI0KSB7CiAgICAgIHJldHVybiBNYXRoLnJvdW5k");
    sb.append("KGl2YWwgKiAxMCkgLyAxMC4wICsgIiBHQiI7CiAgICB9CiAgfQogIHRyYW5zZm9ybXNbJ29yZGluYWxp");
    sb.append("emUnXSA9IGZ1bmN0aW9uKG4pIHsKICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KG4pOwogICAgaWYgKCFp");
    sb.append("c05hTihudW0pKSB7CiAgICAgIGxldCBvcmQgPSAndGgnOwogICAgICBpZiAobiAlIDEwID09IDEgJiYg");
    sb.append("biAlIDEwMCAhPSAxMSkgewogICAgICAgIG9yZCA9ICdzdCc7CiAgICAgIH0KICAgICAgZWxzZSBpZiAo");
    sb.append("biAlIDEwID09IDIgJiYgbiAlIDEwMCAhPSAxMikgewogICAgICAgIG9yZCA9ICduZCc7CiAgICAgIH0K");
    sb.append("ICAgICAgZWxzZSBpZiAobiAlIDEwID09IDMgJiYgbiAlIDEwMCAhPSAxMykgewogICAgICAgIG9yZCA9");
    sb.append("ICdyZCc7CiAgICAgIH0KICAgICAgcmV0dXJuIG4gKyBvcmQ7CiAgICB9IGVsc2UgewogICAgICByZXR1");
    sb.append("cm4gbjsKICAgIH0KICB9CiAgdHJhbnNmb3Jtc1sndnVsZ2FyX2ZyYWN0aW9uJ10gPSBmdW5jdGlvbih4");
    sb.append("cmF3KSB7CiAgICB2YXIgeCA9IDAuMDsKICAgIGlmICh0eXBlb2YoeHJhdykgPT0gJ251bWJlcicpIHsK");
    sb.append("ICAgICAgeCA9IHhyYXc7CiAgICB9IGVsc2UgewogICAgICB0cnkgewogICAgICAgIHggPSBwYXJzZUZs");
    sb.append("b2F0KHhyYXcpOwogICAgICB9IGNhdGNoIChleCkgewoKICAgICAgfQogICAgfQogICAgdmFyIGl2YWwg");
    sb.append("PSBNYXRoLmZsb29yKHgpOwogICAgdmFyIGNoYW5nZSA9IHggLSBpdmFsOwogICAgdmFyIHN1ZmZpeCA9");
    sb.append("ICIiOwogICAgaWYgKGNoYW5nZSA8PSAwLjA2MjUpIHsKICAgICAgLy8gMAogICAgfSBlbHNlIGlmIChj");
    sb.append("aGFuZ2UgPD0gMC4xODc1KSB7CiAgICAgIHN1ZmZpeCA9ICLihZsiOwogICAgfSBlbHNlIGlmIChjaGFu");
    sb.append("Z2UgPD0gMC4zMTI1KSB7CiAgICAgIHN1ZmZpeCA9ICLCvCI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8");
    sb.append("PSAwLjQzNzUpIHsKICAgICAgc3VmZml4ID0gIuKFnCI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAw");
    sb.append("LjU2MjUpIHsKICAgICAgc3VmZml4ID0gIsK9IjsKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9IDAuNjg3");
    sb.append("NSkgewogICAgICBzdWZmaXggPSAi4oWdIjsKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9IDAuODEyNSkg");
    sb.append("ewogICAgICBzdWZmaXggPSAiwr4iOyAvLyAzLzQKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9IDAuOTM3");
    sb.append("NSkgewogICAgICBzdWZmaXggPSAi4oWeIjsKICAgIH0gLy8gZWxzZSAxCiAgICByZXR1cm4gaXZhbCAr");
    sb.append("IHN1ZmZpeDsKICB9CiAgdHJhbnNmb3Jtc1sndGltZV9hZ28nXSA9IGZ1bmN0aW9uKGR0LCBmb3JtYXQp");
    sb.append("IHsKICAgIC8vIG9ubHkgdHJhbnNmb3JtIHN0cmluZ3MKICAgIGlmICh0eXBlb2YgKGR0KSA9PSAic3Ry");
    sb.append("aW5nIikgewogICAgICAvLyBsZXQncyBzdHJpcCBvdXQgZXZlcnl0aGluZyBhZnRlciB0aGUgYnJhY2tl");
    sb.append("dHMKICAgICAgdmFyIHMgPSBkdDsKICAgICAgdmFyIGsgPSBzLmluZGV4T2YoJ1snKTsKICAgICAgaWYg");
    sb.append("KGsgPj0gMCkgewogICAgICAgIHMgPSBzLnN1YnN0cmluZygwLCBrKTsKICAgICAgfQogICAgICB2YXIg");
    sb.append("ZCA9IERhdGUucGFyc2Uocyk7CiAgICAgIGlmIChOdW1iZXIuaXNOYU4oZCkpIHsKICAgICAgICAvLyBp");
    sb.append("dCBpc24ndCBhIG51bWJlciwgc28gd2UgZGlkbid0IGdldCBhIGRhdGUgc3RhbXA7IGRlZmF1bHQgdG8g");
    sb.append("dGhlIGlucHV0CiAgICAgICAgcmV0dXJuIGR0OwogICAgICB9CiAgICAgIC8vIHdlIGFyZSBpbnRlcmVz");
    sb.append("dGVkIGluIHByb2R1Y2luZyBhIHN0cmluZyBsaWtlICJYIG1pbnV0ZXMgYWdvIiwgc28gc3RhcnQgd2l0");
    sb.append("aCBzZWNvbmRzCiAgICAgIHZhciBkZWx0YSA9IChEYXRlLm5vdygpIC0gZCkvMTAwMDsgLy8gc2Vjb25k");
    sb.append("czsKICAgICAgaWYgKGRlbHRhIDwgNjApIHsKICAgICAgICByZXR1cm4gIkxlc3MgdGhhbiBhIG1pbnV0");
    sb.append("ZSBhZ28iOwogICAgICB9CiAgICAgIC8vIGl0IHdhc24ndCA5MCBzZWNvbmRzIGFnbyBvciBsZXNzLCBz");
    sb.append("byBsZXQncyByZWZpbmUgdG93YXJkcyBtaW51dGVzCiAgICAgIGRlbHRhIC89IDYwOyAvLyBub3cgaXQg");
    sb.append("aXMgbWludXRlcwogICAgICBpZiAoZGVsdGEgPCA2MCkgewogICAgICAgIGNvbnN0IGRlbHRhSW50ID0g");
    sb.append("TWF0aC5mbG9vcihkZWx0YSk7CiAgICAgICAgcmV0dXJuIGAke2RlbHRhSW50fSBtaW51dGUke2RlbHRh");
    sb.append("SW50ID4gMSA/ICdzJzogJyd9IGFnb2A7CiAgICAgIH0KICAgICAgaWYgKGRlbHRhID4gMi42MjhlKzcp");
    sb.append("IHsKICAgICAgICByZXR1cm4gIk5ldmVyIjsKICAgICAgfQogICAgICAvLyBpdCB3YXNuJ3QgOTAgbWlu");
    sb.append("dXRlcyBhZ28sIHNvIGxldCdzIGp1c3QgcHV0IHRoZSB0aW1lIHN0YW1wIHVwCiAgICAgIHZhciBkdGhl");
    sb.append("biA9IG5ldyBEYXRlKGQpOwogICAgICB2YXIgZG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBvcHRz");
    sb.append("ID0ge307CiAgICAgIGlmIChmb3JtYXQpewogICAgICAgIGZvcm1hdC50cmltKCkuc3BsaXQoIiIpLmZv");
    sb.append("ckVhY2goY2hhciA9PiB7CiAgICAgICAgICBjb25zdCBrZXlzID0geyJoIjogImhvdXIiLCAibSI6ICJt");
    sb.append("aW51dGUiLCAicyI6ICJzZWNvbmQifQogICAgICAgICAgaWYgKGNoYXIgaW4ga2V5cyl7CiAgICAgICAg");
    sb.append("ICAgIG9wdHNba2V5c1tjaGFyXV0gPSAibnVtZXJpYyI7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAg");
    sb.append("ICAgfQogICAgICBpZiAoZHRoZW4udG9Mb2NhbGVEYXRlU3RyaW5nKCkgIT0gZG5vdy50b0xvY2FsZURh");
    sb.append("dGVTdHJpbmcoKSkgewogICAgICAgIHJldHVybiBkdGhlbi50b0xvY2FsZURhdGVTdHJpbmcoKSArICIg");
    sb.append("IiArIGR0aGVuLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgb3B0cyk7CiAgICAgIH0KICAgICAgcmV0dXJu");
    sb.append("IGR0aGVuLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgb3B0cyk7CiAgICB9IGVsc2UgewogICAgICAvLyBk");
    sb.append("byBub3RoaW5nCiAgICAgIHJldHVybiBkdDsKICAgIH0KICB9OwoKICB0cmFuc2Zvcm1zWyd0aW1lJ10g");
    sb.append("PSBmdW5jdGlvbihkdCkgewogICAgICAgIC8vIG9ubHkgdHJhbnNmb3JtIHN0cmluZ3MKICAgIGlmICh0");
    sb.append("eXBlb2YgKGR0KSA9PSAic3RyaW5nIikgewogICAgICAvLyBsZXQncyBzdHJpcCBvdXQgZXZlcnl0aGlu");
    sb.append("ZyBhZnRlciB0aGUgYnJhY2tldHMKICAgICAgdmFyIHMgPSBkdDsKICAgICAgdmFyIGsgPSBzLmluZGV4");
    sb.append("T2YoJ1snKTsKICAgICAgaWYgKGsgPj0gMCkgewogICAgICAgIHMgPSBzLnN1YnN0cmluZygwLCBrKTsK");
    sb.append("ICAgICAgfQoKICAgICAgLy8gQ29udmVydCBzdHJpbmcgdG8gdGltZSBmb3JtYXQKICAgICAgdmFyIHQg");
    sb.append("PSBkdC5pbmRleE9mKCI6Iik7CiAgICAgIGlmICh0IDwgMCkgewogICAgICAgIHJldHVybiBkdDsKICAg");
    sb.append("ICAgfQogICAgICB2YXIgaCA9IGR0LnNwbGl0KCI6IilbMF07CiAgICAgIHZhciBob3VycyA9IGg7CiAg");
    sb.append("ICAgIGlmIChoLmxlbmd0aCA+IDIpIHsKICAgICAgICBob3VycyA9IGguc3Vic3RyaW5nKGgubGVuZ3Ro");
    sb.append("IC0gMiwgaC5sZW5ndGgpOyAvLyB0cmltIGxlZnQgaW4gY2FzZSBvZiBkYXRldGltZQogICAgICB9CiAg");
    sb.append("ICAgIHZhciBBbU9yUG0gPSBob3VycyA+PSAxMiA/ICdwbScgOiAnYW0nOwogICAgICBob3VycyA9ICho");
    sb.append("b3VycyAlIDEyKSB8fCAxMjsKICAgICAgdmFyIG0gPSBkdC5zcGxpdCgiOiIpWzFdCiAgICAgIHZhciBt");
    sb.append("aW51dGVzID0gbTsKICAgICAgaWYgKG0ubGVuZ3RoID4gMikgewogICAgICAgIG1pbnV0ZXMgPSBtLnN1");
    sb.append("YnN0cmluZygwLDIpOyAvLyB0cmltIHJpZ2h0IGluIGNhc2Ugb2YgZGF0ZXRpbWUKICAgICAgfQoKICAg");
    sb.append("ICAgcmV0dXJuIGhvdXJzICsgIjoiICsgbWludXRlcyArICIgIiArIEFtT3JQbTsgCiAgICB9IGVsc2Ug");
    sb.append("ewogICAgICAvLyBkbyBub3RoaW5nCiAgICAgIHJldHVybiBkdDsKICAgIH0KICB9OwoKICB0cmFuc2Zv");
    sb.append("cm1zWydkYXRlLWZvcm1hdCddID0gZnVuY3Rpb24oZHQsIGZvcm1hdCkgewogICAgaWYgKHR5cGVvZiAo");
    sb.append("ZHQpID09ICJzdHJpbmciKSB7CiAgICAgIC8vIGlmIGRhdGUgaXMgbm90IHNldCwgcmV0dXJuIGVtcHR5");
    sb.append("IHN0cmluZwogICAgICBpZiAoZHQgPT0gIjEtMDEtMDEiKSByZXR1cm4gIiI7CgogICAgICAvLyBsZXQn");
    sb.append("cyBzdHJpcCBvdXQgZXZlcnl0aGluZyBhZnRlciB0aGUgYnJhY2tldHMKICAgICAgdmFyIHMgPSBkdDsK");
    sb.append("ICAgICAgdmFyIGsgPSBzLmluZGV4T2YoJ1snKTsKICAgICAgaWYgKGsgPj0gMCkgewogICAgICAgIHMg");
    sb.append("PSBzLnN1YnN0cmluZygwLCBrKTsKICAgICAgfQogICAgICBjb25zdCBwID0gZm9ybWF0LnRvTG93ZXJD");
    sb.append("YXNlKCkuc3BsaXQoIi8iKTsKICAgICAgY29uc3Qgb3B0cyA9IHt9OwogICAgICBwLmZvckVhY2goZiA9");
    sb.append("PiB7CiAgICAgICAgY29uc3QgdmFsID0gZi5sZW5ndGggPiAyID8gIm51bWVyaWMiIDogIjItZGlnaXQi");
    sb.append("OwogICAgICAgIGNvbnN0IGtleXMgPSB7InkiOiAieWVhciIsICJtIjogIm1vbnRoIiwgImQiOiAiZGF5");
    sb.append("In0KICAgICAgICBvcHRzW2tleXNbZi5jaGFyQXQoMCldXSA9IHZhbDsKICAgICAgfSkKCiAgICAgIC8v");
    sb.append("IGlmIG5vdCBkYXRldGltZSwgY29udmVydGluZyB0byBvbmUgaGVyZSB0byBwcmV2ZW50IHRpbWV6b25l");
    sb.append("IGlzc3VlcwogICAgICBjb25zdCBkYXRldGltZSA9IHMuaW5jbHVkZXMoIlQiKSA/IHMgOiBzICsgIlQw");
    sb.append("MDowMDowMCI7CiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRldGltZSkudG9Mb2NhbGVEYXRlU3RyaW5n");
    sb.append("KCdlbi1VUycsIG9wdHMpOwogICAgfSBlbHNlIHsKICAgICAgLy8gZG8gbm90aGluZwogICAgICByZXR1");
    sb.append("cm4gZHQ7CiAgICB9CiAgfQoKICB0cmFuc2Zvcm1zWydjdXJyZW5jeSddID0gZnVuY3Rpb24oeCwgZm10");
    sb.append("KSB7CiAgICBjb25zdCBudW0gPSBwYXJzZUZsb2F0KHgpOwogICAgaWYgKGlzTmFOKG51bSkpIHJldHVy");
    sb.append("biB4OwogICAgdHJ5IHsKICAgICAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdChbXSwgewogICAg");
    sb.append("ICAgIHN0eWxlOiAnY3VycmVuY3knLAogICAgICAgIGN1cnJlbmN5OiBmbXQsCiAgICAgICAgdXNlR3Jv");
    sb.append("dXBpbmc6IHRydWUsCiAgICAgIH0pLmZvcm1hdChudW0pCiAgICB9IGNhdGNoIChlcnJvcikgewogICAg");
    sb.append("ICBjb25zb2xlLmVycm9yKCInY3VycmVuY3knIHRyYW5zZm9ybSBlcnJvcjogIiwgZXJyb3IpOwogICAg");
    sb.append("ICByZXR1cm4geDsKICAgIH0KICAgIAogIH0KICAKCiAgc2VsZi5SVFIgPSBmdW5jdGlvbihuYW1lLCB0");
    sb.append("cmFuc2Zvcm0pIHsKICAgIHRyYW5zZm9ybXNbbmFtZV0gPSB0cmFuc2Zvcm07CiAgfTsKICBzZWxmLnJl");
    sb.append("Z2lzdGVyVHJhbnNmb3JtID0gc2VsZi5SVFI7CgogIC8vIHtibGFofG5hbWV9CiAgc2VsZi5UUiA9IGZ1");
    sb.append("bmN0aW9uKG5hbWUpIHsKICAgIGlmIChuYW1lIGluIHRyYW5zZm9ybXMpIHsKICAgICAgcmV0dXJuIHRy");
    sb.append("YW5zZm9ybXNbbmFtZV07CiAgICB9IAogICAgLy8gZXg6IGRhdGUtZm9ybWF0Om1tL2RkL3l5CiAgICBp");
    sb.append("ZiAobmFtZS5pbmNsdWRlcygiOiIpKXsKICAgICAgY29uc3QgW2tleSwgZm9ybWF0XSAgPSBuYW1lLnNw");
    sb.append("bGl0KCI6Iik7CiAgICAgIGlmIChrZXkgaW4gdHJhbnNmb3JtcykgewogICAgICAgIHJldHVybiB4ID0+");
    sb.append("IHRyYW5zZm9ybXNba2V5XSh4LCBmb3JtYXQpOwogICAgICB9CiAgICB9CiAgICAKICAgIHJldHVybiBm");
    sb.append("dW5jdGlvbih4KSB7IHJldHVybiB4OyB9OwogIH07CgogIC8vIFRPRE8KICB2YXIgdmFsaWRhdG9ycyA9");
    sb.append("IHt9OwogIHNlbGYuUlYgPSBmdW5jdGlvbihuYW1lLCB2YWxpZGF0b3IpIHsKICAgIHZhbGlkYXRvcnNb");
    sb.append("bmFtZV0gPSB2YWxpZGF0b3I7CiAgfTsKICBzZWxmLnJlZ2lzdGVyVmFsaWRhdG9yID0gc2VsZi5SVjsK");
    sb.append("CiAgdmFyIGNvbW1vblB1dCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9i");
    sb.append("aiwgdXJsZmFjdG9yeSkgewogICAgLy8gV0lQCiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsK");
    sb.append("ICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBl");
    sb.append("dnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHBhc3N3b3JkcyA9IHt9OwogICAgICB2YXIgcmVx");
    sb.append("ID0gZ2V0X2Zvcm0oZm9ybSwgcGFzc3dvcmRzKTsKCiAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICAgIHZhciB1cmwgPSB1cmxmYWN0b3J5KHJ4b2JqKTsKICAgICAgICB2YXIgeGh0dHAgPSBu");
    sb.append("ZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09IDQpIHsKICAgICAgICAgICAg");
    sb.append("aWYgKHRoaXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgIHZhciB0eXBlID0gdGhpcy5nZXRS");
    sb.append("ZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIik7CiAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gInRl");
    sb.append("eHQvZXJyb3IiKSB7CiAgICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgdGhpcy5yZXNwb25z");
    sb.append("ZVRleHQpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlw");
    sb.append("ZSA9PSAiYXBwbGljYXRpb24vanNvbiIpIHsKICAgICAgICAgICAgICAgIHZhciBwYXlsb2FkID0gSlNP");
    sb.append("Ti5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICBpZiAoJ2lkZW50aXR5JyBp");
    sb.append("biBwYXlsb2FkKSB7CiAgICAgICAgICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwg");
    sb.append("cGF5bG9hZC5pZGVudGl0eSwgbnVsbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICAg");
    sb.append("ICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgICAgICAgIGZvcm0uZGlzcGF0Y2hFdmVudChuZXcg");
    sb.append("RXZlbnQoInN1Ym1pdHRlZCIpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmaXJl");
    sb.append("X2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0byBjb21tdW5pY2F0ZSB0byBzZXJ2ZXIiKTsKICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgeGh0dHAub3BlbigiUFVUIiwgdXJsLCB0");
    sb.append("cnVlKTsKICAgICAgICB4aHR0cC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogICAgICAgIHhodHRwLnNl");
    sb.append("bmQoSlNPTi5zdHJpbmdpZnkocmVxKSk7CiAgICAgIH07CgogICAgICBpZiAoJ3Bhc3N3b3JkJyBpbiBw");
    sb.append("YXNzd29yZHMpIHsKICAgICAgICBpZiAoISgnY29uZmlybS1wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB8");
    sb.append("fCBwYXNzd29yZHNbJ3Bhc3N3b3JkJ10gPT0gcGFzc3dvcmRzWydjb25maXJtLXBhc3N3b3JkJ10pIHsK");
    sb.append("ICAgICAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3b3Jkc1sncGFzc3dv");
    sb.append("cmQnXSwgewogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaGFzaGVkX3B3KSB7CiAgICAgICAg");
    sb.append("ICAgICAgcmVxWydwYXNzd29yZCddID0gaGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsKICAgICAgICAgICAg");
    sb.append("ICBuZXh0KCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWxlZDogZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHRvIGhhc2ggcGFzc3dvcmQiKTsK");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZpcmVf");
    sb.append("ZmFpbHVyZShmb3JtLCAiUGFzc3dvcmRzIGRvbid0IG1hdGNoIik7CiAgICAgICAgfQogICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgIG5leHQoKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfQoKICAvLyBSVU5USU1F");
    sb.append("IHwgcng6YWN0aW9uPWRvbWFpbjpwdXQKICBzZWxmLmFkRFBVVCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0");
    sb.append("ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgY29tbW9uUHV0KGZvcm0sIHN0YXRlLCBpZGVudGl0");
    sb.append("eU5hbWUsIHJ4b2JqLCBmdW5jdGlvbiAocnhvYmopIHsgcmV0dXJuIHNlbGYucHJvdG9jb2wgKyAiLy8i");
    sb.append("ICsgc2VsZi5ob3N0ICsgIi8iICsgcnhvYmoucGF0aDsgfSkKICB9OwoKICAvLyBSVU5USU1FIHwgcng6");
    sb.append("YWN0aW9uPWRvY3VtZW50OnB1dAogIHNlbGYuYURQVVQgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlk");
    sb.append("ZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIGNvbW1vblB1dChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1l");
    sb.append("LCByeG9iaiwgZnVuY3Rpb24gKHJ4b2JqKSB7IHJldHVybiBzZWxmLnByb3RvY29sICsgIi8vIiArIGNv");
    sb.append("bm5lY3Rpb24uaG9zdCArICIvIiArIHJ4b2JqLnNwYWNlICsgIi8iICsgcnhvYmoua2V5ICsgIi8iICsg");
    sb.append("cnhvYmoucGF0aDsgfSkKICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWFkYW1hOnNpZ24taW4K");
    sb.append("ICBzZWxmLmFTTyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewog");
    sb.append("ICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgIHJlY2FsbF9lbWFpbChmb3JtKTsKICAgIH0sIDEpOwogICAgLy8gVE9ETzogcHVs");
    sb.append("bCBlbWFpbCBvdXQgb2YgdGhpbiBhaXIKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywg");
    sb.append("ZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9");
    sb.append("IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgaWYgKHJlcS5yZW1lbWJlcikgewogICAgICAgIGxv");
    sb.append("Y2FsU3RvcmFnZS5zZXRJdGVtKCJlbWFpbF9yZW1lbWJlciIsIHJlcS5lbWFpbCk7CiAgICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImVtYWlsX3JlbWVtYmVyIiwgIiIpOwogICAg");
    sb.append("ICB9CiAgICAgIGNvbm5lY3Rpb24uQWNjb3VudExvZ2luKHJlcS5lbWFpbCwgcmVxLnBhc3N3b3JkLCB7");
    sb.append("CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIHN0YXNoX2lkZW50");
    sb.append("aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICBz");
    sb.append("ZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZv");
    sb.append("cm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAg");
    sb.append("ICAgZmlyZV9mYWlsdXJlKGZvcm0sICJBY2NvdW50TG9naW4gRmFpbGVkOiIgKyByZWFzb24pOwogICAg");
    sb.append("ICAgIH0KICAgICAgfSk7CiAgICB9LCB0cnVlKTsKICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9u");
    sb.append("PWFkYW1hOnNpZ24tdXAKICBzZWxmLmFTVSA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgZm9yd2FyZFRv");
    sb.append("KSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAg");
    sb.append("ICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybShmb3JtLCB7fSk7");
    sb.append("CiAgICAgIGNvbm5lY3Rpb24uSW5pdFNldHVwQWNjb3VudChyZXEuZW1haWwsIHsKICAgICAgICBzdWNj");
    sb.append("ZXNzOiBmdW5jdGlvbiAoLyogcGF5bG9hZCAqLykgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0");
    sb.append("ZW0oImVtYWlsIiwgcmVxLmVtYWlsKTsKICAgICAgICAgIHNlbGYuZ290byhmb3J3YXJkVG8sIGZhbHNl");
    sb.append("KTsKICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6");
    sb.append("IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiSW5pdFNldHVw");
    sb.append("QWNjb3VudCBGYWlsZWQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIHRydWUp");
    sb.append("OwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249YWRhbWE6c2V0LXBhc3N3b3JkCiAgc2VsZi5h");
    sb.append("U1AgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGZvcndhcmRUbykgewogICAgZm9ybS5hZGRFdmVudExp");
    sb.append("c3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgp");
    sb.append("OwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm1fYW5kX3B3KGZvcm0pOwogICAgICBpZiAoISgiZW1haWwi");
    sb.append("IGluIHJlcSkpIHsKICAgICAgICByZXEuZW1haWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiZW1haWwi");
    sb.append("KTsKICAgICAgfQogICAgICBjb25uZWN0aW9uLkluaXRDb21wbGV0ZUFjY291bnQocmVxLmVtYWlsLCBm");
    sb.append("YWxzZSwgcmVxLmNvZGUsIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaW5pdCkgewogICAgICAg");
    sb.append("ICAgdmFyIGlkZW50aXR5ID0gaW5pdC5pZGVudGl0eTsKICAgICAgICAgIGNvbm5lY3Rpb24uQWNjb3Vu");
    sb.append("dFNldFBhc3N3b3JkKGluaXQuaWRlbnRpdHksIHJlcS5wYXNzd29yZCwgewogICAgICAgICAgICBzdWNj");
    sb.append("ZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgc3Rhc2hfaWRlbnRpdHkoImRlZmF1bHQiLCBp");
    sb.append("ZGVudGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICAgICAgc2VsZi5nb3RvKGZvcndhcmRUbywgZmFs");
    sb.append("c2UpOwogICAgICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICAgICAgfSwKICAgICAg");
    sb.append("ICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAgIGZpcmVfZmFpbHVy");
    sb.append("ZShmb3JtLCAiRmFpbGVkIEFjY291bnRTZXRQYXNzd29yZDoiICsgcmVhc29uKTsKICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29u");
    sb.append("KSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBJbml0Q29tcGxldGVBY2NvdW50");
    sb.append("OiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0cnVlKTsKICB9OwoKCiAgdmFy");
    sb.append("IGh5ZHJhdGVfZm9ybSA9IGZ1bmN0aW9uKGVsLCBpbnB1dCkgewogICAgdmFyIHRhZyA9IGVsLnRhZ05h");
    sb.append("bWUudG9VcHBlckNhc2UoKTsKICAgIHZhciBpc1NldHRhYmxlID0gdGFnID09ICJTRUxFQ1QiIHx8IHRh");
    sb.append("ZyA9PSAiSU5QVVQiIHx8IHRhZyA9PSAiSElEREVOIjsKICAgIGlmICgnbmFtZScgaW4gZWwgJiYgaXNT");
    sb.append("ZXR0YWJsZSkgewogICAgICB2YXIgbmFtZSA9IGVsLm5hbWU7CiAgICAgIHZhciBwYXlsb2FkID0gaW5w");
    sb.append("dXQ7CiAgICAgIHZhciBrRG90T3JTbGFzaCA9IGZpcnN0T2NjdXIobmFtZS5pbmRleE9mKCcuJyksIG5h");
    sb.append("bWUuaW5kZXhPZignLycpKTsKICAgICAgd2hpbGUgKGtEb3RPclNsYXNoID4gMCkgewogICAgICAgIHZh");
    sb.append("ciBpdGVtID0gbmFtZS5zdWJzdHJpbmcoMCwga0RvdE9yU2xhc2gpOwogICAgICAgIG5hbWUgPSBuYW1l");
    sb.append("LnN1YnN0cmluZyhrRG90T3JTbGFzaCArIDEpOwogICAgICAgIGlmIChpdGVtIGluIHBheWxvYWQpIHsK");
    sb.append("ICAgICAgICAgIHBheWxvYWQgPSBwYXlsb2FkW2l0ZW1dOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAg");
    sb.append("ICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGtEb3RPclNsYXNoID0gZmlyc3RPY2N1cihuYW1lLmlu");
    sb.append("ZGV4T2YoJy4nKSwgbmFtZS5pbmRleE9mKCcvJykpOwogICAgICB9CiAgICAgIGlmIChuYW1lIGluIHBh");
    sb.append("eWxvYWQpIHsKICAgICAgICB2YXIgdHlwZSA9IGVsLnR5cGUudG9VcHBlckNhc2UoKTsKICAgICAgICBp");
    sb.append("ZiAodHlwZSA9PSAiQ0hFQ0tCT1giKSB7CiAgICAgICAgICBlbC5jaGVja2VkID0gcGF5bG9hZFtuYW1l");
    sb.append("XSA9PSAidHJ1ZSIgfHwgcGF5bG9hZFtuYW1lXSA9PT0gdHJ1ZSA/IHRydWUgOiBmYWxzZTsKICAgICAg");
    sb.append("ICB9IGVsc2UgaWYgKHR5cGUgPT0gIlJBRElPIikgewogICAgICAgICAgaWYgKHBheWxvYWRbbmFtZV0g");
    sb.append("PT0gZWwudmFsdWUpIHsKICAgICAgICAgICAgZWwuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgfSBlbHNlIHsKICAgICAgICAgIGVsLnZhbHVlID0gcGF5bG9hZFtuYW1lXTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0KICAgIH0KICAgIGlmICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAgIHZhciBhcnIgPSBl");
    sb.append("bC5jaGlsZHJlbjsKICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IG47IGsrKykgewogICAgICAgIHZhciBjaCA9IGVsLmNoaWxkcmVuW2tdOwogICAgICAgIGh5ZHJh");
    sb.append("dGVfZm9ybShjaCwgaW5wdXQpOwogICAgICB9CiAgICB9CiAgfQoKCiAgLy8gUlVOVElNRSB8IHJ4OmFj");
    sb.append("dGlvbjpjb3B5LWZvcm06JHRhcmdldC1pZAogIHNlbGYuYUNGID0gZnVuY3Rpb24oZm9ybSwgdGFyZ2V0");
    sb.append("Rm9ybUlkKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2dCkg");
    sb.append("ewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIGlucHV0ID0gZ2V0X2Zvcm0oZm9y");
    sb.append("bSwge30pOwogICAgICB2YXIgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0Rm9y");
    sb.append("bUlkKTsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIGh5ZHJhdGVfZm9ybSh0YXJnZXQsIGlucHV0");
    sb.append("KTsKICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSkKICAgICAgfSBlbHNlIHsKICAgICAgICBmaXJlX2Zh");
    sb.append("aWx1cmUoZm9ybSwgImZhaWxlZCB0byBmaW5kIGZvcm0gYnkgaWQgJyIgKyB0YXJnZXRGb3JtSWQgKyAi");
    sb.append("JyIpOwogICAgICB9CiAgICB9LCB0cnVlKTsKICB9OwoKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1z");
    sb.append("ZW5kOiRjaGFubmVsCiAgc2VsZi5hU0QgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGNoYW5uZWwsIG1z");
    sb.append("VG9EZWJvdW5jZSkgewogICAgLy8gVE9ETzogZG8gZGVib3VuY2UgaWYgPiAwCiAgICBmb3JtLmFkZEV2");
    sb.append("ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZh");
    sb.append("dWx0KCk7CiAgICAgIHZhciBwYXNzd29yZHMgPSB7fTsKICAgICAgdmFyIG1zZyA9IGdldF9mb3JtKGZv");
    sb.append("cm0sIHBhc3N3b3Jkcyk7CgogICAgICBpZiAoZXZ0LnN1Ym1pdHRlcikgewogICAgICAgIHZhciBzID0g");
    sb.append("ZXZ0LnN1Ym1pdHRlcjsKICAgICAgICBpZiAocy5uYW1lICYmIHMudmFsdWUpIHsKICAgICAgICAgIGlm");
    sb.append("IChzLnZhbHVlID09ICJ0cnVlIikgeyBzLnZhbHVlID0gdHJ1ZTsgfQogICAgICAgICAgZWxzZSBpZiAo");
    sb.append("cy52YWx1ZSA9PSAiZmFsc2UiKSB7IHMudmFsdWUgPSBmYWxzZTsgfQogICAgICAgICAgbXNnW3MubmFt");
    sb.append("ZV0gPSBzLnZhbHVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGFmdGVyID0gZnVuY3Rpb24o");
    sb.append("KSB7CiAgICAgICAgdmFyIGNoYW5uZWxUb1VzZSA9IGNoYW5uZWw7CiAgICAgICAgaWYgKGNoYW5uZWwg");
    sb.append("PT0gIl9fZHMiKSB7CiAgICAgICAgICBjaGFubmVsVG9Vc2UgPSBtc2dbJ19fY2hhbm5lbCddOwogICAg");
    sb.append("ICAgICAgZGVsZXRlIG1zZ1snX19jaGFubmVsJ107CiAgICAgICAgfQogICAgICAgIGlmIChBZGFtYS5E");
    sb.append("ZWJ1Z2dlcikgewogICAgICAgICAgQWRhbWEuRGVidWdnZXIuc2VuZChzdGF0ZS5kYXRhLmNvbm5lY3Rp");
    sb.append("b24ubmFtZSwgY2hhbm5lbFRvVXNlLCBtc2cpOwogICAgICAgIH0KICAgICAgICBzdGF0ZS5kYXRhLmNv");
    sb.append("bm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbFRvVXNlLCBtc2csIHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1");
    sb.append("bmN0aW9uICgvKiBwYXlsb2FkICovKSB7CiAgICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAg");
    sb.append("ICAgICAgIH0sCiAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAg");
    sb.append("IGZpcmVfZmFpbHVyZShmb3JtLCAiU2VuZCBmYWlsZWQ6IiArIHJlYXNvbik7CiAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgfSk7CiAgICAgIH07CgogICAgICB2YXIgcG9zdFBhc3N3b3JkID0gZnVuY3Rpb24oKSB7CiAg");
    sb.append("ICAgICAgaWYgKCduZXdfcGFzc3dvcmQnIGluIHBhc3N3b3JkcykgewogICAgICAgICAgaWYgKCEoJ2Nv");
    sb.append("bmZpcm0tbmV3X3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHx8IHBhc3N3b3Jkc1snbmV3X3Bhc3N3b3Jk");
    sb.append("J10gPT0gcGFzc3dvcmRzWydjb25maXJtLW5ld19wYXNzd29yZCddKSB7CiAgICAgICAgICAgIGNvbm5l");
    sb.append("Y3Rpb24uRG9jdW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3b3Jkc1snbmV3X3Bhc3N3b3JkJ10sIHsKICAg");
    sb.append("ICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaGFzaGVkX3B3KSB7CiAgICAgICAgICAgICAgICBt");
    sb.append("c2dbJ25ld19wYXNzd29yZCddID0gaGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsKICAgICAgICAgICAgICAg");
    sb.append("IGFmdGVyKCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBmYWlsZWQ6IGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHRvIGhhc2ggcGFzc3dv");
    sb.append("cmQiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiUGFzc3dvcmRzIG1pc21hdGNoIGZvciBuZXcgcGFz");
    sb.append("c3dvcmQuIik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFmdGVyKCk7CiAg");
    sb.append("ICAgICAgfQogICAgICB9CgogICAgICBpZiAoJ3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAg");
    sb.append("ICBpZiAoISgnY29uZmlybS1wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB8fCBwYXNzd29yZHNbJ3Bhc3N3");
    sb.append("b3JkJ10gPT0gcGFzc3dvcmRzWydjb25maXJtLXBhc3N3b3JkJ10pIHsKICAgICAgICAgIGNvbm5lY3Rp");
    sb.append("b24uRG9jdW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3b3Jkc1sncGFzc3dvcmQnXSwgewogICAgICAgICAg");
    sb.append("ICBzdWNjZXNzOiBmdW5jdGlvbiAoaGFzaGVkX3B3KSB7CiAgICAgICAgICAgICAgbXNnWydwYXNzd29y");
    sb.append("ZCddID0gaGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsKICAgICAgICAgICAgICBwb3N0UGFzc3dvcmQoKTsK");
    sb.append("ICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmFpbGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAg");
    sb.append("ICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgdG8gaGFzaCBwYXNzd29yZCIpOwogICAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZv");
    sb.append("cm0sICJQYXNzd29yZHMgbWlzbWF0Y2giKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAg");
    sb.append("cG9zdFBhc3N3b3JkKCk7CiAgICAgIH0KICAgIH0sIHRydWUpOwogIH07CiAgLy8gPHRvZG90YXNrPmRl");
    sb.append("c2NyaXB0aW9uPC90b2RvdGFzaz4KICBzZWxmLlRBU0sgPSBmdW5jdGlvbihwZG9tLCBpZCwgc2VjdGlv");
    sb.append("biwgZGVzY3JpcHRpb24pIHsKICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgi");
    sb.append("ZGl2Iik7CiAgICBlbGVtZW50LmlubmVySFRNTCA9ICImIzk3NDQ7ICIgKyBkZXNjcmlwdGlvbiArICIg");
    sb.append("KCAiICsgc2VjdGlvbiArICIpIDxiciAvPiI7CiAgICBwZG9tLmFwcGVuZENoaWxkKGVsZW1lbnQpOwog");
    sb.append("IH07CiAgLy8gUlVOVElNRTogcHJlLWNvbXByZXNzaW9uIGZvciBzZXR0aW5nIGFuIGF0dHJpYnV0ZQog");
    sb.append("IC8vICJkLnNldEF0dHJpYnV0ZShhLHYpOyIgLS0+CiAgLy8gJC5TQShkLGEsdik7IgogIHNlbGYuU0Eg");
    sb.append("PSBmdW5jdGlvbihkb20sIGF0dHIsIHZhbHVlKSB7CiAgICBkb20uc2V0QXR0cmlidXRlKGF0dHIsIHZh");
    sb.append("bHVlKTsKICB9OwogIHNlbGYuU0lIID0gZnVuY3Rpb24oZG9tLCBodG1sKSB7CiAgICBkb20uaW5uZXJI");
    sb.append("VE1MID0gaHRtbDsKICB9OwogIC8vIFJVTlRJTUU6IHNldCB0aGUgbGFiZWwgb2YgYW4gb3B0aW9uCiAg");
    sb.append("c2VsZi5TTCA9IGZ1bmN0aW9uKGRvbSwgdmFsdWUpIHsKICAgIGRvbS5sYWJlbCA9IHZhbHVlOwogICAg");
    sb.append("ZG9tLmlubmVyVGV4dCA9IHZhbHVlOwogIH07CgogIC8vIGZvciBzZWxlY3RzCiAgLy8gZC52YWx1ZT0k");
    sb.append("dmFsdWU7CiAgLy8gJC5TVihkLCR2YWx1ZSk7CiAgc2VsZi5TViA9IGZ1bmN0aW9uKGRvbSwgdmFsdWUp");
    sb.append("IHsKICAgIHZhciBwcmlvciA9IGRvbS52YWx1ZTsKICAgIGRvbS52YWx1ZSA9IHZhbHVlOwogICAgZG9t");
    sb.append("LnJ4dmFsdWUgPSB2YWx1ZTsKICAgIGlmIChwcmlvciAhPSB2YWx1ZSkgewogICAgICBkb20uZGlzcGF0");
    sb.append("Y2hFdmVudChuZXcgRXZlbnQoImZvcmNlZCIpKTsKICAgIH0KICB9OwogIHNlbGYuRlYgPSBmdW5jdGlv");
    sb.append("bihkb20sIGZpZWxkLCB2YWx1ZSkgewogICAgdmFyIHByaW9yID0gZG9tW2ZpZWxkXTsKICAgIGRvbVtm");
    sb.append("aWVsZF0gPSB2YWx1ZTsKICAgIGlmIChwcmlvciAhPSB2YWx1ZSkgewogICAgICBkb20uZGlzcGF0Y2hF");
    sb.append("dmVudChuZXcgRXZlbnQoImZvcmNlZCIpKTsKICAgIH0KICB9OwogIHNlbGYubWVyZ2VHb3RvID0gZnVu");
    sb.append("Y3Rpb24oaHJlZiwgc3RhdGUpIHsKICAgIHZhciBwYXJ0cyA9IChocmVmLnN0YXJ0c1dpdGgoIi8iKSA/");
    sb.append("IGhyZWYuc3Vic3RyaW5nKDEpIDogaHJlZikuc3BsaXQoIi8iKTsKICAgIHZhciBtZXJnZUluaXQgPSB7");
    sb.append("fTsKICAgIGlmIChyb3V0ZShwYXJ0cywgMCwgcm91dGVyLCBtZXJnZUluaXQpKSB7CiAgICAgIHN0YXRl");
    sb.append("LnZpZXcudHJlZS51cGRhdGUobWVyZ2VJbml0KTsKICAgIH0KICB9OwogIC8vIFJVTlRJTUUgfCA8Li4u");
    sb.append("IGhyZWY9IiIgLi4uPgogIHNlbGYuSFJFRiA9IGZ1bmN0aW9uIChkb20sIHN0YXRlLCBocmVmLCBtZXJn");
    sb.append("ZSkgewogICAgZG9tLnNldEF0dHJpYnV0ZSgiaHJlZiIsIGZpeEhyZWYoaHJlZikpOwogICAgZG9tLm9u");
    sb.append("Y2xpY2sgPSBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIHZhciB0cmltSHJlZiA9IGhyZWY7CiAgICAgIGlm");
    sb.append("ICh0cmltSHJlZi5zdGFydHNXaXRoKCIvIikpIHsKICAgICAgICB0cmltSHJlZiA9IHRyaW1IcmVmLnN1");
    sb.append("YnN0cmluZygxKTsKICAgICAgfQogICAgICB2YXIga1EgPSB0cmltSHJlZi5pbmRleE9mKCc/Jyk7CiAg");
    sb.append("ICAgIGlmIChrUSA+IDApIHsKICAgICAgICB0cmltSHJlZiA9IHRyaW1IcmVmLnN1YnN0cmluZygwLCBr");
    sb.append("USk7CiAgICAgIH0KICAgICAgdmFyIHBhcnRzID0gdHJpbUhyZWYuc3BsaXQoIi8iKTsKICAgICAgdmFy");
    sb.append("IG1lcmdlSW5pdCA9IHt9OwogICAgICBpZiAocm91dGUocGFydHMsIDAsIHJvdXRlciwgbWVyZ2VJbml0");
    sb.append("KSkgewogICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGlmIChtZXJnZSkgewogICAg");
    sb.append("ICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShtZXJnZUluaXQpOwogICAgICAgICAgd2luZG93Lmhp");
    sb.append("c3RvcnkucHVzaFN0YXRlKHttZXJnZTp0cnVlfSwgIiIsIGZpeEhyZWYoaHJlZikpOwogICAgICAgIH0g");
    sb.append("ZWxzZSB7CiAgICAgICAgICBzZWxmLmdvdG8oaHJlZiwgdHJ1ZSk7CiAgICAgICAgfQogICAgICAgIHJl");
    sb.append("dHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CiAgfTsKICAvLyBSVU5U");
    sb.append("SU1FIHwgPC4uLiBjbGFzcz0iIiAuLi4+CiAgc2VsZi5BQyA9IGZ1bmN0aW9uIChkb20sIHZhbHVlKSB7");
    sb.append("CiAgICBkb20uc2V0QXR0cmlidXRlKCJjbGFzcyIsIHZhbHVlKTsKICB9OwogIHNlbGYuQUNMQVNTID0g");
    sb.append("ZnVuY3Rpb24gKGRvbSwgdmFsdWUpIHsgLy8gdG8gZGVwcmVjYXRlIGluIHRoZSBmdXR1cmUKICAgIGRv");
    sb.append("bS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgdmFsdWUpOwogIH07CiAgLy8gUlVOVElNRSB8IDwuLi4gc3Jj");
    sb.append("PSIiIC4uLj4KICBzZWxmLkFTUkMgPSBmdW5jdGlvbiAoZG9tLCB2YWx1ZSkgewogICAgZG9tLnNldEF0");
    sb.append("dHJpYnV0ZSgic3JjIiwgdmFsdWUpOwogIH07CgogIHNlbGYuZmluZEVsZW1lbnRCeUlkSW5VbmJvdW5k");
    sb.append("RG9tID0gZnVuY3Rpb24oZG9tLCBpZCkgewogICAgdmFyIGZlYmlkID0gZnVuY3Rpb24gKGQsIGlkKSB7");
    sb.append("CiAgICAgIGlmICgnaWQnIGluIGQpIHsKICAgICAgICBpZiAoZC5pZCA9PSBpZCkgewogICAgICAgICAg");
    sb.append("cmV0dXJuIGQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICgnY2hpbGRyZW4nIGluIGQpIHsKICAg");
    sb.append("ICAgICB2YXIgYXJyID0gZC5jaGlsZHJlbjsKICAgICAgICB2YXIgbiA9IGFyci5sZW5ndGg7CiAgICAg");
    sb.append("ICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAgIHZhciByZXN1bHQgPSBmZWJp");
    sb.append("ZChhcnJba10sIGlkKTsKICAgICAgICAgIGlmIChyZXN1bHQgIT09IG51bGwpIHsKICAgICAgICAgICAg");
    sb.append("cmV0dXJuIHJlc3VsdDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51");
    sb.append("bGw7CiAgICB9OwogICAgcmV0dXJuIGZlYmlkKGRvbSwgaWQpOwogIH07CiAgc2VsZi5wb2xsRWxlbWVu");
    sb.append("dCA9IGZ1bmN0aW9uKGRvbSwgdGltZW91dCwgc3VjY2VzcywgZmFpbHVyZSkgewogICAgdmFyIGFkbSA9");
    sb.append("IGZ1bmN0aW9uIChkb20sIHJlbWFpbikgewogICAgICBpZiAocmVtYWluIDwgMCkgewogICAgICAgIGZh");
    sb.append("aWx1cmUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29u");
    sb.append("dGFpbnMoZG9tKSkgewogICAgICAgIHN1Y2Nlc3MoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5k");
    sb.append("b3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBhZG0oZG9tLCByZW1haW4gLSAyNSk7");
    sb.append("CiAgICAgICAgfSwgMjUpOwogICAgICB9CiAgICB9OwogICAgYWRtKGRvbSwgdGltZW91dCk7CiAgfTsK");
    sb.append("ICB2YXIgbGlic0xvYWRlZCA9IHt9OwogIHNlbGYubG9hZExpYnJhcnkgPSBmdW5jdGlvbihsaWIsIGNh");
    sb.append("bGxiYWNrKSB7CiAgICBpZiAobGliIGluIGxpYnNMb2FkZWQpIHsKICAgICAgY2FsbGJhY2sobGlic0xv");
    sb.append("YWRlZFtsaWJdKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgbGlic0xvYWRlZFtsaWJdID0gZmFsc2U7");
    sb.append("CiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICBzY3Jp");
    sb.append("cHQuc2V0QXR0cmlidXRlKCdzcmMnLGxpYik7CiAgICBzY3JpcHQub25sb2FkID0gZnVuY3Rpb24oKSB7");
    sb.append("CiAgICAgIGxpYnNMb2FkZWRbbGliXSA9IHRydWU7CiAgICAgIGNhbGxiYWNrKHRydWUpOwogICAgfTsK");
    sb.append("ICAgIHNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgIGNhbGxiYWNrKGZhbHNlKTsKICAg");
    sb.append("IH07CiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgfTsKICB3aW5kb3cucnho");
    sb.append("dG1sID0gc2VsZjsKICByZXR1cm4gc2VsZjsKfSkoKTsK");
    return sb.toString();
  }
  public static final String TESTER = new String(Base64.getDecoder().decode(make_tester()), StandardCharsets.UTF_8);
  private static String make_tester() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIF9fZ3JhcGggPSB7fTsNCnZhciBfX3RvZG8gPSBbXTsNCnZhciBfX3N0YXRlID0gew0KICBleGVj");
    sb.append("dXRlX2Zvcm06IGZhbHNlLA0KICBmb3JtX2V4ZWN1dGluZzogIiIsDQogIGlkZ2VuOiAwDQp9Ow0KDQpm");
    sb.append("dW5jdGlvbiBfX2NyZWF0ZShuYW1lKSB7DQogIHJldHVybiB7bmFtZTogbmFtZSwgdmlzaXRlZDogZmFs");
    sb.append("c2UsIHRlc3RzOiB7fSwgbmVlZF9zbmFwc2hvdDogdHJ1ZSwgc3ViX25hbWU6ICIifTsNCn0NCg0KZnVu");
    sb.append("Y3Rpb24gX19nZXRDdXJyZW50TG9jYXRpb25BbmRJbmRleCgpIHsNCiAgdmFyIGN1cnJlbnQgPSB3aW5k");
    sb.append("b3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoOw0KICBpZiAoIShjdXJy");
    sb.append("ZW50IGluIF9fZ3JhcGgpKSB7DQogICAgX19ncmFwaFtjdXJyZW50XSA9IF9fY3JlYXRlKGN1cnJlbnQp");
    sb.append("Ow0KICB9DQogIGlmICghX19ncmFwaFtjdXJyZW50XS52aXNpdGVkKSB7DQogICAgX19ncmFwaFtjdXJy");
    sb.append("ZW50XS52aXNpdGVkID0gdHJ1ZTsNCiAgfQ0KDQogIHZhciBsaW5rcyA9IGRvY3VtZW50LmdldEVsZW1l");
    sb.append("bnRzQnlUYWdOYW1lKCJhIik7DQogIGZvciAodmFyIGsgPSAwOyBrIDwgbGlua3MubGVuZ3RoOyBrKysp");
    sb.append("IHsNCiAgICBpZiAoImhyZWYiIGluIGxpbmtzW2tdKSB7DQogICAgICB2YXIgbmV4dCA9IGxpbmtzW2td");
    sb.append("LmhyZWY7DQogICAgICBpZiAoIShuZXh0IGluIF9fZ3JhcGgpKSB7DQogICAgICAgIF9fZ3JhcGhbbmV4");
    sb.append("dF0gPSBfX2NyZWF0ZShuZXh0KTsNCiAgICAgICAgX190b2RvLnB1c2gobmV4dCk7DQogICAgICB9DQog");
    sb.append("ICAgfQ0KICB9DQoNCiAgcmV0dXJuIF9fZ3JhcGhbY3VycmVudF07DQp9DQoNCmZ1bmN0aW9uIF9faW5k");
    sb.append("ZXhDdXJyZW50KGN1cnJlbnQpIHsNCiAgdmFyIGNyZWF0ZWQgPSBbXTsNCiAgLy8gVE9ETzogbG9vayBm");
    sb.append("b3IgYWxsIHRoZSBlbGVtZW50cyB3aXRoIHRlc3Q6JG5hbWU6c2V0PQ0KICB2YXIgaW5kZXggPSBmdW5j");
    sb.append("dGlvbiAoZG9tKSB7DQogICAgZm9yIChjb25zdCBhdHRyIG9mIGRvbS5hdHRyaWJ1dGVzKSB7DQogICAg");
    sb.append("ICBpZiAoYXR0ci5uYW1lLnN0YXJ0c1dpdGgoInRlc3Q6IikpIHsNCiAgICAgICAgdmFyIHRlc3ROYW1l");
    sb.append("QW5kQ29tbWFuZCA9IGF0dHIubmFtZS5zdWJzdHJpbmcoNSk7DQogICAgICAgIHZhciBrQ29sb24gPSB0");
    sb.append("ZXN0TmFtZUFuZENvbW1hbmQuaW5kZXhPZigiOiIpOw0KICAgICAgICBpZiAoa0NvbG9uID4gMCkgew0K");
    sb.append("ICAgICAgICAgIHZhciB0ZXN0bmFtZSA9IHRlc3ROYW1lQW5kQ29tbWFuZC5zdWJzdHJpbmcoMCwga0Nv");
    sb.append("bG9uKTsNCiAgICAgICAgICB2YXIgY29tbWFuZCA9IHRlc3ROYW1lQW5kQ29tbWFuZC5zdWJzdHJpbmco");
    sb.append("a0NvbG9uICsgMSk7DQogICAgICAgICAgdmFyIHRlc3Q7DQogICAgICAgICAgaWYgKCEodGVzdG5hbWUg");
    sb.append("aW4gY3VycmVudC50ZXN0cykpIHsNCiAgICAgICAgICAgIHRlc3QgPSB7bmFtZTogdGVzdG5hbWUsIHNl");
    sb.append("dHM6IHt9LCBjbGljazogbnVsbCwgcmVhZHk6IGZhbHNlLCByYW46IGZhbHNlfTsNCiAgICAgICAgICAg");
    sb.append("IGN1cnJlbnQudGVzdHNbdGVzdG5hbWVdID0gdGVzdDsNCiAgICAgICAgICAgIGNyZWF0ZWQucHVzaCh0");
    sb.append("ZXN0KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGVzdCA9IGN1cnJlbnQudGVzdHNb");
    sb.append("dGVzdG5hbWVdOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIXRlc3QucmVhZHkpIHsNCiAgICAg");
    sb.append("ICAgICAgIGlmIChjb21tYW5kID09ICJjbGljayIpIHsNCiAgICAgICAgICAgICAgdGVzdC5jbGljayA9");
    sb.append("IGRvbTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5zdGFydHNXaXRoKCJzZXQ6IikpIHsN");
    sb.append("CiAgICAgICAgICAgICAgdGVzdC5zZXRzW2NvbW1hbmQuc3Vic3RyaW5nKDQpXSA9IHtlbGVtZW50OiBk");
    sb.append("b20sIHZhbHVlOiBhdHRyLnZhbHVlfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAg");
    sb.append("IH0NCiAgICAgIH0NCiAgICB9DQogICAgaWYgKCJjaGlsZHJlbiIgaW4gZG9tKSB7DQogICAgICB2YXIg");
    sb.append("YXJyID0gZG9tLmNoaWxkcmVuOw0KICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOw0KICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBuOyBrKyspIHsNCiAgICAgICAgaW5kZXgoZG9tLmNoaWxkcmVuW2tdKTsNCiAg");
    sb.append("ICAgIH0NCiAgICB9DQogIH07DQogIGluZGV4KGRvY3VtZW50LmJvZHkpOw0KDQogIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgY3JlYXRlZC5sZW5ndGg7IGsrKykgew0KICAgIGNyZWF0ZWRba10ucmVhZHkgPSB0cnVl");
    sb.append("Ow0KICB9DQogIHJldHVybiBudWxsOw0KfQ0KDQpmdW5jdGlvbiBfX3N0YXJ0VGVzdEFnZW50KCkgew0K");
    sb.append("ICBjb25zb2xlLmxvZygiVGVzdCBBZ2VudCBTdGFydGluZyBVcCIpOw0KICByZXR1cm4gdHJ1ZTsNCn0N");
    sb.append("Cg0KZnVuY3Rpb24gX19wb2xsVGVzdEFnZW50KCkgew0KICB2YXIgJCA9IHdpbmRvdy5yeGh0bWw7DQog");
    sb.append("IGlmICgkLl9pbmZsaWdodCA9PSAwKSB7DQogICAgdmFyIGN1cnJlbnQgPSBfX2dldEN1cnJlbnRMb2Nh");
    sb.append("dGlvbkFuZEluZGV4KCk7DQoNCiAgICBpZiAoY3VycmVudC5uZWVkX3NuYXBzaG90KSB7DQogICAgICBj");
    sb.append("dXJyZW50Lm5lZWRfc25hcHNob3QgPSBmYWxzZTsNCiAgICAgIHJldHVybiAic25hcHNob3Q6IiArIGN1");
    sb.append("cnJlbnQubmFtZSArIGN1cnJlbnQuc3ViX25hbWU7DQogICAgfQ0KDQogICAgaWYgKF9fdG9kby5sZW5n");
    sb.append("dGggPiAwKSB7DQogICAgICB2YXIgdXJpID0gX190b2RvLnBvcCgpOw0KICAgICAgY29uc29sZS5sb2co");
    sb.append("ImdvaW5nIHRvOiIgKyB1cmkpOw0KICAgICAgJC5nb3RvKHVyaSk7DQogICAgICByZXR1cm4gIndhaXQ6");
    sb.append("MjUiOw0KICAgIH0NCg0KICAgIC8vIGluZGV4IHRoZSBjdXJyZW50DQogICAgX19pbmRleEN1cnJlbnQo");
    sb.append("Y3VycmVudCk7DQoNCiAgICBmb3IgKHZhciB0ZXN0bmFtZSBpbiBjdXJyZW50LnRlc3RzKSB7DQogICAg");
    sb.append("ICB2YXIgdGVzdCA9IGN1cnJlbnQudGVzdHNbdGVzdG5hbWVdOw0KICAgICAgaWYgKCF0ZXN0LnJhbikg");
    sb.append("ew0KICAgICAgICB0ZXN0LnJhbiA9IHRydWU7DQogICAgICAgIGlmICh0ZXN0LmNsaWNrKSB7DQogICAg");
    sb.append("ICAgICAgaWYgKCF0ZXN0LmNsaWNrLmlkKSB7DQogICAgICAgICAgICBfX3N0YXRlLmlkZ2VuKys7DQog");
    sb.append("ICAgICAgICAgICB0ZXN0LmNsaWNrLmlkID0gIl9fYXV0b19jbGlja19pZF8iICsgX19zdGF0ZS5pZGdl");
    sb.append("bjsNCiAgICAgICAgICB9DQogICAgICAgICAgY3VycmVudC5uZWVkX3NuYXBzaG90ID0gdHJ1ZTsNCiAg");
    sb.append("ICAgICAgICBjdXJyZW50LnN1Yl9uYW1lID0gIiMjIiArIHRlc3RuYW1lOw0KICAgICAgICAgIHJldHVy");
    sb.append("biAiY2xpY2s6IiArIHRlc3QuY2xpY2suaWQ7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAg");
    sb.append("cmV0dXJuICJkb25lIjsNCiAgfSBlbHNlIHsNCiAgICBjb25zb2xlLmxvZygiKGluc3RhYmxlKSIpOw0K");
    sb.append("ICB9DQogIHJldHVybiAid2FpdDo1MCI7DQp9");
    return sb.toString();
  }
  public static final String CONNECTION = new String(Base64.getDecoder().decode(make_connection()), StandardCharsets.UTF_8);
  private static String make_connection() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoKICogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG91dGxp");
    sb.append("bmVkIGluIHRoZQogKiBmaWxlICdMSUNFTlNFJyAoaXQncyBkdWFsIGxpY2Vuc2VkKSBsb2NhdGVkIGlu");
    sb.append("IHRoZSByb290IGRpcmVjdG9yeQogKiBuZWFyIHRoZSBSRUFETUUubWQgd2hpY2ggeW91IHNob3VsZCBh");
    sb.append("bHNvIHJlYWQuIEZvciBtb3JlIGluZm9ybWF0aW9uCiAqIGFib3V0IHRoZSBwcm9qZWN0IHdoaWNoIG93");
    sb.append("bnMgdGhpcyBmaWxlLCBzZWUgaHR0cHM6Ly93d3cuYWRhbWEtcGxhdGZvcm0uY29tLyAuCiAqCiAqIChj");
    sb.append("KSAyMDIxIC0gMjAyMyBieSBBZGFtYSBQbGF0Zm9ybSBJbml0aWF0aXZlLCBMTEMKICovCi8qKiBUaGUg");
    sb.append("V2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gQWRhbWEgKi8KY2xhc3MgV2ViU29ja2V0QWRhbWFDb25uZWN0");
    sb.append("aW9uIHsKICBjb25zdHJ1Y3Rvcihob3N0KSB7CiAgICAvLyBvbiBmYWlsdXJlLCB3ZSBiYWNrLW9mZiB3");
    sb.append("aXRoIHRoaXMgbWlsbGlzZWNvbmRzCiAgICB0aGlzLmJhY2tvZmYgPSAxOwogICAgLy8gdGhlIGhvc3Qg");
    sb.append("d2UgYXJlIGNvbm5lY3RpbmcgdG8KICAgIHRoaXMuaG9zdCA9IGhvc3Q7CiAgICAvLyBmb3JtIHRoZSBV");
    sb.append("Ukwgb2YgdGhlIGhvc3QKICAgIHRoaXMudXJsID0gIndzczovLyIgKyBob3N0ICsgIi9+cyI7CiAgICAv");
    sb.append("LyBpcyB0aGUgY29ubmVjdGlvbiBjb25uZWN0ZWQKICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAg");
    sb.append("ICAvLyBpcyB0aGUgY29ubmVjdGlvbiBkZWFkCiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIC8vIHRo");
    sb.append("ZSBtYXhpbXVtIHBlcmlvZCBvZiB0aW1lIGJldHdlZW4gd2FpdGluZyBmb3IgYSByZXRyeQogICAgdGhp");
    sb.append("cy5tYXhpbXVtX2JhY2tvZmYgPSA1MDAwOwogICAgLy8gd2hlbiB0aGUgY29ubmVjdGlvbiB0aW1lcyBv");
    sb.append("dXQgZnJvbSB0aGUgc2VydmVyLCBob3cgbG9uZyB0byB3YWl0IHVudGlsIHdlIHJlY29ubmVjdAogICAg");
    sb.append("dGhpcy5yZXNldF9iYWNrb2ZmID0gMTAwMDsKICAgIC8vIHRoZSBhY3R1YWwgd2Vic29ja2V0CiAgICB0");
    sb.append("aGlzLnNvY2tldCA9IG51bGw7CiAgICAvLyB3aGF0IGhhcHBlbnMgd2hlbiB0aGUgc3RhdHVzIGNoYW5n");
    sb.append("ZXMKICAgIHRoaXMub25zdGF0dXNjaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7IH07CiAgICAvLyB3");
    sb.append("aGF0IGhhcHBlbnMgd2hlbiB3ZSBsZWFybiB0aGUgbGF0ZW5jeQogICAgdGhpcy5vbnBpbmcgPSBmdW5j");
    sb.append("dGlvbiAoc2Vjb25kcywgbGF0ZW5jeSkgeyB9OwogICAgLy8gaXMgYSByZXRyeSBzY2hlZHVsZWQKICAg");
    sb.append("IHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICAvLyBjYWxsYmFjayBtYXBwaW5nCiAgICB0aGlzLmNh");
    sb.append("bGxiYWNrcyA9IG5ldyBNYXAoKTsKICAgIC8vIGlkIGdlbmVyYXRpb24KICAgIHRoaXMubmV4dElkID0g");
    sb.append("MDsKICAgIC8vIGV2ZW50cyB0byBleGVjdXRlIG9uIHJlY29ubmVjdAogICAgdGhpcy5vbnJlY29ubmVj");
    sb.append("dCA9IG5ldyBNYXAoKTsKICAgIC8vIHByb3RvY29sIGZvciBtZXRyaWNzCiAgICB0aGlzLnByb3RvY29s");
    sb.append("ID0gbG9jYXRpb24ucHJvdG9jb2w7CiAgfQoKICAvKiogc3RvcCB0aGUgY29ubmVjdGlvbiAqLwogIHN0");
    sb.append("b3AoKSB7CiAgICB0aGlzLmRlYWQgPSB0cnVlOwogICAgaWYgKHRoaXMuc29ja2V0ICE9PSBudWxsKSB7");
    sb.append("CiAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7CiAgICB9CiAgfQoKICBidW1wKGJtKSB7CiAgICB0cnkg");
    sb.append("ewogICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAub3Blbigi");
    sb.append("UFVUIiwgdGhpcy5wcm90b2NvbCArICIvLyIgKyB0aGlzLmhvc3QgKyAiL35ibS8iICsgYm0sIHRydWUp");
    sb.append("OwogICAgICB4aHR0cC5zZW5kKCk7CiAgICB9IGNhdGNoIChleCkgewogICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICB9CiAgfQoKICBsb2cobmFtZSwgYm9keSkgewogICAgdHJ5IHsKICAgICAgdmFyIHhodHRwID0g");
    sb.append("bmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIHhodHRwLm9wZW4oIlBVVCIsIHRoaXMucHJvdG9jb2wg");
    sb.append("KyAiLy8iICsgdGhpcy5ob3N0ICsgIi9+bGcvIiArIG5hbWUsIHRydWUpOwogICAgICB4aHR0cC5zZW5k");
    sb.append("KGJvZHkpOwogICAgfSBjYXRjaCAoZXgpIHsKICAgICAgLy8gZG9uJ3QgY2FyZQogICAgfQogIH0KCiAg");
    sb.append("LyoqIHByaXZhdGU6IHJldHJ5IHRoZSBjb25uZWN0aW9uICovCiAgX3JldHJ5KCkgewogICAgLy8gbnVs");
    sb.append("bCBvdXQgdGhlIHNvY2tldAogICAgdGhpcy5zb2NrZXQgPSBudWxsOwogICAgLy8gaWYgd2UgYXJlIGNv");
    sb.append("bm5lY3RlZCwgdHJhbnNpdGlvbiB0aGUgc3RhdHVzCiAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHsKICAg");
    sb.append("ICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5vbnN0YXR1c2NoYW5nZShmYWxzZSk7");
    sb.append("CiAgICAgIHRoaXMuY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNiLCBpZCkgewogICAgICAgIGNi");
    sb.append("KHtmYWlsdXJlOjk5OX0pOwogICAgICB9KTsKICAgIH0KICAgIHRoaXMuY2FsbGJhY2tzLmNsZWFyKCk7");
    sb.append("CiAgICAvLyBpZiB3ZSBhcmUgZGVhZCwgdGhlbiBkb24ndCBhY3R1YWxseSByZXRyeQogICAgaWYgKHRo");
    sb.append("aXMuZGVhZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICAvLyBtYWtlIHN1cmUKICAgIGlmICghdGhp");
    sb.append("cy5zY2hlZHVsZWQpIHsKICAgICAgLy8gc2NoZWR1bGUgYSByZXRyeTsgZmlyc3QgY29tcHV0ZSBob3cg");
    sb.append("bG9uZyB0byB0YWtlCiAgICAgIC8vIGNvbXB1dGUgaG93IGxvbmcgd2UgbmVlZCB0byB3YWl0CiAgICAg");
    sb.append("IHZhciBoYWx2ZUFmdGVyU2NoZWR1bGUgPSBmYWxzZTsKICAgICAgdGhpcy5iYWNrb2ZmICs9IE1hdGgu");
    sb.append("cmFuZG9tKCkgKiB0aGlzLmJhY2tvZmY7CiAgICAgIGlmICh0aGlzLmJhY2tvZmYgPiB0aGlzLm1heGlt");
    sb.append("dW1fYmFja29mZikgewogICAgICAgIHRoaXMuYmFja29mZiA9IHRoaXMubWF4aW11bV9iYWNrb2ZmOwog");
    sb.append("ICAgICAgIGhhbHZlQWZ0ZXJTY2hlZHVsZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIC8vIHNjaGVkdWxl");
    sb.append("IGl0CiAgICAgIHRoaXMuc2NoZWR1bGVkID0gdHJ1ZTsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLnN0YXJ0KCk7CiAgICAgIH0sIHRo");
    sb.append("aXMuYmFja29mZik7CgogICAgICAvLyB3ZSBqdXN0IHNjaGVkdWxlZCBpdCBmb3IgdGhlIG1heGltdW0g");
    sb.append("YmFja29mZiB0aW1lLCBsZXQncyByZWR1Y2UgdGhlIGJhY2tvZmYgc28gdGhlIG5leHQgb25lIHdpbGwg");
    sb.append("aGF2ZSBzb21lIGppdHRlcgogICAgICBpZiAoaGFsdmVBZnRlclNjaGVkdWxlKSB7CiAgICAgICAgdGhp");
    sb.append("cy5iYWNrb2ZmIC89IDIuMDsKICAgICAgfQogICAgfQogIH0KCiAgLyoqIHN0YXJ0IHRoZSBjb25uZWN0");
    sb.append("aW9uICovCiAgc3RhcnQoKSB7CiAgICAvLyByZXNldCB0aGUgc3RhdGUKICAgIHZhciBzZWxmID0gdGhp");
    sb.append("czsKICAgIHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIHRo");
    sb.append("aXMuaGFzX2hhZF9waW5nID0gZmFsc2U7CiAgICB0aGlzLmxhc3RfcGluZyA9IDA7CiAgICB0aGlzLnBp");
    sb.append("bmdfZmFpbHVyZXMgPSAwOwogICAgLy8gY3JlYXRlIHRoZSBzb2NrZXQgYW5kIGJpbmQgZXZlbnQgaGFu");
    sb.append("ZGxlcnMKICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCh0aGlzLnVybCk7CiAgICB0aGlzLnNv");
    sb.append("Y2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIHJlc3VsdCA9IEpTT04u");
    sb.append("cGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgIC8vIGEgbWVzc2FnZSBhcnJpdmVkLCBpcyBpdCBhIGNvbm5l");
    sb.append("Y3Rpb24gc2lnbmFsCiAgICAgIGlmICgicGluZyIgaW4gcmVzdWx0KSB7CiAgICAgICAgc2VsZi5vbnBp");
    sb.append("bmcocmVzdWx0LnBpbmcsIHJlc3VsdC5sYXRlbmN5KTsKICAgICAgICByZXN1bHQucG9uZyA9IG5ldyBE");
    sb.append("YXRlKCkuZ2V0VGltZSgpIC8gMTAwMC4wOwogICAgICAgIHNlbGYuc29ja2V0LnNlbmQoSlNPTi5zdHJp");
    sb.append("bmdpZnkocmVzdWx0KSk7CiAgICAgICAgc2VsZi5sYXN0X3BpbmcgPSBuZXcgRGF0ZSgpLmdldFRpbWUo");
    sb.append("KTsKICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9");
    sb.append("CiAgICAgIGlmICgic3RhdHVzIiBpbiByZXN1bHQpIHsKICAgICAgICAvLyBoZXksIGFyZSB3ZSBjb25u");
    sb.append("ZWN0ZWQ/CiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgIT0gImNvbm5lY3RlZCIpIHsKICAgICAgICAg");
    sb.append("IC8vIG5vcGUsIE9LLCBsZXQncyBtYWtlIHRoaXMgYSBkZWFkIHNvY2tldAogICAgICAgICAgc2VsZi5z");
    sb.append("b2NrZXQuY2xvc2UoKTsKICAgICAgICAgIHNlbGYuc29ja2V0ID0gbnVsbDsKICAgICAgICAgIHNlbGYu");
    sb.append("YmFja29mZiA9IHNlbGYucmVzZXRfYmFja29mZjsKICAgICAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIHRlbGwgdGhlIGNsaWVudCB0aGF0IHdlIGFy");
    sb.append("ZSBnb29kIQogICAgICAgIHNlbGYuYmFja29mZiA9IDE7CiAgICAgICAgc2VsZi5jb25uZWN0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIHNlbGYub25zdGF0dXNjaGFuZ2UodHJ1ZSk7CiAgICAgICAgc2VsZi5fcmVjb25u");
    sb.append("ZWN0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIHRoZSByZXN1bHQgd2FzIGEgZmFp");
    sb.append("bHVyZS4uLgogICAgICBpZiAoImZhaWx1cmUiIGluIHJlc3VsdCkgewogICAgICAgIC8vIGZpbmQgdGhl");
    sb.append("IGNhbGxiYWNrLCB0aGVuIGludm9rZSBpdCAoYW5kIGNsZWFuIHVwKQogICAgICAgIGlmIChzZWxmLmNh");
    sb.append("bGxiYWNrcy5oYXMocmVzdWx0LmZhaWx1cmUpKSB7CiAgICAgICAgICB2YXIgY2IgPSBzZWxmLmNhbGxi");
    sb.append("YWNrcy5nZXQocmVzdWx0LmZhaWx1cmUpOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHNl");
    sb.append("bGYuY2FsbGJhY2tzLmRlbGV0ZShyZXN1bHQuZmFpbHVyZSk7CiAgICAgICAgICAgIGNiKHJlc3VsdCk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCJkZWxpdmVyIiBpbiByZXN1bHQp");
    sb.append("IHsKICAgICAgICAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWNjZXNzLCBzbyBsZXQncyBmaW5kIHRo");
    sb.append("ZSBjYWxsYmFjaywgYW5kIGlmIG5lZWQgYmUgY2xlYW4gdXAKICAgICAgICBpZiAoc2VsZi5jYWxsYmFj");
    sb.append("a3MuaGFzKHJlc3VsdC5kZWxpdmVyKSkgewogICAgICAgICAgdmFyIGNiID0gc2VsZi5jYWxsYmFja3Mu");
    sb.append("Z2V0KHJlc3VsdC5kZWxpdmVyKTsKICAgICAgICAgIGlmIChjYikgewogICAgICAgICAgICBpZiAocmVz");
    sb.append("dWx0LmRvbmUpIHsKICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrcy5kZWxldGUocmVzdWx0LmRlbGl2");
    sb.append("ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNiKHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfQogICAgICB9CiAgICB9OwogICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChldmVu");
    sb.append("dCkgewogICAgICBzZWxmLmJ1bXAoInIiKTsKICAgICAgLy8gbGV0J3MgcmV0cnkuLi4gb3Igc2hvdWxk");
    sb.append("IHdlIG5vdAogICAgICBzZWxmLl9yZXRyeSgpOwogICAgfTsKICAgIHRoaXMuc29ja2V0Lm9uZXJyb3Ig");
    sb.append("PSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgc2VsZi5idW1wKCJyIik7CiAgICAgIC8vIHNvbWV0aGlu");
    sb.append("ZyBiYWQgaGFwcGVuZWQsIGxldCdzIHJldHJ5CiAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICB9OwoKICB9");
    sb.append("CgogIGtlZXBhbGl2ZSgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHdpbmRvdy5zZXRJbnRlcnZh");
    sb.append("bChmdW5jdGlvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc2VsZi5oYXNfaGFkX3BpbmcgJiYg");
    sb.append("c2VsZi5zb2NrZXQpIHsKICAgICAgICAgIHZhciB0aW1lU2luY2VMYXN0UGluZyA9IG5ldyBEYXRlKCku");
    sb.append("Z2V0VGltZSgpIC0gc2VsZi5sYXN0X3Bpbmc7CiAgICAgICAgICAvLyBUT0RPOiBicm9hZGNhc3QgYSBs");
    sb.append("YXRlbmN5CiAgICAgICAgICBpZiAodGltZVNpbmNlTGFzdFBpbmcgPiAyNTAwKSB7CiAgICAgICAgICAg");
    sb.append("IHNlbGYucGluZ19mYWlsdXJlcysrOwogICAgICAgICAgICBpZiAoc2VsZi5waW5nX2ZhaWx1cmVzID49");
    sb.append("IDMpIHsKICAgICAgICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IGZhbHNlOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbigpIHt9OwogICAgICAgICAgICAgIHNlbGYuc29j");
    sb.append("a2V0LmNsb3NlKCk7CiAgICAgICAgICAgICAgc2VsZi5zb2NrZXQgPSBudWxsOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuX3JldHJ5KCk7CiAgICAgICAgICAgICAgc2VsZi5idW1wKCJkIik7CiAgICAgICAgICAgICAg");
    sb.append("Y29uc29sZS5lcnJvcigiaGFkIHRvIGZvcmNlIGEgZGlzY29ubmVjdCIpOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnBpbmdfZmFpbHVyZXMgPSAwOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7");
    sb.append("CiAgICAgIH0KICAgIH0sIDEyNTApOwogIH0KCiAgLyoqIHByaXZhdGU6IHNlbmQgYSByYXcgbWVzc2Fn");
    sb.append("ZSAqLwogIF93cml0ZShyZXF1ZXN0LCBjYWxsYmFjaykgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkg");
    sb.append("ewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNrcy5zZXQocmVxdWVzdC5p");
    sb.append("ZCwgY2FsbGJhY2spOwogICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7");
    sb.append("CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKiBhcGk6IHdhaXQgZm9yIGEgY29ubmVjdGlvbiAqLwog");
    sb.append("IGFzeW5jIHdhaXRfY29ubmVjdGVkKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHJl");
    sb.append("dHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZ29vZCkgewogICAgICAgIGdvb2QodHJ1ZSk7CiAgICAg");
    sb.append("IH0pOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcHJpb3IgPSB0");
    sb.append("aGlzLm9uc3RhdHVzY2hhbmdlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGdvb2Qp");
    sb.append("IHsKICAgICAgICBzZWxmLm9uc3RhdHVzY2hhbmdlID0gZnVuY3Rpb24gKHN0YXR1cykgewogICAgICAg");
    sb.append("ICAgcHJpb3Ioc3RhdHVzKTsKICAgICAgICAgIGlmIChzdGF0dXMpIHsKICAgICAgICAgICAgZ29vZCh0");
    sb.append("cnVlKTsKICAgICAgICAgICAgc2VsZi5vbnN0YXR1c2NoYW5nZSA9IHByaW9yOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0KCiAgX3JlY29ubmVjdCgpIHsKICAgIHRoaXMub25y");
    sb.append("ZWNvbm5lY3QuZm9yRWFjaChmdW5jdGlvbiAoc20sIGlkKSB7CiAgICAgIHNtLl9fcmV0cnkoKTsKICAg");
    sb.append("IH0pOwogIH0KCiAgLyoqIGV4ZWN1dGUgYSByZXF1ZXNlIHJlc3BvbnNlIHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfcnIoc20pIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHNtLmZpcnN0ID0gdHJ1ZTsKICAgIGlmICghc2VsZi5fd3JpdGUoc20ucmVxdWVzdCwgZnVuY3Rpb24g");
    sb.append("KHJlc3BvbnNlKSB7CiAgICAgIGlmIChzbS5maXJzdCkgewogICAgICAgIHNtLmZpcnN0ID0gZmFsc2U7");
    sb.append("CiAgICAgICAgaWYgKCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgICAgaWYgKCdmYWlsdXJl");
    sb.append("JyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLmZhaWx1cmUocmVzcG9u");
    sb.append("c2UucmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCdzdWNj");
    sb.append("ZXNzJyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLnN1Y2Nlc3MocmVz");
    sb.append("cG9uc2UucmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBzZWxmLm9u");
    sb.append("cmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICB9KSkgewogICAgICBzZWxmLm9ucmVjb25uZWN0LnNl");
    sb.append("dChzbS5pZCwgc20pOwogICAgICBzbS5fX3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHNtKTsKICAgICAgfTsKICAgICAgcmV0dXJuIHNtOwogICAgfQogICAgcmV0dXJu");
    sb.append("IG51bGw7CiAgfQoKICAvKiogZXhlY3V0ZSBhIHN0cmVhbSByZXF1ZXN0IHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfc3RyZWFtKHNtKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICBzZWxmLl93cml0ZShzbS5yZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYg");
    sb.append("KCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgIGlmICgnZmFpbHVyZScgaW4gc20ucmVzcG9u");
    sb.append("ZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuZmFpbHVyZShyZXNwb25zZS5yZWFzb24pOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBzZWxmLm9ucmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZSkgewogICAgICAgIGlmICgnbmV4dCcg");
    sb.append("aW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIubmV4dChyZXNwb25zZS5yZXNw");
    sb.append("b25zZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5kb25lKSB7CiAgICAgICAg");
    sb.append("aWYgKCdjb21wbGV0ZScgaW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuY29t");
    sb.append("cGxldGUoKTsKICAgICAgICB9CiAgICAgICAgc2VsZi5vbnJlY29ubmVjdC5kZWxldGUoc20uaWQpOwog");
    sb.append("ICAgICB9CiAgICB9KTsKICAgIHNlbGYub25yZWNvbm5lY3Quc2V0KHNtLmlkLCBzbSk7CiAgICBzbS5f");
    sb.append("X3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oc20pOwogICAg");
    sb.append("fTsKICAgIHJldHVybiBzbTsKICB9CgogIF9faWQoKSB7CiAgICB0aGlzLm5leHRJZCsrOwogICAgcmV0");
    sb.append("dXJuIHRoaXMubmV4dElkOwogIH0KCiAgLyoqW0JFR0lOLUlOVk9LRV0qKi8KICBJbml0U2V0dXBBY2Nv");
    sb.append("dW50KGVtYWlsLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9");
    sb.append("IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklk");
    sb.append("LAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpbml0");
    sb.append("L3NldHVwLWFjY291bnQiLCAiaWQiOnBhcklkLCAiZW1haWwiOiBlbWFpbH0KICAgIH0pOwogIH0KICBJ");
    sb.append("bml0Q29udmVydEdvb2dsZVVzZXIoYWNjZXNzVG9rZW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6ImluaXQvY29udmVydC1nb29nbGUtdXNlciIsICJpZCI6cGFySWQsICJh");
    sb.append("Y2Nlc3MtdG9rZW4iOiBhY2Nlc3NUb2tlbn0KICAgIH0pOwogIH0KICBJbml0Q29tcGxldGVBY2NvdW50");
    sb.append("KGVtYWlsLCByZXZva2UsIGNvZGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6ImluaXQvY29tcGxldGUtYWNjb3VudCIsICJpZCI6cGFySWQsICJlbWFpbCI6IGVtYWlsLCAi");
    sb.append("cmV2b2tlIjogcmV2b2tlLCAiY29kZSI6IGNvZGV9CiAgICB9KTsKICB9CiAgRGVpbml0KGlkZW50aXR5");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkZWluaXQiLCAiaWQi");
    sb.append("OnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBBY2NvdW50U2V0UGFzc3dv");
    sb.append("cmQoaWRlbnRpdHksIHBhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJt");
    sb.append("ZXRob2QiOiJhY2NvdW50L3NldC1wYXNzd29yZCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50");
    sb.append("aXR5LCAicGFzc3dvcmQiOiBwYXNzd29yZH0KICAgIH0pOwogIH0KICBBY2NvdW50R2V0UGF5bWVudFBs");
    sb.append("YW4oaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFy");
    sb.append("SWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFj");
    sb.append("Y291bnQvZ2V0LXBheW1lbnQtcGxhbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQog");
    sb.append("ICAgfSk7CiAgfQogIEFjY291bnRMb2dpbihlbWFpbCwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFjY291bnQvbG9naW4iLCAiaWQiOnBhcklkLCAiZW1h");
    sb.append("aWwiOiBlbWFpbCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgUHJvYmUoaWRlbnRp");
    sb.append("dHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InByb2JlIiwgImlk");
    sb.append("IjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgU3RhdHMocmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InN0YXRzIiwgImlkIjpwYXJJZH0K");
    sb.append("ICAgIH0pOwogIH0KICBJZGVudGl0eUhhc2goaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImlkZW50aXR5L2hhc2giLCAiaWQiOnBhcklkLCAiaWRlbnRpdHki");
    sb.append("OiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBJZGVudGl0eVN0YXNoKGlkZW50aXR5LCBuYW1lLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpZGVudGl0eS9zdGFzaCIsICJp");
    sb.append("ZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibmFtZSI6IG5hbWV9CiAgICB9KTsKICB9CiAg");
    sb.append("U3BhY2VDcmVhdGUoaWRlbnRpdHksIHNwYWNlLCB0ZW1wbGF0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAg");
    sb.append("ICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2UvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5");
    sb.append("IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAidGVtcGxhdGUiOiB0ZW1wbGF0ZX0KICAgIH0pOwog");
    sb.append("IH0KICBTcGFjZURlbGV0ZShpZGVudGl0eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL2RlbGV0ZSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlk");
    sb.append("ZW50aXR5LCAic3BhY2UiOiBzcGFjZX0KICAgIH0pOwogIH0KICBTcGFjZVJlZmxlY3QoaWRlbnRpdHks");
    sb.append("IHNwYWNlLCBrZXksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFy");
    sb.append("SWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNw");
    sb.append("YWNlL3JlZmxlY3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3Bh");
    sb.append("Y2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgU3BhY2VMaXN0KGlkZW50aXR5LCBtYXJrZXIsIGxp");
    sb.append("bWl0LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2Uv");
    sb.append("bGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibWFya2VyIjogbWFya2VyLCAi");
    sb.append("bGltaXQiOiBsaW1pdH0KICAgIH0pOwogIH0KICBQdXNoUmVnaXN0ZXIoaWRlbnRpdHksIGRvbWFpbiwg");
    sb.append("c3Vic2NyaXB0aW9uLCBkZXZpY2VJbmZvLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJwdXNoL3JlZ2lzdGVyIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHks");
    sb.append("ICJkb21haW4iOiBkb21haW4sICJzdWJzY3JpcHRpb24iOiBzdWJzY3JpcHRpb24sICJkZXZpY2UtaW5m");
    sb.append("byI6IGRldmljZUluZm99CiAgICB9KTsKICB9CiAgRG9tYWluUmVmbGVjdChpZGVudGl0eSwgZG9tYWlu");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb21haW4vcmVmbGVj");
    sb.append("dCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWlufQogICAg");
    sb.append("fSk7CiAgfQogIERvbWFpbkdldFZhcGlkUHVibGljS2V5KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9nZXQtdmFwaWQtcHVibGlj");
    sb.append("LWtleSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWlufQog");
    sb.append("ICAgfSk7CiAgfQogIERvY3VtZW50QXV0aG9yaXphdGlvbihzcGFjZSwga2V5LCBtZXNzYWdlLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemF0");
    sb.append("aW9uIiwgImlkIjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJtZXNzYWdlIjogbWVz");
    sb.append("c2FnZX0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6YXRpb25Eb21haW4oZG9tYWluLCBtZXNz");
    sb.append("YWdlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAg");
    sb.append("ICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9h");
    sb.append("dXRob3JpemF0aW9uLWRvbWFpbiIsICJpZCI6cGFySWQsICJkb21haW4iOiBkb21haW4sICJtZXNzYWdl");
    sb.append("IjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZShzcGFjZSwga2V5LCB1c2Vy");
    sb.append("bmFtZSwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("ImRvY3VtZW50L2F1dGhvcml6ZSIsICJpZCI6cGFySWQsICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5");
    sb.append("LCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAg");
    sb.append("RG9jdW1lbnRBdXRob3JpemVEb21haW4oZG9tYWluLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS1kb21h");
    sb.append("aW4iLCAiaWQiOnBhcklkLCAiZG9tYWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBh");
    sb.append("c3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemVXaXRoUmVzZXQo");
    sb.append("c3BhY2UsIGtleSwgdXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS13aXRoLXJlc2V0");
    sb.append("IiwgImlkIjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJ1c2VybmFtZSI6IHVzZXJu");
    sb.append("YW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAg");
    sb.append("IH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZURvbWFpbldpdGhSZXNldChkb21haW4sIHVzZXJuYW1l");
    sb.append("LCBwYXNzd29yZCwgbmV3X3Bhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemUtZG9tYWluLXdpdGgtcmVzZXQiLCAiaWQiOnBhcklk");
    sb.append("LCAiZG9tYWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dv");
    sb.append("cmQsICJuZXdfcGFzc3dvcmQiOiBuZXdfcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRDcmVh");
    sb.append("dGUoaWRlbnRpdHksIHNwYWNlLCBrZXksIGVudHJvcHksIGFyZywgcmVzcG9uZGVyKSB7CiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAg");
    sb.append("ICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50");
    sb.append("aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZW50cm9weSI6IGVudHJv");
    sb.append("cHksICJhcmciOiBhcmd9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRMaXN0KGlkZW50aXR5LCBzcGFjZSwg");
    sb.append("bWFya2VyLCBsaW1pdCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFy");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBp");
    sb.append("ZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhv");
    sb.append("ZCI6ImRvY3VtZW50L2xpc3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNl");
    sb.append("Ijogc3BhY2UsICJtYXJrZXIiOiBtYXJrZXIsICJsaW1pdCI6IGxpbWl0fQogICAgfSk7CiAgfQogIE1l");
    sb.append("c3NhZ2VEaXJlY3RTZW5kKGlkZW50aXR5LCBzcGFjZSwga2V5LCBjaGFubmVsLCBtZXNzYWdlLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJtZXNzYWdlL2RpcmVjdC1zZW5k");
    sb.append("IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijog");
    sb.append("a2V5LCAiY2hhbm5lbCI6IGNoYW5uZWwsICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBN");
    sb.append("ZXNzYWdlRGlyZWN0U2VuZE9uY2UoaWRlbnRpdHksIHNwYWNlLCBrZXksIGRlZHVwZSwgY2hhbm5lbCwg");
    sb.append("bWVzc2FnZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBz");
    sb.append("ZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoibWVzc2Fn");
    sb.append("ZS9kaXJlY3Qtc2VuZC1vbmNlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFj");
    sb.append("ZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZGVkdXBlIjogZGVkdXBlLCAiY2hhbm5lbCI6IGNoYW5uZWws");
    sb.append("ICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBDb25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5");
    sb.append("LCBzcGFjZSwga2V5LCB2aWV3ZXJTdGF0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJl");
    sb.append("YW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6ImNvbm5lY3Rpb24vY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAidmlld2VyLXN0YXRlIjogdmlld2Vy");
    sb.append("U3RhdGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIp");
    sb.append("IHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwK");
    sb.append("ICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3");
    sb.append("b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2Vy");
    sb.append("bmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19w");
    sb.append("YXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5u");
    sb.append("ZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAog");
    sb.append("ICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhv");
    sb.append("ZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJj");
    sb.append("aGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQs");
    sb.append("ICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5j");
    sb.append("dGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0");
    sb.append("U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJ");
    sb.append("ZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUi");
    sb.append("OiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEz");
    sb.append("ODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUs");
    sb.append("IHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjog");
    sb.append("c3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0");
    sb.append("ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3Rh");
    sb.append("dGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBDb25uZWN0aW9u");
    sb.append("Q3JlYXRlVmlhRG9tYWluKGlkZW50aXR5LCBkb21haW4sIHZpZXdlclN0YXRlLCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiBy");
    sb.append("ZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiY29ubmVjdGlvbi9jcmVhdGUtdmlhLWRv");
    sb.append("bWFpbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAi");
    sb.append("dmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBt");
    sb.append("ZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9zZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwg");
    sb.append("Im1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVu");
    sb.append("Y3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAg");
    sb.append("ICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAg");
    sb.append("ICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWQsICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwg");
    sb.append("Im5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2Vu");
    sb.append("ZE9uY2U6IGZ1bmN0aW9uKGNoYW5uZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAg");
    sb.append("ICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1l");
    sb.append("c3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0");
    sb.append("aW9uKHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAg");
    sb.append("IHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRl");
    sb.append("cjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nh");
    sb.append("bi1hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAg");
    sb.append("fSwKICAgICAgYXR0YWNoOiBmdW5jdGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNp");
    sb.append("emUsIGRpZ2VzdE1kNSwgZGlnZXN0U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3Vi");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDog");
    sb.append("c3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6");
    sb.append("IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJ");
    sb.append("ZCwgImFzc2V0LWlkIjogYXNzZXRJZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUi");
    sb.append("OiBjb250ZW50VHlwZSwgInNpemUiOiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2Vz");
    sb.append("dC1zaGEzODQiOiBkaWdlc3RTaGEzODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTog");
    sb.append("ZnVuY3Rpb24odmlld2VyU3RhdGUsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwK");
    sb.append("ICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRo");
    sb.append("b2Q6ICJjb25uZWN0aW9uL3VwZGF0ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmll");
    sb.append("d2VyLXN0YXRlIjogdmlld2VyU3RhdGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVu");
    sb.append("Y3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAg");
    sb.append("ICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9u");
    sb.append("ZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24v");
    sb.append("ZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAg");
    sb.append("IH0pOwogIH0KICBEb2N1bWVudHNIYXNoUGFzc3dvcmQocGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50cy9oYXNoLXBhc3N3b3JkIiwgImlkIjpw");
    sb.append("YXJJZCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgQmlsbGluZ0Nvbm5lY3Rpb25D");
    sb.append("cmVhdGUoaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAg");
    sb.append("aWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRo");
    sb.append("b2QiOiJiaWxsaW5nLWNvbm5lY3Rpb24vY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRl");
    sb.append("bnRpdHl9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIp");
    sb.append("IHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwK");
    sb.append("ICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3");
    sb.append("b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2Vy");
    sb.append("bmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19w");
    sb.append("YXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5u");
    sb.append("ZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAog");
    sb.append("ICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhv");
    sb.append("ZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJj");
    sb.append("aGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQs");
    sb.append("ICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5j");
    sb.append("dGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0");
    sb.append("U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJ");
    sb.append("ZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUi");
    sb.append("OiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEz");
    sb.append("ODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUs");
    sb.append("IHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjog");
    sb.append("c3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0");
    sb.append("ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3Rh");
    sb.append("dGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBGZWF0dXJlU3Vt");
    sb.append("bWFyaXplVXJsKGlkZW50aXR5LCB1cmwsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwog");
    sb.append("ICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7");
    sb.append("Im1ldGhvZCI6ImZlYXR1cmUvc3VtbWFyaXplLXVybCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlk");
    sb.append("ZW50aXR5LCAidXJsIjogdXJsfQogICAgfSk7CiAgfQogIEF0dGFjaG1lbnRTdGFydChpZGVudGl0eSwg");
    sb.append("c3BhY2UsIGtleSwgZmlsZW5hbWUsIGNvbnRlbnRUeXBlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxm");
    sb.append("ID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVj");
    sb.append("dXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAg");
    sb.append("ICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXR0YWNobWVudC9zdGFydCIsICJpZCI6cGFySWQsICJpZGVu");
    sb.append("dGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgImtleSI6IGtleSwgImZpbGVuYW1lIjogZmls");
    sb.append("ZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZX0sCiAgICAgIGFwcGVuZDogZnVuY3Rpb24o");
    sb.append("Y2h1bmtNZDUsIGJhc2U2NEJ5dGVzLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBz");
    sb.append("ZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQs");
    sb.append("CiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0");
    sb.append("aG9kOiAiYXR0YWNobWVudC9hcHBlbmQiLCBpZDogc3ViSWQsICJ1cGxvYWQiOnBhcklkLCAiY2h1bmst");
    sb.append("bWQ1IjogY2h1bmtNZDUsICJiYXNlNjQtYnl0ZXMiOiBiYXNlNjRCeXRlc30KICAgICAgICB9KTsKICAg");
    sb.append("ICAgfSwKICAgICAgZmluaXNoOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3Vi");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDog");
    sb.append("c3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6");
    sb.append("IHsgbWV0aG9kOiAiYXR0YWNobWVudC9maW5pc2giLCBpZDogc3ViSWQsICJ1cGxvYWQiOnBhcklkfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9CiAgQXR0YWNobWVudFN0YXJ0QnlEb21haW4oaWRl");
    sb.append("bnRpdHksIGRvbWFpbiwgZmlsZW5hbWUsIGNvbnRlbnRUeXBlLCByZXNwb25kZXIpIHsKICAgIHZhciBz");
    sb.append("ZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19l");
    sb.append("eGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIs");
    sb.append("CiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXR0YWNobWVudC9zdGFydC1ieS1kb21haW4iLCAiaWQi");
    sb.append("OnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImRvbWFpbiI6IGRvbWFpbiwgImZpbGVuYW1lIjog");
    sb.append("ZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZX0sCiAgICAgIGFwcGVuZDogZnVuY3Rp");
    sb.append("b24oY2h1bmtNZDUsIGJhc2U2NEJ5dGVzLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3Vi");
    sb.append("SWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsg");
    sb.append("bWV0aG9kOiAiYXR0YWNobWVudC9hcHBlbmQiLCBpZDogc3ViSWQsICJ1cGxvYWQiOnBhcklkLCAiY2h1");
    sb.append("bmstbWQ1IjogY2h1bmtNZDUsICJiYXNlNjQtYnl0ZXMiOiBiYXNlNjRCeXRlc30KICAgICAgICB9KTsK");
    sb.append("ICAgICAgfSwKICAgICAgZmluaXNoOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIg");
    sb.append("c3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBp");
    sb.append("ZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVl");
    sb.append("c3Q6IHsgbWV0aG9kOiAiYXR0YWNobWVudC9maW5pc2giLCBpZDogc3ViSWQsICJ1cGxvYWQiOnBhcklk");
    sb.append("fQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9CgogIC8qKltFTkQtSU5WT0tFXSoqLwp9Cgp2");
    sb.append("YXIgQWRhbWEgPSB7CiAgUHJvZHVjdGlvbjogImF3cy11cy1lYXN0LTIuYWRhbWEtcGxhdGZvcm0uY29t");
    sb.append("IiwKICBCZXRhOiAiYmV0YS5hZGFtYS1wbGF0Zm9ybS5jb20iLAogIENvbm5lY3Rpb246IFdlYlNvY2tl");
    sb.append("dEFkYW1hQ29ubmVjdGlvbgp9Owo=");
    return sb.toString();
  }
  public static final String WORKER = new String(Base64.getDecoder().decode(make_worker()), StandardCharsets.UTF_8);
  private static String make_worker() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyogQWRhbWEgd29ya2VyOiBoYW5kbGUgc2ltcGxlIHB1c2ggbm90aWZpY2F0aW9ucyAqLwoKY29uc29s");
    sb.append("ZS5sb2coImFkYW1hIHdvcmtlciBzdGFydGVkIik7CnNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaCcs");
    sb.append("IGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmRhdGEpIHsKICAgIHZhciBqc29uID0gZXZlbnQu");
    sb.append("ZGF0YS5qc29uKCk7CiAgICBpZiAoanNvbikgewogICAgICBjb25zb2xlLmxvZyhqc29uKTsKICAgICAg");
    sb.append("dmFyIHB1c2hUb2tlbiA9ICJOQSI7CiAgICAgIGlmICgnQHB0JyBpbiBqc29uKSB7CiAgICAgICAgcHVz");
    sb.append("aFRva2VuID0ganNvblsnQHB0J107CiAgICAgIH0KICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAg");
    sb.append("Ym9keToganNvbi5ib2R5ID8ganNvbi5ib2R5IDogIkdlbmVyaWMgUHVzaCBCb2R5IiwKICAgICAgfTsK");
    sb.append("ICAgICAgaWYgKGpzb24uaWNvbikgewogICAgICAgIG9wdGlvbnMuaWNvbiA9IGpzb24uaWNvbjsKICAg");
    sb.append("ICAgfQogICAgICB2YXIgc2hvdyA9IHRydWU7CiAgICAgIGlmIChqc29uLmhpZGUpIHsKICAgICAgICBz");
    sb.append("aG93ID0gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgaWYgKGpzb24udXJs");
    sb.append("KSB7CiAgICAgICAgZGF0YS51cmwgPSBqc29uLnVybDsKICAgICAgfQogICAgICBvcHRpb25zLmRhdGEg");
    sb.append("PSBkYXRhOwogICAgICBpZiAoc2hvdykgewogICAgICAgIGV2ZW50LndhaXRVbnRpbChzZWxmLnJlZ2lz");
    sb.append("dHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKGpzb24udGl0bGUgPyBqc29uLnRpdGxlIDogIkdlbmVyaWMg");
    sb.append("UHVzaCBUaXRsZSIsIG9wdGlvbnMpKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mKGpzb24uYmFkZ2Up");
    sb.append("ID09ICJudW1iZXIiICYmIG5hdmlnYXRvci5zZXRBcHBCYWRnZSkgewogICAgICAgIHRyeSB7CiAgICAg");
    sb.append("ICAgICBldmVudC53YWl0VW50aWwobmF2aWdhdG9yLnNldEFwcEJhZGdlKGpzb24uYmFkZ2UpKTsKICAg");
    sb.append("ICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgZXZlbnQud2FpdFVu");
    sb.append("dGlsKGZldGNoKHNlbGYubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5sb2NhdGlvbi5ob3N0");
    sb.append("ICsgIi9+cHQvIiArIHB1c2hUb2tlbiwgewogICAgICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgICAg");
    sb.append("IGhlYWRlcnM6IHt9LAogICAgICAgICAgYm9keTogcHVzaFRva2VuCiAgICAgICAgfSkpOwogICAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICAgIH0KICAgIH0KICB9Cn0pOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdub3RpZmljYXRpb25j");
    sb.append("bGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50Lm5vdGlmaWNhdGlvbiAmJiBldmVudC5u");
    sb.append("b3RpZmljYXRpb24uZGF0YSAmJiBldmVudC5ub3RpZmljYXRpb24uZGF0YS51cmwpIHsKICAgIHZhciB1");
    sb.append("cmwgPSBzZWxmLmxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHNlbGYubG9jYXRpb24uaG9zdCArIGV2");
    sb.append("ZW50Lm5vdGlmaWNhdGlvbi5kYXRhLnVybDsKICAgIHZhciBob21lID0gc2VsZi5sb2NhdGlvbi5wcm90");
    sb.append("b2NvbCArICIvLyIgKyBzZWxmLmxvY2F0aW9uLmhvc3Q7CiAgICBldmVudC5ub3RpZmljYXRpb24uY2xv");
    sb.append("c2UoKTsgLy8gQW5kcm9pZCBuZWVkcyBleHBsaWNpdCBjbG9zZS4KICAgIGV2ZW50LndhaXRVbnRpbCgK");
    sb.append("ICAgICAgY2xpZW50cy5tYXRjaEFsbCh7dHlwZTogJ3dpbmRvdyd9KS50aGVuKCB3YyA9PiB7CiAgICAg");
    sb.append("ICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHdpbmRvdy90YWIgb3BlbiB3aXRoIHRoZSB0");
    sb.append("YXJnZXQgVVJMCiAgICAgICAgdmFyIGNsaWVudFdpdGhQcmVmaXggPSBudWxsOwogICAgICAgIHZhciBj");
    sb.append("bGllbnRXaXRoSG9tZSA9IG51bGw7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Yy5sZW5ndGg7");
    sb.append("IGkrKykgewogICAgICAgICAgdmFyIGNsaWVudCA9IHdjW2ldOwogICAgICAgICAgY29uc29sZS5sb2co");
    sb.append("ImNsaWVudDoiICsgY2xpZW50LnVybCArICI7IiArIHVybCk7CiAgICAgICAgICBpZiAoY2xpZW50LnVy");
    sb.append("bCA9PT0gdXJsICYmICdmb2N1cycgaW4gY2xpZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjbGllbnQu");
    sb.append("Zm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjbGllbnQudXJsLnN0YXJ0c1dpdGgodXJs");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoUHJlZml4ID0g");
    sb.append("Y2xpZW50OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNsaWVudC51cmwuc3RhcnRzV2l0aChob21l");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoSG9tZSA9IGNs");
    sb.append("aWVudDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNsaWVudFdpdGhQcmVmaXggIT0g");
    sb.append("bnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpwcmVmaXg6IiArIHVybCk7CiAgICAgICAg");
    sb.append("ICByZXR1cm4gY2xpZW50V2l0aFByZWZpeC5uYXZpZ2F0ZSh1cmwpOwogICAgICAgIH0KICAgICAgICBp");
    sb.append("ZiAoY2xpZW50V2l0aEhvbWUgIT0gbnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpob21l");
    sb.append("OiIgKyB1cmwpOwogICAgICAgICAgcmV0dXJuIGNsaWVudFdpdGhIb21lLm5hdmlnYXRlKHVybCk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmIChjbGllbnRzLm9wZW5XaW5kb3cpIHsKICAgICAgICAgIGNvbnNvbGUu");
    sb.append("bG9nKCJvcGVuOm5ldzoiICsgdXJsKTsKICAgICAgICAgIHJldHVybiBjbGllbnRzLm9wZW5XaW5kb3co");
    sb.append("dXJsKTsKICAgICAgICB9CiAgICAgIH0pCiAgICApOwogIH0KfSk7");
    return sb.toString();
  }
}
