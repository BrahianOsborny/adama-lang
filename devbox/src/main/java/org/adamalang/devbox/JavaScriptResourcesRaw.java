/*
* Adama Platform and Language
* Copyright (C) 2021 - 2023 by Adama Platform Initiative, LLC
* 
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.
* 
* You should have received a copy of the GNU Affero General Public License
* along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/
package org.adamalang.devbox;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class JavaScriptResourcesRaw {
  public static final String TREE = new String(Base64.getDecoder().decode(make_tree()), StandardCharsets.UTF_8);
  private static String make_tree() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIGEgc2ltcGxpZmllZCBwdWIvc3ViIGRpZmZlcmVudGlhbCB0cmVlICovCmZ1bmN0aW9uIEFkYW1h");
    sb.append("VHJlZSgpIHsKICB2YXIgaWQgPSAwOwoKICB2YXIgcm9vdCA9IHt9OwogIHZhciBhbGxfc3Vic2NyaXB0");
    sb.append("aW9ucyA9IHt9OwogIHZhciBzZXR0bGVJZCA9IDA7CiAgdmFyIHNldHRsZW1lbnRzID0ge307CgogIC8v");
    sb.append("IGludm9rZSBhbGwgdGhlIHNldHRsZSBzdWJzY3JpcHRpb25zCiAgdmFyIHNldHRsZSA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgdmFyIGF4ZSA9IFtdOwogICAgZm9yICh2YXIgayBpbiBzZXR0bGVtZW50cykgewogICAg");
    sb.append("ICB2YXIgcmVzdWx0ID0gc2V0dGxlbWVudHNba10oKTsKICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAg");
    sb.append("ICAvLyBpZiB0aGUgcmVzdWx0IGlzbid0IHRydWUsIHRoZW4gdW5zdWJzY3JpYmUKICAgICAgICBheGUu");
    sb.append("cHVzaChrKTsKICAgICAgfQogICAgfQogICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgZGVsZXRlIHNldHRsZW1lbnRzW2tdOwogICAgfQogIH07CgogIHZhciBjbG9uZV9v");
    sb.append("YmplY3QgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7CiAgICAg");
    sb.append("IHZhciBuZXh0ID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2JqLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgbmV4dC5wdXNoKGNsb25lX29iamVjdChvYmpba10pKTsKICAgICAgfQogICAgICByZXR1");
    sb.append("cm4gbmV4dDsKICAgIH0gZWxzZSBpZiAodHlwZW9mIChvYmopID09ICJvYmplY3QiKSB7CiAgICAgIHZh");
    sb.append("ciBuZXh0ID0ge307CiAgICAgIGZvciAoa2V5IGluIG9iaikgewogICAgICAgIGlmIChrZXlbMF0gPT0g");
    sb.append("IiMiIHx8IGtleSA9PSAiX19rZXkiIHx8IGtleSA9PSAiQG8iIHx8IGtleSA9PSAiQHMiKSBjb250aW51");
    sb.append("ZTsKICAgICAgICBuZXh0W2tleV0gPSBjbG9uZV9vYmplY3Qob2JqW2tleV0pOwogICAgICB9CiAgICAg");
    sb.append("IHJldHVybiBuZXh0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwoKICB0");
    sb.append("aGlzLm51a2UgPSBmdW5jdGlvbiAoKSB7CiAgICBhbGxfc3Vic2NyaXB0aW9ucyA9IHt9OwogIH07Cgog");
    sb.append("IHRoaXMuY29weSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBjbG9uZV9vYmplY3Qocm9vdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdHIgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocm9v");
    sb.append("dCk7CiAgfTsKCiAgdGhpcy5yYXcgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcm9vdDsKICB9OwoK");
    sb.append("ICAvLyBmaWx0ZXIgdGhlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIG9uZXMgdGhhdCBoYXZlIHRoZSBrZXkK");
    sb.append("ICB2YXIgc3ViID0gZnVuY3Rpb24gKHMsIGtleSkgewogICAgLy8gaWYgd2UgaGF2ZSBub3RoaW5nLCB0");
    sb.append("aGVuIHdlIHJldHVybiBub3RoaW5nCiAgICBpZiAocy5sZW5ndGggPT0gMCkgewogICAgICByZXR1cm4g");
    sb.append("czsKICAgIH0KICAgIC8vIG1ha2UgYSBuZXcgYXJyYXkKICAgIHZhciBuID0gW107CiAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IHMubGVuZ3RoOyBrKyspIHsgLy8gc3VjaCB0aGF0IGV2ZXJ5IGVsZW1lbnQKICAg");
    sb.append("ICAgaWYgKGtleSBpbiBzW2tdKSB7IC8vIHdoaWNoIGNvbnRhaW5zIHRoZSBrZXkKICAgICAgICBuLnB1");
    sb.append("c2goc1trXVtrZXldKTsgLy8gaXMgYWRkZWQgdG8gdGhlIG5ldyBhcnJheQogICAgICB9CiAgICB9CiAg");
    sb.append("ICByZXR1cm4gbjsKICB9OwoKICAvLyBmaXJlIGV2ZW50cyBhdCB0aGUgY3VycmVudCBzdWJzY3JpcHRp");
    sb.append("b24KICB2YXIgZmlyZSA9IGZ1bmN0aW9uIChzLCB2YWx1ZSwgZXZlbnRzKSB7CiAgICAvLyBmb3IgZWFj");
    sb.append("aCBzdWJzY3JpcHRpb24KICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgewogICAg");
    sb.append("ICB2YXIgdiA9IHNbal07CiAgICAgIC8vIGlmIGl0IGhhcyBldmVudHMKICAgICAgaWYgKCJAZSIgaW4g");
    sb.append("dikgewogICAgICAgIC8vIGZpcmUgZWFjaCBldmVudAogICAgICAgIHZhciBldnRzID0gdlsiQGUiXTsK");
    sb.append("ICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV2dHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGV2");
    sb.append("ZW50cy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5mKHRoaXMudik7CiAgICAgICAg");
    sb.append("ICB9LmJpbmQoeyBmOiBldnRzW2tdLCB2OiB2YWx1ZSB9KSk7CiAgICAgICAgfQogICAgICB9CiAgICB9");
    sb.append("CiAgfTsKCiAgdmFyIHdlYXZlID0gZnVuY3Rpb24gKHMsIGNhbGxiYWNrLCBrZXkpIHsKICAgIGlmIChB");
    sb.append("cnJheS5pc0FycmF5KGNhbGxiYWNrKSkgewogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhbGxiYWNr");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgd2VhdmUocywgY2FsbGJhY2tba10sIGtleSk7CiAgICAgIH0K");
    sb.append("ICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxsYmFjaykgPT0gImZ1bmN0aW9uIikgewogICAgICBpZiAo");
    sb.append("IShrZXkgaW4gcykpIHsKICAgICAgICBzW2tleV0gPSB7fTsKICAgICAgfQogICAgICB2YXIgc2sgPSBz");
    sb.append("W2tleV07CiAgICAgIGlmICghKCJAZSIgaW4gc2spKSB7CiAgICAgICAgc2tbIkBlIl0gPSBbY2FsbGJh");
    sb.append("Y2tdOwogICAgICB9IGVsc2UgewogICAgICAgIHNrWyJAZSJdLnB1c2goY2FsbGJhY2spOwogICAgICB9");
    sb.append("CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09ICJvYmplY3QiKSB7CiAgICAgIGlmICgh");
    sb.append("KGtleSBpbiBzKSkgewogICAgICAgIHNba2V5XSA9IHt9OwogICAgICB9CiAgICAgIHZhciBzayA9IHNb");
    sb.append("a2V5XTsKICAgICAgZm9yICh2YXIgY2sgaW4gY2FsbGJhY2spIHsKICAgICAgICBpZiAoY2sgPT0gIkBl");
    sb.append("IikgewogICAgICAgICAgd2VhdmUocywgY2FsbGJhY2tbY2tdLCBrZXkpOwogICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICB3ZWF2ZShzaywgY2FsbGJhY2tbY2tdLCBjayk7CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICB9CiAgfTsKCiAgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhZGRpdGlvbgogIHZhciBmaXJlX2FkZCA9");
    sb.append("IGZ1bmN0aW9uIChzLCBrZXkpIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykg");
    sb.append("eyAvLyBmb3IgZWFjaCBzdWJzY3JpcHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIisi");
    sb.append("IGluIHYpIHsgLy8gaWYgdGhlIHN1YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gYWRkIG5ldyBv");
    sb.append("YmplY3RzCiAgICAgICAgdmFyIHZhID0gdlsiKyJdOwogICAgICAgIGlmICgiQGUiIGluIHZhKSB7IC8v");
    sb.append("IGlmIGFyZSBldmVudHMgYXNzb2NpYXRlZCB0byAnKycKICAgICAgICAgIHZhciBldmEgPSB2YVsiQGUi");
    sb.append("XTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZhLmxlbmd0aDsgaysrKSB7IC8vIGZvciBl");
    sb.append("YWNoICcrJyBhYmlsaXR5CiAgICAgICAgICAgIHdlYXZlKHYsIGV2YVtrXShrZXkpLCBrZXkpOwogICAg");
    sb.append("ICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIGZpcmUgYSBkZWxldGUgbWVz");
    sb.append("c2FnZSBmb3IgdGhlIGdpdmVuIGtleQogIHZhciBmaXJlX2RlbCA9IGZ1bmN0aW9uIChzLCBrZXkpIHsK");
    sb.append("ICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgeyAvLyBmb3IgZWFjaCBzdWJzY3Jp");
    sb.append("cHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIi0iIGluIHYpIHsgLy8gaWYgdGhlIHN1");
    sb.append("YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gZGVsZXRlIHByaW9yIGtleXMKICAgICAgICB2YXIg");
    sb.append("dmEgPSB2WyItIl07CiAgICAgICAgaWYgKCJAZSIgaW4gdmEpIHsgLy8gaWYgYXJlIGV2ZW50cyBhc3Nv");
    sb.append("Y2lhdGVkIHRvICctJwogICAgICAgICAgdmFyIGV2YSA9IHZhWyJAZSJdOwogICAgICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBldmEubGVuZ3RoOyBrKyspIHsgLy8gZm9yIGVhY2ggJy0nIGFiaWxpdHkKICAg");
    sb.append("ICAgICAgICAgZXZhW2tdKGtleSk7IC8vIGV2YWx1YXRlIHRoZSAnLScKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBhIGRlbGV0ZSBvZiBhIHRyZWUgaGFzIGJlZW4gZGV0");
    sb.append("ZWN0ZWQsIGxldCdzCiAgdmFyIGRlbCA9IGZ1bmN0aW9uIChzKSB7CiAgICAvLyBpZiB0aGUgc3Vic2Ny");
    sb.append("aXB0aW9ucyBpcyBhbiBhcnJheSwgdGhlbiBkZWxldGUgYWxsIGNoaWxkcmVuCiAgICBpZiAoQXJyYXku");
    sb.append("aXNBcnJheShzKSkgewogICAgICB2YXIgbiA9IHMubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IG47IGsrKykgewogICAgICAgIGRlbChzW2tdKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBl");
    sb.append("b2YgKHMpID09ICJvYmplY3QiKSB7IC8vIG90aGVyd2lzZSwgaXRlcmF0ZSBvdmVyIHRoZSBrZXlzCiAg");
    sb.append("ICAgIGZvciAodmFyIGtleSBpbiBzKSB7CiAgICAgICAgaWYgKCEoa2V5ID09ICcrJyB8fCBrZXkgPT0g");
    sb.append("Jy0nKSkgewogICAgICAgICAgdmFyIGNoID0gc1trZXldOwogICAgICAgICAgaWYgKGtleSA9PSAiQGUi");
    sb.append("KSB7IC8vIHdlIGhhdmUgZXZlbnRzLCBzbyBsZXQncyBzZW5kIHRob3NlIGV2ZW50cy4uLgogICAgICAg");
    sb.append("ICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY2hb");
    sb.append("al0obnVsbCk7IC8vIGEgbnVsbCB0byBpbmRpY2F0ZSBkZWxldGlvbgogICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICB9IGVsc2UgeyAvLyByZWN1cnNlIGludG8gdGhlIGNoaWxkIGZpZWxkCiAgICAgICAgICAgIGRl");
    sb.append("bChjaCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gZGVsZXRl");
    sb.append("IHRoZSBnaXZlbiBrZXkgd2l0aGluIHRoZSBzdWJzY3JpcHRpb24KICB2YXIgZGVsX2tleSA9IGZ1bmN0");
    sb.append("aW9uIChzLCBrZXkpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHMpKSB7IC8vIGlmIHdlIGhhdmUgYW4g");
    sb.append("YXJyYXkgb2Ygc3Vic2NyaXB0aW9ucywgdGhlbiBzaW1wbHkgcmVwZWF0CiAgICAgIHZhciBuID0gcy5s");
    sb.append("ZW5ndGg7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgZGVsX2tleShz");
    sb.append("W2tdLCBrZXkpOyAvLyBmb3IgZWFjaCBlbGVtZW50CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9m");
    sb.append("IChzKSA9PSAib2JqZWN0IikgeyAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWJjcmlwdGlvbiBjYWxs");
    sb.append("YmFjawogICAgICBpZiAoa2V5IGluIHMpIHsgLy8gaWYgdGhlIGtleSBpcyBpbiB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIGNhbGxiYWNrCiAgICAgICAgZGVsZXRlIHNba2V5XTsgLy8gZGVsZXRlIGl0CiAgICAgIH0KICAg");
    sb.append("IH0KICB9OwoKICAvLyBtZXJnZSB0aGUgZ2l2ZW4gZGVsdGEgaW50byB0aGUgdHJlZSBhbmQgZmlyZSBz");
    sb.append("dWJzY3JpcHRpb25zIChzKQogIHZhciBtZXJnZSA9IGZ1bmN0aW9uICh0cmVlLCBkZWx0YSwgcywgZXZl");
    sb.append("bnRzLCBvcHRpbWFsKSB7CiAgICBpZiAob3B0aW1hbCAmJiBzLmxlbmd0aCA9PSAwKSB7CiAgICAgIC8v");
    sb.append("IG5vIHZhbHVlIGluIG1lcmdpbmcgYWdhaW5zdCBhIGZhdXggdHJlZSB3aXRob3V0IHN1YnNjcmlwdGlv");
    sb.append("bnMKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yICh2YXIga2V5IGluIGRlbHRhKSB7IC8vIGZvciBl");
    sb.append("YWNoIGJpdCBvZiBkYXRhIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgZUtleSA9ICIjIiArIGtleTsg");
    sb.append("Ly8gY29tcHV0ZSB0aGUgc2VjcmV0IGRhdGEgcGF0aAogICAgICB2YXIgcHJpb3IgPSB0cmVlW2tleV07");
    sb.append("IC8vIGZpbmQgdGhlIHByaW9yIHN0YXRlIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgbmV4dCA9IGRl");
    sb.append("bHRhW2tleV07IC8vIGJyaW5nIHRoZSBjaGFuZ2UgcHJlc2VudCBmb3IgdGhlIGN1cnJlbnQga2V5CiAg");
    sb.append("ICAgIGlmIChuZXh0ID09IG51bGwpIHsgLy8gdGhlIGl0ZW0gaXMgZ29pbmcgcG9vZgogICAgICAgIC8v");
    sb.append("IHRoZSBwcmlvciB2YWx1ZSBpcyBhbiBhcnJheSwgc28gd2UgbWF5IGhhdmUgc29tZSBzcGVjaWFsIHRo");
    sb.append("aW5ncyBhc3NvY2lhdGUgd2l0aCBpdAogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByaW9yKSkgeyAv");
    sb.append("LyBVTlRFU1QKICAgICAgICAgIGlmIChlS2V5IGluIHRyZWUpIHsKICAgICAgICAgICAgZGVsKHN1Yihz");
    sb.append("LCBlS2V5KSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWxldGUgdHJlZVtlS2V5XTsKICAgICAgICB9");
    sb.append("CiAgICAgICAgZGVsKHN1YihzLCBrZXkpKTsgLy8gaXNzdWUgYSBkZWxldGUgZm9yIGFsbCB0aGUgc3Vi");
    sb.append("c2NyaXB0aW9ucyBmb3IgdGhlIGtpZAogICAgICAgIGRlbGV0ZSB0cmVlW2tleV07IC8vIGRlbGV0ZSB0");
    sb.append("aGUgZGF0YSBpbiB0aGUgdHJlZQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0eXBlb2YgKG5leHQp");
    sb.append("ID09ICJvYmplY3QiICYmICFBcnJheS5pc0FycmF5KG5leHQpKSB7IC8vIGlmIHRoZSBkZWx0YSBpcyBh");
    sb.append("biBvYmplY3QKICAgICAgICAgIHZhciBhcnIgPSBBcnJheS5pc0FycmF5KHByaW9yKSB8fCAiQG8iIGlu");
    sb.append("IG5leHQgfHwgIkBzIiBpbiBuZXh0OyAvLyBkZXRlY3QgaWYgd2UgbmVlZCB0byB1c2UgYXJyYXkgbG9n");
    sb.append("aWMKICAgICAgICAgIGlmIChhcnIpIHsgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhcnJheQogICAgICAg");
    sb.append("ICAgICBpZiAoIShrZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSB0cmVlIGhhcyBh");
    sb.append("biBlbXB0eSBhcnJheQogICAgICAgICAgICAgIHRyZWVba2V5XSA9IFtdOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgIGlmICghKGVLZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSBzZWNy");
    sb.append("ZXQgZGF0YSBleGlzdHMgYXMgd2VsbAogICAgICAgICAgICAgIHRyZWVbZUtleV0gPSB7fTsKICAgICAg");
    sb.append("ICAgICAgICBpZiAoIkBvIiBpbiBuZXh0KSB7IC8vIGlmIHdlIGhhdmUgYSBidW5jaCBvZiBrZXlzLCB0");
    sb.append("aGVuIGxldCdzIG1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSB0aGF0IGZvciBtYWtlX2RlbHRhCiAgICAgICAg");
    sb.append("ICAgICAgICB0cmVlW2VLZXldWyJAbyJdID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("ICAgdHJlZVtlS2V5XS5fX2tleSA9IGtleTsgLy8gYW5ub3RhdGUgdGhlIG5ldyBpdGVtIHdpdGggdGhl");
    sb.append("IGdpdmVuIGtleQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBlQmFzZSA9IHRyZWVbZUtleV07");
    sb.append("IC8vIGdldCB0aGUgc2VjcmV0IChhbmQgcmVhbCkgZGF0YSBmb3IgdGhlIG9iamVjdCBpbiBxdWVzdGlv");
    sb.append("bgogICAgICAgICAgICB2YXIgZVN1YiA9IHN1YihzLCBrZXkpOyAvLyBzY29wZSB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIHRvIHRoZSBrZXkKICAgICAgICAgICAgdmFyIG9yZGVyaW5nID0gbnVsbDsgLy8gZGV0ZWN0aW9u");
    sb.append("IG9mIGlmIHdlIGhhdmUgQG8gb3JkZXJpbmcgdG8gcmVvcmRlciB0aGUgdmFsdWVzCiAgICAgICAgICAg");
    sb.append("IHZhciByZXNpemUgPSBudWxsOyAvLyBkZXRlY3Rpb24gb2YgYW4gYXJyYXkgd2l0aG91dCBfX2tleQog");
    sb.append("ICAgICAgICAgICB2YXIgZGVsYXkgPSB7fTsgLy8gd2UgZGVsYXkgYWxsIGV2ZW50cyBzdWNoIHRoYXQg");
    sb.append("dGhlIGFycmF5IGNhbiBiZSBidWlsdCBmb3IgaW5saW5lIG1ha2VfZGVsdGEgY2FsbHMgdG8gd29yawog");
    sb.append("ICAgICAgICAgICBmb3IgKHZhciBhS2V5IGluIG5leHQpIHsgLy8gZm9yIGVhY2ggZmllbGQgd2l0aGlu");
    sb.append("IHRoZSBkaWZmZXJlbmNlCiAgICAgICAgICAgICAgdmFyIHZhbCA9IG5leHRbYUtleV07CiAgICAgICAg");
    sb.append("ICAgICAgaWYgKGFLZXkgPT0gIkBvIikgeyAvLyB0aGUgdmFsdWUgaXMgYSBuZXcgb3JkZXJpbmcgb2Yg");
    sb.append("dGhlIGFycmF5CiAgICAgICAgICAgICAgICBvcmRlcmluZyA9IHZhbDsKICAgICAgICAgICAgICB9IGVs");
    sb.append("c2UgaWYgKGFLZXkgPT0gIkBzIikgeyAvLyB0aGUgdmFsdWUgaXMgYSByZXNpemUgb2YgdGhlIGFycmF5");
    sb.append("CiAgICAgICAgICAgICAgICByZXNpemUgPSB2YWw7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwg");
    sb.append("PT0gbnVsbCkgeyAvLyBkZWxldGUgdGhlIGVsZW1lbnQKICAgICAgICAgICAgICAgIGlmIChhS2V5IGlu");
    sb.append("IGVCYXNlKSB7IC8vIGlmIGl0IGV4aXN0cyB3aXRoaW4gdGhlIHNlY3JldCBrZXkKICAgICAgICAgICAg");
    sb.append("ICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICAgIGRlbChz");
    sb.append("dWIoZVN1YiwgeCkpOyAvLyBpc3N1ZSBkZWxldGVzCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVC");
    sb.append("YXNlW3hdOyAvLyBkZWxldGUgdGhlIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgZGVsX2tleShlU3Vi");
    sb.append("LCB4KTsgLy8gZGVsZXRlIHRoZSBrZXlzIGZyb20gdGhlIG9iamVjdAogICAgICAgICAgICAgICAgICAg");
    sb.append("IGZpcmVfZGVsKGVTdWIsIHgpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHdlIGhhdmUgZGF0YQogICAgICAgICAgICAgICAgaWYgKCEo");
    sb.append("YUtleSBpbiBlQmFzZSkpIHsgLy8gdGhlIGRhdGEgZGlkbid0IGV4aXN0LCBzbyBmaXJlIGFuIGFkZGl0");
    sb.append("aW9uIHRvIGV4dGVuZCB0aGUgc3Vic2NyaXB0aW9ucwogICAgICAgICAgICAgICAgICBmaXJlX2FkZChl");
    sb.append("U3ViLCBhS2V5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBuVmFsID0gbmV4");
    sb.append("dFthS2V5XTsgLy8gZ2V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKG5W");
    sb.append("YWwpID09ICJvYmplY3QiKSB7IC8vIGlmIHRoZSBuZXcgdmFsdWUgaXMgYW4gb2JqZWN0CiAgICAgICAg");
    sb.append("ICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRoZW4gbWFrZSBzdXJlIHRoZSBuZXcg");
    sb.append("aXRlbSBpcyB3aXRoaW4gdGhlIHNlY3JldCB0cmVlCiAgICAgICAgICAgICAgICAgICAgZUJhc2VbYUtl");
    sb.append("eV0gPSB7fTsKICAgICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XS5fX2tleSA9IGFLZXk7CiAgICAg");
    sb.append("ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkg");
    sb.append("ewogICAgICAgICAgICAgICAgICAgIG1lcmdlKGVCYXNlW3hdLCBuZXh0W3hdLCBzdWIoZVN1YiwgeCks");
    sb.append("IGV2ZW50cywgb3B0aW1hbCk7IC8vIHJlY3Vyc2U6IG1lcmdlIHRoZSBkaWZmZXJlbmNlIGludG8gdGhl");
    sb.append("IHNlY3JldCB0cmVlIGFuZCBwdWJsaXNoIHRvIGFsbCBlbGVtZW50IHN1YnNjcmlwdGlvbnMKICAgICAg");
    sb.append("ICAgICAgICAgICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAg");
    sb.append("ICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIHNldCB0aGUg");
    sb.append("dmFsdWUgaW50byB0aGUgdHJlZQogICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XSA9IG5WYWw7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIGRlbGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAg");
    sb.append("ICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAgICAgICAgICAg");
    sb.append("IH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBhbmQgdGVsbCBldmVyeW9uZSB0");
    sb.append("aGUgbmV3IHZhbHVlIGZvciB0aGlzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIHZhciBiZWZvcmUgPSB0cmVlW2tleV07IC8vIHN0YXNoIGEgcG9pbnRlciB0byB0aGUgYXJyYXkK");
    sb.append("ICAgICAgICAgICAgdmFyIGRlbGF5T3JkZXIgPSBbXTsKCiAgICAgICAgICAgIGlmIChvcmRlcmluZyAh");
    sb.append("PSBudWxsKSB7IC8vIGFuIG9yZGVyaW5nIGNoYW5nZSBpcyBoYXBwZW5pbmcKICAgICAgICAgICAgICB2");
    sb.append("YXIgYWZ0ZXIgPSBbXTsgLy8gd2Ugd2lsbCByZWJ1aWxkIHRoZSBhcnJheSBoZXJlCiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOyAvLyBhbmQgcmVjb3JkIHRoZSBrZXlzIGhlcmUKICAgICAgICAgICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IG9yZGVyaW5nLmxlbmd0aDsgaysrKSB7IC8vIGZvciBlYWNoIG9yZGVy");
    sb.append("aW5nIGluc3RydWN0aW9uCiAgICAgICAgICAgICAgICB2YXIgaW5zdHIgPSBvcmRlcmluZ1trXTsKICAg");
    sb.append("ICAgICAgICAgICAgIHZhciB0eXBlX2luc3RyID0gdHlwZW9mIChpbnN0cik7CiAgICAgICAgICAgICAg");
    sb.append("ICBpZiAodHlwZV9pbnN0ciA9PSAic3RyaW5nIiB8fCB0eXBlX2luc3RyID09ICJudW1iZXIiKSB7IC8v");
    sb.append("IGlmIHRoZSBpbnN0cnVjdGlvbiByZWZlcnMgdG8gYW4gaXRlbQogICAgICAgICAgICAgICAgICBhZnRl");
    sb.append("ci5wdXNoKGVCYXNlW2luc3RyXSk7IC8vIHB1c2ggdGhlIGl0ZW0gaW50byB0aGUgbmV3IGFycmF5CiAg");
    sb.append("ICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgaW5zdHIpOyAvLyByZWNvcmQgdGhlIGtleSBvZiB0");
    sb.append("aGUgaXRlbQogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCB0aGUgaW5zdHJ1Y3Rp");
    sb.append("b24gaXMgYSByYW5nZQogICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBpbnN0clswXTsKICAgICAg");
    sb.append("ICAgICAgICAgICAgdmFyIGVuZCA9IGluc3RyWzFdOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBq");
    sb.append("ID0gc3RhcnQ7IGogPD0gZW5kOyBqKyspIHsgLy8gaXRlcmF0ZSBvdmVyIHRoZSByYW5nZSBhbmQgY29w");
    sb.append("eQogICAgICAgICAgICAgICAgICAgIGlmIChiZWZvcmVbal0pIHsKICAgICAgICAgICAgICAgICAgICAg");
    sb.append("IGFmdGVyLnB1c2goYmVmb3JlW2pdKTsgLy8gdGhlIGl0ZW1zIGZyb20gdGhlIHByZXZpb3VzIGNvcHkK");
    sb.append("ICAgICAgICAgICAgICAgICAgICAgIG1zZy5wdXNoKGJlZm9yZVtqXS5fX2tleSk7IC8vIGFuZCBhbm5v");
    sb.append("dGF0ZSB0aGUga2V5cwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWxheU9yZGVyLnB1c2go");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgIn4iKSwgbXNnLCBldmVu");
    sb.append("dHMpOyAvLyB0ZWxsIHN1YnNjcmlwdGlvbnMgYWJvdXQgdGhlIG5ldyBvcmRlcmluZwogICAgICAgICAg");
    sb.append("ICAgIH0pOwogICAgICAgICAgICAgIHRyZWVba2V5XSA9IGFmdGVyOwogICAgICAgICAgICB9IGVsc2Ug");
    sb.append("aWYgKHJlc2l6ZSAhPSBudWxsKSB7IC8vIGFsdGVybmF0aXZlbHksIGFuIGFycmF5IHdpdGhvdXQga2V5");
    sb.append("cyBpcyBiZWluZyByZXNpemVkCiAgICAgICAgICAgICAgdmFyIGFmdGVyID0gW107CiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOwogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcmVzaXplOyBr");
    sb.append("KyspIHsgLy8gd2UgcmVidWlsZCB0aGUgYXJyYXkKICAgICAgICAgICAgICAgIGFmdGVyW2tdID0gZUJh");
    sb.append("c2VbIiIgKyBrXTsKICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgayk7CiAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgIGRlbGF5T3JkZXIucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAg");
    sb.append("ICBmaXJlKHN1YihlU3ViLCAifiIpLCBtc2csIGV2ZW50cyk7IC8vIHRlbGwgc3Vic2NyaXB0aW9ucyBh");
    sb.append("Ym91dCB0aGUgbmV3IG9yZGVyaW5nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdHJlZVtr");
    sb.append("ZXldID0gYWZ0ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChhS2V5IGluIGRlbGF5KSB7");
    sb.append("CiAgICAgICAgICAgICAgZGVsYXlbYUtleV0oYUtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBkZWxheU9yZGVyLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAg");
    sb.append("ZGVsYXlPcmRlcltrXSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpcmUoZVN1YiwgdHJlZVtr");
    sb.append("ZXldLCBldmVudHMpOyAvLyB0ZWxsIGV2ZXJ5b25lIGFib3V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghKGtleSBpbiB0cmVlKSB8fCB0eXBlb2YgKHRyZWVba2V5");
    sb.append("XSkgIT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgICB0cmVlW2tleV0gPSB7fTsKICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICB2YXIgZSA9IHN1YihzLCBrZXkpOwogICAgICAgICAgICBtZXJnZSh0cmVlW2tl");
    sb.append("eV0sIG5leHQsIGUsIGV2ZW50cywgb3B0aW1hbCk7CiAgICAgICAgICAgIGZpcmUoZSwgdHJlZVtrZXld");
    sb.append("LCBldmVudHMpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7IC8vIG5vdCBhbiBvYmplY3QsIHNv");
    sb.append("IGl0IGlzIGEgdmFsdWUKICAgICAgICAgIHRyZWVba2V5XSA9IG5leHQ7IC8vIHN0YXNoIHRoZSBuZXcg");
    sb.append("dmFsdWUKICAgICAgICAgIGZpcmUoc3ViKHMsIGtleSksIG5leHQsIGV2ZW50cyk7IC8vIGFuZCB0ZWxs");
    sb.append("IGV2ZXJ5b25lIGFib3V0IGl0CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmaXJlKHMsIHRyZWUs");
    sb.append("IGV2ZW50cyk7CiAgfTsKCiAgdmFyIGZpcmVfZXZlbnRzID0gZnVuY3Rpb24gKGV2ZW50cykgewogICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBldmVudHMubGVuZ3RoOyBrKyspIHsKICAgICAgZXZlbnRzW2tdKCk7");
    sb.append("CiAgICB9CiAgfTsKCiAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICB0aGlzLnVwZGF0");
    sb.append("ZXMgPSAwOwogIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhKSB7CiAgICB0aGlzLnVwZGF0ZV9p");
    sb.append("bl9wcm9ncmVzcyA9IHRydWU7CiAgICB0aGlzLnVwZGF0ZXMrKzsKICAgIHZhciBhcnIgPSBbXTsgLy8g");
    sb.append("Y29udmVydCB0aGUgc3Vic2NyaXB0aW9ucyBpbnRvIGFuIGFycmF5CiAgICBmb3IgKHZhciBrIGluIGFs");
    sb.append("bF9zdWJzY3JpcHRpb25zKSB7CiAgICAgIGFyci5wdXNoKGFsbF9zdWJzY3JpcHRpb25zW2tdKTsKICAg");
    sb.append("IH0KICAgIHZhciBldmVudHMgPSBbXTsKICAgIG1lcmdlKHJvb3QsIGRlbHRhLCBhcnIsIGV2ZW50cywg");
    sb.append("ZmFsc2UpOyAvLyBleGVjdXRlIHRoZSBtZXJnZSBhbmQgZmlyZSBldmVudHMKICAgIGZpcmVfZXZlbnRz");
    sb.append("KGV2ZW50cyk7CiAgICB3aGlsZSAodGhpcy5zdWJzY3JpYmVfZGVsYXkubGVuZ3RoID4gMCkgewogICAg");
    sb.append("ICB2YXIgY29weSA9IHRoaXMuc3Vic2NyaWJlX2RlbGF5OwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eSA9IFtdOwogICAgICB2YXIgZmxhdCA9IFtdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNvcHku");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICBpZiAoIWNvcHlba10uYWJvcnRlZCkgewogICAgICAgICAgZmxh");
    sb.append("dC5wdXNoKGNvcHlba10uc3ViKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZXZlbnRzID0gW107CiAg");
    sb.append("ICAgIG1lcmdlKHt9LCBtYWtlX29wdGltYWxfZGVsdGEocm9vdCwgZmxhdCksIGZsYXQsIGV2ZW50cywg");
    sb.append("dHJ1ZSk7IC8vIGV4ZWN1dGUgdGhlIG1lcmdlIGFuZCBmaXJlIGV2ZW50cwogICAgICBmaXJlX2V2ZW50");
    sb.append("cyhldmVudHMpOwogICAgfQogICAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICAgIHNl");
    sb.append("dHRsZSgpOwogIH07CgogIC8vIGZpeCB0aGUgY2FsbGJhY2sgc3RydWN0dXJlIGZyb20gdGhlIHVzZXIn");
    sb.append("cyBoYXBweSBsYW5kIHRvIHRoZSByaWdvciBvZiB0aGUgZm9ybWF0IG5lZWRlZAogIHZhciB0cmFuc2Zv");
    sb.append("cm1fY2FsbGJhY2tfaW50b19zdWIgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHN1YikgewogICAgaWYgKEFy");
    sb.append("cmF5LmlzQXJyYXkoY2FsbGJhY2spKSB7IC8vIGlmIHRoZSBjYWxsYmFjayBpcyBhbiBhcnJheSwgdGhl");
    sb.append("biBmbGF0dGVuIHRoZSBhcnJheSBpbnRvIHRoZSBuZXcgb2JqZWN0CiAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgY2FsbGJhY2subGVuZ3RoOyBrKyspIHsKICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50");
    sb.append("b19zdWIoY2FsbGJhY2tba10sIHN1Yik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxs");
    sb.append("YmFjaykgPT0gIm9iamVjdCIpIHsgLy8gb2gsIHRoZSBjYWxsYmFjayBpcyBhbiBvYmplY3QKICAgICAg");
    sb.append("Zm9yICh2YXIga2V5IGluIGNhbGxiYWNrKSB7IC8vIGl0ZXJhdGUgb3ZlciBlYWNoIGtleQogICAgICAg");
    sb.append("IGlmIChrZXkgPT0gIkBlIikgeyAvLyBmb3JjZSB0aGUgZnVuY3Rpb25zIHRvIG1lcmdlIHRvZ2V0aGVy");
    sb.append("CiAgICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIoY2FsbGJhY2tba2V5XSwgc3ViKTsK");
    sb.append("ICAgICAgICB9IGVsc2UgeyAvLyBub3JtYWwgZmxvdwogICAgICAgICAgaWYgKCEoa2V5IGluIHN1Yikp");
    sb.append("IHsgLy8gZGl2ZSBpbnRvIHRoZSBvYmplY3QgYW5kIG1ha2Ugc3VyZSB0aGUgc3Vic2NyaXB0aW9uIGhh");
    sb.append("cyB0aGUgZmllbGQKICAgICAgICAgICAgc3ViW2tleV0gPSB7fTsKICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IHRyYW5zZm9ybV9jYWxsYmFja19pbnRvX3N1YihjYWxsYmFja1trZXldLCBzdWJba2V5XSk7IC8vIHJl");
    sb.append("Y3Vyc2UgYW5kIHBhaXIgdGhlIGV2ZW50cyB0byB0aGUgbmV3IHN1YnNjcmlwdGlvbgogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgKGNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iKSB7IC8v");
    sb.append("IGl0J3MgYSBmdW5jdGlvbgogICAgICBpZiAoISgiQGUiIGluIHN1YikpIHsgLy8gbGV0J3MgZW5zdXJl");
    sb.append("IHRoZXJlIGlzIGFuIGV2ZW50IGxpc3QKICAgICAgICBzdWJbIkBlIl0gPSBbY2FsbGJhY2tdOwogICAg");
    sb.append("ICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIGp1c3QgYWRkIGl0CiAgICAgICAgc3ViWyJAZSJdLnB1c2go");
    sb.append("Y2FsbGJhY2spOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gY29udmVydCB0aGUgdHJlZSB0byBhIGRl");
    sb.append("bHRhOyB0aGlzIHRyZWUgaXMgYXNzdW1lZCB0byBoYXZlIGJlZW4gbWVyZ2VkIGFscmVhZHkKICB2YXIg");
    sb.append("bWFrZV9kZWx0YSA9IGZ1bmN0aW9uIChzdCkgewogICAgdmFyIGRlbHRhID0ge307IC8vIHRoZSBkZWx0");
    sb.append("YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsgaW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhp");
    sb.append("biB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19r");
    sb.append("ZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQogICAgICB2YXIgdiA9IHN0W2tdOwogICAgICBpZiAo");
    sb.append("KCIjIiArIGspIGluIHN0KSB7IC8vIHRoZSByZXN1bHQgaXMgYW4gYXJyYXkKICAgICAgICB2YXIgcHYg");
    sb.append("PSBzdFsnIycgKyBrXTsKICAgICAgICB2YXIgZCA9IHt9OwogICAgICAgIGlmICgiQG8iIGluIHB2KSB7");
    sb.append("IC8vIGFuZCB3ZSBoYXZlIGEgc3BlY2lmaWMgb3JkZXJpbmcgdG8gbWVtb2l6ZQogICAgICAgICAgdmFy");
    sb.append("IG8gPSBbXTsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgeyAvLyBj");
    sb.append("b3B5IHRoZSBlbGVtZW50cyBmcm9tIHRoZSBhcnJheQogICAgICAgICAgICB2YXIgdmogPSB2W2pdOwog");
    sb.append("ICAgICAgICAgICBpZiAodmopIHsKICAgICAgICAgICAgICBkW3ZqLl9fa2V5XSA9IG1ha2VfZGVsdGEo");
    sb.append("dmopOyAvLyB1c2luZyB0aGUgX19rZXkgZW1iZWRkZWQgaW4gdGhlIG9iamVjdAogICAgICAgICAgICAg");
    sb.append("IG8ucHVzaCh2W2pdLl9fa2V5KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZFsi");
    sb.append("QG8iXSA9IG87CiAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlOyByZWNvcmQgdGhlIHNpemUgYXMg");
    sb.append("d2UgcmVjdXJzZQogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7CiAg");
    sb.append("ICAgICAgICAgIGRbIiIgKyBqXSA9IG1ha2VfZGVsdGEocHZbal0pOwogICAgICAgICAgfQogICAgICAg");
    sb.append("ICAgZFsiQHMiXSA9IHYubGVuZ3RoOwogICAgICAgIH0KICAgICAgICBkZWx0YVtrXSA9IGQ7CiAgICAg");
    sb.append("IH0gZWxzZSBpZiAodHlwZW9mICh2KSA9PSAib2JqZWN0IikgeyAvLyBpdCdzIGp1c3QgYW4gb2JqZWN0");
    sb.append("LCBzbyByZWN1cnNlIGRpcmVjdGx5CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHsKICAgICAg");
    sb.append("ICAgIHZhciBkID0ge307CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHYubGVuZ3RoOyBqKysp");
    sb.append("IHsKICAgICAgICAgICAgZFsiIiArIGpdID0gbWFrZV9kZWx0YSh2W2pdKTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIGRbIkBzIl0gPSB2Lmxlbmd0aDsKICAgICAgICAgIGRlbHRhW2tdID0gZDsKICAgICAgICB9");
    sb.append("IGVsc2UgewogICAgICAgICAgZGVsdGFba10gPSBtYWtlX2RlbHRhKHYpOwogICAgICAgIH0KICAgICAg");
    sb.append("fSBlbHNlIHsgLy8gZmluYWxseSwgaXQgaXMgYSB2YWx1ZSBzbyBqdXN0IHNldCBpdAogICAgICAgIGRl");
    sb.append("bHRhW2tdID0gdjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGRlbHRhOwogIH07CiAgdGhpcy5NYWtl");
    sb.append("RGVsdGEgPSBtYWtlX2RlbHRhOwoKICB2YXIgbWFrZV9vcHRpbWFsX2RlbHRhID0gZnVuY3Rpb24oc3Qs");
    sb.append("IHN1YnMpIHsKICAgIHZhciBmaWx0ZXIgPSB7fTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc3Vicy5s");
    sb.append("ZW5ndGg7IGsrKykgewogICAgICB2YXIgcyA9IHN1YnNba107CiAgICAgIGlmICh0eXBlb2YocykgPT0g");
    sb.append("ImZ1bmN0aW9uIikgewogICAgICAgIC8vIGZhbGxiYWNrIHdoZW4gdGhlIGhpZ2ggbGV2ZWwgaXMgYSBm");
    sb.append("dW5jdGlvbiAod2UgbmVlZCBpdCBhbGwhKQogICAgICAgIHJldHVybiBtYWtlX2RlbHRhKHN0KTsKICAg");
    sb.append("ICAgfSBlbHNlIGlmICh0eXBlb2YocykgPT0gIm9iamVjdCIpIHsKICAgICAgICBmb3IgKHZhciBqIGlu");
    sb.append("IHMpIHsKICAgICAgICAgIGZpbHRlcltqXSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAg");
    sb.append("ICB2YXIgbmV3X3N0ID0ge307IC8vIHRoZSBkZWx0YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsg");
    sb.append("aW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhpbiB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09");
    sb.append("ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19rZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQog");
    sb.append("ICAgICBpZiAoayBpbiBmaWx0ZXIpIHsKICAgICAgICBuZXdfc3Rba10gPSBzdFtrXTsKICAgICAgICBp");
    sb.append("ZiAoKCIjIiArIGspIGluIHN0KSB7CiAgICAgICAgICBuZXdfc3RbIiMiICsga10gPSBzdFsiIyIgKyBr");
    sb.append("XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtYWtlX2RlbHRhKG5ld19zdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdWJzY3JpYmVfZGVsYXkgPSBbXTsKCiAgLy8gYHN1YnNjcmliZWAgdGhlIGdpdmVu");
    sb.append("IHN0cnVjdHVyYWwgY2FsbGJhY2sKICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykg");
    sb.append("ewogICAgdmFyIHN1YiA9IHt9OwogICAgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViKGNhbGxiYWNr");
    sb.append("LCBzdWIpOyAgLy8gdHJhbnNmb3JtIHRoZSBjYWxsYmFjayBpbnRvIGEgc2FmZSBjYWxsYmFjawogICAg");
    sb.append("dmFyIFMgPSAiIiArIGlkKys7IC8vIGNyZWF0ZSBhbiBpZCBmb3IgdGhlIHN1YnNjcmlwdGlvbgogICAg");
    sb.append("YWxsX3N1YnNjcmlwdGlvbnNbU10gPSBzdWI7IC8vIHJlY29yZCB0aGUgc3Vic2NyaXB0aW9uCiAgICBp");
    sb.append("ZiAodGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MpIHsKICAgICAgdmFyIHNtID0ge307CiAgICAgIHNtLnN1");
    sb.append("YiA9IHN1YjsKICAgICAgc20uYWJvcnRlZCA9IGZhbHNlOwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eS5wdXNoKHNtKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHNtLmFib3J0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIGRlbGV0ZSBhbGxfc3Vic2NyaXB0aW9uc1tTXTsKICAgICAgfTsKICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHZhciBkZWx0YSA9IG1ha2Vfb3B0aW1hbF9kZWx0YShyb290LCBbc3ViXSk7CiAgICAg");
    sb.append("IHZhciBldmVudHMgPSBbXTsKICAgICAgbWVyZ2Uoe30sIGRlbHRhLCBbc3ViXSwgZXZlbnRzLCB0cnVl");
    sb.append("KTsgLy8gZXhlY3V0ZSB0aGUgY2FsbGJhY2sgbm93IG9uIGEgY2FsbGJhY2sgb2YgYWxsIGRhdGEgdG8g");
    sb.append("ZmlyZSBldmVudHMgYW5kIGZpbGwgdGhlIHN1YnNjcmlwdGlvbiBvYmplY3QKICAgICAgZmlyZV9ldmVu");
    sb.append("dHMoZXZlbnRzKTsKICAgICAgaWYgKHRoaXMudXBkYXRlcyA+IDApIHsKICAgICAgICBzZXR0bGUoKTsK");
    sb.append("ICAgICAgfQogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyAvLyByZXR1cm4gYSBtZXRob2QgdG8gdW5z");
    sb.append("dWJzY3JpYmUKICAgICAgICBkZWxldGUgYWxsX3N1YnNjcmlwdGlvbnNbU107CiAgICAgIH07CiAgICB9");
    sb.append("CiAgfTsKCiAgdGhpcy5hZGRfb25fc2V0dGxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBp");
    sb.append("ZCA9IHNldHRsZUlkKys7CiAgICBzZXR0bGVtZW50c1tpZF0gPSBjYWxsYmFjazsKICB9Owp9");
    return sb.toString();
  }
  public static final String DEBUGGER = new String(Base64.getDecoder().decode(make_debugger()), StandardCharsets.UTF_8);
  private static String make_debugger() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIFRoZSBBbWF6aW5nIEludGVybmFsIERlYnVnZ2VyIGZvciBSeEhUTUwgQ29ubmVjdGlvbiAqLwpB");
    sb.append("ZGFtYS5EZWJ1Z2dlciA9IChmdW5jdGlvbigpIHsKICB2YXIgc2VsZiA9IHt9OwogIHNlbGYuc2hvd24g");
    sb.append("PSBmYWxzZTsKICB2YXIgY29ubmVjdGlvbnMgPSB7fTsKICB2YXIgY3VycmVudCA9IG51bGw7CgogIC8q");
    sb.append("KiBIZWxwZXIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCAqLwogIHZhciBudWtl");
    sb.append("ID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAg");
    sb.append("d2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0g");
    sb.append("cGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwoKICAvKiogSGVscGVyIHwgY3JlYXRlIGEgc2ltcGxl");
    sb.append("IGVsZW1lbnQgd2l0aCB0aGUgZ2l2ZW4gY29udGVudCBhcyB0aGUgaW5uZXJIVE1MICovCiAgdmFyIHNp");
    sb.append("bXBsZSA9IGZ1bmN0aW9uKHRhZywgY29udGVudCkgewogICAgdmFyIGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KHRhZyk7CiAgICBkLmlubmVySFRNTCA9IGNvbnRlbnQ7CiAgICByZXR1cm4gZDsKICB9Cgog");
    sb.append("IHZhciBidXR0b25TdHlsZSA9ICJiYWNrZ3JvdW5kOiMzMzM7IGJvcmRlcjogMXB4IHNvbGlkICNmMDA7");
    sb.append("IGNvbG9yOiNmZmY7IHBhZGRpbmc6M3B4OyBtYXJnaW46M3B4OyBib3JkZXItcmFkaXVzOiAzcHg7IjsK");
    sb.append("ICB2YXIgaW5wdXRTdHlsZSA9ICJiYWNrZ3JvdW5kOiNlZWU7IGNvbG9yOiMwMDA7IjsKICB2YXIgcGx1");
    sb.append("c1NWRyA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9u");
    sb.append("ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjNzdk");
    sb.append("NjU2XCIgc3R5bGU9XCJ3aWR0aDoxOHB4OyBoZWlnaHQ6MThweDtcIj48cGF0aCBzdHJva2UtbGluZWNh");
    sb.append("cD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTEyIDl2Nm0zLTNIOW0xMiAw");
    sb.append("YTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+PC9zdmc+IjsKICB2YXIgbWludXNTVkcgPSAi");
    sb.append("PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3");
    sb.append("Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2YwMFwiIHN0eWxl");
    sb.append("PVwid2lkdGg6MThweDsgaGVpZ2h0OjE4cHg7XCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwi");
    sb.append("IHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk0xNSAxMkg5bTEyIDBhOSA5IDAgMTEtMTggMCA5");
    sb.append("IDkgMCAwMTE4IDB6XCIgLz48L3N2Zz4iOwoKICAvLyB3ZSBhcmUgZ29pbmcgdG8gY3JlYXRlIGEgZG9j");
    sb.append("dW1lbnQKICB2YXIgdmlld0pzb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICB2YXIg");
    sb.append("dmlld0NoYW5uZWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgogIHZpZXdKc29uLnN0");
    sb.append("eWxlID0gImZvbnQtZmFtaWx5OiBcIkpldEJyYWlucyBNb25vXCIsIHNvdXJjZS1jb2RlLXBybywgTWVu");
    sb.append("bG8sIE1vbmFjbywgQ29uc29sYXMsIG1vbm9zcGFjZTsgZm9udC1zaXplOiAxNHB4OyBjb2xvcjogI2Zm");
    sb.append("ZjsgYmFja2dyb3VuZC1jb2xvcjogIzAwMDsgd2lkdGg6MTAwJSIKICB2aWV3Q2hhbm5lbHMuc3R5bGUg");
    sb.append("PSAiZm9udC1mYW1pbHk6IFwiSmV0QnJhaW5zIE1vbm9cIiwgc291cmNlLWNvZGUtcHJvLCBNZW5sbywg");
    sb.append("TW9uYWNvLCBDb25zb2xhcywgbW9ub3NwYWNlOyBmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjZmZmOyBi");
    sb.append("YWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB3aWR0aDoxMDAlIgoKICAvKiogUmVmbGVjdGlvbiB8IGdpdmVu");
    sb.append("IGEgcmVmbGVjdGVkIHR5cGUsIGV4dHJhY3QgdGhlIHN0cnVjdHVyZSB0eXBlICoqLwogIHZhciBleHRy");
    sb.append("YWN0U3RydWN0dXJlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIHR5cGVzKSB7CiAgICBpZiAodHlwZS5uYXR1");
    sb.append("cmUgPT0gInJlYWN0aXZlX3JlZiIgfHwgdHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV9yZWYiKSB7CiAgICAg");
    sb.append("IHJldHVybiBleHRyYWN0U3RydWN0dXJlVHlwZSh0eXBlc1t0eXBlLnJlZl0sIHR5cGVzKTsKICAgIH0K");
    sb.append("ICAgIGlmICh0eXBlLm5hdHVyZSA9PSAicmVhY3RpdmVfcmVjb3JkIiB8fCB0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIHJldHVybiB0eXBlOwogICAgfQogICAgcmV0dXJuIG51bGw7");
    sb.append("CiAgfQoKICAvKiogVHJlZVZpZXcgfCBHaXZlbiBhIHR5cGUgKGFuZCBhIHR5cGUgZm9yZXN0KSBjcmVh");
    sb.append("dGUgYSAnbmFtZWQnIGRvbSBlbGVtZW50CiAgICogIGFsb25nIHdpdGggYW4gdXBkYXRlIGRlbHRhLiBU");
    sb.append("aGUgdXBkYXRlIGRlbHRhIGlzIGEgZnVuY3Rpb25hbCAob3Igc3RydWN0dXJhbCBmdW5jdGlvbmFsKQog");
    sb.append("ICAqICBjbG9zdXJlIHRoYXQgd2lsbCB1cGRhdGUgdGhlIGRvbSBlbGVtZW50IHN1Y2ggdGhhdCBpdCBj");
    sb.append("YW4gYmUgYXR0YWNoZWQgdG8gYW4gQWRhbWEgVHJlZSAqLwogIHZhciBjb252ZXJ0VHlwZVRvRG9tRGVs");
    sb.append("dGEgPSBmdW5jdGlvbih0eXBlLCB0eXBlcykgewogICAgaWYgKHR5cGUubmF0dXJlID09ICJyZWFjdGl2");
    sb.append("ZV9yZWYiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfcmVmIikgewogICAgICAvLyBnbyB0byB0aGUg");
    sb.append("Zm9yZXN0IGFuZCB0dXJuIHRoZSByZWYgaW50byBhIG1hbmlmZXN0ZWQgdHlwZQogICAgICByZXR1cm4g");
    sb.append("Y29udmVydFR5cGVUb0RvbURlbHRhKHR5cGVzW3R5cGUucmVmXSwgdHlwZXMpOwogICAgfQogICAgaWYg");
    sb.append("KHR5cGUubmF0dXJlID09ICJuYXRpdmVfbWF5YmUiIHx8IHR5cGUubmF0dXJlID09ICJyZWFjdGl2ZV9t");
    sb.append("YXliZSIpIHsKICAgICAgLy8gYSBtYXliZSBpcyBqdXN0IGEgd3JhcHBlciBhcm91bmQgYW5vdGhlciB0");
    sb.append("eXBlIHRoYXQgY2FuIG51bGwgb3V0CiAgICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJzcGFuIik7CiAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZS50eXBl");
    sb.append("LCB0eXBlcyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOiBkb20sCiAgICAgICAgbmFtZTogIm1h");
    sb.append("eWJlJmx0OyIgKyByZXN1bHQubmFtZSArICImZ3Q7IiwKICAgICAgICB1cGRhdGU6IFtyZXN1bHQudXBk");
    sb.append("YXRlLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgbnVrZShkb20pOwogICAgICAgICAgaWYgKHZh");
    sb.append("bHVlID09IG51bGwpIHsKICAgICAgICAgICAgZG9tLmlubmVySFRNTCA9ICI8aT5udWxsPC9pPiI7CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb20uYXBwZW5kKHJlc3VsdC5kb20pOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH1dCiAgICAgIH07CiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0gIm5hdGl2");
    sb.append("ZV9saXN0IiB8fCB0eXBlLm5hdHVyZSA9PSAibmF0aXZlX2FycmF5IikgewogICAgICAvLyB0aGlzIGlz");
    sb.append("IHRoZSBtb3N0IGNvbXBsZXggdHlwZSBhcyBpdCByZXF1aXJlcyBhIGRpZmZlcmVudGlhbCBzdHJ1Y3R1");
    sb.append("cmUuCgogICAgICAvLyB3ZSBjcmVhdGUgYSBkdW1teSB0byBnZXQgdGhlIG5hbWUgb2YgdGhlIHR5cGUK");
    sb.append("ICAgICAgdmFyIGR1bW15ID0gY29udmVydFR5cGVUb0RvbURlbHRhKHR5cGUudHlwZSwgdHlwZXMpOwoK");
    sb.append("ICAgICAgLy8gc28sIHdlIGhhdmUgdHdvIGNvbnNpZGVyYXRpb25zLiBGaXJzdCwgaXMgdGhpcyBhIGxp");
    sb.append("c3Qgb2Ygc3RydWN0dXJlcyBPUiBhIGxpc3Qgb2YgdmFsdWVzLgogICAgICB2YXIgcmVjb3JkVHlwZSA9");
    sb.append("IGV4dHJhY3RTdHJ1Y3R1cmVUeXBlKHR5cGUudHlwZSwgdHlwZXMpOwogICAgICBpZiAocmVjb3JkVHlw");
    sb.append("ZSAhPSBudWxsKSB7CiAgICAgICAgLy8gaXQgaXMgYSBsaXN0IG9mIHN0cnVjdHVyZXMsIHNvIHdlIHdh");
    sb.append("bnQgdG8gY3JlYXRlIGEgbmljZSBsb29raW5nIHRhYmxlIHdpdGggcGFnaW5hdGlvbiEKICAgICAgICB2");
    sb.append("YXIgdGFibGVDb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB2");
    sb.append("YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICB0YWJs");
    sb.append("ZUNvbnRyb2xzLmFwcGVuZChzaG93aGlkZSk7CgogICAgICAgIHZhciB0YWJsZUhvbGRlciA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CiAgICAgICAgdGFibGVDb250cm9scy5hcHBlbmQodGFi");
    sb.append("bGVIb2xkZXIpOwogICAgICAgIHZhciB0YWJsZUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo");
    sb.append("InRoZWFkIik7CiAgICAgICAgdGFibGVIb2xkZXIuYXBwZW5kKHRhYmxlSGVhZGVyKTsKICAgICAgICB2");
    sb.append("YXIgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5hcHBlbmQoaGVhZGVyUm93KTsKICAgICAgICB2YXIgY29sb3JTdHlsZSA9ICJib3JkZXI6IDFw");
    sb.append("eCBzb2xpZCAjM2I1NGRhOyI7CiAgICAgICAgZm9yICh2YXIgZmllbGROYW1lIGluIHJlY29yZFR5cGUu");
    sb.append("ZmllbGRzKSB7CiAgICAgICAgICB2YXIgZmllbGQgPSByZWNvcmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVd");
    sb.append("OwogICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBmaWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgIGNv");
    sb.append("bnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21E");
    sb.append("ZWx0YShmaWVsZC50eXBlLCB0eXBlcyk7CiAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJ0ZCIpOwogICAgICAgICAgdGQuaW5uZXJIVE1MID0gcmVzdWx0Lm5hbWUgKyAiICIgKyBm");
    sb.append("aWVsZE5hbWU7CiAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kKHRkKTsKICAgICAgICAgIHRkLnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZSArICJwYWRkaW5nLWxlZnQ6IDAuNWVtOyBwYWRkaW5nLXJpZ2h0OiAwLjVlbTsi");
    sb.append("CiAgICAgICAgfQogICAgICAgIHRhYmxlSG9sZGVyLnN0eWxlID0gY29sb3JTdHlsZSArICJwYWRkaW5n");
    sb.append("OiAwLjVlbTsgbWFyZ2luOjAuNWVtOyBkaXNwbGF5Om5vbmUiCiAgICAgICAgaGVhZGVyUm93LnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZTsKICAgICAgICB2YXIgdGFibGVCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgidGJvZHkiKTsKICAgICAgICB0YWJsZUhvbGRlci5hcHBlbmQodGFibGVCb2R5KTsKICAgICAgICB2");
    sb.append("YXIgcm93c0J5S2V5ID0ge307CiAgICAgICAgdmFyIHBhZ2luZyA9IHsKICAgICAgICAgIHNob3duOmZh");
    sb.append("bHNlLAogICAgICAgICAgb3JkZXI6W10sCiAgICAgICAgICBwYWdlOiAwLAogICAgICAgICAgcGFnZV9s");
    sb.append("aW1pdDogMTAsCiAgICAgICAgfTsKICAgICAgICB2YXIgY29udHJvbGxlciA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB0YWJsZUNvbnRyb2xzLmFwcGVuZChjb250cm9sbGVyKTsK");
    sb.append("ICAgICAgICBwYWdpbmcucmVmb3JtID1mdW5jdGlvbigpIHsKICAgICAgICAgIG51a2UodGFibGVCb2R5");
    sb.append("KTsKICAgICAgICAgIHZhciBzdGFydCA9IE1hdGgubWluKHRoaXMucGFnZSAqIHRoaXMucGFnZV9saW1p");
    sb.append("dCwgdGhpcy5vcmRlci5sZW5ndGggLSB0aGlzLnBhZ2VfbGltaXQpOwogICAgICAgICAgZm9yICh2YXIg");
    sb.append("YXQgPSBzdGFydDsgYXQgPCBzdGFydCArIHBhZ2luZy5wYWdlX2xpbWl0OyBhdCsrKSB7CiAgICAgICAg");
    sb.append("ICAgIHZhciByb3cgPSByb3dzQnlLZXlbcGFnaW5nLm9yZGVyW2F0XV07CiAgICAgICAgICAgIGlmIChy");
    sb.append("b3cpIHsKICAgICAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kKHJvdyk7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIG51a2UoY29udHJvbGxlcik7CiAgICAgICAgICBpZiAodGhpcy5zaG93");
    sb.append("bikgewogICAgICAgICAgICB2YXIgcGFnZXMgPSB0aGlzLm9yZGVyLmxlbmd0aCAvIHRoaXMucGFnZV9s");
    sb.append("aW1pdDsKICAgICAgICAgICAgaWYgKHBhZ2VzID4gMSkgewogICAgICAgICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgcGFnZXM7IGsrKykgewogICAgICAgICAgICAgICAgdmFyIGdvdG9QYWdlID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgICAgICAgICBnb3RvUGFnZS5zdHlsZSA9");
    sb.append("IGJ1dHRvblN0eWxlOwogICAgICAgICAgICAgICAgZ290b1BhZ2UuaW5uZXJIVE1MID0gIltQRzoiICsg");
    sb.append("ayArICJdIjsKICAgICAgICAgICAgICAgIGdvdG9QYWdlLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIHRoaXMucGFnaW5nLnBhZ2UgPSB0aGlzLnBnOwogICAgICAgICAgICAgICAg");
    sb.append("ICB0aGlzLnBhZ2luZy5yZWZvcm0oKTsKICAgICAgICAgICAgICAgIH0uYmluZCh7cGFnaW5nOiB0aGlz");
    sb.append("LCBwZzoga30pOwogICAgICAgICAgICAgICAgY29udHJvbGxlci5hcHBlbmQoZ290b1BhZ2UpOwogICAg");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2hvd2hpZGUuaW5u");
    sb.append("ZXJIVE1MID0gdGhpcy5zaG93biA/IG1pbnVzU1ZHIDogcGx1c1NWRzsKICAgICAgICAgIHNob3doaWRl");
    sb.append("Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5zaG93biA9ICF0aGlzLnNob3du");
    sb.append("OwogICAgICAgICAgICBpZiAodGhpcy5zaG93bikgewogICAgICAgICAgICAgIHRhYmxlSG9sZGVyLnN0");
    sb.append("eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMu");
    sb.append("cmVmb3JtKCk7CiAgICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgICAgfS5iaW5kKHBhZ2luZyk7CgoK");
    sb.append("ICAgICAgICByZXR1cm4gewogICAgICAgICAgZG9tOiB0YWJsZUNvbnRyb2xzLAogICAgICAgICAgbmFt");
    sb.append("ZTogImxpc3QmbHQ7IiArIGR1bW15Lm5hbWUgKyAiJmd0OyIsCiAgICAgICAgICB1cGRhdGU6IHsKICAg");
    sb.append("ICAgICAgICAgJysnOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgdmFyIHJvdyA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7CiAgICAgICAgICAgICAgcm93c0J5S2V5W2tleV0gPSByb3c7");
    sb.append("CiAgICAgICAgICAgICAgdmFyIGRlbHRhID0ge307CiAgICAgICAgICAgICAgZm9yICh2YXIgZmllbGRO");
    sb.append("YW1lIGluIHJlY29yZFR5cGUuZmllbGRzKSB7CiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSByZWNv");
    sb.append("cmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBm");
    sb.append("aWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShmaWVsZC50");
    sb.append("eXBlLCB0eXBlcyk7CiAgICAgICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJ0ZCIpOwogICAgICAgICAgICAgICAgdGQuc3R5bGUgPSBjb2xvclN0eWxlICsgInBhZGRpbmc6IDAu");
    sb.append("MjVlbTsgdGV4dC1hbGlnbjp0b3AiOwogICAgICAgICAgICAgICAgdGQuYXBwZW5kKHJlc3VsdC5kb20p");
    sb.append("OwogICAgICAgICAgICAgICAgcm93LmFwcGVuZCh0ZCk7CiAgICAgICAgICAgICAgICBkZWx0YVtmaWVs");
    sb.append("ZE5hbWVdID0gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJu");
    sb.append("IGRlbHRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnLSc6IGZ1bmN0aW9uIChrZXkpIHsKICAg");
    sb.append("ICAgICAgICAgICB2YXIgZG9tID0gcm93c0J5S2V5W2tleV07CiAgICAgICAgICAgICAgdGFibGVCb2R5");
    sb.append("LnJlbW92ZShkb20pOwogICAgICAgICAgICAgIGRlbGV0ZSByb3dzQnlLZXlba2V5XTsKICAgICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAgICAgICBpZiAo");
    sb.append("b3JkZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcGFnaW5nLm9yZGVyID0gb3JkZXI7CiAgICAg");
    sb.append("ICAgICAgICAgICBwYWdpbmcucmVmb3JtKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIG5vdCBhIHJlY29yZCwg");
    sb.append("c28gd2UgdXNlIGEgc2ltcGxlIGxpc3QKICAgICAgICB2YXIgbGlzdEhvbGRlciA9IGRvY3VtZW50LmNy");
    sb.append("ZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHZhciBkb21CeUtleSA9IHt9OwogICAgICAgIHJldHVy");
    sb.append("biB7CiAgICAgICAgICBkb206IGxpc3RIb2xkZXIsCiAgICAgICAgICBuYW1lOiAibGlzdDwiICsgZHVt");
    sb.append("bXkubmFtZSArICI+IiwKICAgICAgICAgIHVwZGF0ZTogewogICAgICAgICAgICAnKyc6IGZ1bmN0aW9u");
    sb.append("IChrZXkpIHsKICAgICAgICAgICAgICB2YXIgaXRlbUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoInNwYW4iKTsKICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udmVydFR5cGVUb0RvbURlbHRh");
    sb.append("KHR5cGUudHlwZSwgdHlwZXMpOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHJlc3VsdC5k");
    sb.append("b20pOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHNpbXBsZSgic3BhbiIsICIsICIpKTsK");
    sb.append("ICAgICAgICAgICAgICBkb21CeUtleVtrZXldID0gaXRlbUhvbGRlcjsKICAgICAgICAgICAgICByZXR1");
    sb.append("cm4gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJy0nOiBmdW5jdGlvbiAo");
    sb.append("a2V5KSB7CiAgICAgICAgICAgICAgdmFyIGRvbSA9IGRvbUJ5S2V5W2tleV07CiAgICAgICAgICAgICAg");
    sb.append("bGlzdEhvbGRlci5yZW1vdmUoZG9tKTsKICAgICAgICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsK");
    sb.append("ICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlLm5hdHVy");
    sb.append("ZSA9PSAicmVhY3RpdmVfdmFsdWUiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfdmFsdWUiKSB7CiAg");
    sb.append("ICAgIC8vIGl0J3MganVzdCBkYXRhLCBzbyBjcmVhdGUgYSBzaW5nbGUgbm9kZSB0byBkcmF3IGl0CiAg");
    sb.append("ICAgIHZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICBpdGVtLmlu");
    sb.append("bmVySFRNTCA9ICJudWxsIjsKICAgICAgaXRlbS5zdHlsZSA9ICJjb2xvcjogIzc3YTVmZjsiOwogICAg");
    sb.append("ICB2YXIgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZTsgfTsK");
    sb.append("ICAgICAgaWYgKHR5cGUudHlwZSA9PSAic3RyaW5nIikgewogICAgICAgIGl0ZW0uc3R5bGUgPSAiY29s");
    sb.append("b3I6ICM3N2Q2NTYiOwogICAgICAgIHVwZGF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW0uaW5uZXJI");
    sb.append("VE1MID0gIlwiIiArIHZhbHVlICsgIlwiIjsgfTsKICAgICAgfSBlbHNlIGlmICh0eXBlLnR5cGUgPT0g");
    sb.append("InByaW5jaXBhbCIpIHsKICAgICAgICBpdGVtLnN0eWxlID0gImNvbG9yOiAjQkE4M0ZGOyI7CiAgICAg");
    sb.append("ICAgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZSAhPSBudWxs");
    sb.append("ID8gKHZhbHVlLmFnZW50ICsgIkAiICsgdmFsdWUuYXV0aG9yaXR5KSA6ICJudWxsIjsgfTsKICAgICAg");
    sb.append("fSBlbHNlIGlmICh0eXBlLnR5cGUgPT0gImJvb2wiKSB7CiAgICAgICAgaXRlbS5zdHlsZSA9ICJjb2xv");
    sb.append("cjogI0U4M0IzQjsiOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOml0ZW0sCiAgICAg");
    sb.append("ICAgbmFtZTogdHlwZS50eXBlLAogICAgICAgIHVwZGF0ZTogdXBkYXRlCiAgICAgIH07CiAgICB9CiAg");
    sb.append("ICBpZiAodHlwZS5uYXR1cmUgPT0gInJlYWN0aXZlX3JlY29yZCIgfHwgdHlwZS5uYXR1cmUgPT0gIm5h");
    sb.append("dGl2ZV9tZXNzYWdlIikgewogICAgICAvLyBpdCdzIGEgc3RydWN0dXJlLCBzbyBsZXQncyBjcmVhdGUg");
    sb.append("YSByZWNvcmQgdGhhdCBjYW4gc2hvdy9oaWRlCiAgICAgIHZhciBvYmpfaG9sZGVyID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICB2YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJidXR0b24iKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoc2hvd2hpZGUpOwogICAgICBv");
    sb.append("YmpfaG9sZGVyLnNob3dHcm91cCA9IHR5cGUubmFtZSAhPSAiUm9vdCI7CgogICAgICB2YXIgZ3JvdXAg");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoZ3Jv");
    sb.append("dXApOwogICAgICBncm91cC5hcHBlbmQoc2ltcGxlKCJkaXYiLCAieyIpKTsKICAgICAgdmFyIGNoaWxk");
    sb.append("cmVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKICAgICAgZ3JvdXAuYXBwZW5kKGNoaWxk");
    sb.append("cmVuKTsKICAgICAgZ3JvdXAuYXBwZW5kKHNpbXBsZSgiZGl2IiwgIn0iKSk7CiAgICAgIGdyb3VwLnN0");
    sb.append("eWxlID0gInBhZGRpbmctbGVmdDoxMHB4IjsKICAgICAgY2hpbGRyZW4uc3R5bGUgPSAicGFkZGluZy1s");
    sb.append("ZWZ0OjEwcHg7IjsKICAgICAgc2hvd2hpZGUub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgIG9i");
    sb.append("al9ob2xkZXIuc2hvd0dyb3VwID0gISBvYmpfaG9sZGVyLnNob3dHcm91cDsKICAgICAgICBpZiAob2Jq");
    sb.append("X2hvbGRlci5zaG93R3JvdXApIHsKICAgICAgICAgIGdyb3VwLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAg");
    sb.append("ICAgICAgIHNob3doaWRlLmlubmVySFRNTCA9IG1pbnVzU1ZHOwogICAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgICBncm91cC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgc2hvd2hpZGUuaW5uZXJI");
    sb.append("VE1MID0gcGx1c1NWRzsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNob3doaWRlLm9uY2xpY2soKTsK");
    sb.append("CiAgICAgIHZhciBkZWx0YSA9IHt9OwogICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gdHlwZS5maWVs");
    sb.append("ZHMpIHsKICAgICAgICB2YXIgZmllbGQgPSB0eXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgIGlm");
    sb.append("ICgicHJpdmF0ZSIgPT0gZmllbGQucHJpdmFjeSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAg");
    sb.append("fQogICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEoZmllbGQudHlwZSwgdHlw");
    sb.append("ZXMpOwogICAgICAgIHZhciBmaWVsZERvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7CiAg");
    sb.append("ICAgICAgZmllbGREb20uYXBwZW5kKHNpbXBsZSgic3BhbiIsICBmaWVsZC5wcml2YWN5ICsgIiAiICsg");
    sb.append("cmVzdWx0Lm5hbWUgKyAiICIgKyBmaWVsZE5hbWUgKyAiID0gIikpOwogICAgICAgIGZpZWxkRG9tLmFw");
    sb.append("cGVuZChyZXN1bHQuZG9tKTsKICAgICAgICBjaGlsZHJlbi5hcHBlbmQoZmllbGREb20pOwogICAgICAg");
    sb.append("IGRlbHRhW2ZpZWxkTmFtZV0gPSByZXN1bHQudXBkYXRlOwogICAgICB9CiAgICAgIHJldHVybiB7CiAg");
    sb.append("ICAgICAgZG9tOiBvYmpfaG9sZGVyLAogICAgICAgIG5hbWU6IHR5cGUubmFtZSwKICAgICAgICB1cGRh");
    sb.append("dGU6ZGVsdGEKICAgICAgfTsKICAgIH0KICAgIHZhciB1bmtub3duID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICB1bmtub3duLmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KHR5cGUpOwog");
    sb.append("ICAgcmV0dXJuIHtkb206IHVua25vd24sIHVwZGF0ZTogZnVuY3Rpb24oKSB7fX07CiAgfTsKCiAgc2Vs");
    sb.append("Zi5mb3JtSWRHZW4gPSAwOwogIHZhciBuZXh0Rm9ybUlkID0gZnVuY3Rpb24oKSB7CiAgICBzZWxmLmZv");
    sb.append("cm1JZEdlbisrOwogICAgcmV0dXJuIHNlbGYuZm9ybUlkR2VuOwogIH07CiAgdmFyIGZpbGxPdXRGb3Jt");
    sb.append("Rm9yVHlwZSA9IGZ1bmN0aW9uKGRvbSwgbmFtZSwgdHlwZSwgdHlwZXMpIHsKICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX3JlZiIpIHsKICAgICAgZmlsbE91dEZvcm1Gb3JUeXBlKGRvbSwgbmFtZSwg");
    sb.append("dHlwZXNbdHlwZS5yZWZdLCB0eXBlcyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIGZvciAodmFyIGZpZWxkIGluIHR5cGUuZmll");
    sb.append("bGRzKSB7CiAgICAgICAgdmFyIGZpZWxkVHlwZSA9IHR5cGUuZmllbGRzW2ZpZWxkXS50eXBlOwogICAg");
    sb.append("ICAgIHZhciBmaWVsZEhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAg");
    sb.append("IGZpbGxPdXRGb3JtRm9yVHlwZShmaWVsZEhvbGRlciwgbmFtZSA9PSAiIiA/IGZpZWxkIDogKG5hbWUg");
    sb.append("KyAiLiIgKyBmaWVsZCksIGZpZWxkVHlwZSwgdHlwZXMpOwogICAgICAgIGRvbS5hcHBlbmQoZmllbGRI");
    sb.append("b2xkZXIpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX2FycmF5IikgewogICAgICAvLyBUT0RPCiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0g");
    sb.append("Im5hdGl2ZV9tYXliZSIpIHsKICAgICAgdmFyIG1heWJlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVs");
    sb.append("Iik7CiAgICAgIGxhYmVsLmlubmVySFRNTCA9ICJlbmFibGUgIiArIG5hbWU7CiAgICAgIHZhciBjaGVj");
    sb.append("a2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGNoZWNrYm94LnR5cGUg");
    sb.append("PSAiY2hlY2tib3giOwogICAgICBjaGVja2JveC5pZCA9IG5leHRGb3JtSWQoKTsKICAgICAgY2hlY2ti");
    sb.append("b3gubmFtZSA9ICIiOwogICAgICBsYWJlbC5odG1sRm9yID0gY2hlY2tib3guaWQ7CiAgICAgIHZhciBt");
    sb.append("YXliZVZhbHVlUmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBtYXli");
    sb.append("ZVZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGZpbGxPdXRGb3JtRm9y");
    sb.append("VHlwZShtYXliZVZhbHVlLCBuYW1lLCB0eXBlLnR5cGUsIHR5cGVzKTsKICAgICAgbWF5YmVIb2xkZXIu");
    sb.append("YXBwZW5kKGxhYmVsKTsKICAgICAgbWF5YmVIb2xkZXIuYXBwZW5kKGNoZWNrYm94KTsKICAgICAgbWF5");
    sb.append("YmVIb2xkZXIuYXBwZW5kKG1heWJlVmFsdWVSZWYpOwogICAgICBkb20uYXBwZW5kKG1heWJlSG9sZGVy");
    sb.append("KTsKICAgICAgY2hlY2tib3gub25jaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBudWtlKG1heWJl");
    sb.append("VmFsdWVSZWYpOwogICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7CiAgICAgICAgICBtYXliZVZh");
    sb.append("bHVlUmVmLmFwcGVuZChtYXliZVZhbHVlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybjsK");
    sb.append("ICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAibmF0aXZlX3ZhbHVlIikgewogICAgICB2YXIgbGFi");
    sb.append("ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwogICAgICB2YXIgaW5wdXQgPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoKICAgICAgaW5wdXQuaWQgPSAiZGVidWdnZXJfZm9y");
    sb.append("bV9pZF8iICsgbmV4dEZvcm1JZCgpOwogICAgICBsYWJlbC5pbm5lckhUTUwgPSBuYW1lOwogICAgICBp");
    sb.append("bnB1dC5uYW1lID0gbmFtZTsKICAgICAgaW5wdXQuc3R5bGUgPSBpbnB1dFN0eWxlOwogICAgICBpbnB1");
    sb.append("dC50eXBlID0gInRleHQiOwogICAgICBsYWJlbC5mb3JIdG1sID0gaW5wdXQuaWQ7CiAgICAgIGRvbS5h");
    sb.append("cHBlbmQobGFiZWwpOwogICAgICBkb20uYXBwZW5kKGlucHV0KTsKICAgICAgcmV0dXJuOwogICAgfQog");
    sb.append("ICAgZG9tLmlubmVySFRNTCA9IG5hbWUgKyAiLS0+IiArIEpTT04uc3RyaW5naWZ5KHR5cGUpOwogIH07");
    sb.append("CgogIHZhciBtYWtlQ2hhbm5lbERlYnVnZ2VyID0gZnVuY3Rpb24oY2hhbm5lbHMsIHR5cGVzLCBjb25u");
    sb.append("ZWN0aW9uKSB7CiAgICB2YXIgc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3Qi");
    sb.append("KTsKICAgIHNlbGVjdG9yLnN0eWxlID0gImJhY2tncm91bmQ6ICMzMzM7IGNvbG9yOiNmZmY7IjsKICAg");
    sb.append("IHZpZXdDaGFubmVscy5hcHBlbmQoc2VsZWN0b3IpOwogICAgdmFyIGZvcm1Ib2xkZXIgPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHZpZXdDaGFubmVscy5hcHBlbmQoZm9ybUhvbGRlcik7");
    sb.append("CiAgICB2YXIgY2hvb3NlID0gZnVuY3Rpb24oY2hhbm5lbCkgewogICAgICBudWtlKGZvcm1Ib2xkZXIp");
    sb.append("OwogICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTsKICAgICAgZm9y");
    sb.append("bUhvbGRlci5hcHBlbmQoZm9ybSk7CiAgICAgIHZhciB0eXBlID0gdHlwZXNbY2hhbm5lbHNbY2hhbm5l");
    sb.append("bF1dOwogICAgICBmaWxsT3V0Rm9ybUZvclR5cGUoZm9ybSwgIiIsIHR5cGUsIHR5cGVzKTsKCiAgICAg");
    sb.append("IHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgYnV0dG9u");
    sb.append("LnN0eWxlID0gYnV0dG9uU3R5bGU7CiAgICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQp");
    sb.append("IHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciBtZXNzYWdlID0gUnhI");
    sb.append("VE1MLkJ1aWxkRm9ybU9iamVjdChmb3JtKTsKICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlNlbmRp");
    sb.append("bmciOwogICAgICAgIGNvbnNvbGUubG9nKGNoYW5uZWwgKyAiOiIgKyBKU09OLnN0cmluZ2lmeShtZXNz");
    sb.append("YWdlKSk7CiAgICAgICAgY29ubmVjdGlvbi5zZW5kKGNoYW5uZWwsIG1lc3NhZ2UsIHsKICAgICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlN1Y2Nl");
    sb.append("c3MhIFNlbmQgQW5vdGhlciEiOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9u");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIltGYWlsZWQ6IiArIHJlYXNv");
    sb.append("biArICJdLCBUcnkgQWdhaW4iOwogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICB9OwogICAgICBi");
    sb.append("dXR0b24uaW5uZXJIVE1MID0gIlNlbmQiOwogICAgICBmb3JtLmFwcGVuZChidXR0b24pOwogICAgICAv");
    sb.append("LyBCdWlsZEZvcm1PYmplY3QKICAgIH07CiAgICB2YXIgZmlyc3QgPSBudWxsOwogICAgdmFyIGNoYW5u");
    sb.append("ZWxzU29ydGVkID0gW107CiAgICBmb3IgKHZhciBjaCBpbiBjaGFubmVscykgewogICAgICBjaGFubmVs");
    sb.append("c1NvcnRlZC5wdXNoKGNoKTsKICAgIH0KICAgIGNoYW5uZWxzU29ydGVkLnNvcnQoKTsKICAgIGZvciAo");
    sb.append("dmFyIGsgaW4gY2hhbm5lbHNTb3J0ZWQpIHsKICAgICAgdmFyIGNoID0gY2hhbm5lbHNTb3J0ZWRba107");
    sb.append("CiAgICAgIGlmIChmaXJzdCA9PSBudWxsKSB7CiAgICAgICAgZmlyc3QgPSBjaDsKICAgICAgfQogICAg");
    sb.append("ICB2YXIgbXNnVHlwZSA9IGNoYW5uZWxzW2NoXTsKICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQuaW5uZXJIVE1MID0gY2ggKyAiIDogIiArIG1zZ1R5");
    sb.append("cGU7CiAgICAgIG9wdC5sYWJlbCA9IGNoICsgIiA6ICIgKyBtc2dUeXBlOwogICAgICBvcHQudmFsdWUg");
    sb.append("PSBjaDsKICAgICAgc2VsZWN0b3IuYXBwZW5kKG9wdCk7CiAgICAgIHNlbGVjdG9yLm9uY2hhbmdlID0g");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICAgICAgY2hvb3NlKHNlbGVjdG9yLnZhbHVlKTsKICAgICAgfTsKICAgIH0K");
    sb.append("CiAgICBpZiAoZmlyc3QgIT0gbnVsbCkgewogICAgICBjaG9vc2UoZmlyc3QpOwogICAgfQogIH07Cgog");
    sb.append("IHZhciByZW5kZXIgPSBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tuYW1l");
    sb.append("XTsKICAgIGlmIChjby5yZW5kZXJlZCA9PSBjby5ib3VuZCkgewogICAgICByZXR1cm47CiAgICB9CiAg");
    sb.append("ICBjby5yZW5kZXJlZCA9IGNvLmJvdW5kOwogICAgY28uZGVidWdfdHJlZS5udWtlKCk7CiAgICBudWtl");
    sb.append("KHZpZXdKc29uKTsKICAgIG51a2Uodmlld0NoYW5uZWxzKTsKCiAgICB2YXIgaGFuZGxlciA9IHsKICAg");
    sb.append("ICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAvLyBoYW5kbGUgdGhlIGRhdGEg");
    sb.append("aW5zcGVjdG9yIHRhYgogICAgICAgIHZhciByZWZsZWN0aW9uID0gcGF5bG9hZC5yZWZsZWN0aW9uOwog");
    sb.append("ICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEocmVmbGVjdGlvbi50eXBlc1si");
    sb.append("X19Sb290Il0sIHJlZmxlY3Rpb24udHlwZXMpOwogICAgICAgIHZpZXdKc29uLmFwcGVuZChyZXN1bHQu");
    sb.append("ZG9tKTsKICAgICAgICBjby5kZWJ1Z190cmVlLnN1YnNjcmliZShyZXN1bHQudXBkYXRlKTsKICAgICAg");
    sb.append("ICAvLyBoYW5kbGUgdGhlIGNoYW5uZWxzIHRhYgogICAgICAgIG1ha2VDaGFubmVsRGVidWdnZXIocmVm");
    sb.append("bGVjdGlvbi5jaGFubmVscywgcmVmbGVjdGlvbi50eXBlcywgY28ucHRyKTsKICAgICAgfSwKICAgICAg");
    sb.append("ZmFpbHVyZTogZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0gIltG");
    sb.append("QUlMRUQgVE8gR0VUIFNDSEVNQToiICsgcmVhc29uICsgIl0iOwogICAgICAgIHZpZXdDaGFubmVscy5p");
    sb.append("bm5lckhUTUwgPSAiW0ZBSUxFRCBUTyBHRVQgU0NIRU1BOiIgKyByZWFzb24gKyAiXSI7CiAgICAgIH0K");
    sb.append("ICAgIH07CiAgICBpZiAoY28udmlhX2JpbGxpbmcpIHsKICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0g");
    sb.append("IkJpbGlsbmcgZG9jdW1lbnQgbm90IHN1cHBvcnRlZCI7CiAgICAgIHZpZXdDaGFubmVscy5pbm5lckhU");
    sb.append("TUwgPSB2aWV3SnNvbi5pbm5lckhUTUw7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChjby52aWFf");
    sb.append("ZG9tYWluKSB7CiAgICAgIGNvLnJhdy5Eb21haW5SZWZsZWN0KGNvLmlkZW50aXR5LCBjby5kb21haW4s");
    sb.append("IGhhbmRsZXIpOwogICAgfSBlbHNlIHsKICAgICAgY28ucmF3LlNwYWNlUmVmbGVjdChjby5pZGVudGl0");
    sb.append("eSwgY28uc3BhY2UsIGNvLmtleSwgaGFuZGxlcik7CiAgICB9CiAgfTsKCiAgdmFyIGNvbm5lY3Rpb25T");
    sb.append("ZWxlY3RvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwogIGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMzMzOyBjb2xvcjogI2ZmZiI7CiAgdmFyIHN3aXRjaF90");
    sb.append("b19jb25uZWN0aW9uID0gZnVuY3Rpb24obmFtZSkgewogICAgY3VycmVudCA9IG5hbWU7CiAgICBudWtl");
    sb.append("KHZpZXdDaGFubmVscyk7CiAgICBudWtlKHZpZXdKc29uKTsKICAgIGNvbm5lY3Rpb25zW25hbWVdLnJl");
    sb.append("bmRlcmVkID0gIiI7CiAgICByZW5kZXIobmFtZSk7CiAgfTsKICBjb25uZWN0aW9uU2VsZWN0b3Iub25j");
    sb.append("aGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgIHN3aXRjaF90b19jb25uZWN0aW9uKGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci52YWx1ZSk7CiAgfTsKICB2YXIgcmVmcmVzaF9zZWxlY3QgPSBmdW5jdGlvbigpIHsKICAgIG51");
    sb.append("a2UoY29ubmVjdGlvblNlbGVjdG9yKTsKICAgIGZvciAodmFyIG5hbWUgaW4gY29ubmVjdGlvbnMpIHsK");
    sb.append("ICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQu");
    sb.append("dmFsdWUgPSBuYW1lOwogICAgICBvcHQuaW5uZXJUZXh0ID0gbmFtZTsKICAgICAgY29ubmVjdGlvblNl");
    sb.append("bGVjdG9yLmFwcGVuZENoaWxkKG9wdCk7CiAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHsKICAgICAg");
    sb.append("ICBzd2l0Y2hfdG9fY29ubmVjdGlvbihuYW1lKTsKICAgICAgICBjb25uZWN0aW9uU2VsZWN0b3IudmFs");
    sb.append("dWUgPSBuYW1lOwogICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi50b2dnbGUgPSBmdW5jdGlvbigpIHsK");
    sb.append("ICAgIGlmIChzZWxmLnNob3duKSB7CiAgICAgIHRyeSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1v");
    sb.append("dmVDaGlsZChzZWxmLnJvb3QpOwogICAgICB9IGNhdGNoIChub3RwcmVzZW50KSB7CiAgICAgICAgc2Vs");
    sb.append("Zi5zaG93biA9ICFzZWxmLnNob3duOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHNlbGYucm9v");
    sb.append("dCk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgc2VsZi5yb290ID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGRlYnVnZ2VyUG9zaXRpb24gPSBsb2NhbFN0b3JhZ2Uu");
    sb.append("Z2V0SXRlbSgiQWRhbWFEZWJ1Z2dlclBvc2l0aW9uIik7CiAgICAgIGlmICghZGVidWdnZXJQb3NpdGlv");
    sb.append("biB8fCBkZWJ1Z2dlclBvc2l0aW9uID09ICIiKSB7CiAgICAgICAgZGVidWdnZXJQb3NpdGlvbiA9ICJ0");
    sb.append("b3A6MHB4OyBsZWZ0OjBweDt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiOwogICAgICB9CiAgICAgIHNl");
    sb.append("bGYucm9vdC5zdHlsZSA9ICJwb3NpdGlvbjphYnNvbHV0ZTsiICsgZGVidWdnZXJQb3NpdGlvbiArICI7");
    sb.append("YmFja2dyb3VuZDogIzAwMDtib3JkZXI6MXB4IHNvbGlkIHJlZDt6LWluZGV4OjEwMDA7IG92ZXJmbG93");
    sb.append("OnNjcm9sbCI7CiAgICAgIHZhciB0aXRsZUJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIp");
    sb.append("OwogICAgICB0aXRsZUJhci5pbm5lckhUTUwgPSAiQWRhbWEgRGVidWdnZXIiOwogICAgICB0aXRsZUJh");
    sb.append("ci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMjIyOyBjb2xvcjogIzBmMDsgY3Vyc29yOm1vdmU7IHdpZHRo");
    sb.append("OjEwMCU7IGZvbnQtdmFyaWFudDogc21hbGwtY2FwczsgcGFkZGluZzoycHg7IHRleHQtYWxpZ246IGNl");
    sb.append("bnRlcjsiOwogICAgICB0aXRsZUJhci5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAg");
    sb.append("ZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICB2YXIgcmVjdCA9IHNlbGYucm9vdC5nZXRCb3VuZGlu");
    sb.append("Z0NsaWVudFJlY3QoKTsKICAgICAgICB2YXIgc3RhcnQgPSB7eDogZXYuY2xpZW50WCwgeTogZXYuY2xp");
    sb.append("ZW50WX07CiAgICAgICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uKG54KSB7CiAgICAgICAgICBzZWxmLnJv");
    sb.append("b3Quc3R5bGUubGVmdCA9IChyZWN0LmxlZnQgKyBueC5jbGllbnRYIC0gc3RhcnQueCkgKyAicHgiOwog");
    sb.append("ICAgICAgICAgc2VsZi5yb290LnN0eWxlLnRvcCA9IChyZWN0LnRvcCArIG54LmNsaWVudFkgLSBzdGFy");
    sb.append("dC55KSArICJweCI7CiAgICAgICAgfTsKICAgICAgICB3aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlv");
    sb.append("bihueCkgewogICAgICAgICAgdXBkYXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVt");
    sb.append("KCJBZGFtYURlYnVnZ2VyUG9zaXRpb24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0");
    sb.append("OiIrc2VsZi5yb290LnN0eWxlLmxlZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAg");
    sb.append("ICB9OwogICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbihueCkgewogICAgICAgICAgdXBk");
    sb.append("YXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJBZGFtYURlYnVnZ2VyUG9zaXRp");
    sb.append("b24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0OiIrc2VsZi5yb290LnN0eWxlLmxl");
    sb.append("ZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAgICAgIHdpbmRvdy5vbm1vdXNlbW92");
    sb.append("ZSA9IGZ1bmN0aW9uKCkge307CiAgICAgICAgICB3aW5kb3cub25tb3VzZXVwID0gZnVuY3Rpb24oKSB7");
    sb.append("fTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzZWxmLnJvb3Qu");
    sb.append("YXBwZW5kQ2hpbGQodGl0bGVCYXIpOwogICAgICBzZWxmLnJvb3QuYXBwZW5kQ2hpbGQoY29ubmVjdGlv");
    sb.append("blNlbGVjdG9yKTsKICAgICAgc2VsZi5yb290LmFwcGVuZENoaWxkKHZpZXdKc29uKTsKICAgICAgc2Vs");
    sb.append("Zi5yb290LmFwcGVuZENoaWxkKHZpZXdDaGFubmVscyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5k");
    sb.append("Q2hpbGQoc2VsZi5yb290KTsKICAgIH0KICAgIHNlbGYuc2hvd24gPSAhc2VsZi5zaG93bjsKICB9OwoK");
    sb.append("ICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oY29ubmVjdGlvbikgewogICAgY29ubmVjdGlvbnNbY29u");
    sb.append("bmVjdGlvbi5uYW1lXSA9IGNvbm5lY3Rpb247CiAgICBjb25uZWN0aW9uLmRlYnVnX3RyZWUgPSBuZXcg");
    sb.append("QWRhbWFUcmVlKCk7CiAgICBjb25uZWN0aW9uLmRlYnVnZ2luZyA9ICI/IjsKICAgIHJlZnJlc2hfc2Vs");
    sb.append("ZWN0KCk7CiAgICByZXR1cm4gZnVuY3Rpb24ocGF5bG9hZCkgewogICAgICBpZiAoY29ubmVjdGlvbi5i");
    sb.append("b3VuZCAhPSBjb25uZWN0aW9uLmRlYnVnZ2luZyAmJiBjdXJyZW50ID09IGNvbm5lY3Rpb24ubmFtZSkg");
    sb.append("ewogICAgICAgIHJlbmRlcihjb25uZWN0aW9uLm5hbWUpOwogICAgICB9CiAgICAgIGlmICgiZGF0YSIg");
    sb.append("aW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgIGNvbm5lY3Rpb24uZGVidWdfdHJlZS51cGRhdGUocGF5");
    sb.append("bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgfQogICAgICAvKgogICAgICBpZiAoIm91dHN0YW5kaW5nIiBp");
    sb.append("biBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBjby5vbmRlY2lkZShwYXlsb2FkLmRlbHRhLm91dHN0");
    sb.append("YW5kaW5nKTsKICAgICAgfQogICAgICBpZiAoJ3ZpZXdzdGF0ZScgaW4gcGF5bG9hZC5kZWx0YSkgewov");
    sb.append("LyAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLnZpZXdzdGF0ZSk7CiAg");
    sb.append("ICAgIH0KICAgICAgaWYgKCdnb3RvJyBpbiBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBzZWxmLmdv");
    sb.append("dG8ocGF5bG9hZC5kZWx0YS5nb3RvKTsKICAgICAgfQogICAgICAqLwogICAgfQogIH07CiAgcmV0dXJu");
    sb.append("IHNlbGY7Cn0pKCk7");
    return sb.toString();
  }
  public static final String RXHTML = new String(Base64.getDecoder().decode(make_rxhtml()), StandardCharsets.UTF_8);
  private static String make_rxhtml() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIFJ4SFRNTCA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB7fTsKCiAgdmFyIHRlbXBsYXRl");
    sb.append("cyA9IHt9OwogIHZhciByb3V0ZXIgPSB7fTsKCiAgdmFyIGRlZmF1bHRFbmRwb2ludCA9IC8qRU5EUE9J");
    sb.append("TlQ9WyovQWRhbWEuUHJvZHVjdGlvbi8qXSovOwoKICAvLyBvdmVycmlkZSBlbmRwb2ludCBiYXNlZCBv");
    sb.append("biB0aGUgcHJlc2VuY2Ugb2YgX19tZF9lbmRwb2ludAogIHZhciBtZE92ZXJyaWRlRW5kcG9pbnQgPSBs");
    sb.append("b2NhbFN0b3JhZ2UuZ2V0SXRlbSgibWRlYyIpOyAvLyBtdWx0aSBkb21haW4gZW5kcG9pbnQgY2hvaWNl");
    sb.append("CiAgaWYgKG1kT3ZlcnJpZGVFbmRwb2ludCAhPSBudWxsICYmICJiZXRhIiA9PSBtZE92ZXJyaWRlRW5k");
    sb.append("cG9pbnQpIHsKICAgIGRlZmF1bHRFbmRwb2ludCA9IEFkYW1hLkJldGE7CiAgfQoKICAvLyBUaGlzIHN0");
    sb.append("cmFuZ2UgZXNjYXBpbmcgaXMgZm9yIGRldmVsb3BlciBtb2RlIHRvIHByb3h5IHRvIGxvY2FsaG9zdC4K");
    sb.append("ICB2YXIgY29ubmVjdGlvbiA9IG5ldyBBZGFtYS5Db25uZWN0aW9uKGRlZmF1bHRFbmRwb2ludCk7CiAg");
    sb.append("dmFyIGNvbm5lY3Rpb25zID0ge307CiAgc2VsZi5jb25uZWN0aW9uID0gY29ubmVjdGlvbjsKICBzZWxm");
    sb.append("LmJ1bXAgPSBmdW5jdGlvbihtKSB7CiAgICBjb25uZWN0aW9uLmJ1bXAobSk7CiAgfTsKCiAgdmFyIGNv");
    sb.append("bm5lY3Rpb25Nb25pdG9yRG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgY29ubmVj");
    sb.append("dGlvbi5vbnN0YXR1c2NoYW5nZSA9IGZ1bmN0aW9uIChzdGF0dXMpIHsKICAgIHZhciBpY29uID0gZnVu");
    sb.append("Y3Rpb24gKGNvbG9yKSB7IHJldHVybiAiPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAv");
    sb.append("c3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41");
    sb.append("XCIgc3Ryb2tlPVwiIiArIGNvbG9yICsgIlwiIHN0eWxlPVwid2lkdGg6MTZweDsgaGVpZ2h0OjE2cHhc");
    sb.append("Ij48cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBk");
    sb.append("PVwiTTguMjg4IDE1LjAzOGE1LjI1IDUuMjUgMCAwMTcuNDI0IDBNNS4xMDYgMTEuODU2YzMuODA3LTMu");
    sb.append("ODA4IDkuOTgtMy44MDggMTMuNzg4IDBNMS45MjQgOC42NzRjNS41NjUtNS41NjUgMTQuNTg3LTUuNTY1");
    sb.append("IDIwLjE1MiAwTTEyLjUzIDE4LjIybC0uNTMuNTMtLjUzLS41M2EuNzUuNzUgMCAwMTEuMDYgMHpcIiAv");
    sb.append("Pjwvc3ZnPlxuIjsgfTsKICAgIGlmICghc3RhdHVzKSB7CiAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9t");
    sb.append("LnRpdGxlID0gImRpc2Nvbm5lY3RlZCI7CiAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmlubmVySFRN");
    sb.append("TCA9IGljb24oInJlZCIpOwogICAgICBjb25uZWN0aW9uLm9ucGluZyA9IGZ1bmN0aW9uIChfMSwgXzIp");
    sb.append("IHsgfTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbm5lY3Rpb24ub25waW5nID0gZnVuY3Rpb24gKF8sIGxh");
    sb.append("dGVuY3kpIHsKICAgICAgICBjb25uZWN0aW9uTW9uaXRvckRvbS50aXRsZSA9ICJjb25uZWN0ZWQ7IGxh");
    sb.append("dGVuY3k9IiArIGxhdGVuY3kgKyAibXMiOwogICAgICAgIGlmIChsYXRlbmN5ID49IDEwMCkgewogICAg");
    sb.append("ICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20uaW5uZXJIVE1MID0gaWNvbigib3JhbmdlIik7CiAgICAg");
    sb.append("ICAgfSBlbHNlIHsKICAgICAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmlubmVySFRNTCA9IGljb24o");
    sb.append("ImdyZWVuIik7CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH07CiAgY29ubmVjdGlvbk1vbml0b3JE");
    sb.append("b20uc3R5bGUgPSAicG9zaXRpb246Zml4ZWQ7IGJvdHRvbTowcHg7IHJpZ2h0OjBweCI7CiAgY29ubmVj");
    sb.append("dGlvbk1vbml0b3JEb20uY2xhc3NOYW1lID0gImFkYW1hLWRlYnVnZ2VyIgogIGlmIChBZGFtYS5EZWJ1");
    sb.append("Z2dlcikgewogICAgY29ubmVjdGlvbk1vbml0b3JEb20ub25jbGljayA9IEFkYW1hLkRlYnVnZ2VyLnRv");
    sb.append("Z2dsZTsKICB9CiAgY29ubmVjdGlvbi5zdGFydCgpOwogIGNvbm5lY3Rpb24ua2VlcGFsaXZlKCk7Cgog");
    sb.append("IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICB2YXIg");
    sb.append("cGF5bG9hZCA9IHt9OwogICAgcGF5bG9hZC5tZXNzYWdlID0gZXZlbnQubWVzc2FnZTsKICAgIHBheWxv");
    sb.append("YWQuZmlsZW5hbWUgPSBldmVudC5maWxlbmFtZTsKICAgIHBheWxvYWQubGluZW5vID0gZXZlbnQubGlu");
    sb.append("ZW5vOwogICAgcGF5bG9hZC5jb2xubyA9IGV2ZW50LmNvbG5vOwogICAgcGF5bG9hZC5maWxlbmFtZSA9");
    sb.append("IGV2ZW50LmZpbGVuYW1lOwogICAgY29ubmVjdGlvbi5sb2coIndpbmRvdy5lcnJvciIsIEpTT04uc3Ry");
    sb.append("aW5naWZ5KHBheWxvYWQpKTsKICAgIGNvbnNvbGUuZXJyb3IoIltlcnJvcl0iICsgZXZlbnQubWVzc2Fn");
    sb.append("ZSk7CiAgfSk7CgogIGNvbm5lY3Rpb24uYnVtcCgicnhodG1sIik7CgogIHZhciByb290UmVwbGFjZSA9");
    sb.append("ICIvIjsKICB2YXIgZml4UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7CiAgICByZXR1cm4gcGF0aDsKICB9");
    sb.append("OwogIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUuZW5kc1dpdGgoIi5hZGFtYS1wbGF0Zm9ybS5j");
    sb.append("b20iKSAmJiAhd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmVuZHNXaXRoKCJpZGUuYWRhbWEtcGxhdGZv");
    sb.append("cm0uY29tIikpIHsKICAgIC8vIHRoaXMgZXhpc3RzIGlmIHNvbWVvbmUgaXMgdHJ5aW5nIHRvIHVzZSB0");
    sb.append("aGUgZ2xvYmFsIGRvbWFpbiBmb3IgdGhlaXIgc2l0ZQogICAgdmFyIHBhcnRzID0gd2luZG93LmxvY2F0");
    sb.append("aW9uLnBhdGhuYW1lLnNwbGl0KCIvIik7CiAgICByb290UmVwbGFjZSA9IFtwYXJ0c1swXSwgcGFydHNb");
    sb.append("MV0sIHBhcnRzWzJdLCAiIl0uam9pbigiLyIpOwogICAgdmFyIG9mZnNldCA9IHBhcnRzWzBdLmxlbmd0");
    sb.append("aCArIHBhcnRzWzFdLmxlbmd0aCArIHBhcnRzWzJdLmxlbmd0aCArIDI7CiAgICBmaXhQYXRoID0gZnVu");
    sb.append("Y3Rpb24gKHBhdGgpIHsKICAgICAgcmV0dXJuIHBhdGguc3Vic3RyaW5nKG9mZnNldCk7CiAgICB9Owog");
    sb.append("IH0KCiAgdmFyIGZpeEhyZWYgPSBmdW5jdGlvbiAoaHJlZikgewogICAgaWYgKCFocmVmKSB7CiAgICAg");
    sb.append("IHJldHVybiAiIyI7CiAgICB9CiAgICBpZiAoaHJlZi5zdGFydHNXaXRoKCIvIikpIHsKICAgICAgcmV0");
    sb.append("dXJuIHJvb3RSZXBsYWNlICsgaHJlZi5zdWJzdHJpbmcoMSk7CiAgICB9CiAgICByZXR1cm4gaHJlZjsK");
    sb.append("ICB9OwoKICB2YXIgZ2V0X2Nvbm5lY3Rpb25fb2JqID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgIGlmIChu");
    sb.append("YW1lIGluIGNvbm5lY3Rpb25zKSB7CiAgICAgIHJldHVybiBjb25uZWN0aW9uc1tuYW1lXTsKICAgIH0g");
    sb.append("ZWxzZSB7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICBwdHI6IG51");
    sb.append("bGwsCiAgICAgICAgdHJlZTogbmV3IEFkYW1hVHJlZSgpLAogICAgICAgIG91dHN0YW5kaW5nOiB7fSwK");
    sb.append("ICAgICAgICBkZWNpc2lvbnM6IHt9LAogICAgICAgIGNob2ljZV9zdWJzOiB7fSwKICAgICAgICByZXNl");
    sb.append("dHM6IHt9LAogICAgICAgIGNvbm5lY3Rpb25fZXZlbnRzOiB7fSwKICAgICAgICBzeW5jX2V2ZW50czog");
    sb.append("e30sCiAgICAgICAgaWQ6IDAsCiAgICAgICAgY29ubmVjdGlvbl9zdGF0ZTogZmFsc2UsCiAgICAgICAg");
    sb.append("Y2hvaWNlczoge30sCiAgICAgICAgYm91bmQ6ICIiLAogICAgICAgIHZpZXdzdGF0ZV9zZW50OiB0cnVl");
    sb.append("LAogICAgICAgIHZpZXdzdGF0ZV9jbG9uZTogIiIsCiAgICAgICAgaGFzX2ZpbHRlcjogZmFsc2UsCiAg");
    sb.append("ICAgICAgc3luY2VkOiBmYWxzZSwKICAgICAgICBmaWx0ZXI6IHt9LAogICAgICAgIHZzc2VxOiAwLAog");
    sb.append("ICAgICAgIGRlYnVnZ2VyOiBmdW5jdGlvbiAoZGVsdGEpIHsgfSwKICAgICAgICByYXc6IGNvbm5lY3Rp");
    sb.append("b24KICAgICAgfTsKICAgICAgb2JqLm51a2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5jb25u");
    sb.append("ZWN0aW9uX2V2ZW50cyA9IHt9OwogICAgICAgIHRoaXMuc3luY19ldmVudHMgPSB7fTsKICAgICAgICB0");
    sb.append("aGlzLmNob2ljZV9zdWJzID0ge307CiAgICAgIH0uYmluZChvYmopOwogICAgICBpZiAoQWRhbWEuRGVi");
    sb.append("dWdnZXIpIHsKICAgICAgICBvYmouZGVidWdnZXIgPSBBZGFtYS5EZWJ1Z2dlci5yZWdpc3RlcihvYmop");
    sb.append("OwogICAgICB9CiAgICAgIG9iai5zeW5jID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBzeW5jZWQg");
    sb.append("PSB0aGlzLmNvbm5lY3Rpb25fc3RhdGUgJiYgdGhpcy52aWV3c3RhdGVfc2VudDsKICAgICAgICBpZiAo");
    sb.append("dGhpcy5zeW5jZWQgPT0gc3luY2VkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAg");
    sb.append("IHRoaXMuc3luY2VkID0gc3luY2VkOwogICAgICAgIHZhciBheGUgPSBbXTsKICAgICAgICBmb3IgKHZh");
    sb.append("ciBzdWIgaW4gb2JqLnN5bmNfZXZlbnRzKSB7CiAgICAgICAgICBpZiAoIShvYmouc3luY19ldmVudHNb");
    sb.append("c3ViXShzeW5jZWQpKSkgewogICAgICAgICAgICBheGUucHVzaChzdWIpOwogICAgICAgICAgfQogICAg");
    sb.append("ICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAg");
    sb.append("ICAgZGVsZXRlIG9iai5zeW5jX2V2ZW50c1theGVba11dOwogICAgICAgIH0KICAgICAgfS5iaW5kKG9i");
    sb.append("aik7CiAgICAgIG9iai5zdWJzY3JpYmVfc3luYyA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAg");
    sb.append("IHZhciBzID0gIi18IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLnN5bmNfZXZlbnRzW3NdID0gY2Fs");
    sb.append("bGJhY2s7CiAgICAgICAgY2FsbGJhY2sodGhpcy5zeW5jZWQpOwogICAgICAgIHJldHVybiBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5zeW5jX2V2ZW50c1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH07CiAgICAgIG9iai5zZXRfY29ubmVjdGVkID0gZnVuY3Rpb24gKGNzKSB7CiAg");
    sb.append("ICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbl9zdGF0ZSA9PSBjcykgewogICAgICAgICAgcmV0dXJuOwog");
    sb.append("ICAgICAgIH0KICAgICAgICB0aGlzLmNvbm5lY3Rpb25fc3RhdGUgPSBjczsKICAgICAgICB2YXIgYXhl");
    sb.append("ID0gW107CiAgICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5jb25uZWN0aW9uX2V2ZW50cykgewogICAg");
    sb.append("ICAgICAgaWYgKCEob2JqLmNvbm5lY3Rpb25fZXZlbnRzW3N1Yl0oY3MpKSkgewogICAgICAgICAgICBh");
    sb.append("eGUucHVzaChzdWIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAgZGVsZXRlIG9iai5jb25uZWN0aW9uX2V2ZW50");
    sb.append("c1theGVba11dOwogICAgICAgIH0KICAgICAgICB0aGlzLnN5bmMoKTsKICAgICAgfS5iaW5kKG9iaik7");
    sb.append("CiAgICAgIG9iai5jb25uZWN0ZWQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9");
    sb.append("ICItfCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhpcy5jb25uZWN0aW9uX2V2ZW50c1tzXSA9IGNhbGxi");
    sb.append("YWNrOwogICAgICAgIGNhbGxiYWNrKHRoaXMuY29ubmVjdGlvbl9zdGF0ZSk7CiAgICAgICAgcmV0dXJu");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmNvbm5lY3Rpb25fZXZlbnRzW3NdOwog");
    sb.append("ICAgICAgIH0uYmluZCh0aGlzKTsKICAgICAgfS5iaW5kKG9iaik7CiAgICAgIG9iai5zdWJzY3JpYmVf");
    sb.append("YW55ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSAiLXwiICsgdGhpcy5pZCsr");
    sb.append("OwogICAgICAgIHRoaXMuZGVjaXNpb25zW3NdID0gY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlY2lzaW9uc1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vic2NyaWJlID0gZnVuY3Rpb24gKGNo");
    sb.append("YW5uZWwsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSBjaGFubmVsICsgInwiICsgdGhpcy5pZCsr");
    sb.append("OwogICAgICAgIHRoaXMuZGVjaXNpb25zW3NdID0gY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlY2lzaW9uc1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vic2NyaWJlX3Jlc2V0ID0gZnVuY3Rp");
    sb.append("b24gKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIGRyID0gInJlc2V0fCIgKyB0aGlzLmlkKys7CiAgICAg");
    sb.append("ICAgdGhpcy5yZXNldHNbZHJdID0gY2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlc2V0c1tkcl07CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAg");
    sb.append("ICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1YnNjcmliZV9jaG9pY2UgPSBmdW5jdGlvbiAoY2hhbm5l");
    sb.append("bCwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9IGNoYW5uZWwgKyAifCIgKyB0aGlzLmlkKys7CiAg");
    sb.append("ICAgICAgdGhpcy5jaG9pY2Vfc3Vic1tzXSA9IGNhbGxiYWNrOwogICAgICAgIHJldHVybiBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5jaG9pY2Vfc3Vic1tzXTsKICAgICAgICB9LmJpbmQo");
    sb.append("dGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmoub25jaG9pY2VzID0gZnVuY3Rpb24gKGNo");
    sb.append("YW5uZWwsIGNob2ljZSkgewogICAgICAgIHZhciBheGUgPSBbXTsKICAgICAgICBmb3IgKHZhciBzdWIg");
    sb.append("aW4gb2JqLmNob2ljZV9zdWJzKSB7CiAgICAgICAgICBpZiAoc3ViLnN0YXJ0c1dpdGgoY2hhbm5lbCAr");
    sb.append("ICJ8IikpIHsKICAgICAgICAgICAgaWYgKCFvYmouY2hvaWNlX3N1YnNbc3ViXShjaG9pY2UpKSB7CiAg");
    sb.append("ICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAg");
    sb.append("IH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAg");
    sb.append("ZGVsZXRlIG9iai5jaG9pY2Vfc3Vic1theGVba11dOwogICAgICAgIH0KICAgICAgfTsKICAgICAgb2Jq");
    sb.append("Lm9uZGVjaWRlID0gZnVuY3Rpb24gKG91dHN0YW5kaW5nKSB7CiAgICAgICAgdmFyIGF4ZVJlc2V0ID0g");
    sb.append("W107CiAgICAgICAgZm9yICh2YXIgZHIgaW4gb2JqLnJlc2V0cykgewogICAgICAgICAgdmFyIHIgPSBv");
    sb.append("YmoucmVzZXRzW2RyXTsKICAgICAgICAgIGlmICghKHIoKSkpIHsKICAgICAgICAgICAgYXhlUmVzZXQu");
    sb.append("cHVzaChkcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwg");
    sb.append("YXhlUmVzZXQubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0ZSBvYmoucmVzZXRzW2F4ZVJlc2V0");
    sb.append("W2tdXTsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgY2ggaW4gb2JqLm91dHN0YW5kaW5nKSB7CiAg");
    sb.append("ICAgICAgICBvYmoub3V0c3RhbmRpbmdbY2hdID0geyBvcHRpb25zOiBbXSB9OwogICAgICAgIH0KICAg");
    sb.append("ICAgICB2YXIgbiA9IG91dHN0YW5kaW5nLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8");
    sb.append("IG47IGsrKykgewogICAgICAgICAgdmFyIG8gPSBvdXRzdGFuZGluZ1trXTsKICAgICAgICAgIG9iai5v");
    sb.append("dXRzdGFuZGluZ1tvLmNoYW5uZWxdID0gbzsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgY2ggaW4g");
    sb.append("b2JqLm91dHN0YW5kaW5nKSB7CiAgICAgICAgICB2YXIgb3V0ID0gb2JqLm91dHN0YW5kaW5nW2NoXTsK");
    sb.append("ICAgICAgICAgIHZhciBheGUgPSBbXTsKICAgICAgICAgIGZvciAodmFyIHN1YiBpbiBvYmouZGVjaXNp");
    sb.append("b25zKSB7CiAgICAgICAgICAgIGlmIChzdWIuc3RhcnRzV2l0aChjaCArICJ8IikgfHwgc3ViLnN0YXJ0");
    sb.append("c1dpdGgoIi18IikpIHsKICAgICAgICAgICAgICBpZiAoIW9iai5kZWNpc2lvbnNbc3ViXShvdXQsIGNo");
    sb.append("KSkgewogICAgICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAgICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXhlLmxlbmd0aDsg");
    sb.append("aysrKSB7CiAgICAgICAgICAgIGRlbGV0ZSBvYmouZGVjaXNpb25zW2F4ZVtrXV07CiAgICAgICAgICB9");
    sb.append("CiAgICAgICAgfQogICAgICB9OwogICAgICBjb25uZWN0aW9uc1tuYW1lXSA9IG9iajsKICAgICAgcmV0");
    sb.append("dXJuIG9iajsKICAgIH0KICB9OwogIHNlbGYuZ2V0Q29ubmVjdGlvbkJ5TmFtZSA9IGdldF9jb25uZWN0");
    sb.append("aW9uX29iajsKCiAgc2VsZi5tYWtlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIG5ldyBBZGFtYVRy");
    sb.append("ZWUoKTsKICB9OwoKICAvLyBIRUxQRVIgfCBzdWJzY3JpYmUgdGhlIGdpdmVuICdzdWInIHRvIGNoYW5n");
    sb.append("ZXMgd2l0aGluIHN0YXRlIGZvciB0aGUgZ2l2ZW4gZmllbGQgbmFtZWQgbmFtZQogIHZhciBzdWJzY3Jp");
    sb.append("YmUgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIHN1YikgewogICAgdmFyIHNzID0gc2VsZi5wSShzdGF0");
    sb.append("ZSwgbmFtZSk7CiAgICB2YXIgcyA9IHNzW3NzLmN1cnJlbnRdOwogICAgaWYgKHMgPT0gbnVsbCkgewog");
    sb.append("ICAgICBjb25zb2xlLmVycm9yKHNzLmN1cnJlbnQgKyAiIGlzIG5vdCBhdmFpbGFibGU7IHVuYWJsZSB0");
    sb.append("byBzdWJzY3JpYmUuIik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICgiQGUiIGluIHMuZGVsdGEp");
    sb.append("IHsKICAgICAgcy5kZWx0YVsiQGUiXS5wdXNoKHN1Yik7CiAgICB9IGVsc2UgewogICAgICBzLmRlbHRh");
    sb.append("WyJAZSJdID0gW3N1Yl07CiAgICB9CiAgfTsKICBzZWxmLnN1YnNjcmliZSA9IHN1YnNjcmliZTsKCiAg");
    sb.append("Ly8gSEVMUEVSIHwgY3JlYXRlIGZyZXNoIHN0YXRlCiAgdmFyIGZyZXNoID0gZnVuY3Rpb24gKHdoZXJl");
    sb.append("KSB7CiAgICByZXR1cm4gewogICAgICB0cmVlOiBuZXcgQWRhbWFUcmVlKCksCiAgICAgIGRlbHRhOiB7");
    sb.append("fSwKICAgICAgcGFyZW50OiBudWxsLAogICAgICBwYXRoOiBudWxsLAogICAgICB3aGVyZTogd2hlcmUK");
    sb.append("ICAgIH07CiAgfTsKICBzZWxmLmZyZXNoID0gZnJlc2g7CgogIC8vIEhFTFBFUjogcmVtb3ZlIHBvdGVu");
    sb.append("dGlhbGx5IHNlbnNpdGl2ZSBpbmZvcm1hdGlvbiBmcm9tIGFuIG9iamVjdAogIHZhciBzYWZlX2ZpbHRl");
    sb.append("ciA9IGZ1bmN0aW9uKG8pIHsKICAgIGlmICgncGFzc3dvcmQnIGluIG8pIHsKICAgICAgZGVsZXRlIG9b");
    sb.append("J3Bhc3N3b3JkJ107CiAgICB9CiAgICBpZiAoJ29uZV90aW1lX3Bhc3N3b3JkJyBpbiBvKSB7CiAgICAg");
    sb.append("IGRlbGV0ZSBvWydvbmVfdGltZV9wYXNzd29yZCddOwogICAgfQogICAgcmV0dXJuIG87CiAgfQoKICAv");
    sb.append("LyBIRUxQRVIgfCBjcmVhdGUgYSBuZXcgZGVsdGEgY29weSBmcm9tIHRoZSBnaXZlbiBzcGVjaWZpYyBz");
    sb.append("dGF0ZSAoaS5lLiBlaXRoZXIgZGF0YSBvciB2aWV3KQogIHZhciBuZXdfZGVsdGFfY29weSA9IGZ1bmN0");
    sb.append("aW9uIChzcykgewogICAgaWYgKHNzID09IG51bGwpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAg");
    sb.append("ICB2YXIgcGFyZW50ID0gbnVsbDsKICAgIGlmIChzcy5wYXJlbnQgIT0gbnVsbCkgewogICAgICBwYXJl");
    sb.append("bnQgPSBuZXdfZGVsdGFfY29weShzcy5wYXJlbnQpOwogICAgfQogICAgdmFyIG5ld19kZWx0YSA9IHt9");
    sb.append("OwogICAgaWYgKHBhcmVudCAhPSBudWxsKSB7CiAgICAgIHBhcmVudC5kZWx0YVtzcy5wYXRoXSA9IG5l");
    sb.append("d19kZWx0YTsKICAgIH0KICAgIHJldHVybiB7IHRyZWU6IHNzLnRyZWUsIHBhcmVudDogcGFyZW50LCBk");
    sb.append("ZWx0YTogbmV3X2RlbHRhLCBwYXRoOiBzcy5wYXRoIH07CiAgfTsKICBzZWxmLm1ha2VEZWx0YUNvcHkg");
    sb.append("PSBuZXdfZGVsdGFfY29weTsKCiAgLy8gSEVMUEVSIHwgY29uc3RydWN0IGEgcGF0aCB0bwogIHZhciBw");
    sb.append("YXRoX3RvID0gZnVuY3Rpb24gKHNzLCBvYmopIHsKICAgIGlmIChzcy5wYXJlbnQgIT0gbnVsbCkgewog");
    sb.append("ICAgICB2YXIgcGVlbCA9IHt9OwogICAgICBwZWVsW3NzLnBhdGhdID0gb2JqOwogICAgICByZXR1cm4g");
    sb.append("cGF0aF90byhzcy5wYXJlbnQsIHBlZWwpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAg");
    sb.append("IH0KICB9OwogIHNlbGYucGF0aFRvID0gcGF0aF90bzsKCiAgLy8gSEVMUEVSIHwgZ2V0IHRoZSByb290");
    sb.append("IG9mIHRoZSBzcGVjaWZpYyBzdGF0ZSAoaS5lLiBlaXRoZXIgdGhlIGRhdGEncyByb290IG9yIHRoZSB2");
    sb.append("aWV3J3Mgcm9vdCkKICB2YXIgcm9vdF9vZiA9IGZ1bmN0aW9uIChzcykgewogICAgdmFyIHggPSBzczsK");
    sb.append("ICAgIHdoaWxlICh4LnBhcmVudCAhPSBudWxsKSB7CiAgICAgIHggPSB4LnBhcmVudDsKICAgIH0KICAg");
    sb.append("IHJldHVybiB4OwogIH07CiAgc2VsZi5yb290T2YgPSByb290X29mOwoKICAvLyBIRUxQRVIgfCByZW1v");
    sb.append("dmUgYWxsIHRoZSBjaGlsZHJlbiBmcm9tIHRoZSBnaXZlbiBET00gbm9kZQogIHZhciBudWtlID0gZnVu");
    sb.append("Y3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAgd2hpbGUg");
    sb.append("KGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0gcGFyZW50");
    sb.append("Lmxhc3RDaGlsZDsKICAgIH0KICB9OwogIHNlbGYubnVrZSA9IG51a2U7CgogIC8vIEhFTFBFUjogZGVi");
    sb.append("b3VuY2UgdGhlIGdpdmVuIGZ1bmN0aW9uYWwgd2hlbiByYXBpZCBmdW5jdGlvbiBzcHJlYWQgaXMgZXhw");
    sb.append("ZWN0ZWQKICB2YXIgZGVib3VuY2UgPSBmdW5jdGlvbiAobXMsIGZvbykgewogICAgdmFyIHN0YXR1cyA9");
    sb.append("IHsgaW5mbGlnaHQ6IGZhbHNlLCB0aW1lb3V0OiBudWxsIH07CiAgICBzdGF0dXMuaW5mbGlnaHQgPSBm");
    sb.append("YWxzZTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghc3RhdHVzLmluZmxpZ2h0KSB7");
    sb.append("CiAgICAgICAgc3RhdHVzLmluZmxpZ2h0ID0gdHJ1ZTsKICAgICAgICBzdGF0dXMudGltZW91dCA9IHdp");
    sb.append("bmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHN0YXR1cy5pbmZsaWdodCA9IGZh");
    sb.append("bHNlOwogICAgICAgICAgc3RhdHVzLnRpbWVvdXQgPSBudWxsOwogICAgICAgICAgZm9vKCk7CiAgICAg");
    sb.append("ICAgfSwgbXMgLyogbXMgKi8pOyAvLyBkZWJvdW5jZSB0aGUgcGFyYW1ldGVycwogICAgICB9CiAgICB9");
    sb.append("OwogIH07CiAgc2VsZi5kZWJvdW5jZSA9IGRlYm91bmNlOwoKICB2YXIgZGVsYXkgPSBmdW5jdGlvbiht");
    sb.append("cywgZm9vKSB7CiAgICB2YXIgc3RhdHVzID0geyBhdmFpbDogdHJ1ZSwgYWdhaW46ZmFsc2UsIHRpbWVv");
    sb.append("dXQ6IG51bGwgfTsKICAgIHN0YXR1cy5nbyA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoc3RhdHVzLmF2");
    sb.append("YWlsKSB7CiAgICAgICAgc3RhdHVzLmF2YWlsID0gZmFsc2U7CiAgICAgICAgc3RhdHVzLnRpbWVvdXQg");
    sb.append("PSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHN0YXR1cy5hdmFpbCA9IHRy");
    sb.append("dWU7CiAgICAgICAgICBpZiAoc3RhdHVzLmFnYWluKSB7CiAgICAgICAgICAgIHN0YXR1cy5hZ2FpbiA9");
    sb.append("IGZhbHNlOwogICAgICAgICAgICBzdGF0dXMuZ28oKTsKICAgICAgICAgIH0KICAgICAgICB9LCBtcyk7");
    sb.append("CiAgICAgICAgZm9vKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdHVzLmFnYWluID0gdHJ1ZTsK");
    sb.append("ICAgICAgfQogICAgfTsKICAgIHJldHVybiBzdGF0dXMuZ287CiAgfTsKICBzZWxmLmRlbGF5ID0gZGVs");
    sb.append("YXk7CgogIC8vIEhFTFBFUiB8IHByZXBhcmUgYSBmcmVlIHVuc3Vic2NyaWJlIG9iamVjdAogIHZhciBt");
    sb.append("YWtlX3Vuc3ViID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgX19kYXRhOiBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgIH0sIF9fdmlldzogZnVuY3Rpb24gKCkgewogICAgICB9CiAgICB9OwogIH07Cgog");
    sb.append("IC8vIEhFTFBFUiB8IGF1Z21lbnQgYW4gZXhpc3Rpbmcgb2JqZWN0IHdpdGggdW5zdWJzY3JpYmUgZGF0");
    sb.append("YQogIHZhciBhZGRfdW5zdWIgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBvYmouX19kYXRhID0gZnVuY3Rp");
    sb.append("b24gKCkgewogICAgfTsKICAgIG9iai5fX3ZpZXcgPSBmdW5jdGlvbiAoKSB7CiAgICB9OwogIH07Cgog");
    sb.append("IC8vIEhFTFBFUiB8IGZpcmUgdGhlIHVuc3Vic2NyaWJlIGNhbGxzIHdpdGhpbiBhbiBvYmplY3QKICB2");
    sb.append("YXIgZmlyZV91bnN1YiA9IGZ1bmN0aW9uICh1bnN1YikgewogICAgdW5zdWIuX19kYXRhKCk7CiAgICB1");
    sb.append("bnN1Yi5fX3ZpZXcoKTsKICB9OwoKICB2YXIgaXNFbXB0eURlbHRhID0gZnVuY3Rpb24oZGVsdGEpIHsK");
    sb.append("ICAgIGlmICh0eXBlb2YoZGVsdGEpID09ICJmdW5jdGlvbiIpIHsKICAgICAgcmV0dXJuIGZhbHNlOwog");
    sb.append("ICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGRlbHRhKSkgewogICAgICBmb3IgKHZhciBqID0gMDsg");
    sb.append("aiA8IGRlbHRhLmxlbmd0aDsgaisrKSB7CiAgICAgICAgaWYgKCFpc0VtcHR5RGVsdGEoZGVsdGFbal0p");
    sb.append("KSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYg");
    sb.append("KHR5cGVvZihkZWx0YSkgPT0gIm9iamVjdCIpIHsKICAgICAgZm9yICh2YXIgayBpbiBkZWx0YSkgewog");
    sb.append("ICAgICAgIGlmICghaXNFbXB0eURlbHRhKGRlbHRhW2tdKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNl");
    sb.append("OwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvLyBIRUxQRVIg");
    sb.append("fCBzdWJzY3JpYmUgdG8gc3RhdGUgYW5kIHBvcHVsYXRlIHVuc3Vic2NyaWJlIG9iamVjdAogIHZhciBz");
    sb.append("dWJzY3JpYmVfc3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUsIHVuc3ViKSB7CiAgICAvLyAgJiYgIWlzRW1w");
    sb.append("dHlEZWx0YShzdGF0ZS5kYXRhKQogICAgdW5zdWIuX19kYXRhID0gZnVuY3Rpb24gKCkgewogICAgfTsK");
    sb.append("ICAgIHVuc3ViLl9fdmlldyA9IGZ1bmN0aW9uICgpIHsKICAgIH07CgogICAgaWYgKHN0YXRlLmRhdGEg");
    sb.append("IT0gbnVsbCkgewogICAgICB2YXIgZGVsdGEgPSByb290X29mKHN0YXRlLmRhdGEpLmRlbHRhOwogICAg");
    sb.append("ICBpZiAoIWlzRW1wdHlEZWx0YShkZWx0YSkpIHsKICAgICAgICB1bnN1Yi5fX2RhdGEgPSBzdGF0ZS5k");
    sb.append("YXRhLnRyZWUuc3Vic2NyaWJlKGRlbHRhKTsKICAgICAgfQogICAgfQogICAgLy8gICYmICFpc0VtcHR5");
    sb.append("RGVsdGEoc3RhdGUudmlldykKICAgIGlmIChzdGF0ZS52aWV3ICE9IG51bGwpIHsKICAgICAgdmFyIGRl");
    sb.append("bHRhID0gcm9vdF9vZihzdGF0ZS52aWV3KS5kZWx0YTsKICAgICAgaWYgKCFpc0VtcHR5RGVsdGEoZGVs");
    sb.append("dGEpKSB7CiAgICAgICAgdW5zdWIuX192aWV3ID0gc3RhdGUudmlldy50cmVlLnN1YnNjcmliZShkZWx0");
    sb.append("YSk7CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBSVU5USU1FIHwgU3dpdGNoIHRvIHRoZSB2aWV3IG9i");
    sb.append("amVjdAogIHNlbGYucFYgPSBmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiB7IHNlcnZpY2U6IHN0");
    sb.append("YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6ICJ2");
    sb.append("aWV3IiB9OwogIH07CiAgc2VsZi5uZXdTdGF0ZVZpZXdPZiA9IHNlbGYucFY7CgogIC8vIFJVTlRJTUUg");
    sb.append("fCBTd2l0Y2ggdG8gdGhlIGRhdGEgb2JqZWN0CiAgc2VsZi5wRCA9IGZ1bmN0aW9uIChzdGF0ZSkgewog");
    sb.append("ICAgcmV0dXJuIHsgc2VydmljZTogc3RhdGUuc2VydmljZSwgZGF0YTogc3RhdGUuZGF0YSwgdmlldzog");
    sb.append("c3RhdGUudmlldywgY3VycmVudDogImRhdGEiIH07CiAgfTsKICBzZWxmLm5ld1N0YXRlRGF0YU9mID0g");
    sb.append("c2VsZi5wRDsKCiAgLy8gUlVOVElNRSB8IFN3aXRjaCB0byB0aGUgcm9vdCBvYmplY3QgLyAoUm9vdCkK");
    sb.append("ICBzZWxmLnBSID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICB2YXIgbmV4dCA9IHsgc2VydmljZTogc3Rh");
    sb.append("dGUuc2VydmljZSwgZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogc3Rh");
    sb.append("dGUuY3VycmVudCB9OwogICAgdmFyIHByaW9yID0gbmV4dFtzdGF0ZS5jdXJyZW50XTsKICAgIHdoaWxl");
    sb.append("IChwcmlvciAhPSBudWxsKSB7CiAgICAgIG5leHRbc3RhdGUuY3VycmVudF0gPSBwcmlvcjsKICAgICAg");
    sb.append("cHJpb3IgPSBwcmlvci5wYXJlbnQ7CiAgICB9CiAgICByZXR1cm4gbmV4dDsKICB9OwogIHNlbGYubmV3");
    sb.append("U3RhdGVSb290T2YgPSBzZWxmLnBSOwoKICAvLyBSVU5USU1FIHwgLi4vIChVcCkKICBzZWxmLnBVID0g");
    sb.append("ZnVuY3Rpb24gKHN0YXRlKSB7CiAgICB2YXIgbmV4dCA9IHsgc2VydmljZTogc3RhdGUuc2VydmljZSwg");
    sb.append("ZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogc3RhdGUuY3VycmVudCB9");
    sb.append("OwogICAgdmFyIHByaW9yID0gbmV4dFtzdGF0ZS5jdXJyZW50XTsKICAgIGlmIChwcmlvci5wYXJlbnQg");
    sb.append("IT0gbnVsbCkgewogICAgICBuZXh0W3N0YXRlLmN1cnJlbnRdID0gcHJpb3IucGFyZW50OwogICAgfQog");
    sb.append("ICAgcmV0dXJuIG5leHQ7CiAgfTsKICBzZWxmLm5ld1N0YXRlUGFyZW50T2YgPSBzZWxmLnBVOwoKICAv");
    sb.append("LyBSVU5USU1FIHwgZGl2ZSBvbmUgbGV2ZWwgSW50byBwYXRoMS9wYXRoMi8uLi4uL3BhdGhOCiAgc2Vs");
    sb.append("Zi5wSSA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSkgewogICAgdmFyIHByaW9yID0gc3RhdGVbc3RhdGUu");
    sb.append("Y3VycmVudF07CiAgICBpZiAocHJpb3IgPT0gbnVsbCkgewogICAgICBjb25zb2xlLmVycm9yKHN0YXRl");
    sb.append("LmN1cnJlbnQgKyAiIGlzIG5vdCBwcmVzZW50Iik7CiAgICAgIHJldHVybiBzdGF0ZTsKICAgIH0KICAg");
    sb.append("IGlmICghKG5hbWUgaW4gcHJpb3IuZGVsdGEpKSB7CiAgICAgIHByaW9yLmRlbHRhW25hbWVdID0ge307");
    sb.append("CiAgICB9CiAgICB2YXIgbmV4dCA9IHsgc2VydmljZTogc3RhdGUuc2VydmljZSwgZGF0YTogc3RhdGUu");
    sb.append("ZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogc3RhdGUuY3VycmVudCB9OwogICAgbmV4dFtz");
    sb.append("dGF0ZS5jdXJyZW50XSA9IHsKICAgICAgdHJlZTogcHJpb3IudHJlZSwKICAgICAgZGVsdGE6IHByaW9y");
    sb.append("LmRlbHRhW25hbWVdLAogICAgICBwYXJlbnQ6IHByaW9yLAogICAgICBwYXRoOiBuYW1lCiAgICB9Owog");
    sb.append("ICAgaWYgKG5leHQuY3VycmVudCA9PSAiZGF0YSIpIHsKICAgICAgbmV4dC5kYXRhLmNvbm5lY3Rpb24g");
    sb.append("PSBwcmlvci5jb25uZWN0aW9uOwogICAgfQogICAgcmV0dXJuIG5leHQ7CiAgfTsKICBzZWxmLm5ld1N0");
    sb.append("YXRlRGl2ZUludG8gPSBzZWxmLnBJOwoKICAvLyBSVU5USU1FIHwgZXh0ZW5kIHRoZSBnaXZlbiBzdGF0");
    sb.append("ZSB3aXRoIHRoZSB2aWV3IGhhdmluZyBhIHNlcGFyYXRlIGNoaWxkCiAgc2VsZi5wRVYgPSBmdW5jdGlv");
    sb.append("biAoc3RhdGUsIG5hbWUpIHsKICAgIGlmICghKG5hbWUgaW4gc3RhdGUudmlldy5kZWx0YSkpIHsKICAg");
    sb.append("ICAgc3RhdGUudmlldy5kZWx0YVtuYW1lXSA9IHt9OwogICAgfQogICAgcmV0dXJuIHsKICAgICAgc2Vy");
    sb.append("dmljZTogc3RhdGUuc2VydmljZSwKICAgICAgZGF0YTogc3RhdGUuZGF0YSwKICAgICAgdmlldzogewog");
    sb.append("ICAgICAgIHRyZWU6IHN0YXRlLnZpZXcudHJlZSwKICAgICAgICBkZWx0YTogc3RhdGUudmlldy5kZWx0");
    sb.append("YVtuYW1lXSwKICAgICAgICBwYXJlbnQ6IHN0YXRlLnZpZXcsCiAgICAgICAgcGF0aDogbmFtZQogICAg");
    sb.append("ICB9LAogICAgICBjdXJyZW50OiBzdGF0ZS5jdXJyZW50CiAgICB9OwogIH07CiAgc2VsZi5uZXdTdGF0");
    sb.append("ZUNyZWF0ZVZpZXdDaGlsZCA9IHNlbGYucEVWOwoKICBzZWxmLnBJRSA9IGZ1bmN0aW9uIChzdGF0ZSwg");
    sb.append("bmFtZSwgZXhwYW5kVmlldykgewogICAgdmFyIG5leHQgPSBzZWxmLnBJKHN0YXRlLCBuYW1lKTsKICAg");
    sb.append("IGlmIChleHBhbmRWaWV3KSB7CiAgICAgIHJldHVybiBzZWxmLnBFVihuZXh0LCBuYW1lKTsKICAgIH0g");
    sb.append("ZWxzZSB7CiAgICAgIHJldHVybiBuZXh0OwogICAgfQogIH07CgogIHZhciBmb3JrID0gZnVuY3Rpb24g");
    sb.append("KHByaW9yU3RhdGUpIHsKICAgIHZhciBzdGF0ZSA9IHsKICAgICAgc2VydmljZTogcHJpb3JTdGF0ZS5z");
    sb.append("ZXJ2aWNlLAogICAgICBkYXRhOiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLmRhdGEpLAogICAgICB2");
    sb.append("aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICBjdXJyZW50OiBwcmlvclN0");
    sb.append("YXRlLmN1cnJlbnQKICAgIH07CiAgICBpZiAoc3RhdGUuZGF0YSAhPSBudWxsKSB7CiAgICAgIHN0YXRl");
    sb.append("LmRhdGEuY29ubmVjdGlvbiA9IHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uOwogICAgfQogICAgcmV0");
    sb.append("dXJuIHN0YXRlOwogIH07CgogIC8vIFJVTlRJTUUgfCBzdWJzY3JpYmUgYmV0d2VlbiB0aGUgc3RhdGUg");
    sb.append("YW5kIHRoZSBvYmplY3QuCiAgLy8gV2hlbiB0aGUgbWVtYmVyIGZpZWxkIHdpdGhpbiBzdGF0ZSBvZiBu");
    sb.append("YW1lIGNoYW5nZXMsIGNvcHkgdGhhdCB2YWx1ZSBpbnRvIHRoZSBvYmogYW5kIHJ1biByZWNvbXB1dGUo");
    sb.append("KQogIHNlbGYuWSA9IGZ1bmN0aW9uIChzdGF0ZSwgb2JqLCBuYW1lLCByZWNvbXB1dGUpIHsKICAgIHZh");
    sb.append("ciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAgIHJl");
    sb.append("Y29tcHV0ZSgpOwogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICBz");
    sb.append("ZWxmLlkyID0gZnVuY3Rpb24gKHN0YXRlLCByLCBrZXksIG5hbWUsIHJlY29tcHV0ZSkgewogICAgdmFy");
    sb.append("IHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgb2JqID0gci5fW2tleV07CiAgICAgIG9i");
    sb.append("altuYW1lXSA9IHZhbHVlOwogICAgICByZWNvbXB1dGUob2JqKTsKICAgICAgcmV0dXJuIHRydWU7CiAg");
    sb.append("ICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJTUU6IGJ1");
    sb.append("aWxkIGFuIHJ4b2JqCiAgc2VsZi5SWCA9IGZ1bmN0aW9uICh2YXJzKSB7CiAgICB2YXIgbyA9IHt9Owog");
    sb.append("ICAgby5fID0ge307CiAgICBmb3IgKHZhciBrID0gMDsgayA8IHZhcnMubGVuZ3RoOyBrKyspIHsKICAg");
    sb.append("ICAgby5fW3ZhcnNba11dID0ge307CiAgICB9CiAgICBvLl9fID0gZnVuY3Rpb24oKSB7fTsKICAgIHJl");
    sb.append("dHVybiBvOwogIH07CgogIC8vIFJVTlRJTUUgfCBKdXN0IHN1YnNjcmliZWUgdmFsdWUgdG8gdGhlIG9i");
    sb.append("amVjdCBmaWVsZCBvZiBuYW1lIChuby1yZWNvbXB1dGUpCiAgc2VsZi5ZUyA9IGZ1bmN0aW9uIChzdGF0");
    sb.append("ZSwgb2JqLCBuYW1lKSB7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIG9ialtu");
    sb.append("YW1lXSA9IHZhbHVlOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUs");
    sb.append("IG5hbWUsIHN1Yik7CiAgfTsKCiAgLy8gUlVOVElNRSB8ICJUZXh0IgogIHNlbGYuVCA9IGZ1bmN0aW9u");
    sb.append("ICh0eCkgewogICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHR4KTsKICB9OwoKICAvLyBj");
    sb.append("b252ZXJ0IGEgdmFsdWUgaW50byBhIGJvb2xlYW4KICBzZWxmLkIgPSBmdW5jdGlvbih2YWwpIHsKICAg");
    sb.append("IGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICByZXR1cm4gdmFs");
    sb.append("ID09ICJ0cnVlIjsKICB9OwoKICAvLyBSVU5USU1FIHwgPHZpZXctd3JpdGUgbmFtZT0iIiB2YWx1ZT0i");
    sb.append("Ij4KICBzZWxmLlZXID0gZnVuY3Rpb24oc3RhdGUsIG5hbWUsIHJ4T2JqKSB7CiAgICByeE9iai5fXyA9");
    sb.append("IGRlYm91bmNlKDUwLCBmdW5jdGlvbigpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICB2YXIgdmFs");
    sb.append("dWUgPSByeE9iai52YWx1ZTsKICAgICAgaWYgKHR5cGVvZiAodmFsdWUpID09ICJmdW5jdGlvbiIpIHsK");
    sb.append("ICAgICAgICBvYmpbbmFtZV0gPSB2YWx1ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIG9ialtuYW1l");
    sb.append("XSA9IHZhbHVlOwogICAgICB9CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2Jq");
    sb.append("KTsKICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9KTsKICB9OwoKICAvLyBS");
    sb.append("VU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLj4KICBzZWxmLkwgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUp");
    sb.append("IHsKICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7CiAgICB2YXIgc3ViID0g");
    sb.append("ZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRvbS5ub2RlVmFsdWUgPSB2YWx1ZTsKICAgIH07CiAgICBz");
    sb.append("dWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICByZXR1cm4gZG9tOwogIH07CgogIC8vIFJVTlRJ");
    sb.append("TUUgfCA8bG9va3VwIHBhdGg9Li4uIHRyYW5zZm9ybT0iJHRyYW5zZm9ybSIgLz4KICBzZWxmLkxUID0g");
    sb.append("ZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCB0cmFuc2Zvcm0pIHsKICAgIHZhciBkb20gPSBkb2N1bWVudC5j");
    sb.append("cmVhdGVUZXh0Tm9kZSgiIik7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGlm");
    sb.append("ICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgZG9tLm5vZGVWYWx1ZSA9IHRyYW5zZm9ybSh2YWx1ZSk7");
    sb.append("CiAgICAgIH0KICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICByZXR1cm4g");
    sb.append("ZG9tOwogIH07CgogIHNlbGYuTGggPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUpIHsKICAgIHZhciBkb20g");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZh");
    sb.append("bHVlKSB7CiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgZG9tLmlubmVySFRNTCA9IHZh");
    sb.append("bHVlOwogICAgICB9CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogICAgcmV0");
    sb.append("dXJuIGRvbTsKICB9OwoKICAvLyBSVU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLiB0cmFuc2Zvcm09IiR0");
    sb.append("cmFuc2Zvcm0iIC8+CiAgc2VsZi5MVGRUID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCB0cmFuc2Zvcm0s");
    sb.append("IGZyZXEpIHsKICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7CiAgICAvLyBj");
    sb.append("cmVhdGUgdGhlIG5leHVzIG9iamVjdAogICAgdmFyIG9iaiA9IHt9OwogICAgb2JqLmZyZXEgPSBmcmVx");
    sb.append("OwogICAgb2JqLnZhbHVlID0gIiI7CgogICAgLy8gdXBkYXRlIHdpbGwgZXhlY3V0ZSB0aGUgdHJhbnNm");
    sb.append("b3JtIG9uIHRoZSB2YWx1ZQogICAgb2JqLnVwZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICBkb20ubm9k");
    sb.append("ZVZhbHVlID0gdHJhbnNmb3JtKHRoaXMudmFsdWUpOwogICAgfS5iaW5kKG9iaik7CgogICAgLy8gc3Vi");
    sb.append("c2NyaXB0aW9uIHdpbGwgc3luYyB0aGUgdmFsdWUKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUp");
    sb.append("IHsKICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHsKICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAg");
    sb.append("ICAgICAgdGhpcy51cGRhdGUoKTsKICAgICAgfQogICAgfS5iaW5kKG9iaik7CgogICAgLy8gcmVmcmVz");
    sb.append("aCB3aWxsIHJlLWV4ZWN1dGUgdGhlIHVwZGF0ZSAoYW5kIHRodXMgdGhlIHRyYW5zZm9ybSkKICAgIG9i");
    sb.append("ai5yZWZyZXNoID0gZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgIGlmIChkb2N1");
    sb.append("bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsgLy8gd2lsbCBydW4gc28gbG9uZyBhcyB0aGUgRE9NIGNv");
    sb.append("bnRhaW5zIHRoZSBub2RlIHdlIG1hbmlwdWxhdGVkCiAgICAgICAgd2luZG93LnNldFRpbWVvdXQodGhp");
    sb.append("cy5yZWZyZXNoLCB0aGlzLmZyZXEpOwogICAgICB9CiAgICB9LmJpbmQob2JqKTsKICAgIC8vIGtpY2sg");
    sb.append("b2ZmIHRoZSBhdXRvIHRyYW5zZm9ybQogICAgd2luZG93LnNldFRpbWVvdXQob2JqLnJlZnJlc2gsIGZy");
    sb.append("ZXEpOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogICAgcmV0dXJuIGRvbTsKICB9OwoK");
    sb.append("ICAvLyBSVU5USU1FIHwgPHRhZz4KICBzZWxmLkUgPSBmdW5jdGlvbiAodGFnLCBucykgewogICAgaWYg");
    sb.append("KG5zID09IHVuZGVmaW5lZCB8fCBucyA9PSBudWxsKSB7CiAgICAgIHZhciBkb20gPSBkb2N1bWVudC5j");
    sb.append("cmVhdGVFbGVtZW50KHRhZyk7CiAgICAgIGlmICh0YWcgPT0gInNlbGVjdCIpIHsKICAgICAgICBkb20u");
    sb.append("YWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7IGRvbS5yeHZhbHVlID0gZG9tLnZh");
    sb.append("bHVlOyB9KTsKICAgICAgfQogICAgICByZXR1cm4gZG9tOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHJl");
    sb.append("c3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgdGFnKTsKICAgICAgcmVzdWx0LnNldEF0");
    sb.append("dHJpYnV0ZSgieG1sbnMiLCBucyk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfTsKCiAgc2Vs");
    sb.append("Zi5DU3QgPSBmdW5jdGlvbiAocGFyZW50LCBzdGF0ZSwgY2hpbGRNYWtlckNvbm5lY3RlZCwgY2hpbGRN");
    sb.append("YWtlckRpc2Nvbm5lY3RlZCkgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgaWYgKCFz");
    sb.append("dGF0ZS5kYXRhLmNvbm5lY3Rpb24pIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgc3RhdGUuZGF0YS5j");
    sb.append("b25uZWN0aW9uLmNvbm5lY3RlZChmdW5jdGlvbihjcykgewogICAgICBpZiAodGhpcy5wcmlvciA9PSBj");
    sb.append("cykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBudWtlKHBhcmVudCk7CiAgICAgIGZpcmVf");
    sb.append("dW5zdWIodW5zdWIpOwogICAgICB0aGlzLnByaW9yID0gY3M7CiAgICAgIHZhciBuZXdTdGF0ZSA9IGZv");
    sb.append("cmsoc3RhdGUpOwogICAgICBpZiAoY3MpIHsKICAgICAgICBjaGlsZE1ha2VyQ29ubmVjdGVkKHBhcmVu");
    sb.append("dCwgbmV3U3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIGNoaWxkTWFrZXJEaXNjb25uZWN0ZWQo");
    sb.append("cGFyZW50LCBuZXdTdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKG5ld1N0YXRlLCB1");
    sb.append("bnN1Yik7CiAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHBhcmVudCk7CiAgICB9LmJp");
    sb.append("bmQoe3ByaW9yOm51bGx9KSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxsb2NhbC1zdG9yYWdlLXBvbGwg");
    sb.append("a2V5PSRrZXkgW21zPSRtc10+CiAgc2VsZi5Mb1N0UG8gPSBmdW5jdGlvbihwYXJlbnQsIHByaW9yU3Rh");
    sb.append("dGUsIHJ4T2JqLCBjaGlsZE1ha2VyRm91bmQsIGNoaWxkTWFrZXJOb3RGb3VuZCkgewogICAgdmFyIHVu");
    sb.append("c3ViID0gbWFrZV91bnN1YigpOwogICAgdmFyIHNtID0ge307CiAgICBzbS5rZXkgPSBudWxsOwogICAg");
    sb.append("c20ubXMgPSA1MDAwOwogICAgc20ubGFzdCA9ICIhIjsKICAgIHNtLnAgPSBmdW5jdGlvbigpIHsKICAg");
    sb.append("ICAgaWYgKHRoaXMua2V5ID09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFy");
    sb.append("IHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5rZXkpOwogICAgICBpZiAodmFsdWUgPT0g");
    sb.append("dGhpcy5sYXN0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMubGFzdCA9IHZhbHVl");
    sb.append("OwogICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICB2YXIgdHJl");
    sb.append("ZSA9IG5ldyBBZGFtYVRyZWUoKTsKICAgICAgdmFyIHN0YXRlID0gewogICAgICAgIHNlcnZpY2U6IHBy");
    sb.append("aW9yU3RhdGUuc2VydmljZSwKICAgICAgICBkYXRhOiB7IGNvbm5lY3Rpb246IHByaW9yU3RhdGUuY29u");
    sb.append("bmVjdGlvbiwgdHJlZTogdHJlZSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwK");
    sb.append("ICAgICAgICB2aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICAgIGN1cnJl");
    sb.append("bnQ6ICJkYXRhIgogICAgICB9OwogICAgICBpZiAodmFsdWUgPT0gbnVsbCkgewogICAgICAgIGNoaWxk");
    sb.append("TWFrZXJOb3RGb3VuZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUs");
    sb.append("IHVuc3ViKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGlsZE1ha2VyRm91bmQocGFyZW50LCBzdGF0");
    sb.append("ZSk7CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgICAgdHJlZS51cGRh");
    sb.append("dGUodHJlZS5NYWtlRGVsdGEoSlNPTi5wYXJzZSh2YWx1ZSkpKTsKICAgICAgfQoKICAgIH0uYmluZChz");
    sb.append("bSk7CiAgICByeE9iai5fXyA9IGRlYm91bmNlKDUwLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICgna2V5");
    sb.append("JyBpbiByeE9iaikgewogICAgICAgIHRoaXMua2V5ID0gcnhPYmoua2V5OwogICAgICB9CiAgICAgIGlm");
    sb.append("ICgnbXMnIGluIHJ4T2JqKSB7CiAgICAgICAgdGhpcy5tcyA9IHBhcnNlSW50KHJ4T2JqLm1zKTsKICAg");
    sb.append("ICAgICBpZiAoaXNOYU4odGhpcy5tcykpIHsKICAgICAgICAgIHRoaXMubXMgPSA1MDAwOwogICAgICAg");
    sb.append("IH0KICAgICAgfQogICAgICB0aGlzLnAoKTsKICAgIH0uYmluZChzbSkpOwoKICAgIHNtLnRpbWVvdXQg");
    sb.append("PSBmdW5jdGlvbigpIHsKICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMocGFyZW50KSkgewog");
    sb.append("ICAgICAgIHRoaXMucCgpOwogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMudGltZW91dCwgdGhp");
    sb.append("cy5tcyk7CiAgICAgIH0KICAgIH0uYmluZChzbSk7CiAgICB3aW5kb3cuc2V0VGltZW91dChzbS50aW1l");
    sb.append("b3V0LCA1MCk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxkb2N1bWVudC1nZXQgc3BhY2U9IiRzcGFjZSIg");
    sb.append("a2V5PSIka2V5IiB1cmw9IiRwYXRoIiBzZWFyY2g6eD0iLi4uIiAuLi4+CiAgc2VsZi5EY0cgPSBmdW5j");
    sb.append("dGlvbihwYXJlbnQsIHByaW9yU3RhdGUsIHJ4T2JqLCBjaGlsZE1ha2VyRmV0Y2hlZCwgY2hpbGRNYWtl");
    sb.append("ckZhaWxlZCkgewogICAgLy8gVE9ETwogIH07CgogIC8vIFJVTlRJTUUgfCA8ZG9tYWluLWdldCB1cmw9");
    sb.append("InBhdGgiIHNlYXJjaDp4PSIuLi4iIC4uLj4KICBzZWxmLkRHID0gZnVuY3Rpb24ocGFyZW50LCBwcmlv");
    sb.append("clN0YXRlLCByeE9iaiwgY2hpbGRNYWtlckZldGNoZWQsIGNoaWxkTWFrZXJGYWlsZWQsIGRlbGF5TGlt");
    sb.append("aXQpIHsKICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIHZhciBkZWxheVRvVXNlID0gdHlw");
    sb.append("ZW9mKGRlbGF5TGltaXQpID09ICJudW1iZXIiID8gZGVsYXlMaW1pdCA6IDI1MDsKICAgIHJ4T2JqLl9f");
    sb.append("ID0gZGVib3VuY2UoNTAsIGRlbGF5KGRlbGF5VG9Vc2UsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCEo");
    sb.append("J3VybCcgaW4gcnhPYmopKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBhcmdzID0g");
    sb.append("W107CiAgICAgIHZhciBpZGVudGl0eSA9IG51bGw7CiAgICAgIGZvciAodmFyIGFyZyBpbiByeE9iaikg");
    sb.append("ewogICAgICAgIHZhciB2YWwgPSByeE9ialthcmddOwogICAgICAgIHN3aXRjaCAoYXJnKSB7CiAgICAg");
    sb.append("ICAgICBjYXNlICJfXyI6CiAgICAgICAgICBjYXNlICJfIjoKICAgICAgICAgIGNhc2UgInVybCI6CiAg");
    sb.append("ICAgICAgICBjYXNlICJyZWRpcmVjdCI6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAi");
    sb.append("aWRlbnRpdHkiOgogICAgICAgICAgICBpZiAodHlwZW9mKHZhbCkgPT0gInN0cmluZyIpIHsKICAgICAg");
    sb.append("ICAgICAgICBpZGVudGl0eSA9IHJ4T2JqW2FyZ107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJl");
    sb.append("YWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBhcmdzLnB1c2goYXJnICsgIj0iICsgZW5j");
    sb.append("b2RlVVJJQ29tcG9uZW50KHZhbCkpOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgdXJsID0gcnhP");
    sb.append("YmoudXJsICsgKGFyZ3MubGVuZ3RoID4gMCA/ICI/IiArIGFyZ3Muam9pbigiJiIpIDogIiIpOwogICAg");
    sb.append("ICB0aGlzLmdlbiArKzsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgeGh0dHAgPSBuZXcg");
    sb.append("WE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgIGlmICh0aGlzLnhodHRwLnJlYWR5U3RhdGUgPT0gNCAmJiB0aGlzLmdlbiA9PSBz");
    sb.append("ZWxmLmdlbikgewogICAgICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgICAgICBudWtlKHBhcmVu");
    sb.append("dCk7CiAgICAgICAgICB2YXIgdHJlZSA9IG5ldyBBZGFtYVRyZWUoKTsKICAgICAgICAgIHZhciBzdGF0");
    sb.append("ZSA9IHsKICAgICAgICAgICAgc2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNlLAogICAgICAgICAgICBk");
    sb.append("YXRhOiB7IGNvbm5lY3Rpb246IHByaW9yU3RhdGUuY29ubmVjdGlvbiwgdHJlZTogdHJlZSwgZGVsdGE6");
    sb.append("IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAgICAgICAgICAgdmlldzogbmV3X2RlbHRh");
    sb.append("X2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICAgICAgY3VycmVudDogImRhdGEiCiAgICAgICAg");
    sb.append("ICB9OwoKICAgICAgICAgIGlmICh0aGlzLnhodHRwLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAg");
    sb.append("dmFyIHR5cGUgPSB0aGlzLnhodHRwLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKTsKICAg");
    sb.append("ICAgICAgICAgaWYgKHR5cGUgPT0gImFwcGxpY2F0aW9uL2pzb24iKSB7CiAgICAgICAgICAgICAgdmFy");
    sb.append("IHRvUHVzaCA9IHRyZWUuTWFrZURlbHRhKEpTT04ucGFyc2UodGhpcy54aHR0cC5yZXNwb25zZVRleHQp");
    sb.append("KTsKICAgICAgICAgICAgICBjaGlsZE1ha2VyRmV0Y2hlZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICAg");
    sb.append("ICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsKICAgICAgICAgICAgICB0cmVlLnVwZGF0");
    sb.append("ZSh0b1B1c2gpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNoaWxkTWFrZXJGYWls");
    sb.append("ZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1");
    sb.append("Yik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNoaWxkTWFrZXJG");
    sb.append("YWlsZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5z");
    sb.append("dWIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfS5iaW5kKHtnZW46c2VsZi5nZW4sIHhodHRw");
    sb.append("OnhodHRwfSk7CiAgICAgIHhodHRwLm9wZW4oIkdFVCIsICBzZWxmLmJhc2UgKyAiL35kIiArIHVybCwg");
    sb.append("dHJ1ZSk7CiAgICAgIGlmIChpZGVudGl0eSAhPSBudWxsKSB7CiAgICAgICAgeGh0dHAuc2V0UmVxdWVz");
    sb.append("dEhlYWRlcigiQXV0aG9yaXphdGlvbiIsICJCZWFyZXIgIiArIGlkZW50aXR5KTsKICAgICAgfQogICAg");
    sb.append("ICB4aHR0cC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogICAgICB4aHR0cC5zZW5kKCk7CiAgICB9LmJp");
    sb.append("bmQoe3VybDoiIiwgZ2VuOjAsIGJhc2U6c2VsZi5wcm90b2NvbCArICIvLyIgKyBzZWxmLmhvc3R9KSkp");
    sb.append("OwogICAgcnhPYmouX18oKTsKICB9OwoKICAvLyBSVU5USU1FIHwgPHBpY2sgbmFtZT0uLi4+CiAgc2Vs");
    sb.append("Zi5QID0gZnVuY3Rpb24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgcnhPYmosIGNoaWxkTWFrZXJDb25uZWN0");
    sb.append("ZWQsIGNoaWxkTWFrZXJEaXNjb25uZWN0ZWQsIGtlZXBPcGVuKSB7CiAgICB2YXIgdW5zdWIgPSBtYWtl");
    sb.append("X3Vuc3ViKCk7CiAgICByeE9iai5fXyA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCEoJ25hbWUnIGlu");
    sb.append("IHJ4T2JqKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5uYW1lID09IHJ4");
    sb.append("T2JqLm5hbWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNvID0gZ2V0X2Nvbm5l");
    sb.append("Y3Rpb25fb2JqKHJ4T2JqLm5hbWUpOwogICAgICB0aGlzLm5hbWUgPSByeE9iai5uYW1lOwogICAgICBj");
    sb.append("by5jb25uZWN0ZWQoZnVuY3Rpb24gKGNzKSB7CiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWQgJiYga2Vl");
    sb.append("cE9wZW4pIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbnVrZShwYXJlbnQpOwog");
    sb.append("ICAgICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICAgIHZhciBzdGF0ZSA9IHsKICAgICAgICAgIHNl");
    sb.append("cnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwKICAgICAgICAgIGRhdGE6IHsgY29ubmVjdGlvbjogY28s");
    sb.append("IHRyZWU6IGNvLnRyZWUsIGRlbHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAg");
    sb.append("ICAgICB2aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICAgICAgY3VycmVu");
    sb.append("dDogImRhdGEiCiAgICAgICAgfTsKICAgICAgICBpZiAoY3MpIHsKICAgICAgICAgIHRoaXMucmVuZGVy");
    sb.append("ZWQgPSB0cnVlOwogICAgICAgICAgY2hpbGRNYWtlckNvbm5lY3RlZChwYXJlbnQsIHN0YXRlKTsKICAg");
    sb.append("ICAgICB9IGVsc2UgewogICAgICAgICAgY2hpbGRNYWtlckRpc2Nvbm5lY3RlZChwYXJlbnQsIHN0YXRl");
    sb.append("KTsKICAgICAgICB9CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgICAg");
    sb.append("Ly8gVE9ETzogcmV0dXJuIGZhbHNlIHRvIHVuc3ViCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0u");
    sb.append("YmluZCh0aGlzKSk7CiAgICB9LmJpbmQoeyBuYW1lOiAiIiwgcmVuZGVyZWQ6ZmFsc2UgfSk7CiAgfTsK");
    sb.append("CiAgLy8gUlVOVElNRSB8IDx0ZW1wbGF0ZSBuYW1lPSIuLi4iPgogIHNlbGYuVFAgPSBmdW5jdGlvbiAo");
    sb.append("bmFtZSwgZm9vKSB7CiAgICB0ZW1wbGF0ZXNbbmFtZV0gPSBmb287CiAgfTsKCiAgLy8gY29uZmlnOmlm");
    sb.append("PSJrZXk9dmFsdWUiCiAgc2VsZi5DRkd0ID0gZnVuY3Rpb24gKGNvbmZpZywga2V5LCB2YWx1ZSkgewog");
    sb.append("ICAgaWYgKGtleSBpbiBjb25maWcpIHsKICAgICAgcmV0dXJuIGNvbmZpZ1trZXldID09IHZhbHVlOwog");
    sb.append("ICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH07CiAgLy8gY29uZmlnOmlmPSJrZXkiCiAgc2VsZi5DRkdi");
    sb.append("ID0gZnVuY3Rpb24gKGNvbmZpZywga2V5KSB7CiAgICBjb25zb2xlLmxvZyhjb25maWcpOwogICAgaWYg");
    sb.append("KGtleSBpbiBjb25maWcpIHsKICAgICAgcmV0dXJuIGNvbmZpZ1trZXldID09PSB0cnVlOwogICAgfQog");
    sb.append("ICAgcmV0dXJuIGZhbHNlOwogIH07CgogIC8vIFJVTlRJTUUgfCA8dGFnIHJ4OnRlbXBsYXRlPSRuYW1l");
    sb.append("PgogIHNlbGYuVVQgPSBmdW5jdGlvbiAocGFyZW50LCBzdGF0ZSwgbmFtZSwgY2hpbGRfbWFrZXIsIGNm");
    sb.append("ZykgewogICAgdmFyIGZvbyA9IHRlbXBsYXRlc1tuYW1lXTsKICAgIGlmICh0eXBlb2YoZm9vKSA9PSAi");
    sb.append("ZnVuY3Rpb24iKSB7CiAgICAgIGZvbyhwYXJlbnQsIHN0YXRlLCBjaGlsZF9tYWtlciwgY2ZnKTsKICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoImZhaWxlZCB0byBmaW5kIHRlbXBsYXRlOiAiICsg");
    sb.append("bmFtZSk7CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0YWcgcng6c3dpdGNoPXBhdGggLi4+CiAg");
    sb.append("c2VsZi5TVyA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIG5hbWUsIGNoaWxkcmVuTWFrZXIp");
    sb.append("IHsKICAgIHZhciBzd3N0ID0geyBwcmlvcjogbnVsbCB9OwogICAgYWRkX3Vuc3ViKHN3c3QpOwogICAg");
    sb.append("dmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT0gdGhpcy5wcmlvcikg");
    sb.append("ewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnByaW9yID0gdmFsdWU7CiAgICAgIGZp");
    sb.append("cmVfdW5zdWIodGhpcyk7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFyIHN0YXRlID0gZm9yayhw");
    sb.append("cmlvclN0YXRlKTsKICAgICAgY2hpbGRyZW5NYWtlcihwYXJlbnQsIHNlbGYucEQoc3RhdGUpLCAiIiAr");
    sb.append("IHZhbHVlKTsKICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB0aGlzKTsKICAgIH0uYmluZChzd3N0");
    sb.append("KTsKICAgIHN1YnNjcmliZShwcmlvclN0YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJTUUg");
    sb.append("fCA8dGFnIHJ4Oml0ZXJhdGU9cGF0aCAuLi4+CiAgc2VsZi5JVCA9IGZ1bmN0aW9uIChwYXJlbnREb20s");
    sb.append("IHN0YXRlLCBuYW1lLCBleHBhbmRWaWV3LCBtYWtlciwgaGlkZU9uWmVybykgewogICAgdmFyIGl0X3N0");
    sb.append("YXRlID0gc2VsZi5wSUUoc3RhdGUsIG5hbWUsIGV4cGFuZFZpZXcpOwogICAgdmFyIGRvbUJ5S2V5ID0g");
    sb.append("e307CiAgICB2YXIgdmlld1VuU3ViQnlLZXkgPSB7fTsKICAgIHZhciBraWxsID0gZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICBmb3IgKHZhciBrZXkgaW4gdmlld1VuU3ViQnlLZXkpIHsKICAgICAgICBmaXJlX3Vuc3Vi");
    sb.append("KHZpZXdVblN1YkJ5S2V5W2tleV0pOwogICAgICAgIGRlbGV0ZSB2aWV3VW5TdWJCeUtleVtrZXldOwog");
    sb.append("ICAgICB9CiAgICAgIGZvciAodmFyIGtleSBpbiBkb21CeUtleSkgewogICAgICAgIGRlbGV0ZSBkb21C");
    sb.append("eUtleVtrZXldOwogICAgICB9CiAgICB9OwogICAgaWYgKGhpZGVPblplcm8pIHsKICAgICAgcGFyZW50");
    sb.append("RG9tLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9CgogICAgdmFyIHNpZ25hbHMgPSB7aXNOZXc6");
    sb.append("ZmFsc2V9OwoKICAgIHZhciBzdWIgPSB7CiAgICAgICIrIjogZnVuY3Rpb24gKGtleSkgewogICAgICAg");
    sb.append("IHZhciBuZXdfc3RhdGUgPSBmb3JrKHNlbGYucElFKGl0X3N0YXRlLCBrZXksIGV4cGFuZFZpZXcpKTsK");
    sb.append("ICAgICAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICAgICAgdmFyIGRvbSA9IG1ha2VyKG5l");
    sb.append("d19zdGF0ZSk7CiAgICAgICAgc2lnbmFscy5pc05ldyA9IHRydWU7CiAgICAgICAgZG9tQnlLZXlba2V5");
    sb.append("XSA9IGRvbTsKICAgICAgICB2aWV3VW5TdWJCeUtleVtrZXldID0gdW5zdWI7CiAgICAgICAgcGFyZW50");
    sb.append("RG9tLmFwcGVuZChkb20pOwogICAgICAgIHZhciBpdGVtX2RlbHRhID0gbmV3X3N0YXRlLmRhdGEuZGVs");
    sb.append("dGE7CiAgICAgICAgbmV3X3N0YXRlLmRhdGEuZGVsdGEgPSB7fTsKICAgICAgICBpZiAobmV3X3N0YXRl");
    sb.append("LmRhdGEucGFyZW50ICYmIG5ld19zdGF0ZS5kYXRhLnBhdGggJiYgbmV3X3N0YXRlLmRhdGEucGFyZW50");
    sb.append("LmRlbHRhKSB7CiAgICAgICAgICBuZXdfc3RhdGUuZGF0YS5wYXJlbnQuZGVsdGFbbmV3X3N0YXRlLmRh");
    sb.append("dGEucGF0aF0gPSBuZXdfc3RhdGUuZGF0YS5kZWx0YTsKICAgICAgICB9CiAgICAgICAgc3Vic2NyaWJl");
    sb.append("X3N0YXRlKG5ld19zdGF0ZSwgdW5zdWIpOwogICAgICAgIGlmIChleHBhbmRWaWV3KSB7CiAgICAgICAg");
    sb.append("ICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHBhdGhfdG8obmV3X3N0YXRlLnZpZXcsIHsiJGtleSI6IGtl");
    sb.append("eX0pKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBpdGVtX2RlbHRhOwogICAgICB9LAogICAgICAi");
    sb.append("LSI6IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBpZiAoa2V5IGluIGRvbUJ5S2V5KSB7CiAgICAgICAg");
    sb.append("ICB0cnkgewogICAgICAgICAgICBwYXJlbnREb20ucmVtb3ZlQ2hpbGQoZG9tQnlLZXlba2V5XSk7CiAg");
    sb.append("ICAgICAgICB9IGNhdGNoIChleCkge30KICAgICAgICAgIGRlbGV0ZSBkb21CeUtleVtrZXldOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBpZiAoa2V5IGluIHZpZXdVblN1YkJ5S2V5KSB7CiAgICAgICAgICBmaXJlX3Vu");
    sb.append("c3ViKHZpZXdVblN1YkJ5S2V5W2tleV0pOwogICAgICAgICAgZGVsZXRlIHZpZXdVblN1YkJ5S2V5W2tl");
    sb.append("eV07CiAgICAgICAgfQogICAgICB9LAogICAgICAifiI6IGZ1bmN0aW9uIChvcmQpIHsKICAgICAgICB2");
    sb.append("YXIgdmFsdWVUb1NldCA9IGZhbHNlOwogICAgICAgIC8vIHRoZSB2YWx1ZXMgYXJlIGZpbGxpbmcgdXAg");
    sb.append("QUZURXIgdGhlIHZhbHVlIHdhcyBzZXQsCiAgICAgICAgLy8gc28gZGV0ZWN0IHRoZSBhYnNlbmNlIG9m");
    sb.append("IGEgdmFsdWUgYWxvbmcgd2l0aCB0aGUgZXhpc3RlbmNlIG9mIGEgdmFsdWUKICAgICAgICBpZiAoIXBh");
    sb.append("cmVudERvbS52YWx1ZSAmJiBwYXJlbnREb20ucnh2YWx1ZSAhPSAiIikgewogICAgICAgICAgdmFsdWVU");
    sb.append("b1NldCA9IHBhcmVudERvbS5yeHZhbHVlOwogICAgICAgICAgLy8gdGhpcyB2YWx1ZSwgd2Ugd2FudCB0");
    sb.append("byByZXN0b3JlIG9uY2UKICAgICAgICB9CiAgICAgICAgaWYgKGhpZGVPblplcm8pIHsKICAgICAgICAg");
    sb.append("IGlmIChvcmQubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgcGFyZW50RG9tLnN0eWxlLmRpc3BsYXkg");
    sb.append("PSAibm9uZSI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwYXJlbnREb20uc3R5bGUuZGlz");
    sb.append("cGxheSA9ICIiOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBudWtlKHBhcmVudERvbSk7CiAg");
    sb.append("ICAgICAgaWYgKG9yZCA9PSBudWxsKSB7CiAgICAgICAgICBraWxsKCk7CiAgICAgICAgICByZXR1cm47");
    sb.append("CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb3JkLmxlbmd0aDsgaysrKSB7CiAg");
    sb.append("ICAgICAgICBwYXJlbnREb20uYXBwZW5kKGRvbUJ5S2V5W29yZFtrXV0pOwogICAgICAgIH0KICAgICAg");
    sb.append("ICBpZiAodmFsdWVUb1NldCkgewogICAgICAgICAgcGFyZW50RG9tLnZhbHVlID0gdmFsdWVUb1NldDsK");
    sb.append("ICAgICAgICB9CiAgICAgICAgcGFyZW50RG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJvcmRlcmVk");
    sb.append("IikpOwogICAgICAgIGlmIChzaWduYWxzLmlzTmV3KSB7CiAgICAgICAgICBwYXJlbnREb20uZGlzcGF0");
    sb.append("Y2hFdmVudChuZXcgRXZlbnQoIm5ldyIpKTsKICAgICAgICAgIHNpZ25hbHMuaXNOZXcgPSBmYWxzZTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAg");
    sb.append("fTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLi4gcng6bW9uaXRvcj0ic3RhdGUtcGF0aCIgcng6cmlzZT0i");
    sb.append("Y29tbWFuZHMuLi4iIHJ4OmZhbGw9ImNvbW1hbmRzLi4uIgogIHNlbGYuTU4gPSBmdW5jdGlvbiAoZG9t");
    sb.append("LCBzdGF0ZSwgbmFtZSwgc2tpcEZpcnN0LCBkZWxheSkgewogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2");
    sb.append("YWx1ZSkgewogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICB2YXIgbiA9");
    sb.append("IDA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIG4gPSB0eXBlb2YgKHZhbHVlKSA9PSAnbnVtYmVyJyA/");
    sb.append("IHZhbHVlIDogcGFyc2VJbnQodmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGZhaWxlZFBhcnNpbmdOKSB7");
    sb.append("CiAgICAgICAgICBpZiAodmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT0gInRydWUiKSB7CiAgICAgICAg");
    sb.append("ICAgIG4gPSAxOwogICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gZmFsc2UgfHwgdmFsdWUgPT0g");
    sb.append("ImZhbHNlIikgewogICAgICAgICAgICBuID0gMDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAg");
    sb.append("aWYgKHRoaXMuZmlyc3QpIHsKICAgICAgICAgIHRoaXMuYXQgPSBuOwogICAgICAgICAgdGhpcy5maXJz");
    sb.append("dCA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5hdCA8");
    sb.append("IG4pIHsKICAgICAgICAgIHZhciBlID0gbmV3IEV2ZW50KCJyaXNlIik7CiAgICAgICAgICBkb20uZGlz");
    sb.append("cGF0Y2hFdmVudChlKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXQgPiBuKSB7CiAgICAgICAgICB2");
    sb.append("YXIgZSA9IG5ldyBFdmVudCgiZmFsbCIpOwogICAgICAgICAgZG9tLmRpc3BhdGNoRXZlbnQoZSk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIHRoaXMuYXQgPSBuOwogICAgICB9LmJpbmQodGhpcyksIHRoaXMuZGVsYXkp");
    sb.append("OwogICAgfS5iaW5kKHthdDotMSwgZmlyc3Q6c2tpcEZpcnN0LCBkZWxheTpkZWxheSA/IGRlbGF5IDog");
    sb.append("MTB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBSVU5USU1FOiA8");
    sb.append("dGFnIC4uLiByeDpyZXBlYXQ9JD4KICBzZWxmLlJQID0gZnVuY3Rpb24gKHBhcmVudERvbSwgc3RhdGUs");
    sb.append("IG5hbWUsIGV4cGFuZFZpZXcsIG1ha2VyLCBoaWRlT25aZXJvKSB7CiAgICB2YXIgaXRfc3RhdGUgPSBz");
    sb.append("ZWxmLnBJRShzdGF0ZSwgIiQiICsgbmFtZSwgZXhwYW5kVmlldyk7CiAgICBpZiAoaGlkZU9uWmVybykg");
    sb.append("ewogICAgICBwYXJlbnREb20uc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIH0KICAgIHZhciBzdWIg");
    sb.append("PSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG4gPSAwOwogICAgICB0cnkgewogICAgICAgIG4g");
    sb.append("PSB0eXBlb2YgKHZhbHVlKSA9PSAnbnVtYmVyJyA/IHZhbHVlIDogcGFyc2VJbnQodmFsdWUpOwogICAg");
    sb.append("ICB9IGNhdGNoIChmYWlsZWRQYXJzaW5nTikgewogICAgICB9CiAgICAgIGlmIChoaWRlT25aZXJvKSB7");
    sb.append("CiAgICAgICAgaWYgKG4gPD0gMCkgewogICAgICAgICAgcGFyZW50RG9tLnN0eWxlLmRpc3BsYXkgPSAi");
    sb.append("bm9uZSI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBhcmVudERvbS5zdHlsZS5kaXNwbGF5ID0g");
    sb.append("IiI7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBpc05ldyA9IGZhbHNlOwogICAgICB3aGlsZSAo");
    sb.append("dGhpcy5hdCA8IG4gLSAxKSB7CiAgICAgICAgdGhpcy5hdCArKzsKICAgICAgICB0aGlzLnRyYWNrICsr");
    sb.append("OwogICAgICAgIHZhciBuZXdfc3RhdGUgPSBmb3JrKHNlbGYucElFKGl0X3N0YXRlLCB0aGlzLnRyYWNr");
    sb.append("ICsgIiIsIGV4cGFuZFZpZXcpKTsKICAgICAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICAg");
    sb.append("ICAgdmFyIGRvbSA9IG1ha2VyKHNlbGYucEQobmV3X3N0YXRlKSk7CiAgICAgICAgdGhpcy5pdGVtc1t0");
    sb.append("aGlzLmF0XSA9IHt1bnN1Yjp1bnN1YiwgZG9tOmRvbX07CiAgICAgICAgcGFyZW50RG9tLmFwcGVuZChk");
    sb.append("b20pOwogICAgICAgIGlmIChleHBhbmRWaWV3KSB7CiAgICAgICAgICBzdGF0ZS52aWV3LnRyZWUudXBk");
    sb.append("YXRlKHBhdGhfdG8obmV3X3N0YXRlLnZpZXcsIHsiJGluZGV4IjogdGhpcy50cmFja30pKTsKICAgICAg");
    sb.append("ICB9CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKG5ld19zdGF0ZSwgdW5zdWIpOwogICAgICAgIGlzTmV3");
    sb.append("ID0gdHJ1ZTsKICAgICAgfQogICAgICB3aGlsZSAodGhpcy5hdCA+PSBuICYmIHRoaXMuYXQgPj0gMCkg");
    sb.append("ewogICAgICAgIGZpcmVfdW5zdWIodGhpcy5pdGVtc1t0aGlzLmF0XS51bnN1Yik7CiAgICAgICAgcGFy");
    sb.append("ZW50RG9tLnJlbW92ZUNoaWxkKHRoaXMuaXRlbXNbdGhpcy5hdF0uZG9tKTsKICAgICAgICB0aGlzLml0");
    sb.append("ZW1zW3RoaXMuYXRdID0gbnVsbDsKICAgICAgICBkZWxldGUgdGhpcy5pdGVtc1t0aGlzLmF0XTsKICAg");
    sb.append("ICAgICB0aGlzLmF0LS07CiAgICAgIH0KICAgICAgaWYgKGlzTmV3KSB7CiAgICAgICAgcGFyZW50RG9t");
    sb.append("LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJuZXciKSk7CiAgICAgIH0KICAgIH0uYmluZCh7aXRlbXM6");
    sb.append("W10sIGF0Oi0xLCB0cmFjazowfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfQog");
    sb.append("IHZhciBmaW5kID0gZnVuY3Rpb24gKHN0YXRlLCBjaGFubmVsLCBrZXksIHZhbHVlKSB7CiAgICBpZiAo");
    sb.append("Y2hhbm5lbCBpbiBzdGF0ZVsiZGF0YSJdLmNvbm5lY3Rpb24ub3V0c3RhbmRpbmcpIHsKICAgICAgdmFy");
    sb.append("IGFyciA9IHN0YXRlWyJkYXRhIl0uY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVsXS5vcHRpb25z");
    sb.append("OwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGFyci5sZW5ndGg7IGsrKykgewogICAgICAgIHZhciBz");
    sb.append("ID0gYXJyW2tdOwogICAgICAgIGlmIChrZXkgaW4gcyAmJiBzW2tleV0gPT0gdmFsdWUpIHsKICAgICAg");
    sb.append("ICAgIHJldHVybiBzOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH07CgogIHZhciBjdXN0b21zID0ge307CgogIHNl");
    sb.append("bGYuUFJDVUFDID0gZnVuY3Rpb24gKG5hbWUsIGZvbykgewogICAgY3VzdG9tc1tuYW1lXSA9IGZvbzsK");
    sb.append("ICB9OwoKICBzZWxmLmV4Q0MgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgY3VzdG9tQ29tbWFu");
    sb.append("ZE5hbWUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAg");
    sb.append("IGlmIChjdXN0b21Db21tYW5kTmFtZSBpbiBjdXN0b21zKSB7CiAgICAgICAgY3VzdG9tc1tjdXN0b21D");
    sb.append("b21tYW5kTmFtZV0oc3RhdGUsIGRvbSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIGN1c3RvbSBl");
    sb.append("dmVudCBvbiBmb3Jtczsgcng6c3VjY2Vzcz0iLi4uIgogIHZhciBmaXJlX3N1Y2Nlc3MgPSBmdW5jdGlv");
    sb.append("biAoZm9ybSkgewogICAgZm9ybS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgic3VjY2VzcyIpKTsKICAg");
    sb.append("IGZvcm0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInN1Ym1pdHRlZCIpKTsKICB9OwogIHNlbGYuZmly");
    sb.append("ZV9zdWNjZXNzID0gZmlyZV9zdWNjZXNzOwoKICAvLyBjdXN0b20gZXZlbnQgb24gZm9ybXM7IHJ4OmZh");
    sb.append("aWxlZD0iLi4uIgogIHZhciBmaXJlX2ZhaWx1cmUgPSBmdW5jdGlvbiAoZG9tLCBtc2cpIHsKICAgIHZh");
    sb.append("ciBlID0gbmV3IEV2ZW50KCJmYWlsdXJlIik7CiAgICBlLm1lc3NhZ2UgPSBtc2c7CiAgICBjb25zb2xl");
    sb.append("LmVycm9yKG1zZyk7CiAgICBkb20uZGlzcGF0Y2hFdmVudChlKTsKICB9OwogIHNlbGYuZmlyZV9mYWls");
    sb.append("dXJlID0gZmlyZV9mYWlsdXJlOwoKICBzZWxmLmFDQyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgY3Vz");
    sb.append("dG9tQ29tbWFuZE5hbWUpIHsKICAgIHZhciBzaWduYWwgPSBmdW5jdGlvbiAobXNnKSB7CiAgICAgIGlm");
    sb.append("IChzaWduYWwgPT0gbnVsbCkgewogICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgfSBlbHNl");
    sb.append("IHsKICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgbXNnKTsKICAgICAgfQogICAgfTsKICAgIGZvcm0u");
    sb.append("YWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBpZiAoY3VzdG9t");
    sb.append("Q29tbWFuZE5hbWUgaW4gY3VzdG9tcykgewogICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAg");
    sb.append("ICAgIHZhciBvYmogPSBnZXRfZm9ybShmb3JtLCB7fSk7CiAgICAgICAgY3VzdG9tc1tjdXN0b21Db21t");
    sb.append("YW5kTmFtZV0ob2JqLCBzdGF0ZSwgc2lnbmFsLCBzZWxmKTsKICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9y");
    sb.append("bSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgdG8gZmlu");
    sb.append("ZCAnIiArIGN1c3RvbUNvbW1hbmROYW1lICsgIiciKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfTsK");
    sb.append("CiAgdmFyIG1ha2VfY2hvaWNlX2FycmF5ID0gZnVuY3Rpb24gKHN0YXRlLCBjaGFubmVsKSB7CiAgICB2");
    sb.append("YXIgY2hvaWNlcyA9IHN0YXRlLmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwogICAgaWYgKCEoY2hhbm5l");
    sb.append("bCBpbiBjaG9pY2VzKSkgewogICAgICBjaG9pY2VzW2NoYW5uZWxdID0ge307CiAgICB9CiAgICB2YXIg");
    sb.append("Y2hvaWNlID0gY2hvaWNlc1tjaGFubmVsXTsKICAgIHZhciBhcnIgPSBbXTsKICAgIGZvciAodmFyIGlk");
    sb.append("IGluIGNob2ljZSkgewogICAgICBhcnIucHVzaChjaG9pY2VbaWRdKTsKICAgIH0KICAgIHJldHVybiBh");
    sb.append("cnI7CiAgfQoKICBzZWxmLmV4RklOID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIGNoYW5uZWwp");
    sb.append("IHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBh");
    sb.append("cnIgPSBtYWtlX2Nob2ljZV9hcnJheShzdGF0ZSwgY2hhbm5lbCk7CiAgICAgIHZhciBjbGVhciA9IGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgICBkZWxldGUgc3RhdGUuZGF0YS5jb25uZWN0aW9uLmNob2ljZXNbY2hh");
    sb.append("bm5lbF07CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLm9uY2hvaWNlcyhjaGFubmVsLCB7fSk7");
    sb.append("CiAgICAgIH07CiAgICAgIHN0YXRlLmRhdGEuY29ubmVjdGlvbi5wdHIuc2VuZChjaGFubmVsLCBhcnIs");
    sb.append("IHsKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBjbGVhcigpOwog");
    sb.append("ICAgICAgICAgY29uc29sZS5sb2coImZhaWxlZDoiICsgcmVhc29uKTsKICAgICAgICB9LAogICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBjbGVhcigpOwogICAgICAgICAg");
    sb.append("Y29uc29sZS5sb2coIlN1Y2Nlc3N8IiArIHBheWxvYWQuc2VxKTsKICAgICAgICB9CiAgICAgIH0pOwog");
    sb.append("ICAgfSk7CiAgfTsKCiAgc2VsZi5GSU4gPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBjaGFu");
    sb.append("bmVsLCBzaG91bGRCZSwgX2V4cGFuZCwgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7CiAgICB2YXIgZmlu");
    sb.append("YWxpemUgPSB7CiAgICAgIG93bmVyOiBwYXJlbnQsCiAgICAgIHNob3duOiBmYWxzZQogICAgfTsKICAg");
    sb.append("IGFkZF91bnN1YihmaW5hbGl6ZSk7CgogICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9uIChzaG93KSB7CiAg");
    sb.append("ICAgIGZpcmVfdW5zdWIoZmluYWxpemUpOwogICAgICBudWtlKHBhcmVudCk7CiAgICAgIHZhciBzdGF0");
    sb.append("ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGlmIChzaG93ID09PSBzaG91bGRCZSkgewogICAgICAg");
    sb.append("IG1ha2VyVHJ1ZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYWtlckZhbHNl");
    sb.append("KHBhcmVudCwgc3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgZmluYWxp");
    sb.append("emUpOwogICAgfTsKCiAgICBmaW5hbGl6ZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBv");
    sb.append("dXQgPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVsXTsKICAgICAg");
    sb.append("aWYgKCEob3V0KSkgcmV0dXJuOwogICAgICB2YXIgYXJyID0gbWFrZV9jaG9pY2VfYXJyYXkocHJpb3JT");
    sb.append("dGF0ZSwgY2hhbm5lbCk7CiAgICAgIHZhciByZXN1bHQgPSAoJ21pbicgaW4gb3V0ICYmICdtYXgnIGlu");
    sb.append("IG91dCkgPyAob3V0Lm1pbiA8PSBhcnIubGVuZ3RoICYmIGFyci5sZW5ndGggPD0gb3V0Lm1heCkgOiB0");
    sb.append("cnVlOwogICAgICBpZiAoZmluYWxpemUuZXZhbCAhPSByZXN1bHQpIHsKICAgICAgICBmaW5hbGl6ZS5l");
    sb.append("dmFsID0gcmVzdWx0OwogICAgICAgIGNoYW5nZShmaW5hbGl6ZS5ldmFsKTsKICAgICAgfQogICAgfTsK");
    sb.append("CiAgICBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5zdWJzY3JpYmVfY2hvaWNlKGNoYW5uZWwsIGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgZmluYWxpemUudXBkYXRlKCk7CiAgICAgIC8vIFRPRE86IHJldHVybiB3");
    sb.append("aGV0aGVyIG9yIG5vdCB0aGlzIG5lZWRzIHRvIGJlIGF4ZWQKICAgICAgcmV0dXJuIHRydWU7CiAgICB9");
    sb.append("KTsKICB9OwoKICB2YXIgZm9ybV9vZiA9IGZ1bmN0aW9uKGRvbSkgewogICAgdmFyIG5leHQgPSBkb207");
    sb.append("CiAgICB3aGlsZSAobmV4dCAhPSBudWxsKSB7CiAgICAgIGlmIChuZXh0LnRhZ05hbWUudG9VcHBlckNh");
    sb.append("c2UoKSA9PSAiRk9STSIpIHsKICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgfQogICAgICBuZXh0ID0g");
    sb.append("bmV4dC5wYXJlbnRFbGVtZW50OwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgcmVnX2V2");
    sb.append("ZW50ID0gZnVuY3Rpb24gKHN0YXRlLCBkb20sIHR5cGUsIHJ1bm5hYmxlKSB7CiAgICAvLyBUT0RPOiBj");
    sb.append("b25uZWN0ZWQvZGlzY29ubmVjdGVkIGFzIHNwZWNpYWwgZXZlbnRzIHRvIGNvbnNpZGVyCiAgICBpZiAo");
    sb.append("dHlwZSA9PSAiY2hlY2siIHx8IHR5cGUgPT0gInVuY2hlY2siKSB7CiAgICAgIGRvbS5hZGRFdmVudExp");
    sb.append("c3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgICAgICBpZiAodGhpcy50eXBlID09ICJjaGVj");
    sb.append("ayIgJiYgZG9tLmNoZWNrZWQpIHsKICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgfSBlbHNlIGlm");
    sb.append("ICh0aGlzLnR5cGUgPT0gInVuY2hlY2siICYmICFkb20uY2hlY2tlZCkgewogICAgICAgICAgcnVubmFi");
    sb.append("bGUoKTsKICAgICAgICB9CiAgICAgIH0uYmluZCh7dHlwZTp0eXBlfSkpOwogICAgfSBlbHNlIGlmICh0");
    sb.append("eXBlID09ICJsb2FkIikgewogICAgICB3aW5kb3cuc2V0VGltZW91dChydW5uYWJsZSwgMSk7CiAgICB9");
    sb.append("IGVsc2UgaWYgKHR5cGU9PSJzdWJtaXQiIHx8IHR5cGU9PSJzdWJtaXR0ZWQiKSB7CiAgICAgIHdpbmRv");
    sb.append("dy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBmb3JtID0gZm9ybV9vZihkb20pOwog");
    sb.append("ICAgICAgIGlmIChmb3JtKSB7CiAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyhkb20pKSB7CiAg");
    sb.append("ICAgICAgICAgICAgcnVubmFibGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAg");
    sb.append("fQogICAgICB9LCAxKTsKICAgIH0gZWxzZSBpZiAodHlwZS5zdGFydHNXaXRoKCJkZWxheToiKSkgewog");
    sb.append("ICAgICAvLyBkZWxheSB3aWxsIHJ1biBhZnRlciAkZGVsYXlUaW1lTVMgSUYgdGhlIGRvbSBlbGVtZW50");
    sb.append("IGlzIHN0aWxsIHZpc2libGUgdG8gdGhlIGRvY3VtZW50CiAgICAgIHZhciBkZWxheVRpbWVNUyA9IHBh");
    sb.append("cnNlSW50KHR5cGUuc3Vic3RyaW5nKDYpKTsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAgICAgICAgIHJ1");
    sb.append("bm5hYmxlKCk7CiAgICAgICAgfQogICAgICB9LCBkZWxheVRpbWVNUyk7CiAgICB9IGVsc2UgaWYgKHR5");
    sb.append("cGUgPT0gInNldHRsZSIpIHsKICAgICAgc3RhdGUuZGF0YS50cmVlLmFkZF9vbl9zZXR0bGUoZnVuY3Rp");
    sb.append("b24oKSB7CiAgICAgICAgLy8gaWYgdGhlIERPTSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgYm9keSwgdGhl");
    sb.append("biBydW4gdGhlIGNvZGUKICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyhkb20pKSB7CiAg");
    sb.append("ICAgICAgICBydW5uYWJsZSgpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAg");
    sb.append("IHJldHVybiBmYWxzZTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gInNldHRsZS1vbmNl");
    sb.append("IikgewogICAgICBzdGF0ZS5kYXRhLnRyZWUuYWRkX29uX3NldHRsZShmdW5jdGlvbigpIHsKICAgICAg");
    sb.append("ICAvLyBpZiB0aGUgRE9NIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBib2R5LCB0aGVuIHJ1biB0aGUgY29k");
    sb.append("ZQogICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAgICAgICAgIHJ1bm5h");
    sb.append("YmxlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSk7CiAgICB9IGVsc2Ug");
    sb.append("ewogICAgICBpZiAodHlwZSA9PSAiY2xpY2siKSB7CiAgICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIo");
    sb.append("dHlwZSwgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgIHZhciBmaXJlID0gdHJ1ZTsKICAgICAgICAg");
    sb.append("IHRyeSB7CiAgICAgICAgICAgIHZhciBlbCA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgICAgd2hpbGUg");
    sb.append("KGVsICYmIGZpcmUpIHsKICAgICAgICAgICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdwcmV2ZW50OmNs");
    sb.append("aWNrJykpIHsKICAgICAgICAgICAgICAgIGZpcmUgPSBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNh");
    sb.append("dGNoIChleCkgewogICAgICAgICAgfQogICAgICAgICAgaWYgKGZpcmUpIHsKICAgICAgICAgICAgcnVu");
    sb.append("bmFibGUoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb20u");
    sb.append("YWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBydW5uYWJsZSk7CiAgICAgIH0KICAgIH0KICB9CgogIC8vIFJV");
    sb.append("TlRJTUU6IDx0YWcgLi4uIHJ4OmV2ZW50PSJzaWduLW91dCIgLi4uPgogIHNlbGYuYlNPID0gZnVuY3Rp");
    sb.append("b24gKCkgewogICAgcmV0dXJuIHsKICAgICAgcnVuOiBmdW5jdGlvbigpIHsKICAgICAgICBzZWxmLlNJ");
    sb.append("R05PVVQoKTsKICAgICAgfSwKICAgICAgbWVyZ2UgOiBmdW5jdGlvbigpIHsgcmV0dXJuIHt9OyB9CiAg");
    sb.append("ICB9OwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBzZXQ6bmFtZT12YWx1");
    sb.append("ZSAuLi4iPgogIHNlbGYuYlMgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgbmFtZSwgdmFsdWUpIHsKICAg");
    sb.append("IGlmICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAg");
    sb.append("cnVuOiBmdW5jdGlvbigpIHt9LCAvLyBkbyBub3RoaW5nLCB0aGlzIGlzIGEgc2ltcGxlIG1lcmdlCiAg");
    sb.append("ICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAg");
    sb.append("b2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmll");
    sb.append("dywgb2JqKTsKICAgICAgICAgIHJldHVybiBkZWx0YTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAgIHZhciBk");
    sb.append("ZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBydW46");
    sb.append("IGZ1bmN0aW9uKCkge30sIC8vIGRvIG5vdGhpbmcsIHRoaXMgaXMgYSBzaW1wbGUgbWVyZ2UKICAgICAg");
    sb.append("ICBtZXJnZTogZnVuY3Rpb24oKSB7IHJldHVybiBkZWx0YTsgfQogICAgICB9CiAgICB9CiAgfTsKCiAg");
    sb.append("dmFyIG1lcmdlX2RlbHRhID0gZnVuY3Rpb24oYSwgYikgewogICAgaWYgKHR5cGVvZihhKSA9PSAib2Jq");
    sb.append("ZWN0IiAmJiB0eXBlb2YoYikgPT0gIm9iamVjdCIpIHsKICAgICAgdmFyIHJlc3VsdCA9IHt9OwogICAg");
    sb.append("ICBmb3IgKHZhciBrIGluIGEpIHsKICAgICAgICBpZiAoayBpbiBiKSB7CiAgICAgICAgICByZXN1bHRb");
    sb.append("a10gPSBtZXJnZV9kZWx0YShhW2tdLCBiW2tdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVz");
    sb.append("dWx0W2tdID0gYVtrXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yKHZhciBrIGluIGIpIHsKICAg");
    sb.append("ICAgICBpZiAoIShrIGluIGEpKSB7CiAgICAgICAgICByZXN1bHRba10gPSBiW2tdOwogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmV0dXJuIGE7CiAgfTsKICBzZWxm");
    sb.append("Lk1EID0gbWVyZ2VfZGVsdGE7CgogIHNlbGYub25CID0gZnVuY3Rpb24oZG9tLCB0eXBlLCBzdGF0ZSwg");
    sb.append("YXJyKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24oKSB7CiAgICAgIHZh");
    sb.append("ciBzdW0gPSB7fTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBhcnIubGVuZ3RoOyBrKyspIHsKICAg");
    sb.append("ICAgICB2YXIgY21kID0gYXJyW2tdOwogICAgICAgIGNtZC5ydW4oKTsKICAgICAgICB2YXIgdG9NZXJn");
    sb.append("ZSA9IGNtZC5tZXJnZSgpCiAgICAgICAgc3VtID0gbWVyZ2VfZGVsdGEoc3VtLCB0b01lcmdlKTsKICAg");
    sb.append("ICAgfQogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHN1bSk7CiAgICB9KTsKICB9OwoKICAvLyBj");
    sb.append("aG9vc2UKICBzZWxmLmV4Q0ggPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgY2hhbm5l");
    sb.append("bCwga2V5KSB7CiAgICB2YXIgZGVjaWRlID0geyB2YWx1ZTogbnVsbCB9OwogICAgcmVnX2V2ZW50KHN0");
    sb.append("YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHJlc3VsdCA9IGZpbmQoc3RhdGUs");
    sb.append("IGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKTsKICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7CiAg");
    sb.append("ICAgICAgdmFyIGNob2ljZXMgPSBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24uY2hvaWNlczsKICAgICAgICBp");
    sb.append("ZiAoIShjaGFubmVsIGluIGNob2ljZXMpKSB7CiAgICAgICAgICBjaG9pY2VzW2NoYW5uZWxdID0ge307");
    sb.append("CiAgICAgICAgfQogICAgICAgIHZhciBjaG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxdOwogICAgICAgIHZh");
    sb.append("ciB2YWxLZXkgPSByZXN1bHRba2V5XTsKICAgICAgICBpZiAodmFsS2V5IGluIGNob2ljZSkgewogICAg");
    sb.append("ICAgICAgZGVsZXRlIGNob2ljZVt2YWxLZXldOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjaG9p");
    sb.append("Y2VbdmFsS2V5XSA9IHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9u");
    sb.append("Lm9uY2hvaWNlcyhjaGFubmVsLCBjaG9pY2UpOwogICAgICB9CiAgICB9KTsKICAgIHN1YnNjcmliZShz");
    sb.append("dGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRlY2lkZS52YWx1ZSA9IHZhbHVlOwog");
    sb.append("ICAgfSk7CiAgfTsKCiAgLy8gZGVjaWRlCiAgc2VsZi5leEQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBz");
    sb.append("dGF0ZSwgbmFtZSwgY2hhbm5lbCwga2V5KSB7CiAgICB2YXIgZGVjaWRlID0geyB2YWx1ZTogbnVsbCB9");
    sb.append("OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHJl");
    sb.append("c3VsdCA9IGZpbmQoc3RhdGUsIGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKTsKICAgICAgaWYgKHJl");
    sb.append("c3VsdCAhPSBudWxsKSB7CiAgICAgICAgbGV0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAg");
    sb.append("ICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5kKGNoYW5uZWwsIHJlc3VsdCwgewogICAgICAg");
    sb.append("ICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewoKICAgICAgICAgIH0sCiAgICAgICAgICBzdWNj");
    sb.append("ZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiU3VjY2Vzc3wi");
    sb.append("ICsgcGF5bG9hZC5zZXEgKyAiO2xhdGVuY3k9IiArIChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0KSk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgc3Vic2NyaWJlKHN0YXRl");
    sb.append("LCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgZGVjaWRlLnZhbHVlID0gdmFsdWU7CiAgICB9");
    sb.append("KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZmlyZTpjaGFubmVsIC4u");
    sb.append("LiIgLi4uPgogIHNlbGYub25GUiA9IGZ1bmN0aW9uIChzdGF0ZSwgZG9tLCB0eXBlLCBjaGFubmVsKSB7");
    sb.append("CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICBzdGF0ZS5k");
    sb.append("YXRhLmNvbm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbCwge30sIHsKICAgICAgICBzdWNjZXNzOiBmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiU0VOVCAnIiArIGNoYW5uZWwgKyAiJyIpOwog");
    sb.append("ICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgY29u");
    sb.append("c29sZS5sb2coIkZBSUxFRCBUTyBGSVJFICciICsgY2hhbm5lbCArICInIERVRToiICsgcmVhc29uKTsg");
    sb.append("JycKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4");
    sb.append("OmV2ZW50PSIuLi4gZm9yY2UtYXV0aD1uYW1lLHRva2VuIC4uLiI+CiAgc2VsZi5vbkZPUkNFX0FVVEgg");
    sb.append("PSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBpZGVudGl0eU5hbWUsIGlkZW50aXR5KSB7CiAgICByZWdfZXZl");
    sb.append("bnQobnVsbCwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGlz");
    sb.append("CiAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IGlkZW50aXR5OwogICAgICBsb2NhbFN0b3Jh");
    sb.append("Z2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgaWRlbnRpdHkpOwogICAgfSk7CiAg");
    sb.append("fTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHRlOm5hbWUgLi4uIj4KICBzZWxm");
    sb.append("Lm9uVE0gPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgb3gsIG95KSB7CiAgICByZWdf");
    sb.append("ZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBvYmogPSB7");
    sb.append("fTsKICAgICAgb2JqW25hbWVdID0gewogICAgICAgIHg6ZXZlbnQuY2xpZW50WCArIHdpbmRvdy5zY3Jv");
    sb.append("bGxYICsgb3gsCiAgICAgICAgeTpldmVudC5jbGllbnRZICsgd2luZG93LnNjcm9sbFkgKyBveQogICAg");
    sb.append("ICB9OwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRl");
    sb.append("W3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJ");
    sb.append("TUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiB0ZTpuYW1lIC4uLiI+CiAgc2VsZi5vblRFID0gZnVuY3Rp");
    sb.append("b24gKGRvbSwgdHlwZSwgc3RhdGUsIG5hbWUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBl");
    sb.append("LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSBl");
    sb.append("dmVudC5tZXNzYWdlOwogICAgICBpZiAoZXZlbnQubWVzc2FnZSkgewogICAgICAgIHZhciBkZWx0YSA9");
    sb.append("IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgICBzdGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVl");
    sb.append("LnVwZGF0ZShkZWx0YSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4g");
    sb.append("cng6ZXZlbnQ9Ii4uLiByZXNldCAuLi4iPgogIHNlbGYub1JTVCA9IGZ1bmN0aW9uIChkb20sIHR5cGUs");
    sb.append("IHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7");
    sb.append("CiAgICAgIHZhciBmID0gZm9ybV9vZihkb20pOwogICAgICBpZiAoZiAhPSBudWxsKSB7CiAgICAgICAg");
    sb.append("Zi5yZXNldCgpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2");
    sb.append("ZW50PSIuLi4gcmVzZXQgLi4uIj4KICBzZWxmLm9STEQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0");
    sb.append("ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAg");
    sb.append("ICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0pOwogIH07CgogIHNlbGYuYlNCID0gZnVuY3Rpb24oZG9t");
    sb.append("KSB7CiAgICByZXR1cm4gewogICAgICBydW46IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBmID0gZm9y");
    sb.append("bV9vZihkb20pOwogICAgICAgIGlmIChmICE9IG51bGwpIHsKICAgICAgICAgIHZhciBlID0gbmV3IFN1");
    sb.append("Ym1pdEV2ZW50KCdzdWJtaXQnLCB7CiAgICAgICAgICAgICdidWJibGVzJyAgICA6IHRydWUsCiAgICAg");
    sb.append("ICAgICAgICdjYW5jZWxhYmxlJyA6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgZi5kaXNwYXRj");
    sb.append("aEV2ZW50KGUpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkgeyByZXR1");
    sb.append("cm4ge307IH0KICAgIH07CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHN1");
    sb.append("Ym1pdCAuLi4iPgogIC8vIFRPRE86IERFUFJFQ0FURQogIHNlbGYub1NCTVQgPSBmdW5jdGlvbiAoZG9t");
    sb.append("LCB0eXBlLCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChl");
    sb.append("dmVudCkgewogICAgICB2YXIgZiA9IGZvcm1fb2YoZG9tKTsKICAgICAgaWYgKGYgIT0gbnVsbCkgewog");
    sb.append("ICAgICAgIHZhciBlID0gbmV3IFN1Ym1pdEV2ZW50KCdzdWJtaXQnLCB7CiAgICAgICAgICAnYnViYmxl");
    sb.append("cycgICAgOiB0cnVlLAogICAgICAgICAgJ2NhbmNlbGFibGUnIDogdHJ1ZQogICAgICAgIH0pOwogICAg");
    sb.append("ICAgIGYuZGlzcGF0Y2hFdmVudChlKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTog");
    sb.append("PHRhZyAuLiByeDpldmVudD0iLi4uIHN1Ym1pdDokaWQgLi4uIj4KICBzZWxmLm9TRkkgPSBmdW5jdGlv");
    sb.append("biAoZG9tLCB0eXBlLCBzdGF0ZSwgaWQpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBm");
    sb.append("dW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7");
    sb.append("CiAgICAgIGlmIChmICE9IG51bGwpIHsKICAgICAgICB2YXIgZSA9IG5ldyBTdWJtaXRFdmVudCgnc3Vi");
    sb.append("bWl0JywgewogICAgICAgICAgJ2J1YmJsZXMnICAgIDogdHJ1ZSwKICAgICAgICAgICdjYW5jZWxhYmxl");
    sb.append("JyA6IHRydWUKICAgICAgICB9KTsKICAgICAgICBmLmRpc3BhdGNoRXZlbnQoZSk7CiAgICAgIH0KICAg");
    sb.append("IH0pOwogIH07CgogIHNlbGYuYk5LID0gZnVuY3Rpb24gKGRvbSkgewogICAgcmV0dXJuIHsKICAgICAg");
    sb.append("cnVuOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgY3VyID0gZG9tOwogICAgICAgIHdoaWxlIChjdXIu");
    sb.append("dGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9ICJOVUNMRUFSIikgewogICAgICAgICAgY3VyID0gY3VyLnBh");
    sb.append("cmVudEVsZW1lbnQ7CiAgICAgICAgfQogICAgICAgIGlmIChjdXIgIT0gbnVsbCkgewogICAgICAgICAg");
    sb.append("bnVrZShjdXIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkge30KICAg");
    sb.append("IH07CiAgfQoKICBzZWxmLm9OSyA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlKSB7CiAgICByZWdf");
    sb.append("ZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBjdXIgPSBk");
    sb.append("b207CiAgICAgIHdoaWxlIChjdXIudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9ICJOVUNMRUFSIikgewog");
    sb.append("ICAgICAgIGN1ciA9IGN1ci5wYXJlbnRFbGVtZW50OwogICAgICB9CiAgICAgIGlmIChjdXIgIT0gbnVs");
    sb.append("bCkgewogICAgICAgIG51a2UoY3VyKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgc2VsZi5wVXMgPSBm");
    sb.append("dW5jdGlvbihkb20sIG1zRGVsYXkpIHsKICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBm");
    sb.append("dW5jdGlvbihldikgewogICAgICBpZiAoZG9tLmlzUHJvdGVjdGVkKSB7CiAgICAgICAgLy8gVE9ETzog");
    sb.append("aWYgZWxUb1Njcm9sbC5sYXN0X3Njcm9sbF9jb21tYW5kIGlzIG1heCBhbmQgdGhlIHNjcm9sbCBpcyB0");
    sb.append("aGVyZSwgdGhlbiBsb3dlciBpc1Byb3RlY3RlZAogICAgICB9CiAgICAgIGlmIChkb20uaWdub3JlRXZl");
    sb.append("bnQgfHwgZG9tLmlzUHJvdGVjdGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGRvbS5p");
    sb.append("c1Byb3RlY3RlZCA9IHRydWU7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAg");
    sb.append("ICAgIGRvbS5pc1Byb3RlY3RlZCA9IGZhbHNlOwogICAgICB9LCBtc0RlbGF5KTsKICAgIH0pOwogIH07");
    sb.append("CgogIHNlbGYub1NDUiA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBvcmlnaW5hbENvbW1hbmQp");
    sb.append("IHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAg");
    sb.append("dmFyIGVsVG9TY3JvbGwgPSBkb207CiAgICAgIHZhciBjb21tYW5kID0gb3JpZ2luYWxDb21tYW5kOwog");
    sb.append("ICAgICB3aGlsZSAoY29tbWFuZC5zdGFydHNXaXRoKCdwYXJlbnQtJykpIHsKICAgICAgICBpZiAoZWxU");
    sb.append("b1Njcm9sbC5wYXJlbnRFbGVtZW50KSB7CiAgICAgICAgICBlbFRvU2Nyb2xsID0gZWxUb1Njcm9sbC5w");
    sb.append("YXJlbnRFbGVtZW50OwogICAgICAgIH0KICAgICAgICBjb21tYW5kID0gY29tbWFuZC5zdWJzdHJpbmco");
    sb.append("Nyk7CiAgICAgIH0KICAgICAgaWYgKGVsVG9TY3JvbGwuaXNQcm90ZWN0ZWQpIHsKICAgICAgICByZXR1");
    sb.append("cm47CiAgICAgIH0KICAgICAgZWxUb1Njcm9sbC5pZ25vcmVFdmVudCA9IHRydWU7CiAgICAgIHdpbmRv");
    sb.append("dy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGVsVG9TY3JvbGwuaWdub3JlRXZlbnQgPSBm");
    sb.append("YWxzZTsKICAgICAgfSwgMTAwKTsKICAgICAgc3dpdGNoIChjb21tYW5kKSB7CiAgICAgICAgY2FzZSAn");
    sb.append("bWluJzogewogICAgICAgICAgZWxUb1Njcm9sbC5sYXN0X3Njcm9sbF9jb21tYW5kID0gJ21pbic7CiAg");
    sb.append("ICAgICAgICBlbFRvU2Nyb2xsLnNjcm9sbFRvKDAsIDApOwogICAgICAgICAgcmV0dXJuOwogICAgICAg");
    sb.append("IH0KICAgICAgICBjYXNlICdtYXgnOiB7CiAgICAgICAgICBlbFRvU2Nyb2xsLmxhc3Rfc2Nyb2xsX2Nv");
    sb.append("bW1hbmQgPSAnbWF4JzsKICAgICAgICAgIGVsVG9TY3JvbGwuc2Nyb2xsVG8oMCwgZWxUb1Njcm9sbC5z");
    sb.append("Y3JvbGxIZWlnaHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAg");
    sb.append("fTsKCiAgc2VsZi5vVUNLID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUpIHsKICAgIHJlZ19ldmVu");
    sb.append("dChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgZG9tLmNoZWNrZWQgPSBm");
    sb.append("YWxzZTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBnb3Rv");
    sb.append("OnVyaSAuLi4iPgogIHNlbGYub25HTyA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCB2YWx1ZSkg");
    sb.append("ewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHVy");
    sb.append("aSA9ICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24iKSA/IHZhbHVlKCkgOiB2YWx1ZTsKICAgICAg");
    sb.append("c2VsZi5nb3RvKHVyaSwgZmFsc2UpOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiBy");
    sb.append("eDpldmVudD0iLi4uIHRvZ2dsZTpuYW1lIC4uLiI+CiAgc2VsZi5vblQgPSBmdW5jdGlvbiAoZG9tLCB0");
    sb.append("eXBlLCBzdGF0ZSwgbmFtZSkgewogICAgdmFyIGNhcHR1cmVkID0geyB2YWx1ZTogZmFsc2UgfTsKICAg");
    sb.append("IHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvYmogPSB7");
    sb.append("fTsKICAgICAgb2JqW25hbWVdID0gIWNhcHR1cmVkLnZhbHVlOwogICAgICB2YXIgZGVsdGEgPSBwYXRo");
    sb.append("X3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoZGVsdGEpOwog");
    sb.append("ICAgfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBj");
    sb.append("YXB0dXJlZC52YWx1ZSA9IHZhbHVlID09IHRydWU7CiAgICB9KTsKICB9OwoKICB2YXIgb3JkZXJfdG9n");
    sb.append("Z2xlID0gZnVuY3Rpb24ocHJpb3IsIHZhbCkgewogICAgdmFyIHBhcnRzID0gcHJpb3Iuc3BsaXQoIiwi");
    sb.append("KTsKICAgIHZhciBwcmVmaXggPSAnJzsKICAgIHZhciBuZXh0ID0gWyIiXTsKICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgcGFydHMubGVuZ3RoOyBrKyspIHsKICAgICAgaWYgKHBhcnRzW2tdID09ICIiKSB7CiAg");
    sb.append("ICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSBpZiAodmFsID09IHBhcnRzW2tdKSB7CiAgICAgICAg");
    sb.append("cHJlZml4ID0gJy0nOwogICAgICB9IGVsc2UgaWYgKCItIiArIHZhbCA9PXBhcnRzW2tdKSB7CiAgICAg");
    sb.append("ICAgcHJlZml4ID0gJyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dC5wdXNoKHBhcnRzW2tdKTsK");
    sb.append("ICAgICAgfQogICAgfQogICAgbmV4dFswXSA9IHByZWZpeCArIHZhbDsKICAgIHJldHVybiBuZXh0Lmpv");
    sb.append("aW4oIiwiKTsKICB9CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBvcmRlci10b2dn");
    sb.append("bGU6bmFtZT12YWwgLi4uIj4KICBzZWxmLm9uT1QgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwg");
    sb.append("bmFtZSwgdmFsKSB7CiAgICB2YXIgY2FwdHVyZWQgPSB7IHZhbHVlOiAiIiB9OwogICAgcmVnX2V2ZW50");
    sb.append("KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBv");
    sb.append("YmpbbmFtZV0gPSBvcmRlcl90b2dnbGUoY2FwdHVyZWQudmFsdWUsIHZhbCk7CiAgICAgIHZhciBkZWx0");
    sb.append("YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgc3RhdGVbc3RhdGUuY3VycmVudF0udHJl");
    sb.append("ZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9u");
    sb.append("ICh2YWx1ZSkgewogICAgICBjYXB0dXJlZC52YWx1ZSA9IHZhbHVlOwogICAgfSk7CiAgfTsKCiAgLy8g");
    sb.append("UlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIGRlbHRhOm5hbWU9ZGlmZiIgLi4uIj4KICBzZWxm");
    sb.append("Lm9uRCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBuYW1lLCBkaWZmKSB7CiAgICB2YXIgY2Fw");
    sb.append("dHVyZWQgPSB7IHZhbHVlOiAwIH07CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICB2YXIgb2JqID0ge307CiAgICAgIG9ialtuYW1lXSA9IGNhcHR1cmVkLnZhbHVl");
    sb.append("ICsgZGlmZjsKICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBz");
    sb.append("dGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9KTsKICAgIHN1YnNjcmli");
    sb.append("ZShzdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9");
    sb.append("PSAibnVtYmVyIikgewogICAgICAgIGNhcHR1cmVkLnZhbHVlID0gdmFsdWU7CiAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgdmFyIHZhbCA9IHBhcnNlRmxvYXQodmFsdWUpOwogICAgICAgIGlmICghaXNOYU4odmFs");
    sb.append("KSkgewogICAgICAgICAgY2FwdHVyZWQudmFsdWUgPSB2YWw7CiAgICAgICAgfQogICAgICB9CiAgICB9");
    sb.append("KTsKICB9OwogIHNlbGYuQ1NFTiA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIGV2YWxTdGF0");
    sb.append("ZSwgY2hhbm5lbCwga2V5LCBuYW1lLCBzaG91bGRCZSwgX2V4cGFuZCwgbWFrZXJUcnVlLCBtYWtlckZh");
    sb.append("bHNlKSB7CiAgICB2YXIgY2hvc2VuID0gewogICAgICB2YWx1ZTogIiIsCiAgICAgIG93bmVyOiBwYXJl");
    sb.append("bnQsCiAgICAgIHNob3duOiBmYWxzZSwKICAgICAgZXZhbDogbnVsbAogICAgfTsKICAgIGFkZF91bnN1");
    sb.append("YihjaG9zZW4pOwogICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9uIChzaG93KSB7CiAgICAgIGZpcmVfdW5z");
    sb.append("dWIoY2hvc2VuKTsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICB2YXIgc3RhdGUgPSBmb3JrKHByaW9y");
    sb.append("U3RhdGUpOwogICAgICBpZiAoc2hvdyA9PT0gc2hvdWxkQmUpIHsKICAgICAgICBtYWtlclRydWUocGFy");
    sb.append("ZW50LCBzdGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWFrZXJGYWxzZShwYXJlbnQsIHN0YXRl");
    sb.append("KTsKICAgICAgfQogICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIGNob3Nlbik7CiAgICB9OwoKICAg");
    sb.append("IGNob3Nlbi51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvdXQgPSBwcmlvclN0YXRlLmRh");
    sb.append("dGEuY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVsXTsKICAgICAgaWYgKCEob3V0KSkgcmV0dXJu");
    sb.append("OwoKICAgICAgdmFyIGNob2ljZXMgPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwog");
    sb.append("ICAgICBpZiAoIShjaGFubmVsIGluIGNob2ljZXMpKSB7CiAgICAgICAgY2hvaWNlc1tjaGFubmVsXSA9");
    sb.append("IHt9OwogICAgICB9CiAgICAgIHZhciBjaG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxdOwogICAgICB2YXIg");
    sb.append("cmVzdWx0ID0gY2hvc2VuLnZhbHVlIGluIGNob2ljZTsKICAgICAgaWYgKGNob3Nlbi5ldmFsICE9IHJl");
    sb.append("c3VsdCkgewogICAgICAgIGNob3Nlbi5ldmFsID0gcmVzdWx0OwogICAgICAgIGNoYW5nZShjaG9zZW4u");
    sb.append("ZXZhbCk7CiAgICAgIH0KICAgIH07CgogICAgcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24uc3Vic2Ny");
    sb.append("aWJlX2Nob2ljZShjaGFubmVsLCBmdW5jdGlvbiAoKSB7CiAgICAgIGNob3Nlbi51cGRhdGUoKTsKICAg");
    sb.append("ICAgcmV0dXJuIHRydWU7CiAgICB9KTsKCiAgICBzdWJzY3JpYmUoZXZhbFN0YXRlLCBuYW1lLCBmdW5j");
    sb.append("dGlvbiAodmFsdWUpIHsKICAgICAgY2hvc2VuLnZhbHVlID0gdmFsdWU7CiAgICAgIGNob3Nlbi51cGRh");
    sb.append("dGUoKTsKICAgIH0pOwogIH07CgogIHNlbGYuREUgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRl");
    sb.append("LCBldmFsU3RhdGUsIGNoYW5uZWwsIGtleSwgbmFtZSwgc2hvdWxkQmUsIF9leHBhbmQsIG1ha2VyVHJ1");
    sb.append("ZSwgbWFrZXJGYWxzZSkgewogICAgdmFyIGRlY2lkZSA9IHsKICAgICAgdmFsdWU6ICIiLAogICAgICBv");
    sb.append("d25lcjogcGFyZW50LAogICAgICBzaG93bjogZmFsc2UsCiAgICAgIGV2YWw6IG51bGwKICAgIH07CiAg");
    sb.append("ICBhZGRfdW5zdWIoZGVjaWRlKTsKICAgIHZhciBjaGFuZ2UgPSBmdW5jdGlvbiAoc2hvdykgewogICAg");
    sb.append("ICBmaXJlX3Vuc3ViKGRlY2lkZSk7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFyIHN0YXRlID0g");
    sb.append("Zm9yayhwcmlvclN0YXRlKTsKICAgICAgaWYgKHNob3cgPT09IHNob3VsZEJlKSB7CiAgICAgICAgbWFr");
    sb.append("ZXJUcnVlKHBhcmVudCwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIG1ha2VyRmFsc2UocGFy");
    sb.append("ZW50LCBzdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCBkZWNpZGUpOwog");
    sb.append("ICAgfTsKCiAgICBkZWNpZGUudXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgcmVzdWx0ID0g");
    sb.append("ZmluZChwcmlvclN0YXRlLCBjaGFubmVsLCBrZXksIGRlY2lkZS52YWx1ZSkgIT0gbnVsbDsKICAgICAg");
    sb.append("aWYgKGRlY2lkZS5ldmFsICE9IHJlc3VsdCkgewogICAgICAgIGRlY2lkZS5ldmFsID0gcmVzdWx0Owog");
    sb.append("ICAgICAgIGNoYW5nZShkZWNpZGUuZXZhbCk7CiAgICAgIH0KICAgIH07CgogICAgcHJpb3JTdGF0ZS5k");
    sb.append("YXRhLmNvbm5lY3Rpb24uc3Vic2NyaWJlKGNoYW5uZWwsIGZ1bmN0aW9uICgpIHsKICAgICAgZGVjaWRl");
    sb.append("LnVwZGF0ZSgpOwogICAgICAvLyBUT0RPOiByZXR1cm4gd2hldGhlciBvciBub3QgdGhpcyBuZWVkcyB0");
    sb.append("byBiZSBheGVkCiAgICAgIHJldHVybiB0cnVlOwogICAgfSk7CgogICAgc3Vic2NyaWJlKGV2YWxTdGF0");
    sb.append("ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRlY2lkZS52YWx1ZSA9IHZhbHVlOwogICAg");
    sb.append("ICBkZWNpZGUudXBkYXRlKCk7CiAgICB9KTsKICB9OwoKICB2YXIgY29tbW9uSWYgPSBmdW5jdGlvbihw");
    sb.append("YXJlbnQsIG9yaWdpbmFsU3RhdGUsIHNob3VsZEJlLCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2Vy");
    sb.append("RmFsc2UsIGZvcmNlSGlkaW5nKSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICBpZiAo");
    sb.append("Zm9yY2VIaWRpbmcpIHsKICAgICAgcGFyZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9CiAg");
    sb.append("ICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHZhciBzaG93ID0gKHZhbHVlID8gdHJ1ZSA6");
    sb.append("IGZhbHNlKSA9PT0gc2hvdWxkQmU7CiAgICAgIGlmICh0aGlzLnNob3duID09IHNob3cpIHsKICAgICAg");
    sb.append("ICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5zaG93biA9IHNob3c7CiAgICAgIG51a2UocGFyZW50");
    sb.append("KTsKICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgIHZhciBuZXh0ID0gc2VsZi5wRChmb3JrKG9y");
    sb.append("aWdpbmFsU3RhdGUpKTsKICAgICAgaWYgKHNob3cpIHsKICAgICAgICBpZiAoZm9yY2VIaWRpbmcpIHsK");
    sb.append("ICAgICAgICAgIHBhcmVudC5zdHlsZS5kaXNwbGF5ID0gIiI7CiAgICAgICAgfQogICAgICAgIG1ha2Vy");
    sb.append("VHJ1ZShwYXJlbnQsIG5leHQpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChmb3JjZUhpZGluZykg");
    sb.append("ewogICAgICAgICAgcGFyZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgICAgIG1ha2VyRmFsc2UocGFyZW50LCBuZXh0KTsKICAgICAgICB9CiAgICAgIH0KICAgICAg");
    sb.append("c3Vic2NyaWJlX3N0YXRlKG5leHQsIHVuc3ViKTsKICAgIH0uYmluZCh7IHNob3duOiAnbm8nIH0pOwog");
    sb.append("IH0KCiAgLy8gUlVOVElNRSB8IHJ4OmlmIC8gcng6aWZub3QgPSAicGF0aDE9cGF0aDIiCiAgc2VsZi5J");
    sb.append("RmVxID0gZnVuY3Rpb24gKHBhcmVudCwgb3JpZ2luYWxTdGF0ZSwgcXVlcnlTdGF0ZUxlZnQsIG5hbWVM");
    sb.append("ZWZ0LCBxdWVyeVN0YXRlUmlnaHQsIG5hbWVSaWdodCwgc2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2Vy");
    sb.append("VHJ1ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpIHsKICAgIHZhciBjb21tb24gPSB7bGVmdDpmYWxz");
    sb.append("ZSwgcmlnaHQ6dHJ1ZX07CiAgICBjb21tb24ucyA9IGNvbW1vbklmKHBhcmVudCwgb3JpZ2luYWxTdGF0");
    sb.append("ZSwgc2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcp");
    sb.append("OwogICAgY29tbW9uLmsgPSBkZWJvdW5jZSg1LCBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5zKHRoaXMu");
    sb.append("bGVmdCA9PSB0aGlzLnJpZ2h0KTsKICAgIH0uYmluZChjb21tb24pKTsKICAgIHN1YnNjcmliZShxdWVy");
    sb.append("eVN0YXRlTGVmdCwgbmFtZUxlZnQsIGZ1bmN0aW9uIChsZWZ0KSB7CiAgICAgIHRoaXMubGVmdCA9IGxl");
    sb.append("ZnQ7CiAgICAgIHRoaXMuaygpOwogICAgfS5iaW5kKGNvbW1vbikpCiAgICBzdWJzY3JpYmUocXVlcnlT");
    sb.append("dGF0ZVJpZ2h0LCBuYW1lUmlnaHQsIGZ1bmN0aW9uIChyaWdodCkgewogICAgICB0aGlzLnJpZ2h0ID0g");
    sb.append("cmlnaHQ7CiAgICAgIHRoaXMuaygpOwogICAgfS5iaW5kKGNvbW1vbikpOwogIH07CgogIC8qKiB0aGUg");
    sb.append("YWJvdmUgc3BlYWtzIHRvIGEgZGVlcCBwYXR0ZXJuLiBXZSBjb3VsZCB0YWtlIGFueSBleHByZXNzaW9u");
    sb.append("IGFuZCB0aGVuIGxpbmVhcml6ZSBpdCBpbnRvIHJlYWN0aXZlIHBhcnRzLCBhbmQgdGhlbiBhc3NlbWJs");
    sb.append("ZSBhIHN0YXRlbWVudCBzdGF0ZW1lbnQgb24gdGhlIGZseS4gV2Ugc2hvdWxkIGxvb2sgaW50byB1c2lu");
    sb.append("ZyB0aGUgY29uZGl0aW9uIGxhbmd1YWdlIGZvciB0aGlzICovCgogIC8vIFJVTlRJTUUgfCByeDppZiAv");
    sb.append("IHJ4Omlmbm90ID0gInBhdGgiCiAgc2VsZi5JRiA9IGZ1bmN0aW9uIChwYXJlbnQsIG9yaWdpbmFsU3Rh");
    sb.append("dGUsIHF1ZXJ5U3RhdGUsIG5hbWUsIHNob3VsZEJlLCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2Vy");
    sb.append("RmFsc2UsIGZvcmNlSGlkaW5nKSB7CiAgICBzdWJzY3JpYmUocXVlcnlTdGF0ZSwgbmFtZSwgY29tbW9u");
    sb.append("SWYocGFyZW50LCBvcmlnaW5hbFN0YXRlLCBzaG91bGRCZSwgZXhwYW5kVmlldywgbWFrZXJUcnVlLCBt");
    sb.append("YWtlckZhbHNlLCBmb3JjZUhpZGluZykpOwogIH07CgogIC8vLyBSVU5USU1FIHwgcng6YWN0aW9uPWNv");
    sb.append("cHk6cGF0aAogIHNlbGYuYUNQID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBuYW1lKSB7CiAgICBmb3Jt");
    sb.append("LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZl");
    sb.append("bnREZWZhdWx0KCk7CiAgICAgIHZhciBvYmogPSBnZXRfZm9ybShmb3JtLCB7fSk7CiAgICAgIGlmIChu");
    sb.append("YW1lICE9ICIuIiAmJiBuYW1lICE9ICIiKSB7CiAgICAgICAgdmFyIG5vID0ge307CiAgICAgICAgbm9b");
    sb.append("bmFtZV0gPSBvYmo7CiAgICAgICAgb2JqID0gbm87CiAgICAgIH0KICAgICAgdmFyIGRlbHRhID0gcGF0");
    sb.append("aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsK");
    sb.append("ICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgc2VsZi5WU1AgPSBm");
    sb.append("dW5jdGlvbihkb20sIHN0YXRlLCB2YXJzKSB7CiAgICB2YXIgc20gPSB7fTsKICAgIHNtLnZhcnMgPSB2");
    sb.append("YXJzOwogICAgc20ubGFzdCA9IHt9OwogICAgc20ucGFyYW1zID0gIiI7CiAgICBzbS5tb2RlID0gInJl");
    sb.append("cGxhY2UiOwogICAgc20ucGluZyA9IGRlYm91bmNlKDUwMCwgZnVuY3Rpb24oKSB7CiAgICAgIGlmICgh");
    sb.append("ZG9jdW1lbnQuYm9keS5jb250YWlucyhkb20pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAg");
    sb.append("IHZhciBhcmdzID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy52YXJzLmxlbmd0aDsg");
    sb.append("aysrKSB7CiAgICAgICAgdmFyIGFyZyA9IHRoaXMudmFyc1trXTsKICAgICAgICBpZiAoYXJnIGluIHRo");
    sb.append("aXMubGFzdCkgewogICAgICAgICAgYXJncy5wdXNoKGFyZyArICI9IiArIHRoaXMubGFzdFthcmddKTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIHJlc3VsdCA9ICI/IiArYXJncy5qb2luKCImIik7CiAg");
    sb.append("ICAgIGlmIChyZXN1bHQgIT0gIj8iICYmIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggIT09IHJlc3VsdCkg");
    sb.append("ewogICAgICAgIHZhciBvYmogPSB7fTsKICAgICAgICBvYmoudmlld2VyX3NlYXJjaF9xdWVyeSA9IHJl");
    sb.append("c3VsdDsKICAgICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgICAg");
    sb.append("c3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHdpbmRv");
    sb.append("dy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgIiIsIGZpeEhyZWYod2luZG93LmxvY2F0aW9uLnBhdGhu");
    sb.append("YW1lICsgcmVzdWx0KSk7CiAgICAgICAgfSBjYXRjaChmYWlsZWRUb1JlcGxhY2VTdGF0ZSkgewoKICAg");
    sb.append("ICAgICB9CiAgICAgIH0KICAgIH0uYmluZChzbSkpOwogICAgc3RhdGUudmlldy50cmVlLnN1YnNjcmli");
    sb.append("ZShmdW5jdGlvbihzKSB7CiAgICAgIHRoaXMubGFzdCA9IHM7CiAgICAgIHRoaXMucGluZygpOwogICAg");
    sb.append("fS5iaW5kKHNtKSk7CiAgfTsKCiAgc2VsZi5GID0gZnVuY3Rpb24obyxrKSB7CiAgICBpZiAoayBpbiBv");
    sb.append("KSB7CiAgICAgIHJldHVybiBvW2tdOwogICAgfQogICAgcmV0dXJuICIiOwogIH07CgogIC8vIFJVTlRJ");
    sb.append("TUUgfCA8aW5wdXQgLi4uIHJ4OnN5bmM9cGF0aCAuLi4+CiAgc2VsZi5TWSA9IGZ1bmN0aW9uIChlbCwg");
    sb.append("c3RhdGUsIG5hbWUsIG1zKSB7CiAgICB2YXIgdHlwZSA9ICgidHlwZSIgaW4gZWwpID8gZWwudHlwZS50");
    sb.append("b1VwcGVyQ2FzZSgpIDogInRleHQiOwogICAgdmFyIHNpZ25hbCA9IGZ1bmN0aW9uICh2YWx1ZSkgewog");
    sb.append("ICAgICB2YXIgb2JqID0ge307CiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICB2YXIgZGVsdGEg");
    sb.append("PSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoZGVs");
    sb.append("dGEpOwogICAgICBpZiAodGhpcy5kZWR1cGUgIT0gdmFsdWUpIHsKICAgICAgICB0aGlzLmRlZHVwZSA9");
    sb.append("IHZhbHVlOwogICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJhZnRlcnN5bmMiKSk7CiAg");
    sb.append("ICAgIH0KICAgIH0uYmluZCh7ZGVkdXBlOiIifSk7CiAgICBpZiAodHlwZSA9PSAiQ0hFQ0tCT1giKSB7");
    sb.append("CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGRlYm91bmNlKG1zLCBmdW5jdGlvbiAo");
    sb.append("KSB7CiAgICAgICAgc2lnbmFsKGVsLmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpOwogICAgICB9KSk7CiAg");
    sb.append("ICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzaWduYWwoZWwuY2hlY2tl");
    sb.append("ZCA/IHRydWUgOiBmYWxzZSk7CiAgICAgIH0sIDEpOwogICAgfSBlbHNlIGlmICh0eXBlID09ICJSQURJ");
    sb.append("TyIpIHsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZGVib3VuY2UobXMsIGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICBpZiAoZWwuY2hlY2tlZCkgewogICAgICAgICAgc2lnbmFsKGVsLnZhbHVl");
    sb.append("KTsKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBmID0gZGVib3VuY2Uo");
    sb.append("bXMsIGZ1bmN0aW9uICgpIHsKICAgICAgICBzaWduYWwoZWwudmFsdWUpOwogICAgICB9KTsKICAgICAg");
    sb.append("ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZik7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIo");
    sb.append("J2tleXVwJywgZikKICAgICAgZWwub25rZXl1cCA9IGVsLm9uY2hhbmdlOwogICAgICB3aW5kb3cuc2V0");
    sb.append("VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2lnbmFsKGVsLnZhbHVlKTsKICAgICAgfSwgNSk7");
    sb.append("CiAgICB9CiAgfTsKCiAgdmFyIGZpcnN0T2NjdXIgPSBmdW5jdGlvbihhLCBiKSB7CiAgICBpZiAoYSA+");
    sb.append("IDAgJiYgYiA+IDApIHsKICAgICAgcmV0dXJuIE1hdGgubWluKGEsIGIpOwogICAgfQogICAgaWYgKGEg");
    sb.append("PiAwKSB7CiAgICAgIHJldHVybiBhOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGI7CiAgICB9CiAg");
    sb.append("fTsKICAvLyBIRUxQRVIgfCBleHRyYWN0IGFsbCB0aGUgaW5wdXRzIGZyb20gdGhlIGdpdmVuIGVsZW1l");
    sb.append("bnQgYW5kIGJ1aWxkIGFuIG9iamVjdAogIHZhciBidWlsZF9vYmogPSBmdW5jdGlvbiAoZWwsIG9ialRv");
    sb.append("SW5zZXJ0SW50bywgcGFzc3dvcmRzLCBpc1Jvb3QpIHsKICAgIGlmIChlbC50YWdOYW1lLnRvVXBwZXJD");
    sb.append("YXNlKCkgPT0gIkZPUk0iICYmICFpc1Jvb3QpIHsKICAgICAgLy8gZG9uJ3QgY2FyZSBhYm91dCBuZXN0");
    sb.append("ZWQgZm9ybXMKICAgICAgcmV0dXJuOwogICAgfQogICAgdmFyIHVwcGVyVGFnID0gZWwudGFnTmFtZS50");
    sb.append("b1VwcGVyQ2FzZSgpOwogICAgdmFyIGp1c3RTZXQgPSB1cHBlclRhZyA9PSAiVEVYVEFSRUEiIHx8IHVw");
    sb.append("cGVyVGFnID09ICJTRUxFQ1QiOwogICAgdmFyIGlzSW5wdXRCb3ggPSB1cHBlclRhZyA9PSAiSU5QVVQi");
    sb.append("OwogICAgdmFyIGlzRmllbGRTZXQgPSB1cHBlclRhZyA9PSAiRklFTERTRVQiOwogICAgdmFyIGlzUHVs");
    sb.append("bCA9IHVwcGVyVGFnID09ICJQVUxMVkFMVUUiOwogICAgdmFyIGhhc05hbWUgPSAibmFtZSIgaW4gZWw7");
    sb.append("CiAgICB2YXIgaW5zZXJ0QXQgPSBvYmpUb0luc2VydEludG87CiAgICAvLyB0aGUgYXBwbHkgZnVuY3Rp");
    sb.append("b24gaXMgaG93IHdlIGluamVjdCB0aGUgdmFsdWUgaW50byB0aGUgb2JqZWN0CiAgICB2YXIgYXBwbHkg");
    sb.append("PSBmdW5jdGlvbiAodmFsKSB7IH07CgogICAgdmFyIG5hbWUgPSAiIjsKICAgIGlmIChoYXNOYW1lICYm");
    sb.append("IChqdXN0U2V0IHx8IGlzSW5wdXRCb3ggfHwgaXNGaWVsZFNldCB8fCBpc1B1bGwpKSB7CiAgICAgIG5h");
    sb.append("bWUgPSBlbC5uYW1lOwogICAgICBpZiAobmFtZSA9PSAiIikgeyAvLyB0aGlzIGlzIGEgc3BlY2lhbCBu");
    sb.append("YW1lIGZvciB0aGluZ3MgdGhhdCBkb24ndCBnZXQgcGlja2VkIHVwCiAgICAgICAgcmV0dXJuOwogICAg");
    sb.append("ICB9CiAgICAgIHZhciBrRG90T3JTbGFzaCA9IGZpcnN0T2NjdXIobmFtZS5pbmRleE9mKCcuJyksIG5h");
    sb.append("bWUuaW5kZXhPZignLycpKTsKICAgICAgd2hpbGUgKGtEb3RPclNsYXNoID4gMCkgewogICAgICAgIHZh");
    sb.append("ciBwYXIgPSBuYW1lLnN1YnN0cmluZygwLCBrRG90T3JTbGFzaCk7CiAgICAgICAgaWYgKCEocGFyIGlu");
    sb.append("IGluc2VydEF0KSkgewogICAgICAgICAgaW5zZXJ0QXRbcGFyXSA9IHt9OwogICAgICAgIH0KICAgICAg");
    sb.append("ICBpbnNlcnRBdCA9IGluc2VydEF0W3Bhcl07CiAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKGtE");
    sb.append("b3RPclNsYXNoICsgMSk7CiAgICAgICAga0RvdE9yU2xhc2ggPSBmaXJzdE9jY3VyKG5hbWUuaW5kZXhP");
    sb.append("ZignLicpLCBuYW1lLmluZGV4T2YoJy8nKSk7CiAgICAgIH0KCiAgICAgIGlmIChuYW1lLmVuZHNXaXRo");
    sb.append("KCIrIikpIHsKICAgICAgICAvLyBoZXJlLCB3ZSBwdXNoIHRoZSB2YWx1ZSBpbnRvIHRoZSBhcnJheQog");
    sb.append("ICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZygwLCBuYW1lLmxlbmd0aCAtIDEpOwogICAgICAgIGFw");
    sb.append("cGx5ID0gZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIGlmICghKG5hbWUgaW4gaW5zZXJ0QXQpKSB7CiAg");
    sb.append("ICAgICAgICAgIGluc2VydEF0W25hbWVdID0gW3ZdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg");
    sb.append("ICAgaW5zZXJ0QXRbbmFtZV0ucHVzaCh2KTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgIC8vIGhlcmUgd2Ugc2V0IHRoZSBvYmplY3QKICAgICAgICBhcHBseSA9IGZ1bmN0");
    sb.append("aW9uICh2KSB7CiAgICAgICAgICBpbnNlcnRBdFtuYW1lXSA9IHY7CiAgICAgICAgfTsKICAgICAgfQog");
    sb.append("ICAgfQoKICAgIGlmIChpc1B1bGwpIHsKICAgICAgYXBwbHkoZWwucHVsbCgpKTsKICAgICAgcmV0dXJu");
    sb.append("OwogICAgfQoKICAgIGlmIChqdXN0U2V0KSB7CiAgICAgIGFwcGx5KGVsLnZhbHVlKTsKICAgIH0gZWxz");
    sb.append("ZSBpZiAoaXNGaWVsZFNldCkgewogICAgICB2YXIgbmV4dE9iamVjdCA9IHt9OwogICAgICBpZiAoImNo");
    sb.append("aWxkcmVuIiBpbiBlbCkgewogICAgICAgIHZhciBhcnIgPSBlbC5jaGlsZHJlbjsKICAgICAgICB2YXIg");
    sb.append("biA9IGFyci5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAg");
    sb.append("ICAgIHZhciBjaCA9IGVsLmNoaWxkcmVuW2tdOwogICAgICAgICAgYnVpbGRfb2JqKGNoLCBuZXh0T2Jq");
    sb.append("ZWN0LCBwYXNzd29yZHMsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgYXBwbHkobmV4dE9i");
    sb.append("amVjdCk7CiAgICB9IGVsc2UgaWYgKGlzSW5wdXRCb3gpIHsKICAgICAgdmFyIHR5cGUgPSAoInR5cGUi");
    sb.append("IGluIGVsKSA/IGVsLnR5cGUudG9VcHBlckNhc2UoKSA6ICJURVhUIjsKICAgICAgaWYgKHR5cGUgPT0g");
    sb.append("IlNVQk1JVCIgfHwgdHlwZSA9PSAiUkVTRVQiKSByZXR1cm47CiAgICAgIGlmICgodHlwZSA9PSAiUEFT");
    sb.append("U1dPUkQiIHx8IG5hbWUgPT0gInBhc3N3b3JkIiB8fCBuYW1lID09ICJjb25maXJtLXBhc3N3b3JkIiB8");
    sb.append("fCBuYW1lID09ICJuZXdfcGFzc3dvcmQiIHx8IG5hbWUgPT0gImNvbmZpcm0tbmV3X3Bhc3N3b3JkIikp");
    sb.append("IHsKICAgICAgICBwYXNzd29yZHNbbmFtZV0gPSBlbC52YWx1ZTsKICAgICAgICByZXR1cm47CiAgICAg");
    sb.append("IH0KICAgICAgaWYgKHR5cGUgPT0gIkNIRUNLQk9YIikgewogICAgICAgIGFwcGx5KGVsLmNoZWNrZWQg");
    sb.append("PyB0cnVlIDogZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gIlJBRElPIikgewogICAgICAg");
    sb.append("IGlmIChlbC5jaGVja2VkKSB7CiAgICAgICAgICBhcHBseShlbC52YWx1ZSk7CiAgICAgICAgfQogICAg");
    sb.append("ICB9IGVsc2UgewogICAgICAgIGFwcGx5KGVsLnZhbHVlKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgaWYgKCJjaGlsZHJlbiIgaW4gZWwpIHsKICAgICAgICB2YXIgYXJyID0gZWwuY2hpbGRyZW47CiAg");
    sb.append("ICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysr");
    sb.append("KSB7CiAgICAgICAgICB2YXIgY2ggPSBlbC5jaGlsZHJlbltrXTsKICAgICAgICAgIGJ1aWxkX29iaihj");
    sb.append("aCwgb2JqVG9JbnNlcnRJbnRvLCBwYXNzd29yZHMsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0KICAg");
    sb.append("IH0KICB9OwoKICBzZWxmLkJ1aWxkRm9ybU9iamVjdCA9IGZ1bmN0aW9uKGZvcm0pIHsKICAgIHZhciBv");
    sb.append("YmogPSB7fTsKICAgIGJ1aWxkX29iaihmb3JtLCBvYmosIGZhbHNlLCB0cnVlKTsKICAgIHJldHVybiBv");
    sb.append("Ymo7CiAgfTsKCiAgLy8gSEVMUEVSIHwgcmV0dXJuIGFuIG9iamVjdCBvZiBhbGwgdGhlIGlucHV0cyBv");
    sb.append("ZiB0aGUgZ2l2ZW4gZm9ybSBlbGVtZW50CiAgdmFyIGdldF9mb3JtID0gZnVuY3Rpb24gKGZvcm0sIHBh");
    sb.append("c3N3b3JkcykgewogICAgdmFyIG9iaiA9IHt9OwogICAgYnVpbGRfb2JqKGZvcm0sIG9iaiwgcGFzc3dv");
    sb.append("cmRzLCB0cnVlKTsKICAgIHJldHVybiBvYmo7CiAgfTsKCiAgLy8gPC4uLiByeDp3cmFwPWNvbnN0ID4K");
    sb.append("ICB2YXIgY3VzdG9tc19jb21wb25lbnRzID0ge307CiAgc2VsZi5wcm92aWRlQ3VzdG9tQ29tcG9uZW50");
    sb.append("ID0gZnVuY3Rpb24obmFtZSwgZm9vKSB7CiAgICBjdXN0b21zX2NvbXBvbmVudHNbbmFtZV0gPSBmb287");
    sb.append("CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0YWcgLi4uIHJ4OmN1c3RvbT0iPyIgcG9ydDokbmFtZT0kb3V0");
    sb.append("cHV0IC4uLiA+Li4uPC90YWc+IHwgYXNzZW1ibGUgYSB3cml0ZXIgb2JqZWN0CiAgc2VsZi5XWCA9IGZ1");
    sb.append("bmN0aW9uKGluc3RydWN0aW9ucykgewogICAgdmFyIHdyaXRlciA9IHt9OwogICAgZm9yICh2YXIgayA9");
    sb.append("IDA7IGsgKyAyIDwgaW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaysrKSB7CiAgICAgIHZhciBvYmogPSB7fTsK");
    sb.append("ICAgICAgd3JpdGVyW2luc3RydWN0aW9uc1trXV0gPSBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIHZh");
    sb.append("ciBzID0gdGhpczsKICAgICAgICBzLndbcy5rXSA9IHZhbHVlOwogICAgICAgIHMudC51cGRhdGUocy5k");
    sb.append("KTsKICAgICAgfS5iaW5kKHsKICAgICAgICBkOnBhdGhfdG8oaW5zdHJ1Y3Rpb25zWzFdLnZpZXcsIG9i");
    sb.append("aiksCiAgICAgICAgdzogb2JqLAogICAgICAgIGs6IGluc3RydWN0aW9uc1syXSwKICAgICAgICB0OiBp");
    sb.append("bnN0cnVjdGlvbnNbMV0udmlldy50cmVlCiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIHdyaXRlcjsK");
    sb.append("ICB9OwogIHNlbGYuQyA9IGZ1bmN0aW9uIChkb20sIHN0YXRlLCBuYW1lLCByeG9iaiwgd3JpdGVyLCBj");
    sb.append("aGlsZE1ha2VyV2l0aENhc2UsIGNvbmZpZykgewogICAgdmFyIG9iaiA9IHsKICAgICAgZG9tOiBkb20s");
    sb.append("CiAgICAgIHN0YXRlOiBzdGF0ZSwKICAgICAgaW5wdXRzOiByeG9iaiwKICAgICAgb3V0cHV0czogd3Jp");
    sb.append("dGVyLAogICAgICBtYWtlcjogY2hpbGRNYWtlcldpdGhDYXNlLAogICAgICBjb25maWc6IGNvbmZpZywK");
    sb.append("ICAgICAgZnJhbWV3b3JrOiBzZWxmCiAgICB9OwogICAgaWYgKG5hbWUgaW4gY3VzdG9tc19jb21wb25l");
    sb.append("bnRzKSB7CiAgICAgIGN1c3RvbXNfY29tcG9uZW50c1tuYW1lXShvYmopOwogICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgY29uc29sZS5lcnJvcigiZmFpbGVkIHRvIGZpbmQgY3VzdG9tIGNvbXBvbmVudDogJyIgKyBuYW1l");
    sb.append("ICsgIiciKTsKICAgIH0KICB9OwoKICB2YXIgd3JhcHBlcnMgPSB7fTsKICB2YXIgd3JhcHBlcnNfb25s");
    sb.append("b2FkID0ge307IC8vIFRPRE86IHN0dWR5IGlmIHRoaXMgY2FuIGJlIHJlbW92ZWQKICBzZWxmLlBSV1Ag");
    sb.append("PSBmdW5jdGlvbiAobmFtZSwgZm9vKSB7CiAgICB3cmFwcGVyc1tuYW1lXSA9IGZvbzsKICAgIGlmIChu");
    sb.append("YW1lIGluIHdyYXBwZXJzX29ubG9hZCkgewogICAgICB2YXIgdG9sb2FkID0gd3JhcHBlcnNfb25sb2Fk");
    sb.append("W25hbWVdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRvbG9hZC5sZW5ndGg7IGsrKykgewogICAg");
    sb.append("ICAgIHRvbG9hZFtrXSgpOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gPC4uLiByeDp3cmFwPWNvbnN0");
    sb.append("ID4KICBzZWxmLldQID0gZnVuY3Rpb24gKGRvbSwgc3RhdGUsIG5hbWUsIHJ4b2JqLCBjaGlsZE1ha2Vy");
    sb.append("V2l0aENhc2UpIHsKICAgIGlmIChuYW1lIGluIHdyYXBwZXJzKSB7CiAgICAgIHdyYXBwZXJzW25hbWVd");
    sb.append("KGRvbSwgc3RhdGUsIHJ4b2JqLCBjaGlsZE1ha2VyV2l0aENhc2UsIHNlbGYpOwogICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgdmFyIGxvYWRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB3cmFwcGVyc1tuYW1lXShkb20s");
    sb.append("IHN0YXRlLCByeG9iaiwgY2hpbGRNYWtlcldpdGhDYXNlLCBzZWxmKTsKICAgICAgfTsKICAgICAgaWYg");
    sb.append("KG5hbWUgaW4gd3JhcHBlcnNfb25sb2FkKSB7CiAgICAgICAgd3JhcHBlcnNfb25sb2FkW25hbWVdLnB1");
    sb.append("c2gobG9hZGVyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3cmFwcGVyc19vbmxvYWRbbmFtZV0gPSBb");
    sb.append("bG9hZGVyXTsKICAgICAgfQogICAgfQogIH07CgogIHZhciBiZWhhdmlvcnMgPSB7fTsKICBzZWxmLmRl");
    sb.append("ZmluZUJlaGF2aW9yID0gZnVuY3Rpb24obmFtZSwgYmVoYXZpb3IpIHsKICAgIGlmICh0eXBlb2YoYmVo");
    sb.append("YXZpb3IpID09ICdmdW5jdGlvbicpIHsKICAgICAgYmVoYXZpb3JzW25hbWVdID0gYmVoYXZpb3I7CiAg");
    sb.append("ICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoImRlZmluaW5nIGJlaGF2aW9yICciICsgbmFt");
    sb.append("ZSArICInIGZhaWxlZCBkdWUgdG8gbm90IGEgZnVuY3Rpb24iKQogICAgfQogIH07CgogIC8vIFJVTlRJ");
    sb.append("TUUgfCByeDpiZWhhdmlvcj0kbmFtZQogIHNlbGYuQkhWID0gZnVuY3Rpb24oZG9tLCBzdGF0ZSwgbmFt");
    sb.append("ZSwgY29uZmlnKSB7CiAgICBpZiAobmFtZSBpbiBiZWhhdmlvcnMpIHsKICAgICAgdmFyIGNvbm4gPSBu");
    sb.append("dWxsOwogICAgICB0cnkgewogICAgICAgIGNvbm4gPSBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyOwog");
    sb.append("ICAgICB9IGNhdGNoIChlKSB7fQogICAgICBiZWhhdmlvcnNbbmFtZV0oZG9tLCBjb25uLCBjb25maWcs");
    sb.append("IHNlbGYpOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coImNvdWxkbid0IGZpbmQgYmVoYXZp");
    sb.append("b3I6IiArIG5hbWUpOwogICAgfQogIH07CgogIC8vIFJVTlRJTUUgfCByZWdpc3RlciB0aGUgcGFnZSBm");
    sb.append("b3IgdGhlIHVyaSB0byB0aGUgZ2l2ZW4gZm9vKCkuCiAgc2VsZi5QRyA9IGZ1bmN0aW9uICh1cmksIGZv");
    sb.append("bykgewogICAgdmFyIGhlYWQgPSByb3V0ZXI7CiAgICBmb3IgKHZhciBrID0gMDsgayA8IHVyaS5sZW5n");
    sb.append("dGg7IGsrKykgewogICAgICB2YXIgcGFydCA9IHVyaVtrXTsKICAgICAgaWYgKCEocGFydCBpbiBoZWFk");
    sb.append("KSkgewogICAgICAgIGhlYWRbcGFydF0gPSB7fTsKICAgICAgfQogICAgICBoZWFkID0gaGVhZFtwYXJ0");
    sb.append("XTsKICAgIH0KICAgIGhlYWRbIkAiXSA9IGZvbzsKICB9OwoKICB2YXIgcm91dGUgPSBmdW5jdGlvbiAo");
    sb.append("cGFydHMsIGF0LCBoZWFkLCB2aWV3KSB7CiAgICBpZiAoYXQgPCBwYXJ0cy5sZW5ndGgpIHsKICAgICAg");
    sb.append("aWYgKCJudW1iZXIiIGluIGhlYWQpIHsKICAgICAgICB2YXIgbmVjayA9IGhlYWRbIm51bWJlciJdOwog");
    sb.append("ICAgICAgIHZhciB2YWwgPSBwYXJzZUZsb2F0KHBhcnRzW2F0XSk7CiAgICAgICAgaWYgKCFpc05hTih2");
    sb.append("YWwpKSB7CiAgICAgICAgICBmb3IgKHZhciBicmFuY2ggaW4gbmVjaykgewogICAgICAgICAgICB2aWV3");
    sb.append("W2JyYW5jaF0gPSB2YWw7CiAgICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSByb3V0ZShwYXJ0cywgYXQg");
    sb.append("KyAxLCBuZWNrW2JyYW5jaF0sIHZpZXcpOwogICAgICAgICAgICBpZiAoY2FuZGlkYXRlICE9PSBudWxs");
    sb.append("KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTsKICAgICAgICAgICAgfQogICAgICAgICAg");
    sb.append("ICBkZWxldGUgdmlld1ticmFuY2hdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBp");
    sb.append("ZiAoInRleHQiIGluIGhlYWQpIHsKICAgICAgICB2YXIgbmVjayA9IGhlYWRbInRleHQiXTsKICAgICAg");
    sb.append("ICB2YXIgdmFsID0gcGFydHNbYXRdOwogICAgICAgIGZvciAodmFyIGJyYW5jaCBpbiBuZWNrKSB7CiAg");
    sb.append("ICAgICAgICB2aWV3W2JyYW5jaF0gPSB2YWw7CiAgICAgICAgICB2YXIgY2FuZGlkYXRlID0gcm91dGUo");
    sb.append("cGFydHMsIGF0ICsgMSwgbmVja1ticmFuY2hdLCB2aWV3KTsKICAgICAgICAgIGlmIChjYW5kaWRhdGUg");
    sb.append("IT09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTsKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICAgIGRlbGV0ZSB2aWV3W2JyYW5jaF07CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICgiZml4ZWQi");
    sb.append("IGluIGhlYWQpIHsKICAgICAgICB2YXIgbmVjayA9IGhlYWRbImZpeGVkIl07CiAgICAgICAgZm9yICh2");
    sb.append("YXIgYnJhbmNoIGluIG5lY2spIHsKICAgICAgICAgIGlmIChicmFuY2ggPT0gcGFydHNbYXRdKSB7CiAg");
    sb.append("ICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSByb3V0ZShwYXJ0cywgYXQgKyAxLCBuZWNrW2JyYW5jaF0s");
    sb.append("IHZpZXcpOwogICAgICAgICAgICBpZiAoY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICAgICAg");
    sb.append("cmV0dXJuIGNhbmRpZGF0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAg");
    sb.append("fQogICAgfSBlbHNlIHsKICAgICAgaWYgKCJAIiBpbiBoZWFkKSB7CiAgICAgICAgcmV0dXJuIGhlYWRb");
    sb.append("IkAiXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfTsKCgogIHNlbGYucmVzdW1lX3Vy");
    sb.append("aSA9ICIvIjsKICBzZWxmLmdhdGVzID0gW107CiAgLyoqIFJVTlRJTUUgfCA8Z2F0ZS1leGl0IGd1YXJk");
    sb.append("PSJyZWFkIiBzZXQ9IiI+ICovCiAgc2VsZi5JRyA9IGZ1bmN0aW9uKHN0YXRlUmVhZCwgcmVhZCwgc3Rh");
    sb.append("dGVXcml0ZSwgd3JpdGUpIHsKICAgIHZhciBzbSA9IHsKICAgICAgdmFsdWU6IGZhbHNlLAogICAgICBy");
    sb.append("dW46IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICh0aGlzLnZhbHVlKSB7CiAgICAgICAgICB2YXIgb2Jq");
    sb.append("ID0ge307CiAgICAgICAgICBvYmpbd3JpdGVdID0gdHJ1ZTsKICAgICAgICAgIHZhciBkZWx0YSA9IHBh");
    sb.append("dGhfdG8oc3RhdGVXcml0ZS52aWV3LCBvYmopOwogICAgICAgICAgc3RhdGVXcml0ZS52aWV3LnRyZWUu");
    sb.append("dXBkYXRlKGRlbHRhKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1");
    sb.append("cm4gZmFsc2U7CiAgICAgIH0sCiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlUmVhZCwgcmVhZCwgZnVu");
    sb.append("Y3Rpb24odmFsdWUpIHsKICAgICAgc20udmFsdWUgPSB2YWx1ZTsKICAgIH0pOwogICAgc2VsZi5nYXRl");
    sb.append("cy5wdXNoKHNtKTsKICB9OwogIHNlbGYuZ290byA9IGZ1bmN0aW9uICh1cmksIG5vdykgewogICAgc2Vs");
    sb.append("Zi5yZXN1bWVfdXJpID0gdXJpOwogICAgdmFyIGJsb2NrZWQgPSBmYWxzZTsKICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgc2VsZi5nYXRlcy5sZW5ndGg7IGsrKykgewogICAgICBpZiAoc2VsZi5nYXRlc1trXS5y");
    sb.append("dW4oKSkgewogICAgICAgIGJsb2NrZWQgPSB0cnVlOwogICAgICB9CiAgICB9CiAgICBpZiAoYmxvY2tl");
    sb.append("ZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAobm93KSB7CiAgICAgIHNlbGYuZ290b19ub3co");
    sb.append("dXJpKTsKICAgIH0gZWxzZSB7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgICBzZWxmLmdvdG9fbm93KHVyaSk7CiAgICAgIH0sIDEpOwogICAgfQogIH07CiAgLy8gUlVOVElN");
    sb.append("RTogPHRhZyAuLi4gcng6ZXZlbnQ9Ii4uLiByZXN1bWUgLi4uIj4uLgogIHNlbGYuYlIgPSBmdW5jdGlv");
    sb.append("bigpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bjogZnVuY3Rpb24oKSB7CiAgICAgICAgc2VsZi5nYXRl");
    sb.append("cyA9IFtdOwogICAgICAgIHNlbGYuZ290byhzZWxmLnJlc3VtZV91cmksIGZhbHNlKTsKICAgICAgfSwK");
    sb.append("ICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkge30KICAgIH07CiAgfTsKICBzZWxmLmdvdG9fbm93ID0gZnVu");
    sb.append("Y3Rpb24odXJpKSB7CiAgICBpZiAodXJpLnN0YXJ0c1dpdGgoIi8iKSkgewogICAgICBzZWxmLnJ1bihk");
    sb.append("b2N1bWVudC5ib2R5LCB1cmksIHRydWUpOwogICAgfSBlbHNlIHsKICAgICAgd2luZG93LmxvY2F0aW9u");
    sb.append("LmhyZWYgPSBmaXhIcmVmKHVyaSk7CiAgICB9CiAgfTsKCiAgdmFyIHVybEJhc2U2NFRvVWludDhBcnJh");
    sb.append("eSA9IGZ1bmN0aW9uKGJhc2U2NCkgewogICAgdmFyIHJhd0RhdGEgPSB3aW5kb3cuYXRvYihiYXNlNjQp");
    sb.append("OwogICAgdmFyIG91dHB1dEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkocmF3RGF0YS5sZW5ndGgpOwogICAg");
    sb.append("Zm9yICh2YXIgaSA9IDA7IGkgPCByYXdEYXRhLmxlbmd0aDsgKytpKSB7CiAgICAgIG91dHB1dEFycmF5");
    sb.append("W2ldID0gcmF3RGF0YS5jaGFyQ29kZUF0KGkpOwogICAgfQogICAgcmV0dXJuIG91dHB1dEFycmF5Owog");
    sb.append("IH0KCiAgc2VsZi5jdXJyZW50UHVzaEV2ZW50ID0gZnVuY3Rpb24oKSB7fTsKCiAgdmFyIGdldFdlYlB1");
    sb.append("c2hTdGF0dXMgPSBmdW5jdGlvbigpIHsKICAgIHZhciByZXN1bHQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRl");
    sb.append("bSgid2VicHVzaF9zdGF0dXMiKTsKICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mKHJlc3VsdCkgPT0gInN0");
    sb.append("cmluZyIpIHsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIHJldHVybiAidW5rbm93biI7CiAg");
    sb.append("fQoKICB2YXIgc2V0UHVzaFN0YXR1cyA9IGZ1bmN0aW9uKHN0YXR1cykgewogICAgbG9jYWxTdG9yYWdl");
    sb.append("LnNldEl0ZW0oIndlYnB1c2hfc3RhdHVzIiwgc3RhdHVzKTsKICAgIHNlbGYuY3VycmVudFB1c2hFdmVu");
    sb.append("dCgpOwogIH07CiAgc2VsZi5zZXRQdXNoU3RhdHVzID0gc2V0UHVzaFN0YXR1czsKCiAgdmFyIHNldFB1");
    sb.append("c2hFdmVudCA9IGZ1bmN0aW9uKGZvbykgewogICAgc2VsZi5jdXJyZW50UHVzaEV2ZW50ID0gZm9vOwog");
    sb.append("IH07CgogIHZhciBzZXR1cFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIChyZWdpc3RyYXRpb24sIHZhcGlk");
    sb.append("UHVibGljS2V5LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9uKSB7CiAgICBjb25uZWN0aW9u");
    sb.append("LmJ1bXAoIndwcyIpOwogICAgdmFyIHB1c2hLZXlMb2NhbCA9ICJwdXNoX2VuZHBvaW50XyIgKyBpZGVu");
    sb.append("dGl0eU5hbWU7CiAgICByZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIKICAgIC5nZXRTdWJzY3JpcHRpb24o");
    sb.append("KS50aGVuKGFzeW5jIGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHsKICAgICAgICBpZiAoc3Vic2NyaXB0");
    sb.append("aW9uKSB7CiAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uOwogICAgICAgIH0KICAgICAgICBjb25z");
    sb.append("dCBjb252ZXJ0ZWRWYXBpZEtleSA9IHVybEJhc2U2NFRvVWludDhBcnJheSh2YXBpZFB1YmxpY0tleSk7");
    sb.append("CiAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5zdWJzY3JpYmUoewogICAgICAg");
    sb.append("ICAgdXNlclZpc2libGVPbmx5OiB0cnVlLAogICAgICAgICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IGNv");
    sb.append("bnZlcnRlZFZhcGlkS2V5CiAgICAgICAgfSk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChzdWJzY3JpcHRp");
    sb.append("b24pIHsKICAgICAgLy8gbWFrZSBzdXJlIHdlIGhhdmUgYW4gZW5kcG9pbnQgc2F2ZWQgcmVsYXRlZCB0");
    sb.append("byB0aGUgcmlnaHQgdmVyc2lvbgogICAgICBjb25uZWN0aW9uLklkZW50aXR5SGFzaChpZGVudGl0eSwg");
    sb.append("ewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgaWYgKGxvY2FsU3Rv");
    sb.append("cmFnZS5nZXRJdGVtKCJwdXNoX3dvcmtlcl92ZXJzaW9uIikgIT0gdmVyc2lvbiB8fCBsb2NhbFN0b3Jh");
    sb.append("Z2UuZ2V0SXRlbSgibGFzdF9pZGVudGl0eV91c2VkIikgIT0gcmVzdWx0LmlkZW50aXR5SGFzaCkgewog");
    sb.append("ICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwdXNoS2V5TG9jYWwpOwogICAgICAgICAg");
    sb.append("ICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicHVzaF93b3JrZXJfdmVyc2lvbiIsIHZlcnNpb24pOwogICAg");
    sb.append("ICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibGFzdF9pZGVudGl0eV91c2VkIiwgcmVzdWx0Lmlk");
    sb.append("ZW50aXR5SGFzaCk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgc3ViID0gc3Vic2NyaXB0aW9uLnRv");
    sb.append("SlNPTigpOwogICAgICAgICAgdmFyIHZhbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHB1c2hLZXlMb2Nh");
    sb.append("bCk7CiAgICAgICAgICBpZiAodmFsICYmIHZhbCA9PSBzdWIuZW5kcG9pbnQpIHsKICAgICAgICAgICAg");
    sb.append("Y29ubmVjdGlvbi5idW1wKCJ3cGEiKTsKICAgICAgICAgICAgc2V0UHVzaFN0YXR1cygic3VjY2VzcyIp");
    sb.append("OwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBzdWJbJ0BtZXRob2QnXSA9");
    sb.append("ICd3ZWJwdXNoJzsKICAgICAgICAgIHN1YlsnQHRpbWUnXSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwog");
    sb.append("ICAgICAgICAgdmFyIGRldmljZSA9IHt9OwogICAgICAgICAgZGV2aWNlLm1vZGUgPSAnd2ViJwogICAg");
    sb.append("ICAgICAgaWYgKHdpbmRvdyAmJiB3aW5kb3cubmF2aWdhdG9yICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNl");
    sb.append("ckFnZW50KSB7CiAgICAgICAgICAgIGRldmljZS51YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50");
    sb.append("OwogICAgICAgICAgfQogICAgICAgICAgY29ubmVjdGlvbi5QdXNoUmVnaXN0ZXIoaWRlbnRpdHksIHNl");
    sb.append("bGYuZG9tYWluLCBzdWIsIGRldmljZSwgewogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHsK");
    sb.append("ICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwdXNoS2V5TG9jYWwsIHN1Yi5lbmRwb2lu");
    sb.append("dCk7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIndlYnB1c2hfc3RhdHVzIiwgInN1");
    sb.append("Y2Nlc3MiKTsKICAgICAgICAgICAgICBzZXRQdXNoU3RhdHVzKCJzdWNjZXNzIik7CiAgICAgICAgICAg");
    sb.append("IH0sCiAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGNvbm5lY3Rp");
    sb.append("b24uYnVtcCgid3BmIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAg");
    sb.append("ICAgZmFpbHVyZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjb25uZWN0aW9uLmJ1bXAoIndwZiIpOwog");
    sb.append("ICAgICAgIH0KICAgICAgfSk7CiAgICB9LCBmdW5jdGlvbihlcnIpIHsKICAgICAgc2V0UHVzaFN0YXR1");
    sb.append("cygiZmFpbGVkIik7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHB1c2hLZXlMb2NhbCk7CiAg");
    sb.append("ICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJsYXN0X2lkZW50aXR5X3VzZWQiKTsKICAgICAgbG9j");
    sb.append("YWxTdG9yYWdlLnJlbW92ZUl0ZW0oInB1c2hfd29ya2VyX3ZlcnNpb24iKTsKICAgICAgY29ubmVjdGlv");
    sb.append("bi5idW1wKCJ3cGQiKTsKICAgICAgY29ubmVjdGlvbi5sb2coInB1c2hzZXR1cCIsICIiICsgZXJyKTsK");
    sb.append("ICAgIH0pOwogIH0KCiAgdmFyIHNldHVwUHVzaCA9IGZ1bmN0aW9uKHBhdGgsIHZhcGlkUHVibGljS2V5");
    sb.append("LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9uKSB7CiAgICBpZiAobmF2aWdhdG9yLnNlcnZp");
    sb.append("Y2VXb3JrZXIpIHsKICAgICAgdHJ5IHsKICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5nZXRS");
    sb.append("ZWdpc3RyYXRpb25zKCkudGhlbihmdW5jdGlvbiAocmVnaXN0cmF0aW9ucykgewogICAgICAgICAgdmFy");
    sb.append("IGZvdW5kID0gZmFsc2U7CiAgICAgICAgICBmb3IgKGxldCByZWdpc3RyYXRpb24gb2YgcmVnaXN0cmF0");
    sb.append("aW9ucykgewogICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uLmFjdGl2ZSkgewogICAgICAgICAgICAg");
    sb.append("IGlmICghcmVnaXN0cmF0aW9uLmFjdGl2ZS5zY3JpcHRVUkwuZW5kc1dpdGgocGF0aCkpIHsKICAgICAg");
    sb.append("ICAgICAgICAgIHJlZ2lzdHJhdGlvbi51bnJlZ2lzdGVyKCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHNldHVwU3Vic2NyaXB0");
    sb.append("aW9uKHJlZ2lzdHJhdGlvbiwgdmFwaWRQdWJsaWNLZXksIGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZl");
    sb.append("cnNpb24pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAg");
    sb.append("aWYgKCFmb3VuZCkgewogICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcihw");
    sb.append("YXRoKTsKICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHkudGhlbihmdW5jdGlv");
    sb.append("biAocmVnaXN0cmF0aW9uKSB7CiAgICAgICAgICAgICAgc2V0dXBTdWJzY3JpcHRpb24ocmVnaXN0cmF0");
    sb.append("aW9uLCB2YXBpZFB1YmxpY0tleSwgaWRlbnRpdHksIGlkZW50aXR5TmFtZSwgdmVyc2lvbik7CiAgICAg");
    sb.append("ICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIGZ1bmN0aW9uKGV4KSB7CiAgICAgICAgICBj");
    sb.append("b25uZWN0aW9uLmJ1bXAoIndwaTMiKTsKICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKCJ3b3JrZXItZmlu");
    sb.append("ZCIsICIiICsgZXgpOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChleCkgewogICAgICAgIGNvbnNv");
    sb.append("bGUuZXJyb3IoImZhaWxlZCB0byByZWdpc3RlciBzZXJ2aWNlIHdvcmtlciIsIGV4KTsKICAgICAgICBz");
    sb.append("ZXRQdXNoU3RhdHVzKCJpbXBvc3NpYmxlIik7CiAgICAgICAgY29ubmVjdGlvbi5idW1wKCJ3cGkyIik7");
    sb.append("CiAgICAgICAgY29ubmVjdGlvbi5sb2coIndvcmtlci1pbnN0YWxsIiwgIiIgKyBleCk7CiAgICAgIH0K");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCJubyBzZXJ2aWNlIHdvcmtlciBhdmFpbGFibGUi");
    sb.append("KTsKICAgICAgc2V0UHVzaFN0YXR1cygiaW1wb3NzaWJsZSIpOwogICAgICBjb25uZWN0aW9uLmJ1bXAo");
    sb.append("IndwaTEiKTsKICAgIH0KICB9CgogIHNlbGYud29ya2VyID0gZnVuY3Rpb24oaWRlbnRpdHlOYW1lLCBw");
    sb.append("YXRoLCB2ZXJzaW9uKSB7CiAgICB0cnkgewogICAgICBhZnRlckhhdmVJZGVudGl0eShpZGVudGl0eU5h");
    sb.append("bWUsIGZ1bmN0aW9uKGlkZW50aXR5KSB7CiAgICAgICAgY29ubmVjdGlvbi5Eb21haW5HZXRWYXBpZFB1");
    sb.append("YmxpY0tleShpZGVudGl0eSwgc2VsZi5kb21haW4sIHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9u");
    sb.append("KHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHNldHVwUHVzaChwYXRoLCByZXNwb25zZS5wdWJsaWNLZXks");
    sb.append("IGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pOwogICAgICAgICAgfSwKICAgICAgICAgIGZh");
    sb.append("aWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcigiZmFpbGVk");
    sb.append("IHRvIGdldCBwdWJsaWMta2V5OiIgKyByZWFzb24pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAg");
    sb.append("IH0pOwogICAgfSBjYXRjaCAoZXgpIHsKICAgICAgY29uc29sZS5lcnJvcigiZmFpbGVkIHRvIGluaXRp");
    sb.append("YWxpemUgd29ya2VyIiwgZXgpOwogICAgfQogIH07CgogIHNlbGYuaW5pdCA9IGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgIHNlbGYucnVuKGRvY3VtZW50LmJvZHksIGZpeFBhdGgod2luZG93LmxvY2F0aW9uLnBhdGhuYW1l");
    sb.append("ICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIHdpbmRvdy5sb2NhdGlvbi5oYXNoKSwgZmFsc2UpOwog");
    sb.append("ICAgd2luZG93Lm9ucG9wc3RhdGUgPSBmdW5jdGlvbiAocCkgewogICAgICBzZWxmLnJ1bihkb2N1bWVu");
    sb.append("dC5ib2R5LCBmaXhQYXRoKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5z");
    sb.append("ZWFyY2ggKyB3aW5kb3cubG9jYXRpb24uaGFzaCksIGZhbHNlKTsKICAgIH07CiAgfTsKCiAgdmFyIGN1");
    sb.append("cnJlbnRNZXNzYWdlSGFuZGxlcnMgPSB7fTsKICB2YXIgcmVtb3ZlQWxsTWVzc2FnZUhhbmRsZXJzID0g");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICBmb3IgKHZhciBrIGluIGN1cnJlbnRNZXNzYWdlSGFuZGxlcnMpIHsKICAg");
    sb.append("ICAgZGVsZXRlIGN1cnJlbnRNZXNzYWdlSGFuZGxlcnNba107CiAgICB9CiAgfTsKCiAgc2VsZi5yZWdp");
    sb.append("c3Rlck1lc3NhZ2VIYW5kbGVyID0gZnVuY3Rpb24oY2hhbm5lbCwgaGFuZGxlcikgewogICAgaWYgKGNo");
    sb.append("YW5uZWwgaW4gY3VycmVudE1lc3NhZ2VIYW5kbGVycykgewogICAgICBjdXJyZW50TWVzc2FnZUhhbmRs");
    sb.append("ZXJzW2NoYW5uZWxdLnB1c2goaGFuZGxlcik7CiAgICB9IGVsc2UgewogICAgICBjdXJyZW50TWVzc2Fn");
    sb.append("ZUhhbmRsZXJzW2NoYW5uZWxdID0gW2hhbmRsZXJdOwogICAgfQogIH07CgogIHZhciByb3V0ZU1lc3Nh");
    sb.append("Z2UgPSBmdW5jdGlvbihldmVudCkgewogICAgdHJ5IHsKICAgICAgaWYgKCEoJ2RhdGEnIGluIGV2ZW50");
    sb.append("KSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodHlwZW9mIChldmVudC5kYXRhKSAh");
    sb.append("PSAnb2JqZWN0JykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoISgnY2hhbm5lbCcg");
    sb.append("aW4gZXZlbnQuZGF0YSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNoYW5uZWwg");
    sb.append("PSBldmVudC5kYXRhLmNoYW5uZWw7CiAgICAgIHZhciBsaXN0ID0gY3VycmVudE1lc3NhZ2VIYW5kbGVy");
    sb.append("c1tjaGFubmVsXTsKICAgICAgaWYgKGxpc3QgIT09IG51bGwpIHsKICAgICAgICB2YXIgbiA9IGxpc3Qu");
    sb.append("bGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgICBsaXN0");
    sb.append("W2tdKGV2ZW50LmRhdGEsIGV2ZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gY2F0Y2ggKHdlbGxN");
    sb.append("YXliZVRoZUVycm9yRG9lc250QmVsb25nVG9NZSkgewogICAgICAvLyA6c2hydWc6CiAgICB9CiAgfTsK");
    sb.append("CiAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5l");
    sb.append("cigibWVzc2FnZSIsIHJvdXRlTWVzc2FnZSwgZmFsc2UpOwogIH0gZWxzZSBpZiAod2luZG93LmF0dGFj");
    sb.append("aEV2ZW50KSB7CiAgICB3aW5kb3cuYXR0YWNoRXZlbnQoIm9ubWVzc2FnZSIsIHJvdXRlTWVzc2FnZSwg");
    sb.append("ZmFsc2UpOwogIH0KCiAgc2VsZi5jdXJyZW50Vmlld2VySWQgPSAwOwogIC8vIEFQSSB8IFJ1biB0aGUg");
    sb.append("cGFnZSBpbiB0aGUgZ2l2ZW4gcGxhY2UKICBzZWxmLnJ1biA9IGZ1bmN0aW9uICh3aGVyZSwgcmF3UGF0");
    sb.append("aCwgcHVzaCkgewogICAgcmVtb3ZlQWxsTWVzc2FnZUhhbmRsZXJzKCk7CiAgICB2YXIgcGF0aCA9IHJh");
    sb.append("d1BhdGg7CiAgICB3aGlsZSAocGF0aC5lbmRzV2l0aCgiLyIpICYmIHBhdGggIT0gIi8iKSB7CiAgICAg");
    sb.append("IHBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxlbmd0aCAtIDEpOwogICAgfQogICAgZm9yIChj");
    sb.append("b25LZXkgaW4gY29ubmVjdGlvbnMpIHsKICAgICAgY29ubmVjdGlvbnNbY29uS2V5XS50cmVlLm51a2Uo");
    sb.append("KTsKICAgICAgY29ubmVjdGlvbnNbY29uS2V5XS5udWtlKCk7CiAgICB9CiAgICB2YXIgc2VhcmNoID0g");
    sb.append("IiI7CiAgICB2YXIga1F1ZXN0aW9uID0gcGF0aC5pbmRleE9mKCc/Jyk7CiAgICBpZiAoa1F1ZXN0aW9u");
    sb.append("ID4gMCkgewogICAgICBzZWFyY2ggPSBwYXRoLnN1YnN0cmluZyhrUXVlc3Rpb24pOwogICAgICBwYXRo");
    sb.append("ID0gcGF0aC5zdWJzdHJpbmcoMCwga1F1ZXN0aW9uKTsKICAgIH0KICAgIHZhciBwYXJ0cyA9IChwYXRo");
    sb.append("LnN0YXJ0c1dpdGgoIi8iKSA/IHBhdGguc3Vic3RyaW5nKDEpIDogcGF0aCkuc3BsaXQoIi8iKTsKICAg");
    sb.append("IHZhciBpbml0ID0ge307CiAgICBzZWxmLmN1cnJlbnRWaWV3ZXJJZCsrOwogICAgaW5pdC52aWV3ZXJf");
    sb.append("Y3VycmVudF9wYWdlX2lkID0gc2VsZi5jdXJyZW50Vmlld2VySWQ7CiAgICB0cnkgewogICAgICBpbml0");
    sb.append("LnZpZXdlcl90aW1lem9uZSA9IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50");
    sb.append("aW1lWm9uZTsKICAgICAgaW5pdC52aWV3ZXJfbGFuZ3VhZ2UgPSBuYXZpZ2F0b3IubGFuZ3VhZ2U7CiAg");
    sb.append("ICB9IGNhdGNoIChicm93c2VyQmFkKSB7CiAgICAgIC8vIHdlIGp1c3QgZG9uJ3Qgc2VlIHRoZSB2aWV3");
    sb.append("c3RhdGUgaWYgd2UgZG9uJ3QgaGF2ZSB0aGVzZSBhdmFpbGFibGUKICAgIH0KICAgIGluaXQudmlld2Vy");
    sb.append("X3NlYXJjaF9xdWVyeSA9ICIiOwogICAgaW5pdC52aWV3ZXJfd2ViX3B1c2hfc3RhdHVzID0gZ2V0V2Vi");
    sb.append("UHVzaFN0YXR1cygpOwogICAgaWYgKHNlYXJjaCAhPSAiPyIpIHsKICAgICAgaW5pdC52aWV3ZXJfc2Vh");
    sb.append("cmNoX3F1ZXJ5ID0gc2VhcmNoOwogICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1z");
    sb.append("KHNlYXJjaC5zdWJzdHJpbmcoMSkpOwogICAgICB2YXIga0l0ID0gcGFyYW1zLmtleXMoKTsKICAgICAg");
    sb.append("dmFyIHAgPSBrSXQubmV4dCgpOwogICAgICB3aGlsZSAoIXAuZG9uZSkgewogICAgICAgIGluaXRbcC52");
    sb.append("YWx1ZV0gPSBwYXJhbXMuZ2V0KHAudmFsdWUpOwogICAgICAgIHAgPSBrSXQubmV4dCgpOwogICAgICB9");
    sb.append("CiAgICB9CiAgICB2YXIgZm9vID0gcm91dGUocGFydHMsIDAsIHJvdXRlciwgaW5pdCk7CiAgICBudWtl");
    sb.append("KHdoZXJlKTsKICAgIGlmIChmb28gIT0gbnVsbCkgewogICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7");
    sb.append("CiAgICAgIHZhciBzdGF0ZSA9IHsgc2VydmljZTogY29ubmVjdGlvbiwgZGF0YTogbnVsbCwgdmlldzog");
    sb.append("ZnJlc2god2hlcmUpLCBjdXJyZW50OiAidmlldyIgfTsKICAgICAgc2VsZi5fX2N1cnJlbnQgPSBzdGF0");
    sb.append("ZTsKCiAgICAgIGNvbnN0IHZpZXdzdGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyeHZpZXdzdGF0");
    sb.append("ZScpOwogICAgICBpZiAobnVsbCAhPT0gdmlld3N0YXRlKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJl");
    sb.append("bW92ZUl0ZW0oJ3J4dmlld3N0YXRlJyk7CiAgICAgICAgaW5pdCA9IE9iamVjdC5hc3NpZ24oe30sIGlu");
    sb.append("aXQsIEpTT04ucGFyc2Uodmlld3N0YXRlKSk7CiAgICAgIH0KCiAgICAgIHN0YXRlLnZpZXcuaW5pdCA9");
    sb.append("IGluaXQ7CiAgICAgIHNlbGYuZ2F0ZXMgPSBbXTsKICAgICAgc2VsZi5yZXN1bWVfdXJpID0gcGF0aDsK");
    sb.append("ICAgICAgZm9vKHdoZXJlLCBzdGF0ZSk7CiAgICAgIHN0YXRlLnZpZXcudHJlZS5zdWJzY3JpYmUoc3Rh");
    sb.append("dGUudmlldy5kZWx0YSk7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoaW5pdCk7CiAgICAgIGlm");
    sb.append("IChwdXNoKSB7CiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHttZXJnZTpmYWxzZX0sICIi");
    sb.append("LCBmaXhIcmVmKHBhdGgpICsgc2VhcmNoKTsKICAgICAgfQogICAgICBzZXRQdXNoRXZlbnQoZnVuY3Rp");
    sb.append("b24oKSB7CiAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZSh7IHZpZXdlcl93ZWJfcHVzaF9zdGF0");
    sb.append("dXM6IGdldFdlYlB1c2hTdGF0dXMoKX0pOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChw");
    sb.append("YXRoICE9ICIvNDA0IikgewogICAgICAgIHNlbGYucnVuKHdoZXJlLCAiLzQwNCIpOwogICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgIC8vIGRlZmF1bHQgNDA0CiAgICAgIH0KICAgIH0KICAgIHdoZXJlLmFwcGVuZENo");
    sb.append("aWxkKGNvbm5lY3Rpb25Nb25pdG9yRG9tKTsKICB9OwoKICB2YXIgaWRlbnRpdGllcyA9IHt9OwoKICB2");
    sb.append("YXIgc3Rhc2hfaWRlbnRpdHkgPSBmdW5jdGlvbihuYW1lLCBpZGVudGl0eSwgY29ubmVjdGlvbikgewog");
    sb.append("ICAgLy8gVE9ETzogYmxvdyBhd2F5IGNvbm5lY3Rpb25zIChPSywgd2hhdCBkb2VzIHRoaXMgbWVhbikK");
    sb.append("ICAgIGlkZW50aXRpZXNbbmFtZV0gPSBpZGVudGl0eTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJp");
    sb.append("ZGVudGl0eV8iICsgbmFtZSwgaWRlbnRpdHkpOwogICAgdmFyIHJlcSA9IHt9OwogICAgcmVxWyduYW1l");
    sb.append("J10gPSBuYW1lOwogICAgcmVxWydpZGVudGl0eSddID0gaWRlbnRpdHk7CiAgICByZXFbJ21heC1hZ2Un");
    sb.append("XSA9IDU1Mjk2MDA7CgogICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICB4aHR0");
    sb.append("cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLnJlYWR5U3Rh");
    sb.append("dGUgPT0gNCkgewogICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIGxvY2Fs");
    sb.append("U3RvcmFnZS5zZXRJdGVtKCJsYXN0X3N0YXNoZWRfaWRlbnRpdHlfIiArIG5hbWUsICIiICsgRGF0ZS5u");
    sb.append("b3coKSkKICAgICAgICAgIGlmIChjb25uZWN0aW9uICE9IG51bGwpIHsKICAgICAgICAgICAgY29ubmVj");
    sb.append("dGlvbi5JZGVudGl0eVN0YXNoKGlkZW50aXR5LCBuYW1lLCB7CiAgICAgICAgICAgICAgc3VjY2Vzczog");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy8gVEhJUyBIQVMgRFJBR09OUyBVTlRJTCBBIEZV");
    sb.append("TEwgUFJPRFVDVElPTiBERVBMT1lNRU5UCiAgICAgICAgICAgICAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0");
    sb.append("SXRlbSgiaWRlbnRpdHlfIiArIG5hbWUsICJjb29raWU6IiArIG5hbWUpOwogICAgICAgICAgICAgIH0s");
    sb.append("CiAgICAgICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHh5eikgewoKICAgICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIHhodHRw");
    sb.append("Lm9wZW4oIlBVVCIsIHNlbGYucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0ICsgIi9+c3Rhc2gvIiAr");
    sb.append("IERhdGUubm93KCksIHRydWUpOwogICAgeGh0dHAud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsKICAgIHho");
    sb.append("dHRwLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxKSk7CiAgfTsKCiAgdmFyIHNob3VsZF9zdGFzaF9pZGVu");
    sb.append("dGl0eSA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHZhciBzdGFzaF9rZXkgPSAibGFzdF9zdGFzaGVkX2lk");
    sb.append("ZW50aXR5XyIgKyBuYW1lOwogICAgdmFyIGxhc3RTdGFzaCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHN0");
    sb.append("YXNoX2tleSk7CiAgICB0cnkgewogICAgICB2YXIgcGFyc2VkID0gcGFyc2VGbG9hdChsYXN0U3Rhc2gp");
    sb.append("OwogICAgICBpZiAoaXNOYU4ocGFyc2VkKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAg");
    sb.append("ICAgIHZhciBhZ2UgPSBEYXRlLm5vdygpIC0gbmV3IERhdGUocGFyc2VkKS5nZXRUaW1lKCk7CiAgICAg");
    sb.append("IHJldHVybiBhZ2UgPj0gMS40NGUrNzsKICAgIH0gY2F0Y2ggKGV4KSB7CiAgICAgIHJldHVybiB0cnVl");
    sb.append("OwogICAgfQogIH07CgogIHNlbGYuU0lHTk9VVCA9IGZ1bmN0aW9uICgpIHsKICAgIGlkZW50aXRpZXMg");
    sb.append("PSB7fTsKICAgIGZvciAodmFyIGlkZW50aXR5TmFtZSBpbiBpZGVudGl0aWVzKSB7CiAgICAgIGxvY2Fs");
    sb.append("U3RvcmFnZS5yZW1vdmVJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlOYW1lKTsKICAgIH0KICAgIGxv");
    sb.append("Y2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJpZGVudGl0eV9kZWZhdWx0Iik7CiAgICB2YXIgYXhlID0gW107");
    sb.append("CiAgICBmb3IgKHZhciBjaWQgaW4gY29ubmVjdGlvbnMpIHsKICAgICAgdmFyIGNvID0gY29ubmVjdGlv");
    sb.append("bnNbY2lkXTsKICAgICAgaWYgKGNvLnB0ciAhPSBudWxsKSB7CiAgICAgICAgY28ucHRyLmVuZCh7IHN1");
    sb.append("Y2Nlc3M6IGZ1bmN0aW9uICgpIHsgfSwgZmFpbHVyZTogZnVuY3Rpb24gKCkgeyB9IH0pOwogICAgICB9");
    sb.append("CiAgICAgIGF4ZS5wdXNoKGNpZCk7CiAgICB9CiAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5n");
    sb.append("dGg7IGsrKykgewogICAgICBkZWxldGUgY29ubmVjdGlvbnNbYXhlW2tdXTsKICAgIH0KICB9OwoKICBz");
    sb.append("ZWxmLkdPT0dMRV9TSUdOX09OID0gZnVuY3Rpb24gKGFjY2Vzc1Rva2VuKSB7CiAgICBjb25uZWN0aW9u");
    sb.append("LkluaXRDb252ZXJ0R29vZ2xlVXNlcihhY2Nlc3NUb2tlbiwgewogICAgICBzdWNjZXNzOiBmdW5jdGlv");
    sb.append("biAocGF5bG9hZCkgewogICAgICAgIHN0YXNoX2lkZW50aXR5KCJkZWZhdWx0IiwgcGF5bG9hZC5pZGVu");
    sb.append("dGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgc2VsZi5nb3RvKCIvIiwgZmFsc2UpOwogICAgICB9LAog");
    sb.append("ICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgY29uc29sZS5sb2coIkdvb2ds");
    sb.append("ZSBmYWlsdXJlOiAiICsgcmVhc29uKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLyoqIFJVTlRJTUUg");
    sb.append("fCByZWRpcmVjdCB0byBhIHBhZ2Ugd2l0aCBzdGF0ZSAqLwogIHNlbGYuYVJEcCA9IGZ1bmN0aW9uIChz");
    sb.append("dGF0ZSwgcHVsbGVyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdXJpID0gcHVs");
    sb.append("bGVyKHN0YXRlLnZpZXcuaW5pdCk7CiAgICAgIHJldHVybiB1cmk7CiAgICB9OwogIH07CgogIC8qKiBS");
    sb.append("VU5USU1FIHwgcmVkaXJlY3QgdG8gYSBzdGF0aWMgcGFnZSAqLwogIHNlbGYuYVJEeiA9IGZ1bmN0aW9u");
    sb.append("IChyYXcpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiByYXc7CiAgICB9CiAg");
    sb.append("fTsKCiAgdmFyIGlkZW50aXR5RXZlbnRzID0ge307CiAgdmFyIGFmdGVySGF2ZUlkZW50aXR5ID0gZnVu");
    sb.append("Y3Rpb24oaWRlbnRpdHlOYW1lLCBjYWxsYmFjaykgewogICAgaWRlbnRpdHlFdmVudHNbaWRlbnRpdHlO");
    sb.append("YW1lXSA9IGNhbGxiYWNrOwogIH07CiAgc2VsZi5hZnRlckhhdmVJZGVudGl0eSA9IGFmdGVySGF2ZUlk");
    sb.append("ZW50aXR5OwoKICAvKiogZm9yIGN1c3RvbSBlbGVtZW50cyB0byBsZWFybiBvZiB0aGUgaWRlbnRpdHkg");
    sb.append("Ki8KICBzZWxmLklEID0gZnVuY3Rpb24gKGlkZW50aXR5TmFtZSwgcmVkaXJlY3RUb0Z1bmMpIHsKICAg");
    sb.append("IGlmIChpZGVudGl0eU5hbWUgPT09IHRydWUpIHsKICAgICAgaWRlbnRpdHlOYW1lID0gImRlZmF1bHQi");
    sb.append("OwogICAgfQogICAgLy8gSUYgaWRlbnRpdHkgY29udGFpbnMgZG90cwogICAgdmFyIGlkZW50aXR5ID0g");
    sb.append("bnVsbDsKICAgIHZhciBjbGVhbnVwID0gZnVuY3Rpb24gKCkgewogICAgfTsKCiAgICB2YXIgdmFsID0g");
    sb.append("bG9jYWxTdG9yYWdlLmdldEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUpOwogICAgaWYgKHZh");
    sb.append("bCkgewogICAgICBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV0gPSB2YWw7CiAgICAgIGlmIChzaG91bGRf");
    sb.append("c3Rhc2hfaWRlbnRpdHkoaWRlbnRpdHlOYW1lKSkgewogICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50");
    sb.append("aXR5TmFtZSwgdmFsLCBudWxsKTsKICAgICAgfQogICAgfQoKICAgIGlmIChpZGVudGl0eU5hbWUuc3Rh");
    sb.append("cnRzV2l0aCgiZGlyZWN0OiIpKSB7CiAgICAgIC8vIFVzZSwgYXMgaXMKICAgICAgaWRlbnRpdHkgPSBp");
    sb.append("ZGVudGl0eU5hbWUuc3Vic3RyaW5nKDcpOwogICAgfSBlbHNlIGlmIChpZGVudGl0eU5hbWUgaW4gaWRl");
    sb.append("bnRpdGllcykgewogICAgICBpZGVudGl0eSA9IGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXTsKICAgICAg");
    sb.append("Y2xlYW51cCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBkZWxldGUgaWRlbnRpdGllc1tpZGVudGl0eU5h");
    sb.append("bWVdOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlO");
    sb.append("YW1lKTsKICAgICAgICBzZWxmLmdvdG8ocmVkaXJlY3RUb0Z1bmMoKSwgZmFsc2UpOwogICAgICB9Owog");
    sb.append("ICAgfSBlbHNlIHsKICAgICAgLy8gd2hhdGV2ZXIgcGFnZSB3ZSBhcmUsIG5lZWRzIHRvIGRpZSB3aGlj");
    sb.append("aCBtZWFucyB3ZSBuZWVkIHRvIG51a2UgZXZlcnl0aGluZyEKICAgICAgd2luZG93LnNldFRpbWVvdXQo");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYuZ290byhyZWRpcmVjdFRvRnVuYygpLCBmYWxzZSk7CiAg");
    sb.append("ICAgIH0sIDEwKTsKICAgICAgcmV0dXJuIHsgYWJvcnQ6IHRydWUgfTsKICAgIH0KICAgIGlmIChpZGVu");
    sb.append("dGl0eU5hbWUgaW4gaWRlbnRpdHlFdmVudHMpIHsKICAgICAgaWRlbnRpdHlFdmVudHNbaWRlbnRpdHlO");
    sb.append("YW1lXShpZGVudGl0eSk7CiAgICAgIGRlbGV0ZSBpZGVudGl0eUV2ZW50c1tpZGVudGl0eU5hbWVdOwog");
    sb.append("ICAgfQogICAgcmV0dXJuIHsgYWJvcnQ6IGZhbHNlLCBjbGVhbnVwOiBjbGVhbnVwLCBpZGVudGl0eTog");
    sb.append("aWRlbnRpdHkgfTsKICB9OwoKICAvKiBGb3IgY3VzdG9tIGNhbGxiYWNrcyB0byByZWRpcmVjdCBhbmQg");
    sb.append("aW52YWxpZGF0ZSBJRCBmYWlsdXJlcyAqLwogIHNlbGYuRklEQ0wgPSBmdW5jdGlvbiAoY2FsbGJhY2ss");
    sb.append("IGxvb2t1cCkgewogICAgcmV0dXJuIHsKICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkgewog");
    sb.append("ICAgICAgIGNhbGxiYWNrLnN1Y2Nlc3MocmVzdWx0KTsKICAgICAgfSwKICAgICAgbmV4dDogZnVuY3Rp");
    sb.append("b24gKGl0ZW0pIHsKICAgICAgICBjYWxsYmFjay5uZXh0KGl0ZW0pOwogICAgICB9LAogICAgICBjb21w");
    sb.append("bGV0ZTogZnVuY3Rpb24gKCkgewogICAgICAgIGNhbGxiYWNrLmNvbXBsZXRlKCk7CiAgICAgIH0sCiAg");
    sb.append("ICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICBjYWxsYmFjay5mYWlsdXJlKHJl");
    sb.append("YXNvbik7CiAgICAgICAgaWYgKHJlYXNvbiA9PSA0MDM0MDMgfHwgcmVhc29uID09IDQwMzUwMCB8fCBy");
    sb.append("ZWFzb24gPT0gMTg0MzMzIHx8IHJlYXNvbiA9PSA5ODIyNTMpIHsKICAgICAgICAgIGxvb2t1cC5jbGVh");
    sb.append("bnVwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH07CgogIHZhciBjdXN0b21EYXRhU291cmNl");
    sb.append("cyA9IHt9OwoKICAvKiogcHJvdmlkZSBjdXN0b20gZGF0YSAqLwogIHNlbGYuUFJDVURBID0gZnVuY3Rp");
    sb.append("b24gKG5hbWUsIGZvbykgewogICAgY3VzdG9tRGF0YVNvdXJjZXNbbmFtZV0gPSBmb287CiAgfTsKCiAg");
    sb.append("Ly8gPGN1c3RvbWRhdGEgc3JjPXNyYyAocGFyYW1ldGVyOng9eSkqID4KICBzZWxmLkNVREEgPSBmdW5j");
    sb.append("dGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBzcmMsIHJ4b2JqLCByZWRpcmVjdFRvLCBjaGlsZE1ha2Vy");
    sb.append("KSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDEw");
    sb.append("LCBmdW5jdGlvbiAoKSB7CiAgICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICBudWtlKHBhcmVudCk7");
    sb.append("CiAgICAgIHZhciBjdXN0b21UcmVlID0gZmFsc2U7CiAgICAgIGlmIChzcmMgaW4gY3VzdG9tRGF0YVNv");
    sb.append("dXJjZXMpIHsKICAgICAgICB2YXIgY29ucyA9IGN1c3RvbURhdGFTb3VyY2VzW3NyY107CiAgICAgICAg");
    sb.append("aWYgKHR5cGVvZiAoY29ucykgPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgY3VzdG9tVHJlZSA9IGNv");
    sb.append("bnMocnhvYmosIHByaW9yU3RhdGUsIHJlZGlyZWN0VG8sIHNlbGYpOwogICAgICAgIH0KICAgICAgfQog");
    sb.append("ICAgICBpZiAoIWN1c3RvbVRyZWUpIHsKICAgICAgICBjdXN0b21UcmVlID0gbmV3IEFkYW1hVHJlZSgp");
    sb.append("OwogICAgICB9CiAgICAgIHZhciBzdGF0ZSA9IHsKICAgICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNl");
    sb.append("cnZpY2UsCiAgICAgICAgZGF0YTogeyBjb25uZWN0aW9uOiBwcmlvclN0YXRlLmNvbm5lY3Rpb24sIHRy");
    sb.append("ZWU6IGN1c3RvbVRyZWUsIGRlbHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAg");
    sb.append("ICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICBjdXJyZW50OiAi");
    sb.append("ZGF0YSIKICAgICAgfTsKICAgICAgY2hpbGRNYWtlcihzdGF0ZSk7CiAgICAgIHN1YnNjcmliZV9zdGF0");
    sb.append("ZShzdGF0ZSwgdW5zdWIpOwogICAgfSk7CiAgfTsKCiAgLy8gPHRpdGxlIHZhbHVlPSIuLi4iIC8+CiAg");
    sb.append("c2VsZi5TVCA9IGZ1bmN0aW9uIChyeG9iaikgewogICAgaWYgKHJ4b2JqLnZhbHVlKSB7CiAgICAgIGRv");
    sb.append("Y3VtZW50LnRpdGxlID0gcnhvYmoudmFsdWU7CiAgICB9CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDUs");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHJ4b2JqLnZhbHVlKSB7CiAgICAgICAgZG9jdW1lbnQudGl0");
    sb.append("bGUgPSByeG9iai52YWx1ZTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gPHZpZXdzeW5jPgogIHNl");
    sb.append("bGYuVlN5ID0gZnVuY3Rpb24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgYXZhaWwsIG5vdGF2YWlsKSB7CiAg");
    sb.append("ICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5z");
    sb.append("dWJzY3JpYmVfc3luYyhmdW5jdGlvbiAoc3luY2VkKSB7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAg");
    sb.append("ZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgIHZhciBzdGF0ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAg");
    sb.append("IGlmIChzeW5jZWQpIHsKICAgICAgICBhdmFpbChwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgICBub3RhdmFpbChwYXJlbnQsIHN0YXRlKTsKICAgICAgfQogICAgICBzdWJzY3JpYmVfc3Rh");
    sb.append("dGUoc3RhdGUsIHVuc3ViKTsKICAgICAgLy8gVE9ETzogcmV0dXJuIGZhbHNlIHRvIHVuc3ViCiAgICAg");
    sb.append("IHJldHVybiB0cnVlOwogICAgfSk7CiAgfTsKCiAgdmFyIGJpbmRfcmVzcG9uZGVyID0gZnVuY3Rpb24g");
    sb.append("KGNvLCBjbGVhbnVwLCByZXRyeV9zbSkgewogICAgcmV0cnlfc20udW5leHBlY3RlZF9lcnJvcnMgPSAw");
    sb.append("OwogICAgcmV0cnlfc20uYmFja29mZiA9IDE7CiAgICByZXR1cm4gewogICAgICBuZXh0OiBmdW5jdGlv");
    sb.append("biAocGF5bG9hZCkgewogICAgICAgIGNvLmRlYnVnZ2VyKHBheWxvYWQpOwogICAgICAgIGNvLnNldF9j");
    sb.append("b25uZWN0ZWQodHJ1ZSk7CiAgICAgICAgcmV0cnlfc20udW5leHBlY3RlZF9lcnJvcnMgPSAwOwogICAg");
    sb.append("ICAgIHJldHJ5X3NtLmJhY2tvZmYgPSAxOwogICAgICAgIGlmICgiZGF0YSIgaW4gcGF5bG9hZC5kZWx0");
    sb.append("YSkgewogICAgICAgICAgY28udHJlZS51cGRhdGUocGF5bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgICB9");
    sb.append("CiAgICAgICAgaWYgKCJvdXRzdGFuZGluZyIgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgY28u");
    sb.append("b25kZWNpZGUocGF5bG9hZC5kZWx0YS5vdXRzdGFuZGluZyk7CiAgICAgICAgfQogICAgICAgIGlmICgn");
    sb.append("dmlld3N0YXRlJyBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBjby52aWV3c3RhdGV0cmVlLnVw");
    sb.append("ZGF0ZShwYXlsb2FkLmRlbHRhLnZpZXdzdGF0ZSk7CiAgICAgICAgfQogICAgICAgIGlmICgnbG9nJyBp");
    sb.append("biBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkLmRlbHRhLmxvZyk7");
    sb.append("CiAgICAgICAgfQogICAgICAgIGlmICgncmVsb2FkJyBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAg");
    sb.append("ICBpZiAocGF5bG9hZC5kZWx0YS5yZWxvYWRbJ3ByZXNlcnZlLXZpZXcnXSkgewogICAgICAgICAgICBs");
    sb.append("b2NhbFN0b3JhZ2Uuc2V0SXRlbSgncnh2aWV3c3RhdGUnLCBKU09OLnN0cmluZ2lmeShjby52aWV3c3Rh");
    sb.append("dGV0cmVlLnJhdygpKSk7CiAgICAgICAgICB9CiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2Fk");
    sb.append("KCk7CiAgICAgICAgfQogICAgICAgIGlmICgndmlld3BvcnQnIGluIHBheWxvYWQuZGVsdGEgJiYgJ21l");
    sb.append("c3NhZ2UnIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIHZhciB2aWV3cG9ydCA9IHBheWxvYWQu");
    sb.append("ZGVsdGEudmlld3BvcnQ7CiAgICAgICAgICBpZiAodmlld3BvcnQgaW4gY28uaGFuZGxlcnMpIHsKICAg");
    sb.append("ICAgICAgICAgY28uaGFuZGxlcnNbdmlld3BvcnRdKHBheWxvYWQuZGVsdGEubWVzc2FnZSwgY28pOwog");
    sb.append("ICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoJ3ZpZXctc3RhdGUtZmlsdGVyJyBpbiBwYXls");
    sb.append("b2FkLmRlbHRhKSB7CiAgICAgICAgICB2YXIgZmlsdGVyID0ge307CiAgICAgICAgICB2YXIga2V5cyA9");
    sb.append("IHBheWxvYWQuZGVsdGFbJ3ZpZXctc3RhdGUtZmlsdGVyJ107CiAgICAgICAgICBmb3IgKHZhciBrID0g");
    sb.append("MDsgayA8IGtleXMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgZmlsdGVyW2tleXNba11dID0gdHJ1");
    sb.append("ZTsKICAgICAgICAgIH0KICAgICAgICAgIGNvLmZpbHRlciA9IGZpbHRlcjsKICAgICAgICAgIGNvLmhh");
    sb.append("c19maWx0ZXIgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoJ2dvdG8nIGluIHBheWxvYWQuZGVs");
    sb.append("dGEpIHsKICAgICAgICAgIHNlbGYuZ290byhwYXlsb2FkLmRlbHRhLmdvdG8sIGZhbHNlKTsKICAgICAg");
    sb.append("ICB9CiAgICAgIH0sCiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gc2hvdWxk");
    sb.append("bid0IHJlYWxpc3RpY2FsbHkgaGFwcGVuIFRPRE86IHZhbGlkYXRlIDwtIHRydXRoCiAgICAgICAgY28u");
    sb.append("c2V0X2Nvbm5lY3RlZChmYWxzZSk7CiAgICAgICAgY28ucHRyID0gbnVsbDsKICAgICAgfSwKICAgICAg");
    sb.append("ZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIC8vIHJlZ2lzdGVyIHRoZSBmYWlsdXJl");
    sb.append("CiAgICAgICAgY28uc2V0X2Nvbm5lY3RlZChmYWxzZSk7CiAgICAgICAgY28ucHRyID0gbnVsbDsKICAg");
    sb.append("ICAgICBpZiAocmVhc29uID09IDQwMzQwMyB8fCByZWFzb24gPT0gNDAzNTAwIHx8IHJlYXNvbiA9PSAx");
    sb.append("ODQzMzMgfHwgcmVhc29uID09IDk4MjI1MykgewogICAgICAgICAgY2xlYW51cCgpOwogICAgICAgICAg");
    sb.append("cmV0dXJuOwogICAgICAgIH0KICAgICAgICAvLyBpcyBpdCBhbiBleHBlY3RlZCBlcnJvciB0aGF0IHdp");
    sb.append("bGwgaGFwcGVuIGEgYnVuY2g/CiAgICAgICAgdmFyIGV4cGVjdGVkX2Vycm9yID0gcmVhc29uID09IDk5");
    sb.append("OTsKICAgICAgICAvLyBkbyB3ZSBub3Qga25vdyBhYm91dCBhbiBlcnJvciB0aGF0IGhhcHBlbnMgYSBi");
    sb.append("dW5jaD8gaWYgc28sIHRoZW4gbGV0J3MgYXQgbGVhc3QgdHJ5IGFnYWluIGEgbnVtYmVyIG9mIGZpbml0");
    sb.append("ZSB0aW1lcy4KICAgICAgICB2YXIgYmxpbmRfcmV0cnkgPSByZXRyeV9zbS51bmV4cGVjdGVkX2Vycm9y");
    sb.append("cyA8IDE2OwogICAgICAgIGlmIChibGluZF9yZXRyeSkgewogICAgICAgICAgcmV0cnlfc20udW5leHBl");
    sb.append("Y3RlZF9lcnJvcnMrKzsKICAgICAgICB9CiAgICAgICAgLy8gcmV0cnkgb24gZWl0aGVyIGNhc2UKICAg");
    sb.append("ICAgICBpZiAoZXhwZWN0ZWRfZXJyb3IgfHwgYmxpbmRfcmV0cnkpIHsKICAgICAgICAgIHJldHJ5X3Nt");
    sb.append("LmJhY2tvZmYgPSBNYXRoLmNlaWwoTWF0aC5taW4ocmV0cnlfc20uYmFja29mZiArIE1hdGgucmFuZG9t");
    sb.append("KCkgKiByZXRyeV9zbS5iYWNrb2ZmICsgKGJsaW5kX3JldHJ5ID8gMTI1IDogMSksIDI1MDApKTsKICAg");
    sb.append("ICAgICAgIGlmIChleHBlY3RlZF9lcnJvcikgewogICAgICAgICAgICAvLyB0aGUgZXhwZWN0ZWQgZXJy");
    sb.append("b3IgaXMgYSBjb25uZWN0aW9uIGV2ZW50LCBzbyB3ZSBwcm90ZWN0IHRoZSBzZXJ2aWNlIGFuZCBqdW1w");
    sb.append("IGJhY2stb2ZmIHJpZ2h0IHRvIG5lYXIgbWF4IG92ZXIgYSBuaWNlIHNwcmVhZAogICAgICAgICAgICBy");
    sb.append("ZXRyeV9zbS5iYWNrb2ZmID0gTWF0aC5taW4oMTI1MCwgcmV0cnlfc20uYmFja29mZikgKyBNYXRoLnJh");
    sb.append("bmRvbSgpICogMTI1MDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChleHBlY3RlZF9lcnJvcikgewog");
    sb.append("ICAgICAgICAgICBjb25zb2xlLmxvZygiY29ubmVjdC1sb3NzfHJldHJ5aW5nLi4uICgiICsgcmV0cnlf");
    sb.append("c20uYmFja29mZiArICIpOyByZWFzb249IiArIHJlYXNvbiArIChibGluZF9yZXRyeSA/ICIgW2JsaW5k");
    sb.append("XSIgOiAiIikpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coImNvbm5l");
    sb.append("Y3QtZmFpbHVyZXxyZXRyeWluZy4uLiAoIiArIHJldHJ5X3NtLmJhY2tvZmYgKyAiKTsgcmVhc29uPSIg");
    sb.append("KyByZWFzb24gKyAoYmxpbmRfcmV0cnkgPyAiIFtibGluZF0iIDogIiIpKTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIC8vIFRPRE86IG5lZWQgYSBkaWZmZXJlbnQgZmVlZGJhY2sgbWVjaGFuaXNtIChtYXliZSBh");
    sb.append("IG51bWJlciB1bmRlciB0aGUgd2lmaSBpY29uPykKICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1");
    sb.append("bmN0aW9uKCkgewogICAgICAgICAgICByZXRyeV9zbS5nbygpOwogICAgICAgICAgfSwgcmV0cnlfc20u");
    sb.append("YmFja29mZik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJnYXZlIHVwIGNv");
    sb.append("bm5lY3Rpb247IiArIGNvLmxhYmVsICsgIjsgcmVhc29uPSIgKyByZWFzb24pOwogICAgICAgIH0KICAg");
    sb.append("ICAgfQogICAgfQogIH07CgogIHZhciBzZXR1cF9jbyA9IGZ1bmN0aW9uKGRlc2lyZWQsIHVuc3ViLCBj");
    sb.append("bywgc3RhdGUpIHsKICAgIGNvLnZpZXdzdGF0ZXRyZWUgPSBzdGF0ZS52aWV3LnRyZWU7CiAgICB2YXIg");
    sb.append("c3luY190cmVlID0gZnVuY3Rpb24gKCkgewogICAgICAvLyBsZXQncyBjb3B5IG91dCB0aGUgdHJlZSBm");
    sb.append("cm9tIHRoZSB2aWV3c3RhdGUKICAgICAgdmFyIG5ld190cmVlID0gc2FmZV9maWx0ZXIoc3RhdGUudmll");
    sb.append("dy50cmVlLmNvcHkoKSk7CgogICAgICAvLyBpZiB3ZSBoYXZlIGdvdCBhIGZpbHRlciBmcm9tIHRoZSBz");
    sb.append("ZXJ2ZXIsIHRoZW4gbGV0J3MgZmlsdGVyCiAgICAgIGlmIChjby5oYXNfZmlsdGVyKSB7CiAgICAgICAg");
    sb.append("Ly8gcmVjb25zdHJ1Y3QgdGhlIG5ldyB2aWV3IGJhc2VkIG9uIHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhl");
    sb.append("IGZpbHRlciBhbmQgdGhlIG5ldyBzdGF0ZQogICAgICAgIHZhciBmaWx0ZXJlZCA9IHt9OwogICAgICAg");
    sb.append("IGZvciAodmFyIGsgaW4gbmV3X3RyZWUpIHsKICAgICAgICAgIGlmIChjby5maWx0ZXJba10pIHsKICAg");
    sb.append("ICAgICAgICAgZmlsdGVyZWRba10gPSBuZXdfdHJlZVtrXTsKICAgICAgICAgIH0KICAgICAgICB9CiAg");
    sb.append("ICAgICAgLy8gYXNzdW1lIHRoZSBuZXcgdHJlZQogICAgICAgIG5ld190cmVlID0gZmlsdGVyZWQ7CiAg");
    sb.append("ICAgIH0KICAgICAgLy8gaWYgdGhlIGNsb25lIChpLmUuIHN0cmluZ2lmaWVkIHZlcnNpb24pIGlzIHRo");
    sb.append("ZSBzYW1lIGFzIHdoYXQgd2UgbGFzdCBzZW50LCB0aGVuIGRvbid0IHNlbmQgYW55dGhpbmcKICAgICAg");
    sb.append("dmFyIHByaW9yX2Nsb25lID0gSlNPTi5zdHJpbmdpZnkobmV3X3RyZWUpOwogICAgICBpZiAocHJpb3Jf");
    sb.append("Y2xvbmUgPT0gY28udmlld3N0YXRlX2Nsb25lKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAg");
    sb.append("IGNvLnZpZXdzdGF0ZV9zZW50ID0gZmFsc2U7CiAgICAgIGNvLnZzc2VxKys7CiAgICAgIGNvLnN5bmMo");
    sb.append("KTsKICAgICAgdmFyIHN5bmNlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoY28udnNzZXEgPT0g");
    sb.append("dGhpcy5ib3VuZCkgewogICAgICAgICAgY28udmlld3N0YXRlX3NlbnQgPSB0cnVlOwogICAgICAgICAg");
    sb.append("Y28uc3luYygpOwogICAgICAgIH0KICAgICAgfS5iaW5kKHsgYm91bmQ6IGNvLnZzc2VxIH0pOwogICAg");
    sb.append("ICBjby52aWV3c3RhdGVfY2xvbmUgPSBKU09OLnN0cmluZ2lmeShuZXdfdHJlZSk7CiAgICAgIGNvLnB0");
    sb.append("ci51cGRhdGUobmV3X3RyZWUsIHsgc3VjY2Vzczogc3luY2VkLCBmYWlsdXJlOiBzeW5jZWQgfSk7CiAg");
    sb.append("ICB9OwogICAgdmFyIGJpbmQgPSBmdW5jdGlvbiAoc2VuZE5vdykgewogICAgICB1bnN1Yi52aWV3ID0g");
    sb.append("c3RhdGUudmlldy50cmVlLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGNvLnB0ciA9");
    sb.append("PSBudWxsKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHN5bmNfdHJlZSgpOwog");
    sb.append("ICAgICB9KTsKICAgICAgaWYgKHNlbmROb3cpIHsKICAgICAgICBzeW5jX3RyZWUoKTsKICAgICAgfQog");
    sb.append("ICAgfTsKICAgIGlmIChjby5wdHIgIT0gbnVsbCAmJiBjby5ib3VuZCA9PSBkZXNpcmVkKSB7CiAgICAg");
    sb.append("IGJpbmQodHJ1ZSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmIChjby5wdHIgIT0gbnVs");
    sb.append("bCkgewogICAgICBjby5wdHIuZW5kKHsgc3VjY2VzczogZnVuY3Rpb24gKCkgeyB9LCBmYWlsdXJlOiBm");
    sb.append("dW5jdGlvbiAoKSB7IH0gfSk7CiAgICAgIGNvLnB0ciA9IG51bGw7CiAgICB9CiAgICByZXR1cm4gYmlu");
    sb.append("ZDsKICB9OwoKICAvLyA8Y29ubmVjdGlvbiBiaWxsaW5nIC4uLj4KICBzZWxmLkJDT05ORUNUID0gZnVu");
    sb.append("Y3Rpb24gKHN0YXRlLCByeG9iaikgewogICAgdmFyIHVuc3ViID0gewogICAgICB2aWV3OiBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgIH0KICAgIH07CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDUsIGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgaWYgKCEoJ25hbWUnIGluIHJ4b2JqKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQog");
    sb.append("ICAgICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKHJ4b2JqLmlkZW50aXR5LCBmdW5jdGlvbiAoKSB7IHJl");
    sb.append("dHVybiByeG9iai5yZWRpcmVjdDsgfSk7CiAgICAgIGlmIChpZExvb2t1cC5hYm9ydCkgewogICAgICAg");
    sb.append("IHJldHVybjsKICAgICAgfQogICAgICB2YXIgY28gPSBnZXRfY29ubmVjdGlvbl9vYmoocnhvYmoubmFt");
    sb.append("ZSk7CiAgICAgIHZhciBkZXNpcmVkID0gIjpiaWxsaW5nOiIgKyBpZExvb2t1cC5pZGVudGl0eTsKICAg");
    sb.append("ICAgdmFyIGJpbmQgPSBzZXR1cF9jbyhkZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKTsKICAgICAgaWYg");
    sb.append("KGJpbmQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvLmJvdW5kID0g");
    sb.append("ZGVzaXJlZDsKICAgICAgdmFyIGlkZW50aXR5ID0gaWRMb29rdXAuaWRlbnRpdHk7CiAgICAgIHZhciBj");
    sb.append("bGVhbnVwID0gaWRMb29rdXAuY2xlYW51cDsKICAgICAgdW5zdWIudmlldygpOwogICAgICBjby5pZGVu");
    sb.append("dGl0eSA9IGlkZW50aXR5OwogICAgICBjby5oYW5kbGVycyA9IHt9OwogICAgICBjby52aWV3c3RhdGVf");
    sb.append("c2VudCA9IHRydWU7CiAgICAgIGNvLmxhYmVsID0gIkJpbGxpbmcgWyAiICsgcnhvYmoubmFtZSArICJd");
    sb.append("IjsKICAgICAgY28udmlhX2JpbGxpbmcgPSB0cnVlOwogICAgICBjby52aWFfZG9tYWluID0gZmFsc2U7");
    sb.append("CiAgICAgIHZhciByZXRyeV9zbSA9IHt9OwogICAgICByZXRyeV9zbS5yZXNwb25kZXIgPSBiaW5kX3Jl");
    sb.append("c3BvbmRlcihjbywgY2xlYW51cCwgcmV0cnlfc20pOwogICAgICByZXRyeV9zbS5nbyA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgICAgIC8vIGJpYXMgdG8gbm90aGluZyBuZXcKICAgICAgICBjby52aWV3c3RhdGVfY2xv");
    sb.append("bmUgPSAie30iOwogICAgICAgIGNvLnB0ciA9IGNvbm5lY3Rpb24uQmlsbGluZ0Nvbm5lY3Rpb25DcmVh");
    sb.append("dGUoaWRlbnRpdHksIHJldHJ5X3NtLnJlc3BvbmRlcik7CiAgICAgIH07CiAgICAgIHJldHJ5X3NtLmdv");
    sb.append("KCk7CiAgICAgIGNvLnRyZWUudXBkYXRlKHt9KTsKICAgICAgYmluZChmYWxzZSk7CiAgICB9KTsKICB9");
    sb.append("OwoKICAvLyBDSEVDSyBGT1IgT1ZFUlJJREUgU0lHTkFMIEhFUkUKICBzZWxmLmRvbWFpbiA9IGxvY2F0");
    sb.append("aW9uLmhvc3RuYW1lOwogIHNlbGYuaG9zdCA9IGxvY2F0aW9uLmhvc3Q7CiAgc2VsZi5wcm90b2NvbCA9");
    sb.append("IGxvY2F0aW9uLnByb3RvY29sOwogIHNlbGYuaXNfbW9iaWxlID0gZmFsc2U7CgogIHZhciBob3N0T3Zl");
    sb.append("cnJpZGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibWRvX2hvc3QiKTsgLy8gbXVsdGkgZG9tYWluIGVu");
    sb.append("ZHBvaW50IGNob2ljZQogIGlmIChob3N0T3ZlcnJpZGUgIT0gbnVsbCkgewogICAgc2VsZi5ob3N0ID0g");
    sb.append("aG9zdE92ZXJyaWRlOwogICAgc2VsZi5kb21haW4gPSBob3N0T3ZlcnJpZGUuc3BsaXQoIjoiKVswXTsK");
    sb.append("ICB9CgogIHNlbGYudXJsX3ByZWZpeCA9IHNlbGYucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0OwoK");
    sb.append("CiAgc2VsZi5tb2JpbGVJbml0ID0gZnVuY3Rpb24oZGVmYXVsdE92ZXJyaWRlRG9tYWluKSB7CiAgICBz");
    sb.append("ZWxmLmRvbWFpbiA9IGRlZmF1bHRPdmVycmlkZURvbWFpbjsKICAgIHNlbGYuaG9zdCA9IGRlZmF1bHRP");
    sb.append("dmVycmlkZURvbWFpbjsKICAgIHNlbGYucHJvdG9jb2wgPSAiaHR0cHM6IjsKICAgIGNvbm5lY3Rpb24u");
    sb.append("cHJvdG9jb2wgPSAiaHR0cHM6IjsKICAgIHNlbGYuaXNfbW9iaWxlID0gdHJ1ZTsKICB9OwogIHNlbGYu");
    sb.append("bW9iaWxlSW5pdE11bHRpRG9tYWluID0gZnVuY3Rpb24oc3RhcnQsIGJldGFQcmVmaXgsIHByb2RQcmVm");
    sb.append("aXgpIHsKICAgIHNlbGYubWRfYmV0YVByZWZpeCA9IGJldGFQcmVmaXg7CiAgICBzZWxmLm1kX3Byb2RQ");
    sb.append("cmVmaXggPSBwcm9kUHJlZml4OwogICAgc2VsZi5wcm90b2NvbCA9ICJodHRwczoiOwogICAgY29ubmVj");
    sb.append("dGlvbi5wcm90b2NvbCA9ICJodHRwczoiOwogICAgc2VsZi5pc19tb2JpbGUgPSB0cnVlOwogICAgdmFy");
    sb.append("IGluaXRpYWxfcGF0aCA9IHN0YXJ0OwogICAgaWYgKCJyZWFkeSIgPT0gbG9jYWxTdG9yYWdlLmdldEl0");
    sb.append("ZW0oIm1kbCIpKSB7CiAgICAgIGluaXRpYWxfcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAr");
    sb.append("IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyB3aW5kb3cubG9jYXRpb24uaGFzaDsKICAgIH0KICAgIHNl");
    sb.append("bGYucnVuKGRvY3VtZW50LmJvZHksIGZpeFBhdGgoaW5pdGlhbF9wYXRoKSwgZmFsc2UpOwogICAgd2lu");
    sb.append("ZG93Lm9ucG9wc3RhdGUgPSBmdW5jdGlvbiAocCkgewogICAgICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5");
    sb.append("LCBmaXhQYXRoKGluaXRpYWxfcGF0aCksIGZhbHNlKTsKICAgIH07CiAgfTsKICB2YXIgZ2V0T3JDcmVh");
    sb.append("dGVNYW5pZmVzdHMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBkYiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVt");
    sb.append("KCJfX2RvbWFpbl9tYW5pZmVzdHMiKTsKICAgIGlmIChkYiA9PSBudWxsKSB7CiAgICAgIGRiID0ge3Nl");
    sb.append("cTowLCBtYW5pZmVzdHM6W119OwogICAgfSBlbHNlIHsKICAgICAgZGIgPSBKU09OLnBhcnNlKGRiKTsK");
    sb.append("ICAgIH0KICAgIHJldHVybiBkYjsKICB9OwogIHZhciBzYXZlTWFuaWZlc3RzID0gZnVuY3Rpb24oZGIp");
    sb.append("IHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJfX2RvbWFpbl9tYW5pZmVzdHMiLCBKU09OLnN0cmlu");
    sb.append("Z2lmeShkYikpOwogIH07CiAgc2VsZi5yZWdpc3Rlck1hbmlmZXN0ID0gZnVuY3Rpb24odXJsLCB1c2Ug");
    sb.append("PSBmYWxzZSkgewogICAgdmFyIGRiID0gZ2V0T3JDcmVhdGVNYW5pZmVzdHMoKTsKICAgIHZhciBhZGQg");
    sb.append("PSBmdW5jdGlvbihtYW5pZmVzdCkgewogICAgICBtYW5pZmVzdC5zb3VyY2UgPSB1cmw7CiAgICAgIG1h");
    sb.append("bmlmZXN0LmlkID0gZGIuc2VxOwogICAgICBkYi5zZXErKzsKICAgICAgZm9yICh2YXIgayA9IDA7IGsg");
    sb.append("PCBkYi5tYW5pZmVzdHMubGVuZ3RoOyBrKyspIHsKICAgICAgICBpZiAoZGIubWFuaWZlc3RzW2tdLnNv");
    sb.append("dXJjZSA9PSB1cmwpIHsKICAgICAgICAgIGRiLm1hbmlmZXN0c1trXSA9IG1hbmlmZXN0OwogICAgICAg");
    sb.append("ICAgc2F2ZU1hbmlmZXN0cyhkYik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICAgIGRiLm1hbmlmZXN0cy5wdXNoKG1hbmlmZXN0KTsKICAgICAgc2F2ZU1hbmlmZXN0cyhkYik7CiAg");
    sb.append("ICB9OwogICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICB4aHR0cC5vbnJlYWR5");
    sb.append("c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gNCkg");
    sb.append("ewogICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIGFkZChKU09OLnBhcnNl");
    sb.append("KHRoaXMucmVzcG9uc2VUZXh0KSk7CgogICAgICAgICAgaWYodXNlKSB7CiAgICAgICAgICAgIGlmIChk");
    sb.append("Yi5tYW5pZmVzdHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwg");
    sb.append("ZGIubWFuaWZlc3RzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAgICBpZiAoZGIubWFuaWZlc3Rz");
    sb.append("W2tdLnNvdXJjZSA9PSB1cmwpIHsKICAgICAgICAgICAgICAgICAgc2VsZi51c2VNYW5pZmVzdChkYi5t");
    sb.append("YW5pZmVzdHNba10uaWQpOwogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9");
    sb.append("CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9");
    sb.append("CiAgICB9OwogICAgeGh0dHAub3BlbigiR0VUIiwgdXJsLCB0cnVlKTsKICAgIHhodHRwLnNlbmQoKTsK");
    sb.append("ICB9OwogIC8vIFJVTlRJTUUobW9iaWxlKSB8IHJ4OmFjdGlvbj0ibWFuaWZlc3QtYWRkOiIKICBzZWxm");
    sb.append("Lk1EX2EgPSBmdW5jdGlvbihkb20sIHR5cGUsIHZhbHVlKSB7CiAgICByZWdfZXZlbnQobnVsbCwgZG9t");
    sb.append("LCB0eXBlLCBmdW5jdGlvbigpIHsKICAgICAgc2VsZi5yZWdpc3Rlck1hbmlmZXN0KHR5cGVvZih2YWx1");
    sb.append("ZSkgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlKCkgOiB2YWx1ZSk7CiAgICB9KTsKICB9OwoKICBzZWxmLnVz");
    sb.append("ZU1hbmlmZXN0ID0gZnVuY3Rpb24oaWQpIHsKICAgICAgdmFyIGRiID0gZ2V0T3JDcmVhdGVNYW5pZmVz");
    sb.append("dHMoKTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBkYi5tYW5pZmVzdHMubGVuZ3RoOyBrKyspIHsK");
    sb.append("ICAgICAgICB2YXIgbWFuaWZlc3QgPSBkYi5tYW5pZmVzdHNba107CiAgICAgICAgaWYgKG1hbmlmZXN0");
    sb.append("LmlkID09IGlkKSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibWRvX2hvc3QiLCBuZXcg");
    sb.append("VVJMKGRiLm1hbmlmZXN0c1trXS5zb3VyY2UpLmhvc3QpOwogICAgICAgICAgaWYgKG1hbmlmZXN0LmJl");
    sb.append("dGEpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kZWMiLCAiYmV0YSIpOwogICAg");
    sb.append("ICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kZWMiLCAicHJv");
    sb.append("ZCIpOwogICAgICAgICAgfQogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kbCIsICJyZWFk");
    sb.append("eSIpOwogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiLyI7CiAgICAgICAgfQogICAgICB9");
    sb.append("CiAgICB9CiAgLy8gUlVOVElNRShtb2JpbGUpIHwgcng6YWN0aW9uPSJtYW5pZmVzdC11c2U6IgogIHNl");
    sb.append("bGYuTURfdSA9IGZ1bmN0aW9uKGRvbSwgdHlwZSwgdmFsdWUpIHsKICAgIHJlZ19ldmVudChudWxsLCBk");
    sb.append("b20sIHR5cGUsIGZ1bmN0aW9uKCkgewogICAgICBzZWxmLnVzZU1hbmlmZXN0KHR5cGVvZih2YWx1ZSkg");
    sb.append("PT0gJ2Z1bmN0aW9uJyA/IHZhbHVlKCkgOiB2YWx1ZSk7CiAgICB9KTsKICB9OwogIHNlbGYubW9iaWxl");
    sb.append("TG9hZCA9IGZ1bmN0aW9uKHVybCkgewogICAgdmFyIHBhcnNlZCA9IG5ldyBVUkwodXJsKTsKICAgIGxv");
    sb.append("Y2FsU3RvcmFnZS5zZXRJdGVtKCJtZG9faG9zdCIsIHBhcnNlZC5ob3N0KTsKICAgIGlmIChwYXJzZWQu");
    sb.append("aG9zdC5lbmRzV2l0aChzZWxmLm1kX2JldGFQcmVmaXgpKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJ");
    sb.append("dGVtKCJtZGVjIiwgImJldGEiKTsKICAgIH0gZWxzZSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVt");
    sb.append("KCJtZGVjIiwgInByb2QiKTsKICAgIH0KICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcGFyc2VkLnBh");
    sb.append("dGg7CiAgfTsKICAvLyBSVU5USU1FKG1vYmlsZSkgfCByeDphY3Rpb249Im1hbmlmZXN0LWRlbDoiCiAg");
    sb.append("c2VsZi5NRF9kID0gZnVuY3Rpb24oZG9tLCB0eXBlLCB2YWx1ZSkgewogICAgcmVnX2V2ZW50KG51bGws");
    sb.append("IGRvbSwgdHlwZSwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBpZCA9IHBhcnNlSW50KHR5cGVvZih2YWx1");
    sb.append("ZSkgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlKCkgOiB2YWx1ZSk7CiAgICAgIHZhciBkYiA9IGdldE9yQ3Jl");
    sb.append("YXRlTWFuaWZlc3RzKCk7CiAgICAgIHZhciBuZXdfbWFuaWZlc3RzID0gW107CiAgICAgIGZvciAodmFy");
    sb.append("IGsgPSAwOyBrIDwgZGIubWFuaWZlc3RzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgaWYgKGRiLm1hbmlm");
    sb.append("ZXN0c1trXS5pZCAhPSBpZCkgewogICAgICAgICAgbmV3X21hbmlmZXN0cy5wdXNoKGRiLm1hbmlmZXN0");
    sb.append("c1trXSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGRiLm1hbmlmZXN0cyA9IG5ld19tYW5pZmVzdHM7");
    sb.append("CiAgICAgIHNhdmVNYW5pZmVzdHMoZGIpOwogICAgfSk7CiAgfTsKCiAgLy8gPGNvbm5lY3Rpb24gdXNl");
    sb.append("LWRvbWFpbiAuLi4+CiAgc2VsZi5EQ09OTkVDVCA9IGZ1bmN0aW9uIChzdGF0ZSwgcnhvYmopIHsKICAg");
    sb.append("IHZhciB1bnN1YiA9IHsKICAgICAgdmlldzogZnVuY3Rpb24gKCkgewogICAgICB9CiAgICB9OwogICAg");
    sb.append("cnhvYmouX18gPSBkZWJvdW5jZSg1LCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghKCduYW1lJyBpbiBy");
    sb.append("eG9iaikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGlkTG9va3VwID0gc2VsZi5J");
    sb.append("RChyeG9iai5pZGVudGl0eSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhvYmoucmVkaXJlY3Q7IH0pOwog");
    sb.append("ICAgICBpZiAoaWRMb29rdXAuYWJvcnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFy");
    sb.append("IGNvID0gZ2V0X2Nvbm5lY3Rpb25fb2JqKHJ4b2JqLm5hbWUpOwogICAgICB2YXIgZG9tYWluID0gc2Vs");
    sb.append("Zi5kb21haW47CiAgICAgIHZhciBkZXNpcmVkID0gZG9tYWluICsgaWRMb29rdXAuaWRlbnRpdHk7CiAg");
    sb.append("ICAgIHZhciBiaW5kID0gc2V0dXBfY28oZGVzaXJlZCwgdW5zdWIsIGNvLCBzdGF0ZSk7CiAgICAgIGlm");
    sb.append("IChiaW5kID09PSBmYWxzZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjby5ib3VuZCA9");
    sb.append("IGRlc2lyZWQ7CgogICAgICB2YXIgaWRlbnRpdHkgPSBpZExvb2t1cC5pZGVudGl0eTsKICAgICAgdmFy");
    sb.append("IGNsZWFudXAgPSBpZExvb2t1cC5jbGVhbnVwOwogICAgICB1bnN1Yi52aWV3KCk7CiAgICAgIGNvLmlk");
    sb.append("ZW50aXR5ID0gaWRlbnRpdHk7CiAgICAgIGNvLmhhbmRsZXJzID0ge307CiAgICAgIGNvLnZpZXdzdGF0");
    sb.append("ZV9zZW50ID0gdHJ1ZTsKICAgICAgY28ubGFiZWwgPSAiRG9tYWluOiIgKyBkb21haW4gKyAiIFsgIiAr");
    sb.append("IHJ4b2JqLm5hbWUgKyAiXSI7CiAgICAgIGNvLnZpYV9kb21haW4gPSB0cnVlOwogICAgICBjby52aWFf");
    sb.append("YmlsbGluZyA9IGZhbHNlOwogICAgICBjby5kb21haW4gPSBkb21haW47CiAgICAgIHZhciByZXRyeV9z");
    sb.append("bSA9IHt9OwogICAgICByZXRyeV9zbS5yZXNwb25kZXIgPSBiaW5kX3Jlc3BvbmRlcihjbywgY2xlYW51");
    sb.append("cCwgcmV0cnlfc20pOwogICAgICByZXRyeV9zbS5nbyA9IGZ1bmN0aW9uKCkgewogICAgICAgIC8vIGJp");
    sb.append("YXMgdG8gbm90aGluZyBuZXcKICAgICAgICBjby52aWV3c3RhdGVfY2xvbmUgPSAie30iOwogICAgICAg");
    sb.append("IGNvLnB0ciA9IGNvbm5lY3Rpb24uQ29ubmVjdGlvbkNyZWF0ZVZpYURvbWFpbihpZGVudGl0eSwgZG9t");
    sb.append("YWluLCBzYWZlX2ZpbHRlcihzdGF0ZS52aWV3LnRyZWUuY29weSgpKSwgcmV0cnlfc20ucmVzcG9uZGVy");
    sb.append("KTsKICAgICAgfTsKICAgICAgcmV0cnlfc20uZ28oKTsKICAgICAgY28udHJlZS51cGRhdGUoe30pOwog");
    sb.append("ICAgICBiaW5kKGZhbHNlKTsKICAgIH0pOwogIH07CgogIC8vIDxjb25uZWN0aW9uIC4uLj4KICBzZWxm");
    sb.append("LkNPTk5FQ1QgPSBmdW5jdGlvbiAoc3RhdGUsIHJ4b2JqKSB7CiAgICB2YXIgdW5zdWIgPSB7CiAgICAg");
    sb.append("IHZpZXc6IGZ1bmN0aW9uICgpIHsKICAgICAgfQogICAgfTsKICAgIHJ4b2JqLl9fID0gZGVib3VuY2Uo");
    sb.append("NSwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgdmFsaWQgPSAna2V5JyBpbiByeG9iaiAmJiAnc3BhY2Un");
    sb.append("IGluIHJ4b2JqICYmICduYW1lJyBpbiByeG9iajsKICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgIHJl");
    sb.append("dHVybjsKICAgICAgfQogICAgICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKHJ4b2JqLmlkZW50aXR5LCBm");
    sb.append("dW5jdGlvbiAoKSB7IHJldHVybiByeG9iai5yZWRpcmVjdDsgfSk7CiAgICAgIGlmIChpZExvb2t1cC5h");
    sb.append("Ym9ydCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgY28gPSBnZXRfY29ubmVjdGlv");
    sb.append("bl9vYmoocnhvYmoubmFtZSk7CiAgICAgIHZhciBkZXNpcmVkID0gcnhvYmouc3BhY2UgKyAiLyIgKyBy");
    sb.append("eG9iai5rZXkgKyAiLyIgKyBpZExvb2t1cC5pZGVudGl0eTsgLy8gVE9ETzogbmVlZCBzb21lIGtpbmQg");
    sb.append("b2YgaGFzaGluZyBmdW5jdGlvbiBoZXJlCiAgICAgIHZhciBiaW5kID0gc2V0dXBfY28oZGVzaXJlZCwg");
    sb.append("dW5zdWIsIGNvLCBzdGF0ZSk7CiAgICAgIGlmIChiaW5kID09PSBmYWxzZSkgewogICAgICAgIHJldHVy");
    sb.append("bjsKICAgICAgfQogICAgICBjby5ib3VuZCA9IGRlc2lyZWQ7CgogICAgICB2YXIgaWRlbnRpdHkgPSBp");
    sb.append("ZExvb2t1cC5pZGVudGl0eTsKICAgICAgdmFyIGNsZWFudXAgPSBpZExvb2t1cC5jbGVhbnVwOwogICAg");
    sb.append("ICB1bnN1Yi52aWV3KCk7CiAgICAgIGNvLnNwYWNlID0gcnhvYmouc3BhY2U7CiAgICAgIGNvLmtleSA9");
    sb.append("IHJ4b2JqLmtleTsKICAgICAgY28uaWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAgY28uaGFuZGxlcnMg");
    sb.append("PSB7fTsKICAgICAgY28udmlld3N0YXRlX3NlbnQgPSB0cnVlOwogICAgICBjby5sYWJlbCA9IGNvLnNw");
    sb.append("YWNlICsgIi8iICsgY28ua2V5ICsgIiBbICIgKyByeG9iai5uYW1lICsgIl0iOwogICAgICBjby52aWFf");
    sb.append("ZG9tYWluID0gZmFsc2U7CiAgICAgIGNvLnZpYV9iaWxsaW5nID0gZmFsc2U7CiAgICAgIHZhciByZXRy");
    sb.append("eV9zbSA9IHt9OwogICAgICByZXRyeV9zbS5yZXNwb25kZXIgPSBiaW5kX3Jlc3BvbmRlcihjbywgY2xl");
    sb.append("YW51cCwgcmV0cnlfc20pOwogICAgICByZXRyeV9zbS5nbyA9IGZ1bmN0aW9uKCkgewogICAgICAgIC8v");
    sb.append("IGJpYXMgdG8gbm90aGluZyBuZXcKICAgICAgICBjby52aWV3c3RhdGVfY2xvbmUgPSAie30iOwogICAg");
    sb.append("ICAgIGNvLnB0ciA9IGNvbm5lY3Rpb24uQ29ubmVjdGlvbkNyZWF0ZShpZGVudGl0eSwgcnhvYmouc3Bh");
    sb.append("Y2UsIHJ4b2JqLmtleSwgc2FmZV9maWx0ZXIoc3RhdGUudmlldy50cmVlLmNvcHkoKSksIHJldHJ5X3Nt");
    sb.append("LnJlc3BvbmRlcik7CiAgICAgIH07CiAgICAgIHJldHJ5X3NtLmdvKCk7CiAgICAgIGNvLnRyZWUudXBk");
    sb.append("YXRlKHt9KTsKICAgICAgYmluZChmYWxzZSk7CiAgICB9KTsKICB9OwoKICBzZWxmLklOVEVSTkFMID0g");
    sb.append("ZnVuY3Rpb24gKHByaW9yU3RhdGUpIHsKICAgIHJldHVybiB7CiAgICAgIHNlcnZpY2U6IHByaW9yU3Rh");
    sb.append("dGUuc2VydmljZSwKICAgICAgZGF0YTogeyBjb25uZWN0aW9uOiBudWxsLCB0cmVlOiBuZXcgQWRhbWFU");
    sb.append("cmVlKCksIGRlbHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAgIHZpZXc6IG5l");
    sb.append("d19kZWx0YV9jb3B5KHByaW9yU3RhdGUudmlldyksCiAgICAgIGN1cnJlbnQ6ICJkYXRhIgogICAgfTsK");
    sb.append("ICB9OwoKICB2YXIgcmVjYWxsX2VtYWlsID0gZnVuY3Rpb24gKGVsKSB7CiAgICBpZiAoZWwudGFnTmFt");
    sb.append("ZS50b1VwcGVyQ2FzZSgpID09ICJJTlBVVCIpIHsKICAgICAgaWYgKCJlbWFpbCIgPT0gZWwudHlwZSAm");
    sb.append("JiAiZW1haWwiID09IGVsLm5hbWUpIHsKICAgICAgICBlbC52YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJ");
    sb.append("dGVtKCJlbWFpbF9yZW1lbWJlciIpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoImNoaWxk");
    sb.append("cmVuIiBpbiBlbCkgewogICAgICAgIHZhciBhcnIgPSBlbC5jaGlsZHJlbjsKICAgICAgICB2YXIgbiA9");
    sb.append("IGFyci5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAg");
    sb.append("IHJlY2FsbF9lbWFpbChlbC5jaGlsZHJlbltrXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsK");
    sb.append("CiAgc2VsZi5hVVAgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsK");
    sb.append("ICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQoaWRlbnRpdHlOYW1lLCBmdW5jdGlvbiAoKSB7IHJldHVy");
    sb.append("biByeG9iai5yeF9mb3J3YXJkOyB9KTsgLy8gVE9ETzogbWFrZSByeHZhcgogICAgaWYgKGlkTG9va3Vw");
    sb.append("LmFib3J0KSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGZvcm0uYWN0aW9uID0gImh0dHBzOi8vIiAr");
    sb.append("IEFkYW1hLlByb2R1Y3Rpb24gKyAiL351cGxvYWQiOwogICAgZm9ybS5tZXRob2QgPSAicG9zdCI7CiAg");
    sb.append("ICBmb3JtLmVuY3R5cGUgPSAibXVsdGlwYXJ0L2Zvcm0tZGF0YSI7CiAgICB2YXIgaWRlbnRpdHlJbnB1");
    sb.append("dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICBpZGVudGl0eUlucHV0LnR5cGUg");
    sb.append("PSAiaGlkZGVuIjsKICAgIGlkZW50aXR5SW5wdXQubmFtZSA9ICJpZGVudGl0eSI7CiAgICBpZGVudGl0");
    sb.append("eUlucHV0LnZhbHVlID0gaWRMb29rdXAuaWRlbnRpdHk7CiAgICBmb3JtLmFwcGVuZENoaWxkKGlkZW50");
    sb.append("aXR5SW5wdXQpOwogICAgdmFyIGlmcmFtZVRhcmdldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlm");
    sb.append("cmFtZSIpOwogICAgaWZyYW1lVGFyZ2V0Lm5hbWUgPSAiVVBMT0FEXyIgKyBNYXRoLnJhbmRvbSgpOwog");
    sb.append("ICAgaWZyYW1lVGFyZ2V0LndpZHRoID0gIjEiOwogICAgaWZyYW1lVGFyZ2V0LmhlaWdodCA9ICIxIjsK");
    sb.append("CiAgICBmb3JtLmFwcGVuZENoaWxkKGlmcmFtZVRhcmdldCk7CiAgICBmb3JtLnRhcmdldCA9IGlmcmFt");
    sb.append("ZVRhcmdldC5uYW1lOwogIH07CgogIHNlbGYuYURVUCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRl");
    sb.append("bnRpdHlOYW1lLCByeG9iaikgewogICAgdmFyIGlkTG9va3VwID0gc2VsZi5JRChpZGVudGl0eU5hbWUs");
    sb.append("IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJ4X2ZvcndhcmQ7IH0pOyAvLyBUT0RPOiBtYWtlIHJ4");
    sb.append("dmFyCiAgICBpZiAoaWRMb29rdXAuYWJvcnQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9ybS5h");
    sb.append("Y3Rpb24gPSBzZWxmLnByb3RvY29sICsgIi8vIiArIHNlbGYuaG9zdCArICIvfnVwbG9hZCI7CiAgICBm");
    sb.append("b3JtLm1ldGhvZCA9ICJwb3N0IjsKICAgIGZvcm0uZW5jdHlwZSA9ICJtdWx0aXBhcnQvZm9ybS1kYXRh");
    sb.append("IjsKICAgIHsKICAgICAgdmFyIGlkZW50aXR5SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJp");
    sb.append("bnB1dCIpOwogICAgICBpZGVudGl0eUlucHV0LnR5cGUgPSAiaGlkZGVuIjsKICAgICAgaWRlbnRpdHlJ");
    sb.append("bnB1dC5uYW1lID0gImlkZW50aXR5IjsKICAgICAgaWRlbnRpdHlJbnB1dC52YWx1ZSA9IGlkTG9va3Vw");
    sb.append("LmlkZW50aXR5OwogICAgICBmb3JtLmFwcGVuZENoaWxkKGlkZW50aXR5SW5wdXQpOwogICAgfQogICAg");
    sb.append("ewogICAgICB2YXIgZG9tYWluSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwog");
    sb.append("ICAgICBkb21haW5JbnB1dC50eXBlID0gImhpZGRlbiI7CiAgICAgIGRvbWFpbklucHV0Lm5hbWUgPSAi");
    sb.append("ZG9tYWluIjsKICAgICAgZG9tYWluSW5wdXQudmFsdWUgPSBzZWxmLmRvbWFpbjsKICAgICAgZm9ybS5h");
    sb.append("cHBlbmRDaGlsZChkb21haW5JbnB1dCk7CiAgICB9CiAgICB2YXIgaWZyYW1lVGFyZ2V0ID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CiAgICBpZnJhbWVUYXJnZXQubmFtZSA9ICJVUExPQURf");
    sb.append("IiArIE1hdGgucmFuZG9tKCk7CiAgICBpZnJhbWVUYXJnZXQud2lkdGggPSAiMSI7CiAgICBpZnJhbWVU");
    sb.append("YXJnZXQuaGVpZ2h0ID0gIjEiOwogICAgZm9ybS5hcHBlbmRDaGlsZChpZnJhbWVUYXJnZXQpOwogICAg");
    sb.append("Zm9ybS50YXJnZXQgPSBpZnJhbWVUYXJnZXQubmFtZTsKICB9OwoKCgogIHZhciBnZXRfZm9ybV9hbmRf");
    sb.append("cHcgPSBmdW5jdGlvbihmb3JtKSB7CiAgICB2YXIgcGFzc3dvcmRzID0ge307CiAgICB2YXIgcmVxID0g");
    sb.append("Z2V0X2Zvcm0oZm9ybSwgcGFzc3dvcmRzKTsKICAgIGlmICgncGFzc3dvcmQnIGluIHBhc3N3b3Jkcykg");
    sb.append("ewogICAgICByZXFbJ3Bhc3N3b3JkJ10gPSBwYXNzd29yZHNbJ3Bhc3N3b3JkJ107CiAgICB9CiAgICBp");
    sb.append("ZiAoJ25ld19wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB7CiAgICAgIHJlcVsnbmV3X3Bhc3N3b3JkJ10g");
    sb.append("PSBwYXNzd29yZHNbJ25ld19wYXNzd29yZCddOwogICAgfQogICAgcmV0dXJuIHJlcTsKICB9CgogIHZh");
    sb.append("ciBjb21tb25BdXRob3JpemUgPSBmdW5jdGlvbihmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9i");
    sb.append("aiwgbmV4dFN0ZXApIHsKICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9OwogICAgZm9ybS5hZGRF");
    sb.append("dmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVm");
    sb.append("YXVsdCgpOwogICAgICB2YXIgc2VuZFJlcSA9IGZ1bmN0aW9uKHJlcSkgewogICAgICAgIHZhciBzbSA9");
    sb.append("IHthdHRlbXB0czowfTsKICAgICAgICBzbS5yZXNwb25kZXIgPSB7CiAgICAgICAgICBzdWNjZXNzOiBm");
    sb.append("dW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgICBzdGFzaF9pZGVudGl0eShpZGVudGl0eU5hbWUs");
    sb.append("IHBheWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgICAgICBzZWxmLmdvdG8ocnhvYmou");
    sb.append("cnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAg");
    sb.append("ICB9LAogICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICBmaXJl");
    sb.append("X2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBuZXh0U3RlcChyZXEsIHNtLnJlc3BvbmRlcik7CiAg");
    sb.append("ICAgIH0KICAgICAgdmFyIHBhc3N3b3JkcyA9IHt9OwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm0oZm9y");
    sb.append("bSwgcGFzc3dvcmRzKTsKICAgICAgaWYgKCdwYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB7CiAgICAgICAg");
    sb.append("cmVxWydwYXNzd29yZCddID0gcGFzc3dvcmRzWydwYXNzd29yZCddOwogICAgICB9CiAgICAgIGlmICgn");
    sb.append("bmV3X3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgICBjb25uZWN0aW9uLkRvY3VtZW50c0hh");
    sb.append("c2hQYXNzd29yZChwYXNzd29yZHNbJ25ld19wYXNzd29yZCddLCB7CiAgICAgICAgICBzdWNjZXNzOiBm");
    sb.append("dW5jdGlvbiAoaGFzaGVkX3B3KSB7CiAgICAgICAgICAgIHJlcVsnbmV3X3Bhc3N3b3JkJ10gPSBoYXNo");
    sb.append("ZWRfcHcucGFzc3dvcmRIYXNoOwogICAgICAgICAgICBzZW5kUmVxKHJlcSk7CiAgICAgICAgICB9LAog");
    sb.append("ICAgICAgICAgZmFpbGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3Jt");
    sb.append("LCAiRmFpbGVkIHRvIGhhc2ggcGFzc3dvcmQiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAg");
    sb.append("fSBlbHNlIHsKICAgICAgICBzZW5kUmVxKHJlcSk7CiAgICAgIH0KICAgIH0sIHRydWUpOwogIH0KCiAg");
    sb.append("Ly8gcng6YWN0aW9uPWRvY3VtZW50OmF1dGhvcml6ZQogIHNlbGYuYURPQyA9IGZ1bmN0aW9uIChmb3Jt");
    sb.append("LCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgY29tbW9uQXV0aG9yaXplKGZvcm0sIHN0");
    sb.append("YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqLCBmdW5jdGlvbihyZXEsIHJlc3BvbmRlcikgewogICAgICBj");
    sb.append("b25uZWN0aW9uLkRvY3VtZW50QXV0aG9yaXphdGlvbihyZXEuc3BhY2UsIHJlcS5rZXksIHJlcSwgcmVz");
    sb.append("cG9uZGVyKTsKICAgIH0pOwogIH07CgogIC8vIHJ4OmFjdGlvbj1kb21haW46YXV0aG9yaXplCiAgc2Vs");
    sb.append("Zi5hRE9NID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICBj");
    sb.append("b21tb25BdXRob3JpemUoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmosIGZ1bmN0aW9uKHJl");
    sb.append("cSwgcmVzcG9uZGVyKSB7CiAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRBdXRob3JpemF0aW9uRG9tYWlu");
    sb.append("KHNlbGYuZG9tYWluLCByZXEsIHJlc3BvbmRlcik7CiAgICB9KTsKICB9OwoKICAvLyByeDpldmVudD10");
    sb.append("b2dnbGUtcGFzc3dvcmQKICBzZWxmLm9uUFdUID0gZnVuY3Rpb24oZG9tLCBzdGF0ZSwgdHlwZSkgewog");
    sb.append("ICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIg");
    sb.append("Y3VyID0gZG9tOwogICAgICB3aGlsZSAoY3VyLnRhZ05hbWUudG9VcHBlckNhc2UoKSAhPSAiUEFTU1dP");
    sb.append("UkQtSE9MREVSIikgewogICAgICAgIGN1ciA9IGN1ci5wYXJlbnRFbGVtZW50OwogICAgICB9CiAgICAg");
    sb.append("IHZhciBodW50ID0gZnVuY3Rpb24obm9kZSkgewogICAgICAgIGlmIChub2RlLnRhZ05hbWUudG9VcHBl");
    sb.append("ckNhc2UoKSA9PSAiSU5QVVQiICYmIChub2RlLm5hbWUgPT0gInBhc3N3b3JkIiB8fCBub2RlLm5hbWUg");
    sb.append("PT0gImNvbmZpcm0tcGFzc3dvcmQiIHx8IG5hbWUgPT0gIm5ld19wYXNzd29yZCIgfHwgbmFtZSA9PSAi");
    sb.append("Y29uZmlybS1uZXdfcGFzc3dvcmQiKSkgewogICAgICAgICAgaWYgKG5vZGUudHlwZSA9PSAicGFzc3dv");
    sb.append("cmQiKSB7CiAgICAgICAgICAgIG5vZGUudHlwZSA9ICJ0ZXh0IgogICAgICAgICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgICAgICAgbm9kZS50eXBlID0gInBhc3N3b3JkIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAg");
    sb.append("ICBpZiAoJ2NoaWxkcmVuJyBpbiBub2RlKSB7CiAgICAgICAgICB2YXIgY2ggPSBub2RlLmNoaWxkcmVu");
    sb.append("OwogICAgICAgICAgdmFyIG4gPSBjaC5sZW5ndGg7CiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8");
    sb.append("IG47IGsrKykgewogICAgICAgICAgICBodW50KGNoW2tdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAg");
    sb.append("ICAgIH07CiAgICAgIGlmIChjdXIgIT0gbnVsbCkgewogICAgICAgIGh1bnQoY3VyKTsKICAgICAgfQog");
    sb.append("ICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1kb21haW46c2lnbi1pbiAodG8gZGVw");
    sb.append("cmVjYXRlKQogIHNlbGYuYWREU08gPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwg");
    sb.append("cnhvYmopIHsKICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9OwogICAgZm9ybS5hZGRFdmVudExp");
    sb.append("c3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgp");
    sb.append("OwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm1fYW5kX3B3KGZvcm0pOwogICAgICB2YXIgc20gPSB7YXR0");
    sb.append("ZW1wdHM6MH07CiAgICAgIHNtLnJlc3BvbmRlciA9IHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAo");
    sb.append("cGF5bG9hZCkgewogICAgICAgICAgc3Rhc2hfaWRlbnRpdHkoaWRlbnRpdHlOYW1lLCBwYXlsb2FkLmlk");
    sb.append("ZW50aXR5LCBjb25uZWN0aW9uKTsKICAgICAgICAgIC8vIFRPRE86IGJsb3cgYXdheSBjb25uZWN0aW9u");
    sb.append("cwogICAgICAgICAgc2VsZi5nb3RvKHJ4b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsKICAgICAgICAgIGZp");
    sb.append("cmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFz");
    sb.append("b24pIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHNpZ25pbmcgaW50byBkb2N1");
    sb.append("bWVudDoiICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGNvbm5lY3Rpb24uRG9jdW1l");
    sb.append("bnRBdXRob3JpemVEb21haW4oc2VsZi5kb21haW4sIHJlcS51c2VybmFtZSwgcmVxLnBhc3N3b3JkLCBz");
    sb.append("bS5yZXNwb25kZXIpOwogICAgfSwgdHJ1ZSk7CiAgfQoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWRv");
    sb.append("Y3VtZW50OnNpZ24taW4gKHRvIGRlcHJlY2F0ZSkKICBzZWxmLmFEU08gPSBmdW5jdGlvbiAoZm9ybSwg");
    sb.append("c3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsgLy8gREVQUkVDQVRFRAogICAgcnhvYmouX18gPSBm");
    sb.append("dW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9u");
    sb.append("IChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9y");
    sb.append("bV9hbmRfcHcoZm9ybSk7CiAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRBdXRob3JpemUocmVxLnNwYWNl");
    sb.append("LCByZXEua2V5LCByZXEudXNlcm5hbWUsIHJlcS5wYXNzd29yZCwgewogICAgICAgIHN1Y2Nlc3M6IGZ1");
    sb.append("bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBzdGFzaF9pZGVudGl0eShpZGVudGl0eU5hbWUsIHBh");
    sb.append("eWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgICAgLy8gVE9ETzogYmxvdyBhd2F5IGNv");
    sb.append("bm5lY3Rpb25zCiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAg");
    sb.append("ICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rp");
    sb.append("b24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2lnbmluZyBp");
    sb.append("bnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0cnVlKTsK");
    sb.append("ICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWRvbWFpbjpzaWduLWluLXJlc2V0ICh0byBkZXBy");
    sb.append("ZWNhdGUpCiAgc2VsZi5hZERTT3IgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwg");
    sb.append("cnhvYmopIHsgLy8gREVQUkVDQVRFRAogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBm");
    sb.append("b3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnBy");
    sb.append("ZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybV9hbmRfcHcoZm9ybSk7CiAgICAg");
    sb.append("IGNvbm5lY3Rpb24uRG9jdW1lbnRBdXRob3JpemVEb21haW5XaXRoUmVzZXQoc2VsZi5kb21haW4sIHJl");
    sb.append("cS51c2VybmFtZSwgcmVxLnBhc3N3b3JkLCByZXEubmV3X3Bhc3N3b3JkLHsKICAgICAgICBzdWNjZXNz");
    sb.append("OiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgc3Rhc2hfaWRlbnRpdHkoaWRlbnRpdHlOYW1l");
    sb.append("LCBwYXlsb2FkLmlkZW50aXR5LCBjb25uZWN0aW9uKTsKICAgICAgICAgIC8vIFRPRE86IGJsb3cgYXdh");
    sb.append("eSBjb25uZWN0aW9ucwogICAgICAgICAgc2VsZi5nb3RvKHJ4b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsK");
    sb.append("ICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6IGZ1");
    sb.append("bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHNpZ25p");
    sb.append("bmcgaW50byBkb2N1bWVudDoiICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgdHJ1");
    sb.append("ZSk7CiAgfQoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWRvY3VtZW50OnNpZ24taW4tcmVzZXQgKHRv");
    sb.append("IGRlcHJlY2F0ZSkKICBzZWxmLmFEU09yID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5h");
    sb.append("bWUsIHJ4b2JqKSB7IC8vIERFUFJFQ0FURUQKICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9Owog");
    sb.append("ICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2");
    sb.append("dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm1fYW5kX3B3KGZvcm0pOwog");
    sb.append("ICAgICBjb25uZWN0aW9uLkRvY3VtZW50QXV0aG9yaXplV2l0aFJlc2V0KHJlcS5zcGFjZSwgcmVxLmtl");
    sb.append("eSwgcmVxLnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHJlcS5uZXdfcGFzc3dvcmQsewogICAgICAgIHN1");
    sb.append("Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBzdGFzaF9pZGVudGl0eShpZGVudGl0");
    sb.append("eU5hbWUsIHBheWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgICAgLy8gVE9ETzogYmxv");
    sb.append("dyBhd2F5IGNvbm5lY3Rpb25zCiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFs");
    sb.append("c2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVy");
    sb.append("ZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQg");
    sb.append("c2lnbmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSwgdHJ1ZSk7");
    sb.append("CiAgICB9KTsKICB9OwoKICBzZWxmLmF1dG9nZW5pZCA9IDE7CiAgc2VsZi5YID0gZnVuY3Rpb24oKSB7");
    sb.append("CiAgICBzZWxmLmF1dG9nZW5pZCsrOwogICAgcmV0dXJuICd4JyArIHNlbGYuYXV0b2dlbmlkOwogIH07");
    sb.append("CgogIHZhciB0cmFuc2Zvcm1zID0ge307CiAgdHJhbnNmb3Jtc1sncHJpbmNpcGFsLmFnZW50J10gPSBm");
    sb.append("dW5jdGlvbih4KSB7IHJldHVybiB4LmFnZW50OyB9OwogIHRyYW5zZm9ybXNbJ3ByaW5jaXBhbC5hdXRo");
    sb.append("b3JpdHknXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguYXV0aG9yaXR5OyB9OwogIHRyYW5zZm9ybXNb");
    sb.append("J3RyaW0nXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuICgnJyArIHgpLnRyaW0oKTsgfTsKICB0cmFuc2Zv");
    sb.append("cm1zWyd1cHBlciddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4gKCcnICsgeCkudG9VcHBlckNhc2UoKTsg");
    sb.append("fTsKICB0cmFuc2Zvcm1zWydsb3dlciddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4gKCcnICsgeCkudG9M");
    sb.append("b3dlckNhc2UoKTsgfTsKICB0cmFuc2Zvcm1zWydpc19lbXB0eV9zdHInXSA9IGZ1bmN0aW9uKHgpIHsg");
    sb.append("cmV0dXJuIHggPT0gIiI7IH07CiAgdHJhbnNmb3Jtc1snaXNfbm90X2VtcHR5X3N0ciddID0gZnVuY3Rp");
    sb.append("b24oeCkgeyByZXR1cm4geCAhPSAiIjsgfTsKICB0cmFuc2Zvcm1zWydqc29uaWZ5J10gPSBmdW5jdGlv");
    sb.append("bih4KSB7IHJldHVybiBKU09OLnN0cmluZ2lmeSh4KTsgfTsKICB0cmFuc2Zvcm1zWyd0aW1lX25vdydd");
    sb.append("ID0gZnVuY3Rpb24oeCkgeyByZXR1cm4gRGF0ZS5ub3coKSArICIiOyB9OwogIHRyYW5zZm9ybXNbJ3Np");
    sb.append("emVfYnl0ZXMnXSA9IGZ1bmN0aW9uKHhyYXcpIHsKICAgIHZhciB4ID0gMC4wOwogICAgaWYgKHR5cGVv");
    sb.append("Zih4cmF3KSA9PSAnbnVtYmVyJykgewogICAgICB4ID0geHJhdzsKICAgIH0gZWxzZSB7CiAgICAgIHRy");
    sb.append("eSB7CiAgICAgICAgeCA9IHBhcnNlRmxvYXQoeHJhdyk7CiAgICAgIH0gY2F0Y2ggKGV4KSB7CgogICAg");
    sb.append("ICB9CiAgICB9CiAgICB2YXIgaXZhbCA9IE1hdGguZmxvb3IoeCk7CiAgICBpZiAoaXZhbCA8IDEwMjQp");
    sb.append("IHsKICAgICAgcmV0dXJuIGl2YWwgKyAiIEIiOwogICAgfQogICAgaXZhbCAvPSAxMDI0OwogICAgaWYg");
    sb.append("KGl2YWwgPCAxMDI0KSB7CiAgICAgIHJldHVybiBNYXRoLnJvdW5kKGl2YWwgKiAxMCkgLyAxMC4wICsg");
    sb.append("IiBLQiI7CiAgICB9CiAgICBpdmFsIC89IDEwMjQ7CiAgICBpZiAoaXZhbCA8IDEwMjQpIHsKICAgICAg");
    sb.append("cmV0dXJuIE1hdGgucm91bmQoaXZhbCAqIDEwKSAvIDEwLjAgKyAiIE1CIjsKICAgIH0KICAgIGl2YWwg");
    sb.append("Lz0gMTAyNDsKICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4gTWF0aC5yb3VuZChpdmFs");
    sb.append("ICogMTApIC8gMTAuMCArICIgR0IiOwogICAgfQogIH0KICB0cmFuc2Zvcm1zWydvcmRpbmFsaXplJ10g");
    sb.append("PSBmdW5jdGlvbihuKSB7CiAgICBjb25zdCBudW0gPSBwYXJzZUludChuKTsKICAgIGlmICghaXNOYU4o");
    sb.append("bnVtKSkgewogICAgICBsZXQgb3JkID0gJ3RoJzsKICAgICAgaWYgKG4gJSAxMCA9PSAxICYmIG4gJSAx");
    sb.append("MDAgIT0gMTEpIHsKICAgICAgICBvcmQgPSAnc3QnOwogICAgICB9CiAgICAgIGVsc2UgaWYgKG4gJSAx");
    sb.append("MCA9PSAyICYmIG4gJSAxMDAgIT0gMTIpIHsKICAgICAgICBvcmQgPSAnbmQnOwogICAgICB9CiAgICAg");
    sb.append("IGVsc2UgaWYgKG4gJSAxMCA9PSAzICYmIG4gJSAxMDAgIT0gMTMpIHsKICAgICAgICBvcmQgPSAncmQn");
    sb.append("OwogICAgICB9CiAgICAgIHJldHVybiBuICsgb3JkOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG47");
    sb.append("CiAgICB9CiAgfQogIHRyYW5zZm9ybXNbJ3Z1bGdhcl9mcmFjdGlvbiddID0gZnVuY3Rpb24oeHJhdykg");
    sb.append("ewogICAgdmFyIHggPSAwLjA7CiAgICBpZiAodHlwZW9mKHhyYXcpID09ICdudW1iZXInKSB7CiAgICAg");
    sb.append("IHggPSB4cmF3OwogICAgfSBlbHNlIHsKICAgICAgdHJ5IHsKICAgICAgICB4ID0gcGFyc2VGbG9hdCh4");
    sb.append("cmF3KTsKICAgICAgfSBjYXRjaCAoZXgpIHsKCiAgICAgIH0KICAgIH0KICAgIHZhciBpdmFsID0gTWF0");
    sb.append("aC5mbG9vcih4KTsKICAgIHZhciBjaGFuZ2UgPSB4IC0gaXZhbDsKICAgIHZhciBzdWZmaXggPSAiIjsK");
    sb.append("ICAgIGlmIChjaGFuZ2UgPD0gMC4wNjI1KSB7CiAgICAgIC8vIDAKICAgIH0gZWxzZSBpZiAoY2hhbmdl");
    sb.append("IDw9IDAuMTg3NSkgewogICAgICBzdWZmaXggPSAi4oWbIjsKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9");
    sb.append("IDAuMzEyNSkgewogICAgICBzdWZmaXggPSAiwrwiOwogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC40");
    sb.append("Mzc1KSB7CiAgICAgIHN1ZmZpeCA9ICLihZwiOwogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC41NjI1");
    sb.append("KSB7CiAgICAgIHN1ZmZpeCA9ICLCvSI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjY4NzUpIHsK");
    sb.append("ICAgICAgc3VmZml4ID0gIuKFnSI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjgxMjUpIHsKICAg");
    sb.append("ICAgc3VmZml4ID0gIsK+IjsgLy8gMy80CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjkzNzUpIHsK");
    sb.append("ICAgICAgc3VmZml4ID0gIuKFniI7CiAgICB9IC8vIGVsc2UgMQogICAgcmV0dXJuIGl2YWwgKyBzdWZm");
    sb.append("aXg7CiAgfQogIHRyYW5zZm9ybXNbJ3RpbWVfYWdvJ10gPSBmdW5jdGlvbihkdCwgZm9ybWF0KSB7CiAg");
    sb.append("ICAvLyBvbmx5IHRyYW5zZm9ybSBzdHJpbmdzCiAgICBpZiAodHlwZW9mIChkdCkgPT0gInN0cmluZyIp");
    sb.append("IHsKICAgICAgLy8gbGV0J3Mgc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGJyYWNrZXRzCiAg");
    sb.append("ICAgIHZhciBzID0gZHQ7CiAgICAgIHZhciBrID0gcy5pbmRleE9mKCdbJyk7CiAgICAgIGlmIChrID49");
    sb.append("IDApIHsKICAgICAgICBzID0gcy5zdWJzdHJpbmcoMCwgayk7CiAgICAgIH0KICAgICAgdmFyIGQgPSBE");
    sb.append("YXRlLnBhcnNlKHMpOwogICAgICBpZiAoTnVtYmVyLmlzTmFOKGQpKSB7CiAgICAgICAgLy8gaXQgaXNu");
    sb.append("J3QgYSBudW1iZXIsIHNvIHdlIGRpZG4ndCBnZXQgYSBkYXRlIHN0YW1wOyBkZWZhdWx0IHRvIHRoZSBp");
    sb.append("bnB1dAogICAgICAgIHJldHVybiBkdDsKICAgICAgfQogICAgICAvLyB3ZSBhcmUgaW50ZXJlc3RlZCBp");
    sb.append("biBwcm9kdWNpbmcgYSBzdHJpbmcgbGlrZSAiWCBtaW51dGVzIGFnbyIsIHNvIHN0YXJ0IHdpdGggc2Vj");
    sb.append("b25kcwogICAgICB2YXIgZGVsdGEgPSAoRGF0ZS5ub3coKSAtIGQpLzEwMDA7IC8vIHNlY29uZHM7CiAg");
    sb.append("ICAgIGlmIChkZWx0YSA8IDYwKSB7CiAgICAgICAgcmV0dXJuICJMZXNzIHRoYW4gYSBtaW51dGUgYWdv");
    sb.append("IjsKICAgICAgfQogICAgICAvLyBpdCB3YXNuJ3QgOTAgc2Vjb25kcyBhZ28gb3IgbGVzcywgc28gbGV0");
    sb.append("J3MgcmVmaW5lIHRvd2FyZHMgbWludXRlcwogICAgICBkZWx0YSAvPSA2MDsgLy8gbm93IGl0IGlzIG1p");
    sb.append("bnV0ZXMKICAgICAgaWYgKGRlbHRhIDwgNjApIHsKICAgICAgICBjb25zdCBkZWx0YUludCA9IE1hdGgu");
    sb.append("Zmxvb3IoZGVsdGEpOwogICAgICAgIHJldHVybiBgJHtkZWx0YUludH0gbWludXRlJHtkZWx0YUludCA+");
    sb.append("IDEgPyAncyc6ICcnfSBhZ29gOwogICAgICB9CiAgICAgIGlmIChkZWx0YSA+IDIuNjI4ZSs3KSB7CiAg");
    sb.append("ICAgICAgcmV0dXJuICJOZXZlciI7CiAgICAgIH0KICAgICAgLy8gaXQgd2Fzbid0IDkwIG1pbnV0ZXMg");
    sb.append("YWdvLCBzbyBsZXQncyBqdXN0IHB1dCB0aGUgdGltZSBzdGFtcCB1cAogICAgICB2YXIgZHRoZW4gPSBu");
    sb.append("ZXcgRGF0ZShkKTsKICAgICAgdmFyIGRub3cgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgb3B0cyA9IHt9");
    sb.append("OwogICAgICBpZiAoZm9ybWF0KXsKICAgICAgICBmb3JtYXQudHJpbSgpLnNwbGl0KCIiKS5mb3JFYWNo");
    sb.append("KGNoYXIgPT4gewogICAgICAgICAgY29uc3Qga2V5cyA9IHsiaCI6ICJob3VyIiwgIm0iOiAibWludXRl");
    sb.append("IiwgInMiOiAic2Vjb25kIn0KICAgICAgICAgIGlmIChjaGFyIGluIGtleXMpewogICAgICAgICAgICBv");
    sb.append("cHRzW2tleXNbY2hhcl1dID0gIm51bWVyaWMiOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0K");
    sb.append("ICAgICAgaWYgKGR0aGVuLnRvTG9jYWxlRGF0ZVN0cmluZygpICE9IGRub3cudG9Mb2NhbGVEYXRlU3Ry");
    sb.append("aW5nKCkpIHsKICAgICAgICByZXR1cm4gZHRoZW4udG9Mb2NhbGVEYXRlU3RyaW5nKCkgKyAiICIgKyBk");
    sb.append("dGhlbi50b0xvY2FsZVRpbWVTdHJpbmcoW10sIG9wdHMpOwogICAgICB9CiAgICAgIHJldHVybiBkdGhl");
    sb.append("bi50b0xvY2FsZVRpbWVTdHJpbmcoW10sIG9wdHMpOwogICAgfSBlbHNlIHsKICAgICAgLy8gZG8gbm90");
    sb.append("aGluZwogICAgICByZXR1cm4gZHQ7CiAgICB9CiAgfTsKCiAgdHJhbnNmb3Jtc1sndGltZSddID0gZnVu");
    sb.append("Y3Rpb24oZHQpIHsKICAgICAgICAvLyBvbmx5IHRyYW5zZm9ybSBzdHJpbmdzCiAgICBpZiAodHlwZW9m");
    sb.append("IChkdCkgPT0gInN0cmluZyIpIHsKICAgICAgLy8gbGV0J3Mgc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYWZ0");
    sb.append("ZXIgdGhlIGJyYWNrZXRzCiAgICAgIHZhciBzID0gZHQ7CiAgICAgIHZhciBrID0gcy5pbmRleE9mKCdb");
    sb.append("Jyk7CiAgICAgIGlmIChrID49IDApIHsKICAgICAgICBzID0gcy5zdWJzdHJpbmcoMCwgayk7CiAgICAg");
    sb.append("IH0KCiAgICAgIC8vIENvbnZlcnQgc3RyaW5nIHRvIHRpbWUgZm9ybWF0CiAgICAgIHZhciB0ID0gZHQu");
    sb.append("aW5kZXhPZigiOiIpOwogICAgICBpZiAodCA8IDApIHsKICAgICAgICByZXR1cm4gZHQ7CiAgICAgIH0K");
    sb.append("ICAgICAgdmFyIGggPSBkdC5zcGxpdCgiOiIpWzBdOwogICAgICB2YXIgaG91cnMgPSBoOwogICAgICBp");
    sb.append("ZiAoaC5sZW5ndGggPiAyKSB7CiAgICAgICAgaG91cnMgPSBoLnN1YnN0cmluZyhoLmxlbmd0aCAtIDIs");
    sb.append("IGgubGVuZ3RoKTsgLy8gdHJpbSBsZWZ0IGluIGNhc2Ugb2YgZGF0ZXRpbWUKICAgICAgfQogICAgICB2");
    sb.append("YXIgQW1PclBtID0gaG91cnMgPj0gMTIgPyAncG0nIDogJ2FtJzsKICAgICAgaG91cnMgPSAoaG91cnMg");
    sb.append("JSAxMikgfHwgMTI7CiAgICAgIHZhciBtID0gZHQuc3BsaXQoIjoiKVsxXQogICAgICB2YXIgbWludXRl");
    sb.append("cyA9IG07CiAgICAgIGlmIChtLmxlbmd0aCA+IDIpIHsKICAgICAgICBtaW51dGVzID0gbS5zdWJzdHJp");
    sb.append("bmcoMCwyKTsgLy8gdHJpbSByaWdodCBpbiBjYXNlIG9mIGRhdGV0aW1lCiAgICAgIH0KCiAgICAgIHJl");
    sb.append("dHVybiBob3VycyArICI6IiArIG1pbnV0ZXMgKyAiICIgKyBBbU9yUG07IAogICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgLy8gZG8gbm90aGluZwogICAgICByZXR1cm4gZHQ7CiAgICB9CiAgfTsKCiAgdHJhbnNmb3Jtc1sn");
    sb.append("ZGF0ZS1mb3JtYXQnXSA9IGZ1bmN0aW9uKGR0LCBmb3JtYXQpIHsKICAgIGlmICh0eXBlb2YgKGR0KSA9");
    sb.append("PSAic3RyaW5nIikgewogICAgICAvLyBpZiBkYXRlIGlzIG5vdCBzZXQsIHJldHVybiBlbXB0eSBzdHJp");
    sb.append("bmcKICAgICAgaWYgKGR0ID09ICIxLTAxLTAxIikgcmV0dXJuICIiOwoKICAgICAgLy8gbGV0J3Mgc3Ry");
    sb.append("aXAgb3V0IGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGJyYWNrZXRzCiAgICAgIHZhciBzID0gZHQ7CiAgICAg");
    sb.append("IHZhciBrID0gcy5pbmRleE9mKCdbJyk7CiAgICAgIGlmIChrID49IDApIHsKICAgICAgICBzID0gcy5z");
    sb.append("dWJzdHJpbmcoMCwgayk7CiAgICAgIH0KICAgICAgY29uc3QgcCA9IGZvcm1hdC50b0xvd2VyQ2FzZSgp");
    sb.append("LnNwbGl0KCIvIik7CiAgICAgIGNvbnN0IG9wdHMgPSB7fTsKICAgICAgcC5mb3JFYWNoKGYgPT4gewog");
    sb.append("ICAgICAgIGNvbnN0IHZhbCA9IGYubGVuZ3RoID4gMiA/ICJudW1lcmljIiA6ICIyLWRpZ2l0IjsKICAg");
    sb.append("ICAgICBjb25zdCBrZXlzID0geyJ5IjogInllYXIiLCAibSI6ICJtb250aCIsICJkIjogImRheSJ9CiAg");
    sb.append("ICAgICAgb3B0c1trZXlzW2YuY2hhckF0KDApXV0gPSB2YWw7CiAgICAgIH0pCgogICAgICAvLyBpZiBu");
    sb.append("b3QgZGF0ZXRpbWUsIGNvbnZlcnRpbmcgdG8gb25lIGhlcmUgdG8gcHJldmVudCB0aW1lem9uZSBpc3N1");
    sb.append("ZXMKICAgICAgY29uc3QgZGF0ZXRpbWUgPSBzLmluY2x1ZGVzKCJUIikgPyBzIDogcyArICJUMDA6MDA6");
    sb.append("MDAiOwogICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZXRpbWUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4t");
    sb.append("VVMnLCBvcHRzKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIGRvIG5vdGhpbmcKICAgICAgcmV0dXJuIGR0");
    sb.append("OwogICAgfQogIH0KCiAgdHJhbnNmb3Jtc1snY3VycmVuY3knXSA9IGZ1bmN0aW9uKHgsIGZtdCkgewog");
    sb.append("ICAgY29uc3QgbnVtID0gcGFyc2VGbG9hdCh4KTsKICAgIGlmIChpc05hTihudW0pKSByZXR1cm4geDsK");
    sb.append("ICAgIHRyeSB7CiAgICAgIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQoW10sIHsKICAgICAgICBz");
    sb.append("dHlsZTogJ2N1cnJlbmN5JywKICAgICAgICBjdXJyZW5jeTogZm10LAogICAgICAgIHVzZUdyb3VwaW5n");
    sb.append("OiB0cnVlLAogICAgICB9KS5mb3JtYXQobnVtKQogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29u");
    sb.append("c29sZS5lcnJvcigiJ2N1cnJlbmN5JyB0cmFuc2Zvcm0gZXJyb3I6ICIsIGVycm9yKTsKICAgICAgcmV0");
    sb.append("dXJuIHg7CiAgICB9CiAgICAKICB9CiAgCgogIHNlbGYuUlRSID0gZnVuY3Rpb24obmFtZSwgdHJhbnNm");
    sb.append("b3JtKSB7CiAgICB0cmFuc2Zvcm1zW25hbWVdID0gdHJhbnNmb3JtOwogIH07CiAgc2VsZi5yZWdpc3Rl");
    sb.append("clRyYW5zZm9ybSA9IHNlbGYuUlRSOwoKICAvLyB7YmxhaHxuYW1lfQogIHNlbGYuVFIgPSBmdW5jdGlv");
    sb.append("bihuYW1lKSB7CiAgICBpZiAobmFtZSBpbiB0cmFuc2Zvcm1zKSB7CiAgICAgIHJldHVybiB0cmFuc2Zv");
    sb.append("cm1zW25hbWVdOwogICAgfSAKICAgIC8vIGV4OiBkYXRlLWZvcm1hdDptbS9kZC95eQogICAgaWYgKG5h");
    sb.append("bWUuaW5jbHVkZXMoIjoiKSl7CiAgICAgIGNvbnN0IFtrZXksIGZvcm1hdF0gID0gbmFtZS5zcGxpdCgi");
    sb.append("OiIpOwogICAgICBpZiAoa2V5IGluIHRyYW5zZm9ybXMpIHsKICAgICAgICByZXR1cm4geCA9PiB0cmFu");
    sb.append("c2Zvcm1zW2tleV0oeCwgZm9ybWF0KTsKICAgICAgfQogICAgfQogICAgCiAgICByZXR1cm4gZnVuY3Rp");
    sb.append("b24oeCkgeyByZXR1cm4geDsgfTsKICB9OwoKICAvLyBUT0RPCiAgdmFyIHZhbGlkYXRvcnMgPSB7fTsK");
    sb.append("ICBzZWxmLlJWID0gZnVuY3Rpb24obmFtZSwgdmFsaWRhdG9yKSB7CiAgICB2YWxpZGF0b3JzW25hbWVd");
    sb.append("ID0gdmFsaWRhdG9yOwogIH07CiAgc2VsZi5yZWdpc3RlclZhbGlkYXRvciA9IHNlbGYuUlY7CgogIHZh");
    sb.append("ciBjb21tb25QdXQgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmosIHVy");
    sb.append("bGZhY3RvcnkpIHsKICAgIC8vIFdJUAogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBm");
    sb.append("b3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnBy");
    sb.append("ZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBwYXNzd29yZHMgPSB7fTsKICAgICAgdmFyIHJlcSA9IGdl");
    sb.append("dF9mb3JtKGZvcm0sIHBhc3N3b3Jkcyk7CgogICAgICB2YXIgbmV4dCA9IGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgICB2YXIgdXJsID0gdXJsZmFjdG9yeShyeG9iaik7CiAgICAgICAgdmFyIHhodHRwID0gbmV3IFhN");
    sb.append("TEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgeGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgICAgICAgIGlmICh0");
    sb.append("aGlzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICB2YXIgdHlwZSA9IHRoaXMuZ2V0UmVzcG9u");
    sb.append("c2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpOwogICAgICAgICAgICAgIGlmICh0eXBlID09ICJ0ZXh0L2Vy");
    sb.append("cm9yIikgewogICAgICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sIHRoaXMucmVzcG9uc2VUZXh0");
    sb.append("KTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0g");
    sb.append("ImFwcGxpY2F0aW9uL2pzb24iKSB7CiAgICAgICAgICAgICAgICB2YXIgcGF5bG9hZCA9IEpTT04ucGFy");
    sb.append("c2UodGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgaWYgKCdpZGVudGl0eScgaW4gcGF5");
    sb.append("bG9hZCkgewogICAgICAgICAgICAgICAgICBzdGFzaF9pZGVudGl0eShpZGVudGl0eU5hbWUsIHBheWxv");
    sb.append("YWQuaWRlbnRpdHksIG51bGwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAg");
    sb.append("ICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAgICAgIGZp");
    sb.append("cmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICAgICAgICBmb3JtLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50");
    sb.append("KCJzdWJtaXR0ZWQiKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZmlyZV9mYWls");
    sb.append("dXJlKGZvcm0sICJGYWlsZWQgdG8gY29tbXVuaWNhdGUgdG8gc2VydmVyIik7CiAgICAgICAgICAgIH0K");
    sb.append("ICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHhodHRwLm9wZW4oIlBVVCIsIHVybCwgdHJ1ZSk7");
    sb.append("CiAgICAgICAgeGh0dHAud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsKICAgICAgICB4aHR0cC5zZW5kKEpT");
    sb.append("T04uc3RyaW5naWZ5KHJlcSkpOwogICAgICB9OwoKICAgICAgaWYgKCdwYXNzd29yZCcgaW4gcGFzc3dv");
    sb.append("cmRzKSB7CiAgICAgICAgaWYgKCEoJ2NvbmZpcm0tcGFzc3dvcmQnIGluIHBhc3N3b3JkcykgfHwgcGFz");
    sb.append("c3dvcmRzWydwYXNzd29yZCddID09IHBhc3N3b3Jkc1snY29uZmlybS1wYXNzd29yZCddKSB7CiAgICAg");
    sb.append("ICAgICBjb25uZWN0aW9uLkRvY3VtZW50c0hhc2hQYXNzd29yZChwYXNzd29yZHNbJ3Bhc3N3b3JkJ10s");
    sb.append("IHsKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGhhc2hlZF9wdykgewogICAgICAgICAgICAg");
    sb.append("IHJlcVsncGFzc3dvcmQnXSA9IGhhc2hlZF9wdy5wYXNzd29yZEhhc2g7CiAgICAgICAgICAgICAgbmV4");
    sb.append("dCgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmYWlsZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAg");
    sb.append("ICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0byBoYXNoIHBhc3N3b3JkIik7CiAgICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmaXJlX2ZhaWx1");
    sb.append("cmUoZm9ybSwgIlBhc3N3b3JkcyBkb24ndCBtYXRjaCIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgICBuZXh0KCk7CiAgICAgIH0KICAgIH0sIHRydWUpOwogIH0KCiAgLy8gUlVOVElNRSB8IHJ4");
    sb.append("OmFjdGlvbj1kb21haW46cHV0CiAgc2VsZi5hZERQVVQgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlk");
    sb.append("ZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIGNvbW1vblB1dChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1l");
    sb.append("LCByeG9iaiwgZnVuY3Rpb24gKHJ4b2JqKSB7IHJldHVybiBzZWxmLnByb3RvY29sICsgIi8vIiArIHNl");
    sb.append("bGYuaG9zdCArICIvIiArIHJ4b2JqLnBhdGg7IH0pCiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlv");
    sb.append("bj1kb2N1bWVudDpwdXQKICBzZWxmLmFEUFVUID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0");
    sb.append("eU5hbWUsIHJ4b2JqKSB7CiAgICBjb21tb25QdXQoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhv");
    sb.append("YmosIGZ1bmN0aW9uIChyeG9iaikgeyByZXR1cm4gc2VsZi5wcm90b2NvbCArICIvLyIgKyBjb25uZWN0");
    sb.append("aW9uLmhvc3QgKyAiLyIgKyByeG9iai5zcGFjZSArICIvIiArIHJ4b2JqLmtleSArICIvIiArIHJ4b2Jq");
    sb.append("LnBhdGg7IH0pCiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1hZGFtYTpzaWduLWluCiAgc2Vs");
    sb.append("Zi5hU08gPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIHJ4");
    sb.append("b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9OwogICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICByZWNhbGxfZW1haWwoZm9ybSk7CiAgICB9LCAxKTsKICAgIC8vIFRPRE86IHB1bGwgZW1h");
    sb.append("aWwgb3V0IG9mIHRoaW4gYWlyCiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0");
    sb.append("aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRf");
    sb.append("Zm9ybV9hbmRfcHcoZm9ybSk7CiAgICAgIGlmIChyZXEucmVtZW1iZXIpIHsKICAgICAgICBsb2NhbFN0");
    sb.append("b3JhZ2Uuc2V0SXRlbSgiZW1haWxfcmVtZW1iZXIiLCByZXEuZW1haWwpOwogICAgICB9IGVsc2Ugewog");
    sb.append("ICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJlbWFpbF9yZW1lbWJlciIsICIiKTsKICAgICAgfQog");
    sb.append("ICAgICBjb25uZWN0aW9uLkFjY291bnRMb2dpbihyZXEuZW1haWwsIHJlcS5wYXNzd29yZCwgewogICAg");
    sb.append("ICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBzdGFzaF9pZGVudGl0eShp");
    sb.append("ZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgICAgc2VsZi5n");
    sb.append("b3RvKHJ4b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsKICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsK");
    sb.append("ICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGZp");
    sb.append("cmVfZmFpbHVyZShmb3JtLCAiQWNjb3VudExvZ2luIEZhaWxlZDoiICsgcmVhc29uKTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1hZGFt");
    sb.append("YTpzaWduLXVwCiAgc2VsZi5hU1UgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGZvcndhcmRUbykgewog");
    sb.append("ICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2");
    sb.append("dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm0oZm9ybSwge30pOwogICAg");
    sb.append("ICBjb25uZWN0aW9uLkluaXRTZXR1cEFjY291bnQocmVxLmVtYWlsLCB7CiAgICAgICAgc3VjY2Vzczog");
    sb.append("ZnVuY3Rpb24gKC8qIHBheWxvYWQgKi8pIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJl");
    sb.append("bWFpbCIsIHJlcS5lbWFpbCk7CiAgICAgICAgICBzZWxmLmdvdG8oZm9yd2FyZFRvLCBmYWxzZSk7CiAg");
    sb.append("ICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5j");
    sb.append("dGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkluaXRTZXR1cEFjY291");
    sb.append("bnQgRmFpbGVkOiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0cnVlKTsKICB9");
    sb.append("OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWFkYW1hOnNldC1wYXNzd29yZAogIHNlbGYuYVNQID0g");
    sb.append("ZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBmb3J3YXJkVG8pIHsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5l");
    sb.append("cignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAg");
    sb.append("ICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgaWYgKCEoImVtYWlsIiBpbiBy");
    sb.append("ZXEpKSB7CiAgICAgICAgcmVxLmVtYWlsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImVtYWlsIik7CiAg");
    sb.append("ICAgIH0KICAgICAgY29ubmVjdGlvbi5Jbml0Q29tcGxldGVBY2NvdW50KHJlcS5lbWFpbCwgZmFsc2Us");
    sb.append("IHJlcS5jb2RlLCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGluaXQpIHsKICAgICAgICAgIHZh");
    sb.append("ciBpZGVudGl0eSA9IGluaXQuaWRlbnRpdHk7CiAgICAgICAgICBjb25uZWN0aW9uLkFjY291bnRTZXRQ");
    sb.append("YXNzd29yZChpbml0LmlkZW50aXR5LCByZXEucGFzc3dvcmQsIHsKICAgICAgICAgICAgc3VjY2Vzczog");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHN0YXNoX2lkZW50aXR5KCJkZWZhdWx0IiwgaWRlbnRp");
    sb.append("dHksIGNvbm5lY3Rpb24pOwogICAgICAgICAgICAgIHNlbGYuZ290byhmb3J3YXJkVG8sIGZhbHNlKTsK");
    sb.append("ICAgICAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAg");
    sb.append("IGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9y");
    sb.append("bSwgIkZhaWxlZCBBY2NvdW50U2V0UGFzc3dvcmQ6IiArIHJlYXNvbik7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewog");
    sb.append("ICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgSW5pdENvbXBsZXRlQWNjb3VudDoiICsg");
    sb.append("cmVhc29uKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCgogIHZhciBoeWRy");
    sb.append("YXRlX2Zvcm0gPSBmdW5jdGlvbihlbCwgaW5wdXQpIHsKICAgIHZhciB0YWcgPSBlbC50YWdOYW1lLnRv");
    sb.append("VXBwZXJDYXNlKCk7CiAgICB2YXIgaXNTZXR0YWJsZSA9IHRhZyA9PSAiU0VMRUNUIiB8fCB0YWcgPT0g");
    sb.append("IklOUFVUIiB8fCB0YWcgPT0gIkhJRERFTiI7CiAgICBpZiAoJ25hbWUnIGluIGVsICYmIGlzU2V0dGFi");
    sb.append("bGUpIHsKICAgICAgdmFyIG5hbWUgPSBlbC5uYW1lOwogICAgICB2YXIgcGF5bG9hZCA9IGlucHV0Owog");
    sb.append("ICAgICB2YXIga0RvdE9yU2xhc2ggPSBmaXJzdE9jY3VyKG5hbWUuaW5kZXhPZignLicpLCBuYW1lLmlu");
    sb.append("ZGV4T2YoJy8nKSk7CiAgICAgIHdoaWxlIChrRG90T3JTbGFzaCA+IDApIHsKICAgICAgICB2YXIgaXRl");
    sb.append("bSA9IG5hbWUuc3Vic3RyaW5nKDAsIGtEb3RPclNsYXNoKTsKICAgICAgICBuYW1lID0gbmFtZS5zdWJz");
    sb.append("dHJpbmcoa0RvdE9yU2xhc2ggKyAxKTsKICAgICAgICBpZiAoaXRlbSBpbiBwYXlsb2FkKSB7CiAgICAg");
    sb.append("ICAgICBwYXlsb2FkID0gcGF5bG9hZFtpdGVtXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICAgIH0KICAgICAgICBrRG90T3JTbGFzaCA9IGZpcnN0T2NjdXIobmFtZS5pbmRleE9m");
    sb.append("KCcuJyksIG5hbWUuaW5kZXhPZignLycpKTsKICAgICAgfQogICAgICBpZiAobmFtZSBpbiBwYXlsb2Fk");
    sb.append("KSB7CiAgICAgICAgdmFyIHR5cGUgPSBlbC50eXBlLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgaWYgKHR5");
    sb.append("cGUgPT0gIkNIRUNLQk9YIikgewogICAgICAgICAgZWwuY2hlY2tlZCA9IHBheWxvYWRbbmFtZV0gPT0g");
    sb.append("InRydWUiIHx8IHBheWxvYWRbbmFtZV0gPT09IHRydWUgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfSBl");
    sb.append("bHNlIGlmICh0eXBlID09ICJSQURJTyIpIHsKICAgICAgICAgIGlmIChwYXlsb2FkW25hbWVdID09IGVs");
    sb.append("LnZhbHVlKSB7CiAgICAgICAgICAgIGVsLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgICBlbC52YWx1ZSA9IHBheWxvYWRbbmFtZV07CiAgICAgICAgfQogICAg");
    sb.append("ICB9CiAgICB9CiAgICBpZiAoImNoaWxkcmVuIiBpbiBlbCkgewogICAgICB2YXIgYXJyID0gZWwuY2hp");
    sb.append("bGRyZW47CiAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBu");
    sb.append("OyBrKyspIHsKICAgICAgICB2YXIgY2ggPSBlbC5jaGlsZHJlbltrXTsKICAgICAgICBoeWRyYXRlX2Zv");
    sb.append("cm0oY2gsIGlucHV0KTsKICAgICAgfQogICAgfQogIH0KCgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb246");
    sb.append("Y29weS1mb3JtOiR0YXJnZXQtaWQKICBzZWxmLmFDRiA9IGZ1bmN0aW9uKGZvcm0sIHRhcmdldEZvcm1J");
    sb.append("ZCkgewogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbihldnQpIHsKICAg");
    sb.append("ICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBpbnB1dCA9IGdldF9mb3JtKGZvcm0sIHt9");
    sb.append("KTsKICAgICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldEZvcm1JZCk7");
    sb.append("CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICBoeWRyYXRlX2Zvcm0odGFyZ2V0LCBpbnB1dCk7CiAg");
    sb.append("ICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlyZV9mYWlsdXJl");
    sb.append("KGZvcm0sICJmYWlsZWQgdG8gZmluZCBmb3JtIGJ5IGlkICciICsgdGFyZ2V0Rm9ybUlkICsgIiciKTsK");
    sb.append("ICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1zZW5kOiRj");
    sb.append("aGFubmVsCiAgc2VsZi5hU0QgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGNoYW5uZWwsIG1zVG9EZWJv");
    sb.append("dW5jZSkgewogICAgLy8gVE9ETzogZG8gZGVib3VuY2UgaWYgPiAwCiAgICBmb3JtLmFkZEV2ZW50TGlz");
    sb.append("dGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7");
    sb.append("CiAgICAgIHZhciBwYXNzd29yZHMgPSB7fTsKICAgICAgdmFyIG1zZyA9IGdldF9mb3JtKGZvcm0sIHBh");
    sb.append("c3N3b3Jkcyk7CgogICAgICBpZiAoZXZ0LnN1Ym1pdHRlcikgewogICAgICAgIHZhciBzID0gZXZ0LnN1");
    sb.append("Ym1pdHRlcjsKICAgICAgICBpZiAocy5uYW1lICYmIHMudmFsdWUpIHsKICAgICAgICAgIGlmIChzLnZh");
    sb.append("bHVlID09ICJ0cnVlIikgeyBzLnZhbHVlID0gdHJ1ZTsgfQogICAgICAgICAgZWxzZSBpZiAocy52YWx1");
    sb.append("ZSA9PSAiZmFsc2UiKSB7IHMudmFsdWUgPSBmYWxzZTsgfQogICAgICAgICAgbXNnW3MubmFtZV0gPSBz");
    sb.append("LnZhbHVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGFmdGVyID0gZnVuY3Rpb24oKSB7CiAg");
    sb.append("ICAgICAgdmFyIGNoYW5uZWxUb1VzZSA9IGNoYW5uZWw7CiAgICAgICAgaWYgKGNoYW5uZWwgPT0gIl9f");
    sb.append("ZHMiKSB7CiAgICAgICAgICBjaGFubmVsVG9Vc2UgPSBtc2dbJ19fY2hhbm5lbCddOwogICAgICAgICAg");
    sb.append("ZGVsZXRlIG1zZ1snX19jaGFubmVsJ107CiAgICAgICAgfQogICAgICAgIHN0YXRlLmRhdGEuY29ubmVj");
    sb.append("dGlvbi5wdHIuc2VuZChjaGFubmVsVG9Vc2UsIG1zZywgewogICAgICAgICAgc3VjY2VzczogZnVuY3Rp");
    sb.append("b24gKC8qIHBheWxvYWQgKi8pIHsKICAgICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgZmly");
    sb.append("ZV9mYWlsdXJlKGZvcm0sICJTZW5kIGZhaWxlZDoiICsgcmVhc29uKTsKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICB9KTsKICAgICAgfTsKCiAgICAgIHZhciBwb3N0UGFzc3dvcmQgPSBmdW5jdGlvbigpIHsKICAgICAg");
    sb.append("ICBpZiAoJ25ld19wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB7CiAgICAgICAgICBpZiAoISgnY29uZmly");
    sb.append("bS1uZXdfcGFzc3dvcmQnIGluIHBhc3N3b3JkcykgfHwgcGFzc3dvcmRzWyduZXdfcGFzc3dvcmQnXSA9");
    sb.append("PSBwYXNzd29yZHNbJ2NvbmZpcm0tbmV3X3Bhc3N3b3JkJ10pIHsKICAgICAgICAgICAgY29ubmVjdGlv");
    sb.append("bi5Eb2N1bWVudHNIYXNoUGFzc3dvcmQocGFzc3dvcmRzWyduZXdfcGFzc3dvcmQnXSwgewogICAgICAg");
    sb.append("ICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChoYXNoZWRfcHcpIHsKICAgICAgICAgICAgICAgIG1zZ1sn");
    sb.append("bmV3X3Bhc3N3b3JkJ10gPSBoYXNoZWRfcHcucGFzc3dvcmRIYXNoOwogICAgICAgICAgICAgICAgYWZ0");
    sb.append("ZXIoKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGZhaWxlZDogZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgdG8gaGFzaCBwYXNzd29yZCIp");
    sb.append("OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgfSBlbHNlIHsKICAgICAg");
    sb.append("ICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJQYXNzd29yZHMgbWlzbWF0Y2ggZm9yIG5ldyBwYXNzd29y");
    sb.append("ZC4iKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWZ0ZXIoKTsKICAgICAg");
    sb.append("ICB9CiAgICAgIH0KCiAgICAgIGlmICgncGFzc3dvcmQnIGluIHBhc3N3b3JkcykgewogICAgICAgIGlm");
    sb.append("ICghKCdjb25maXJtLXBhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHx8IHBhc3N3b3Jkc1sncGFzc3dvcmQn");
    sb.append("XSA9PSBwYXNzd29yZHNbJ2NvbmZpcm0tcGFzc3dvcmQnXSkgewogICAgICAgICAgY29ubmVjdGlvbi5E");
    sb.append("b2N1bWVudHNIYXNoUGFzc3dvcmQocGFzc3dvcmRzWydwYXNzd29yZCddLCB7CiAgICAgICAgICAgIHN1");
    sb.append("Y2Nlc3M6IGZ1bmN0aW9uIChoYXNoZWRfcHcpIHsKICAgICAgICAgICAgICBtc2dbJ3Bhc3N3b3JkJ10g");
    sb.append("PSBoYXNoZWRfcHcucGFzc3dvcmRIYXNoOwogICAgICAgICAgICAgIHBvc3RQYXNzd29yZCgpOwogICAg");
    sb.append("ICAgICAgICB9LAogICAgICAgICAgICBmYWlsZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBm");
    sb.append("aXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0byBoYXNoIHBhc3N3b3JkIik7CiAgICAgICAgICAgIH0K");
    sb.append("ICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwg");
    sb.append("IlBhc3N3b3JkcyBtaXNtYXRjaCIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBwb3N0");
    sb.append("UGFzc3dvcmQoKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfTsKICAvLyA8dG9kb3Rhc2s+ZGVzY3Jp");
    sb.append("cHRpb248L3RvZG90YXNrPgogIHNlbGYuVEFTSyA9IGZ1bmN0aW9uKHBkb20sIGlkLCBzZWN0aW9uLCBk");
    sb.append("ZXNjcmlwdGlvbikgewogICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYi");
    sb.append("KTsKICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gIiYjOTc0NDsgIiArIGRlc2NyaXB0aW9uICsgIiAoICIg");
    sb.append("KyBzZWN0aW9uICsgIikgPGJyIC8+IjsKICAgIHBkb20uYXBwZW5kQ2hpbGQoZWxlbWVudCk7CiAgfTsK");
    sb.append("ICAvLyBSVU5USU1FOiBwcmUtY29tcHJlc3Npb24gZm9yIHNldHRpbmcgYW4gYXR0cmlidXRlCiAgLy8g");
    sb.append("ImQuc2V0QXR0cmlidXRlKGEsdik7IiAtLT4KICAvLyAkLlNBKGQsYSx2KTsiCiAgc2VsZi5TQSA9IGZ1");
    sb.append("bmN0aW9uKGRvbSwgYXR0ciwgdmFsdWUpIHsKICAgIGRvbS5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUp");
    sb.append("OwogIH07CiAgc2VsZi5TSUggPSBmdW5jdGlvbihkb20sIGh0bWwpIHsKICAgIGRvbS5pbm5lckhUTUwg");
    sb.append("PSBodG1sOwogIH07CiAgLy8gUlVOVElNRTogc2V0IHRoZSBsYWJlbCBvZiBhbiBvcHRpb24KICBzZWxm");
    sb.append("LlNMID0gZnVuY3Rpb24oZG9tLCB2YWx1ZSkgewogICAgZG9tLmxhYmVsID0gdmFsdWU7CiAgICBkb20u");
    sb.append("aW5uZXJUZXh0ID0gdmFsdWU7CiAgfTsKCiAgLy8gZm9yIHNlbGVjdHMKICAvLyBkLnZhbHVlPSR2YWx1");
    sb.append("ZTsKICAvLyAkLlNWKGQsJHZhbHVlKTsKICBzZWxmLlNWID0gZnVuY3Rpb24oZG9tLCB2YWx1ZSkgewog");
    sb.append("ICAgdmFyIHByaW9yID0gZG9tLnZhbHVlOwogICAgZG9tLnZhbHVlID0gdmFsdWU7CiAgICBkb20ucnh2");
    sb.append("YWx1ZSA9IHZhbHVlOwogICAgaWYgKHByaW9yICE9IHZhbHVlKSB7CiAgICAgIGRvbS5kaXNwYXRjaEV2");
    sb.append("ZW50KG5ldyBFdmVudCgiZm9yY2VkIikpOwogICAgfQogIH07CiAgc2VsZi5GViA9IGZ1bmN0aW9uKGRv");
    sb.append("bSwgZmllbGQsIHZhbHVlKSB7CiAgICB2YXIgcHJpb3IgPSBkb21bZmllbGRdOwogICAgZG9tW2ZpZWxk");
    sb.append("XSA9IHZhbHVlOwogICAgaWYgKHByaW9yICE9IHZhbHVlKSB7CiAgICAgIGRvbS5kaXNwYXRjaEV2ZW50");
    sb.append("KG5ldyBFdmVudCgiZm9yY2VkIikpOwogICAgfQogIH07CiAgc2VsZi5tZXJnZUdvdG8gPSBmdW5jdGlv");
    sb.append("bihocmVmLCBzdGF0ZSkgewogICAgdmFyIHBhcnRzID0gKGhyZWYuc3RhcnRzV2l0aCgiLyIpID8gaHJl");
    sb.append("Zi5zdWJzdHJpbmcoMSkgOiBocmVmKS5zcGxpdCgiLyIpOwogICAgdmFyIG1lcmdlSW5pdCA9IHt9Owog");
    sb.append("ICAgaWYgKHJvdXRlKHBhcnRzLCAwLCByb3V0ZXIsIG1lcmdlSW5pdCkpIHsKICAgICAgc3RhdGUudmll");
    sb.append("dy50cmVlLnVwZGF0ZShtZXJnZUluaXQpOwogICAgfQogIH07CiAgLy8gUlVOVElNRSB8IDwuLi4gaHJl");
    sb.append("Zj0iIiAuLi4+CiAgc2VsZi5IUkVGID0gZnVuY3Rpb24gKGRvbSwgc3RhdGUsIGhyZWYsIG1lcmdlKSB7");
    sb.append("CiAgICBkb20uc2V0QXR0cmlidXRlKCJocmVmIiwgZml4SHJlZihocmVmKSk7CiAgICBkb20ub25jbGlj");
    sb.append("ayA9IGZ1bmN0aW9uIChldnQpIHsKICAgICAgdmFyIHRyaW1IcmVmID0gaHJlZjsKICAgICAgaWYgKHRy");
    sb.append("aW1IcmVmLnN0YXJ0c1dpdGgoIi8iKSkgewogICAgICAgIHRyaW1IcmVmID0gdHJpbUhyZWYuc3Vic3Ry");
    sb.append("aW5nKDEpOwogICAgICB9CiAgICAgIHZhciBrUSA9IHRyaW1IcmVmLmluZGV4T2YoJz8nKTsKICAgICAg");
    sb.append("aWYgKGtRID4gMCkgewogICAgICAgIHRyaW1IcmVmID0gdHJpbUhyZWYuc3Vic3RyaW5nKDAsIGtRKTsK");
    sb.append("ICAgICAgfQogICAgICB2YXIgcGFydHMgPSB0cmltSHJlZi5zcGxpdCgiLyIpOwogICAgICB2YXIgbWVy");
    sb.append("Z2VJbml0ID0ge307CiAgICAgIGlmIChyb3V0ZShwYXJ0cywgMCwgcm91dGVyLCBtZXJnZUluaXQpKSB7");
    sb.append("CiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgaWYgKG1lcmdlKSB7CiAgICAgICAg");
    sb.append("ICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKG1lcmdlSW5pdCk7CiAgICAgICAgICB3aW5kb3cuaGlzdG9y");
    sb.append("eS5wdXNoU3RhdGUoe21lcmdlOnRydWV9LCAiIiwgZml4SHJlZihocmVmKSk7CiAgICAgICAgfSBlbHNl");
    sb.append("IHsKICAgICAgICAgIHNlbGYuZ290byhocmVmLCB0cnVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJu");
    sb.append("IGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfTsKICB9OwogIC8vIFJVTlRJTUUg");
    sb.append("fCA8Li4uIGNsYXNzPSIiIC4uLj4KICBzZWxmLkFDID0gZnVuY3Rpb24gKGRvbSwgdmFsdWUpIHsKICAg");
    sb.append("IGRvbS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgdmFsdWUpOwogIH07CiAgc2VsZi5BQ0xBU1MgPSBmdW5j");
    sb.append("dGlvbiAoZG9tLCB2YWx1ZSkgeyAvLyB0byBkZXByZWNhdGUgaW4gdGhlIGZ1dHVyZQogICAgZG9tLnNl");
    sb.append("dEF0dHJpYnV0ZSgiY2xhc3MiLCB2YWx1ZSk7CiAgfTsKICAvLyBSVU5USU1FIHwgPC4uLiBzcmM9IiIg");
    sb.append("Li4uPgogIHNlbGYuQVNSQyA9IGZ1bmN0aW9uIChkb20sIHZhbHVlKSB7CiAgICBkb20uc2V0QXR0cmli");
    sb.append("dXRlKCJzcmMiLCB2YWx1ZSk7CiAgfTsKCiAgc2VsZi5maW5kRWxlbWVudEJ5SWRJblVuYm91bmREb20g");
    sb.append("PSBmdW5jdGlvbihkb20sIGlkKSB7CiAgICB2YXIgZmViaWQgPSBmdW5jdGlvbiAoZCwgaWQpIHsKICAg");
    sb.append("ICAgaWYgKCdpZCcgaW4gZCkgewogICAgICAgIGlmIChkLmlkID09IGlkKSB7CiAgICAgICAgICByZXR1");
    sb.append("cm4gZDsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCdjaGlsZHJlbicgaW4gZCkgewogICAgICAg");
    sb.append("IHZhciBhcnIgPSBkLmNoaWxkcmVuOwogICAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgICAgdmFyIHJlc3VsdCA9IGZlYmlkKGFy");
    sb.append("cltrXSwgaWQpOwogICAgICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCkgewogICAgICAgICAgICByZXR1");
    sb.append("cm4gcmVzdWx0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsK");
    sb.append("ICAgIH07CiAgICByZXR1cm4gZmViaWQoZG9tLCBpZCk7CiAgfTsKICBzZWxmLnBvbGxFbGVtZW50ID0g");
    sb.append("ZnVuY3Rpb24oZG9tLCB0aW1lb3V0LCBzdWNjZXNzLCBmYWlsdXJlKSB7CiAgICB2YXIgYWRtID0gZnVu");
    sb.append("Y3Rpb24gKGRvbSwgcmVtYWluKSB7CiAgICAgIGlmIChyZW1haW4gPCAwKSB7CiAgICAgICAgZmFpbHVy");
    sb.append("ZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlu");
    sb.append("cyhkb20pKSB7CiAgICAgICAgc3VjY2VzcygpOwogICAgICB9IGVsc2UgewogICAgICAgIHdpbmRvdy5z");
    sb.append("ZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGFkbShkb20sIHJlbWFpbiAtIDI1KTsKICAg");
    sb.append("ICAgICB9LCAyNSk7CiAgICAgIH0KICAgIH07CiAgICBhZG0oZG9tLCB0aW1lb3V0KTsKICB9OwogIHZh");
    sb.append("ciBsaWJzTG9hZGVkID0ge307CiAgc2VsZi5sb2FkTGlicmFyeSA9IGZ1bmN0aW9uKGxpYiwgY2FsbGJh");
    sb.append("Y2spIHsKICAgIGlmIChsaWIgaW4gbGlic0xvYWRlZCkgewogICAgICBjYWxsYmFjayhsaWJzTG9hZGVk");
    sb.append("W2xpYl0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBsaWJzTG9hZGVkW2xpYl0gPSBmYWxzZTsKICAg");
    sb.append("IHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgIHNjcmlwdC5z");
    sb.append("ZXRBdHRyaWJ1dGUoJ3NyYycsbGliKTsKICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAg");
    sb.append("ICAgbGlic0xvYWRlZFtsaWJdID0gdHJ1ZTsKICAgICAgY2FsbGJhY2sodHJ1ZSk7CiAgICB9OwogICAg");
    sb.append("c2NyaXB0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgY2FsbGJhY2soZmFsc2UpOwogICAgfTsK");
    sb.append("ICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKICB9OwogIHdpbmRvdy5yeGh0bWwg");
    sb.append("PSBzZWxmOwogIHJldHVybiBzZWxmOwp9KSgpOwo=");
    return sb.toString();
  }
  public static final String CONNECTION = new String(Base64.getDecoder().decode(make_connection()), StandardCharsets.UTF_8);
  private static String make_connection() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoKICogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG91dGxp");
    sb.append("bmVkIGluIHRoZQogKiBmaWxlICdMSUNFTlNFJyAoaXQncyBkdWFsIGxpY2Vuc2VkKSBsb2NhdGVkIGlu");
    sb.append("IHRoZSByb290IGRpcmVjdG9yeQogKiBuZWFyIHRoZSBSRUFETUUubWQgd2hpY2ggeW91IHNob3VsZCBh");
    sb.append("bHNvIHJlYWQuIEZvciBtb3JlIGluZm9ybWF0aW9uCiAqIGFib3V0IHRoZSBwcm9qZWN0IHdoaWNoIG93");
    sb.append("bnMgdGhpcyBmaWxlLCBzZWUgaHR0cHM6Ly93d3cuYWRhbWEtcGxhdGZvcm0uY29tLyAuCiAqCiAqIChj");
    sb.append("KSAyMDIxIC0gMjAyMyBieSBBZGFtYSBQbGF0Zm9ybSBJbml0aWF0aXZlLCBMTEMKICovCi8qKiBUaGUg");
    sb.append("V2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gQWRhbWEgKi8KY2xhc3MgV2ViU29ja2V0QWRhbWFDb25uZWN0");
    sb.append("aW9uIHsKICBjb25zdHJ1Y3Rvcihob3N0KSB7CiAgICAvLyBvbiBmYWlsdXJlLCB3ZSBiYWNrLW9mZiB3");
    sb.append("aXRoIHRoaXMgbWlsbGlzZWNvbmRzCiAgICB0aGlzLmJhY2tvZmYgPSAxOwogICAgLy8gdGhlIGhvc3Qg");
    sb.append("d2UgYXJlIGNvbm5lY3RpbmcgdG8KICAgIHRoaXMuaG9zdCA9IGhvc3Q7CiAgICAvLyBmb3JtIHRoZSBV");
    sb.append("Ukwgb2YgdGhlIGhvc3QKICAgIHRoaXMudXJsID0gIndzczovLyIgKyBob3N0ICsgIi9+cyI7CiAgICAv");
    sb.append("LyBpcyB0aGUgY29ubmVjdGlvbiBjb25uZWN0ZWQKICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAg");
    sb.append("ICAvLyBpcyB0aGUgY29ubmVjdGlvbiBkZWFkCiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIC8vIHRo");
    sb.append("ZSBtYXhpbXVtIHBlcmlvZCBvZiB0aW1lIGJldHdlZW4gd2FpdGluZyBmb3IgYSByZXRyeQogICAgdGhp");
    sb.append("cy5tYXhpbXVtX2JhY2tvZmYgPSA1MDAwOwogICAgLy8gd2hlbiB0aGUgY29ubmVjdGlvbiB0aW1lcyBv");
    sb.append("dXQgZnJvbSB0aGUgc2VydmVyLCBob3cgbG9uZyB0byB3YWl0IHVudGlsIHdlIHJlY29ubmVjdAogICAg");
    sb.append("dGhpcy5yZXNldF9iYWNrb2ZmID0gMTAwMDsKICAgIC8vIHRoZSBhY3R1YWwgd2Vic29ja2V0CiAgICB0");
    sb.append("aGlzLnNvY2tldCA9IG51bGw7CiAgICAvLyB3aGF0IGhhcHBlbnMgd2hlbiB0aGUgc3RhdHVzIGNoYW5n");
    sb.append("ZXMKICAgIHRoaXMub25zdGF0dXNjaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7IH07CiAgICAvLyB3");
    sb.append("aGF0IGhhcHBlbnMgd2hlbiB3ZSBsZWFybiB0aGUgbGF0ZW5jeQogICAgdGhpcy5vbnBpbmcgPSBmdW5j");
    sb.append("dGlvbiAoc2Vjb25kcywgbGF0ZW5jeSkgeyB9OwogICAgLy8gaXMgYSByZXRyeSBzY2hlZHVsZWQKICAg");
    sb.append("IHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICAvLyBjYWxsYmFjayBtYXBwaW5nCiAgICB0aGlzLmNh");
    sb.append("bGxiYWNrcyA9IG5ldyBNYXAoKTsKICAgIC8vIGlkIGdlbmVyYXRpb24KICAgIHRoaXMubmV4dElkID0g");
    sb.append("MDsKICAgIC8vIGV2ZW50cyB0byBleGVjdXRlIG9uIHJlY29ubmVjdAogICAgdGhpcy5vbnJlY29ubmVj");
    sb.append("dCA9IG5ldyBNYXAoKTsKICAgIC8vIHByb3RvY29sIGZvciBtZXRyaWNzCiAgICB0aGlzLnByb3RvY29s");
    sb.append("ID0gbG9jYXRpb24ucHJvdG9jb2w7CiAgfQoKICAvKiogc3RvcCB0aGUgY29ubmVjdGlvbiAqLwogIHN0");
    sb.append("b3AoKSB7CiAgICB0aGlzLmRlYWQgPSB0cnVlOwogICAgaWYgKHRoaXMuc29ja2V0ICE9PSBudWxsKSB7");
    sb.append("CiAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7CiAgICB9CiAgfQoKICBidW1wKGJtKSB7CiAgICB0cnkg");
    sb.append("ewogICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAub3Blbigi");
    sb.append("UFVUIiwgdGhpcy5wcm90b2NvbCArICIvLyIgKyB0aGlzLmhvc3QgKyAiL35ibS8iICsgYm0sIHRydWUp");
    sb.append("OwogICAgICB4aHR0cC5zZW5kKCk7CiAgICB9IGNhdGNoIChleCkgewogICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICB9CiAgfQoKICBsb2cobmFtZSwgYm9keSkgewogICAgdHJ5IHsKICAgICAgdmFyIHhodHRwID0g");
    sb.append("bmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIHhodHRwLm9wZW4oIlBVVCIsIHRoaXMucHJvdG9jb2wg");
    sb.append("KyAiLy8iICsgdGhpcy5ob3N0ICsgIi9+bGcvIiArIG5hbWUsIHRydWUpOwogICAgICB4aHR0cC5zZW5k");
    sb.append("KGJvZHkpOwogICAgfSBjYXRjaCAoZXgpIHsKICAgICAgLy8gZG9uJ3QgY2FyZQogICAgfQogIH0KCiAg");
    sb.append("LyoqIHByaXZhdGU6IHJldHJ5IHRoZSBjb25uZWN0aW9uICovCiAgX3JldHJ5KCkgewogICAgLy8gbnVs");
    sb.append("bCBvdXQgdGhlIHNvY2tldAogICAgdGhpcy5zb2NrZXQgPSBudWxsOwogICAgLy8gaWYgd2UgYXJlIGNv");
    sb.append("bm5lY3RlZCwgdHJhbnNpdGlvbiB0aGUgc3RhdHVzCiAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHsKICAg");
    sb.append("ICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5vbnN0YXR1c2NoYW5nZShmYWxzZSk7");
    sb.append("CiAgICAgIHRoaXMuY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNiLCBpZCkgewogICAgICAgIGNi");
    sb.append("KHtmYWlsdXJlOjk5OX0pOwogICAgICB9KTsKICAgIH0KICAgIHRoaXMuY2FsbGJhY2tzLmNsZWFyKCk7");
    sb.append("CiAgICAvLyBpZiB3ZSBhcmUgZGVhZCwgdGhlbiBkb24ndCBhY3R1YWxseSByZXRyeQogICAgaWYgKHRo");
    sb.append("aXMuZGVhZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICAvLyBtYWtlIHN1cmUKICAgIGlmICghdGhp");
    sb.append("cy5zY2hlZHVsZWQpIHsKICAgICAgLy8gc2NoZWR1bGUgYSByZXRyeTsgZmlyc3QgY29tcHV0ZSBob3cg");
    sb.append("bG9uZyB0byB0YWtlCiAgICAgIC8vIGNvbXB1dGUgaG93IGxvbmcgd2UgbmVlZCB0byB3YWl0CiAgICAg");
    sb.append("IHZhciBoYWx2ZUFmdGVyU2NoZWR1bGUgPSBmYWxzZTsKICAgICAgdGhpcy5iYWNrb2ZmICs9IE1hdGgu");
    sb.append("cmFuZG9tKCkgKiB0aGlzLmJhY2tvZmY7CiAgICAgIGlmICh0aGlzLmJhY2tvZmYgPiB0aGlzLm1heGlt");
    sb.append("dW1fYmFja29mZikgewogICAgICAgIHRoaXMuYmFja29mZiA9IHRoaXMubWF4aW11bV9iYWNrb2ZmOwog");
    sb.append("ICAgICAgIGhhbHZlQWZ0ZXJTY2hlZHVsZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIC8vIHNjaGVkdWxl");
    sb.append("IGl0CiAgICAgIHRoaXMuc2NoZWR1bGVkID0gdHJ1ZTsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLnN0YXJ0KCk7CiAgICAgIH0sIHRo");
    sb.append("aXMuYmFja29mZik7CgogICAgICAvLyB3ZSBqdXN0IHNjaGVkdWxlZCBpdCBmb3IgdGhlIG1heGltdW0g");
    sb.append("YmFja29mZiB0aW1lLCBsZXQncyByZWR1Y2UgdGhlIGJhY2tvZmYgc28gdGhlIG5leHQgb25lIHdpbGwg");
    sb.append("aGF2ZSBzb21lIGppdHRlcgogICAgICBpZiAoaGFsdmVBZnRlclNjaGVkdWxlKSB7CiAgICAgICAgdGhp");
    sb.append("cy5iYWNrb2ZmIC89IDIuMDsKICAgICAgfQogICAgfQogIH0KCiAgLyoqIHN0YXJ0IHRoZSBjb25uZWN0");
    sb.append("aW9uICovCiAgc3RhcnQoKSB7CiAgICAvLyByZXNldCB0aGUgc3RhdGUKICAgIHZhciBzZWxmID0gdGhp");
    sb.append("czsKICAgIHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIHRo");
    sb.append("aXMuaGFzX2hhZF9waW5nID0gZmFsc2U7CiAgICB0aGlzLmxhc3RfcGluZyA9IDA7CiAgICB0aGlzLnBp");
    sb.append("bmdfZmFpbHVyZXMgPSAwOwogICAgLy8gY3JlYXRlIHRoZSBzb2NrZXQgYW5kIGJpbmQgZXZlbnQgaGFu");
    sb.append("ZGxlcnMKICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCh0aGlzLnVybCk7CiAgICB0aGlzLnNv");
    sb.append("Y2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIHJlc3VsdCA9IEpTT04u");
    sb.append("cGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgIC8vIGEgbWVzc2FnZSBhcnJpdmVkLCBpcyBpdCBhIGNvbm5l");
    sb.append("Y3Rpb24gc2lnbmFsCiAgICAgIGlmICgicGluZyIgaW4gcmVzdWx0KSB7CiAgICAgICAgc2VsZi5vbnBp");
    sb.append("bmcocmVzdWx0LnBpbmcsIHJlc3VsdC5sYXRlbmN5KTsKICAgICAgICByZXN1bHQucG9uZyA9IG5ldyBE");
    sb.append("YXRlKCkuZ2V0VGltZSgpIC8gMTAwMC4wOwogICAgICAgIHNlbGYuc29ja2V0LnNlbmQoSlNPTi5zdHJp");
    sb.append("bmdpZnkocmVzdWx0KSk7CiAgICAgICAgc2VsZi5sYXN0X3BpbmcgPSBuZXcgRGF0ZSgpLmdldFRpbWUo");
    sb.append("KTsKICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9");
    sb.append("CiAgICAgIGlmICgic3RhdHVzIiBpbiByZXN1bHQpIHsKICAgICAgICAvLyBoZXksIGFyZSB3ZSBjb25u");
    sb.append("ZWN0ZWQ/CiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgIT0gImNvbm5lY3RlZCIpIHsKICAgICAgICAg");
    sb.append("IC8vIG5vcGUsIE9LLCBsZXQncyBtYWtlIHRoaXMgYSBkZWFkIHNvY2tldAogICAgICAgICAgc2VsZi5z");
    sb.append("b2NrZXQuY2xvc2UoKTsKICAgICAgICAgIHNlbGYuc29ja2V0ID0gbnVsbDsKICAgICAgICAgIHNlbGYu");
    sb.append("YmFja29mZiA9IHNlbGYucmVzZXRfYmFja29mZjsKICAgICAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIHRlbGwgdGhlIGNsaWVudCB0aGF0IHdlIGFy");
    sb.append("ZSBnb29kIQogICAgICAgIHNlbGYuYmFja29mZiA9IDE7CiAgICAgICAgc2VsZi5jb25uZWN0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIHNlbGYub25zdGF0dXNjaGFuZ2UodHJ1ZSk7CiAgICAgICAgc2VsZi5fcmVjb25u");
    sb.append("ZWN0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIHRoZSByZXN1bHQgd2FzIGEgZmFp");
    sb.append("bHVyZS4uLgogICAgICBpZiAoImZhaWx1cmUiIGluIHJlc3VsdCkgewogICAgICAgIC8vIGZpbmQgdGhl");
    sb.append("IGNhbGxiYWNrLCB0aGVuIGludm9rZSBpdCAoYW5kIGNsZWFuIHVwKQogICAgICAgIGlmIChzZWxmLmNh");
    sb.append("bGxiYWNrcy5oYXMocmVzdWx0LmZhaWx1cmUpKSB7CiAgICAgICAgICB2YXIgY2IgPSBzZWxmLmNhbGxi");
    sb.append("YWNrcy5nZXQocmVzdWx0LmZhaWx1cmUpOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHNl");
    sb.append("bGYuY2FsbGJhY2tzLmRlbGV0ZShyZXN1bHQuZmFpbHVyZSk7CiAgICAgICAgICAgIGNiKHJlc3VsdCk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCJkZWxpdmVyIiBpbiByZXN1bHQp");
    sb.append("IHsKICAgICAgICAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWNjZXNzLCBzbyBsZXQncyBmaW5kIHRo");
    sb.append("ZSBjYWxsYmFjaywgYW5kIGlmIG5lZWQgYmUgY2xlYW4gdXAKICAgICAgICBpZiAoc2VsZi5jYWxsYmFj");
    sb.append("a3MuaGFzKHJlc3VsdC5kZWxpdmVyKSkgewogICAgICAgICAgdmFyIGNiID0gc2VsZi5jYWxsYmFja3Mu");
    sb.append("Z2V0KHJlc3VsdC5kZWxpdmVyKTsKICAgICAgICAgIGlmIChjYikgewogICAgICAgICAgICBpZiAocmVz");
    sb.append("dWx0LmRvbmUpIHsKICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrcy5kZWxldGUocmVzdWx0LmRlbGl2");
    sb.append("ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNiKHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfQogICAgICB9CiAgICB9OwogICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChldmVu");
    sb.append("dCkgewogICAgICBzZWxmLmJ1bXAoInIiKTsKICAgICAgLy8gbGV0J3MgcmV0cnkuLi4gb3Igc2hvdWxk");
    sb.append("IHdlIG5vdAogICAgICBzZWxmLl9yZXRyeSgpOwogICAgfTsKICAgIHRoaXMuc29ja2V0Lm9uZXJyb3Ig");
    sb.append("PSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgc2VsZi5idW1wKCJyIik7CiAgICAgIC8vIHNvbWV0aGlu");
    sb.append("ZyBiYWQgaGFwcGVuZWQsIGxldCdzIHJldHJ5CiAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICB9OwoKICB9");
    sb.append("CgogIGtlZXBhbGl2ZSgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHdpbmRvdy5zZXRJbnRlcnZh");
    sb.append("bChmdW5jdGlvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc2VsZi5oYXNfaGFkX3BpbmcgJiYg");
    sb.append("c2VsZi5zb2NrZXQpIHsKICAgICAgICAgIHZhciB0aW1lU2luY2VMYXN0UGluZyA9IG5ldyBEYXRlKCku");
    sb.append("Z2V0VGltZSgpIC0gc2VsZi5sYXN0X3Bpbmc7CiAgICAgICAgICAvLyBUT0RPOiBicm9hZGNhc3QgYSBs");
    sb.append("YXRlbmN5CiAgICAgICAgICBpZiAodGltZVNpbmNlTGFzdFBpbmcgPiAyNTAwKSB7CiAgICAgICAgICAg");
    sb.append("IHNlbGYucGluZ19mYWlsdXJlcysrOwogICAgICAgICAgICBpZiAoc2VsZi5waW5nX2ZhaWx1cmVzID49");
    sb.append("IDMpIHsKICAgICAgICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IGZhbHNlOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbigpIHt9OwogICAgICAgICAgICAgIHNlbGYuc29j");
    sb.append("a2V0LmNsb3NlKCk7CiAgICAgICAgICAgICAgc2VsZi5zb2NrZXQgPSBudWxsOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuX3JldHJ5KCk7CiAgICAgICAgICAgICAgc2VsZi5idW1wKCJkIik7CiAgICAgICAgICAgICAg");
    sb.append("Y29uc29sZS5lcnJvcigiaGFkIHRvIGZvcmNlIGEgZGlzY29ubmVjdCIpOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnBpbmdfZmFpbHVyZXMgPSAwOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7");
    sb.append("CiAgICAgIH0KICAgIH0sIDEyNTApOwogIH0KCiAgLyoqIHByaXZhdGU6IHNlbmQgYSByYXcgbWVzc2Fn");
    sb.append("ZSAqLwogIF93cml0ZShyZXF1ZXN0LCBjYWxsYmFjaykgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkg");
    sb.append("ewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNrcy5zZXQocmVxdWVzdC5p");
    sb.append("ZCwgY2FsbGJhY2spOwogICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7");
    sb.append("CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKiBhcGk6IHdhaXQgZm9yIGEgY29ubmVjdGlvbiAqLwog");
    sb.append("IGFzeW5jIHdhaXRfY29ubmVjdGVkKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHJl");
    sb.append("dHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZ29vZCkgewogICAgICAgIGdvb2QodHJ1ZSk7CiAgICAg");
    sb.append("IH0pOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcHJpb3IgPSB0");
    sb.append("aGlzLm9uc3RhdHVzY2hhbmdlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGdvb2Qp");
    sb.append("IHsKICAgICAgICBzZWxmLm9uc3RhdHVzY2hhbmdlID0gZnVuY3Rpb24gKHN0YXR1cykgewogICAgICAg");
    sb.append("ICAgcHJpb3Ioc3RhdHVzKTsKICAgICAgICAgIGlmIChzdGF0dXMpIHsKICAgICAgICAgICAgZ29vZCh0");
    sb.append("cnVlKTsKICAgICAgICAgICAgc2VsZi5vbnN0YXR1c2NoYW5nZSA9IHByaW9yOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0KCiAgX3JlY29ubmVjdCgpIHsKICAgIHRoaXMub25y");
    sb.append("ZWNvbm5lY3QuZm9yRWFjaChmdW5jdGlvbiAoc20sIGlkKSB7CiAgICAgIHNtLl9fcmV0cnkoKTsKICAg");
    sb.append("IH0pOwogIH0KCiAgLyoqIGV4ZWN1dGUgYSByZXF1ZXNlIHJlc3BvbnNlIHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfcnIoc20pIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHNtLmZpcnN0ID0gdHJ1ZTsKICAgIGlmICghc2VsZi5fd3JpdGUoc20ucmVxdWVzdCwgZnVuY3Rpb24g");
    sb.append("KHJlc3BvbnNlKSB7CiAgICAgIGlmIChzbS5maXJzdCkgewogICAgICAgIHNtLmZpcnN0ID0gZmFsc2U7");
    sb.append("CiAgICAgICAgaWYgKCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgICAgaWYgKCdmYWlsdXJl");
    sb.append("JyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLmZhaWx1cmUocmVzcG9u");
    sb.append("c2UucmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCdzdWNj");
    sb.append("ZXNzJyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLnN1Y2Nlc3MocmVz");
    sb.append("cG9uc2UucmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBzZWxmLm9u");
    sb.append("cmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICB9KSkgewogICAgICBzZWxmLm9ucmVjb25uZWN0LnNl");
    sb.append("dChzbS5pZCwgc20pOwogICAgICBzbS5fX3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHNtKTsKICAgICAgfTsKICAgICAgcmV0dXJuIHNtOwogICAgfQogICAgcmV0dXJu");
    sb.append("IG51bGw7CiAgfQoKICAvKiogZXhlY3V0ZSBhIHN0cmVhbSByZXF1ZXN0IHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfc3RyZWFtKHNtKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICBzZWxmLl93cml0ZShzbS5yZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYg");
    sb.append("KCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgIGlmICgnZmFpbHVyZScgaW4gc20ucmVzcG9u");
    sb.append("ZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuZmFpbHVyZShyZXNwb25zZS5yZWFzb24pOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBzZWxmLm9ucmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZSkgewogICAgICAgIGlmICgnbmV4dCcg");
    sb.append("aW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIubmV4dChyZXNwb25zZS5yZXNw");
    sb.append("b25zZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5kb25lKSB7CiAgICAgICAg");
    sb.append("aWYgKCdjb21wbGV0ZScgaW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuY29t");
    sb.append("cGxldGUoKTsKICAgICAgICB9CiAgICAgICAgc2VsZi5vbnJlY29ubmVjdC5kZWxldGUoc20uaWQpOwog");
    sb.append("ICAgICB9CiAgICB9KTsKICAgIHNlbGYub25yZWNvbm5lY3Quc2V0KHNtLmlkLCBzbSk7CiAgICBzbS5f");
    sb.append("X3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oc20pOwogICAg");
    sb.append("fTsKICAgIHJldHVybiBzbTsKICB9CgogIF9faWQoKSB7CiAgICB0aGlzLm5leHRJZCsrOwogICAgcmV0");
    sb.append("dXJuIHRoaXMubmV4dElkOwogIH0KCiAgLyoqW0JFR0lOLUlOVk9LRV0qKi8KICBJbml0U2V0dXBBY2Nv");
    sb.append("dW50KGVtYWlsLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9");
    sb.append("IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklk");
    sb.append("LAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpbml0");
    sb.append("L3NldHVwLWFjY291bnQiLCAiaWQiOnBhcklkLCAiZW1haWwiOiBlbWFpbH0KICAgIH0pOwogIH0KICBJ");
    sb.append("bml0Q29udmVydEdvb2dsZVVzZXIoYWNjZXNzVG9rZW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6ImluaXQvY29udmVydC1nb29nbGUtdXNlciIsICJpZCI6cGFySWQsICJh");
    sb.append("Y2Nlc3MtdG9rZW4iOiBhY2Nlc3NUb2tlbn0KICAgIH0pOwogIH0KICBJbml0Q29tcGxldGVBY2NvdW50");
    sb.append("KGVtYWlsLCByZXZva2UsIGNvZGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6ImluaXQvY29tcGxldGUtYWNjb3VudCIsICJpZCI6cGFySWQsICJlbWFpbCI6IGVtYWlsLCAi");
    sb.append("cmV2b2tlIjogcmV2b2tlLCAiY29kZSI6IGNvZGV9CiAgICB9KTsKICB9CiAgRGVpbml0KGlkZW50aXR5");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkZWluaXQiLCAiaWQi");
    sb.append("OnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBBY2NvdW50U2V0UGFzc3dv");
    sb.append("cmQoaWRlbnRpdHksIHBhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJt");
    sb.append("ZXRob2QiOiJhY2NvdW50L3NldC1wYXNzd29yZCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50");
    sb.append("aXR5LCAicGFzc3dvcmQiOiBwYXNzd29yZH0KICAgIH0pOwogIH0KICBBY2NvdW50R2V0UGF5bWVudFBs");
    sb.append("YW4oaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFy");
    sb.append("SWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFj");
    sb.append("Y291bnQvZ2V0LXBheW1lbnQtcGxhbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQog");
    sb.append("ICAgfSk7CiAgfQogIEFjY291bnRMb2dpbihlbWFpbCwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFjY291bnQvbG9naW4iLCAiaWQiOnBhcklkLCAiZW1h");
    sb.append("aWwiOiBlbWFpbCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgUHJvYmUoaWRlbnRp");
    sb.append("dHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InByb2JlIiwgImlk");
    sb.append("IjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgU3RhdHMocmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InN0YXRzIiwgImlkIjpwYXJJZH0K");
    sb.append("ICAgIH0pOwogIH0KICBJZGVudGl0eUhhc2goaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImlkZW50aXR5L2hhc2giLCAiaWQiOnBhcklkLCAiaWRlbnRpdHki");
    sb.append("OiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBJZGVudGl0eVN0YXNoKGlkZW50aXR5LCBuYW1lLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpZGVudGl0eS9zdGFzaCIsICJp");
    sb.append("ZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibmFtZSI6IG5hbWV9CiAgICB9KTsKICB9CiAg");
    sb.append("U3BhY2VDcmVhdGUoaWRlbnRpdHksIHNwYWNlLCB0ZW1wbGF0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAg");
    sb.append("ICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2UvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5");
    sb.append("IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAidGVtcGxhdGUiOiB0ZW1wbGF0ZX0KICAgIH0pOwog");
    sb.append("IH0KICBTcGFjZURlbGV0ZShpZGVudGl0eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL2RlbGV0ZSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlk");
    sb.append("ZW50aXR5LCAic3BhY2UiOiBzcGFjZX0KICAgIH0pOwogIH0KICBTcGFjZVJlZmxlY3QoaWRlbnRpdHks");
    sb.append("IHNwYWNlLCBrZXksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFy");
    sb.append("SWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNw");
    sb.append("YWNlL3JlZmxlY3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3Bh");
    sb.append("Y2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgU3BhY2VMaXN0KGlkZW50aXR5LCBtYXJrZXIsIGxp");
    sb.append("bWl0LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2Uv");
    sb.append("bGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibWFya2VyIjogbWFya2VyLCAi");
    sb.append("bGltaXQiOiBsaW1pdH0KICAgIH0pOwogIH0KICBQdXNoUmVnaXN0ZXIoaWRlbnRpdHksIGRvbWFpbiwg");
    sb.append("c3Vic2NyaXB0aW9uLCBkZXZpY2VJbmZvLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJwdXNoL3JlZ2lzdGVyIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHks");
    sb.append("ICJkb21haW4iOiBkb21haW4sICJzdWJzY3JpcHRpb24iOiBzdWJzY3JpcHRpb24sICJkZXZpY2UtaW5m");
    sb.append("byI6IGRldmljZUluZm99CiAgICB9KTsKICB9CiAgRG9tYWluUmVmbGVjdChpZGVudGl0eSwgZG9tYWlu");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb21haW4vcmVmbGVj");
    sb.append("dCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWlufQogICAg");
    sb.append("fSk7CiAgfQogIERvbWFpbkdldFZhcGlkUHVibGljS2V5KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9nZXQtdmFwaWQtcHVibGlj");
    sb.append("LWtleSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWlufQog");
    sb.append("ICAgfSk7CiAgfQogIERvY3VtZW50QXV0aG9yaXphdGlvbihzcGFjZSwga2V5LCBtZXNzYWdlLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemF0");
    sb.append("aW9uIiwgImlkIjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJtZXNzYWdlIjogbWVz");
    sb.append("c2FnZX0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6YXRpb25Eb21haW4oZG9tYWluLCBtZXNz");
    sb.append("YWdlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAg");
    sb.append("ICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9h");
    sb.append("dXRob3JpemF0aW9uLWRvbWFpbiIsICJpZCI6cGFySWQsICJkb21haW4iOiBkb21haW4sICJtZXNzYWdl");
    sb.append("IjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZShzcGFjZSwga2V5LCB1c2Vy");
    sb.append("bmFtZSwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("ImRvY3VtZW50L2F1dGhvcml6ZSIsICJpZCI6cGFySWQsICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5");
    sb.append("LCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAg");
    sb.append("RG9jdW1lbnRBdXRob3JpemVEb21haW4oZG9tYWluLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS1kb21h");
    sb.append("aW4iLCAiaWQiOnBhcklkLCAiZG9tYWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBh");
    sb.append("c3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemVXaXRoUmVzZXQo");
    sb.append("c3BhY2UsIGtleSwgdXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS13aXRoLXJlc2V0");
    sb.append("IiwgImlkIjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJ1c2VybmFtZSI6IHVzZXJu");
    sb.append("YW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAg");
    sb.append("IH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZURvbWFpbldpdGhSZXNldChkb21haW4sIHVzZXJuYW1l");
    sb.append("LCBwYXNzd29yZCwgbmV3X3Bhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemUtZG9tYWluLXdpdGgtcmVzZXQiLCAiaWQiOnBhcklk");
    sb.append("LCAiZG9tYWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dv");
    sb.append("cmQsICJuZXdfcGFzc3dvcmQiOiBuZXdfcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRDcmVh");
    sb.append("dGUoaWRlbnRpdHksIHNwYWNlLCBrZXksIGVudHJvcHksIGFyZywgcmVzcG9uZGVyKSB7CiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAg");
    sb.append("ICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50");
    sb.append("aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZW50cm9weSI6IGVudHJv");
    sb.append("cHksICJhcmciOiBhcmd9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRMaXN0KGlkZW50aXR5LCBzcGFjZSwg");
    sb.append("bWFya2VyLCBsaW1pdCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFy");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBp");
    sb.append("ZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhv");
    sb.append("ZCI6ImRvY3VtZW50L2xpc3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNl");
    sb.append("Ijogc3BhY2UsICJtYXJrZXIiOiBtYXJrZXIsICJsaW1pdCI6IGxpbWl0fQogICAgfSk7CiAgfQogIE1l");
    sb.append("c3NhZ2VEaXJlY3RTZW5kKGlkZW50aXR5LCBzcGFjZSwga2V5LCBjaGFubmVsLCBtZXNzYWdlLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJtZXNzYWdlL2RpcmVjdC1zZW5k");
    sb.append("IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijog");
    sb.append("a2V5LCAiY2hhbm5lbCI6IGNoYW5uZWwsICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBN");
    sb.append("ZXNzYWdlRGlyZWN0U2VuZE9uY2UoaWRlbnRpdHksIHNwYWNlLCBrZXksIGRlZHVwZSwgY2hhbm5lbCwg");
    sb.append("bWVzc2FnZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBz");
    sb.append("ZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoibWVzc2Fn");
    sb.append("ZS9kaXJlY3Qtc2VuZC1vbmNlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFj");
    sb.append("ZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZGVkdXBlIjogZGVkdXBlLCAiY2hhbm5lbCI6IGNoYW5uZWws");
    sb.append("ICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBDb25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5");
    sb.append("LCBzcGFjZSwga2V5LCB2aWV3ZXJTdGF0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJl");
    sb.append("YW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6ImNvbm5lY3Rpb24vY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAidmlld2VyLXN0YXRlIjogdmlld2Vy");
    sb.append("U3RhdGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIp");
    sb.append("IHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwK");
    sb.append("ICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3");
    sb.append("b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2Vy");
    sb.append("bmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19w");
    sb.append("YXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5u");
    sb.append("ZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAog");
    sb.append("ICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhv");
    sb.append("ZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJj");
    sb.append("aGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQs");
    sb.append("ICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5j");
    sb.append("dGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0");
    sb.append("U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJ");
    sb.append("ZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUi");
    sb.append("OiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEz");
    sb.append("ODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUs");
    sb.append("IHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjog");
    sb.append("c3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0");
    sb.append("ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3Rh");
    sb.append("dGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBDb25uZWN0aW9u");
    sb.append("Q3JlYXRlVmlhRG9tYWluKGlkZW50aXR5LCBkb21haW4sIHZpZXdlclN0YXRlLCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiBy");
    sb.append("ZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiY29ubmVjdGlvbi9jcmVhdGUtdmlhLWRv");
    sb.append("bWFpbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAi");
    sb.append("dmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBt");
    sb.append("ZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9zZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwg");
    sb.append("Im1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVu");
    sb.append("Y3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAg");
    sb.append("ICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAg");
    sb.append("ICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWQsICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwg");
    sb.append("Im5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2Vu");
    sb.append("ZE9uY2U6IGZ1bmN0aW9uKGNoYW5uZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAg");
    sb.append("ICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1l");
    sb.append("c3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0");
    sb.append("aW9uKHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAg");
    sb.append("IHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRl");
    sb.append("cjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nh");
    sb.append("bi1hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAg");
    sb.append("fSwKICAgICAgYXR0YWNoOiBmdW5jdGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNp");
    sb.append("emUsIGRpZ2VzdE1kNSwgZGlnZXN0U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3Vi");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDog");
    sb.append("c3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6");
    sb.append("IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJ");
    sb.append("ZCwgImFzc2V0LWlkIjogYXNzZXRJZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUi");
    sb.append("OiBjb250ZW50VHlwZSwgInNpemUiOiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2Vz");
    sb.append("dC1zaGEzODQiOiBkaWdlc3RTaGEzODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTog");
    sb.append("ZnVuY3Rpb24odmlld2VyU3RhdGUsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwK");
    sb.append("ICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRo");
    sb.append("b2Q6ICJjb25uZWN0aW9uL3VwZGF0ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmll");
    sb.append("d2VyLXN0YXRlIjogdmlld2VyU3RhdGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVu");
    sb.append("Y3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAg");
    sb.append("ICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9u");
    sb.append("ZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24v");
    sb.append("ZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAg");
    sb.append("IH0pOwogIH0KICBEb2N1bWVudHNIYXNoUGFzc3dvcmQocGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50cy9oYXNoLXBhc3N3b3JkIiwgImlkIjpw");
    sb.append("YXJJZCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgQmlsbGluZ0Nvbm5lY3Rpb25D");
    sb.append("cmVhdGUoaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAg");
    sb.append("aWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRo");
    sb.append("b2QiOiJiaWxsaW5nLWNvbm5lY3Rpb24vY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRl");
    sb.append("bnRpdHl9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIp");
    sb.append("IHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwK");
    sb.append("ICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3");
    sb.append("b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2Vy");
    sb.append("bmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19w");
    sb.append("YXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5u");
    sb.append("ZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAog");
    sb.append("ICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhv");
    sb.append("ZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJj");
    sb.append("aGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQs");
    sb.append("ICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5j");
    sb.append("dGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0");
    sb.append("U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJ");
    sb.append("ZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUi");
    sb.append("OiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEz");
    sb.append("ODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUs");
    sb.append("IHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjog");
    sb.append("c3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0");
    sb.append("ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3Rh");
    sb.append("dGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBBdHRhY2htZW50");
    sb.append("U3RhcnQoaWRlbnRpdHksIHNwYWNlLCBrZXksIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgcmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImF0dGFjaG1lbnQvc3RhcnQiLCAi");
    sb.append("aWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXks");
    sb.append("ICJmaWxlbmFtZSI6IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29udGVudFR5cGV9LAogICAgICBh");
    sb.append("cHBlbmQ6IGZ1bmN0aW9uKGNodW5rTWQ1LCBiYXNlNjRCeXRlcywgc3ViUmVzcG9uZGVyKSB7CiAgICAg");
    sb.append("ICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAg");
    sb.append("ICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvYXBwZW5kIiwgaWQ6IHN1YklkLCAidXBsb2Fk");
    sb.append("IjpwYXJJZCwgImNodW5rLW1kNSI6IGNodW5rTWQ1LCAiYmFzZTY0LWJ5dGVzIjogYmFzZTY0Qnl0ZXN9");
    sb.append("CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGZpbmlzaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvZmluaXNoIiwgaWQ6IHN1YklkLCAi");
    sb.append("dXBsb2FkIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQogIEF0dGFjaG1lbnRT");
    sb.append("dGFydEJ5RG9tYWluKGlkZW50aXR5LCBkb21haW4sIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgcmVzcG9u");
    sb.append("ZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("IHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3Bv");
    sb.append("bmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImF0dGFjaG1lbnQvc3RhcnQt");
    sb.append("YnktZG9tYWluIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21h");
    sb.append("aW4sICJmaWxlbmFtZSI6IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29udGVudFR5cGV9LAogICAg");
    sb.append("ICBhcHBlbmQ6IGZ1bmN0aW9uKGNodW5rTWQ1LCBiYXNlNjRCeXRlcywgc3ViUmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAg");
    sb.append("ICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvYXBwZW5kIiwgaWQ6IHN1YklkLCAidXBs");
    sb.append("b2FkIjpwYXJJZCwgImNodW5rLW1kNSI6IGNodW5rTWQ1LCAiYmFzZTY0LWJ5dGVzIjogYmFzZTY0Qnl0");
    sb.append("ZXN9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGZpbmlzaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVy");
    sb.append("KSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVf");
    sb.append("cnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIs");
    sb.append("CiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvZmluaXNoIiwgaWQ6IHN1Yklk");
    sb.append("LCAidXBsb2FkIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQoKICAvKipbRU5E");
    sb.append("LUlOVk9LRV0qKi8KfQoKdmFyIEFkYW1hID0gewogIFByb2R1Y3Rpb246ICJhd3MtdXMtZWFzdC0yLmFk");
    sb.append("YW1hLXBsYXRmb3JtLmNvbSIsCiAgQmV0YTogImJldGEuYWRhbWEtcGxhdGZvcm0uY29tIiwKICBDb25u");
    sb.append("ZWN0aW9uOiBXZWJTb2NrZXRBZGFtYUNvbm5lY3Rpb24KfTsK");
    return sb.toString();
  }
  public static final String WORKER = new String(Base64.getDecoder().decode(make_worker()), StandardCharsets.UTF_8);
  private static String make_worker() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyogQWRhbWEgd29ya2VyOiBoYW5kbGUgc2ltcGxlIHB1c2ggbm90aWZpY2F0aW9ucyAqLwoKY29uc29s");
    sb.append("ZS5sb2coImFkYW1hIHdvcmtlciBzdGFydGVkIik7CnNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaCcs");
    sb.append("IGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmRhdGEpIHsKICAgIHZhciBqc29uID0gZXZlbnQu");
    sb.append("ZGF0YS5qc29uKCk7CiAgICBpZiAoanNvbikgewogICAgICBjb25zb2xlLmxvZyhqc29uKTsKICAgICAg");
    sb.append("dmFyIHB1c2hUb2tlbiA9ICJOQSI7CiAgICAgIGlmICgnQHB0JyBpbiBqc29uKSB7CiAgICAgICAgcHVz");
    sb.append("aFRva2VuID0ganNvblsnQHB0J107CiAgICAgIH0KICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAg");
    sb.append("Ym9keToganNvbi5ib2R5ID8ganNvbi5ib2R5IDogIkdlbmVyaWMgUHVzaCBCb2R5IiwKICAgICAgfTsK");
    sb.append("ICAgICAgaWYgKGpzb24uaWNvbikgewogICAgICAgIG9wdGlvbnMuaWNvbiA9IGpzb24uaWNvbjsKICAg");
    sb.append("ICAgfQogICAgICB2YXIgc2hvdyA9IHRydWU7CiAgICAgIGlmIChqc29uLmhpZGUpIHsKICAgICAgICBz");
    sb.append("aG93ID0gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgaWYgKGpzb24udXJs");
    sb.append("KSB7CiAgICAgICAgZGF0YS51cmwgPSBqc29uLnVybDsKICAgICAgfQogICAgICBvcHRpb25zLmRhdGEg");
    sb.append("PSBkYXRhOwogICAgICBpZiAoc2hvdykgewogICAgICAgIGV2ZW50LndhaXRVbnRpbChzZWxmLnJlZ2lz");
    sb.append("dHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKGpzb24udGl0bGUgPyBqc29uLnRpdGxlIDogIkdlbmVyaWMg");
    sb.append("UHVzaCBUaXRsZSIsIG9wdGlvbnMpKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mKGpzb24uYmFkZ2Up");
    sb.append("ID09ICJudW1iZXIiICYmIG5hdmlnYXRvci5zZXRBcHBCYWRnZSkgewogICAgICAgIHRyeSB7CiAgICAg");
    sb.append("ICAgICBldmVudC53YWl0VW50aWwobmF2aWdhdG9yLnNldEFwcEJhZGdlKGpzb24uYmFkZ2UpKTsKICAg");
    sb.append("ICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgZXZlbnQud2FpdFVu");
    sb.append("dGlsKGZldGNoKHNlbGYubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5sb2NhdGlvbi5ob3N0");
    sb.append("ICsgIi9+cHQvIiArIHB1c2hUb2tlbiwgewogICAgICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgICAg");
    sb.append("IGhlYWRlcnM6IHt9LAogICAgICAgICAgYm9keTogcHVzaFRva2VuCiAgICAgICAgfSkpOwogICAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICAgIH0KICAgIH0KICB9Cn0pOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdub3RpZmljYXRpb25j");
    sb.append("bGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50Lm5vdGlmaWNhdGlvbiAmJiBldmVudC5u");
    sb.append("b3RpZmljYXRpb24uZGF0YSAmJiBldmVudC5ub3RpZmljYXRpb24uZGF0YS51cmwpIHsKICAgIHZhciB1");
    sb.append("cmwgPSBzZWxmLmxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHNlbGYubG9jYXRpb24uaG9zdCArIGV2");
    sb.append("ZW50Lm5vdGlmaWNhdGlvbi5kYXRhLnVybDsKICAgIHZhciBob21lID0gc2VsZi5sb2NhdGlvbi5wcm90");
    sb.append("b2NvbCArICIvLyIgKyBzZWxmLmxvY2F0aW9uLmhvc3Q7CiAgICBldmVudC5ub3RpZmljYXRpb24uY2xv");
    sb.append("c2UoKTsgLy8gQW5kcm9pZCBuZWVkcyBleHBsaWNpdCBjbG9zZS4KICAgIGV2ZW50LndhaXRVbnRpbCgK");
    sb.append("ICAgICAgY2xpZW50cy5tYXRjaEFsbCh7dHlwZTogJ3dpbmRvdyd9KS50aGVuKCB3YyA9PiB7CiAgICAg");
    sb.append("ICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHdpbmRvdy90YWIgb3BlbiB3aXRoIHRoZSB0");
    sb.append("YXJnZXQgVVJMCiAgICAgICAgdmFyIGNsaWVudFdpdGhQcmVmaXggPSBudWxsOwogICAgICAgIHZhciBj");
    sb.append("bGllbnRXaXRoSG9tZSA9IG51bGw7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Yy5sZW5ndGg7");
    sb.append("IGkrKykgewogICAgICAgICAgdmFyIGNsaWVudCA9IHdjW2ldOwogICAgICAgICAgY29uc29sZS5sb2co");
    sb.append("ImNsaWVudDoiICsgY2xpZW50LnVybCArICI7IiArIHVybCk7CiAgICAgICAgICBpZiAoY2xpZW50LnVy");
    sb.append("bCA9PT0gdXJsICYmICdmb2N1cycgaW4gY2xpZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjbGllbnQu");
    sb.append("Zm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjbGllbnQudXJsLnN0YXJ0c1dpdGgodXJs");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoUHJlZml4ID0g");
    sb.append("Y2xpZW50OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNsaWVudC51cmwuc3RhcnRzV2l0aChob21l");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoSG9tZSA9IGNs");
    sb.append("aWVudDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNsaWVudFdpdGhQcmVmaXggIT0g");
    sb.append("bnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpwcmVmaXg6IiArIHVybCk7CiAgICAgICAg");
    sb.append("ICByZXR1cm4gY2xpZW50V2l0aFByZWZpeC5uYXZpZ2F0ZSh1cmwpOwogICAgICAgIH0KICAgICAgICBp");
    sb.append("ZiAoY2xpZW50V2l0aEhvbWUgIT0gbnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpob21l");
    sb.append("OiIgKyB1cmwpOwogICAgICAgICAgcmV0dXJuIGNsaWVudFdpdGhIb21lLm5hdmlnYXRlKHVybCk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmIChjbGllbnRzLm9wZW5XaW5kb3cpIHsKICAgICAgICAgIGNvbnNvbGUu");
    sb.append("bG9nKCJvcGVuOm5ldzoiICsgdXJsKTsKICAgICAgICAgIHJldHVybiBjbGllbnRzLm9wZW5XaW5kb3co");
    sb.append("dXJsKTsKICAgICAgICB9CiAgICAgIH0pCiAgICApOwogIH0KfSk7");
    return sb.toString();
  }
}
