/*
* Adama Platform and Language
* Copyright (C) 2021 - 2023 by Adama Platform Initiative, LLC
* 
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.
* 
* You should have received a copy of the GNU Affero General Public License
* along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/
package org.adamalang.devbox;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class JavaScriptResourcesRaw {
  public static final String TREE = new String(Base64.getDecoder().decode(make_tree()), StandardCharsets.UTF_8);
  private static String make_tree() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIGEgc2ltcGxpZmllZCBwdWIvc3ViIGRpZmZlcmVudGlhbCB0cmVlICovCmZ1bmN0aW9uIEFkYW1h");
    sb.append("VHJlZSgpIHsKICB2YXIgaWQgPSAwOwoKICB2YXIgcm9vdCA9IHt9OwogIHZhciBhbGxfc3Vic2NyaXB0");
    sb.append("aW9ucyA9IHt9OwogIHZhciBzZXR0bGVJZCA9IDA7CiAgdmFyIHNldHRsZW1lbnRzID0ge307CgogIC8v");
    sb.append("IGludm9rZSBhbGwgdGhlIHNldHRsZSBzdWJzY3JpcHRpb25zCiAgdmFyIHNldHRsZSA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgdmFyIGF4ZSA9IFtdOwogICAgZm9yICh2YXIgayBpbiBzZXR0bGVtZW50cykgewogICAg");
    sb.append("ICB2YXIgcmVzdWx0ID0gc2V0dGxlbWVudHNba10oKTsKICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAg");
    sb.append("ICAvLyBpZiB0aGUgcmVzdWx0IGlzbid0IHRydWUsIHRoZW4gdW5zdWJzY3JpYmUKICAgICAgICBheGUu");
    sb.append("cHVzaChrKTsKICAgICAgfQogICAgfQogICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgZGVsZXRlIHNldHRsZW1lbnRzW2tdOwogICAgfQogIH07CgogIHZhciBjbG9uZV9v");
    sb.append("YmplY3QgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7CiAgICAg");
    sb.append("IHZhciBuZXh0ID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2JqLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgbmV4dC5wdXNoKGNsb25lX29iamVjdChvYmpba10pKTsKICAgICAgfQogICAgICByZXR1");
    sb.append("cm4gbmV4dDsKICAgIH0gZWxzZSBpZiAodHlwZW9mIChvYmopID09ICJvYmplY3QiKSB7CiAgICAgIHZh");
    sb.append("ciBuZXh0ID0ge307CiAgICAgIGZvciAoa2V5IGluIG9iaikgewogICAgICAgIGlmIChrZXlbMF0gPT0g");
    sb.append("IiMiIHx8IGtleSA9PSAiX19rZXkiIHx8IGtleSA9PSAiQG8iIHx8IGtleSA9PSAiQHMiKSBjb250aW51");
    sb.append("ZTsKICAgICAgICBuZXh0W2tleV0gPSBjbG9uZV9vYmplY3Qob2JqW2tleV0pOwogICAgICB9CiAgICAg");
    sb.append("IHJldHVybiBuZXh0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwoKICB0");
    sb.append("aGlzLm51a2UgPSBmdW5jdGlvbiAoKSB7CiAgICBhbGxfc3Vic2NyaXB0aW9ucyA9IHt9OwogIH07Cgog");
    sb.append("IHRoaXMuY29weSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBjbG9uZV9vYmplY3Qocm9vdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdHIgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocm9v");
    sb.append("dCk7CiAgfTsKCiAgdGhpcy5yYXcgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcm9vdDsKICB9OwoK");
    sb.append("ICAvLyBmaWx0ZXIgdGhlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIG9uZXMgdGhhdCBoYXZlIHRoZSBrZXkK");
    sb.append("ICB2YXIgc3ViID0gZnVuY3Rpb24gKHMsIGtleSkgewogICAgLy8gaWYgd2UgaGF2ZSBub3RoaW5nLCB0");
    sb.append("aGVuIHdlIHJldHVybiBub3RoaW5nCiAgICBpZiAocy5sZW5ndGggPT0gMCkgewogICAgICByZXR1cm4g");
    sb.append("czsKICAgIH0KICAgIC8vIG1ha2UgYSBuZXcgYXJyYXkKICAgIHZhciBuID0gW107CiAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IHMubGVuZ3RoOyBrKyspIHsgLy8gc3VjaCB0aGF0IGV2ZXJ5IGVsZW1lbnQKICAg");
    sb.append("ICAgaWYgKGtleSBpbiBzW2tdKSB7IC8vIHdoaWNoIGNvbnRhaW5zIHRoZSBrZXkKICAgICAgICBuLnB1");
    sb.append("c2goc1trXVtrZXldKTsgLy8gaXMgYWRkZWQgdG8gdGhlIG5ldyBhcnJheQogICAgICB9CiAgICB9CiAg");
    sb.append("ICByZXR1cm4gbjsKICB9OwoKICAvLyBmaXJlIGV2ZW50cyBhdCB0aGUgY3VycmVudCBzdWJzY3JpcHRp");
    sb.append("b24KICB2YXIgZmlyZSA9IGZ1bmN0aW9uIChzLCB2YWx1ZSwgZXZlbnRzKSB7CiAgICAvLyBmb3IgZWFj");
    sb.append("aCBzdWJzY3JpcHRpb24KICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgewogICAg");
    sb.append("ICB2YXIgdiA9IHNbal07CiAgICAgIC8vIGlmIGl0IGhhcyBldmVudHMKICAgICAgaWYgKCJAZSIgaW4g");
    sb.append("dikgewogICAgICAgIC8vIGZpcmUgZWFjaCBldmVudAogICAgICAgIHZhciBldnRzID0gdlsiQGUiXTsK");
    sb.append("ICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV2dHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGV2");
    sb.append("ZW50cy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5mKHRoaXMudik7CiAgICAgICAg");
    sb.append("ICB9LmJpbmQoeyBmOiBldnRzW2tdLCB2OiB2YWx1ZSB9KSk7CiAgICAgICAgfQogICAgICB9CiAgICB9");
    sb.append("CiAgfTsKCiAgdmFyIHdlYXZlID0gZnVuY3Rpb24gKHMsIGNhbGxiYWNrLCBrZXkpIHsKICAgIGlmIChB");
    sb.append("cnJheS5pc0FycmF5KGNhbGxiYWNrKSkgewogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhbGxiYWNr");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgd2VhdmUocywgY2FsbGJhY2tba10sIGtleSk7CiAgICAgIH0K");
    sb.append("ICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxsYmFjaykgPT0gImZ1bmN0aW9uIikgewogICAgICBpZiAo");
    sb.append("IShrZXkgaW4gcykpIHsKICAgICAgICBzW2tleV0gPSB7fTsKICAgICAgfQogICAgICB2YXIgc2sgPSBz");
    sb.append("W2tleV07CiAgICAgIGlmICghKCJAZSIgaW4gc2spKSB7CiAgICAgICAgc2tbIkBlIl0gPSBbY2FsbGJh");
    sb.append("Y2tdOwogICAgICB9IGVsc2UgewogICAgICAgIHNrWyJAZSJdLnB1c2goY2FsbGJhY2spOwogICAgICB9");
    sb.append("CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09ICJvYmplY3QiKSB7CiAgICAgIGlmICgh");
    sb.append("KGtleSBpbiBzKSkgewogICAgICAgIHNba2V5XSA9IHt9OwogICAgICB9CiAgICAgIHZhciBzayA9IHNb");
    sb.append("a2V5XTsKICAgICAgZm9yICh2YXIgY2sgaW4gY2FsbGJhY2spIHsKICAgICAgICBpZiAoY2sgPT0gIkBl");
    sb.append("IikgewogICAgICAgICAgd2VhdmUocywgY2FsbGJhY2tbY2tdLCBrZXkpOwogICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICB3ZWF2ZShzaywgY2FsbGJhY2tbY2tdLCBjayk7CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICB9CiAgfTsKCiAgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhZGRpdGlvbgogIHZhciBmaXJlX2FkZCA9");
    sb.append("IGZ1bmN0aW9uIChzLCBrZXkpIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykg");
    sb.append("eyAvLyBmb3IgZWFjaCBzdWJzY3JpcHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIisi");
    sb.append("IGluIHYpIHsgLy8gaWYgdGhlIHN1YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gYWRkIG5ldyBv");
    sb.append("YmplY3RzCiAgICAgICAgdmFyIHZhID0gdlsiKyJdOwogICAgICAgIGlmICgiQGUiIGluIHZhKSB7IC8v");
    sb.append("IGlmIGFyZSBldmVudHMgYXNzb2NpYXRlZCB0byAnKycKICAgICAgICAgIHZhciBldmEgPSB2YVsiQGUi");
    sb.append("XTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZhLmxlbmd0aDsgaysrKSB7IC8vIGZvciBl");
    sb.append("YWNoICcrJyBhYmlsaXR5CiAgICAgICAgICAgIHdlYXZlKHYsIGV2YVtrXShrZXkpLCBrZXkpOwogICAg");
    sb.append("ICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIGZpcmUgYSBkZWxldGUgbWVz");
    sb.append("c2FnZSBmb3IgdGhlIGdpdmVuIGtleQogIHZhciBmaXJlX2RlbCA9IGZ1bmN0aW9uIChzLCBrZXkpIHsK");
    sb.append("ICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgeyAvLyBmb3IgZWFjaCBzdWJzY3Jp");
    sb.append("cHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIi0iIGluIHYpIHsgLy8gaWYgdGhlIHN1");
    sb.append("YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gZGVsZXRlIHByaW9yIGtleXMKICAgICAgICB2YXIg");
    sb.append("dmEgPSB2WyItIl07CiAgICAgICAgaWYgKCJAZSIgaW4gdmEpIHsgLy8gaWYgYXJlIGV2ZW50cyBhc3Nv");
    sb.append("Y2lhdGVkIHRvICctJwogICAgICAgICAgdmFyIGV2YSA9IHZhWyJAZSJdOwogICAgICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBldmEubGVuZ3RoOyBrKyspIHsgLy8gZm9yIGVhY2ggJy0nIGFiaWxpdHkKICAg");
    sb.append("ICAgICAgICAgZXZhW2tdKGtleSk7IC8vIGV2YWx1YXRlIHRoZSAnLScKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBhIGRlbGV0ZSBvZiBhIHRyZWUgaGFzIGJlZW4gZGV0");
    sb.append("ZWN0ZWQsIGxldCdzCiAgdmFyIGRlbCA9IGZ1bmN0aW9uIChzKSB7CiAgICAvLyBpZiB0aGUgc3Vic2Ny");
    sb.append("aXB0aW9ucyBpcyBhbiBhcnJheSwgdGhlbiBkZWxldGUgYWxsIGNoaWxkcmVuCiAgICBpZiAoQXJyYXku");
    sb.append("aXNBcnJheShzKSkgewogICAgICB2YXIgbiA9IHMubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IG47IGsrKykgewogICAgICAgIGRlbChzW2tdKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBl");
    sb.append("b2YgKHMpID09ICJvYmplY3QiKSB7IC8vIG90aGVyd2lzZSwgaXRlcmF0ZSBvdmVyIHRoZSBrZXlzCiAg");
    sb.append("ICAgIGZvciAodmFyIGtleSBpbiBzKSB7CiAgICAgICAgaWYgKCEoa2V5ID09ICcrJyB8fCBrZXkgPT0g");
    sb.append("Jy0nKSkgewogICAgICAgICAgdmFyIGNoID0gc1trZXldOwogICAgICAgICAgaWYgKGtleSA9PSAiQGUi");
    sb.append("KSB7IC8vIHdlIGhhdmUgZXZlbnRzLCBzbyBsZXQncyBzZW5kIHRob3NlIGV2ZW50cy4uLgogICAgICAg");
    sb.append("ICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY2hb");
    sb.append("al0obnVsbCk7IC8vIGEgbnVsbCB0byBpbmRpY2F0ZSBkZWxldGlvbgogICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICB9IGVsc2UgeyAvLyByZWN1cnNlIGludG8gdGhlIGNoaWxkIGZpZWxkCiAgICAgICAgICAgIGRl");
    sb.append("bChjaCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gZGVsZXRl");
    sb.append("IHRoZSBnaXZlbiBrZXkgd2l0aGluIHRoZSBzdWJzY3JpcHRpb24KICB2YXIgZGVsX2tleSA9IGZ1bmN0");
    sb.append("aW9uIChzLCBrZXkpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHMpKSB7IC8vIGlmIHdlIGhhdmUgYW4g");
    sb.append("YXJyYXkgb2Ygc3Vic2NyaXB0aW9ucywgdGhlbiBzaW1wbHkgcmVwZWF0CiAgICAgIHZhciBuID0gcy5s");
    sb.append("ZW5ndGg7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgZGVsX2tleShz");
    sb.append("W2tdLCBrZXkpOyAvLyBmb3IgZWFjaCBlbGVtZW50CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9m");
    sb.append("IChzKSA9PSAib2JqZWN0IikgeyAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWJjcmlwdGlvbiBjYWxs");
    sb.append("YmFjawogICAgICBpZiAoa2V5IGluIHMpIHsgLy8gaWYgdGhlIGtleSBpcyBpbiB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIGNhbGxiYWNrCiAgICAgICAgZGVsZXRlIHNba2V5XTsgLy8gZGVsZXRlIGl0CiAgICAgIH0KICAg");
    sb.append("IH0KICB9OwoKICAvLyBtZXJnZSB0aGUgZ2l2ZW4gZGVsdGEgaW50byB0aGUgdHJlZSBhbmQgZmlyZSBz");
    sb.append("dWJzY3JpcHRpb25zIChzKQogIHZhciBtZXJnZSA9IGZ1bmN0aW9uICh0cmVlLCBkZWx0YSwgcywgZXZl");
    sb.append("bnRzLCBvcHRpbWFsKSB7CiAgICBpZiAob3B0aW1hbCAmJiBzLmxlbmd0aCA9PSAwKSB7CiAgICAgIC8v");
    sb.append("IG5vIHZhbHVlIGluIG1lcmdpbmcgYWdhaW5zdCBhIGZhdXggdHJlZSB3aXRob3V0IHN1YnNjcmlwdGlv");
    sb.append("bnMKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yICh2YXIga2V5IGluIGRlbHRhKSB7IC8vIGZvciBl");
    sb.append("YWNoIGJpdCBvZiBkYXRhIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgZUtleSA9ICIjIiArIGtleTsg");
    sb.append("Ly8gY29tcHV0ZSB0aGUgc2VjcmV0IGRhdGEgcGF0aAogICAgICB2YXIgcHJpb3IgPSB0cmVlW2tleV07");
    sb.append("IC8vIGZpbmQgdGhlIHByaW9yIHN0YXRlIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgbmV4dCA9IGRl");
    sb.append("bHRhW2tleV07IC8vIGJyaW5nIHRoZSBjaGFuZ2UgcHJlc2VudCBmb3IgdGhlIGN1cnJlbnQga2V5CiAg");
    sb.append("ICAgIGlmIChuZXh0ID09IG51bGwpIHsgLy8gdGhlIGl0ZW0gaXMgZ29pbmcgcG9vZgogICAgICAgIC8v");
    sb.append("IHRoZSBwcmlvciB2YWx1ZSBpcyBhbiBhcnJheSwgc28gd2UgbWF5IGhhdmUgc29tZSBzcGVjaWFsIHRo");
    sb.append("aW5ncyBhc3NvY2lhdGUgd2l0aCBpdAogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByaW9yKSkgeyAv");
    sb.append("LyBVTlRFU1QKICAgICAgICAgIGlmIChlS2V5IGluIHRyZWUpIHsKICAgICAgICAgICAgZGVsKHN1Yihz");
    sb.append("LCBlS2V5KSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWxldGUgdHJlZVtlS2V5XTsKICAgICAgICB9");
    sb.append("CiAgICAgICAgZGVsKHN1YihzLCBrZXkpKTsgLy8gaXNzdWUgYSBkZWxldGUgZm9yIGFsbCB0aGUgc3Vi");
    sb.append("c2NyaXB0aW9ucyBmb3IgdGhlIGtpZAogICAgICAgIGRlbGV0ZSB0cmVlW2tleV07IC8vIGRlbGV0ZSB0");
    sb.append("aGUgZGF0YSBpbiB0aGUgdHJlZQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0eXBlb2YgKG5leHQp");
    sb.append("ID09ICJvYmplY3QiICYmICFBcnJheS5pc0FycmF5KG5leHQpKSB7IC8vIGlmIHRoZSBkZWx0YSBpcyBh");
    sb.append("biBvYmplY3QKICAgICAgICAgIHZhciBhcnIgPSBBcnJheS5pc0FycmF5KHByaW9yKSB8fCAiQG8iIGlu");
    sb.append("IG5leHQgfHwgIkBzIiBpbiBuZXh0OyAvLyBkZXRlY3QgaWYgd2UgbmVlZCB0byB1c2UgYXJyYXkgbG9n");
    sb.append("aWMKICAgICAgICAgIGlmIChhcnIpIHsgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhcnJheQogICAgICAg");
    sb.append("ICAgICBpZiAoIShrZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSB0cmVlIGhhcyBh");
    sb.append("biBlbXB0eSBhcnJheQogICAgICAgICAgICAgIHRyZWVba2V5XSA9IFtdOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgIGlmICghKGVLZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSBzZWNy");
    sb.append("ZXQgZGF0YSBleGlzdHMgYXMgd2VsbAogICAgICAgICAgICAgIHRyZWVbZUtleV0gPSB7fTsKICAgICAg");
    sb.append("ICAgICAgICBpZiAoIkBvIiBpbiBuZXh0KSB7IC8vIGlmIHdlIGhhdmUgYSBidW5jaCBvZiBrZXlzLCB0");
    sb.append("aGVuIGxldCdzIG1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSB0aGF0IGZvciBtYWtlX2RlbHRhCiAgICAgICAg");
    sb.append("ICAgICAgICB0cmVlW2VLZXldWyJAbyJdID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("ICAgdHJlZVtlS2V5XS5fX2tleSA9IGtleTsgLy8gYW5ub3RhdGUgdGhlIG5ldyBpdGVtIHdpdGggdGhl");
    sb.append("IGdpdmVuIGtleQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBlQmFzZSA9IHRyZWVbZUtleV07");
    sb.append("IC8vIGdldCB0aGUgc2VjcmV0IChhbmQgcmVhbCkgZGF0YSBmb3IgdGhlIG9iamVjdCBpbiBxdWVzdGlv");
    sb.append("bgogICAgICAgICAgICB2YXIgZVN1YiA9IHN1YihzLCBrZXkpOyAvLyBzY29wZSB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIHRvIHRoZSBrZXkKICAgICAgICAgICAgdmFyIG9yZGVyaW5nID0gbnVsbDsgLy8gZGV0ZWN0aW9u");
    sb.append("IG9mIGlmIHdlIGhhdmUgQG8gb3JkZXJpbmcgdG8gcmVvcmRlciB0aGUgdmFsdWVzCiAgICAgICAgICAg");
    sb.append("IHZhciByZXNpemUgPSBudWxsOyAvLyBkZXRlY3Rpb24gb2YgYW4gYXJyYXkgd2l0aG91dCBfX2tleQog");
    sb.append("ICAgICAgICAgICB2YXIgZGVsYXkgPSB7fTsgLy8gd2UgZGVsYXkgYWxsIGV2ZW50cyBzdWNoIHRoYXQg");
    sb.append("dGhlIGFycmF5IGNhbiBiZSBidWlsdCBmb3IgaW5saW5lIG1ha2VfZGVsdGEgY2FsbHMgdG8gd29yawog");
    sb.append("ICAgICAgICAgICBmb3IgKHZhciBhS2V5IGluIG5leHQpIHsgLy8gZm9yIGVhY2ggZmllbGQgd2l0aGlu");
    sb.append("IHRoZSBkaWZmZXJlbmNlCiAgICAgICAgICAgICAgdmFyIHZhbCA9IG5leHRbYUtleV07CiAgICAgICAg");
    sb.append("ICAgICAgaWYgKGFLZXkgPT0gIkBvIikgeyAvLyB0aGUgdmFsdWUgaXMgYSBuZXcgb3JkZXJpbmcgb2Yg");
    sb.append("dGhlIGFycmF5CiAgICAgICAgICAgICAgICBvcmRlcmluZyA9IHZhbDsKICAgICAgICAgICAgICB9IGVs");
    sb.append("c2UgaWYgKGFLZXkgPT0gIkBzIikgeyAvLyB0aGUgdmFsdWUgaXMgYSByZXNpemUgb2YgdGhlIGFycmF5");
    sb.append("CiAgICAgICAgICAgICAgICByZXNpemUgPSB2YWw7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwg");
    sb.append("PT0gbnVsbCkgeyAvLyBkZWxldGUgdGhlIGVsZW1lbnQKICAgICAgICAgICAgICAgIGlmIChhS2V5IGlu");
    sb.append("IGVCYXNlKSB7IC8vIGlmIGl0IGV4aXN0cyB3aXRoaW4gdGhlIHNlY3JldCBrZXkKICAgICAgICAgICAg");
    sb.append("ICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICAgIGRlbChz");
    sb.append("dWIoZVN1YiwgeCkpOyAvLyBpc3N1ZSBkZWxldGVzCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVC");
    sb.append("YXNlW3hdOyAvLyBkZWxldGUgdGhlIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgZGVsX2tleShlU3Vi");
    sb.append("LCB4KTsgLy8gZGVsZXRlIHRoZSBrZXlzIGZyb20gdGhlIG9iamVjdAogICAgICAgICAgICAgICAgICAg");
    sb.append("IGZpcmVfZGVsKGVTdWIsIHgpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHdlIGhhdmUgZGF0YQogICAgICAgICAgICAgICAgaWYgKCEo");
    sb.append("YUtleSBpbiBlQmFzZSkpIHsgLy8gdGhlIGRhdGEgZGlkbid0IGV4aXN0LCBzbyBmaXJlIGFuIGFkZGl0");
    sb.append("aW9uIHRvIGV4dGVuZCB0aGUgc3Vic2NyaXB0aW9ucwogICAgICAgICAgICAgICAgICBmaXJlX2FkZChl");
    sb.append("U3ViLCBhS2V5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBuVmFsID0gbmV4");
    sb.append("dFthS2V5XTsgLy8gZ2V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKG5W");
    sb.append("YWwpID09ICJvYmplY3QiKSB7IC8vIGlmIHRoZSBuZXcgdmFsdWUgaXMgYW4gb2JqZWN0CiAgICAgICAg");
    sb.append("ICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRoZW4gbWFrZSBzdXJlIHRoZSBuZXcg");
    sb.append("aXRlbSBpcyB3aXRoaW4gdGhlIHNlY3JldCB0cmVlCiAgICAgICAgICAgICAgICAgICAgZUJhc2VbYUtl");
    sb.append("eV0gPSB7fTsKICAgICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XS5fX2tleSA9IGFLZXk7CiAgICAg");
    sb.append("ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkg");
    sb.append("ewogICAgICAgICAgICAgICAgICAgIG1lcmdlKGVCYXNlW3hdLCBuZXh0W3hdLCBzdWIoZVN1YiwgeCks");
    sb.append("IGV2ZW50cywgb3B0aW1hbCk7IC8vIHJlY3Vyc2U6IG1lcmdlIHRoZSBkaWZmZXJlbmNlIGludG8gdGhl");
    sb.append("IHNlY3JldCB0cmVlIGFuZCBwdWJsaXNoIHRvIGFsbCBlbGVtZW50IHN1YnNjcmlwdGlvbnMKICAgICAg");
    sb.append("ICAgICAgICAgICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAg");
    sb.append("ICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIHNldCB0aGUg");
    sb.append("dmFsdWUgaW50byB0aGUgdHJlZQogICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XSA9IG5WYWw7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIGRlbGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAg");
    sb.append("ICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAgICAgICAgICAg");
    sb.append("IH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBhbmQgdGVsbCBldmVyeW9uZSB0");
    sb.append("aGUgbmV3IHZhbHVlIGZvciB0aGlzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIHZhciBiZWZvcmUgPSB0cmVlW2tleV07IC8vIHN0YXNoIGEgcG9pbnRlciB0byB0aGUgYXJyYXkK");
    sb.append("ICAgICAgICAgICAgdmFyIGRlbGF5T3JkZXIgPSBbXTsKCiAgICAgICAgICAgIGlmIChvcmRlcmluZyAh");
    sb.append("PSBudWxsKSB7IC8vIGFuIG9yZGVyaW5nIGNoYW5nZSBpcyBoYXBwZW5pbmcKICAgICAgICAgICAgICB2");
    sb.append("YXIgYWZ0ZXIgPSBbXTsgLy8gd2Ugd2lsbCByZWJ1aWxkIHRoZSBhcnJheSBoZXJlCiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOyAvLyBhbmQgcmVjb3JkIHRoZSBrZXlzIGhlcmUKICAgICAgICAgICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IG9yZGVyaW5nLmxlbmd0aDsgaysrKSB7IC8vIGZvciBlYWNoIG9yZGVy");
    sb.append("aW5nIGluc3RydWN0aW9uCiAgICAgICAgICAgICAgICB2YXIgaW5zdHIgPSBvcmRlcmluZ1trXTsKICAg");
    sb.append("ICAgICAgICAgICAgIHZhciB0eXBlX2luc3RyID0gdHlwZW9mIChpbnN0cik7CiAgICAgICAgICAgICAg");
    sb.append("ICBpZiAodHlwZV9pbnN0ciA9PSAic3RyaW5nIiB8fCB0eXBlX2luc3RyID09ICJudW1iZXIiKSB7IC8v");
    sb.append("IGlmIHRoZSBpbnN0cnVjdGlvbiByZWZlcnMgdG8gYW4gaXRlbQogICAgICAgICAgICAgICAgICBhZnRl");
    sb.append("ci5wdXNoKGVCYXNlW2luc3RyXSk7IC8vIHB1c2ggdGhlIGl0ZW0gaW50byB0aGUgbmV3IGFycmF5CiAg");
    sb.append("ICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgaW5zdHIpOyAvLyByZWNvcmQgdGhlIGtleSBvZiB0");
    sb.append("aGUgaXRlbQogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCB0aGUgaW5zdHJ1Y3Rp");
    sb.append("b24gaXMgYSByYW5nZQogICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBpbnN0clswXTsKICAgICAg");
    sb.append("ICAgICAgICAgICAgdmFyIGVuZCA9IGluc3RyWzFdOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBq");
    sb.append("ID0gc3RhcnQ7IGogPD0gZW5kOyBqKyspIHsgLy8gaXRlcmF0ZSBvdmVyIHRoZSByYW5nZSBhbmQgY29w");
    sb.append("eQogICAgICAgICAgICAgICAgICAgIGlmIChiZWZvcmVbal0pIHsKICAgICAgICAgICAgICAgICAgICAg");
    sb.append("IGFmdGVyLnB1c2goYmVmb3JlW2pdKTsgLy8gdGhlIGl0ZW1zIGZyb20gdGhlIHByZXZpb3VzIGNvcHkK");
    sb.append("ICAgICAgICAgICAgICAgICAgICAgIG1zZy5wdXNoKGJlZm9yZVtqXS5fX2tleSk7IC8vIGFuZCBhbm5v");
    sb.append("dGF0ZSB0aGUga2V5cwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWxheU9yZGVyLnB1c2go");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgIn4iKSwgbXNnLCBldmVu");
    sb.append("dHMpOyAvLyB0ZWxsIHN1YnNjcmlwdGlvbnMgYWJvdXQgdGhlIG5ldyBvcmRlcmluZwogICAgICAgICAg");
    sb.append("ICAgIH0pOwogICAgICAgICAgICAgIHRyZWVba2V5XSA9IGFmdGVyOwogICAgICAgICAgICB9IGVsc2Ug");
    sb.append("aWYgKHJlc2l6ZSAhPSBudWxsKSB7IC8vIGFsdGVybmF0aXZlbHksIGFuIGFycmF5IHdpdGhvdXQga2V5");
    sb.append("cyBpcyBiZWluZyByZXNpemVkCiAgICAgICAgICAgICAgdmFyIGFmdGVyID0gW107CiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOwogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcmVzaXplOyBr");
    sb.append("KyspIHsgLy8gd2UgcmVidWlsZCB0aGUgYXJyYXkKICAgICAgICAgICAgICAgIGFmdGVyW2tdID0gZUJh");
    sb.append("c2VbIiIgKyBrXTsKICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgayk7CiAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgIGRlbGF5T3JkZXIucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAg");
    sb.append("ICBmaXJlKHN1YihlU3ViLCAifiIpLCBtc2csIGV2ZW50cyk7IC8vIHRlbGwgc3Vic2NyaXB0aW9ucyBh");
    sb.append("Ym91dCB0aGUgbmV3IG9yZGVyaW5nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdHJlZVtr");
    sb.append("ZXldID0gYWZ0ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChhS2V5IGluIGRlbGF5KSB7");
    sb.append("CiAgICAgICAgICAgICAgZGVsYXlbYUtleV0oYUtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBkZWxheU9yZGVyLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAg");
    sb.append("ZGVsYXlPcmRlcltrXSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpcmUoZVN1YiwgdHJlZVtr");
    sb.append("ZXldLCBldmVudHMpOyAvLyB0ZWxsIGV2ZXJ5b25lIGFib3V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghKGtleSBpbiB0cmVlKSB8fCB0eXBlb2YgKHRyZWVba2V5");
    sb.append("XSkgIT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgICB0cmVlW2tleV0gPSB7fTsKICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICB2YXIgZSA9IHN1YihzLCBrZXkpOwogICAgICAgICAgICBtZXJnZSh0cmVlW2tl");
    sb.append("eV0sIG5leHQsIGUsIGV2ZW50cywgb3B0aW1hbCk7CiAgICAgICAgICAgIGZpcmUoZSwgdHJlZVtrZXld");
    sb.append("LCBldmVudHMpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7IC8vIG5vdCBhbiBvYmplY3QsIHNv");
    sb.append("IGl0IGlzIGEgdmFsdWUKICAgICAgICAgIHRyZWVba2V5XSA9IG5leHQ7IC8vIHN0YXNoIHRoZSBuZXcg");
    sb.append("dmFsdWUKICAgICAgICAgIGZpcmUoc3ViKHMsIGtleSksIG5leHQsIGV2ZW50cyk7IC8vIGFuZCB0ZWxs");
    sb.append("IGV2ZXJ5b25lIGFib3V0IGl0CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmaXJlKHMsIHRyZWUs");
    sb.append("IGV2ZW50cyk7CiAgfTsKCiAgdmFyIGZpcmVfZXZlbnRzID0gZnVuY3Rpb24gKGV2ZW50cykgewogICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBldmVudHMubGVuZ3RoOyBrKyspIHsKICAgICAgZXZlbnRzW2tdKCk7");
    sb.append("CiAgICB9CiAgfTsKCiAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICB0aGlzLnVwZGF0");
    sb.append("ZXMgPSAwOwogIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhKSB7CiAgICB0aGlzLnVwZGF0ZV9p");
    sb.append("bl9wcm9ncmVzcyA9IHRydWU7CiAgICB0aGlzLnVwZGF0ZXMrKzsKICAgIHZhciBhcnIgPSBbXTsgLy8g");
    sb.append("Y29udmVydCB0aGUgc3Vic2NyaXB0aW9ucyBpbnRvIGFuIGFycmF5CiAgICBmb3IgKHZhciBrIGluIGFs");
    sb.append("bF9zdWJzY3JpcHRpb25zKSB7CiAgICAgIGFyci5wdXNoKGFsbF9zdWJzY3JpcHRpb25zW2tdKTsKICAg");
    sb.append("IH0KICAgIHZhciBldmVudHMgPSBbXTsKICAgIG1lcmdlKHJvb3QsIGRlbHRhLCBhcnIsIGV2ZW50cywg");
    sb.append("ZmFsc2UpOyAvLyBleGVjdXRlIHRoZSBtZXJnZSBhbmQgZmlyZSBldmVudHMKICAgIGZpcmVfZXZlbnRz");
    sb.append("KGV2ZW50cyk7CiAgICB3aGlsZSAodGhpcy5zdWJzY3JpYmVfZGVsYXkubGVuZ3RoID4gMCkgewogICAg");
    sb.append("ICB2YXIgY29weSA9IHRoaXMuc3Vic2NyaWJlX2RlbGF5OwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eSA9IFtdOwogICAgICB2YXIgZmxhdCA9IFtdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNvcHku");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICBpZiAoIWNvcHlba10uYWJvcnRlZCkgewogICAgICAgICAgZmxh");
    sb.append("dC5wdXNoKGNvcHlba10uc3ViKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZXZlbnRzID0gW107CiAg");
    sb.append("ICAgIG1lcmdlKHt9LCBtYWtlX29wdGltYWxfZGVsdGEocm9vdCwgZmxhdCksIGZsYXQsIGV2ZW50cywg");
    sb.append("dHJ1ZSk7IC8vIGV4ZWN1dGUgdGhlIG1lcmdlIGFuZCBmaXJlIGV2ZW50cwogICAgICBmaXJlX2V2ZW50");
    sb.append("cyhldmVudHMpOwogICAgfQogICAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICAgIHNl");
    sb.append("dHRsZSgpOwogIH07CgogIC8vIGZpeCB0aGUgY2FsbGJhY2sgc3RydWN0dXJlIGZyb20gdGhlIHVzZXIn");
    sb.append("cyBoYXBweSBsYW5kIHRvIHRoZSByaWdvciBvZiB0aGUgZm9ybWF0IG5lZWRlZAogIHZhciB0cmFuc2Zv");
    sb.append("cm1fY2FsbGJhY2tfaW50b19zdWIgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHN1YikgewogICAgaWYgKEFy");
    sb.append("cmF5LmlzQXJyYXkoY2FsbGJhY2spKSB7IC8vIGlmIHRoZSBjYWxsYmFjayBpcyBhbiBhcnJheSwgdGhl");
    sb.append("biBmbGF0dGVuIHRoZSBhcnJheSBpbnRvIHRoZSBuZXcgb2JqZWN0CiAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgY2FsbGJhY2subGVuZ3RoOyBrKyspIHsKICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50");
    sb.append("b19zdWIoY2FsbGJhY2tba10sIHN1Yik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxs");
    sb.append("YmFjaykgPT0gIm9iamVjdCIpIHsgLy8gb2gsIHRoZSBjYWxsYmFjayBpcyBhbiBvYmplY3QKICAgICAg");
    sb.append("Zm9yICh2YXIga2V5IGluIGNhbGxiYWNrKSB7IC8vIGl0ZXJhdGUgb3ZlciBlYWNoIGtleQogICAgICAg");
    sb.append("IGlmIChrZXkgPT0gIkBlIikgeyAvLyBmb3JjZSB0aGUgZnVuY3Rpb25zIHRvIG1lcmdlIHRvZ2V0aGVy");
    sb.append("CiAgICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIoY2FsbGJhY2tba2V5XSwgc3ViKTsK");
    sb.append("ICAgICAgICB9IGVsc2UgeyAvLyBub3JtYWwgZmxvdwogICAgICAgICAgaWYgKCEoa2V5IGluIHN1Yikp");
    sb.append("IHsgLy8gZGl2ZSBpbnRvIHRoZSBvYmplY3QgYW5kIG1ha2Ugc3VyZSB0aGUgc3Vic2NyaXB0aW9uIGhh");
    sb.append("cyB0aGUgZmllbGQKICAgICAgICAgICAgc3ViW2tleV0gPSB7fTsKICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IHRyYW5zZm9ybV9jYWxsYmFja19pbnRvX3N1YihjYWxsYmFja1trZXldLCBzdWJba2V5XSk7IC8vIHJl");
    sb.append("Y3Vyc2UgYW5kIHBhaXIgdGhlIGV2ZW50cyB0byB0aGUgbmV3IHN1YnNjcmlwdGlvbgogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgKGNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iKSB7IC8v");
    sb.append("IGl0J3MgYSBmdW5jdGlvbgogICAgICBpZiAoISgiQGUiIGluIHN1YikpIHsgLy8gbGV0J3MgZW5zdXJl");
    sb.append("IHRoZXJlIGlzIGFuIGV2ZW50IGxpc3QKICAgICAgICBzdWJbIkBlIl0gPSBbY2FsbGJhY2tdOwogICAg");
    sb.append("ICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIGp1c3QgYWRkIGl0CiAgICAgICAgc3ViWyJAZSJdLnB1c2go");
    sb.append("Y2FsbGJhY2spOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gY29udmVydCB0aGUgdHJlZSB0byBhIGRl");
    sb.append("bHRhOyB0aGlzIHRyZWUgaXMgYXNzdW1lZCB0byBoYXZlIGJlZW4gbWVyZ2VkIGFscmVhZHkKICB2YXIg");
    sb.append("bWFrZV9kZWx0YSA9IGZ1bmN0aW9uIChzdCkgewogICAgdmFyIGRlbHRhID0ge307IC8vIHRoZSBkZWx0");
    sb.append("YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsgaW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhp");
    sb.append("biB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19r");
    sb.append("ZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQogICAgICB2YXIgdiA9IHN0W2tdOwogICAgICBpZiAo");
    sb.append("KCIjIiArIGspIGluIHN0KSB7IC8vIHRoZSByZXN1bHQgaXMgYW4gYXJyYXkKICAgICAgICB2YXIgcHYg");
    sb.append("PSBzdFsnIycgKyBrXTsKICAgICAgICB2YXIgZCA9IHt9OwogICAgICAgIGlmICgiQG8iIGluIHB2KSB7");
    sb.append("IC8vIGFuZCB3ZSBoYXZlIGEgc3BlY2lmaWMgb3JkZXJpbmcgdG8gbWVtb2l6ZQogICAgICAgICAgdmFy");
    sb.append("IG8gPSBbXTsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgeyAvLyBj");
    sb.append("b3B5IHRoZSBlbGVtZW50cyBmcm9tIHRoZSBhcnJheQogICAgICAgICAgICB2YXIgdmogPSB2W2pdOwog");
    sb.append("ICAgICAgICAgICBpZiAodmopIHsKICAgICAgICAgICAgICBkW3ZqLl9fa2V5XSA9IG1ha2VfZGVsdGEo");
    sb.append("dmopOyAvLyB1c2luZyB0aGUgX19rZXkgZW1iZWRkZWQgaW4gdGhlIG9iamVjdAogICAgICAgICAgICAg");
    sb.append("IG8ucHVzaCh2W2pdLl9fa2V5KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZFsi");
    sb.append("QG8iXSA9IG87CiAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlOyByZWNvcmQgdGhlIHNpemUgYXMg");
    sb.append("d2UgcmVjdXJzZQogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7CiAg");
    sb.append("ICAgICAgICAgIGRbIiIgKyBqXSA9IG1ha2VfZGVsdGEocHZbal0pOwogICAgICAgICAgfQogICAgICAg");
    sb.append("ICAgZFsiQHMiXSA9IHYubGVuZ3RoOwogICAgICAgIH0KICAgICAgICBkZWx0YVtrXSA9IGQ7CiAgICAg");
    sb.append("IH0gZWxzZSBpZiAodHlwZW9mICh2KSA9PSAib2JqZWN0IikgeyAvLyBpdCdzIGp1c3QgYW4gb2JqZWN0");
    sb.append("LCBzbyByZWN1cnNlIGRpcmVjdGx5CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHsKICAgICAg");
    sb.append("ICAgIHZhciBkID0ge307CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHYubGVuZ3RoOyBqKysp");
    sb.append("IHsKICAgICAgICAgICAgZFsiIiArIGpdID0gbWFrZV9kZWx0YSh2W2pdKTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIGRbIkBzIl0gPSB2Lmxlbmd0aDsKICAgICAgICAgIGRlbHRhW2tdID0gZDsKICAgICAgICB9");
    sb.append("IGVsc2UgewogICAgICAgICAgZGVsdGFba10gPSBtYWtlX2RlbHRhKHYpOwogICAgICAgIH0KICAgICAg");
    sb.append("fSBlbHNlIHsgLy8gZmluYWxseSwgaXQgaXMgYSB2YWx1ZSBzbyBqdXN0IHNldCBpdAogICAgICAgIGRl");
    sb.append("bHRhW2tdID0gdjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGRlbHRhOwogIH07CiAgdGhpcy5NYWtl");
    sb.append("RGVsdGEgPSBtYWtlX2RlbHRhOwoKICB2YXIgbWFrZV9vcHRpbWFsX2RlbHRhID0gZnVuY3Rpb24oc3Qs");
    sb.append("IHN1YnMpIHsKICAgIHZhciBmaWx0ZXIgPSB7fTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc3Vicy5s");
    sb.append("ZW5ndGg7IGsrKykgewogICAgICB2YXIgcyA9IHN1YnNba107CiAgICAgIGlmICh0eXBlb2YocykgPT0g");
    sb.append("ImZ1bmN0aW9uIikgewogICAgICAgIC8vIGZhbGxiYWNrIHdoZW4gdGhlIGhpZ2ggbGV2ZWwgaXMgYSBm");
    sb.append("dW5jdGlvbiAod2UgbmVlZCBpdCBhbGwhKQogICAgICAgIHJldHVybiBtYWtlX2RlbHRhKHN0KTsKICAg");
    sb.append("ICAgfSBlbHNlIGlmICh0eXBlb2YocykgPT0gIm9iamVjdCIpIHsKICAgICAgICBmb3IgKHZhciBqIGlu");
    sb.append("IHMpIHsKICAgICAgICAgIGZpbHRlcltqXSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAg");
    sb.append("ICB2YXIgbmV3X3N0ID0ge307IC8vIHRoZSBkZWx0YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsg");
    sb.append("aW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhpbiB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09");
    sb.append("ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19rZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQog");
    sb.append("ICAgICBpZiAoayBpbiBmaWx0ZXIpIHsKICAgICAgICBuZXdfc3Rba10gPSBzdFtrXTsKICAgICAgICBp");
    sb.append("ZiAoKCIjIiArIGspIGluIHN0KSB7CiAgICAgICAgICBuZXdfc3RbIiMiICsga10gPSBzdFsiIyIgKyBr");
    sb.append("XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtYWtlX2RlbHRhKG5ld19zdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdWJzY3JpYmVfZGVsYXkgPSBbXTsKCiAgLy8gYHN1YnNjcmliZWAgdGhlIGdpdmVu");
    sb.append("IHN0cnVjdHVyYWwgY2FsbGJhY2sKICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykg");
    sb.append("ewogICAgdmFyIHN1YiA9IHt9OwogICAgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViKGNhbGxiYWNr");
    sb.append("LCBzdWIpOyAgLy8gdHJhbnNmb3JtIHRoZSBjYWxsYmFjayBpbnRvIGEgc2FmZSBjYWxsYmFjawogICAg");
    sb.append("dmFyIFMgPSAiIiArIGlkKys7IC8vIGNyZWF0ZSBhbiBpZCBmb3IgdGhlIHN1YnNjcmlwdGlvbgogICAg");
    sb.append("YWxsX3N1YnNjcmlwdGlvbnNbU10gPSBzdWI7IC8vIHJlY29yZCB0aGUgc3Vic2NyaXB0aW9uCiAgICBp");
    sb.append("ZiAodGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MpIHsKICAgICAgdmFyIHNtID0ge307CiAgICAgIHNtLnN1");
    sb.append("YiA9IHN1YjsKICAgICAgc20uYWJvcnRlZCA9IGZhbHNlOwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eS5wdXNoKHNtKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHNtLmFib3J0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIGRlbGV0ZSBhbGxfc3Vic2NyaXB0aW9uc1tTXTsKICAgICAgfTsKICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHZhciBkZWx0YSA9IG1ha2Vfb3B0aW1hbF9kZWx0YShyb290LCBbc3ViXSk7CiAgICAg");
    sb.append("IHZhciBldmVudHMgPSBbXTsKICAgICAgbWVyZ2Uoe30sIGRlbHRhLCBbc3ViXSwgZXZlbnRzLCB0cnVl");
    sb.append("KTsgLy8gZXhlY3V0ZSB0aGUgY2FsbGJhY2sgbm93IG9uIGEgY2FsbGJhY2sgb2YgYWxsIGRhdGEgdG8g");
    sb.append("ZmlyZSBldmVudHMgYW5kIGZpbGwgdGhlIHN1YnNjcmlwdGlvbiBvYmplY3QKICAgICAgZmlyZV9ldmVu");
    sb.append("dHMoZXZlbnRzKTsKICAgICAgaWYgKHRoaXMudXBkYXRlcyA+IDApIHsKICAgICAgICBzZXR0bGUoKTsK");
    sb.append("ICAgICAgfQogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyAvLyByZXR1cm4gYSBtZXRob2QgdG8gdW5z");
    sb.append("dWJzY3JpYmUKICAgICAgICBkZWxldGUgYWxsX3N1YnNjcmlwdGlvbnNbU107CiAgICAgIH07CiAgICB9");
    sb.append("CiAgfTsKCiAgdGhpcy5hZGRfb25fc2V0dGxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBp");
    sb.append("ZCA9IHNldHRsZUlkKys7CiAgICBzZXR0bGVtZW50c1tpZF0gPSBjYWxsYmFjazsKICB9Owp9");
    return sb.toString();
  }
  public static final String DEBUGGER = new String(Base64.getDecoder().decode(make_debugger()), StandardCharsets.UTF_8);
  private static String make_debugger() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIFRoZSBBbWF6aW5nIEludGVybmFsIERlYnVnZ2VyIGZvciBSeEhUTUwgQ29ubmVjdGlvbiAqLwpB");
    sb.append("ZGFtYS5EZWJ1Z2dlciA9IChmdW5jdGlvbigpIHsKICB2YXIgc2VsZiA9IHt9OwogIHNlbGYuc2hvd24g");
    sb.append("PSBmYWxzZTsKICB2YXIgY29ubmVjdGlvbnMgPSB7fTsKICB2YXIgY3VycmVudCA9IG51bGw7CgogIC8q");
    sb.append("KiBIZWxwZXIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCAqLwogIHZhciBudWtl");
    sb.append("ID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAg");
    sb.append("d2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0g");
    sb.append("cGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwoKICAvKiogSGVscGVyIHwgY3JlYXRlIGEgc2ltcGxl");
    sb.append("IGVsZW1lbnQgd2l0aCB0aGUgZ2l2ZW4gY29udGVudCBhcyB0aGUgaW5uZXJIVE1MICovCiAgdmFyIHNp");
    sb.append("bXBsZSA9IGZ1bmN0aW9uKHRhZywgY29udGVudCkgewogICAgdmFyIGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KHRhZyk7CiAgICBkLmlubmVySFRNTCA9IGNvbnRlbnQ7CiAgICByZXR1cm4gZDsKICB9Cgog");
    sb.append("IHZhciBidXR0b25TdHlsZSA9ICJiYWNrZ3JvdW5kOiMzMzM7IGJvcmRlcjogMXB4IHNvbGlkICNmMDA7");
    sb.append("IGNvbG9yOiNmZmY7IHBhZGRpbmc6M3B4OyBtYXJnaW46M3B4OyBib3JkZXItcmFkaXVzOiAzcHg7IjsK");
    sb.append("ICB2YXIgaW5wdXRTdHlsZSA9ICJiYWNrZ3JvdW5kOiNlZWU7IGNvbG9yOiMwMDA7IjsKICB2YXIgcGx1");
    sb.append("c1NWRyA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9u");
    sb.append("ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjNzdk");
    sb.append("NjU2XCIgc3R5bGU9XCJ3aWR0aDoxOHB4OyBoZWlnaHQ6MThweDtcIj48cGF0aCBzdHJva2UtbGluZWNh");
    sb.append("cD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTEyIDl2Nm0zLTNIOW0xMiAw");
    sb.append("YTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+PC9zdmc+IjsKICB2YXIgbWludXNTVkcgPSAi");
    sb.append("PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3");
    sb.append("Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2YwMFwiIHN0eWxl");
    sb.append("PVwid2lkdGg6MThweDsgaGVpZ2h0OjE4cHg7XCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwi");
    sb.append("IHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk0xNSAxMkg5bTEyIDBhOSA5IDAgMTEtMTggMCA5");
    sb.append("IDkgMCAwMTE4IDB6XCIgLz48L3N2Zz4iOwoKICAvLyB3ZSBhcmUgZ29pbmcgdG8gY3JlYXRlIGEgZG9j");
    sb.append("dW1lbnQKICB2YXIgdmlld0pzb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICB2YXIg");
    sb.append("dmlld0NoYW5uZWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgogIHZpZXdKc29uLnN0");
    sb.append("eWxlID0gImZvbnQtZmFtaWx5OiBcIkpldEJyYWlucyBNb25vXCIsIHNvdXJjZS1jb2RlLXBybywgTWVu");
    sb.append("bG8sIE1vbmFjbywgQ29uc29sYXMsIG1vbm9zcGFjZTsgZm9udC1zaXplOiAxNHB4OyBjb2xvcjogI2Zm");
    sb.append("ZjsgYmFja2dyb3VuZC1jb2xvcjogIzAwMDsgd2lkdGg6MTAwJSIKICB2aWV3Q2hhbm5lbHMuc3R5bGUg");
    sb.append("PSAiZm9udC1mYW1pbHk6IFwiSmV0QnJhaW5zIE1vbm9cIiwgc291cmNlLWNvZGUtcHJvLCBNZW5sbywg");
    sb.append("TW9uYWNvLCBDb25zb2xhcywgbW9ub3NwYWNlOyBmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjZmZmOyBi");
    sb.append("YWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB3aWR0aDoxMDAlIgoKICAvKiogUmVmbGVjdGlvbiB8IGdpdmVu");
    sb.append("IGEgcmVmbGVjdGVkIHR5cGUsIGV4dHJhY3QgdGhlIHN0cnVjdHVyZSB0eXBlICoqLwogIHZhciBleHRy");
    sb.append("YWN0U3RydWN0dXJlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIHR5cGVzKSB7CiAgICBpZiAodHlwZS5uYXR1");
    sb.append("cmUgPT0gInJlYWN0aXZlX3JlZiIgfHwgdHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV9yZWYiKSB7CiAgICAg");
    sb.append("IHJldHVybiBleHRyYWN0U3RydWN0dXJlVHlwZSh0eXBlc1t0eXBlLnJlZl0sIHR5cGVzKTsKICAgIH0K");
    sb.append("ICAgIGlmICh0eXBlLm5hdHVyZSA9PSAicmVhY3RpdmVfcmVjb3JkIiB8fCB0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIHJldHVybiB0eXBlOwogICAgfQogICAgcmV0dXJuIG51bGw7");
    sb.append("CiAgfQoKICAvKiogVHJlZVZpZXcgfCBHaXZlbiBhIHR5cGUgKGFuZCBhIHR5cGUgZm9yZXN0KSBjcmVh");
    sb.append("dGUgYSAnbmFtZWQnIGRvbSBlbGVtZW50CiAgICogIGFsb25nIHdpdGggYW4gdXBkYXRlIGRlbHRhLiBU");
    sb.append("aGUgdXBkYXRlIGRlbHRhIGlzIGEgZnVuY3Rpb25hbCAob3Igc3RydWN0dXJhbCBmdW5jdGlvbmFsKQog");
    sb.append("ICAqICBjbG9zdXJlIHRoYXQgd2lsbCB1cGRhdGUgdGhlIGRvbSBlbGVtZW50IHN1Y2ggdGhhdCBpdCBj");
    sb.append("YW4gYmUgYXR0YWNoZWQgdG8gYW4gQWRhbWEgVHJlZSAqLwogIHZhciBjb252ZXJ0VHlwZVRvRG9tRGVs");
    sb.append("dGEgPSBmdW5jdGlvbih0eXBlLCB0eXBlcykgewogICAgaWYgKHR5cGUubmF0dXJlID09ICJyZWFjdGl2");
    sb.append("ZV9yZWYiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfcmVmIikgewogICAgICAvLyBnbyB0byB0aGUg");
    sb.append("Zm9yZXN0IGFuZCB0dXJuIHRoZSByZWYgaW50byBhIG1hbmlmZXN0ZWQgdHlwZQogICAgICByZXR1cm4g");
    sb.append("Y29udmVydFR5cGVUb0RvbURlbHRhKHR5cGVzW3R5cGUucmVmXSwgdHlwZXMpOwogICAgfQogICAgaWYg");
    sb.append("KHR5cGUubmF0dXJlID09ICJuYXRpdmVfbWF5YmUiIHx8IHR5cGUubmF0dXJlID09ICJyZWFjdGl2ZV9t");
    sb.append("YXliZSIpIHsKICAgICAgLy8gYSBtYXliZSBpcyBqdXN0IGEgd3JhcHBlciBhcm91bmQgYW5vdGhlciB0");
    sb.append("eXBlIHRoYXQgY2FuIG51bGwgb3V0CiAgICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJzcGFuIik7CiAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZS50eXBl");
    sb.append("LCB0eXBlcyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOiBkb20sCiAgICAgICAgbmFtZTogIm1h");
    sb.append("eWJlJmx0OyIgKyByZXN1bHQubmFtZSArICImZ3Q7IiwKICAgICAgICB1cGRhdGU6IFtyZXN1bHQudXBk");
    sb.append("YXRlLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgbnVrZShkb20pOwogICAgICAgICAgaWYgKHZh");
    sb.append("bHVlID09IG51bGwpIHsKICAgICAgICAgICAgZG9tLmlubmVySFRNTCA9ICI8aT5udWxsPC9pPiI7CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb20uYXBwZW5kKHJlc3VsdC5kb20pOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH1dCiAgICAgIH07CiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0gIm5hdGl2");
    sb.append("ZV9saXN0IiB8fCB0eXBlLm5hdHVyZSA9PSAibmF0aXZlX2FycmF5IikgewogICAgICAvLyB0aGlzIGlz");
    sb.append("IHRoZSBtb3N0IGNvbXBsZXggdHlwZSBhcyBpdCByZXF1aXJlcyBhIGRpZmZlcmVudGlhbCBzdHJ1Y3R1");
    sb.append("cmUuCgogICAgICAvLyB3ZSBjcmVhdGUgYSBkdW1teSB0byBnZXQgdGhlIG5hbWUgb2YgdGhlIHR5cGUK");
    sb.append("ICAgICAgdmFyIGR1bW15ID0gY29udmVydFR5cGVUb0RvbURlbHRhKHR5cGUudHlwZSwgdHlwZXMpOwoK");
    sb.append("ICAgICAgLy8gc28sIHdlIGhhdmUgdHdvIGNvbnNpZGVyYXRpb25zLiBGaXJzdCwgaXMgdGhpcyBhIGxp");
    sb.append("c3Qgb2Ygc3RydWN0dXJlcyBPUiBhIGxpc3Qgb2YgdmFsdWVzLgogICAgICB2YXIgcmVjb3JkVHlwZSA9");
    sb.append("IGV4dHJhY3RTdHJ1Y3R1cmVUeXBlKHR5cGUudHlwZSwgdHlwZXMpOwogICAgICBpZiAocmVjb3JkVHlw");
    sb.append("ZSAhPSBudWxsKSB7CiAgICAgICAgLy8gaXQgaXMgYSBsaXN0IG9mIHN0cnVjdHVyZXMsIHNvIHdlIHdh");
    sb.append("bnQgdG8gY3JlYXRlIGEgbmljZSBsb29raW5nIHRhYmxlIHdpdGggcGFnaW5hdGlvbiEKICAgICAgICB2");
    sb.append("YXIgdGFibGVDb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB2");
    sb.append("YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICB0YWJs");
    sb.append("ZUNvbnRyb2xzLmFwcGVuZChzaG93aGlkZSk7CgogICAgICAgIHZhciB0YWJsZUhvbGRlciA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CiAgICAgICAgdGFibGVDb250cm9scy5hcHBlbmQodGFi");
    sb.append("bGVIb2xkZXIpOwogICAgICAgIHZhciB0YWJsZUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo");
    sb.append("InRoZWFkIik7CiAgICAgICAgdGFibGVIb2xkZXIuYXBwZW5kKHRhYmxlSGVhZGVyKTsKICAgICAgICB2");
    sb.append("YXIgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5hcHBlbmQoaGVhZGVyUm93KTsKICAgICAgICB2YXIgY29sb3JTdHlsZSA9ICJib3JkZXI6IDFw");
    sb.append("eCBzb2xpZCAjM2I1NGRhOyI7CiAgICAgICAgZm9yICh2YXIgZmllbGROYW1lIGluIHJlY29yZFR5cGUu");
    sb.append("ZmllbGRzKSB7CiAgICAgICAgICB2YXIgZmllbGQgPSByZWNvcmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVd");
    sb.append("OwogICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBmaWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgIGNv");
    sb.append("bnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21E");
    sb.append("ZWx0YShmaWVsZC50eXBlLCB0eXBlcyk7CiAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJ0ZCIpOwogICAgICAgICAgdGQuaW5uZXJIVE1MID0gcmVzdWx0Lm5hbWUgKyAiICIgKyBm");
    sb.append("aWVsZE5hbWU7CiAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kKHRkKTsKICAgICAgICAgIHRkLnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZSArICJwYWRkaW5nLWxlZnQ6IDAuNWVtOyBwYWRkaW5nLXJpZ2h0OiAwLjVlbTsi");
    sb.append("CiAgICAgICAgfQogICAgICAgIHRhYmxlSG9sZGVyLnN0eWxlID0gY29sb3JTdHlsZSArICJwYWRkaW5n");
    sb.append("OiAwLjVlbTsgbWFyZ2luOjAuNWVtOyBkaXNwbGF5Om5vbmUiCiAgICAgICAgaGVhZGVyUm93LnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZTsKICAgICAgICB2YXIgdGFibGVCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgidGJvZHkiKTsKICAgICAgICB0YWJsZUhvbGRlci5hcHBlbmQodGFibGVCb2R5KTsKICAgICAgICB2");
    sb.append("YXIgcm93c0J5S2V5ID0ge307CiAgICAgICAgdmFyIHBhZ2luZyA9IHsKICAgICAgICAgIHNob3duOmZh");
    sb.append("bHNlLAogICAgICAgICAgb3JkZXI6W10sCiAgICAgICAgICBwYWdlOiAwLAogICAgICAgICAgcGFnZV9s");
    sb.append("aW1pdDogMTAsCiAgICAgICAgfTsKICAgICAgICB2YXIgY29udHJvbGxlciA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB0YWJsZUNvbnRyb2xzLmFwcGVuZChjb250cm9sbGVyKTsK");
    sb.append("ICAgICAgICBwYWdpbmcucmVmb3JtID1mdW5jdGlvbigpIHsKICAgICAgICAgIG51a2UodGFibGVCb2R5");
    sb.append("KTsKICAgICAgICAgIHZhciBzdGFydCA9IE1hdGgubWluKHRoaXMucGFnZSAqIHRoaXMucGFnZV9saW1p");
    sb.append("dCwgdGhpcy5vcmRlci5sZW5ndGggLSB0aGlzLnBhZ2VfbGltaXQpOwogICAgICAgICAgZm9yICh2YXIg");
    sb.append("YXQgPSBzdGFydDsgYXQgPCBzdGFydCArIHBhZ2luZy5wYWdlX2xpbWl0OyBhdCsrKSB7CiAgICAgICAg");
    sb.append("ICAgIHZhciByb3cgPSByb3dzQnlLZXlbcGFnaW5nLm9yZGVyW2F0XV07CiAgICAgICAgICAgIGlmIChy");
    sb.append("b3cpIHsKICAgICAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kKHJvdyk7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIG51a2UoY29udHJvbGxlcik7CiAgICAgICAgICBpZiAodGhpcy5zaG93");
    sb.append("bikgewogICAgICAgICAgICB2YXIgcGFnZXMgPSB0aGlzLm9yZGVyLmxlbmd0aCAvIHRoaXMucGFnZV9s");
    sb.append("aW1pdDsKICAgICAgICAgICAgaWYgKHBhZ2VzID4gMSkgewogICAgICAgICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgcGFnZXM7IGsrKykgewogICAgICAgICAgICAgICAgdmFyIGdvdG9QYWdlID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgICAgICAgICBnb3RvUGFnZS5zdHlsZSA9");
    sb.append("IGJ1dHRvblN0eWxlOwogICAgICAgICAgICAgICAgZ290b1BhZ2UuaW5uZXJIVE1MID0gIltQRzoiICsg");
    sb.append("ayArICJdIjsKICAgICAgICAgICAgICAgIGdvdG9QYWdlLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIHRoaXMucGFnaW5nLnBhZ2UgPSB0aGlzLnBnOwogICAgICAgICAgICAgICAg");
    sb.append("ICB0aGlzLnBhZ2luZy5yZWZvcm0oKTsKICAgICAgICAgICAgICAgIH0uYmluZCh7cGFnaW5nOiB0aGlz");
    sb.append("LCBwZzoga30pOwogICAgICAgICAgICAgICAgY29udHJvbGxlci5hcHBlbmQoZ290b1BhZ2UpOwogICAg");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2hvd2hpZGUuaW5u");
    sb.append("ZXJIVE1MID0gdGhpcy5zaG93biA/IG1pbnVzU1ZHIDogcGx1c1NWRzsKICAgICAgICAgIHNob3doaWRl");
    sb.append("Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5zaG93biA9ICF0aGlzLnNob3du");
    sb.append("OwogICAgICAgICAgICBpZiAodGhpcy5zaG93bikgewogICAgICAgICAgICAgIHRhYmxlSG9sZGVyLnN0");
    sb.append("eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMu");
    sb.append("cmVmb3JtKCk7CiAgICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgICAgfS5iaW5kKHBhZ2luZyk7CgoK");
    sb.append("ICAgICAgICByZXR1cm4gewogICAgICAgICAgZG9tOiB0YWJsZUNvbnRyb2xzLAogICAgICAgICAgbmFt");
    sb.append("ZTogImxpc3QmbHQ7IiArIGR1bW15Lm5hbWUgKyAiJmd0OyIsCiAgICAgICAgICB1cGRhdGU6IHsKICAg");
    sb.append("ICAgICAgICAgJysnOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgdmFyIHJvdyA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7CiAgICAgICAgICAgICAgcm93c0J5S2V5W2tleV0gPSByb3c7");
    sb.append("CiAgICAgICAgICAgICAgdmFyIGRlbHRhID0ge307CiAgICAgICAgICAgICAgZm9yICh2YXIgZmllbGRO");
    sb.append("YW1lIGluIHJlY29yZFR5cGUuZmllbGRzKSB7CiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSByZWNv");
    sb.append("cmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBm");
    sb.append("aWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShmaWVsZC50");
    sb.append("eXBlLCB0eXBlcyk7CiAgICAgICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJ0ZCIpOwogICAgICAgICAgICAgICAgdGQuc3R5bGUgPSBjb2xvclN0eWxlICsgInBhZGRpbmc6IDAu");
    sb.append("MjVlbTsgdGV4dC1hbGlnbjp0b3AiOwogICAgICAgICAgICAgICAgdGQuYXBwZW5kKHJlc3VsdC5kb20p");
    sb.append("OwogICAgICAgICAgICAgICAgcm93LmFwcGVuZCh0ZCk7CiAgICAgICAgICAgICAgICBkZWx0YVtmaWVs");
    sb.append("ZE5hbWVdID0gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJu");
    sb.append("IGRlbHRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnLSc6IGZ1bmN0aW9uIChrZXkpIHsKICAg");
    sb.append("ICAgICAgICAgICB2YXIgZG9tID0gcm93c0J5S2V5W2tleV07CiAgICAgICAgICAgICAgdGFibGVCb2R5");
    sb.append("LnJlbW92ZShkb20pOwogICAgICAgICAgICAgIGRlbGV0ZSByb3dzQnlLZXlba2V5XTsKICAgICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAgICAgICBpZiAo");
    sb.append("b3JkZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcGFnaW5nLm9yZGVyID0gb3JkZXI7CiAgICAg");
    sb.append("ICAgICAgICAgICBwYWdpbmcucmVmb3JtKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIG5vdCBhIHJlY29yZCwg");
    sb.append("c28gd2UgdXNlIGEgc2ltcGxlIGxpc3QKICAgICAgICB2YXIgbGlzdEhvbGRlciA9IGRvY3VtZW50LmNy");
    sb.append("ZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHZhciBkb21CeUtleSA9IHt9OwogICAgICAgIHJldHVy");
    sb.append("biB7CiAgICAgICAgICBkb206IGxpc3RIb2xkZXIsCiAgICAgICAgICBuYW1lOiAibGlzdDwiICsgZHVt");
    sb.append("bXkubmFtZSArICI+IiwKICAgICAgICAgIHVwZGF0ZTogewogICAgICAgICAgICAnKyc6IGZ1bmN0aW9u");
    sb.append("IChrZXkpIHsKICAgICAgICAgICAgICB2YXIgaXRlbUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoInNwYW4iKTsKICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udmVydFR5cGVUb0RvbURlbHRh");
    sb.append("KHR5cGUudHlwZSwgdHlwZXMpOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHJlc3VsdC5k");
    sb.append("b20pOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHNpbXBsZSgic3BhbiIsICIsICIpKTsK");
    sb.append("ICAgICAgICAgICAgICBkb21CeUtleVtrZXldID0gaXRlbUhvbGRlcjsKICAgICAgICAgICAgICByZXR1");
    sb.append("cm4gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJy0nOiBmdW5jdGlvbiAo");
    sb.append("a2V5KSB7CiAgICAgICAgICAgICAgdmFyIGRvbSA9IGRvbUJ5S2V5W2tleV07CiAgICAgICAgICAgICAg");
    sb.append("bGlzdEhvbGRlci5yZW1vdmUoZG9tKTsKICAgICAgICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsK");
    sb.append("ICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlLm5hdHVy");
    sb.append("ZSA9PSAicmVhY3RpdmVfdmFsdWUiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfdmFsdWUiKSB7CiAg");
    sb.append("ICAgIC8vIGl0J3MganVzdCBkYXRhLCBzbyBjcmVhdGUgYSBzaW5nbGUgbm9kZSB0byBkcmF3IGl0CiAg");
    sb.append("ICAgIHZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICBpdGVtLmlu");
    sb.append("bmVySFRNTCA9ICJudWxsIjsKICAgICAgaXRlbS5zdHlsZSA9ICJjb2xvcjogIzc3YTVmZjsiOwogICAg");
    sb.append("ICB2YXIgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZTsgfTsK");
    sb.append("ICAgICAgaWYgKHR5cGUudHlwZSA9PSAic3RyaW5nIikgewogICAgICAgIGl0ZW0uc3R5bGUgPSAiY29s");
    sb.append("b3I6ICM3N2Q2NTYiOwogICAgICAgIHVwZGF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW0uaW5uZXJI");
    sb.append("VE1MID0gIlwiIiArIHZhbHVlICsgIlwiIjsgfTsKICAgICAgfSBlbHNlIGlmICh0eXBlLnR5cGUgPT0g");
    sb.append("InByaW5jaXBhbCIpIHsKICAgICAgICBpdGVtLnN0eWxlID0gImNvbG9yOiAjQkE4M0ZGOyI7CiAgICAg");
    sb.append("ICAgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZSAhPSBudWxs");
    sb.append("ID8gKHZhbHVlLmFnZW50ICsgIkAiICsgdmFsdWUuYXV0aG9yaXR5KSA6ICJudWxsIjsgfTsKICAgICAg");
    sb.append("fSBlbHNlIGlmICh0eXBlLnR5cGUgPT0gImJvb2wiKSB7CiAgICAgICAgaXRlbS5zdHlsZSA9ICJjb2xv");
    sb.append("cjogI0U4M0IzQjsiOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOml0ZW0sCiAgICAg");
    sb.append("ICAgbmFtZTogdHlwZS50eXBlLAogICAgICAgIHVwZGF0ZTogdXBkYXRlCiAgICAgIH07CiAgICB9CiAg");
    sb.append("ICBpZiAodHlwZS5uYXR1cmUgPT0gInJlYWN0aXZlX3JlY29yZCIgfHwgdHlwZS5uYXR1cmUgPT0gIm5h");
    sb.append("dGl2ZV9tZXNzYWdlIikgewogICAgICAvLyBpdCdzIGEgc3RydWN0dXJlLCBzbyBsZXQncyBjcmVhdGUg");
    sb.append("YSByZWNvcmQgdGhhdCBjYW4gc2hvdy9oaWRlCiAgICAgIHZhciBvYmpfaG9sZGVyID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICB2YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJidXR0b24iKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoc2hvd2hpZGUpOwogICAgICBv");
    sb.append("YmpfaG9sZGVyLnNob3dHcm91cCA9IHR5cGUubmFtZSAhPSAiUm9vdCI7CgogICAgICB2YXIgZ3JvdXAg");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoZ3Jv");
    sb.append("dXApOwogICAgICBncm91cC5hcHBlbmQoc2ltcGxlKCJkaXYiLCAieyIpKTsKICAgICAgdmFyIGNoaWxk");
    sb.append("cmVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKICAgICAgZ3JvdXAuYXBwZW5kKGNoaWxk");
    sb.append("cmVuKTsKICAgICAgZ3JvdXAuYXBwZW5kKHNpbXBsZSgiZGl2IiwgIn0iKSk7CiAgICAgIGdyb3VwLnN0");
    sb.append("eWxlID0gInBhZGRpbmctbGVmdDoxMHB4IjsKICAgICAgY2hpbGRyZW4uc3R5bGUgPSAicGFkZGluZy1s");
    sb.append("ZWZ0OjEwcHg7IjsKICAgICAgc2hvd2hpZGUub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgIG9i");
    sb.append("al9ob2xkZXIuc2hvd0dyb3VwID0gISBvYmpfaG9sZGVyLnNob3dHcm91cDsKICAgICAgICBpZiAob2Jq");
    sb.append("X2hvbGRlci5zaG93R3JvdXApIHsKICAgICAgICAgIGdyb3VwLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAg");
    sb.append("ICAgICAgIHNob3doaWRlLmlubmVySFRNTCA9IG1pbnVzU1ZHOwogICAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgICBncm91cC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgc2hvd2hpZGUuaW5uZXJI");
    sb.append("VE1MID0gcGx1c1NWRzsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNob3doaWRlLm9uY2xpY2soKTsK");
    sb.append("CiAgICAgIHZhciBkZWx0YSA9IHt9OwogICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gdHlwZS5maWVs");
    sb.append("ZHMpIHsKICAgICAgICB2YXIgZmllbGQgPSB0eXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgIGlm");
    sb.append("ICgicHJpdmF0ZSIgPT0gZmllbGQucHJpdmFjeSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAg");
    sb.append("fQogICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEoZmllbGQudHlwZSwgdHlw");
    sb.append("ZXMpOwogICAgICAgIHZhciBmaWVsZERvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7CiAg");
    sb.append("ICAgICAgZmllbGREb20uYXBwZW5kKHNpbXBsZSgic3BhbiIsICBmaWVsZC5wcml2YWN5ICsgIiAiICsg");
    sb.append("cmVzdWx0Lm5hbWUgKyAiICIgKyBmaWVsZE5hbWUgKyAiID0gIikpOwogICAgICAgIGZpZWxkRG9tLmFw");
    sb.append("cGVuZChyZXN1bHQuZG9tKTsKICAgICAgICBjaGlsZHJlbi5hcHBlbmQoZmllbGREb20pOwogICAgICAg");
    sb.append("IGRlbHRhW2ZpZWxkTmFtZV0gPSByZXN1bHQudXBkYXRlOwogICAgICB9CiAgICAgIHJldHVybiB7CiAg");
    sb.append("ICAgICAgZG9tOiBvYmpfaG9sZGVyLAogICAgICAgIG5hbWU6IHR5cGUubmFtZSwKICAgICAgICB1cGRh");
    sb.append("dGU6ZGVsdGEKICAgICAgfTsKICAgIH0KICAgIHZhciB1bmtub3duID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICB1bmtub3duLmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KHR5cGUpOwog");
    sb.append("ICAgcmV0dXJuIHtkb206IHVua25vd24sIHVwZGF0ZTogZnVuY3Rpb24oKSB7fX07CiAgfTsKCiAgc2Vs");
    sb.append("Zi5mb3JtSWRHZW4gPSAwOwogIHZhciBuZXh0Rm9ybUlkID0gZnVuY3Rpb24oKSB7CiAgICBzZWxmLmZv");
    sb.append("cm1JZEdlbisrOwogICAgcmV0dXJuIHNlbGYuZm9ybUlkR2VuOwogIH07CiAgdmFyIGZpbGxPdXRGb3Jt");
    sb.append("Rm9yVHlwZSA9IGZ1bmN0aW9uKGRvbSwgbmFtZSwgdHlwZSwgdHlwZXMpIHsKICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX3JlZiIpIHsKICAgICAgZmlsbE91dEZvcm1Gb3JUeXBlKGRvbSwgbmFtZSwg");
    sb.append("dHlwZXNbdHlwZS5yZWZdLCB0eXBlcyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIGZvciAodmFyIGZpZWxkIGluIHR5cGUuZmll");
    sb.append("bGRzKSB7CiAgICAgICAgdmFyIGZpZWxkVHlwZSA9IHR5cGUuZmllbGRzW2ZpZWxkXS50eXBlOwogICAg");
    sb.append("ICAgIHZhciBmaWVsZEhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAg");
    sb.append("IGZpbGxPdXRGb3JtRm9yVHlwZShmaWVsZEhvbGRlciwgbmFtZSA9PSAiIiA/IGZpZWxkIDogKG5hbWUg");
    sb.append("KyAiLiIgKyBmaWVsZCksIGZpZWxkVHlwZSwgdHlwZXMpOwogICAgICAgIGRvbS5hcHBlbmQoZmllbGRI");
    sb.append("b2xkZXIpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX2FycmF5IikgewogICAgICAvLyBUT0RPCiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0g");
    sb.append("Im5hdGl2ZV9tYXliZSIpIHsKICAgICAgdmFyIG1heWJlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVs");
    sb.append("Iik7CiAgICAgIGxhYmVsLmlubmVySFRNTCA9ICJlbmFibGUgIiArIG5hbWU7CiAgICAgIHZhciBjaGVj");
    sb.append("a2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGNoZWNrYm94LnR5cGUg");
    sb.append("PSAiY2hlY2tib3giOwogICAgICBjaGVja2JveC5pZCA9IG5leHRGb3JtSWQoKTsKICAgICAgY2hlY2ti");
    sb.append("b3gubmFtZSA9ICIiOwogICAgICBsYWJlbC5odG1sRm9yID0gY2hlY2tib3guaWQ7CiAgICAgIHZhciBt");
    sb.append("YXliZVZhbHVlUmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBtYXli");
    sb.append("ZVZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGZpbGxPdXRGb3JtRm9y");
    sb.append("VHlwZShtYXliZVZhbHVlLCBuYW1lLCB0eXBlLnR5cGUsIHR5cGVzKTsKICAgICAgbWF5YmVIb2xkZXIu");
    sb.append("YXBwZW5kKGxhYmVsKTsKICAgICAgbWF5YmVIb2xkZXIuYXBwZW5kKGNoZWNrYm94KTsKICAgICAgbWF5");
    sb.append("YmVIb2xkZXIuYXBwZW5kKG1heWJlVmFsdWVSZWYpOwogICAgICBkb20uYXBwZW5kKG1heWJlSG9sZGVy");
    sb.append("KTsKICAgICAgY2hlY2tib3gub25jaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBudWtlKG1heWJl");
    sb.append("VmFsdWVSZWYpOwogICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7CiAgICAgICAgICBtYXliZVZh");
    sb.append("bHVlUmVmLmFwcGVuZChtYXliZVZhbHVlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybjsK");
    sb.append("ICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAibmF0aXZlX3ZhbHVlIikgewogICAgICB2YXIgbGFi");
    sb.append("ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwogICAgICB2YXIgaW5wdXQgPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoKICAgICAgaW5wdXQuaWQgPSAiZGVidWdnZXJfZm9y");
    sb.append("bV9pZF8iICsgbmV4dEZvcm1JZCgpOwogICAgICBsYWJlbC5pbm5lckhUTUwgPSBuYW1lOwogICAgICBp");
    sb.append("bnB1dC5uYW1lID0gbmFtZTsKICAgICAgaW5wdXQuc3R5bGUgPSBpbnB1dFN0eWxlOwogICAgICBpbnB1");
    sb.append("dC50eXBlID0gInRleHQiOwogICAgICBsYWJlbC5mb3JIdG1sID0gaW5wdXQuaWQ7CiAgICAgIGRvbS5h");
    sb.append("cHBlbmQobGFiZWwpOwogICAgICBkb20uYXBwZW5kKGlucHV0KTsKICAgICAgcmV0dXJuOwogICAgfQog");
    sb.append("ICAgZG9tLmlubmVySFRNTCA9IG5hbWUgKyAiLS0+IiArIEpTT04uc3RyaW5naWZ5KHR5cGUpOwogIH07");
    sb.append("CgogIHZhciBtYWtlQ2hhbm5lbERlYnVnZ2VyID0gZnVuY3Rpb24oY2hhbm5lbHMsIHR5cGVzLCBjb25u");
    sb.append("ZWN0aW9uKSB7CiAgICB2YXIgc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3Qi");
    sb.append("KTsKICAgIHNlbGVjdG9yLnN0eWxlID0gImJhY2tncm91bmQ6ICMzMzM7IGNvbG9yOiNmZmY7IjsKICAg");
    sb.append("IHZpZXdDaGFubmVscy5hcHBlbmQoc2VsZWN0b3IpOwogICAgdmFyIGZvcm1Ib2xkZXIgPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHZpZXdDaGFubmVscy5hcHBlbmQoZm9ybUhvbGRlcik7");
    sb.append("CiAgICB2YXIgY2hvb3NlID0gZnVuY3Rpb24oY2hhbm5lbCkgewogICAgICBudWtlKGZvcm1Ib2xkZXIp");
    sb.append("OwogICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTsKICAgICAgZm9y");
    sb.append("bUhvbGRlci5hcHBlbmQoZm9ybSk7CiAgICAgIHZhciB0eXBlID0gdHlwZXNbY2hhbm5lbHNbY2hhbm5l");
    sb.append("bF1dOwogICAgICBmaWxsT3V0Rm9ybUZvclR5cGUoZm9ybSwgIiIsIHR5cGUsIHR5cGVzKTsKCiAgICAg");
    sb.append("IHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgYnV0dG9u");
    sb.append("LnN0eWxlID0gYnV0dG9uU3R5bGU7CiAgICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQp");
    sb.append("IHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciBtZXNzYWdlID0gUnhI");
    sb.append("VE1MLkJ1aWxkRm9ybU9iamVjdChmb3JtKTsKICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlNlbmRp");
    sb.append("bmciOwogICAgICAgIGNvbnNvbGUubG9nKGNoYW5uZWwgKyAiOiIgKyBKU09OLnN0cmluZ2lmeShtZXNz");
    sb.append("YWdlKSk7CiAgICAgICAgY29ubmVjdGlvbi5zZW5kKGNoYW5uZWwsIG1lc3NhZ2UsIHsKICAgICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlN1Y2Nl");
    sb.append("c3MhIFNlbmQgQW5vdGhlciEiOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9u");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIltGYWlsZWQ6IiArIHJlYXNv");
    sb.append("biArICJdLCBUcnkgQWdhaW4iOwogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICB9OwogICAgICBi");
    sb.append("dXR0b24uaW5uZXJIVE1MID0gIlNlbmQiOwogICAgICBmb3JtLmFwcGVuZChidXR0b24pOwogICAgICAv");
    sb.append("LyBCdWlsZEZvcm1PYmplY3QKICAgIH07CiAgICB2YXIgZmlyc3QgPSBudWxsOwogICAgdmFyIGNoYW5u");
    sb.append("ZWxzU29ydGVkID0gW107CiAgICBmb3IgKHZhciBjaCBpbiBjaGFubmVscykgewogICAgICBjaGFubmVs");
    sb.append("c1NvcnRlZC5wdXNoKGNoKTsKICAgIH0KICAgIGNoYW5uZWxzU29ydGVkLnNvcnQoKTsKICAgIGZvciAo");
    sb.append("dmFyIGsgaW4gY2hhbm5lbHNTb3J0ZWQpIHsKICAgICAgdmFyIGNoID0gY2hhbm5lbHNTb3J0ZWRba107");
    sb.append("CiAgICAgIGlmIChmaXJzdCA9PSBudWxsKSB7CiAgICAgICAgZmlyc3QgPSBjaDsKICAgICAgfQogICAg");
    sb.append("ICB2YXIgbXNnVHlwZSA9IGNoYW5uZWxzW2NoXTsKICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQuaW5uZXJIVE1MID0gY2ggKyAiIDogIiArIG1zZ1R5");
    sb.append("cGU7CiAgICAgIG9wdC5sYWJlbCA9IGNoICsgIiA6ICIgKyBtc2dUeXBlOwogICAgICBvcHQudmFsdWUg");
    sb.append("PSBjaDsKICAgICAgc2VsZWN0b3IuYXBwZW5kKG9wdCk7CiAgICAgIHNlbGVjdG9yLm9uY2hhbmdlID0g");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICAgICAgY2hvb3NlKHNlbGVjdG9yLnZhbHVlKTsKICAgICAgfTsKICAgIH0K");
    sb.append("CiAgICBpZiAoZmlyc3QgIT0gbnVsbCkgewogICAgICBjaG9vc2UoZmlyc3QpOwogICAgfQogIH07Cgog");
    sb.append("IHZhciByZW5kZXIgPSBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tuYW1l");
    sb.append("XTsKICAgIGlmIChjby5yZW5kZXJlZCA9PSBjby5ib3VuZCkgewogICAgICByZXR1cm47CiAgICB9CiAg");
    sb.append("ICBjby5yZW5kZXJlZCA9IGNvLmJvdW5kOwogICAgY28uZGVidWdfdHJlZS5udWtlKCk7CiAgICBudWtl");
    sb.append("KHZpZXdKc29uKTsKICAgIG51a2Uodmlld0NoYW5uZWxzKTsKCiAgICB2YXIgaGFuZGxlciA9IHsKICAg");
    sb.append("ICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAvLyBoYW5kbGUgdGhlIGRhdGEg");
    sb.append("aW5zcGVjdG9yIHRhYgogICAgICAgIHZhciByZWZsZWN0aW9uID0gcGF5bG9hZC5yZWZsZWN0aW9uOwog");
    sb.append("ICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEocmVmbGVjdGlvbi50eXBlc1si");
    sb.append("X19Sb290Il0sIHJlZmxlY3Rpb24udHlwZXMpOwogICAgICAgIHZpZXdKc29uLmFwcGVuZChyZXN1bHQu");
    sb.append("ZG9tKTsKICAgICAgICBjby5kZWJ1Z190cmVlLnN1YnNjcmliZShyZXN1bHQudXBkYXRlKTsKICAgICAg");
    sb.append("ICAvLyBoYW5kbGUgdGhlIGNoYW5uZWxzIHRhYgogICAgICAgIG1ha2VDaGFubmVsRGVidWdnZXIocmVm");
    sb.append("bGVjdGlvbi5jaGFubmVscywgcmVmbGVjdGlvbi50eXBlcywgY28ucHRyKTsKICAgICAgfSwKICAgICAg");
    sb.append("ZmFpbHVyZTogZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0gIltG");
    sb.append("QUlMRUQgVE8gR0VUIFNDSEVNQToiICsgcmVhc29uICsgIl0iOwogICAgICAgIHZpZXdDaGFubmVscy5p");
    sb.append("bm5lckhUTUwgPSAiW0ZBSUxFRCBUTyBHRVQgU0NIRU1BOiIgKyByZWFzb24gKyAiXSI7CiAgICAgIH0K");
    sb.append("ICAgIH07CiAgICBpZiAoY28udmlhX2JpbGxpbmcpIHsKICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0g");
    sb.append("IkJpbGlsbmcgZG9jdW1lbnQgbm90IHN1cHBvcnRlZCI7CiAgICAgIHZpZXdDaGFubmVscy5pbm5lckhU");
    sb.append("TUwgPSB2aWV3SnNvbi5pbm5lckhUTUw7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChjby52aWFf");
    sb.append("ZG9tYWluKSB7CiAgICAgIGNvLnJhdy5Eb21haW5SZWZsZWN0KGNvLmlkZW50aXR5LCBjby5kb21haW4s");
    sb.append("IGhhbmRsZXIpOwogICAgfSBlbHNlIHsKICAgICAgY28ucmF3LlNwYWNlUmVmbGVjdChjby5pZGVudGl0");
    sb.append("eSwgY28uc3BhY2UsIGNvLmtleSwgaGFuZGxlcik7CiAgICB9CiAgfTsKCiAgdmFyIGNvbm5lY3Rpb25T");
    sb.append("ZWxlY3RvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwogIGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMzMzOyBjb2xvcjogI2ZmZiI7CiAgdmFyIHN3aXRjaF90");
    sb.append("b19jb25uZWN0aW9uID0gZnVuY3Rpb24obmFtZSkgewogICAgY3VycmVudCA9IG5hbWU7CiAgICBudWtl");
    sb.append("KHZpZXdDaGFubmVscyk7CiAgICBudWtlKHZpZXdKc29uKTsKICAgIGNvbm5lY3Rpb25zW25hbWVdLnJl");
    sb.append("bmRlcmVkID0gIiI7CiAgICByZW5kZXIobmFtZSk7CiAgfTsKICBjb25uZWN0aW9uU2VsZWN0b3Iub25j");
    sb.append("aGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgIHN3aXRjaF90b19jb25uZWN0aW9uKGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci52YWx1ZSk7CiAgfTsKICB2YXIgcmVmcmVzaF9zZWxlY3QgPSBmdW5jdGlvbigpIHsKICAgIG51");
    sb.append("a2UoY29ubmVjdGlvblNlbGVjdG9yKTsKICAgIGZvciAodmFyIG5hbWUgaW4gY29ubmVjdGlvbnMpIHsK");
    sb.append("ICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQu");
    sb.append("dmFsdWUgPSBuYW1lOwogICAgICBvcHQuaW5uZXJUZXh0ID0gbmFtZTsKICAgICAgY29ubmVjdGlvblNl");
    sb.append("bGVjdG9yLmFwcGVuZENoaWxkKG9wdCk7CiAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHsKICAgICAg");
    sb.append("ICBzd2l0Y2hfdG9fY29ubmVjdGlvbihuYW1lKTsKICAgICAgICBjb25uZWN0aW9uU2VsZWN0b3IudmFs");
    sb.append("dWUgPSBuYW1lOwogICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi50b2dnbGUgPSBmdW5jdGlvbigpIHsK");
    sb.append("ICAgIGlmIChzZWxmLnNob3duKSB7CiAgICAgIHRyeSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1v");
    sb.append("dmVDaGlsZChzZWxmLnJvb3QpOwogICAgICB9IGNhdGNoIChub3RwcmVzZW50KSB7CiAgICAgICAgc2Vs");
    sb.append("Zi5zaG93biA9ICFzZWxmLnNob3duOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHNlbGYucm9v");
    sb.append("dCk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgc2VsZi5yb290ID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGRlYnVnZ2VyUG9zaXRpb24gPSBsb2NhbFN0b3JhZ2Uu");
    sb.append("Z2V0SXRlbSgiQWRhbWFEZWJ1Z2dlclBvc2l0aW9uIik7CiAgICAgIGlmICghZGVidWdnZXJQb3NpdGlv");
    sb.append("biB8fCBkZWJ1Z2dlclBvc2l0aW9uID09ICIiKSB7CiAgICAgICAgZGVidWdnZXJQb3NpdGlvbiA9ICJ0");
    sb.append("b3A6MHB4OyBsZWZ0OjBweDt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiOwogICAgICB9CiAgICAgIHNl");
    sb.append("bGYucm9vdC5zdHlsZSA9ICJwb3NpdGlvbjphYnNvbHV0ZTsiICsgZGVidWdnZXJQb3NpdGlvbiArICI7");
    sb.append("YmFja2dyb3VuZDogIzAwMDtib3JkZXI6MXB4IHNvbGlkIHJlZDt6LWluZGV4OjEwMDA7IG92ZXJmbG93");
    sb.append("OnNjcm9sbCI7CiAgICAgIHZhciB0aXRsZUJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIp");
    sb.append("OwogICAgICB0aXRsZUJhci5pbm5lckhUTUwgPSAiQWRhbWEgRGVidWdnZXIiOwogICAgICB0aXRsZUJh");
    sb.append("ci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMjIyOyBjb2xvcjogIzBmMDsgY3Vyc29yOm1vdmU7IHdpZHRo");
    sb.append("OjEwMCU7IGZvbnQtdmFyaWFudDogc21hbGwtY2FwczsgcGFkZGluZzoycHg7IHRleHQtYWxpZ246IGNl");
    sb.append("bnRlcjsiOwogICAgICB0aXRsZUJhci5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAg");
    sb.append("ZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICB2YXIgcmVjdCA9IHNlbGYucm9vdC5nZXRCb3VuZGlu");
    sb.append("Z0NsaWVudFJlY3QoKTsKICAgICAgICB2YXIgc3RhcnQgPSB7eDogZXYuY2xpZW50WCwgeTogZXYuY2xp");
    sb.append("ZW50WX07CiAgICAgICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uKG54KSB7CiAgICAgICAgICBzZWxmLnJv");
    sb.append("b3Quc3R5bGUubGVmdCA9IChyZWN0LmxlZnQgKyBueC5jbGllbnRYIC0gc3RhcnQueCkgKyAicHgiOwog");
    sb.append("ICAgICAgICAgc2VsZi5yb290LnN0eWxlLnRvcCA9IChyZWN0LnRvcCArIG54LmNsaWVudFkgLSBzdGFy");
    sb.append("dC55KSArICJweCI7CiAgICAgICAgfTsKICAgICAgICB3aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlv");
    sb.append("bihueCkgewogICAgICAgICAgdXBkYXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVt");
    sb.append("KCJBZGFtYURlYnVnZ2VyUG9zaXRpb24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0");
    sb.append("OiIrc2VsZi5yb290LnN0eWxlLmxlZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAg");
    sb.append("ICB9OwogICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbihueCkgewogICAgICAgICAgdXBk");
    sb.append("YXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJBZGFtYURlYnVnZ2VyUG9zaXRp");
    sb.append("b24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0OiIrc2VsZi5yb290LnN0eWxlLmxl");
    sb.append("ZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAgICAgIHdpbmRvdy5vbm1vdXNlbW92");
    sb.append("ZSA9IGZ1bmN0aW9uKCkge307CiAgICAgICAgICB3aW5kb3cub25tb3VzZXVwID0gZnVuY3Rpb24oKSB7");
    sb.append("fTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzZWxmLnJvb3Qu");
    sb.append("YXBwZW5kQ2hpbGQodGl0bGVCYXIpOwogICAgICBzZWxmLnJvb3QuYXBwZW5kQ2hpbGQoY29ubmVjdGlv");
    sb.append("blNlbGVjdG9yKTsKICAgICAgc2VsZi5yb290LmFwcGVuZENoaWxkKHZpZXdKc29uKTsKICAgICAgc2Vs");
    sb.append("Zi5yb290LmFwcGVuZENoaWxkKHZpZXdDaGFubmVscyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5k");
    sb.append("Q2hpbGQoc2VsZi5yb290KTsKICAgIH0KICAgIHNlbGYuc2hvd24gPSAhc2VsZi5zaG93bjsKICB9OwoK");
    sb.append("ICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oY29ubmVjdGlvbikgewogICAgY29ubmVjdGlvbnNbY29u");
    sb.append("bmVjdGlvbi5uYW1lXSA9IGNvbm5lY3Rpb247CiAgICBjb25uZWN0aW9uLmRlYnVnX3RyZWUgPSBuZXcg");
    sb.append("QWRhbWFUcmVlKCk7CiAgICBjb25uZWN0aW9uLmRlYnVnZ2luZyA9ICI/IjsKICAgIHJlZnJlc2hfc2Vs");
    sb.append("ZWN0KCk7CiAgICByZXR1cm4gZnVuY3Rpb24ocGF5bG9hZCkgewogICAgICBpZiAoY29ubmVjdGlvbi5i");
    sb.append("b3VuZCAhPSBjb25uZWN0aW9uLmRlYnVnZ2luZyAmJiBjdXJyZW50ID09IGNvbm5lY3Rpb24ubmFtZSkg");
    sb.append("ewogICAgICAgIHJlbmRlcihjb25uZWN0aW9uLm5hbWUpOwogICAgICB9CiAgICAgIGlmICgiZGF0YSIg");
    sb.append("aW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgIGNvbm5lY3Rpb24uZGVidWdfdHJlZS51cGRhdGUocGF5");
    sb.append("bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgfQogICAgICAvKgogICAgICBpZiAoIm91dHN0YW5kaW5nIiBp");
    sb.append("biBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBjby5vbmRlY2lkZShwYXlsb2FkLmRlbHRhLm91dHN0");
    sb.append("YW5kaW5nKTsKICAgICAgfQogICAgICBpZiAoJ3ZpZXdzdGF0ZScgaW4gcGF5bG9hZC5kZWx0YSkgewov");
    sb.append("LyAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLnZpZXdzdGF0ZSk7CiAg");
    sb.append("ICAgIH0KICAgICAgaWYgKCdnb3RvJyBpbiBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBzZWxmLmdv");
    sb.append("dG8ocGF5bG9hZC5kZWx0YS5nb3RvKTsKICAgICAgfQogICAgICAqLwogICAgfQogIH07CiAgcmV0dXJu");
    sb.append("IHNlbGY7Cn0pKCk7");
    return sb.toString();
  }
  public static final String RXHTML = new String(Base64.getDecoder().decode(make_rxhtml()), StandardCharsets.UTF_8);
  private static String make_rxhtml() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIFJ4SFRNTCA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB7fTsKCiAgdmFyIHRlbXBsYXRl");
    sb.append("cyA9IHt9OwogIHZhciByb3V0ZXIgPSB7fTsKICBzZWxmLl9pbmZsaWdodCA9IDA7CgogIHZhciBkZWZh");
    sb.append("dWx0RW5kcG9pbnQgPSAvKkVORFBPSU5UPVsqL0FkYW1hLlByb2R1Y3Rpb24vKl0qLzsKCiAgLy8gb3Zl");
    sb.append("cnJpZGUgZW5kcG9pbnQgYmFzZWQgb24gdGhlIHByZXNlbmNlIG9mIF9fbWRfZW5kcG9pbnQKICB2YXIg");
    sb.append("bWRPdmVycmlkZUVuZHBvaW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm1kZWMiKTsgLy8gbXVsdGkg");
    sb.append("ZG9tYWluIGVuZHBvaW50IGNob2ljZQogIGlmIChtZE92ZXJyaWRlRW5kcG9pbnQgIT0gbnVsbCAmJiAi");
    sb.append("YmV0YSIgPT0gbWRPdmVycmlkZUVuZHBvaW50KSB7CiAgICBkZWZhdWx0RW5kcG9pbnQgPSBBZGFtYS5C");
    sb.append("ZXRhOwogIH0KCiAgLy8gVGhpcyBzdHJhbmdlIGVzY2FwaW5nIGlzIGZvciBkZXZlbG9wZXIgbW9kZSB0");
    sb.append("byBwcm94eSB0byBsb2NhbGhvc3QuCiAgdmFyIGNvbm5lY3Rpb24gPSBuZXcgQWRhbWEuQ29ubmVjdGlv");
    sb.append("bihkZWZhdWx0RW5kcG9pbnQpOwogIHZhciBjb25uZWN0aW9ucyA9IHt9OwogIHNlbGYuY29ubmVjdGlv");
    sb.append("biA9IGNvbm5lY3Rpb247CiAgc2VsZi5idW1wID0gZnVuY3Rpb24obSkgewogICAgY29ubmVjdGlvbi5i");
    sb.append("dW1wKG0pOwogIH07CgogIHZhciBjb25uZWN0aW9uTW9uaXRvckRvbSA9IGRvY3VtZW50LmNyZWF0ZUVs");
    sb.append("ZW1lbnQoImRpdiIpOwogIGNvbm5lY3Rpb24ub25zdGF0dXNjaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdHVz");
    sb.append("KSB7CiAgICB2YXIgaWNvbiA9IGZ1bmN0aW9uIChjb2xvcikgeyByZXR1cm4gIjxzdmcgeG1sbnM9XCJo");
    sb.append("dHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAy");
    sb.append("NFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZT1cIiIgKyBjb2xvciArICJcIiBzdHlsZT1cIndp");
    sb.append("ZHRoOjE2cHg7IGhlaWdodDoxNnB4XCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9r");
    sb.append("ZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk04LjI4OCAxNS4wMzhhNS4yNSA1LjI1IDAgMDE3LjQyNCAw");
    sb.append("TTUuMTA2IDExLjg1NmMzLjgwNy0zLjgwOCA5Ljk4LTMuODA4IDEzLjc4OCAwTTEuOTI0IDguNjc0YzUu");
    sb.append("NTY1LTUuNTY1IDE0LjU4Ny01LjU2NSAyMC4xNTIgME0xMi41MyAxOC4yMmwtLjUzLjUzLS41My0uNTNh");
    sb.append("Ljc1Ljc1IDAgMDExLjA2IDB6XCIgLz48L3N2Zz5cbiI7IH07CiAgICBpZiAoIXN0YXR1cykgewogICAg");
    sb.append("ICBjb25uZWN0aW9uTW9uaXRvckRvbS50aXRsZSA9ICJkaXNjb25uZWN0ZWQiOwogICAgICBjb25uZWN0");
    sb.append("aW9uTW9uaXRvckRvbS5pbm5lckhUTUwgPSBpY29uKCJyZWQiKTsKICAgICAgY29ubmVjdGlvbi5vbnBp");
    sb.append("bmcgPSBmdW5jdGlvbiAoXzEsIF8yKSB7IH07CiAgICB9IGVsc2UgewogICAgICBjb25uZWN0aW9uLm9u");
    sb.append("cGluZyA9IGZ1bmN0aW9uIChfLCBsYXRlbmN5KSB7CiAgICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20u");
    sb.append("dGl0bGUgPSAiY29ubmVjdGVkOyBsYXRlbmN5PSIgKyBsYXRlbmN5ICsgIm1zIjsKICAgICAgICBpZiAo");
    sb.append("bGF0ZW5jeSA+PSAxMDApIHsKICAgICAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmlubmVySFRNTCA9");
    sb.append("IGljb24oIm9yYW5nZSIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25uZWN0aW9uTW9uaXRv");
    sb.append("ckRvbS5pbm5lckhUTUwgPSBpY29uKCJncmVlbiIpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9");
    sb.append("OwogIGNvbm5lY3Rpb25Nb25pdG9yRG9tLnN0eWxlID0gInBvc2l0aW9uOmZpeGVkOyBib3R0b206MHB4");
    sb.append("OyByaWdodDowcHgiOwogIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmNsYXNzTmFtZSA9ICJhZGFtYS1kZWJ1");
    sb.append("Z2dlciIKICBpZiAoQWRhbWEuRGVidWdnZXIpIHsKICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLm9uY2xp");
    sb.append("Y2sgPSBBZGFtYS5EZWJ1Z2dlci50b2dnbGU7CiAgfQogIGNvbm5lY3Rpb24uc3RhcnQoKTsKICBjb25u");
    sb.append("ZWN0aW9uLmtlZXBhbGl2ZSgpOwoKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5j");
    sb.append("dGlvbihldmVudCkgewogICAgdmFyIHBheWxvYWQgPSB7fTsKICAgIHBheWxvYWQubWVzc2FnZSA9IGV2");
    sb.append("ZW50Lm1lc3NhZ2U7CiAgICBwYXlsb2FkLmZpbGVuYW1lID0gZXZlbnQuZmlsZW5hbWU7CiAgICBwYXls");
    sb.append("b2FkLmxpbmVubyA9IGV2ZW50LmxpbmVubzsKICAgIHBheWxvYWQuY29sbm8gPSBldmVudC5jb2xubzsK");
    sb.append("ICAgIHBheWxvYWQuZmlsZW5hbWUgPSBldmVudC5maWxlbmFtZTsKICAgIGNvbm5lY3Rpb24ubG9nKCJ3");
    sb.append("aW5kb3cuZXJyb3IiLCBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSk7CiAgICBjb25zb2xlLmVycm9yKCJb");
    sb.append("ZXJyb3JdIiArIGV2ZW50Lm1lc3NhZ2UpOwogIH0pOwoKICBjb25uZWN0aW9uLmJ1bXAoInJ4aHRtbCIp");
    sb.append("OwoKICB2YXIgcm9vdFJlcGxhY2UgPSAiLyI7CiAgdmFyIGZpeFBhdGggPSBmdW5jdGlvbiAocGF0aCkg");
    sb.append("ewogICAgcmV0dXJuIHBhdGg7CiAgfTsKICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmVuZHNX");
    sb.append("aXRoKCIuYWRhbWEtcGxhdGZvcm0uY29tIikgJiYgIXdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5lbmRz");
    sb.append("V2l0aCgiaWRlLmFkYW1hLXBsYXRmb3JtLmNvbSIpKSB7CiAgICAvLyB0aGlzIGV4aXN0cyBpZiBzb21l");
    sb.append("b25lIGlzIHRyeWluZyB0byB1c2UgdGhlIGdsb2JhbCBkb21haW4gZm9yIHRoZWlyIHNpdGUKICAgIHZh");
    sb.append("ciBwYXJ0cyA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgiLyIpOwogICAgcm9vdFJlcGxh");
    sb.append("Y2UgPSBbcGFydHNbMF0sIHBhcnRzWzFdLCBwYXJ0c1syXSwgIiJdLmpvaW4oIi8iKTsKICAgIHZhciBv");
    sb.append("ZmZzZXQgPSBwYXJ0c1swXS5sZW5ndGggKyBwYXJ0c1sxXS5sZW5ndGggKyBwYXJ0c1syXS5sZW5ndGgg");
    sb.append("KyAyOwogICAgZml4UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgIHJldHVybiBwYXRoLnN1YnN0");
    sb.append("cmluZyhvZmZzZXQpOwogICAgfTsKICB9CgogIHZhciBmaXhIcmVmID0gZnVuY3Rpb24gKGhyZWYpIHsK");
    sb.append("ICAgIGlmICghaHJlZikgewogICAgICByZXR1cm4gIiMiOwogICAgfQogICAgaWYgKGhyZWYuc3RhcnRz");
    sb.append("V2l0aCgiLyIpKSB7CiAgICAgIHJldHVybiByb290UmVwbGFjZSArIGhyZWYuc3Vic3RyaW5nKDEpOwog");
    sb.append("ICAgfQogICAgcmV0dXJuIGhyZWY7CiAgfTsKCiAgdmFyIGdldF9jb25uZWN0aW9uX29iaiA9IGZ1bmN0");
    sb.append("aW9uIChuYW1lKSB7CiAgICBpZiAobmFtZSBpbiBjb25uZWN0aW9ucykgewogICAgICByZXR1cm4gY29u");
    sb.append("bmVjdGlvbnNbbmFtZV07CiAgICB9IGVsc2UgewogICAgICB2YXIgb2JqID0gewogICAgICAgIG5hbWU6");
    sb.append("IG5hbWUsCiAgICAgICAgcHRyOiBudWxsLAogICAgICAgIHRyZWU6IG5ldyBBZGFtYVRyZWUoKSwKICAg");
    sb.append("ICAgICBvdXRzdGFuZGluZzoge30sCiAgICAgICAgZGVjaXNpb25zOiB7fSwKICAgICAgICBjaG9pY2Vf");
    sb.append("c3Viczoge30sCiAgICAgICAgcmVzZXRzOiB7fSwKICAgICAgICBjb25uZWN0aW9uX2V2ZW50czoge30s");
    sb.append("CiAgICAgICAgc3luY19ldmVudHM6IHt9LAogICAgICAgIGlkOiAwLAogICAgICAgIGNvbm5lY3Rpb25f");
    sb.append("c3RhdGU6IGZhbHNlLAogICAgICAgIGNob2ljZXM6IHt9LAogICAgICAgIGJvdW5kOiAiIiwKICAgICAg");
    sb.append("ICB2aWV3c3RhdGVfc2VudDogdHJ1ZSwKICAgICAgICB2aWV3c3RhdGVfY2xvbmU6ICIiLAogICAgICAg");
    sb.append("IGhhc19maWx0ZXI6IGZhbHNlLAogICAgICAgIHN5bmNlZDogZmFsc2UsCiAgICAgICAgZmlsdGVyOiB7");
    sb.append("fSwKICAgICAgICB2c3NlcTogMCwKICAgICAgICBkZWJ1Z2dlcjogZnVuY3Rpb24gKGRlbHRhKSB7IH0s");
    sb.append("CiAgICAgICAgcmF3OiBjb25uZWN0aW9uCiAgICAgIH07CiAgICAgIG9iai5udWtlID0gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgIHRoaXMuY29ubmVjdGlvbl9ldmVudHMgPSB7fTsKICAgICAgICB0aGlzLnN5bmNf");
    sb.append("ZXZlbnRzID0ge307CiAgICAgICAgdGhpcy5jaG9pY2Vfc3VicyA9IHt9OwogICAgICB9LmJpbmQob2Jq");
    sb.append("KTsKICAgICAgaWYgKEFkYW1hLkRlYnVnZ2VyKSB7CiAgICAgICAgb2JqLmRlYnVnZ2VyID0gQWRhbWEu");
    sb.append("RGVidWdnZXIucmVnaXN0ZXIob2JqKTsKICAgICAgfQogICAgICBvYmouc3luYyA9IGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgICB2YXIgc3luY2VkID0gdGhpcy5jb25uZWN0aW9uX3N0YXRlICYmIHRoaXMudmlld3N0");
    sb.append("YXRlX3NlbnQ7CiAgICAgICAgaWYgKHRoaXMuc3luY2VkID09IHN5bmNlZCkgewogICAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLnN5bmNlZCA9IHN5bmNlZDsKICAgICAgICB2YXIgYXhl");
    sb.append("ID0gW107CiAgICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5zeW5jX2V2ZW50cykgewogICAgICAgICAg");
    sb.append("aWYgKCEob2JqLnN5bmNfZXZlbnRzW3N1Yl0oc3luY2VkKSkpIHsKICAgICAgICAgICAgYXhlLnB1c2go");
    sb.append("c3ViKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUu");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0ZSBvYmouc3luY19ldmVudHNbYXhlW2tdXTsKICAg");
    sb.append("ICAgICB9CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vic2NyaWJlX3N5bmMgPSBmdW5jdGlv");
    sb.append("biAoY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9ICItfCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhp");
    sb.append("cy5zeW5jX2V2ZW50c1tzXSA9IGNhbGxiYWNrOwogICAgICAgIGNhbGxiYWNrKHRoaXMuc3luY2VkKTsK");
    sb.append("ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGVsZXRlIHRoaXMuc3luY19ldmVu");
    sb.append("dHNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9OwogICAgICBvYmouc2V0X2Nvbm5lY3Rl");
    sb.append("ZCA9IGZ1bmN0aW9uIChjcykgewogICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25fc3RhdGUgPT0gY3Mp");
    sb.append("IHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5jb25uZWN0aW9uX3N0YXRl");
    sb.append("ID0gY3M7CiAgICAgICAgdmFyIGF4ZSA9IFtdOwogICAgICAgIGZvciAodmFyIHN1YiBpbiBvYmouY29u");
    sb.append("bmVjdGlvbl9ldmVudHMpIHsKICAgICAgICAgIGlmICghKG9iai5jb25uZWN0aW9uX2V2ZW50c1tzdWJd");
    sb.append("KGNzKSkpIHsKICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAgICAgICAgIH0KICAgICAgICB9CiAg");
    sb.append("ICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0");
    sb.append("ZSBvYmouY29ubmVjdGlvbl9ldmVudHNbYXhlW2tdXTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zeW5j");
    sb.append("KCk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouY29ubmVjdGVkID0gZnVuY3Rpb24gKGNhbGxi");
    sb.append("YWNrKSB7CiAgICAgICAgdmFyIHMgPSAiLXwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMuY29ubmVj");
    sb.append("dGlvbl9ldmVudHNbc10gPSBjYWxsYmFjazsKICAgICAgICBjYWxsYmFjayh0aGlzLmNvbm5lY3Rpb25f");
    sb.append("c3RhdGUpOwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5j");
    sb.append("b25uZWN0aW9uX2V2ZW50c1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH0uYmluZChvYmop");
    sb.append("OwogICAgICBvYmouc3Vic2NyaWJlX2FueSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHZh");
    sb.append("ciBzID0gIi18IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLmRlY2lzaW9uc1tzXSA9IGNhbGxiYWNr");
    sb.append("OwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5kZWNpc2lv");
    sb.append("bnNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1");
    sb.append("YnNjcmliZSA9IGZ1bmN0aW9uIChjaGFubmVsLCBjYWxsYmFjaykgewogICAgICAgIHZhciBzID0gY2hh");
    sb.append("bm5lbCArICJ8IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLmRlY2lzaW9uc1tzXSA9IGNhbGxiYWNr");
    sb.append("OwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5kZWNpc2lv");
    sb.append("bnNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1");
    sb.append("YnNjcmliZV9yZXNldCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHZhciBkciA9ICJyZXNl");
    sb.append("dHwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMucmVzZXRzW2RyXSA9IGNhbGxiYWNrOwogICAgICAg");
    sb.append("IHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5yZXNldHNbZHJdOwogICAg");
    sb.append("ICAgIH0uYmluZCh0aGlzKTsKICAgICAgfS5iaW5kKG9iaik7CiAgICAgIG9iai5zdWJzY3JpYmVfY2hv");
    sb.append("aWNlID0gZnVuY3Rpb24gKGNoYW5uZWwsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSBjaGFubmVs");
    sb.append("ICsgInwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMuY2hvaWNlX3N1YnNbc10gPSBjYWxsYmFjazsK");
    sb.append("ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGVsZXRlIHRoaXMuY2hvaWNlX3N1");
    sb.append("YnNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLm9u");
    sb.append("Y2hvaWNlcyA9IGZ1bmN0aW9uIChjaGFubmVsLCBjaG9pY2UpIHsKICAgICAgICB2YXIgYXhlID0gW107");
    sb.append("CiAgICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5jaG9pY2Vfc3VicykgewogICAgICAgICAgaWYgKHN1");
    sb.append("Yi5zdGFydHNXaXRoKGNoYW5uZWwgKyAifCIpKSB7CiAgICAgICAgICAgIGlmICghb2JqLmNob2ljZV9z");
    sb.append("dWJzW3N1Yl0oY2hvaWNlKSkgewogICAgICAgICAgICAgIGF4ZS5wdXNoKHN1Yik7CiAgICAgICAgICAg");
    sb.append("IH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVu");
    sb.append("Z3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0ZSBvYmouY2hvaWNlX3N1YnNbYXhlW2tdXTsKICAgICAg");
    sb.append("ICB9CiAgICAgIH07CiAgICAgIG9iai5vbmRlY2lkZSA9IGZ1bmN0aW9uIChvdXRzdGFuZGluZykgewog");
    sb.append("ICAgICAgIHZhciBheGVSZXNldCA9IFtdOwogICAgICAgIGZvciAodmFyIGRyIGluIG9iai5yZXNldHMp");
    sb.append("IHsKICAgICAgICAgIHZhciByID0gb2JqLnJlc2V0c1tkcl07CiAgICAgICAgICBpZiAoIShyKCkpKSB7");
    sb.append("CiAgICAgICAgICAgIGF4ZVJlc2V0LnB1c2goZHIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAg");
    sb.append("ICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZVJlc2V0Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBkZWxl");
    sb.append("dGUgb2JqLnJlc2V0c1theGVSZXNldFtrXV07CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGNoIGlu");
    sb.append("IG9iai5vdXRzdGFuZGluZykgewogICAgICAgICAgb2JqLm91dHN0YW5kaW5nW2NoXSA9IHsgb3B0aW9u");
    sb.append("czogW10gfTsKICAgICAgICB9CiAgICAgICAgdmFyIG4gPSBvdXRzdGFuZGluZy5sZW5ndGg7CiAgICAg");
    sb.append("ICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAgIHZhciBvID0gb3V0c3RhbmRp");
    sb.append("bmdba107CiAgICAgICAgICBvYmoub3V0c3RhbmRpbmdbby5jaGFubmVsXSA9IG87CiAgICAgICAgfQog");
    sb.append("ICAgICAgIGZvciAodmFyIGNoIGluIG9iai5vdXRzdGFuZGluZykgewogICAgICAgICAgdmFyIG91dCA9");
    sb.append("IG9iai5vdXRzdGFuZGluZ1tjaF07CiAgICAgICAgICB2YXIgYXhlID0gW107CiAgICAgICAgICBmb3Ig");
    sb.append("KHZhciBzdWIgaW4gb2JqLmRlY2lzaW9ucykgewogICAgICAgICAgICBpZiAoc3ViLnN0YXJ0c1dpdGgo");
    sb.append("Y2ggKyAifCIpIHx8IHN1Yi5zdGFydHNXaXRoKCItfCIpKSB7CiAgICAgICAgICAgICAgaWYgKCFvYmou");
    sb.append("ZGVjaXNpb25zW3N1Yl0ob3V0LCBjaCkpIHsKICAgICAgICAgICAgICAgIGF4ZS5wdXNoKHN1Yik7CiAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciBr");
    sb.append("ID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAgICBkZWxldGUgb2JqLmRlY2lzaW9u");
    sb.append("c1theGVba11dOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgY29ubmVjdGlvbnNb");
    sb.append("bmFtZV0gPSBvYmo7CiAgICAgIHJldHVybiBvYmo7CiAgICB9CiAgfTsKICBzZWxmLmdldENvbm5lY3Rp");
    sb.append("b25CeU5hbWUgPSBnZXRfY29ubmVjdGlvbl9vYmo7CgogIHNlbGYubWFrZSA9IGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgIHJldHVybiBuZXcgQWRhbWFUcmVlKCk7CiAgfTsKCiAgLy8gSEVMUEVSIHwgc3Vic2NyaWJlIHRo");
    sb.append("ZSBnaXZlbiAnc3ViJyB0byBjaGFuZ2VzIHdpdGhpbiBzdGF0ZSBmb3IgdGhlIGdpdmVuIGZpZWxkIG5h");
    sb.append("bWVkIG5hbWUKICB2YXIgc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCBzdWIpIHsKICAg");
    sb.append("IHZhciBzcyA9IHNlbGYucEkoc3RhdGUsIG5hbWUpOwogICAgdmFyIHMgPSBzc1tzcy5jdXJyZW50XTsK");
    sb.append("ICAgIGlmIChzID09IG51bGwpIHsKICAgICAgY29uc29sZS5lcnJvcihzcy5jdXJyZW50ICsgIiBpcyBu");
    sb.append("b3QgYXZhaWxhYmxlOyB1bmFibGUgdG8gc3Vic2NyaWJlLiIpOwogICAgICByZXR1cm47CiAgICB9CiAg");
    sb.append("ICBpZiAoIkBlIiBpbiBzLmRlbHRhKSB7CiAgICAgIHMuZGVsdGFbIkBlIl0ucHVzaChzdWIpOwogICAg");
    sb.append("fSBlbHNlIHsKICAgICAgcy5kZWx0YVsiQGUiXSA9IFtzdWJdOwogICAgfQogIH07CiAgc2VsZi5zdWJz");
    sb.append("Y3JpYmUgPSBzdWJzY3JpYmU7CgogIC8vIEhFTFBFUiB8IGNyZWF0ZSBmcmVzaCBzdGF0ZQogIHZhciBm");
    sb.append("cmVzaCA9IGZ1bmN0aW9uICh3aGVyZSkgewogICAgcmV0dXJuIHsKICAgICAgdHJlZTogbmV3IEFkYW1h");
    sb.append("VHJlZSgpLAogICAgICBkZWx0YToge30sCiAgICAgIHBhcmVudDogbnVsbCwKICAgICAgcGF0aDogbnVs");
    sb.append("bCwKICAgICAgd2hlcmU6IHdoZXJlCiAgICB9OwogIH07CiAgc2VsZi5mcmVzaCA9IGZyZXNoOwoKICAv");
    sb.append("LyBIRUxQRVI6IHJlbW92ZSBwb3RlbnRpYWxseSBzZW5zaXRpdmUgaW5mb3JtYXRpb24gZnJvbSBhbiBv");
    sb.append("YmplY3QKICB2YXIgc2FmZV9maWx0ZXIgPSBmdW5jdGlvbihvKSB7CiAgICBpZiAoJ3Bhc3N3b3JkJyBp");
    sb.append("biBvKSB7CiAgICAgIGRlbGV0ZSBvWydwYXNzd29yZCddOwogICAgfQogICAgaWYgKCdvbmVfdGltZV9w");
    sb.append("YXNzd29yZCcgaW4gbykgewogICAgICBkZWxldGUgb1snb25lX3RpbWVfcGFzc3dvcmQnXTsKICAgIH0K");
    sb.append("ICAgIHJldHVybiBvOwogIH0KCiAgLy8gSEVMUEVSIHwgY3JlYXRlIGEgbmV3IGRlbHRhIGNvcHkgZnJv");
    sb.append("bSB0aGUgZ2l2ZW4gc3BlY2lmaWMgc3RhdGUgKGkuZS4gZWl0aGVyIGRhdGEgb3IgdmlldykKICB2YXIg");
    sb.append("bmV3X2RlbHRhX2NvcHkgPSBmdW5jdGlvbiAoc3MpIHsKICAgIGlmIChzcyA9PSBudWxsKSB7CiAgICAg");
    sb.append("IHJldHVybiBudWxsOwogICAgfQogICAgdmFyIHBhcmVudCA9IG51bGw7CiAgICBpZiAoc3MucGFyZW50");
    sb.append("ICE9IG51bGwpIHsKICAgICAgcGFyZW50ID0gbmV3X2RlbHRhX2NvcHkoc3MucGFyZW50KTsKICAgIH0K");
    sb.append("ICAgIHZhciBuZXdfZGVsdGEgPSB7fTsKICAgIGlmIChwYXJlbnQgIT0gbnVsbCkgewogICAgICBwYXJl");
    sb.append("bnQuZGVsdGFbc3MucGF0aF0gPSBuZXdfZGVsdGE7CiAgICB9CiAgICByZXR1cm4geyB0cmVlOiBzcy50");
    sb.append("cmVlLCBwYXJlbnQ6IHBhcmVudCwgZGVsdGE6IG5ld19kZWx0YSwgcGF0aDogc3MucGF0aCB9OwogIH07");
    sb.append("CiAgc2VsZi5tYWtlRGVsdGFDb3B5ID0gbmV3X2RlbHRhX2NvcHk7CgogIC8vIEhFTFBFUiB8IGNvbnN0");
    sb.append("cnVjdCBhIHBhdGggdG8KICB2YXIgcGF0aF90byA9IGZ1bmN0aW9uIChzcywgb2JqKSB7CiAgICBpZiAo");
    sb.append("c3MucGFyZW50ICE9IG51bGwpIHsKICAgICAgdmFyIHBlZWwgPSB7fTsKICAgICAgcGVlbFtzcy5wYXRo");
    sb.append("XSA9IG9iajsKICAgICAgcmV0dXJuIHBhdGhfdG8oc3MucGFyZW50LCBwZWVsKTsKICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgIHJldHVybiBvYmo7CiAgICB9CiAgfTsKICBzZWxmLnBhdGhUbyA9IHBhdGhfdG87CgogIC8v");
    sb.append("IEhFTFBFUiB8IGdldCB0aGUgcm9vdCBvZiB0aGUgc3BlY2lmaWMgc3RhdGUgKGkuZS4gZWl0aGVyIHRo");
    sb.append("ZSBkYXRhJ3Mgcm9vdCBvciB0aGUgdmlldydzIHJvb3QpCiAgdmFyIHJvb3Rfb2YgPSBmdW5jdGlvbiAo");
    sb.append("c3MpIHsKICAgIHZhciB4ID0gc3M7CiAgICB3aGlsZSAoeC5wYXJlbnQgIT0gbnVsbCkgewogICAgICB4");
    sb.append("ID0geC5wYXJlbnQ7CiAgICB9CiAgICByZXR1cm4geDsKICB9OwogIHNlbGYucm9vdE9mID0gcm9vdF9v");
    sb.append("ZjsKCiAgLy8gSEVMUEVSIHwgcmVtb3ZlIGFsbCB0aGUgY2hpbGRyZW4gZnJvbSB0aGUgZ2l2ZW4gRE9N");
    sb.append("IG5vZGUKICB2YXIgbnVrZSA9IGZ1bmN0aW9uIChwYXJlbnQpIHsKICAgIHZhciBsYXN0ID0gcGFyZW50");
    sb.append("Lmxhc3RDaGlsZDsKICAgIHdoaWxlIChsYXN0KSB7CiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChsYXN0");
    sb.append("KTsKICAgICAgbGFzdCA9IHBhcmVudC5sYXN0Q2hpbGQ7CiAgICB9CiAgfTsKICBzZWxmLm51a2UgPSBu");
    sb.append("dWtlOwoKICAvLyBIRUxQRVI6IGRlYm91bmNlIHRoZSBnaXZlbiBmdW5jdGlvbmFsIHdoZW4gcmFwaWQg");
    sb.append("ZnVuY3Rpb24gc3ByZWFkIGlzIGV4cGVjdGVkCiAgdmFyIGRlYm91bmNlID0gZnVuY3Rpb24gKG1zLCBm");
    sb.append("b28pIHsKICAgIHZhciBzdGF0dXMgPSB7IGluZmxpZ2h0OiBmYWxzZSwgdGltZW91dDogbnVsbCB9Owog");
    sb.append("ICAgc3RhdHVzLmluZmxpZ2h0ID0gZmFsc2U7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBp");
    sb.append("ZiAoIXN0YXR1cy5pbmZsaWdodCkgewogICAgICAgIHN0YXR1cy5pbmZsaWdodCA9IHRydWU7CiAgICAg");
    sb.append("ICAgc3RhdHVzLnRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAg");
    sb.append("ICBzdGF0dXMuaW5mbGlnaHQgPSBmYWxzZTsKICAgICAgICAgIHN0YXR1cy50aW1lb3V0ID0gbnVsbDsK");
    sb.append("ICAgICAgICAgIGZvbygpOwogICAgICAgIH0sIG1zIC8qIG1zICovKTsgLy8gZGVib3VuY2UgdGhlIHBh");
    sb.append("cmFtZXRlcnMKICAgICAgfQogICAgfTsKICB9OwogIHNlbGYuZGVib3VuY2UgPSBkZWJvdW5jZTsKCiAg");
    sb.append("dmFyIGRlbGF5ID0gZnVuY3Rpb24obXMsIGZvbykgewogICAgdmFyIHN0YXR1cyA9IHsgYXZhaWw6IHRy");
    sb.append("dWUsIGFnYWluOmZhbHNlLCB0aW1lb3V0OiBudWxsIH07CiAgICBzdGF0dXMuZ28gPSBmdW5jdGlvbigp");
    sb.append("IHsKICAgICAgaWYgKHN0YXR1cy5hdmFpbCkgewogICAgICAgIHN0YXR1cy5hdmFpbCA9IGZhbHNlOwog");
    sb.append("ICAgICAgIHN0YXR1cy50aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAg");
    sb.append("ICAgICBzdGF0dXMuYXZhaWwgPSB0cnVlOwogICAgICAgICAgaWYgKHN0YXR1cy5hZ2FpbikgewogICAg");
    sb.append("ICAgICAgICBzdGF0dXMuYWdhaW4gPSBmYWxzZTsKICAgICAgICAgICAgc3RhdHVzLmdvKCk7CiAgICAg");
    sb.append("ICAgICB9CiAgICAgICAgfSwgbXMpOwogICAgICAgIGZvbygpOwogICAgICB9IGVsc2UgewogICAgICAg");
    sb.append("IHN0YXR1cy5hZ2FpbiA9IHRydWU7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gc3RhdHVzLmdvOwog");
    sb.append("IH07CiAgc2VsZi5kZWxheSA9IGRlbGF5OwoKICAvLyBIRUxQRVIgfCBwcmVwYXJlIGEgZnJlZSB1bnN1");
    sb.append("YnNjcmliZSBvYmplY3QKICB2YXIgbWFrZV91bnN1YiA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7");
    sb.append("CiAgICAgIF9fZGF0YTogZnVuY3Rpb24gKCkgewogICAgICB9LCBfX3ZpZXc6IGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgfQogICAgfTsKICB9OwoKICAvLyBIRUxQRVIgfCBhdWdtZW50IGFuIGV4aXN0aW5nIG9iamVj");
    sb.append("dCB3aXRoIHVuc3Vic2NyaWJlIGRhdGEKICB2YXIgYWRkX3Vuc3ViID0gZnVuY3Rpb24gKG9iaikgewog");
    sb.append("ICAgb2JqLl9fZGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgIH07CiAgICBvYmouX192aWV3ID0gZnVuY3Rp");
    sb.append("b24gKCkgewogICAgfTsKICB9OwoKICAvLyBIRUxQRVIgfCBmaXJlIHRoZSB1bnN1YnNjcmliZSBjYWxs");
    sb.append("cyB3aXRoaW4gYW4gb2JqZWN0CiAgdmFyIGZpcmVfdW5zdWIgPSBmdW5jdGlvbiAodW5zdWIpIHsKICAg");
    sb.append("IHVuc3ViLl9fZGF0YSgpOwogICAgdW5zdWIuX192aWV3KCk7CiAgfTsKCiAgdmFyIGlzRW1wdHlEZWx0");
    sb.append("YSA9IGZ1bmN0aW9uKGRlbHRhKSB7CiAgICBpZiAodHlwZW9mKGRlbHRhKSA9PSAiZnVuY3Rpb24iKSB7");
    sb.append("CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkZWx0YSkpIHsK");
    sb.append("ICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkZWx0YS5sZW5ndGg7IGorKykgewogICAgICAgIGlmICgh");
    sb.append("aXNFbXB0eURlbHRhKGRlbHRhW2pdKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YoZGVsdGEpID09ICJvYmplY3QiKSB7CiAgICAgIGZv");
    sb.append("ciAodmFyIGsgaW4gZGVsdGEpIHsKICAgICAgICBpZiAoIWlzRW1wdHlEZWx0YShkZWx0YVtrXSkpIHsK");
    sb.append("ICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0");
    sb.append("cnVlOwogIH0KCiAgLy8gSEVMUEVSIHwgc3Vic2NyaWJlIHRvIHN0YXRlIGFuZCBwb3B1bGF0ZSB1bnN1");
    sb.append("YnNjcmliZSBvYmplY3QKICB2YXIgc3Vic2NyaWJlX3N0YXRlID0gZnVuY3Rpb24gKHN0YXRlLCB1bnN1");
    sb.append("YikgewogICAgLy8gICYmICFpc0VtcHR5RGVsdGEoc3RhdGUuZGF0YSkKICAgIHVuc3ViLl9fZGF0YSA9");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgIH07CiAgICB1bnN1Yi5fX3ZpZXcgPSBmdW5jdGlvbiAoKSB7CiAgICB9");
    sb.append("OwoKICAgIGlmIChzdGF0ZS5kYXRhICE9IG51bGwpIHsKICAgICAgdmFyIGRlbHRhID0gcm9vdF9vZihz");
    sb.append("dGF0ZS5kYXRhKS5kZWx0YTsKICAgICAgaWYgKCFpc0VtcHR5RGVsdGEoZGVsdGEpKSB7CiAgICAgICAg");
    sb.append("dW5zdWIuX19kYXRhID0gc3RhdGUuZGF0YS50cmVlLnN1YnNjcmliZShkZWx0YSk7CiAgICAgIH0KICAg");
    sb.append("IH0KICAgIC8vICAmJiAhaXNFbXB0eURlbHRhKHN0YXRlLnZpZXcpCiAgICBpZiAoc3RhdGUudmlldyAh");
    sb.append("PSBudWxsKSB7CiAgICAgIHZhciBkZWx0YSA9IHJvb3Rfb2Yoc3RhdGUudmlldykuZGVsdGE7CiAgICAg");
    sb.append("IGlmICghaXNFbXB0eURlbHRhKGRlbHRhKSkgewogICAgICAgIHVuc3ViLl9fdmlldyA9IHN0YXRlLnZp");
    sb.append("ZXcudHJlZS5zdWJzY3JpYmUoZGVsdGEpOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8");
    sb.append("IFN3aXRjaCB0byB0aGUgdmlldyBvYmplY3QKICBzZWxmLnBWID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAg");
    sb.append("ICByZXR1cm4geyBzZXJ2aWNlOiBzdGF0ZS5zZXJ2aWNlLCBkYXRhOiBzdGF0ZS5kYXRhLCB2aWV3OiBz");
    sb.append("dGF0ZS52aWV3LCBjdXJyZW50OiAidmlldyIgfTsKICB9OwogIHNlbGYubmV3U3RhdGVWaWV3T2YgPSBz");
    sb.append("ZWxmLnBWOwoKICAvLyBSVU5USU1FIHwgU3dpdGNoIHRvIHRoZSBkYXRhIG9iamVjdAogIHNlbGYucEQg");
    sb.append("PSBmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRh");
    sb.append("dGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6ICJkYXRhIiB9OwogIH07CiAg");
    sb.append("c2VsZi5uZXdTdGF0ZURhdGFPZiA9IHNlbGYucEQ7CgogIC8vIFJVTlRJTUUgfCBTd2l0Y2ggdG8gdGhl");
    sb.append("IHJvb3Qgb2JqZWN0IC8gKFJvb3QpCiAgc2VsZi5wUiA9IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgdmFy");
    sb.append("IG5leHQgPSB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0");
    sb.append("YXRlLnZpZXcsIGN1cnJlbnQ6IHN0YXRlLmN1cnJlbnQgfTsKICAgIHZhciBwcmlvciA9IG5leHRbc3Rh");
    sb.append("dGUuY3VycmVudF07CiAgICB3aGlsZSAocHJpb3IgIT0gbnVsbCkgewogICAgICBuZXh0W3N0YXRlLmN1");
    sb.append("cnJlbnRdID0gcHJpb3I7CiAgICAgIHByaW9yID0gcHJpb3IucGFyZW50OwogICAgfQogICAgcmV0dXJu");
    sb.append("IG5leHQ7CiAgfTsKICBzZWxmLm5ld1N0YXRlUm9vdE9mID0gc2VsZi5wUjsKCiAgLy8gUlVOVElNRSB8");
    sb.append("IC4uLyAoVXApCiAgc2VsZi5wVSA9IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgdmFyIG5leHQgPSB7IHNl");
    sb.append("cnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1");
    sb.append("cnJlbnQ6IHN0YXRlLmN1cnJlbnQgfTsKICAgIHZhciBwcmlvciA9IG5leHRbc3RhdGUuY3VycmVudF07");
    sb.append("CiAgICBpZiAocHJpb3IucGFyZW50ICE9IG51bGwpIHsKICAgICAgbmV4dFtzdGF0ZS5jdXJyZW50XSA9");
    sb.append("IHByaW9yLnBhcmVudDsKICAgIH0KICAgIHJldHVybiBuZXh0OwogIH07CiAgc2VsZi5uZXdTdGF0ZVBh");
    sb.append("cmVudE9mID0gc2VsZi5wVTsKCiAgLy8gUlVOVElNRSB8IGRpdmUgb25lIGxldmVsIEludG8gcGF0aDEv");
    sb.append("cGF0aDIvLi4uLi9wYXRoTgogIHNlbGYucEkgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUpIHsKICAgIHZh");
    sb.append("ciBwcmlvciA9IHN0YXRlW3N0YXRlLmN1cnJlbnRdOwogICAgaWYgKHByaW9yID09IG51bGwpIHsKICAg");
    sb.append("ICAgY29uc29sZS5lcnJvcihzdGF0ZS5jdXJyZW50ICsgIiBpcyBub3QgcHJlc2VudCIpOwogICAgICBy");
    sb.append("ZXR1cm4gc3RhdGU7CiAgICB9CiAgICBpZiAoIShuYW1lIGluIHByaW9yLmRlbHRhKSkgewogICAgICBw");
    sb.append("cmlvci5kZWx0YVtuYW1lXSA9IHt9OwogICAgfQogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6IHN0YXRl");
    sb.append("LnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6IHN0YXRl");
    sb.append("LmN1cnJlbnQgfTsKICAgIG5leHRbc3RhdGUuY3VycmVudF0gPSB7CiAgICAgIHRyZWU6IHByaW9yLnRy");
    sb.append("ZWUsCiAgICAgIGRlbHRhOiBwcmlvci5kZWx0YVtuYW1lXSwKICAgICAgcGFyZW50OiBwcmlvciwKICAg");
    sb.append("ICAgcGF0aDogbmFtZQogICAgfTsKICAgIGlmIChuZXh0LmN1cnJlbnQgPT0gImRhdGEiKSB7CiAgICAg");
    sb.append("IG5leHQuZGF0YS5jb25uZWN0aW9uID0gcHJpb3IuY29ubmVjdGlvbjsKICAgIH0KICAgIHJldHVybiBu");
    sb.append("ZXh0OwogIH07CiAgc2VsZi5uZXdTdGF0ZURpdmVJbnRvID0gc2VsZi5wSTsKCiAgLy8gUlVOVElNRSB8");
    sb.append("IGV4dGVuZCB0aGUgZ2l2ZW4gc3RhdGUgd2l0aCB0aGUgdmlldyBoYXZpbmcgYSBzZXBhcmF0ZSBjaGls");
    sb.append("ZAogIHNlbGYucEVWID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lKSB7CiAgICBpZiAoIShuYW1lIGluIHN0");
    sb.append("YXRlLnZpZXcuZGVsdGEpKSB7CiAgICAgIHN0YXRlLnZpZXcuZGVsdGFbbmFtZV0gPSB7fTsKICAgIH0K");
    sb.append("ICAgIHJldHVybiB7CiAgICAgIHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsCiAgICAgIGRhdGE6IHN0YXRl");
    sb.append("LmRhdGEsCiAgICAgIHZpZXc6IHsKICAgICAgICB0cmVlOiBzdGF0ZS52aWV3LnRyZWUsCiAgICAgICAg");
    sb.append("ZGVsdGE6IHN0YXRlLnZpZXcuZGVsdGFbbmFtZV0sCiAgICAgICAgcGFyZW50OiBzdGF0ZS52aWV3LAog");
    sb.append("ICAgICAgIHBhdGg6IG5hbWUKICAgICAgfSwKICAgICAgY3VycmVudDogc3RhdGUuY3VycmVudAogICAg");
    sb.append("fTsKICB9OwogIHNlbGYubmV3U3RhdGVDcmVhdGVWaWV3Q2hpbGQgPSBzZWxmLnBFVjsKCiAgc2VsZi5w");
    sb.append("SUUgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIGV4cGFuZFZpZXcpIHsKICAgIHZhciBuZXh0ID0gc2Vs");
    sb.append("Zi5wSShzdGF0ZSwgbmFtZSk7CiAgICBpZiAoZXhwYW5kVmlldykgewogICAgICByZXR1cm4gc2VsZi5w");
    sb.append("RVYobmV4dCwgbmFtZSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmV4dDsKICAgIH0KICB9OwoK");
    sb.append("ICB2YXIgZm9yayA9IGZ1bmN0aW9uIChwcmlvclN0YXRlKSB7CiAgICB2YXIgc3RhdGUgPSB7CiAgICAg");
    sb.append("IHNlcnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwKICAgICAgZGF0YTogbmV3X2RlbHRhX2NvcHkocHJp");
    sb.append("b3JTdGF0ZS5kYXRhKSwKICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwK");
    sb.append("ICAgICAgY3VycmVudDogcHJpb3JTdGF0ZS5jdXJyZW50CiAgICB9OwogICAgaWYgKHN0YXRlLmRhdGEg");
    sb.append("IT0gbnVsbCkgewogICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24gPSBwcmlvclN0YXRlLmRhdGEuY29u");
    sb.append("bmVjdGlvbjsKICAgIH0KICAgIHJldHVybiBzdGF0ZTsKICB9OwoKICAvLyBSVU5USU1FIHwgc3Vic2Ny");
    sb.append("aWJlIGJldHdlZW4gdGhlIHN0YXRlIGFuZCB0aGUgb2JqZWN0LgogIC8vIFdoZW4gdGhlIG1lbWJlciBm");
    sb.append("aWVsZCB3aXRoaW4gc3RhdGUgb2YgbmFtZSBjaGFuZ2VzLCBjb3B5IHRoYXQgdmFsdWUgaW50byB0aGUg");
    sb.append("b2JqIGFuZCBydW4gcmVjb21wdXRlKCkKICBzZWxmLlkgPSBmdW5jdGlvbiAoc3RhdGUsIG9iaiwgbmFt");
    sb.append("ZSwgcmVjb21wdXRlKSB7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIG9ialtu");
    sb.append("YW1lXSA9IHZhbHVlOwogICAgICByZWNvbXB1dGUoKTsKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUs");
    sb.append("IG5hbWUsIHN1Yik7CiAgfTsKCiAgc2VsZi5ZMiA9IGZ1bmN0aW9uIChzdGF0ZSwgciwga2V5LCBuYW1l");
    sb.append("LCByZWNvbXB1dGUpIHsKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG9i");
    sb.append("aiA9IHIuX1trZXldOwogICAgICBvYmpbbmFtZV0gPSB2YWx1ZTsKICAgICAgcmVjb21wdXRlKG9iaik7");
    sb.append("CiAgICAgIHJldHVybiB0cnVlOwogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsK");
    sb.append("ICB9OwoKICAvLyBSVU5USU1FOiBidWlsZCBhbiByeG9iagogIHNlbGYuUlggPSBmdW5jdGlvbiAodmFy");
    sb.append("cykgewogICAgdmFyIG8gPSB7fTsKICAgIG8uXyA9IHt9OwogICAgZm9yICh2YXIgayA9IDA7IGsgPCB2");
    sb.append("YXJzLmxlbmd0aDsgaysrKSB7CiAgICAgIG8uX1t2YXJzW2tdXSA9IHt9OwogICAgfQogICAgby5fXyA9");
    sb.append("IGZ1bmN0aW9uKCkge307CiAgICByZXR1cm4gbzsKICB9OwoKICAvLyBSVU5USU1FIHwgSnVzdCBzdWJz");
    sb.append("Y3JpYmVlIHZhbHVlIHRvIHRoZSBvYmplY3QgZmllbGQgb2YgbmFtZSAobm8tcmVjb21wdXRlKQogIHNl");
    sb.append("bGYuWVMgPSBmdW5jdGlvbiAoc3RhdGUsIG9iaiwgbmFtZSkgewogICAgdmFyIHN1YiA9IGZ1bmN0aW9u");
    sb.append("ICh2YWx1ZSkgewogICAgICBvYmpbbmFtZV0gPSB2YWx1ZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9");
    sb.append("OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJTUUgfCAiVGV4");
    sb.append("dCIKICBzZWxmLlQgPSBmdW5jdGlvbiAodHgpIHsKICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0");
    sb.append("Tm9kZSh0eCk7CiAgfTsKCiAgLy8gY29udmVydCBhIHZhbHVlIGludG8gYSBib29sZWFuCiAgc2VsZi5C");
    sb.append("ID0gZnVuY3Rpb24odmFsKSB7CiAgICBpZiAodmFsID09PSB0cnVlKSB7CiAgICAgIHJldHVybiB0cnVl");
    sb.append("OwogICAgfQogICAgcmV0dXJuIHZhbCA9PSAidHJ1ZSI7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx2aWV3");
    sb.append("LXdyaXRlIG5hbWU9IiIgdmFsdWU9IiI+CiAgc2VsZi5WVyA9IGZ1bmN0aW9uKHN0YXRlLCBuYW1lLCBy");
    sb.append("eE9iaikgewogICAgcnhPYmouX18gPSBkZWJvdW5jZSg1MCwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBv");
    sb.append("YmogPSB7fTsKICAgICAgdmFyIHZhbHVlID0gcnhPYmoudmFsdWU7CiAgICAgIGlmICh0eXBlb2YgKHZh");
    sb.append("bHVlKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgb2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAgfSBl");
    sb.append("bHNlIHsKICAgICAgICBvYmpbbmFtZV0gPSB2YWx1ZTsKICAgICAgfQogICAgICB2YXIgZGVsdGEgPSBw");
    sb.append("YXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoZGVsdGEp");
    sb.append("OwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxsb29rdXAgcGF0aD0uLi4+CiAgc2VsZi5MID0g");
    sb.append("ZnVuY3Rpb24gKHN0YXRlLCBuYW1lKSB7CiAgICB2YXIgZG9tID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5v");
    sb.append("ZGUoIiIpOwogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBkb20ubm9kZVZhbHVl");
    sb.append("ID0gdmFsdWU7CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogICAgcmV0dXJu");
    sb.append("IGRvbTsKICB9OwoKICAvLyBSVU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLiB0cmFuc2Zvcm09IiR0cmFu");
    sb.append("c2Zvcm0iIC8+CiAgc2VsZi5MVCA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSwgdHJhbnNmb3JtKSB7CiAg");
    sb.append("ICB2YXIgZG9tID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpOwogICAgdmFyIHN1YiA9IGZ1bmN0");
    sb.append("aW9uICh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAgICAgIGRvbS5ub2RlVmFs");
    sb.append("dWUgPSB0cmFuc2Zvcm0odmFsdWUpOwogICAgICB9CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBu");
    sb.append("YW1lLCBzdWIpOwogICAgcmV0dXJuIGRvbTsKICB9OwoKICBzZWxmLkxoID0gZnVuY3Rpb24gKHN0YXRl");
    sb.append("LCBuYW1lKSB7CiAgICB2YXIgZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAg");
    sb.append("dmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAg");
    sb.append("ICAgIGRvbS5pbm5lckhUTUwgPSB2YWx1ZTsKICAgICAgfQogICAgfTsKICAgIHN1YnNjcmliZShzdGF0");
    sb.append("ZSwgbmFtZSwgc3ViKTsKICAgIHJldHVybiBkb207CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxsb29rdXAg");
    sb.append("cGF0aD0uLi4gdHJhbnNmb3JtPSIkdHJhbnNmb3JtIiAvPgogIHNlbGYuTFRkVCA9IGZ1bmN0aW9uIChz");
    sb.append("dGF0ZSwgbmFtZSwgdHJhbnNmb3JtLCBmcmVxKSB7CiAgICB2YXIgZG9tID0gZG9jdW1lbnQuY3JlYXRl");
    sb.append("VGV4dE5vZGUoIiIpOwogICAgLy8gY3JlYXRlIHRoZSBuZXh1cyBvYmplY3QKICAgIHZhciBvYmogPSB7");
    sb.append("fTsKICAgIG9iai5mcmVxID0gZnJlcTsKICAgIG9iai52YWx1ZSA9ICIiOwoKICAgIC8vIHVwZGF0ZSB3");
    sb.append("aWxsIGV4ZWN1dGUgdGhlIHRyYW5zZm9ybSBvbiB0aGUgdmFsdWUKICAgIG9iai51cGRhdGUgPSBmdW5j");
    sb.append("dGlvbigpIHsKICAgICAgZG9tLm5vZGVWYWx1ZSA9IHRyYW5zZm9ybSh0aGlzLnZhbHVlKTsKICAgIH0u");
    sb.append("YmluZChvYmopOwoKICAgIC8vIHN1YnNjcmlwdGlvbiB3aWxsIHN5bmMgdGhlIHZhbHVlCiAgICB2YXIg");
    sb.append("c3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAg");
    sb.append("dGhpcy52YWx1ZSA9IHZhbHVlOwogICAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgIH0KICAgIH0uYmlu");
    sb.append("ZChvYmopOwoKICAgIC8vIHJlZnJlc2ggd2lsbCByZS1leGVjdXRlIHRoZSB1cGRhdGUgKGFuZCB0aHVz");
    sb.append("IHRoZSB0cmFuc2Zvcm0pCiAgICBvYmoucmVmcmVzaCA9IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnVw");
    sb.append("ZGF0ZSgpOwogICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyhkb20pKSB7IC8vIHdpbGwgcnVu");
    sb.append("IHNvIGxvbmcgYXMgdGhlIERPTSBjb250YWlucyB0aGUgbm9kZSB3ZSBtYW5pcHVsYXRlZAogICAgICAg");
    sb.append("IHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMucmVmcmVzaCwgdGhpcy5mcmVxKTsKICAgICAgfQogICAgfS5i");
    sb.append("aW5kKG9iaik7CiAgICAvLyBraWNrIG9mZiB0aGUgYXV0byB0cmFuc2Zvcm0KICAgIHdpbmRvdy5zZXRU");
    sb.append("aW1lb3V0KG9iai5yZWZyZXNoLCBmcmVxKTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsK");
    sb.append("ICAgIHJldHVybiBkb207CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0YWc+CiAgc2VsZi5FID0gZnVuY3Rp");
    sb.append("b24gKHRhZywgbnMpIHsKICAgIGlmIChucyA9PSB1bmRlZmluZWQgfHwgbnMgPT0gbnVsbCkgewogICAg");
    sb.append("ICB2YXIgZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpOwogICAgICBpZiAodGFnID09ICJz");
    sb.append("ZWxlY3QiKSB7CiAgICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkg");
    sb.append("eyBkb20ucnh2YWx1ZSA9IGRvbS52YWx1ZTsgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRvbTsKICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgIHZhciByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsIHRh");
    sb.append("Zyk7CiAgICAgIHJlc3VsdC5zZXRBdHRyaWJ1dGUoInhtbG5zIiwgbnMpOwogICAgICByZXR1cm4gcmVz");
    sb.append("dWx0OwogICAgfQogIH07CgogIHNlbGYuQ1N0ID0gZnVuY3Rpb24gKHBhcmVudCwgc3RhdGUsIGNoaWxk");
    sb.append("TWFrZXJDb25uZWN0ZWQsIGNoaWxkTWFrZXJEaXNjb25uZWN0ZWQpIHsKICAgIHZhciB1bnN1YiA9IG1h");
    sb.append("a2VfdW5zdWIoKTsKICAgIGlmICghc3RhdGUuZGF0YS5jb25uZWN0aW9uKSB7CiAgICAgIHJldHVybjsK");
    sb.append("ICAgIH0KICAgIHN0YXRlLmRhdGEuY29ubmVjdGlvbi5jb25uZWN0ZWQoZnVuY3Rpb24oY3MpIHsKICAg");
    sb.append("ICAgaWYgKHRoaXMucHJpb3IgPT0gY3MpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbnVr");
    sb.append("ZShwYXJlbnQpOwogICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgdGhpcy5wcmlvciA9IGNzOwog");
    sb.append("ICAgICB2YXIgbmV3U3RhdGUgPSBmb3JrKHN0YXRlKTsKICAgICAgaWYgKGNzKSB7CiAgICAgICAgY2hp");
    sb.append("bGRNYWtlckNvbm5lY3RlZChwYXJlbnQsIG5ld1N0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBj");
    sb.append("aGlsZE1ha2VyRGlzY29ubmVjdGVkKHBhcmVudCwgbmV3U3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNj");
    sb.append("cmliZV9zdGF0ZShuZXdTdGF0ZSwgdW5zdWIpOwogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5jb250");
    sb.append("YWlucyhwYXJlbnQpOwogICAgfS5iaW5kKHtwcmlvcjpudWxsfSkpOwogIH07CgogIC8vIFJVTlRJTUUg");
    sb.append("fCA8bG9jYWwtc3RvcmFnZS1wb2xsIGtleT0ka2V5IFttcz0kbXNdPgogIHNlbGYuTG9TdFBvID0gZnVu");
    sb.append("Y3Rpb24ocGFyZW50LCBwcmlvclN0YXRlLCByeE9iaiwgY2hpbGRNYWtlckZvdW5kLCBjaGlsZE1ha2Vy");
    sb.append("Tm90Rm91bmQpIHsKICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIHZhciBzbSA9IHt9Owog");
    sb.append("ICAgc20ua2V5ID0gbnVsbDsKICAgIHNtLm1zID0gNTAwMDsKICAgIHNtLmxhc3QgPSAiISI7CiAgICBz");
    sb.append("bS5wID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmICh0aGlzLmtleSA9PSBudWxsKSB7CiAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICB9CiAgICAgIHZhciB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMua2V5");
    sb.append("KTsKICAgICAgaWYgKHZhbHVlID09IHRoaXMubGFzdCkgewogICAgICAgIHJldHVybjsKICAgICAgfQog");
    sb.append("ICAgICB0aGlzLmxhc3QgPSB2YWx1ZTsKICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgIG51a2Uo");
    sb.append("cGFyZW50KTsKICAgICAgdmFyIHRyZWUgPSBuZXcgQWRhbWFUcmVlKCk7CiAgICAgIHZhciBzdGF0ZSA9");
    sb.append("IHsKICAgICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2UsCiAgICAgICAgZGF0YTogeyBjb25u");
    sb.append("ZWN0aW9uOiBwcmlvclN0YXRlLmNvbm5lY3Rpb24sIHRyZWU6IHRyZWUsIGRlbHRhOiB7fSwgcGFyZW50");
    sb.append("OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0");
    sb.append("ZS52aWV3KSwKICAgICAgICBjdXJyZW50OiAiZGF0YSIKICAgICAgfTsKICAgICAgaWYgKHZhbHVlID09");
    sb.append("IG51bGwpIHsKICAgICAgICBjaGlsZE1ha2VyTm90Rm91bmQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAg");
    sb.append("c3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hpbGRN");
    sb.append("YWtlckZvdW5kKHBhcmVudCwgc3RhdGUpOwogICAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5z");
    sb.append("dWIpOwogICAgICAgIHRyZWUudXBkYXRlKHRyZWUuTWFrZURlbHRhKEpTT04ucGFyc2UodmFsdWUpKSk7");
    sb.append("CiAgICAgIH0KCiAgICB9LmJpbmQoc20pOwogICAgcnhPYmouX18gPSBkZWJvdW5jZSg1MCwgZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICBpZiAoJ2tleScgaW4gcnhPYmopIHsKICAgICAgICB0aGlzLmtleSA9IHJ4T2Jq");
    sb.append("LmtleTsKICAgICAgfQogICAgICBpZiAoJ21zJyBpbiByeE9iaikgewogICAgICAgIHRoaXMubXMgPSBw");
    sb.append("YXJzZUludChyeE9iai5tcyk7CiAgICAgICAgaWYgKGlzTmFOKHRoaXMubXMpKSB7CiAgICAgICAgICB0");
    sb.append("aGlzLm1zID0gNTAwMDsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5wKCk7CiAgICB9LmJpbmQo");
    sb.append("c20pKTsKCiAgICBzbS50aW1lb3V0ID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmIChkb2N1bWVudC5ib2R5");
    sb.append("LmNvbnRhaW5zKHBhcmVudCkpIHsKICAgICAgICB0aGlzLnAoKTsKICAgICAgICB3aW5kb3cuc2V0VGlt");
    sb.append("ZW91dCh0aGlzLnRpbWVvdXQsIHRoaXMubXMpOwogICAgICB9CiAgICB9LmJpbmQoc20pOwogICAgd2lu");
    sb.append("ZG93LnNldFRpbWVvdXQoc20udGltZW91dCwgNTApOwogIH07CgogIC8vIFJVTlRJTUUgfCA8ZG9jdW1l");
    sb.append("bnQtZ2V0IHNwYWNlPSIkc3BhY2UiIGtleT0iJGtleSIgdXJsPSIkcGF0aCIgc2VhcmNoOng9Ii4uLiIg");
    sb.append("Li4uPgogIHNlbGYuRGNHID0gZnVuY3Rpb24ocGFyZW50LCBwcmlvclN0YXRlLCByeE9iaiwgY2hpbGRN");
    sb.append("YWtlckZldGNoZWQsIGNoaWxkTWFrZXJGYWlsZWQpIHsKICAgIC8vIFRPRE8KICB9OwoKICAvLyBSVU5U");
    sb.append("SU1FIHwgPGRvbWFpbi1nZXQgdXJsPSJwYXRoIiBzZWFyY2g6eD0iLi4uIiAuLi4+CiAgc2VsZi5ERyA9");
    sb.append("IGZ1bmN0aW9uKHBhcmVudCwgcHJpb3JTdGF0ZSwgcnhPYmosIGNoaWxkTWFrZXJGZXRjaGVkLCBjaGls");
    sb.append("ZE1ha2VyRmFpbGVkLCBkZWxheUxpbWl0KSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAg");
    sb.append("ICB2YXIgZGVsYXlUb1VzZSA9IHR5cGVvZihkZWxheUxpbWl0KSA9PSAibnVtYmVyIiA/IGRlbGF5TGlt");
    sb.append("aXQgOiAyNTA7CiAgICB2YXIgc2VsZlBhcmVudCA9IHNlbGY7CiAgICByeE9iai5fXyA9IGRlYm91bmNl");
    sb.append("KDUwLCBkZWxheShkZWxheVRvVXNlLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghKCd1cmwnIGluIHJ4");
    sb.append("T2JqKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgYXJncyA9IFtdOwogICAgICB2");
    sb.append("YXIgaWRlbnRpdHkgPSBudWxsOwogICAgICBmb3IgKHZhciBhcmcgaW4gcnhPYmopIHsKICAgICAgICB2");
    sb.append("YXIgdmFsID0gcnhPYmpbYXJnXTsKICAgICAgICBzd2l0Y2ggKGFyZykgewogICAgICAgICAgY2FzZSAi");
    sb.append("X18iOgogICAgICAgICAgY2FzZSAiXyI6CiAgICAgICAgICBjYXNlICJ1cmwiOgogICAgICAgICAgY2Fz");
    sb.append("ZSAicmVkaXJlY3QiOgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImlkZW50aXR5IjoK");
    sb.append("ICAgICAgICAgICAgaWYgKHR5cGVvZih2YWwpID09ICJzdHJpbmciKSB7CiAgICAgICAgICAgICAgdmFy");
    sb.append("IGlkTG9va3VwID0gc2VsZlBhcmVudC5JRChyeE9iai5pZGVudGl0eSwgZnVuY3Rpb24gKCkgewogICAg");
    sb.append("ICAgICAgICAgICAgcmV0dXJuIHJ4T2JqLnJlZGlyZWN0OwogICAgICAgICAgICAgIH0pOwogICAgICAg");
    sb.append("ICAgICAgIGlmIChpZExvb2t1cC5hYm9ydCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgICAgICBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgICAg");
    sb.append("ICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgYXJn");
    sb.append("cy5wdXNoKGFyZyArICI9IiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpKTsKICAgICAgICB9CiAgICAg");
    sb.append("IH0KICAgICAgdmFyIHVybCA9IHJ4T2JqLnVybCArIChhcmdzLmxlbmd0aCA+IDAgPyAiPyIgKyBhcmdz");
    sb.append("LmpvaW4oIiYiKSA6ICIiKTsKICAgICAgdGhpcy5nZW4gKys7CiAgICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIHhodHRwLm9ucmVhZHlz");
    sb.append("dGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy54aHR0cC5yZWFkeVN0YXRl");
    sb.append("ID09IDQgJiYgdGhpcy5nZW4gPT0gc2VsZi5nZW4pIHsKICAgICAgICAgIGZpcmVfdW5zdWIodW5zdWIp");
    sb.append("OwogICAgICAgICAgbnVrZShwYXJlbnQpOwogICAgICAgICAgdmFyIHRyZWUgPSBuZXcgQWRhbWFUcmVl");
    sb.append("KCk7CiAgICAgICAgICB2YXIgc3RhdGUgPSB7CiAgICAgICAgICAgIHNlcnZpY2U6IHByaW9yU3RhdGUu");
    sb.append("c2VydmljZSwKICAgICAgICAgICAgZGF0YTogeyBjb25uZWN0aW9uOiBwcmlvclN0YXRlLmNvbm5lY3Rp");
    sb.append("b24sIHRyZWU6IHRyZWUsIGRlbHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAg");
    sb.append("ICAgICAgIHZpZXc6IG5ld19kZWx0YV9jb3B5KHByaW9yU3RhdGUudmlldyksCiAgICAgICAgICAgIGN1");
    sb.append("cnJlbnQ6ICJkYXRhIgogICAgICAgICAgfTsKCiAgICAgICAgICBpZiAodGhpcy54aHR0cC5zdGF0dXMg");
    sb.append("PT0gMjAwKSB7CiAgICAgICAgICAgIHZhciB0eXBlID0gdGhpcy54aHR0cC5nZXRSZXNwb25zZUhlYWRl");
    sb.append("cigiQ29udGVudC1UeXBlIik7CiAgICAgICAgICAgIGlmICh0eXBlID09ICJhcHBsaWNhdGlvbi9qc29u");
    sb.append("IikgewogICAgICAgICAgICAgIHZhciB0b1B1c2ggPSB0cmVlLk1ha2VEZWx0YShKU09OLnBhcnNlKHRo");
    sb.append("aXMueGh0dHAucmVzcG9uc2VUZXh0KSk7CiAgICAgICAgICAgICAgY2hpbGRNYWtlckZldGNoZWQocGFy");
    sb.append("ZW50LCBzdGF0ZSk7CiAgICAgICAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAg");
    sb.append("ICAgICAgICAgICAgdHJlZS51cGRhdGUodG9QdXNoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAg");
    sb.append("ICAgICAgICBjaGlsZE1ha2VyRmFpbGVkKHBhcmVudCwgc3RhdGUpOwogICAgICAgICAgICAgIHN1YnNj");
    sb.append("cmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2Ugewog");
    sb.append("ICAgICAgICAgICBjaGlsZE1ha2VyRmFpbGVkKHBhcmVudCwgc3RhdGUpOwogICAgICAgICAgICBzdWJz");
    sb.append("Y3JpYmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0uYmlu");
    sb.append("ZCh7Z2VuOnNlbGYuZ2VuLCB4aHR0cDp4aHR0cH0pOwogICAgICB4aHR0cC5vcGVuKCJHRVQiLCAgc2Vs");
    sb.append("Zi5iYXNlICsgIi9+ZCIgKyB1cmwsIHRydWUpOwogICAgICBpZiAoaWRlbnRpdHkgIT0gbnVsbCkgewog");
    sb.append("ICAgICAgIHhodHRwLnNldFJlcXVlc3RIZWFkZXIoIkF1dGhvcml6YXRpb24iLCAiQmVhcmVyICIgKyBp");
    sb.append("ZGVudGl0eSk7CiAgICAgIH0KICAgICAgeGh0dHAud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsKICAgICAg");
    sb.append("eGh0dHAuc2VuZCgpOwogICAgfS5iaW5kKHt1cmw6IiIsIGdlbjowLCBiYXNlOnNlbGYucHJvdG9jb2wg");
    sb.append("KyAiLy8iICsgc2VsZi5ob3N0fSkpKTsKICAgIHJ4T2JqLl9fKCk7CiAgfTsKCiAgLy8gUlVOVElNRSB8");
    sb.append("IDxwaWNrIG5hbWU9Li4uPgogIHNlbGYuUCA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIHJ4");
    sb.append("T2JqLCBjaGlsZE1ha2VyQ29ubmVjdGVkLCBjaGlsZE1ha2VyRGlzY29ubmVjdGVkLCBrZWVwT3Blbikg");
    sb.append("ewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgcnhPYmouX18gPSBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgIGlmICghKCduYW1lJyBpbiByeE9iaikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAg");
    sb.append("ICAgaWYgKHRoaXMubmFtZSA9PSByeE9iai5uYW1lKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAg");
    sb.append("ICAgIHZhciBjbyA9IGdldF9jb25uZWN0aW9uX29iaihyeE9iai5uYW1lKTsKICAgICAgdGhpcy5uYW1l");
    sb.append("ID0gcnhPYmoubmFtZTsKICAgICAgY28uY29ubmVjdGVkKGZ1bmN0aW9uIChjcykgewogICAgICAgIGlm");
    sb.append("ICh0aGlzLnJlbmRlcmVkICYmIGtlZXBPcGVuKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQog");
    sb.append("ICAgICAgIG51a2UocGFyZW50KTsKICAgICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgICB2YXIg");
    sb.append("c3RhdGUgPSB7CiAgICAgICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2UsCiAgICAgICAgICBk");
    sb.append("YXRhOiB7IGNvbm5lY3Rpb246IGNvLCB0cmVlOiBjby50cmVlLCBkZWx0YToge30sIHBhcmVudDogbnVs");
    sb.append("bCwgcGF0aDogbnVsbCB9LAogICAgICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52");
    sb.append("aWV3KSwKICAgICAgICAgIGN1cnJlbnQ6ICJkYXRhIgogICAgICAgIH07CiAgICAgICAgaWYgKGNzKSB7");
    sb.append("CiAgICAgICAgICB0aGlzLnJlbmRlcmVkID0gdHJ1ZTsKICAgICAgICAgIGNoaWxkTWFrZXJDb25uZWN0");
    sb.append("ZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNoaWxkTWFrZXJEaXNj");
    sb.append("b25uZWN0ZWQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgfQogICAgICAgIHN1YnNjcmliZV9zdGF0ZShz");
    sb.append("dGF0ZSwgdW5zdWIpOwogICAgICAgIC8vIFRPRE86IHJldHVybiBmYWxzZSB0byB1bnN1YgogICAgICAg");
    sb.append("IHJldHVybiB0cnVlOwogICAgICB9LmJpbmQodGhpcykpOwogICAgfS5iaW5kKHsgbmFtZTogIiIsIHJl");
    sb.append("bmRlcmVkOmZhbHNlIH0pOwogIH07CgogIC8vIFJVTlRJTUUgfCA8dGVtcGxhdGUgbmFtZT0iLi4uIj4K");
    sb.append("ICBzZWxmLlRQID0gZnVuY3Rpb24gKG5hbWUsIGZvbykgewogICAgdGVtcGxhdGVzW25hbWVdID0gZm9v");
    sb.append("OwogIH07CgogIC8vIGNvbmZpZzppZj0ia2V5PXZhbHVlIgogIHNlbGYuQ0ZHdCA9IGZ1bmN0aW9uIChj");
    sb.append("b25maWcsIGtleSwgdmFsdWUpIHsKICAgIGlmIChrZXkgaW4gY29uZmlnKSB7CiAgICAgIHJldHVybiBj");
    sb.append("b25maWdba2V5XSA9PSB2YWx1ZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9OwogIC8vIGNvbmZp");
    sb.append("ZzppZj0ia2V5IgogIHNlbGYuQ0ZHYiA9IGZ1bmN0aW9uIChjb25maWcsIGtleSkgewogICAgY29uc29s");
    sb.append("ZS5sb2coY29uZmlnKTsKICAgIGlmIChrZXkgaW4gY29uZmlnKSB7CiAgICAgIHJldHVybiBjb25maWdb");
    sb.append("a2V5XSA9PT0gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9OwoKICAvLyBSVU5USU1FIHwg");
    sb.append("PHRhZyByeDp0ZW1wbGF0ZT0kbmFtZT4KICBzZWxmLlVUID0gZnVuY3Rpb24gKHBhcmVudCwgc3RhdGUs");
    sb.append("IG5hbWUsIGNoaWxkX21ha2VyLCBjZmcpIHsKICAgIHZhciBmb28gPSB0ZW1wbGF0ZXNbbmFtZV07CiAg");
    sb.append("ICBpZiAodHlwZW9mKGZvbykgPT0gImZ1bmN0aW9uIikgewogICAgICBmb28ocGFyZW50LCBzdGF0ZSwg");
    sb.append("Y2hpbGRfbWFrZXIsIGNmZyk7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmVycm9yKCJmYWlsZWQg");
    sb.append("dG8gZmluZCB0ZW1wbGF0ZTogIiArIG5hbWUpOwogICAgfQogIH07CgogIC8vIFJVTlRJTUUgfCA8dGFn");
    sb.append("IHJ4OnN3aXRjaD1wYXRoIC4uPgogIHNlbGYuU1cgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRl");
    sb.append("LCBuYW1lLCBjaGlsZHJlbk1ha2VyKSB7CiAgICB2YXIgc3dzdCA9IHsgcHJpb3I6IG51bGwgfTsKICAg");
    sb.append("IGFkZF91bnN1Yihzd3N0KTsKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgaWYg");
    sb.append("KHZhbHVlID09IHRoaXMucHJpb3IpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5w");
    sb.append("cmlvciA9IHZhbHVlOwogICAgICBmaXJlX3Vuc3ViKHRoaXMpOwogICAgICBudWtlKHBhcmVudCk7CiAg");
    sb.append("ICAgIHZhciBzdGF0ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGNoaWxkcmVuTWFrZXIocGFyZW50");
    sb.append("LCBzZWxmLnBEKHN0YXRlKSwgIiIgKyB2YWx1ZSk7CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwg");
    sb.append("dGhpcyk7CiAgICB9LmJpbmQoc3dzdCk7CiAgICBzdWJzY3JpYmUocHJpb3JTdGF0ZSwgbmFtZSwgc3Vi");
    sb.append("KTsKICB9OwoKICAvLyBSVU5USU1FIHwgPHRhZyByeDppdGVyYXRlPXBhdGggLi4uPgogIHNlbGYuSVQg");
    sb.append("PSBmdW5jdGlvbiAocGFyZW50RG9tLCBzdGF0ZSwgbmFtZSwgZXhwYW5kVmlldywgbWFrZXIsIGhpZGVP");
    sb.append("blplcm8pIHsKICAgIHZhciBpdF9zdGF0ZSA9IHNlbGYucElFKHN0YXRlLCBuYW1lLCBleHBhbmRWaWV3");
    sb.append("KTsKICAgIHZhciBkb21CeUtleSA9IHt9OwogICAgdmFyIHZpZXdVblN1YkJ5S2V5ID0ge307CiAgICB2");
    sb.append("YXIga2lsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIga2V5IGluIHZpZXdVblN1YkJ5S2V5");
    sb.append("KSB7CiAgICAgICAgZmlyZV91bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAgICAgICBkZWxldGUg");
    sb.append("dmlld1VuU3ViQnlLZXlba2V5XTsKICAgICAgfQogICAgICBmb3IgKHZhciBrZXkgaW4gZG9tQnlLZXkp");
    sb.append("IHsKICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsKICAgICAgfQogICAgfTsKICAgIGlmIChoaWRl");
    sb.append("T25aZXJvKSB7CiAgICAgIHBhcmVudERvbS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgfQoKICAg");
    sb.append("IHZhciBzaWduYWxzID0ge2lzTmV3OmZhbHNlfTsKCiAgICB2YXIgc3ViID0gewogICAgICAiKyI6IGZ1");
    sb.append("bmN0aW9uIChrZXkpIHsKICAgICAgICB2YXIgbmV3X3N0YXRlID0gZm9yayhzZWxmLnBJRShpdF9zdGF0");
    sb.append("ZSwga2V5LCBleHBhbmRWaWV3KSk7CiAgICAgICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAg");
    sb.append("ICAgIHZhciBkb20gPSBtYWtlcihuZXdfc3RhdGUpOwogICAgICAgIHNpZ25hbHMuaXNOZXcgPSB0cnVl");
    sb.append("OwogICAgICAgIGRvbUJ5S2V5W2tleV0gPSBkb207CiAgICAgICAgdmlld1VuU3ViQnlLZXlba2V5XSA9");
    sb.append("IHVuc3ViOwogICAgICAgIHBhcmVudERvbS5hcHBlbmQoZG9tKTsKICAgICAgICB2YXIgaXRlbV9kZWx0");
    sb.append("YSA9IG5ld19zdGF0ZS5kYXRhLmRlbHRhOwogICAgICAgIG5ld19zdGF0ZS5kYXRhLmRlbHRhID0ge307");
    sb.append("CiAgICAgICAgaWYgKG5ld19zdGF0ZS5kYXRhLnBhcmVudCAmJiBuZXdfc3RhdGUuZGF0YS5wYXRoICYm");
    sb.append("IG5ld19zdGF0ZS5kYXRhLnBhcmVudC5kZWx0YSkgewogICAgICAgICAgbmV3X3N0YXRlLmRhdGEucGFy");
    sb.append("ZW50LmRlbHRhW25ld19zdGF0ZS5kYXRhLnBhdGhdID0gbmV3X3N0YXRlLmRhdGEuZGVsdGE7CiAgICAg");
    sb.append("ICAgfQogICAgICAgIHN1YnNjcmliZV9zdGF0ZShuZXdfc3RhdGUsIHVuc3ViKTsKICAgICAgICBpZiAo");
    sb.append("ZXhwYW5kVmlldykgewogICAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXRoX3RvKG5ld19z");
    sb.append("dGF0ZS52aWV3LCB7IiRrZXkiOiBrZXl9KSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gaXRlbV9k");
    sb.append("ZWx0YTsKICAgICAgfSwKICAgICAgIi0iOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKGtleSBp");
    sb.append("biBkb21CeUtleSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcGFyZW50RG9tLnJlbW92ZUNo");
    sb.append("aWxkKGRvbUJ5S2V5W2tleV0pOwogICAgICAgICAgfSBjYXRjaCAoZXgpIHt9CiAgICAgICAgICBkZWxl");
    sb.append("dGUgZG9tQnlLZXlba2V5XTsKICAgICAgICB9CiAgICAgICAgaWYgKGtleSBpbiB2aWV3VW5TdWJCeUtl");
    sb.append("eSkgewogICAgICAgICAgZmlyZV91bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAgICAgICAgIGRl");
    sb.append("bGV0ZSB2aWV3VW5TdWJCeUtleVtrZXldOwogICAgICAgIH0KICAgICAgfSwKICAgICAgIn4iOiBmdW5j");
    sb.append("dGlvbiAob3JkKSB7CiAgICAgICAgdmFyIHZhbHVlVG9TZXQgPSBmYWxzZTsKICAgICAgICAvLyB0aGUg");
    sb.append("dmFsdWVzIGFyZSBmaWxsaW5nIHVwIEFGVEVyIHRoZSB2YWx1ZSB3YXMgc2V0LAogICAgICAgIC8vIHNv");
    sb.append("IGRldGVjdCB0aGUgYWJzZW5jZSBvZiBhIHZhbHVlIGFsb25nIHdpdGggdGhlIGV4aXN0ZW5jZSBvZiBh");
    sb.append("IHZhbHVlCiAgICAgICAgaWYgKCFwYXJlbnREb20udmFsdWUgJiYgcGFyZW50RG9tLnJ4dmFsdWUgIT0g");
    sb.append("IiIpIHsKICAgICAgICAgIHZhbHVlVG9TZXQgPSBwYXJlbnREb20ucnh2YWx1ZTsKICAgICAgICAgIC8v");
    sb.append("IHRoaXMgdmFsdWUsIHdlIHdhbnQgdG8gcmVzdG9yZSBvbmNlCiAgICAgICAgfQogICAgICAgIGlmICho");
    sb.append("aWRlT25aZXJvKSB7CiAgICAgICAgICBpZiAob3JkLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHBh");
    sb.append("cmVudERvbS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg");
    sb.append("ICAgcGFyZW50RG9tLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAg");
    sb.append("ICAgbnVrZShwYXJlbnREb20pOwogICAgICAgIGlmIChvcmQgPT0gbnVsbCkgewogICAgICAgICAga2ls");
    sb.append("bCgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8");
    sb.append("IG9yZC5sZW5ndGg7IGsrKykgewogICAgICAgICAgcGFyZW50RG9tLmFwcGVuZChkb21CeUtleVtvcmRb");
    sb.append("a11dKTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbHVlVG9TZXQpIHsKICAgICAgICAgIHBhcmVudERv");
    sb.append("bS52YWx1ZSA9IHZhbHVlVG9TZXQ7CiAgICAgICAgfQogICAgICAgIHBhcmVudERvbS5kaXNwYXRjaEV2");
    sb.append("ZW50KG5ldyBFdmVudCgib3JkZXJlZCIpKTsKICAgICAgICBpZiAoc2lnbmFscy5pc05ldykgewogICAg");
    sb.append("ICAgICAgcGFyZW50RG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJuZXciKSk7CiAgICAgICAgICBz");
    sb.append("aWduYWxzLmlzTmV3ID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgc3Vic2NyaWJl");
    sb.append("KHN0YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJTUUgfCA8aW5saW5lLWl0ZXJhdGUgcGF0");
    sb.append("aD0iLi4uIj4uLi48L2lubGluZS10ZW1wbGF0ZT4KICAvLyBSVU5USU1FIHwgPHRhZyByeDpyZXBsaWNh");
    sb.append("dGU9Ii4uLiIgLi4uPi4uLjwvdGFnPgogIHNlbGYuSUlUID0gZnVuY3Rpb24gKHBhcmVudERvbSwgc2li");
    sb.append("bGluZ0RvbSwgc3RhdGUsIG5hbWUsIGV4cGFuZFZpZXcsIG1ha2VyKSB7CiAgICB2YXIgaXRfc3RhdGUg");
    sb.append("PSBzZWxmLnBJRShzdGF0ZSwgbmFtZSwgZXhwYW5kVmlldyk7CiAgICB2YXIgZG9tQnlLZXkgPSB7fTsK");
    sb.append("ICAgIHZhciB2aWV3VW5TdWJCeUtleSA9IHt9OwogICAgdmFyIGtpbGwgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgIGZvciAodmFyIGtleSBpbiB2aWV3VW5TdWJCeUtleSkgewogICAgICAgIGZpcmVfdW5zdWIodmll");
    sb.append("d1VuU3ViQnlLZXlba2V5XSk7CiAgICAgICAgZGVsZXRlIHZpZXdVblN1YkJ5S2V5W2tleV07CiAgICAg");
    sb.append("IH0KICAgICAgZm9yICh2YXIga2V5IGluIGRvbUJ5S2V5KSB7CiAgICAgICAgZGVsZXRlIGRvbUJ5S2V5");
    sb.append("W2tleV07CiAgICAgIH0KICAgIH07CiAgICB2YXIgc2lnbmFscyA9IHtpc05ldzpmYWxzZX07CiAgICB2");
    sb.append("YXIgc3ViID0gewogICAgICAiKyI6IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB2YXIgbmV3X3N0YXRl");
    sb.append("ID0gZm9yayhzZWxmLnBJRShpdF9zdGF0ZSwga2V5LCBleHBhbmRWaWV3KSk7CiAgICAgICAgdmFyIHVu");
    sb.append("c3ViID0gbWFrZV91bnN1YigpOwogICAgICAgIHZhciBkb20gPSBtYWtlcihuZXdfc3RhdGUpOwogICAg");
    sb.append("ICAgIHNpZ25hbHMuaXNOZXcgPSB0cnVlOwogICAgICAgIGRvbUJ5S2V5W2tleV0gPSBkb207CiAgICAg");
    sb.append("ICAgdmlld1VuU3ViQnlLZXlba2V5XSA9IHVuc3ViOwogICAgICAgIHZhciBiZWZvcmUgPSBzaWJsaW5n");
    sb.append("RG9tID09IG51bGwgPyBwYXJlbnREb20uZmlyc3RDaGlsZCA6IHNpYmxpbmdEb20ubmV4dFNpYmxpbmc7");
    sb.append("CiAgICAgICAgcGFyZW50RG9tLmluc2VydEJlZm9yZShkb20sIGJlZm9yZSk7CiAgICAgICAgdmFyIGl0");
    sb.append("ZW1fZGVsdGEgPSBuZXdfc3RhdGUuZGF0YS5kZWx0YTsKICAgICAgICBuZXdfc3RhdGUuZGF0YS5kZWx0");
    sb.append("YSA9IHt9OwogICAgICAgIGlmIChuZXdfc3RhdGUuZGF0YS5wYXJlbnQgJiYgbmV3X3N0YXRlLmRhdGEu");
    sb.append("cGF0aCAmJiBuZXdfc3RhdGUuZGF0YS5wYXJlbnQuZGVsdGEpIHsKICAgICAgICAgIG5ld19zdGF0ZS5k");
    sb.append("YXRhLnBhcmVudC5kZWx0YVtuZXdfc3RhdGUuZGF0YS5wYXRoXSA9IG5ld19zdGF0ZS5kYXRhLmRlbHRh");
    sb.append("OwogICAgICAgIH0KICAgICAgICBzdWJzY3JpYmVfc3RhdGUobmV3X3N0YXRlLCB1bnN1Yik7CiAgICAg");
    sb.append("ICAgaWYgKGV4cGFuZFZpZXcpIHsKICAgICAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUocGF0aF90");
    sb.append("byhuZXdfc3RhdGUudmlldywgeyIka2V5Ijoga2V5fSkpOwogICAgICAgIH07CiAgICAgICAgcmV0dXJu");
    sb.append("IGl0ZW1fZGVsdGE7CiAgICAgIH0sCiAgICAgICItIjogZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlm");
    sb.append("IChrZXkgaW4gZG9tQnlLZXkpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHBhcmVudERvbS5y");
    sb.append("ZW1vdmVDaGlsZChkb21CeUtleVtrZXldKTsKICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7fQogICAgICAg");
    sb.append("ICAgZGVsZXRlIGRvbUJ5S2V5W2tleV07CiAgICAgICAgfQogICAgICAgIGlmIChrZXkgaW4gdmlld1Vu");
    sb.append("U3ViQnlLZXkpIHsKICAgICAgICAgIGZpcmVfdW5zdWIodmlld1VuU3ViQnlLZXlba2V5XSk7CiAgICAg");
    sb.append("ICAgICBkZWxldGUgdmlld1VuU3ViQnlLZXlba2V5XTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgICJ+");
    sb.append("IjogZnVuY3Rpb24gKG9yZCkgewogICAgICAgIGlmIChvcmQgPT0gbnVsbCkgewogICAgICAgICAga2ls");
    sb.append("bCgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gb3JkLmxl");
    sb.append("bmd0aCAtIDE7IGsgPj0gMDsgay0tKSB7CiAgICAgICAgICB2YXIgYmVmb3JlID0gc2libGluZ0RvbSA9");
    sb.append("PSBudWxsID8gcGFyZW50RG9tLmZpcnN0Q2hpbGQgOiBzaWJsaW5nRG9tLm5leHRTaWJsaW5nOwogICAg");
    sb.append("ICAgICAgcGFyZW50RG9tLmluc2VydEJlZm9yZShkb21CeUtleVtvcmRba11dLCBiZWZvcmUpOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBwYXJlbnREb20uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoIm9yZGVyZWQiKSk7");
    sb.append("CiAgICAgICAgaWYgKHNpZ25hbHMuaXNOZXcpIHsKICAgICAgICAgIHBhcmVudERvbS5kaXNwYXRjaEV2");
    sb.append("ZW50KG5ldyBFdmVudCgibmV3IikpOwogICAgICAgICAgc2lnbmFscy5pc05ldyA9IGZhbHNlOwogICAg");
    sb.append("ICAgIH0KICAgICAgfQogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoK");
    sb.append("ICBzZWxmLmZpZGJhc2lzID0gMDsKICBzZWxmLkZBID0gZnVuY3Rpb24gKGRvbSwgc3RhdGUsIHJ4b2Jq");
    sb.append("LCB1c2VEb21haW4sIG1ha2VyKSB7CgogICAgdmFyIGlkID0gIl9hdXRvX2ZpZF8iICsgc2VsZi5maWRi");
    sb.append("YXNpczsKICAgIHNlbGYuZmlkYmFzaXMrKzsKCiAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJpbnB1dCIpOwogICAgaW5wdXQuaWQgPSBpZDsKICAgIGlucHV0LnR5cGUgPSAiZmlsZSI7");
    sb.append("CiAgICBpbnB1dC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgaW5wdXQuaWdub3JlX2J1aWxkX29i");
    sb.append("amVjdCA9IHRydWU7CiAgICBkb20uYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgdmFyIHZhbHVlcyA9IGRv");
    sb.append("Y3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgZG9tLmFwcGVuZENoaWxkKHZhbHVlcyk7Cgog");
    sb.append("ICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKICAgIGxhYmVsLmh0");
    sb.append("bWxGb3IgPSBpZDsKICAgIG1ha2VyKHN0YXRlLCBsYWJlbCk7CiAgICBkb20uYXBwZW5kQ2hpbGQobGFi");
    sb.append("ZWwpOwoKICAgIC8vIFRPRE86IGluZGV4IGxhYmVsIGNoaWxkcmVuCgogICAgdmFyIGhhbmRsZV9maW5k");
    sb.append("aW5nX2ZpbGUgPSBmdW5jdGlvbigpIHsKICAgICAgY29uc29sZS5sb2coInBpY2tpbmcgYSBmaWxlIik7");
    sb.append("CiAgICB9OwogICAgdmFyIGhhbmRsZV9zdGFydGVkID0gZnVuY3Rpb24oKSB7CiAgICAgIGNvbnNvbGUu");
    sb.append("bG9nKCJ1cGxvYWQgc3RhcnRlZCIpOwogICAgfTsKICAgIHZhciBoYW5kbGVfZmFpbHVyZSA9IGZ1bmN0");
    sb.append("aW9uKHJlYXNvbikgewogICAgICBjb25zb2xlLmxvZygiZmFpbGVkOiIgKyByZWFzb24pOwogICAgfTsK");
    sb.append("ICAgIHZhciBoYW5kbGVfc3RhdHVzID0gZnVuY3Rpb24oYXQsIG14KSB7CiAgICAgIGNvbnNvbGUubG9n");
    sb.append("KCJ1cGxvYWQgc3RhdHVzOiIgKyBhdCArICIvIiArIG14KTsKICAgIH07CiAgICB2YXIgaGFuZGxlX3N1");
    sb.append("Y2Nlc3MgPSBmdW5jdGlvbihpZCkgewogICAgICB2YXIgaWRBc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVh");
    sb.append("dGVFbGVtZW50KCJpbnB1dCIpOwogICAgICBpZEFzRWxlbWVudC50eXBlID0gImhpZGRlbiI7CiAgICAg");
    sb.append("IGlkQXNFbGVtZW50Lm5hbWUgPSByeG9iai5uYW1lOwogICAgICBpZEFzRWxlbWVudC52YWx1ZSA9IGlk");
    sb.append("OwogICAgICBpZiAoIWlkQXNFbGVtZW50Lm5hbWUuZW5kc1dpdGgoIisiKSkgewogICAgICAgIG51a2Uo");
    sb.append("dmFsdWVzKTsKICAgICAgfQogICAgICB2YWx1ZXMuYXBwZW5kQ2hpbGQoaWRBc0VsZW1lbnQpOwogICAg");
    sb.append("ICAvLyBUT0RPOiBhZGQgYSBwcmV2aWV3IHRoaW5neQogICAgfTsKICAgIGxhYmVsLmFkZEV2ZW50TGlz");
    sb.append("dGVuZXIoJ2NsaWNrJywgaGFuZGxlX2ZpbmRpbmdfZmlsZSk7CiAgICBpbnB1dC5hZGRFdmVudExpc3Rl");
    sb.append("bmVyKAogICAgICAnY2hhbmdlJywKICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIGhhbmRsZV9zdGFy");
    sb.append("dGVkKCk7CiAgICAgICAgdmFyIGZpbGVzID0gaW5wdXQuZmlsZXM7CiAgICAgICAgaWYgKGZpbGVzLmxl");
    sb.append("bmd0aCAhPSAxKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBmaWxlID0g");
    sb.append("ZmlsZXNbMF07CiAgICAgICAgLy8gcmVzb2x2ZSBpZGVudGl0eQogICAgICAgIHZhciBpZExvb2t1cCA9");
    sb.append("IHNlbGYuSUQocnhvYmouaWRlbnRpdHksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0");
    sb.append("OyB9KTsKICAgICAgICBpZiAoaWRMb29rdXAuYWJvcnQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJh");
    sb.append("Ym9ydCIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIHJlYWRlciA9IG5l");
    sb.append("dyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChldnQpID0+IHsKICAgICAgICAg");
    sb.append("IHZhciB1OCA9IG5ldyBVaW50OEFycmF5KCBldnQudGFyZ2V0LnJlc3VsdCApOwogICAgICAgICAgdmFy");
    sb.append("IHByb2dyZXNzID0gewogICAgICAgICAgICBwdHI6IG51bGwsCiAgICAgICAgICAgIGF0OiAwLAogICAg");
    sb.append("ICAgICAgICBuZXh0OiBmdW5jdGlvbihjaHVua1JlcXVlc3QpIHsKICAgICAgICAgICAgICB2YXIgc3og");
    sb.append("PSBjaHVua1JlcXVlc3QuY2h1bmtfcmVxdWVzdF9zaXplOwogICAgICAgICAgICAgIHZhciBhdCA9IHBy");
    sb.append("b2dyZXNzLmF0OwogICAgICAgICAgICAgIHZhciBteCA9IE1hdGgubWluKGF0ICsgc3osIHU4Lmxlbmd0");
    sb.append("aCk7CiAgICAgICAgICAgICAgaWYgKGF0ID09IG14KSB7CiAgICAgICAgICAgICAgICBwcm9ncmVzcy5w");
    sb.append("dHIuZmluaXNoKHsKICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGhhcHB5KSB7CiAg");
    sb.append("ICAgICAgICAgICAgICAgICAgaGFuZGxlX3N1Y2Nlc3MoaGFwcHkuYXNzZXRJZCk7CiAgICAgICAgICAg");
    sb.append("ICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGZhaWx1cmUgOiBoYW5kbGVfZmFpbHVyZQogICAgICAg");
    sb.append("ICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBzbGlj");
    sb.append("ZWQgPSB1OC5zbGljZShhdCwgbXgpOwogICAgICAgICAgICAgICAgYXQgPSBteDsKICAgICAgICAgICAg");
    sb.append("ICAgIHByb2dyZXNzLmF0ID0gYXQ7CiAgICAgICAgICAgICAgICB2YXIgYjY0ID0gYnRvYShTdHJpbmcu");
    sb.append("ZnJvbUNoYXJDb2RlKC4uLnNsaWNlZCkpOwogICAgICAgICAgICAgICAgcHJvZ3Jlc3MucHRyLmFwcGVu");
    sb.append("ZCgibi9hIiwgYjY0LCB7CiAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChzZXEpIHsK");
    sb.append("ICAgICAgICAgICAgICAgICAgICBoYW5kbGVfc3RhdHVzKGF0LCBteCkKICAgICAgICAgICAgICAgICAg");
    sb.append("fSwKICAgICAgICAgICAgICAgICAgZmFpbHVyZSA6IGhhbmRsZV9mYWlsdXJlCiAgICAgICAgICAgICAg");
    sb.append("ICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWx1cmU6IGhh");
    sb.append("bmRsZV9mYWlsdXJlLAogICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7fQogICAgICAgICAg");
    sb.append("fTsKICAgICAgICAgIGlmICh1c2VEb21haW4pIHsKICAgICAgICAgICAgcHJvZ3Jlc3MucHRyID0gc3Rh");
    sb.append("dGUuc2VydmljZS5BdHRhY2htZW50U3RhcnRCeURvbWFpbihpZExvb2t1cC5pZGVudGl0eSwgc2VsZi5k");
    sb.append("b21haW4sIGZpbGUubmFtZSwgZmlsZS50eXBlLCBwcm9ncmVzcyk7CiAgICAgICAgICB9IGVsc2Ugewog");
    sb.append("ICAgICAgICAgICBwcm9ncmVzcy5wdHIgPSBzdGF0ZS5zZXJ2aWNlLkF0dGFjaG1lbnRTdGFydChpZExv");
    sb.append("b2t1cC5pZGVudGl0eSwgcnhvYmouc3BhY2UsIHJ4b2JqLmtleSwgZmlsZS5uYW1lLCBmaWxlLnR5cGUs");
    sb.append("IHByb2dyZXNzKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJlYWRlci5yZWFkQXNBcnJh");
    sb.append("eUJ1ZmZlcihmaWxlKTsKICAgICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLi4gcng6bW9u");
    sb.append("aXRvcj0ic3RhdGUtcGF0aCIgcng6cmlzZT0iY29tbWFuZHMuLi4iIHJ4OmZhbGw9ImNvbW1hbmRzLi4u");
    sb.append("IgogIHNlbGYuTU4gPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgbmFtZSwgc2tpcEZpcnN0LCBkZWxheSkg");
    sb.append("ewogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB3aW5kb3cuc2V0VGltZW91dChm");
    sb.append("dW5jdGlvbigpIHsKICAgICAgICB2YXIgbiA9IDA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIG4gPSB0");
    sb.append("eXBlb2YgKHZhbHVlKSA9PSAnbnVtYmVyJyA/IHZhbHVlIDogcGFyc2VJbnQodmFsdWUpOwogICAgICAg");
    sb.append("IH0gY2F0Y2ggKGZhaWxlZFBhcnNpbmdOKSB7CiAgICAgICAgICBpZiAodmFsdWUgPT09IHRydWUgfHwg");
    sb.append("dmFsdWUgPT0gInRydWUiKSB7CiAgICAgICAgICAgIG4gPSAxOwogICAgICAgICAgfSBlbHNlIGlmICh2");
    sb.append("YWx1ZSA9PT0gZmFsc2UgfHwgdmFsdWUgPT0gImZhbHNlIikgewogICAgICAgICAgICBuID0gMDsKICAg");
    sb.append("ICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuZmlyc3QpIHsKICAgICAgICAgIHRoaXMu");
    sb.append("YXQgPSBuOwogICAgICAgICAgdGhpcy5maXJzdCA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBpZiAodGhpcy5hdCA8IG4pIHsKICAgICAgICAgIHZhciBlID0gbmV3IEV2ZW50");
    sb.append("KCJyaXNlIik7CiAgICAgICAgICBkb20uZGlzcGF0Y2hFdmVudChlKTsKICAgICAgICB9IGVsc2UgaWYg");
    sb.append("KHRoaXMuYXQgPiBuKSB7CiAgICAgICAgICB2YXIgZSA9IG5ldyBFdmVudCgiZmFsbCIpOwogICAgICAg");
    sb.append("ICAgZG9tLmRpc3BhdGNoRXZlbnQoZSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuYXQgPSBuOwogICAg");
    sb.append("ICB9LmJpbmQodGhpcyksIHRoaXMuZGVsYXkpOwogICAgfS5iaW5kKHthdDotMSwgZmlyc3Q6c2tpcEZp");
    sb.append("cnN0LCBkZWxheTpkZWxheSA/IGRlbGF5IDogMTB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwg");
    sb.append("c3ViKTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uLiByeDpyZXBlYXQ9JD4KICBzZWxmLlJQID0g");
    sb.append("ZnVuY3Rpb24gKHBhcmVudERvbSwgc3RhdGUsIG5hbWUsIGV4cGFuZFZpZXcsIG1ha2VyLCBoaWRlT25a");
    sb.append("ZXJvKSB7CiAgICB2YXIgaXRfc3RhdGUgPSBzZWxmLnBJRShzdGF0ZSwgIiQiICsgbmFtZSwgZXhwYW5k");
    sb.append("Vmlldyk7CiAgICBpZiAoaGlkZU9uWmVybykgewogICAgICBwYXJlbnREb20uc3R5bGUuZGlzcGxheSA9");
    sb.append("ICJub25lIjsKICAgIH0KICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG4g");
    sb.append("PSAwOwogICAgICB0cnkgewogICAgICAgIG4gPSB0eXBlb2YgKHZhbHVlKSA9PSAnbnVtYmVyJyA/IHZh");
    sb.append("bHVlIDogcGFyc2VJbnQodmFsdWUpOwogICAgICB9IGNhdGNoIChmYWlsZWRQYXJzaW5nTikgewogICAg");
    sb.append("ICB9CiAgICAgIGlmIChoaWRlT25aZXJvKSB7CiAgICAgICAgaWYgKG4gPD0gMCkgewogICAgICAgICAg");
    sb.append("cGFyZW50RG9tLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg");
    sb.append("IHBhcmVudERvbS5zdHlsZS5kaXNwbGF5ID0gIiI7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBp");
    sb.append("c05ldyA9IGZhbHNlOwogICAgICB3aGlsZSAodGhpcy5hdCA8IG4gLSAxKSB7CiAgICAgICAgdGhpcy5h");
    sb.append("dCArKzsKICAgICAgICB0aGlzLnRyYWNrICsrOwogICAgICAgIHZhciBuZXdfc3RhdGUgPSBmb3JrKHNl");
    sb.append("bGYucElFKGl0X3N0YXRlLCB0aGlzLnRyYWNrICsgIiIsIGV4cGFuZFZpZXcpKTsKICAgICAgICB2YXIg");
    sb.append("dW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICAgICAgdmFyIGRvbSA9IG1ha2VyKHNlbGYucEQobmV3X3N0");
    sb.append("YXRlKSk7CiAgICAgICAgdGhpcy5pdGVtc1t0aGlzLmF0XSA9IHt1bnN1Yjp1bnN1YiwgZG9tOmRvbX07");
    sb.append("CiAgICAgICAgcGFyZW50RG9tLmFwcGVuZChkb20pOwogICAgICAgIGlmIChleHBhbmRWaWV3KSB7CiAg");
    sb.append("ICAgICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHBhdGhfdG8obmV3X3N0YXRlLnZpZXcsIHsiJGlu");
    sb.append("ZGV4IjogdGhpcy50cmFja30pKTsKICAgICAgICB9CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKG5ld19z");
    sb.append("dGF0ZSwgdW5zdWIpOwogICAgICAgIGlzTmV3ID0gdHJ1ZTsKICAgICAgfQogICAgICB3aGlsZSAodGhp");
    sb.append("cy5hdCA+PSBuICYmIHRoaXMuYXQgPj0gMCkgewogICAgICAgIGZpcmVfdW5zdWIodGhpcy5pdGVtc1t0");
    sb.append("aGlzLmF0XS51bnN1Yik7CiAgICAgICAgcGFyZW50RG9tLnJlbW92ZUNoaWxkKHRoaXMuaXRlbXNbdGhp");
    sb.append("cy5hdF0uZG9tKTsKICAgICAgICB0aGlzLml0ZW1zW3RoaXMuYXRdID0gbnVsbDsKICAgICAgICBkZWxl");
    sb.append("dGUgdGhpcy5pdGVtc1t0aGlzLmF0XTsKICAgICAgICB0aGlzLmF0LS07CiAgICAgIH0KICAgICAgaWYg");
    sb.append("KGlzTmV3KSB7CiAgICAgICAgcGFyZW50RG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJuZXciKSk7");
    sb.append("CiAgICAgIH0KICAgIH0uYmluZCh7aXRlbXM6W10sIGF0Oi0xLCB0cmFjazowfSk7CiAgICBzdWJzY3Jp");
    sb.append("YmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfQogIHZhciBmaW5kID0gZnVuY3Rpb24gKHN0YXRlLCBjaGFu");
    sb.append("bmVsLCBrZXksIHZhbHVlKSB7CiAgICBpZiAoY2hhbm5lbCBpbiBzdGF0ZVsiZGF0YSJdLmNvbm5lY3Rp");
    sb.append("b24ub3V0c3RhbmRpbmcpIHsKICAgICAgdmFyIGFyciA9IHN0YXRlWyJkYXRhIl0uY29ubmVjdGlvbi5v");
    sb.append("dXRzdGFuZGluZ1tjaGFubmVsXS5vcHRpb25zOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGFyci5s");
    sb.append("ZW5ndGg7IGsrKykgewogICAgICAgIHZhciBzID0gYXJyW2tdOwogICAgICAgIGlmIChrZXkgaW4gcyAm");
    sb.append("JiBzW2tleV0gPT0gdmFsdWUpIHsKICAgICAgICAgIHJldHVybiBzOwogICAgICAgIH0KICAgICAgfQog");
    sb.append("ICAgICByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH07");
    sb.append("CgogIHZhciBjdXN0b21zID0ge307CgogIHNlbGYuUFJDVUFDID0gZnVuY3Rpb24gKG5hbWUsIGZvbykg");
    sb.append("ewogICAgY3VzdG9tc1tuYW1lXSA9IGZvbzsKICB9OwoKICBzZWxmLmV4Q0MgPSBmdW5jdGlvbiAoZG9t");
    sb.append("LCB0eXBlLCBzdGF0ZSwgY3VzdG9tQ29tbWFuZE5hbWUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9t");
    sb.append("LCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChjdXN0b21Db21tYW5kTmFtZSBpbiBjdXN0b21z");
    sb.append("KSB7CiAgICAgICAgY3VzdG9tc1tjdXN0b21Db21tYW5kTmFtZV0oc3RhdGUsIGRvbSk7CiAgICAgIH0K");
    sb.append("ICAgIH0pOwogIH07CgogIC8vIGN1c3RvbSBldmVudCBvbiBmb3Jtczsgcng6c3VjY2Vzcz0iLi4uIgog");
    sb.append("IHZhciBmaXJlX3N1Y2Nlc3MgPSBmdW5jdGlvbiAoZm9ybSkgewogICAgZm9ybS5kaXNwYXRjaEV2ZW50");
    sb.append("KG5ldyBFdmVudCgic3VjY2VzcyIpKTsKICAgIGZvcm0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInN1");
    sb.append("Ym1pdHRlZCIpKTsKICB9OwogIHNlbGYuZmlyZV9zdWNjZXNzID0gZmlyZV9zdWNjZXNzOwoKICAvLyBj");
    sb.append("dXN0b20gZXZlbnQgb24gZm9ybXM7IHJ4OmZhaWxlZD0iLi4uIgogIHZhciBmaXJlX2ZhaWx1cmUgPSBm");
    sb.append("dW5jdGlvbiAoZG9tLCBtc2cpIHsKICAgIHZhciBlID0gbmV3IEV2ZW50KCJmYWlsdXJlIik7CiAgICBl");
    sb.append("Lm1lc3NhZ2UgPSBtc2c7CiAgICBjb25zb2xlLmVycm9yKG1zZyk7CiAgICBkb20uZGlzcGF0Y2hFdmVu");
    sb.append("dChlKTsKICB9OwogIHNlbGYuZmlyZV9mYWlsdXJlID0gZmlyZV9mYWlsdXJlOwoKICBzZWxmLmFDQyA9");
    sb.append("IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgY3VzdG9tQ29tbWFuZE5hbWUpIHsKICAgIHZhciBzaWduYWwg");
    sb.append("PSBmdW5jdGlvbiAobXNnKSB7CiAgICAgIGlmIChzaWduYWwgPT0gbnVsbCkgewogICAgICAgIGZpcmVf");
    sb.append("c3VjY2Vzcyhmb3JtKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgbXNn");
    sb.append("KTsKICAgICAgfQogICAgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rp");
    sb.append("b24gKGV2dCkgewogICAgICBpZiAoY3VzdG9tQ29tbWFuZE5hbWUgaW4gY3VzdG9tcykgewogICAgICAg");
    sb.append("IGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciBvYmogPSBnZXRfZm9ybShmb3JtLCB7fSk7");
    sb.append("CiAgICAgICAgY3VzdG9tc1tjdXN0b21Db21tYW5kTmFtZV0ob2JqLCBzdGF0ZSwgc2lnbmFsLCBzZWxm");
    sb.append("KTsKICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlyZV9m");
    sb.append("YWlsdXJlKGZvcm0sICJGYWlsZWQgdG8gZmluZCAnIiArIGN1c3RvbUNvbW1hbmROYW1lICsgIiciKTsK");
    sb.append("ICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgdmFyIG1ha2VfY2hvaWNlX2FycmF5ID0gZnVuY3Rp");
    sb.append("b24gKHN0YXRlLCBjaGFubmVsKSB7CiAgICB2YXIgY2hvaWNlcyA9IHN0YXRlLmRhdGEuY29ubmVjdGlv");
    sb.append("bi5jaG9pY2VzOwogICAgaWYgKCEoY2hhbm5lbCBpbiBjaG9pY2VzKSkgewogICAgICBjaG9pY2VzW2No");
    sb.append("YW5uZWxdID0ge307CiAgICB9CiAgICB2YXIgY2hvaWNlID0gY2hvaWNlc1tjaGFubmVsXTsKICAgIHZh");
    sb.append("ciBhcnIgPSBbXTsKICAgIGZvciAodmFyIGlkIGluIGNob2ljZSkgewogICAgICBhcnIucHVzaChjaG9p");
    sb.append("Y2VbaWRdKTsKICAgIH0KICAgIHJldHVybiBhcnI7CiAgfQoKICBzZWxmLmV4RklOID0gZnVuY3Rpb24g");
    sb.append("KGRvbSwgdHlwZSwgc3RhdGUsIGNoYW5uZWwpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBl");
    sb.append("LCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhcnIgPSBtYWtlX2Nob2ljZV9hcnJheShzdGF0ZSwgY2hh");
    sb.append("bm5lbCk7CiAgICAgIHZhciBjbGVhciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBkZWxldGUgc3RhdGUu");
    sb.append("ZGF0YS5jb25uZWN0aW9uLmNob2ljZXNbY2hhbm5lbF07CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0");
    sb.append("aW9uLm9uY2hvaWNlcyhjaGFubmVsLCB7fSk7CiAgICAgIH07CiAgICAgIHN0YXRlLmRhdGEuY29ubmVj");
    sb.append("dGlvbi5wdHIuc2VuZChjaGFubmVsLCBhcnIsIHsKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVh");
    sb.append("c29uKSB7CiAgICAgICAgICBjbGVhcigpOwogICAgICAgICAgY29uc29sZS5sb2coImZhaWxlZDoiICsg");
    sb.append("cmVhc29uKTsKICAgICAgICB9LAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAg");
    sb.append("ICAgICAgICBjbGVhcigpOwogICAgICAgICAgY29uc29sZS5sb2coIlN1Y2Nlc3N8IiArIHBheWxvYWQu");
    sb.append("c2VxKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgc2VsZi5GSU4gPSBmdW5jdGlv");
    sb.append("biAocGFyZW50LCBwcmlvclN0YXRlLCBjaGFubmVsLCBzaG91bGRCZSwgX2V4cGFuZCwgbWFrZXJUcnVl");
    sb.append("LCBtYWtlckZhbHNlKSB7CiAgICB2YXIgZmluYWxpemUgPSB7CiAgICAgIG93bmVyOiBwYXJlbnQsCiAg");
    sb.append("ICAgIHNob3duOiBmYWxzZQogICAgfTsKICAgIGFkZF91bnN1YihmaW5hbGl6ZSk7CgogICAgdmFyIGNo");
    sb.append("YW5nZSA9IGZ1bmN0aW9uIChzaG93KSB7CiAgICAgIGZpcmVfdW5zdWIoZmluYWxpemUpOwogICAgICBu");
    sb.append("dWtlKHBhcmVudCk7CiAgICAgIHZhciBzdGF0ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGlmIChz");
    sb.append("aG93ID09PSBzaG91bGRCZSkgewogICAgICAgIG1ha2VyVHJ1ZShwYXJlbnQsIHN0YXRlKTsKICAgICAg");
    sb.append("fSBlbHNlIHsKICAgICAgICBtYWtlckZhbHNlKHBhcmVudCwgc3RhdGUpOwogICAgICB9CiAgICAgIHN1");
    sb.append("YnNjcmliZV9zdGF0ZShzdGF0ZSwgZmluYWxpemUpOwogICAgfTsKCiAgICBmaW5hbGl6ZS51cGRhdGUg");
    sb.append("PSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvdXQgPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5v");
    sb.append("dXRzdGFuZGluZ1tjaGFubmVsXTsKICAgICAgaWYgKCEob3V0KSkgcmV0dXJuOwogICAgICB2YXIgYXJy");
    sb.append("ID0gbWFrZV9jaG9pY2VfYXJyYXkocHJpb3JTdGF0ZSwgY2hhbm5lbCk7CiAgICAgIHZhciByZXN1bHQg");
    sb.append("PSAoJ21pbicgaW4gb3V0ICYmICdtYXgnIGluIG91dCkgPyAob3V0Lm1pbiA8PSBhcnIubGVuZ3RoICYm");
    sb.append("IGFyci5sZW5ndGggPD0gb3V0Lm1heCkgOiB0cnVlOwogICAgICBpZiAoZmluYWxpemUuZXZhbCAhPSBy");
    sb.append("ZXN1bHQpIHsKICAgICAgICBmaW5hbGl6ZS5ldmFsID0gcmVzdWx0OwogICAgICAgIGNoYW5nZShmaW5h");
    sb.append("bGl6ZS5ldmFsKTsKICAgICAgfQogICAgfTsKCiAgICBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5z");
    sb.append("dWJzY3JpYmVfY2hvaWNlKGNoYW5uZWwsIGZ1bmN0aW9uICgpIHsKICAgICAgZmluYWxpemUudXBkYXRl");
    sb.append("KCk7CiAgICAgIC8vIFRPRE86IHJldHVybiB3aGV0aGVyIG9yIG5vdCB0aGlzIG5lZWRzIHRvIGJlIGF4");
    sb.append("ZWQKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKICB9OwoKICB2YXIgZm9ybV9vZiA9IGZ1bmN0aW9u");
    sb.append("KGRvbSkgewogICAgdmFyIG5leHQgPSBkb207CiAgICB3aGlsZSAobmV4dCAhPSBudWxsKSB7CiAgICAg");
    sb.append("IGlmIChuZXh0LnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PSAiRk9STSIpIHsKICAgICAgICByZXR1cm4g");
    sb.append("bmV4dDsKICAgICAgfQogICAgICBuZXh0ID0gbmV4dC5wYXJlbnRFbGVtZW50OwogICAgfQogICAgcmV0");
    sb.append("dXJuIG51bGw7CiAgfQoKICB2YXIgcmVnX2V2ZW50ID0gZnVuY3Rpb24gKHN0YXRlLCBkb20sIHR5cGUs");
    sb.append("IHJ1bm5hYmxlKSB7CiAgICAvLyBUT0RPOiBjb25uZWN0ZWQvZGlzY29ubmVjdGVkIGFzIHNwZWNpYWwg");
    sb.append("ZXZlbnRzIHRvIGNvbnNpZGVyCiAgICBpZiAodHlwZSA9PSAiY2hlY2siIHx8IHR5cGUgPT0gInVuY2hl");
    sb.append("Y2siKSB7CiAgICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAg");
    sb.append("ICAgICBpZiAodGhpcy50eXBlID09ICJjaGVjayIgJiYgZG9tLmNoZWNrZWQpIHsKICAgICAgICAgIHJ1");
    sb.append("bm5hYmxlKCk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT0gInVuY2hlY2siICYmICFkb20u");
    sb.append("Y2hlY2tlZCkgewogICAgICAgICAgcnVubmFibGUoKTsKICAgICAgICB9CiAgICAgIH0uYmluZCh7dHlw");
    sb.append("ZTp0eXBlfSkpOwogICAgfSBlbHNlIGlmICh0eXBlID09ICJsb2FkIikgewogICAgICB3aW5kb3cuc2V0");
    sb.append("VGltZW91dChydW5uYWJsZSwgMSk7CiAgICB9IGVsc2UgaWYgKHR5cGU9PSJzdWJtaXQiIHx8IHR5cGU9");
    sb.append("PSJzdWJtaXR0ZWQiKSB7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAg");
    sb.append("IHZhciBmb3JtID0gZm9ybV9vZihkb20pOwogICAgICAgIGlmIChmb3JtKSB7CiAgICAgICAgICBmb3Jt");
    sb.append("LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoZG9jdW1l");
    sb.append("bnQuYm9keS5jb250YWlucyhkb20pKSB7CiAgICAgICAgICAgICAgcnVubmFibGUoKTsKICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LCAxKTsKICAgIH0gZWxzZSBpZiAodHlw");
    sb.append("ZS5zdGFydHNXaXRoKCJkZWxheToiKSkgewogICAgICAvLyBkZWxheSB3aWxsIHJ1biBhZnRlciAkZGVs");
    sb.append("YXlUaW1lTVMgSUYgdGhlIGRvbSBlbGVtZW50IGlzIHN0aWxsIHZpc2libGUgdG8gdGhlIGRvY3VtZW50");
    sb.append("CiAgICAgIHZhciBkZWxheVRpbWVNUyA9IHBhcnNlSW50KHR5cGUuc3Vic3RyaW5nKDYpKTsKICAgICAg");
    sb.append("d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNv");
    sb.append("bnRhaW5zKGRvbSkpIHsKICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgfQogICAgICB9LCBkZWxh");
    sb.append("eVRpbWVNUyk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gInNldHRsZSIpIHsKICAgICAgc3RhdGUuZGF0");
    sb.append("YS50cmVlLmFkZF9vbl9zZXR0bGUoZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gaWYgdGhlIERPTSBoYXMg");
    sb.append("YmVlbiBhZGRlZCB0byB0aGUgYm9keSwgdGhlbiBydW4gdGhlIGNvZGUKICAgICAgICBpZiAoZG9jdW1l");
    sb.append("bnQuYm9keS5jb250YWlucyhkb20pKSB7CiAgICAgICAgICBydW5uYWJsZSgpOwogICAgICAgICAgcmV0");
    sb.append("dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSk7CiAgICB9IGVs");
    sb.append("c2UgaWYgKHR5cGUgPT0gInNldHRsZS1vbmNlIikgewogICAgICBzdGF0ZS5kYXRhLnRyZWUuYWRkX29u");
    sb.append("X3NldHRsZShmdW5jdGlvbigpIHsKICAgICAgICAvLyBpZiB0aGUgRE9NIGhhcyBiZWVuIGFkZGVkIHRv");
    sb.append("IHRoZSBib2R5LCB0aGVuIHJ1biB0aGUgY29kZQogICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRh");
    sb.append("aW5zKGRvbSkpIHsKICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBm");
    sb.append("YWxzZTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBpZiAodHlwZSA9PSAiY2xpY2siKSB7CiAg");
    sb.append("ICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAg");
    sb.append("IHZhciBmaXJlID0gdHJ1ZTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciBlbCA9IGV2ZW50");
    sb.append("LnRhcmdldDsKICAgICAgICAgICAgd2hpbGUgKGVsICYmIGZpcmUpIHsKICAgICAgICAgICAgICBpZiAo");
    sb.append("ZWwuaGFzQXR0cmlidXRlKCdwcmV2ZW50OmNsaWNrJykpIHsKICAgICAgICAgICAgICAgIGZpcmUgPSBm");
    sb.append("YWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50Owog");
    sb.append("ICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChleCkgewogICAgICAgICAgfQogICAgICAgICAg");
    sb.append("aWYgKGZpcmUpIHsKICAgICAgICAgICAgcnVubmFibGUoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsK");
    sb.append("ICAgICAgfSBlbHNlIHsKICAgICAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBydW5uYWJsZSk7");
    sb.append("CiAgICAgIH0KICAgIH0KICB9CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4uIHJ4OmV2ZW50PSJzaWduLW91");
    sb.append("dCIgLi4uPgogIHNlbGYuYlNPID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgcnVuOiBm");
    sb.append("dW5jdGlvbigpIHsKICAgICAgICBzZWxmLlNJR05PVVQoKTsKICAgICAgfSwKICAgICAgbWVyZ2UgOiBm");
    sb.append("dW5jdGlvbigpIHsgcmV0dXJuIHt9OyB9CiAgICB9OwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4g");
    sb.append("cng6ZXZlbnQ9Ii4uLiBzZXQ6bmFtZT12YWx1ZSAuLi4iPgogIHNlbGYuYlMgPSBmdW5jdGlvbiAoZG9t");
    sb.append("LCBzdGF0ZSwgbmFtZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24i");
    sb.append("KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcnVuOiBmdW5jdGlvbigpIHt9LCAvLyBkbyBub3RoaW5n");
    sb.append("LCB0aGlzIGlzIGEgc2ltcGxlIG1lcmdlCiAgICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkgewogICAgICAg");
    sb.append("ICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAgb2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAgICAgIHZh");
    sb.append("ciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgICAgIHJldHVybiBkZWx0YTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2Jq");
    sb.append("W25hbWVdID0gdmFsdWU7CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsK");
    sb.append("ICAgICAgcmV0dXJuIHsKICAgICAgICBydW46IGZ1bmN0aW9uKCkge30sIC8vIGRvIG5vdGhpbmcsIHRo");
    sb.append("aXMgaXMgYSBzaW1wbGUgbWVyZ2UKICAgICAgICBtZXJnZTogZnVuY3Rpb24oKSB7IHJldHVybiBkZWx0");
    sb.append("YTsgfQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIG1lcmdlX2RlbHRhID0gZnVuY3Rpb24oYSwgYikg");
    sb.append("ewogICAgaWYgKHR5cGVvZihhKSA9PSAib2JqZWN0IiAmJiB0eXBlb2YoYikgPT0gIm9iamVjdCIpIHsK");
    sb.append("ICAgICAgdmFyIHJlc3VsdCA9IHt9OwogICAgICBmb3IgKHZhciBrIGluIGEpIHsKICAgICAgICBpZiAo");
    sb.append("ayBpbiBiKSB7CiAgICAgICAgICByZXN1bHRba10gPSBtZXJnZV9kZWx0YShhW2tdLCBiW2tdKTsKICAg");
    sb.append("ICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0W2tdID0gYVtrXTsKICAgICAgICB9CiAgICAgIH0K");
    sb.append("ICAgICAgZm9yKHZhciBrIGluIGIpIHsKICAgICAgICBpZiAoIShrIGluIGEpKSB7CiAgICAgICAgICBy");
    sb.append("ZXN1bHRba10gPSBiW2tdOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAg");
    sb.append("fQogICAgcmV0dXJuIGE7CiAgfTsKICBzZWxmLk1EID0gbWVyZ2VfZGVsdGE7CgogIHNlbGYub25CID0g");
    sb.append("ZnVuY3Rpb24oZG9tLCB0eXBlLCBzdGF0ZSwgYXJyKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwg");
    sb.append("dHlwZSwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzdW0gPSB7fTsKICAgICAgZm9yICh2YXIgayA9IDA7");
    sb.append("IGsgPCBhcnIubGVuZ3RoOyBrKyspIHsKICAgICAgICB2YXIgY21kID0gYXJyW2tdOwogICAgICAgIGNt");
    sb.append("ZC5ydW4oKTsKICAgICAgICB2YXIgdG9NZXJnZSA9IGNtZC5tZXJnZSgpCiAgICAgICAgc3VtID0gbWVy");
    sb.append("Z2VfZGVsdGEoc3VtLCB0b01lcmdlKTsKICAgICAgfQogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRl");
    sb.append("KHN1bSk7CiAgICB9KTsKICB9OwoKICAvLyBjaG9vc2UKICBzZWxmLmV4Q0ggPSBmdW5jdGlvbiAoZG9t");
    sb.append("LCB0eXBlLCBzdGF0ZSwgbmFtZSwgY2hhbm5lbCwga2V5KSB7CiAgICB2YXIgZGVjaWRlID0geyB2YWx1");
    sb.append("ZTogbnVsbCB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgdmFyIHJlc3VsdCA9IGZpbmQoc3RhdGUsIGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKTsKICAg");
    sb.append("ICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7CiAgICAgICAgdmFyIGNob2ljZXMgPSBzdGF0ZS5kYXRhLmNv");
    sb.append("bm5lY3Rpb24uY2hvaWNlczsKICAgICAgICBpZiAoIShjaGFubmVsIGluIGNob2ljZXMpKSB7CiAgICAg");
    sb.append("ICAgICBjaG9pY2VzW2NoYW5uZWxdID0ge307CiAgICAgICAgfQogICAgICAgIHZhciBjaG9pY2UgPSBj");
    sb.append("aG9pY2VzW2NoYW5uZWxdOwogICAgICAgIHZhciB2YWxLZXkgPSByZXN1bHRba2V5XTsKICAgICAgICBp");
    sb.append("ZiAodmFsS2V5IGluIGNob2ljZSkgewogICAgICAgICAgZGVsZXRlIGNob2ljZVt2YWxLZXldOwogICAg");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgICAgICBjaG9pY2VbdmFsS2V5XSA9IHJlc3VsdDsKICAgICAgICB9CiAg");
    sb.append("ICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLm9uY2hvaWNlcyhjaGFubmVsLCBjaG9pY2UpOwogICAg");
    sb.append("ICB9CiAgICB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAg");
    sb.append("ICAgIGRlY2lkZS52YWx1ZSA9IHZhbHVlOwogICAgfSk7CiAgfTsKCiAgLy8gZGVjaWRlCiAgc2VsZi5l");
    sb.append("eEQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgY2hhbm5lbCwga2V5KSB7CiAgICB2");
    sb.append("YXIgZGVjaWRlID0geyB2YWx1ZTogbnVsbCB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUs");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHJlc3VsdCA9IGZpbmQoc3RhdGUsIGNoYW5uZWwsIGtleSwg");
    sb.append("ZGVjaWRlLnZhbHVlKTsKICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7CiAgICAgICAgbGV0IHN0YXJ0");
    sb.append("ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5k");
    sb.append("KGNoYW5uZWwsIHJlc3VsdCwgewogICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewoK");
    sb.append("ICAgICAgICAgIH0sCiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAg");
    sb.append("ICAgICBjb25zb2xlLmxvZygiU3VjY2Vzc3wiICsgcGF5bG9hZC5zZXEgKyAiO2xhdGVuY3k9IiArIChw");
    sb.append("ZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0KSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0K");
    sb.append("ICAgIH0pOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAg");
    sb.append("ZGVjaWRlLnZhbHVlID0gdmFsdWU7CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4");
    sb.append("OmV2ZW50PSIuLi4gZmlyZTpjaGFubmVsIC4uLiIgLi4uPgogIHNlbGYub25GUiA9IGZ1bmN0aW9uIChz");
    sb.append("dGF0ZSwgZG9tLCB0eXBlLCBjaGFubmVsKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwg");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbCwg");
    sb.append("e30sIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygi");
    sb.append("U0VOVCAnIiArIGNoYW5uZWwgKyAiJyIpOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rp");
    sb.append("b24gKHJlYXNvbikgewogICAgICAgICAgY29uc29sZS5sb2coIkZBSUxFRCBUTyBGSVJFICciICsgY2hh");
    sb.append("bm5lbCArICInIERVRToiICsgcmVhc29uKTsgJycKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAg");
    sb.append("fQoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZm9yY2UtYXV0aD1uYW1lLHRva2Vu");
    sb.append("IC4uLiI+CiAgc2VsZi5vbkZPUkNFX0FVVEggPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBpZGVudGl0eU5h");
    sb.append("bWUsIGlkZW50aXR5KSB7CiAgICByZWdfZXZlbnQobnVsbCwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzCiAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9");
    sb.append("IGlkZW50aXR5OwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5");
    sb.append("TmFtZSwgaWRlbnRpdHkpOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVu");
    sb.append("dD0iLi4uIHRlOm5hbWUgLi4uIj4KICBzZWxmLm9uVE0gPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0");
    sb.append("ZSwgbmFtZSwgb3gsIG95KSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24g");
    sb.append("KGV2ZW50KSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gewogICAgICAgIHg6");
    sb.append("ZXZlbnQuY2xpZW50WCArIHdpbmRvdy5zY3JvbGxYICsgb3gsCiAgICAgICAgeTpldmVudC5jbGllbnRZ");
    sb.append("ICsgd2luZG93LnNjcm9sbFkgKyBveQogICAgICB9OwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0");
    sb.append("YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRh");
    sb.append("KTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiB0ZTpuYW1l");
    sb.append("IC4uLiI+CiAgc2VsZi5vblRFID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG5hbWUpIHsKICAg");
    sb.append("IHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIG9i");
    sb.append("aiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSBldmVudC5tZXNzYWdlOwogICAgICBpZiAoZXZlbnQubWVz");
    sb.append("c2FnZSkgewogICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAg");
    sb.append("ICBzdGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgIH0KICAgIH0pOwog");
    sb.append("IH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiByZXNldCAuLi4iPgogIHNlbGYu");
    sb.append("b1JTVCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRv");
    sb.append("bSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBmID0gZm9ybV9vZihkb20pOwogICAg");
    sb.append("ICBpZiAoZiAhPSBudWxsKSB7CiAgICAgICAgZi5yZXNldCgpOwogICAgICB9CiAgICB9KTsKICB9OwoK");
    sb.append("ICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gcmVzZXQgLi4uIj4KICBzZWxmLm9STEQg");
    sb.append("PSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5");
    sb.append("cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0pOwogIH07");
    sb.append("CgogIHNlbGYuYlNCID0gZnVuY3Rpb24oZG9tKSB7CiAgICByZXR1cm4gewogICAgICBydW46IGZ1bmN0");
    sb.append("aW9uKCkgewogICAgICAgIHZhciBmID0gZm9ybV9vZihkb20pOwogICAgICAgIGlmIChmICE9IG51bGwp");
    sb.append("IHsKICAgICAgICAgIHZhciBlID0gbmV3IFN1Ym1pdEV2ZW50KCdzdWJtaXQnLCB7CiAgICAgICAgICAg");
    sb.append("ICdidWJibGVzJyAgICA6IHRydWUsCiAgICAgICAgICAgICdjYW5jZWxhYmxlJyA6IHRydWUKICAgICAg");
    sb.append("ICAgIH0pOwogICAgICAgICAgZi5kaXNwYXRjaEV2ZW50KGUpOwogICAgICAgIH0KICAgICAgfSwKICAg");
    sb.append("ICAgbWVyZ2U6IGZ1bmN0aW9uKCkgeyByZXR1cm4ge307IH0KICAgIH07CiAgfTsKCiAgLy8gUlVOVElN");
    sb.append("RTogPHRhZyAuLiByeDpldmVudD0iLi4uIHN1Ym1pdCAuLi4iPgogIC8vIFRPRE86IERFUFJFQ0FURQog");
    sb.append("IHNlbGYub1NCTVQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0");
    sb.append("YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIgZiA9IGZvcm1fb2YoZG9t");
    sb.append("KTsKICAgICAgaWYgKGYgIT0gbnVsbCkgewogICAgICAgIHZhciBlID0gbmV3IFN1Ym1pdEV2ZW50KCdz");
    sb.append("dWJtaXQnLCB7CiAgICAgICAgICAnYnViYmxlcycgICAgOiB0cnVlLAogICAgICAgICAgJ2NhbmNlbGFi");
    sb.append("bGUnIDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIGYuZGlzcGF0Y2hFdmVudChlKTsKICAgICAgfQog");
    sb.append("ICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHN1Ym1pdDokaWQg");
    sb.append("Li4uIj4KICBzZWxmLm9TRkkgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgaWQpIHsKICAgIHJl");
    sb.append("Z19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGYgPSBk");
    sb.append("b2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CiAgICAgIGlmIChmICE9IG51bGwpIHsKICAgICAgICB2");
    sb.append("YXIgZSA9IG5ldyBTdWJtaXRFdmVudCgnc3VibWl0JywgewogICAgICAgICAgJ2J1YmJsZXMnICAgIDog");
    sb.append("dHJ1ZSwKICAgICAgICAgICdjYW5jZWxhYmxlJyA6IHRydWUKICAgICAgICB9KTsKICAgICAgICBmLmRp");
    sb.append("c3BhdGNoRXZlbnQoZSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIHNlbGYuYk5LID0gZnVuY3Rpb24g");
    sb.append("KGRvbSkgewogICAgcmV0dXJuIHsKICAgICAgcnVuOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgY3Vy");
    sb.append("ID0gZG9tOwogICAgICAgIHdoaWxlIChjdXIudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9ICJOVUNMRUFS");
    sb.append("IikgewogICAgICAgICAgY3VyID0gY3VyLnBhcmVudEVsZW1lbnQ7CiAgICAgICAgfQogICAgICAgIGlm");
    sb.append("IChjdXIgIT0gbnVsbCkgewogICAgICAgICAgbnVrZShjdXIpOwogICAgICAgIH0KICAgICAgfSwKICAg");
    sb.append("ICAgbWVyZ2U6IGZ1bmN0aW9uKCkge30KICAgIH07CiAgfQoKICBzZWxmLm9OSyA9IGZ1bmN0aW9uIChk");
    sb.append("b20sIHR5cGUsIHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24g");
    sb.append("KGV2ZW50KSB7CiAgICAgIHZhciBjdXIgPSBkb207CiAgICAgIHdoaWxlIChjdXIudGFnTmFtZS50b1Vw");
    sb.append("cGVyQ2FzZSgpICE9ICJOVUNMRUFSIikgewogICAgICAgIGN1ciA9IGN1ci5wYXJlbnRFbGVtZW50Owog");
    sb.append("ICAgICB9CiAgICAgIGlmIChjdXIgIT0gbnVsbCkgewogICAgICAgIG51a2UoY3VyKTsKICAgICAgfQog");
    sb.append("ICAgfSk7CiAgfTsKCiAgc2VsZi5wVXMgPSBmdW5jdGlvbihkb20sIG1zRGVsYXkpIHsKICAgIGRvbS5h");
    sb.append("ZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbihldikgewogICAgICBpZiAoZG9tLmlzUHJv");
    sb.append("dGVjdGVkKSB7CiAgICAgICAgLy8gVE9ETzogaWYgZWxUb1Njcm9sbC5sYXN0X3Njcm9sbF9jb21tYW5k");
    sb.append("IGlzIG1heCBhbmQgdGhlIHNjcm9sbCBpcyB0aGVyZSwgdGhlbiBsb3dlciBpc1Byb3RlY3RlZAogICAg");
    sb.append("ICB9CiAgICAgIGlmIChkb20uaWdub3JlRXZlbnQgfHwgZG9tLmlzUHJvdGVjdGVkKSB7CiAgICAgICAg");
    sb.append("cmV0dXJuOwogICAgICB9CiAgICAgIGRvbS5pc1Byb3RlY3RlZCA9IHRydWU7CiAgICAgIHdpbmRvdy5z");
    sb.append("ZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGRvbS5pc1Byb3RlY3RlZCA9IGZhbHNlOwogICAg");
    sb.append("ICB9LCBtc0RlbGF5KTsKICAgIH0pOwogIH07CgogIHNlbGYub1NDUiA9IGZ1bmN0aW9uIChkb20sIHR5");
    sb.append("cGUsIHN0YXRlLCBvcmlnaW5hbENvbW1hbmQpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBl");
    sb.append("LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGVsVG9TY3JvbGwgPSBkb207CiAgICAgIHZhciBj");
    sb.append("b21tYW5kID0gb3JpZ2luYWxDb21tYW5kOwogICAgICB3aGlsZSAoY29tbWFuZC5zdGFydHNXaXRoKCdw");
    sb.append("YXJlbnQtJykpIHsKICAgICAgICBpZiAoZWxUb1Njcm9sbC5wYXJlbnRFbGVtZW50KSB7CiAgICAgICAg");
    sb.append("ICBlbFRvU2Nyb2xsID0gZWxUb1Njcm9sbC5wYXJlbnRFbGVtZW50OwogICAgICAgIH0KICAgICAgICBj");
    sb.append("b21tYW5kID0gY29tbWFuZC5zdWJzdHJpbmcoNyk7CiAgICAgIH0KICAgICAgaWYgKGVsVG9TY3JvbGwu");
    sb.append("aXNQcm90ZWN0ZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZWxUb1Njcm9sbC5pZ25v");
    sb.append("cmVFdmVudCA9IHRydWU7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAg");
    sb.append("IGVsVG9TY3JvbGwuaWdub3JlRXZlbnQgPSBmYWxzZTsKICAgICAgfSwgMTAwKTsKICAgICAgc3dpdGNo");
    sb.append("IChjb21tYW5kKSB7CiAgICAgICAgY2FzZSAnbWluJzogewogICAgICAgICAgZWxUb1Njcm9sbC5sYXN0");
    sb.append("X3Njcm9sbF9jb21tYW5kID0gJ21pbic7CiAgICAgICAgICBlbFRvU2Nyb2xsLnNjcm9sbFRvKDAsIDAp");
    sb.append("OwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjYXNlICdtYXgnOiB7CiAgICAgICAg");
    sb.append("ICBlbFRvU2Nyb2xsLmxhc3Rfc2Nyb2xsX2NvbW1hbmQgPSAnbWF4JzsKICAgICAgICAgIGVsVG9TY3Jv");
    sb.append("bGwuc2Nyb2xsVG8oMCwgZWxUb1Njcm9sbC5zY3JvbGxIZWlnaHQpOwogICAgICAgICAgcmV0dXJuOwog");
    sb.append("ICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfTsKCiAgc2VsZi5vVUNLID0gZnVuY3Rpb24gKGRvbSwg");
    sb.append("dHlwZSwgc3RhdGUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZl");
    sb.append("bnQpIHsKICAgICAgZG9tLmNoZWNrZWQgPSBmYWxzZTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6");
    sb.append("IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBnb3RvOnVyaSAuLi4iPgogIHNlbGYub25HTyA9IGZ1bmN0aW9u");
    sb.append("IChkb20sIHR5cGUsIHN0YXRlLCB2YWx1ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUs");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHVyaSA9ICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24i");
    sb.append("KSA/IHZhbHVlKCkgOiB2YWx1ZTsKICAgICAgc2VsZi5nb3RvKHVyaSwgZmFsc2UpOwogICAgfSk7CiAg");
    sb.append("fTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHRvZ2dsZTpuYW1lIC4uLiI+CiAg");
    sb.append("c2VsZi5vblQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSkgewogICAgdmFyIGNhcHR1");
    sb.append("cmVkID0geyB2YWx1ZTogZmFsc2UgfTsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gIWNhcHR1cmVkLnZh");
    sb.append("bHVlOwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRl");
    sb.append("LnZpZXcudHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUs");
    sb.append("IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBjYXB0dXJlZC52YWx1ZSA9IHZhbHVlID09IHRydWU7CiAg");
    sb.append("ICB9KTsKICB9OwoKICB2YXIgb3JkZXJfdG9nZ2xlID0gZnVuY3Rpb24ocHJpb3IsIHZhbCkgewogICAg");
    sb.append("dmFyIHBhcnRzID0gcHJpb3Iuc3BsaXQoIiwiKTsKICAgIHZhciBwcmVmaXggPSAnJzsKICAgIHZhciBu");
    sb.append("ZXh0ID0gWyIiXTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcGFydHMubGVuZ3RoOyBrKyspIHsKICAg");
    sb.append("ICAgaWYgKHBhcnRzW2tdID09ICIiKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSBpZiAo");
    sb.append("dmFsID09IHBhcnRzW2tdKSB7CiAgICAgICAgcHJlZml4ID0gJy0nOwogICAgICB9IGVsc2UgaWYgKCIt");
    sb.append("IiArIHZhbCA9PXBhcnRzW2tdKSB7CiAgICAgICAgcHJlZml4ID0gJyc7CiAgICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgICAgbmV4dC5wdXNoKHBhcnRzW2tdKTsKICAgICAgfQogICAgfQogICAgbmV4dFswXSA9IHByZWZp");
    sb.append("eCArIHZhbDsKICAgIHJldHVybiBuZXh0LmpvaW4oIiwiKTsKICB9CgogIC8vIFJVTlRJTUU6IDx0YWcg");
    sb.append("Li4gcng6ZXZlbnQ9Ii4uLiBvcmRlci10b2dnbGU6bmFtZT12YWwgLi4uIj4KICBzZWxmLm9uT1QgPSBm");
    sb.append("dW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgdmFsKSB7CiAgICB2YXIgY2FwdHVyZWQgPSB7");
    sb.append("IHZhbHVlOiAiIiB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSBvcmRlcl90b2dnbGUoY2FwdHVyZWQu");
    sb.append("dmFsdWUsIHZhbCk7CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAg");
    sb.append("ICAgc3RhdGVbc3RhdGUuY3VycmVudF0udHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgICBzdWJz");
    sb.append("Y3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBjYXB0dXJlZC52YWx1ZSA9");
    sb.append("IHZhbHVlOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIGRl");
    sb.append("bHRhOm5hbWU9ZGlmZiIgLi4uIj4KICBzZWxmLm9uRCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRl");
    sb.append("LCBuYW1lLCBkaWZmKSB7CiAgICB2YXIgY2FwdHVyZWQgPSB7IHZhbHVlOiAwIH07CiAgICByZWdfZXZl");
    sb.append("bnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgb2JqID0ge307CiAgICAg");
    sb.append("IG9ialtuYW1lXSA9IGNhcHR1cmVkLnZhbHVlICsgZGlmZjsKICAgICAgdmFyIGRlbHRhID0gcGF0aF90");
    sb.append("byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShk");
    sb.append("ZWx0YSk7CiAgICB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7");
    sb.append("CiAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAibnVtYmVyIikgewogICAgICAgIGNhcHR1cmVkLnZh");
    sb.append("bHVlID0gdmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHZhbCA9IHBhcnNlRmxvYXQodmFs");
    sb.append("dWUpOwogICAgICAgIGlmICghaXNOYU4odmFsKSkgewogICAgICAgICAgY2FwdHVyZWQudmFsdWUgPSB2");
    sb.append("YWw7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9OwogIHNlbGYuQ1NFTiA9IGZ1bmN0aW9uIChw");
    sb.append("YXJlbnQsIHByaW9yU3RhdGUsIGV2YWxTdGF0ZSwgY2hhbm5lbCwga2V5LCBuYW1lLCBzaG91bGRCZSwg");
    sb.append("X2V4cGFuZCwgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7CiAgICB2YXIgY2hvc2VuID0gewogICAgICB2");
    sb.append("YWx1ZTogIiIsCiAgICAgIG93bmVyOiBwYXJlbnQsCiAgICAgIHNob3duOiBmYWxzZSwKICAgICAgZXZh");
    sb.append("bDogbnVsbAogICAgfTsKICAgIGFkZF91bnN1YihjaG9zZW4pOwogICAgdmFyIGNoYW5nZSA9IGZ1bmN0");
    sb.append("aW9uIChzaG93KSB7CiAgICAgIGZpcmVfdW5zdWIoY2hvc2VuKTsKICAgICAgbnVrZShwYXJlbnQpOwog");
    sb.append("ICAgICB2YXIgc3RhdGUgPSBmb3JrKHByaW9yU3RhdGUpOwogICAgICBpZiAoc2hvdyA9PT0gc2hvdWxk");
    sb.append("QmUpIHsKICAgICAgICBtYWtlclRydWUocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgbWFrZXJGYWxzZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfQogICAgICBzdWJzY3JpYmVfc3RhdGUo");
    sb.append("c3RhdGUsIGNob3Nlbik7CiAgICB9OwoKICAgIGNob3Nlbi51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgIHZhciBvdXQgPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVs");
    sb.append("XTsKICAgICAgaWYgKCEob3V0KSkgcmV0dXJuOwoKICAgICAgdmFyIGNob2ljZXMgPSBwcmlvclN0YXRl");
    sb.append("LmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwogICAgICBpZiAoIShjaGFubmVsIGluIGNob2ljZXMpKSB7");
    sb.append("CiAgICAgICAgY2hvaWNlc1tjaGFubmVsXSA9IHt9OwogICAgICB9CiAgICAgIHZhciBjaG9pY2UgPSBj");
    sb.append("aG9pY2VzW2NoYW5uZWxdOwogICAgICB2YXIgcmVzdWx0ID0gY2hvc2VuLnZhbHVlIGluIGNob2ljZTsK");
    sb.append("ICAgICAgaWYgKGNob3Nlbi5ldmFsICE9IHJlc3VsdCkgewogICAgICAgIGNob3Nlbi5ldmFsID0gcmVz");
    sb.append("dWx0OwogICAgICAgIGNoYW5nZShjaG9zZW4uZXZhbCk7CiAgICAgIH0KICAgIH07CgogICAgcHJpb3JT");
    sb.append("dGF0ZS5kYXRhLmNvbm5lY3Rpb24uc3Vic2NyaWJlX2Nob2ljZShjaGFubmVsLCBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgIGNob3Nlbi51cGRhdGUoKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKCiAgICBzdWJz");
    sb.append("Y3JpYmUoZXZhbFN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgY2hvc2VuLnZhbHVl");
    sb.append("ID0gdmFsdWU7CiAgICAgIGNob3Nlbi51cGRhdGUoKTsKICAgIH0pOwogIH07CgogIHNlbGYuREUgPSBm");
    sb.append("dW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBldmFsU3RhdGUsIGNoYW5uZWwsIGtleSwgbmFtZSwg");
    sb.append("c2hvdWxkQmUsIF9leHBhbmQsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSkgewogICAgdmFyIGRlY2lkZSA9");
    sb.append("IHsKICAgICAgdmFsdWU6ICIiLAogICAgICBvd25lcjogcGFyZW50LAogICAgICBzaG93bjogZmFsc2Us");
    sb.append("CiAgICAgIGV2YWw6IG51bGwKICAgIH07CiAgICBhZGRfdW5zdWIoZGVjaWRlKTsKICAgIHZhciBjaGFu");
    sb.append("Z2UgPSBmdW5jdGlvbiAoc2hvdykgewogICAgICBmaXJlX3Vuc3ViKGRlY2lkZSk7CiAgICAgIG51a2Uo");
    sb.append("cGFyZW50KTsKICAgICAgdmFyIHN0YXRlID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgaWYgKHNob3cg");
    sb.append("PT09IHNob3VsZEJlKSB7CiAgICAgICAgbWFrZXJUcnVlKHBhcmVudCwgc3RhdGUpOwogICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgIG1ha2VyRmFsc2UocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2Ny");
    sb.append("aWJlX3N0YXRlKHN0YXRlLCBkZWNpZGUpOwogICAgfTsKCiAgICBkZWNpZGUudXBkYXRlID0gZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICB2YXIgcmVzdWx0ID0gZmluZChwcmlvclN0YXRlLCBjaGFubmVsLCBrZXksIGRl");
    sb.append("Y2lkZS52YWx1ZSkgIT0gbnVsbDsKICAgICAgaWYgKGRlY2lkZS5ldmFsICE9IHJlc3VsdCkgewogICAg");
    sb.append("ICAgIGRlY2lkZS5ldmFsID0gcmVzdWx0OwogICAgICAgIGNoYW5nZShkZWNpZGUuZXZhbCk7CiAgICAg");
    sb.append("IH0KICAgIH07CgogICAgcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24uc3Vic2NyaWJlKGNoYW5uZWws");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgICAgZGVjaWRlLnVwZGF0ZSgpOwogICAgICAvLyBUT0RPOiByZXR1cm4g");
    sb.append("d2hldGhlciBvciBub3QgdGhpcyBuZWVkcyB0byBiZSBheGVkCiAgICAgIHJldHVybiB0cnVlOwogICAg");
    sb.append("fSk7CgogICAgc3Vic2NyaWJlKGV2YWxTdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAg");
    sb.append("IGRlY2lkZS52YWx1ZSA9IHZhbHVlOwogICAgICBkZWNpZGUudXBkYXRlKCk7CiAgICB9KTsKICB9OwoK");
    sb.append("ICB2YXIgY29tbW9uSWYgPSBmdW5jdGlvbihwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHNob3VsZEJlLCBl");
    sb.append("eHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5nKSB7CiAgICB2YXIgdW5z");
    sb.append("dWIgPSBtYWtlX3Vuc3ViKCk7CiAgICBpZiAoZm9yY2VIaWRpbmcpIHsKICAgICAgcGFyZW50LnN0eWxl");
    sb.append("LmRpc3BsYXkgPSAibm9uZSI7CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAg");
    sb.append("IHZhciBzaG93ID0gKHZhbHVlID8gdHJ1ZSA6IGZhbHNlKSA9PT0gc2hvdWxkQmU7CiAgICAgIGlmICh0");
    sb.append("aGlzLnNob3duID09IHNob3cpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5zaG93");
    sb.append("biA9IHNob3c7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAg");
    sb.append("IHZhciBuZXh0ID0gc2VsZi5wRChmb3JrKG9yaWdpbmFsU3RhdGUpKTsKICAgICAgaWYgKHNob3cpIHsK");
    sb.append("ICAgICAgICBpZiAoZm9yY2VIaWRpbmcpIHsKICAgICAgICAgIHBhcmVudC5zdHlsZS5kaXNwbGF5ID0g");
    sb.append("IiI7CiAgICAgICAgfQogICAgICAgIG1ha2VyVHJ1ZShwYXJlbnQsIG5leHQpOwogICAgICB9IGVsc2Ug");
    sb.append("ewogICAgICAgIGlmIChmb3JjZUhpZGluZykgewogICAgICAgICAgcGFyZW50LnN0eWxlLmRpc3BsYXkg");
    sb.append("PSAibm9uZSI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1ha2VyRmFsc2UocGFyZW50LCBuZXh0");
    sb.append("KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKG5leHQsIHVuc3ViKTsKICAg");
    sb.append("IH0uYmluZCh7IHNob3duOiAnbm8nIH0pOwogIH0KCiAgLy8gUlVOVElNRSB8IHJ4OmlmIC8gcng6aWZu");
    sb.append("b3QgPSAicGF0aDE9cGF0aDIiCiAgc2VsZi5JRmVxID0gZnVuY3Rpb24gKHBhcmVudCwgb3JpZ2luYWxT");
    sb.append("dGF0ZSwgcXVlcnlTdGF0ZUxlZnQsIG5hbWVMZWZ0LCBxdWVyeVN0YXRlUmlnaHQsIG5hbWVSaWdodCwg");
    sb.append("c2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpIHsK");
    sb.append("ICAgIHZhciBjb21tb24gPSB7bGVmdDpmYWxzZSwgcmlnaHQ6dHJ1ZX07CiAgICBjb21tb24ucyA9IGNv");
    sb.append("bW1vbklmKHBhcmVudCwgb3JpZ2luYWxTdGF0ZSwgc2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2VyVHJ1");
    sb.append("ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpOwogICAgY29tbW9uLmsgPSBkZWJvdW5jZSg1LCBmdW5j");
    sb.append("dGlvbigpIHsKICAgICAgdGhpcy5zKHRoaXMubGVmdCA9PSB0aGlzLnJpZ2h0KTsKICAgIH0uYmluZChj");
    sb.append("b21tb24pKTsKICAgIHN1YnNjcmliZShxdWVyeVN0YXRlTGVmdCwgbmFtZUxlZnQsIGZ1bmN0aW9uIChs");
    sb.append("ZWZ0KSB7CiAgICAgIHRoaXMubGVmdCA9IGxlZnQ7CiAgICAgIHRoaXMuaygpOwogICAgfS5iaW5kKGNv");
    sb.append("bW1vbikpCiAgICBzdWJzY3JpYmUocXVlcnlTdGF0ZVJpZ2h0LCBuYW1lUmlnaHQsIGZ1bmN0aW9uIChy");
    sb.append("aWdodCkgewogICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7CiAgICAgIHRoaXMuaygpOwogICAgfS5iaW5k");
    sb.append("KGNvbW1vbikpOwogIH07CgogIC8qKiB0aGUgYWJvdmUgc3BlYWtzIHRvIGEgZGVlcCBwYXR0ZXJuLiBX");
    sb.append("ZSBjb3VsZCB0YWtlIGFueSBleHByZXNzaW9uIGFuZCB0aGVuIGxpbmVhcml6ZSBpdCBpbnRvIHJlYWN0");
    sb.append("aXZlIHBhcnRzLCBhbmQgdGhlbiBhc3NlbWJsZSBhIHN0YXRlbWVudCBzdGF0ZW1lbnQgb24gdGhlIGZs");
    sb.append("eS4gV2Ugc2hvdWxkIGxvb2sgaW50byB1c2luZyB0aGUgY29uZGl0aW9uIGxhbmd1YWdlIGZvciB0aGlz");
    sb.append("ICovCgogIC8vIFJVTlRJTUUgfCByeDppZiAvIHJ4Omlmbm90ID0gInBhdGgiCiAgc2VsZi5JRiA9IGZ1");
    sb.append("bmN0aW9uIChwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHF1ZXJ5U3RhdGUsIG5hbWUsIHNob3VsZEJlLCBl");
    sb.append("eHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5nKSB7CiAgICBzdWJzY3Jp");
    sb.append("YmUocXVlcnlTdGF0ZSwgbmFtZSwgY29tbW9uSWYocGFyZW50LCBvcmlnaW5hbFN0YXRlLCBzaG91bGRC");
    sb.append("ZSwgZXhwYW5kVmlldywgbWFrZXJUcnVlLCBtYWtlckZhbHNlLCBmb3JjZUhpZGluZykpOwogIH07Cgog");
    sb.append("IC8vLyBSVU5USU1FIHwgcng6YWN0aW9uPWNvcHk6cGF0aAogIHNlbGYuYUNQID0gZnVuY3Rpb24gKGZv");
    sb.append("cm0sIHN0YXRlLCBuYW1lKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0");
    sb.append("aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBvYmogPSBnZXRf");
    sb.append("Zm9ybShmb3JtLCB7fSk7CiAgICAgIGlmIChuYW1lICE9ICIuIiAmJiBuYW1lICE9ICIiKSB7CiAgICAg");
    sb.append("ICAgdmFyIG5vID0ge307CiAgICAgICAgbm9bbmFtZV0gPSBvYmo7CiAgICAgICAgb2JqID0gbm87CiAg");
    sb.append("ICAgIH0KICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0");
    sb.append("ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsKICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgfSwg");
    sb.append("dHJ1ZSk7CiAgfTsKCiAgc2VsZi5WU1AgPSBmdW5jdGlvbihkb20sIHN0YXRlLCB2YXJzKSB7CiAgICB2");
    sb.append("YXIgc20gPSB7fTsKICAgIHNtLnZhcnMgPSB2YXJzOwogICAgc20ubGFzdCA9IHt9OwogICAgc20ucGFy");
    sb.append("YW1zID0gIiI7CiAgICBzbS5tb2RlID0gInJlcGxhY2UiOwogICAgc20ucGluZyA9IGRlYm91bmNlKDUw");
    sb.append("MCwgZnVuY3Rpb24oKSB7CiAgICAgIGlmICghZG9jdW1lbnQuYm9keS5jb250YWlucyhkb20pKSB7CiAg");
    sb.append("ICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBhcmdzID0gW107CiAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgdGhpcy52YXJzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgdmFyIGFyZyA9IHRoaXMudmFy");
    sb.append("c1trXTsKICAgICAgICBpZiAoYXJnIGluIHRoaXMubGFzdCkgewogICAgICAgICAgYXJncy5wdXNoKGFy");
    sb.append("ZyArICI9IiArIHRoaXMubGFzdFthcmddKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIHJlc3Vs");
    sb.append("dCA9ICI/IiArYXJncy5qb2luKCImIik7CiAgICAgIGlmIChyZXN1bHQgIT0gIj8iICYmIHdpbmRvdy5s");
    sb.append("b2NhdGlvbi5zZWFyY2ggIT09IHJlc3VsdCkgewogICAgICAgIHZhciBvYmogPSB7fTsKICAgICAgICBv");
    sb.append("Ymoudmlld2VyX3NlYXJjaF9xdWVyeSA9IHJlc3VsdDsKICAgICAgICB2YXIgZGVsdGEgPSBwYXRoX3Rv");
    sb.append("KHN0YXRlLnZpZXcsIG9iaik7CiAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAg");
    sb.append("ICAgICAgdHJ5IHsKICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgIiIsIGZp");
    sb.append("eEhyZWYod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgcmVzdWx0KSk7CiAgICAgICAgfSBjYXRjaChm");
    sb.append("YWlsZWRUb1JlcGxhY2VTdGF0ZSkgewoKICAgICAgICB9CiAgICAgIH0KICAgIH0uYmluZChzbSkpOwog");
    sb.append("ICAgc3RhdGUudmlldy50cmVlLnN1YnNjcmliZShmdW5jdGlvbihzKSB7CiAgICAgIHRoaXMubGFzdCA9");
    sb.append("IHM7CiAgICAgIHRoaXMucGluZygpOwogICAgfS5iaW5kKHNtKSk7CiAgfTsKCiAgc2VsZi5GID0gZnVu");
    sb.append("Y3Rpb24obyxrKSB7CiAgICBpZiAoayBpbiBvKSB7CiAgICAgIHJldHVybiBvW2tdOwogICAgfQogICAg");
    sb.append("cmV0dXJuICIiOwogIH07CgogIC8vIFJVTlRJTUUgfCA8aW5wdXQgLi4uIHJ4OnN5bmM9cGF0aCAuLi4+");
    sb.append("CiAgc2VsZi5TWSA9IGZ1bmN0aW9uIChlbCwgc3RhdGUsIG5hbWUsIG1zKSB7CiAgICB2YXIgdHlwZSA9");
    sb.append("ICgidHlwZSIgaW4gZWwpID8gZWwudHlwZS50b1VwcGVyQ2FzZSgpIDogInRleHQiOwogICAgdmFyIHNp");
    sb.append("Z25hbCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgb2JqID0ge307CiAgICAgIG9ialtuYW1l");
    sb.append("XSA9IHZhbHVlOwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAg");
    sb.append("IHN0YXRlLnZpZXcudHJlZS51cGRhdGUoZGVsdGEpOwogICAgICBpZiAodGhpcy5kZWR1cGUgIT0gdmFs");
    sb.append("dWUpIHsKICAgICAgICB0aGlzLmRlZHVwZSA9IHZhbHVlOwogICAgICAgIGVsLmRpc3BhdGNoRXZlbnQo");
    sb.append("bmV3IEV2ZW50KCJhZnRlcnN5bmMiKSk7CiAgICAgIH0KICAgIH0uYmluZCh7ZGVkdXBlOiIifSk7CiAg");
    sb.append("ICBpZiAodHlwZSA9PSAiQ0hFQ0tCT1giKSB7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5n");
    sb.append("ZScsIGRlYm91bmNlKG1zLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2lnbmFsKGVsLmNoZWNrZWQgPyB0");
    sb.append("cnVlIDogZmFsc2UpOwogICAgICB9KSk7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgICBzaWduYWwoZWwuY2hlY2tlZCA/IHRydWUgOiBmYWxzZSk7CiAgICAgIH0sIDEpOwog");
    sb.append("ICAgfSBlbHNlIGlmICh0eXBlID09ICJSQURJTyIpIHsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcign");
    sb.append("Y2hhbmdlJywgZGVib3VuY2UobXMsIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoZWwuY2hlY2tlZCkg");
    sb.append("ewogICAgICAgICAgc2lnbmFsKGVsLnZhbHVlKTsKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHZhciBmID0gZGVib3VuY2UobXMsIGZ1bmN0aW9uICgpIHsKICAgICAgICBzaWduYWwo");
    sb.append("ZWwudmFsdWUpOwogICAgICB9KTsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZik7");
    sb.append("CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZikKICAgICAgZWwub25rZXl1cCA9IGVs");
    sb.append("Lm9uY2hhbmdlOwogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2ln");
    sb.append("bmFsKGVsLnZhbHVlKTsKICAgICAgfSwgNSk7CiAgICB9CiAgfTsKCiAgdmFyIGZpcnN0T2NjdXIgPSBm");
    sb.append("dW5jdGlvbihhLCBiKSB7CiAgICBpZiAoYSA+IDAgJiYgYiA+IDApIHsKICAgICAgcmV0dXJuIE1hdGgu");
    sb.append("bWluKGEsIGIpOwogICAgfQogICAgaWYgKGEgPiAwKSB7CiAgICAgIHJldHVybiBhOwogICAgfSBlbHNl");
    sb.append("IHsKICAgICAgcmV0dXJuIGI7CiAgICB9CiAgfTsKICAvLyBIRUxQRVIgfCBleHRyYWN0IGFsbCB0aGUg");
    sb.append("aW5wdXRzIGZyb20gdGhlIGdpdmVuIGVsZW1lbnQgYW5kIGJ1aWxkIGFuIG9iamVjdAogIHZhciBidWls");
    sb.append("ZF9vYmogPSBmdW5jdGlvbiAoZWwsIG9ialRvSW5zZXJ0SW50bywgcGFzc3dvcmRzLCBpc1Jvb3QpIHsK");
    sb.append("ICAgIGlmIChlbC50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIkZPUk0iICYmICFpc1Jvb3QpIHsKICAg");
    sb.append("ICAgLy8gZG9uJ3QgY2FyZSBhYm91dCBuZXN0ZWQgZm9ybXMKICAgICAgcmV0dXJuOwogICAgfQogICAg");
    sb.append("dmFyIHVwcGVyVGFnID0gZWwudGFnTmFtZS50b1VwcGVyQ2FzZSgpOwogICAgdmFyIGp1c3RTZXQgPSB1");
    sb.append("cHBlclRhZyA9PSAiVEVYVEFSRUEiIHx8IHVwcGVyVGFnID09ICJTRUxFQ1QiOwogICAgdmFyIGlzSW5w");
    sb.append("dXRCb3ggPSB1cHBlclRhZyA9PSAiSU5QVVQiOwogICAgdmFyIGlzRmllbGRTZXQgPSB1cHBlclRhZyA9");
    sb.append("PSAiRklFTERTRVQiOwogICAgdmFyIGlzUHVsbCA9IHVwcGVyVGFnID09ICJQVUxMVkFMVUUiOwogICAg");
    sb.append("dmFyIGhhc05hbWUgPSAibmFtZSIgaW4gZWw7CiAgICB2YXIgaW5zZXJ0QXQgPSBvYmpUb0luc2VydElu");
    sb.append("dG87CiAgICAvLyB0aGUgYXBwbHkgZnVuY3Rpb24gaXMgaG93IHdlIGluamVjdCB0aGUgdmFsdWUgaW50");
    sb.append("byB0aGUgb2JqZWN0CiAgICB2YXIgYXBwbHkgPSBmdW5jdGlvbiAodmFsKSB7IH07CgogICAgdmFyIG5h");
    sb.append("bWUgPSAiIjsKICAgIGlmIChoYXNOYW1lICYmIChqdXN0U2V0IHx8IGlzSW5wdXRCb3ggfHwgaXNGaWVs");
    sb.append("ZFNldCB8fCBpc1B1bGwpKSB7CiAgICAgIG5hbWUgPSBlbC5uYW1lOwogICAgICBpZiAobmFtZSA9PSAi");
    sb.append("IikgeyAvLyB0aGlzIGlzIGEgc3BlY2lhbCBuYW1lIGZvciB0aGluZ3MgdGhhdCBkb24ndCBnZXQgcGlj");
    sb.append("a2VkIHVwCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBrRG90T3JTbGFzaCA9IGZpcnN0");
    sb.append("T2NjdXIobmFtZS5pbmRleE9mKCcuJyksIG5hbWUuaW5kZXhPZignLycpKTsKICAgICAgd2hpbGUgKGtE");
    sb.append("b3RPclNsYXNoID4gMCkgewogICAgICAgIHZhciBwYXIgPSBuYW1lLnN1YnN0cmluZygwLCBrRG90T3JT");
    sb.append("bGFzaCk7CiAgICAgICAgaWYgKCEocGFyIGluIGluc2VydEF0KSkgewogICAgICAgICAgaW5zZXJ0QXRb");
    sb.append("cGFyXSA9IHt9OwogICAgICAgIH0KICAgICAgICBpbnNlcnRBdCA9IGluc2VydEF0W3Bhcl07CiAgICAg");
    sb.append("ICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKGtEb3RPclNsYXNoICsgMSk7CiAgICAgICAga0RvdE9yU2xh");
    sb.append("c2ggPSBmaXJzdE9jY3VyKG5hbWUuaW5kZXhPZignLicpLCBuYW1lLmluZGV4T2YoJy8nKSk7CiAgICAg");
    sb.append("IH0KCiAgICAgIGlmIChuYW1lLmVuZHNXaXRoKCIrIikpIHsKICAgICAgICAvLyBoZXJlLCB3ZSBwdXNo");
    sb.append("IHRoZSB2YWx1ZSBpbnRvIHRoZSBhcnJheQogICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZygwLCBu");
    sb.append("YW1lLmxlbmd0aCAtIDEpOwogICAgICAgIGFwcGx5ID0gZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIGlm");
    sb.append("ICghKG5hbWUgaW4gaW5zZXJ0QXQpKSB7CiAgICAgICAgICAgIGluc2VydEF0W25hbWVdID0gW3ZdOwog");
    sb.append("ICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaW5zZXJ0QXRbbmFtZV0ucHVzaCh2KTsKICAgICAg");
    sb.append("ICAgIH0KICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGhlcmUgd2Ugc2V0IHRoZSBv");
    sb.append("YmplY3QKICAgICAgICBhcHBseSA9IGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICBpbnNlcnRBdFtuYW1l");
    sb.append("XSA9IHY7CiAgICAgICAgfTsKICAgICAgfQogICAgfQoKICAgIGlmIChpc1B1bGwpIHsKICAgICAgYXBw");
    sb.append("bHkoZWwucHVsbCgpKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmIChqdXN0U2V0KSB7CiAgICAg");
    sb.append("IGFwcGx5KGVsLnZhbHVlKTsKICAgIH0gZWxzZSBpZiAoaXNGaWVsZFNldCkgewogICAgICB2YXIgbmV4");
    sb.append("dE9iamVjdCA9IHt9OwogICAgICBpZiAoImNoaWxkcmVuIiBpbiBlbCkgewogICAgICAgIHZhciBhcnIg");
    sb.append("PSBlbC5jaGlsZHJlbjsKICAgICAgICB2YXIgbiA9IGFyci5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIg");
    sb.append("ayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAgIHZhciBjaCA9IGVsLmNoaWxkcmVuW2tdOwogICAg");
    sb.append("ICAgICAgYnVpbGRfb2JqKGNoLCBuZXh0T2JqZWN0LCBwYXNzd29yZHMsIGZhbHNlKTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0KICAgICAgYXBwbHkobmV4dE9iamVjdCk7CiAgICB9IGVsc2UgaWYgKGlzSW5wdXRCb3gp");
    sb.append("IHsKICAgICAgdmFyIHR5cGUgPSAoInR5cGUiIGluIGVsKSA/IGVsLnR5cGUudG9VcHBlckNhc2UoKSA6");
    sb.append("ICJURVhUIjsKICAgICAgaWYgKHR5cGUgPT0gIlNVQk1JVCIgfHwgdHlwZSA9PSAiUkVTRVQiKSByZXR1");
    sb.append("cm47CiAgICAgIGlmICgodHlwZSA9PSAiUEFTU1dPUkQiIHx8IG5hbWUgPT0gInBhc3N3b3JkIiB8fCBu");
    sb.append("YW1lID09ICJjb25maXJtLXBhc3N3b3JkIiB8fCBuYW1lID09ICJuZXdfcGFzc3dvcmQiIHx8IG5hbWUg");
    sb.append("PT0gImNvbmZpcm0tbmV3X3Bhc3N3b3JkIikpIHsKICAgICAgICBwYXNzd29yZHNbbmFtZV0gPSBlbC52");
    sb.append("YWx1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT0gIkNIRUNLQk9YIikg");
    sb.append("ewogICAgICAgIGFwcGx5KGVsLmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpOwogICAgICB9IGVsc2UgaWYg");
    sb.append("KHR5cGUgPT0gIlJBRElPIikgewogICAgICAgIGlmIChlbC5jaGVja2VkKSB7CiAgICAgICAgICBhcHBs");
    sb.append("eShlbC52YWx1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGFwcGx5KGVsLnZhbHVl");
    sb.append("KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKCJjaGlsZHJlbiIgaW4gZWwpIHsKICAgICAg");
    sb.append("ICB2YXIgYXJyID0gZWwuY2hpbGRyZW47CiAgICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOwogICAgICAg");
    sb.append("IGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgICB2YXIgY2ggPSBlbC5jaGlsZHJl");
    sb.append("bltrXTsKICAgICAgICAgIGJ1aWxkX29iaihjaCwgb2JqVG9JbnNlcnRJbnRvLCBwYXNzd29yZHMsIGZh");
    sb.append("bHNlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICBzZWxmLkJ1aWxkRm9ybU9iamVjdCA9");
    sb.append("IGZ1bmN0aW9uKGZvcm0pIHsKICAgIHZhciBvYmogPSB7fTsKICAgIGJ1aWxkX29iaihmb3JtLCBvYmos");
    sb.append("IGZhbHNlLCB0cnVlKTsKICAgIHJldHVybiBvYmo7CiAgfTsKCiAgLy8gSEVMUEVSIHwgcmV0dXJuIGFu");
    sb.append("IG9iamVjdCBvZiBhbGwgdGhlIGlucHV0cyBvZiB0aGUgZ2l2ZW4gZm9ybSBlbGVtZW50CiAgdmFyIGdl");
    sb.append("dF9mb3JtID0gZnVuY3Rpb24gKGZvcm0sIHBhc3N3b3JkcykgewogICAgdmFyIG9iaiA9IHt9OwogICAg");
    sb.append("YnVpbGRfb2JqKGZvcm0sIG9iaiwgcGFzc3dvcmRzLCB0cnVlKTsKICAgIHJldHVybiBvYmo7CiAgfTsK");
    sb.append("CiAgLy8gPC4uLiByeDp3cmFwPWNvbnN0ID4KICB2YXIgY3VzdG9tc19jb21wb25lbnRzID0ge307CiAg");
    sb.append("c2VsZi5wcm92aWRlQ3VzdG9tQ29tcG9uZW50ID0gZnVuY3Rpb24obmFtZSwgZm9vKSB7CiAgICBjdXN0");
    sb.append("b21zX2NvbXBvbmVudHNbbmFtZV0gPSBmb287CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0YWcgLi4uIHJ4");
    sb.append("OmN1c3RvbT0iPyIgcG9ydDokbmFtZT0kb3V0cHV0IC4uLiA+Li4uPC90YWc+IHwgYXNzZW1ibGUgYSB3");
    sb.append("cml0ZXIgb2JqZWN0CiAgc2VsZi5XWCA9IGZ1bmN0aW9uKGluc3RydWN0aW9ucykgewogICAgdmFyIHdy");
    sb.append("aXRlciA9IHt9OwogICAgZm9yICh2YXIgayA9IDA7IGsgKyAyIDwgaW5zdHJ1Y3Rpb25zLmxlbmd0aDsg");
    sb.append("aysrKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgd3JpdGVyW2luc3RydWN0aW9uc1trXV0gPSBm");
    sb.append("dW5jdGlvbih2YWx1ZSkgewogICAgICAgIHZhciBzID0gdGhpczsKICAgICAgICBzLndbcy5rXSA9IHZh");
    sb.append("bHVlOwogICAgICAgIHMudC51cGRhdGUocy5kKTsKICAgICAgfS5iaW5kKHsKICAgICAgICBkOnBhdGhf");
    sb.append("dG8oaW5zdHJ1Y3Rpb25zWzFdLnZpZXcsIG9iaiksCiAgICAgICAgdzogb2JqLAogICAgICAgIGs6IGlu");
    sb.append("c3RydWN0aW9uc1syXSwKICAgICAgICB0OiBpbnN0cnVjdGlvbnNbMV0udmlldy50cmVlCiAgICAgIH0p");
    sb.append("OwogICAgfQogICAgcmV0dXJuIHdyaXRlcjsKICB9OwogIHNlbGYuQyA9IGZ1bmN0aW9uIChkb20sIHN0");
    sb.append("YXRlLCBuYW1lLCByeG9iaiwgd3JpdGVyLCBjaGlsZE1ha2VyV2l0aENhc2UsIGNvbmZpZykgewogICAg");
    sb.append("dmFyIG9iaiA9IHsKICAgICAgZG9tOiBkb20sCiAgICAgIHN0YXRlOiBzdGF0ZSwKICAgICAgaW5wdXRz");
    sb.append("OiByeG9iaiwKICAgICAgb3V0cHV0czogd3JpdGVyLAogICAgICBtYWtlcjogY2hpbGRNYWtlcldpdGhD");
    sb.append("YXNlLAogICAgICBjb25maWc6IGNvbmZpZywKICAgICAgZnJhbWV3b3JrOiBzZWxmCiAgICB9OwogICAg");
    sb.append("aWYgKG5hbWUgaW4gY3VzdG9tc19jb21wb25lbnRzKSB7CiAgICAgIGN1c3RvbXNfY29tcG9uZW50c1tu");
    sb.append("YW1lXShvYmopOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5lcnJvcigiZmFpbGVkIHRvIGZpbmQg");
    sb.append("Y3VzdG9tIGNvbXBvbmVudDogJyIgKyBuYW1lICsgIiciKTsKICAgIH0KICB9OwoKICB2YXIgd3JhcHBl");
    sb.append("cnMgPSB7fTsKICB2YXIgd3JhcHBlcnNfb25sb2FkID0ge307IC8vIFRPRE86IHN0dWR5IGlmIHRoaXMg");
    sb.append("Y2FuIGJlIHJlbW92ZWQKICBzZWxmLlBSV1AgPSBmdW5jdGlvbiAobmFtZSwgZm9vKSB7CiAgICB3cmFw");
    sb.append("cGVyc1tuYW1lXSA9IGZvbzsKICAgIGlmIChuYW1lIGluIHdyYXBwZXJzX29ubG9hZCkgewogICAgICB2");
    sb.append("YXIgdG9sb2FkID0gd3JhcHBlcnNfb25sb2FkW25hbWVdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8");
    sb.append("IHRvbG9hZC5sZW5ndGg7IGsrKykgewogICAgICAgIHRvbG9hZFtrXSgpOwogICAgICB9CiAgICB9CiAg");
    sb.append("fTsKCiAgLy8gPC4uLiByeDp3cmFwPWNvbnN0ID4KICBzZWxmLldQID0gZnVuY3Rpb24gKGRvbSwgc3Rh");
    sb.append("dGUsIG5hbWUsIHJ4b2JqLCBjaGlsZE1ha2VyV2l0aENhc2UpIHsKICAgIGlmIChuYW1lIGluIHdyYXBw");
    sb.append("ZXJzKSB7CiAgICAgIHdyYXBwZXJzW25hbWVdKGRvbSwgc3RhdGUsIHJ4b2JqLCBjaGlsZE1ha2VyV2l0");
    sb.append("aENhc2UsIHNlbGYpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGxvYWRlciA9IGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgICB3cmFwcGVyc1tuYW1lXShkb20sIHN0YXRlLCByeG9iaiwgY2hpbGRNYWtlcldpdGhDYXNl");
    sb.append("LCBzZWxmKTsKICAgICAgfTsKICAgICAgaWYgKG5hbWUgaW4gd3JhcHBlcnNfb25sb2FkKSB7CiAgICAg");
    sb.append("ICAgd3JhcHBlcnNfb25sb2FkW25hbWVdLnB1c2gobG9hZGVyKTsKICAgICAgfSBlbHNlIHsKICAgICAg");
    sb.append("ICB3cmFwcGVyc19vbmxvYWRbbmFtZV0gPSBbbG9hZGVyXTsKICAgICAgfQogICAgfQogIH07CgogIHZh");
    sb.append("ciBiZWhhdmlvcnMgPSB7fTsKICBzZWxmLmRlZmluZUJlaGF2aW9yID0gZnVuY3Rpb24obmFtZSwgYmVo");
    sb.append("YXZpb3IpIHsKICAgIGlmICh0eXBlb2YoYmVoYXZpb3IpID09ICdmdW5jdGlvbicpIHsKICAgICAgYmVo");
    sb.append("YXZpb3JzW25hbWVdID0gYmVoYXZpb3I7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3Io");
    sb.append("ImRlZmluaW5nIGJlaGF2aW9yICciICsgbmFtZSArICInIGZhaWxlZCBkdWUgdG8gbm90IGEgZnVuY3Rp");
    sb.append("b24iKQogICAgfQogIH07CgogIC8vIFJVTlRJTUUgfCByeDpiZWhhdmlvcj0kbmFtZQogIHNlbGYuQkhW");
    sb.append("ID0gZnVuY3Rpb24oZG9tLCBzdGF0ZSwgbmFtZSwgY29uZmlnKSB7CiAgICBpZiAobmFtZSBpbiBiZWhh");
    sb.append("dmlvcnMpIHsKICAgICAgdmFyIGNvbm4gPSBudWxsOwogICAgICB0cnkgewogICAgICAgIGNvbm4gPSBz");
    sb.append("dGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyOwogICAgICB9IGNhdGNoIChlKSB7fQogICAgICBiZWhhdmlv");
    sb.append("cnNbbmFtZV0oZG9tLCBjb25uLCBjb25maWcsIHNlbGYpOwogICAgfSBlbHNlIHsKICAgICAgY29uc29s");
    sb.append("ZS5sb2coImNvdWxkbid0IGZpbmQgYmVoYXZpb3I6IiArIG5hbWUpOwogICAgfQogIH07CgogIC8vIFJV");
    sb.append("TlRJTUUgfCByZWdpc3RlciB0aGUgcGFnZSBmb3IgdGhlIHVyaSB0byB0aGUgZ2l2ZW4gZm9vKCkuCiAg");
    sb.append("c2VsZi5QRyA9IGZ1bmN0aW9uICh1cmksIGZvbykgewogICAgdmFyIGhlYWQgPSByb3V0ZXI7CiAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IHVyaS5sZW5ndGg7IGsrKykgewogICAgICB2YXIgcGFydCA9IHVyaVtr");
    sb.append("XTsKICAgICAgaWYgKCEocGFydCBpbiBoZWFkKSkgewogICAgICAgIGhlYWRbcGFydF0gPSB7fTsKICAg");
    sb.append("ICAgfQogICAgICBoZWFkID0gaGVhZFtwYXJ0XTsKICAgIH0KICAgIGhlYWRbIkAiXSA9IGZvbzsKICB9");
    sb.append("OwoKICB2YXIgcm91dGUgPSBmdW5jdGlvbiAocGFydHMsIGF0LCBoZWFkLCB2aWV3KSB7CiAgICBpZiAo");
    sb.append("YXQgPCBwYXJ0cy5sZW5ndGgpIHsKICAgICAgaWYgKCJudW1iZXIiIGluIGhlYWQpIHsKICAgICAgICB2");
    sb.append("YXIgbmVjayA9IGhlYWRbIm51bWJlciJdOwogICAgICAgIHZhciB2YWwgPSBwYXJzZUZsb2F0KHBhcnRz");
    sb.append("W2F0XSk7CiAgICAgICAgaWYgKCFpc05hTih2YWwpKSB7CiAgICAgICAgICBmb3IgKHZhciBicmFuY2gg");
    sb.append("aW4gbmVjaykgewogICAgICAgICAgICB2aWV3W2JyYW5jaF0gPSB2YWw7CiAgICAgICAgICAgIHZhciBj");
    sb.append("YW5kaWRhdGUgPSByb3V0ZShwYXJ0cywgYXQgKyAxLCBuZWNrW2JyYW5jaF0sIHZpZXcpOwogICAgICAg");
    sb.append("ICAgICBpZiAoY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0");
    sb.append("ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWxldGUgdmlld1ticmFuY2hdOwogICAgICAgICAg");
    sb.append("fQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoInRleHQiIGluIGhlYWQpIHsKICAgICAgICB2YXIg");
    sb.append("bmVjayA9IGhlYWRbInRleHQiXTsKICAgICAgICB2YXIgdmFsID0gcGFydHNbYXRdOwogICAgICAgIGZv");
    sb.append("ciAodmFyIGJyYW5jaCBpbiBuZWNrKSB7CiAgICAgICAgICB2aWV3W2JyYW5jaF0gPSB2YWw7CiAgICAg");
    sb.append("ICAgICB2YXIgY2FuZGlkYXRlID0gcm91dGUocGFydHMsIGF0ICsgMSwgbmVja1ticmFuY2hdLCB2aWV3");
    sb.append("KTsKICAgICAgICAgIGlmIChjYW5kaWRhdGUgIT09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGNh");
    sb.append("bmRpZGF0ZTsKICAgICAgICAgIH0KICAgICAgICAgIGRlbGV0ZSB2aWV3W2JyYW5jaF07CiAgICAgICAg");
    sb.append("fQogICAgICB9CiAgICAgIGlmICgiZml4ZWQiIGluIGhlYWQpIHsKICAgICAgICB2YXIgbmVjayA9IGhl");
    sb.append("YWRbImZpeGVkIl07CiAgICAgICAgZm9yICh2YXIgYnJhbmNoIGluIG5lY2spIHsKICAgICAgICAgIGlm");
    sb.append("IChicmFuY2ggPT0gcGFydHNbYXRdKSB7CiAgICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSByb3V0ZShw");
    sb.append("YXJ0cywgYXQgKyAxLCBuZWNrW2JyYW5jaF0sIHZpZXcpOwogICAgICAgICAgICBpZiAoY2FuZGlkYXRl");
    sb.append("ICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTsKICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKCJAIiBpbiBo");
    sb.append("ZWFkKSB7CiAgICAgICAgcmV0dXJuIGhlYWRbIkAiXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG51");
    sb.append("bGw7CiAgfTsKCgogIHNlbGYucmVzdW1lX3VyaSA9ICIvIjsKICBzZWxmLmdhdGVzID0gW107CiAgLyoq");
    sb.append("IFJVTlRJTUUgfCA8Z2F0ZS1leGl0IGd1YXJkPSJyZWFkIiBzZXQ9IiI+ICovCiAgc2VsZi5JRyA9IGZ1");
    sb.append("bmN0aW9uKHN0YXRlUmVhZCwgcmVhZCwgc3RhdGVXcml0ZSwgd3JpdGUpIHsKICAgIHZhciBzbSA9IHsK");
    sb.append("ICAgICAgdmFsdWU6IGZhbHNlLAogICAgICBydW46IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICh0aGlz");
    sb.append("LnZhbHVlKSB7CiAgICAgICAgICB2YXIgb2JqID0ge307CiAgICAgICAgICBvYmpbd3JpdGVdID0gdHJ1");
    sb.append("ZTsKICAgICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGVXcml0ZS52aWV3LCBvYmopOwogICAg");
    sb.append("ICAgICAgc3RhdGVXcml0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsKICAgICAgICAgIHJldHVybiB0");
    sb.append("cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0sCiAgICB9OwogICAgc3Vi");
    sb.append("c2NyaWJlKHN0YXRlUmVhZCwgcmVhZCwgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgc20udmFsdWUgPSB2");
    sb.append("YWx1ZTsKICAgIH0pOwogICAgc2VsZi5nYXRlcy5wdXNoKHNtKTsKICB9OwogIHNlbGYuZ290byA9IGZ1");
    sb.append("bmN0aW9uICh1cmksIG5vdykgewogICAgc2VsZi5yZXN1bWVfdXJpID0gdXJpOwogICAgdmFyIGJsb2Nr");
    sb.append("ZWQgPSBmYWxzZTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc2VsZi5nYXRlcy5sZW5ndGg7IGsrKykg");
    sb.append("ewogICAgICBpZiAoc2VsZi5nYXRlc1trXS5ydW4oKSkgewogICAgICAgIGJsb2NrZWQgPSB0cnVlOwog");
    sb.append("ICAgICB9CiAgICB9CiAgICBpZiAoYmxvY2tlZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAo");
    sb.append("bm93KSB7CiAgICAgIHNlbGYuZ290b19ub3codXJpKTsKICAgIH0gZWxzZSB7CiAgICAgIHdpbmRvdy5z");
    sb.append("ZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLmdvdG9fbm93KHVyaSk7CiAgICAgIH0s");
    sb.append("IDEpOwogICAgfQogIH07CiAgLy8gUlVOVElNRTogPHRhZyAuLi4gcng6ZXZlbnQ9Ii4uLiByZXN1bWUg");
    sb.append("Li4uIj4uLgogIHNlbGYuYlIgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bjogZnVu");
    sb.append("Y3Rpb24oKSB7CiAgICAgICAgc2VsZi5nYXRlcyA9IFtdOwogICAgICAgIHNlbGYuZ290byhzZWxmLnJl");
    sb.append("c3VtZV91cmksIGZhbHNlKTsKICAgICAgfSwKICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkge30KICAgIH07");
    sb.append("CiAgfTsKICBzZWxmLmdvdG9fbm93ID0gZnVuY3Rpb24odXJpKSB7CiAgICBpZiAodXJpLnN0YXJ0c1dp");
    sb.append("dGgoIi8iKSkgewogICAgICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5LCB1cmksIHRydWUpOwogICAgfSBl");
    sb.append("bHNlIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBmaXhIcmVmKHVyaSk7CiAgICB9CiAgfTsK");
    sb.append("CiAgdmFyIHVybEJhc2U2NFRvVWludDhBcnJheSA9IGZ1bmN0aW9uKGJhc2U2NCkgewogICAgdmFyIHJh");
    sb.append("d0RhdGEgPSB3aW5kb3cuYXRvYihiYXNlNjQpOwogICAgdmFyIG91dHB1dEFycmF5ID0gbmV3IFVpbnQ4");
    sb.append("QXJyYXkocmF3RGF0YS5sZW5ndGgpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYXdEYXRhLmxlbmd0");
    sb.append("aDsgKytpKSB7CiAgICAgIG91dHB1dEFycmF5W2ldID0gcmF3RGF0YS5jaGFyQ29kZUF0KGkpOwogICAg");
    sb.append("fQogICAgcmV0dXJuIG91dHB1dEFycmF5OwogIH0KCiAgc2VsZi5jdXJyZW50UHVzaEV2ZW50ID0gZnVu");
    sb.append("Y3Rpb24oKSB7fTsKCiAgdmFyIGdldFdlYlB1c2hTdGF0dXMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBy");
    sb.append("ZXN1bHQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgid2VicHVzaF9zdGF0dXMiKTsKICAgIGlmIChyZXN1");
    sb.append("bHQgJiYgdHlwZW9mKHJlc3VsdCkgPT0gInN0cmluZyIpIHsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAg");
    sb.append("IH0KICAgIHJldHVybiAidW5rbm93biI7CiAgfQoKICB2YXIgc2V0UHVzaFN0YXR1cyA9IGZ1bmN0aW9u");
    sb.append("KHN0YXR1cykgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIndlYnB1c2hfc3RhdHVzIiwgc3RhdHVz");
    sb.append("KTsKICAgIHNlbGYuY3VycmVudFB1c2hFdmVudCgpOwogIH07CiAgc2VsZi5zZXRQdXNoU3RhdHVzID0g");
    sb.append("c2V0UHVzaFN0YXR1czsKCiAgdmFyIHNldFB1c2hFdmVudCA9IGZ1bmN0aW9uKGZvbykgewogICAgc2Vs");
    sb.append("Zi5jdXJyZW50UHVzaEV2ZW50ID0gZm9vOwogIH07CgogIHZhciBzZXR1cFN1YnNjcmlwdGlvbiA9IGZ1");
    sb.append("bmN0aW9uIChyZWdpc3RyYXRpb24sIHZhcGlkUHVibGljS2V5LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1l");
    sb.append("LCB2ZXJzaW9uKSB7CiAgICBjb25uZWN0aW9uLmJ1bXAoIndwcyIpOwogICAgdmFyIHB1c2hLZXlMb2Nh");
    sb.append("bCA9ICJwdXNoX2VuZHBvaW50XyIgKyBpZGVudGl0eU5hbWU7CiAgICByZWdpc3RyYXRpb24ucHVzaE1h");
    sb.append("bmFnZXIKICAgIC5nZXRTdWJzY3JpcHRpb24oKS50aGVuKGFzeW5jIGZ1bmN0aW9uIChzdWJzY3JpcHRp");
    sb.append("b24pIHsKICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0");
    sb.append("aW9uOwogICAgICAgIH0KICAgICAgICBjb25zdCBjb252ZXJ0ZWRWYXBpZEtleSA9IHVybEJhc2U2NFRv");
    sb.append("VWludDhBcnJheSh2YXBpZFB1YmxpY0tleSk7CiAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5wdXNo");
    sb.append("TWFuYWdlci5zdWJzY3JpYmUoewogICAgICAgICAgdXNlclZpc2libGVPbmx5OiB0cnVlLAogICAgICAg");
    sb.append("ICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IGNvbnZlcnRlZFZhcGlkS2V5CiAgICAgICAgfSk7CiAgICB9");
    sb.append("KS50aGVuKGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHsKICAgICAgLy8gbWFrZSBzdXJlIHdlIGhhdmUg");
    sb.append("YW4gZW5kcG9pbnQgc2F2ZWQgcmVsYXRlZCB0byB0aGUgcmlnaHQgdmVyc2lvbgogICAgICBjb25uZWN0");
    sb.append("aW9uLklkZW50aXR5SGFzaChpZGVudGl0eSwgewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3Vs");
    sb.append("dCkgewogICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwdXNoX3dvcmtlcl92ZXJzaW9u");
    sb.append("IikgIT0gdmVyc2lvbiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibGFzdF9pZGVudGl0eV91c2VkIikg");
    sb.append("IT0gcmVzdWx0LmlkZW50aXR5SGFzaCkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRl");
    sb.append("bShwdXNoS2V5TG9jYWwpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicHVzaF93b3Jr");
    sb.append("ZXJfdmVyc2lvbiIsIHZlcnNpb24pOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibGFz");
    sb.append("dF9pZGVudGl0eV91c2VkIiwgcmVzdWx0LmlkZW50aXR5SGFzaCk7CiAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICB2YXIgc3ViID0gc3Vic2NyaXB0aW9uLnRvSlNPTigpOwogICAgICAgICAgdmFyIHZhbCA9IGxvY2Fs");
    sb.append("U3RvcmFnZS5nZXRJdGVtKHB1c2hLZXlMb2NhbCk7CiAgICAgICAgICBpZiAodmFsICYmIHZhbCA9PSBz");
    sb.append("dWIuZW5kcG9pbnQpIHsKICAgICAgICAgICAgY29ubmVjdGlvbi5idW1wKCJ3cGEiKTsKICAgICAgICAg");
    sb.append("ICAgc2V0UHVzaFN0YXR1cygic3VjY2VzcyIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9");
    sb.append("CiAgICAgICAgICBzdWJbJ0BtZXRob2QnXSA9ICd3ZWJwdXNoJzsKICAgICAgICAgIHN1YlsnQHRpbWUn");
    sb.append("XSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgdmFyIGRldmljZSA9IHt9OwogICAgICAg");
    sb.append("ICAgZGV2aWNlLm1vZGUgPSAnd2ViJwogICAgICAgICAgaWYgKHdpbmRvdyAmJiB3aW5kb3cubmF2aWdh");
    sb.append("dG9yICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSB7CiAgICAgICAgICAgIGRldmljZS51YSA9");
    sb.append("IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50OwogICAgICAgICAgfQogICAgICAgICAgY29ubmVjdGlv");
    sb.append("bi5QdXNoUmVnaXN0ZXIoaWRlbnRpdHksIHNlbGYuZG9tYWluLCBzdWIsIGRldmljZSwgewogICAgICAg");
    sb.append("ICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRl");
    sb.append("bShwdXNoS2V5TG9jYWwsIHN1Yi5lbmRwb2ludCk7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNl");
    sb.append("dEl0ZW0oIndlYnB1c2hfc3RhdHVzIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICBzZXRQdXNoU3Rh");
    sb.append("dHVzKCJzdWNjZXNzIik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgICAgICAgICAgIGNvbm5lY3Rpb24uYnVtcCgid3BmIik7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24oKSB7CiAgICAgICAg");
    sb.append("ICBjb25uZWN0aW9uLmJ1bXAoIndwZiIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCBmdW5jdGlv");
    sb.append("bihlcnIpIHsKICAgICAgc2V0UHVzaFN0YXR1cygiZmFpbGVkIik7CiAgICAgIGxvY2FsU3RvcmFnZS5y");
    sb.append("ZW1vdmVJdGVtKHB1c2hLZXlMb2NhbCk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJsYXN0");
    sb.append("X2lkZW50aXR5X3VzZWQiKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInB1c2hfd29ya2Vy");
    sb.append("X3ZlcnNpb24iKTsKICAgICAgY29ubmVjdGlvbi5idW1wKCJ3cGQiKTsKICAgICAgY29ubmVjdGlvbi5s");
    sb.append("b2coInB1c2hzZXR1cCIsICIiICsgZXJyKTsKICAgIH0pOwogIH0KCiAgdmFyIHNldHVwUHVzaCA9IGZ1");
    sb.append("bmN0aW9uKHBhdGgsIHZhcGlkUHVibGljS2V5LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9u");
    sb.append("KSB7CiAgICBpZiAobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpIHsKICAgICAgdHJ5IHsKICAgICAgICBu");
    sb.append("YXZpZ2F0b3Iuc2VydmljZVdvcmtlci5nZXRSZWdpc3RyYXRpb25zKCkudGhlbihmdW5jdGlvbiAocmVn");
    sb.append("aXN0cmF0aW9ucykgewogICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7CiAgICAgICAgICBmb3IgKGxl");
    sb.append("dCByZWdpc3RyYXRpb24gb2YgcmVnaXN0cmF0aW9ucykgewogICAgICAgICAgICBpZiAocmVnaXN0cmF0");
    sb.append("aW9uLmFjdGl2ZSkgewogICAgICAgICAgICAgIGlmICghcmVnaXN0cmF0aW9uLmFjdGl2ZS5zY3JpcHRV");
    sb.append("UkwuZW5kc1dpdGgocGF0aCkpIHsKICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbi51bnJlZ2lzdGVy");
    sb.append("KCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAg");
    sb.append("ICAgICAgICAgICAgIHNldHVwU3Vic2NyaXB0aW9uKHJlZ2lzdHJhdGlvbiwgdmFwaWRQdWJsaWNLZXks");
    sb.append("IGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pOwogICAgICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgICBuYXZpZ2F0");
    sb.append("b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihwYXRoKTsKICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZp");
    sb.append("Y2VXb3JrZXIucmVhZHkudGhlbihmdW5jdGlvbiAocmVnaXN0cmF0aW9uKSB7CiAgICAgICAgICAgICAg");
    sb.append("c2V0dXBTdWJzY3JpcHRpb24ocmVnaXN0cmF0aW9uLCB2YXBpZFB1YmxpY0tleSwgaWRlbnRpdHksIGlk");
    sb.append("ZW50aXR5TmFtZSwgdmVyc2lvbik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0s");
    sb.append("IGZ1bmN0aW9uKGV4KSB7CiAgICAgICAgICBjb25uZWN0aW9uLmJ1bXAoIndwaTMiKTsKICAgICAgICAg");
    sb.append("IGNvbm5lY3Rpb24ubG9nKCJ3b3JrZXItZmluZCIsICIiICsgZXgpOwogICAgICAgIH0pOwogICAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoImZhaWxlZCB0byByZWdpc3RlciBzZXJ2");
    sb.append("aWNlIHdvcmtlciIsIGV4KTsKICAgICAgICBzZXRQdXNoU3RhdHVzKCJpbXBvc3NpYmxlIik7CiAgICAg");
    sb.append("ICAgY29ubmVjdGlvbi5idW1wKCJ3cGkyIik7CiAgICAgICAgY29ubmVjdGlvbi5sb2coIndvcmtlci1p");
    sb.append("bnN0YWxsIiwgIiIgKyBleCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCJu");
    sb.append("byBzZXJ2aWNlIHdvcmtlciBhdmFpbGFibGUiKTsKICAgICAgc2V0UHVzaFN0YXR1cygiaW1wb3NzaWJs");
    sb.append("ZSIpOwogICAgICBjb25uZWN0aW9uLmJ1bXAoIndwaTEiKTsKICAgIH0KICB9CgogIHNlbGYud29ya2Vy");
    sb.append("ID0gZnVuY3Rpb24oaWRlbnRpdHlOYW1lLCBwYXRoLCB2ZXJzaW9uKSB7CiAgICB0cnkgewogICAgICBh");
    sb.append("ZnRlckhhdmVJZGVudGl0eShpZGVudGl0eU5hbWUsIGZ1bmN0aW9uKGlkZW50aXR5KSB7CiAgICAgICAg");
    sb.append("Y29ubmVjdGlvbi5Eb21haW5HZXRWYXBpZFB1YmxpY0tleShpZGVudGl0eSwgc2VsZi5kb21haW4sIHsK");
    sb.append("ICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHNldHVwUHVz");
    sb.append("aChwYXRoLCByZXNwb25zZS5wdWJsaWNLZXksIGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24p");
    sb.append("OwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAg");
    sb.append("ICAgICAgY29uc29sZS5lcnJvcigiZmFpbGVkIHRvIGdldCBwdWJsaWMta2V5OiIgKyByZWFzb24pOwog");
    sb.append("ICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pOwogICAgfSBjYXRjaCAoZXgpIHsKICAgICAgY29u");
    sb.append("c29sZS5lcnJvcigiZmFpbGVkIHRvIGluaXRpYWxpemUgd29ya2VyIiwgZXgpOwogICAgfQogIH07Cgog");
    sb.append("IHNlbGYuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgIHNlbGYucnVuKGRvY3VtZW50LmJvZHksIGZpeFBh");
    sb.append("dGgod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIHdpbmRv");
    sb.append("dy5sb2NhdGlvbi5oYXNoKSwgZmFsc2UpOwogICAgd2luZG93Lm9ucG9wc3RhdGUgPSBmdW5jdGlvbiAo");
    sb.append("cCkgewogICAgICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5LCBmaXhQYXRoKHdpbmRvdy5sb2NhdGlvbi5w");
    sb.append("YXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyB3aW5kb3cubG9jYXRpb24uaGFzaCksIGZh");
    sb.append("bHNlKTsKICAgIH07CiAgfTsKCiAgdmFyIGN1cnJlbnRNZXNzYWdlSGFuZGxlcnMgPSB7fTsKICB2YXIg");
    sb.append("cmVtb3ZlQWxsTWVzc2FnZUhhbmRsZXJzID0gZnVuY3Rpb24oKSB7CiAgICBmb3IgKHZhciBrIGluIGN1");
    sb.append("cnJlbnRNZXNzYWdlSGFuZGxlcnMpIHsKICAgICAgZGVsZXRlIGN1cnJlbnRNZXNzYWdlSGFuZGxlcnNb");
    sb.append("a107CiAgICB9CiAgfTsKCiAgc2VsZi5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyID0gZnVuY3Rpb24oY2hh");
    sb.append("bm5lbCwgaGFuZGxlcikgewogICAgaWYgKGNoYW5uZWwgaW4gY3VycmVudE1lc3NhZ2VIYW5kbGVycykg");
    sb.append("ewogICAgICBjdXJyZW50TWVzc2FnZUhhbmRsZXJzW2NoYW5uZWxdLnB1c2goaGFuZGxlcik7CiAgICB9");
    sb.append("IGVsc2UgewogICAgICBjdXJyZW50TWVzc2FnZUhhbmRsZXJzW2NoYW5uZWxdID0gW2hhbmRsZXJdOwog");
    sb.append("ICAgfQogIH07CgogIHZhciByb3V0ZU1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkgewogICAgdHJ5IHsK");
    sb.append("ICAgICAgaWYgKCEoJ2RhdGEnIGluIGV2ZW50KSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAg");
    sb.append("ICBpZiAodHlwZW9mIChldmVudC5kYXRhKSAhPSAnb2JqZWN0JykgewogICAgICAgIHJldHVybjsKICAg");
    sb.append("ICAgfQogICAgICBpZiAoISgnY2hhbm5lbCcgaW4gZXZlbnQuZGF0YSkpIHsKICAgICAgICByZXR1cm47");
    sb.append("CiAgICAgIH0KICAgICAgdmFyIGNoYW5uZWwgPSBldmVudC5kYXRhLmNoYW5uZWw7CiAgICAgIHZhciBs");
    sb.append("aXN0ID0gY3VycmVudE1lc3NhZ2VIYW5kbGVyc1tjaGFubmVsXTsKICAgICAgaWYgKGxpc3QgIT09IG51");
    sb.append("bGwpIHsKICAgICAgICB2YXIgbiA9IGxpc3QubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBr");
    sb.append("IDwgbjsgaysrKSB7CiAgICAgICAgICBsaXN0W2tdKGV2ZW50LmRhdGEsIGV2ZW50KTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0KICAgIH0gY2F0Y2ggKHdlbGxNYXliZVRoZUVycm9yRG9lc250QmVsb25nVG9NZSkgewog");
    sb.append("ICAgICAvLyA6c2hydWc6CiAgICB9CiAgfTsKCiAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7");
    sb.append("CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIHJvdXRlTWVzc2FnZSwgZmFsc2Up");
    sb.append("OwogIH0gZWxzZSBpZiAod2luZG93LmF0dGFjaEV2ZW50KSB7CiAgICB3aW5kb3cuYXR0YWNoRXZlbnQo");
    sb.append("Im9ubWVzc2FnZSIsIHJvdXRlTWVzc2FnZSwgZmFsc2UpOwogIH0KCiAgc2VsZi5jdXJyZW50Vmlld2Vy");
    sb.append("SWQgPSAwOwogIC8vIEFQSSB8IFJ1biB0aGUgcGFnZSBpbiB0aGUgZ2l2ZW4gcGxhY2UKICBzZWxmLnJ1");
    sb.append("biA9IGZ1bmN0aW9uICh3aGVyZSwgcmF3UGF0aCwgcHVzaCkgewogICAgcmVtb3ZlQWxsTWVzc2FnZUhh");
    sb.append("bmRsZXJzKCk7CiAgICB2YXIgcGF0aCA9IHJhd1BhdGg7CiAgICB3aGlsZSAocGF0aC5lbmRzV2l0aCgi");
    sb.append("LyIpICYmIHBhdGggIT0gIi8iKSB7CiAgICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxl");
    sb.append("bmd0aCAtIDEpOwogICAgfQogICAgZm9yIChjb25LZXkgaW4gY29ubmVjdGlvbnMpIHsKICAgICAgY29u");
    sb.append("bmVjdGlvbnNbY29uS2V5XS50cmVlLm51a2UoKTsKICAgICAgY29ubmVjdGlvbnNbY29uS2V5XS5udWtl");
    sb.append("KCk7CiAgICB9CiAgICB2YXIgc2VhcmNoID0gIiI7CiAgICB2YXIga1F1ZXN0aW9uID0gcGF0aC5pbmRl");
    sb.append("eE9mKCc/Jyk7CiAgICBpZiAoa1F1ZXN0aW9uID4gMCkgewogICAgICBzZWFyY2ggPSBwYXRoLnN1YnN0");
    sb.append("cmluZyhrUXVlc3Rpb24pOwogICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwga1F1ZXN0aW9uKTsK");
    sb.append("ICAgIH0KICAgIHZhciBwYXJ0cyA9IChwYXRoLnN0YXJ0c1dpdGgoIi8iKSA/IHBhdGguc3Vic3RyaW5n");
    sb.append("KDEpIDogcGF0aCkuc3BsaXQoIi8iKTsKICAgIHZhciBpbml0ID0ge307CiAgICBzZWxmLmN1cnJlbnRW");
    sb.append("aWV3ZXJJZCsrOwogICAgaW5pdC52aWV3ZXJfY3VycmVudF9wYWdlX2lkID0gc2VsZi5jdXJyZW50Vmll");
    sb.append("d2VySWQ7CiAgICBpbml0LnZpZXdlcl9kb21haW4gPSBzZWxmLmRvbWFpbjsKICAgIGluaXQudmlld2Vy");
    sb.append("X3VybF9wcmVmaXggPSBzZWxmLnVybF9wcmVmaXg7CiAgICB0cnkgewogICAgICBpbml0LnZpZXdlcl90");
    sb.append("aW1lem9uZSA9IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTsK");
    sb.append("ICAgICAgaW5pdC52aWV3ZXJfbGFuZ3VhZ2UgPSBuYXZpZ2F0b3IubGFuZ3VhZ2U7CiAgICB9IGNhdGNo");
    sb.append("IChicm93c2VyQmFkKSB7CiAgICAgIC8vIHdlIGp1c3QgZG9uJ3Qgc2VlIHRoZSB2aWV3c3RhdGUgaWYg");
    sb.append("d2UgZG9uJ3QgaGF2ZSB0aGVzZSBhdmFpbGFibGUKICAgIH0KICAgIGluaXQudmlld2VyX3NlYXJjaF9x");
    sb.append("dWVyeSA9ICIiOwogICAgaW5pdC52aWV3ZXJfd2ViX3B1c2hfc3RhdHVzID0gZ2V0V2ViUHVzaFN0YXR1");
    sb.append("cygpOwogICAgaWYgKHNlYXJjaCAhPSAiPyIpIHsKICAgICAgaW5pdC52aWV3ZXJfc2VhcmNoX3F1ZXJ5");
    sb.append("ID0gc2VhcmNoOwogICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNlYXJjaC5z");
    sb.append("dWJzdHJpbmcoMSkpOwogICAgICB2YXIga0l0ID0gcGFyYW1zLmtleXMoKTsKICAgICAgdmFyIHAgPSBr");
    sb.append("SXQubmV4dCgpOwogICAgICB3aGlsZSAoIXAuZG9uZSkgewogICAgICAgIGluaXRbcC52YWx1ZV0gPSBw");
    sb.append("YXJhbXMuZ2V0KHAudmFsdWUpOwogICAgICAgIHAgPSBrSXQubmV4dCgpOwogICAgICB9CiAgICB9CiAg");
    sb.append("ICB2YXIgZm9vID0gcm91dGUocGFydHMsIDAsIHJvdXRlciwgaW5pdCk7CiAgICBudWtlKHdoZXJlKTsK");
    sb.append("ICAgIGlmIChmb28gIT0gbnVsbCkgewogICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7CiAgICAgIHZh");
    sb.append("ciBzdGF0ZSA9IHsgc2VydmljZTogY29ubmVjdGlvbiwgZGF0YTogbnVsbCwgdmlldzogZnJlc2god2hl");
    sb.append("cmUpLCBjdXJyZW50OiAidmlldyIgfTsKICAgICAgc2VsZi5fX2N1cnJlbnQgPSBzdGF0ZTsKCiAgICAg");
    sb.append("IGNvbnN0IHZpZXdzdGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyeHZpZXdzdGF0ZScpOwogICAg");
    sb.append("ICBpZiAobnVsbCAhPT0gdmlld3N0YXRlKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0o");
    sb.append("J3J4dmlld3N0YXRlJyk7CiAgICAgICAgaW5pdCA9IE9iamVjdC5hc3NpZ24oe30sIGluaXQsIEpTT04u");
    sb.append("cGFyc2Uodmlld3N0YXRlKSk7CiAgICAgIH0KCiAgICAgIHN0YXRlLnZpZXcuaW5pdCA9IGluaXQ7CiAg");
    sb.append("ICAgIHNlbGYuZ2F0ZXMgPSBbXTsKICAgICAgc2VsZi5yZXN1bWVfdXJpID0gcGF0aDsKICAgICAgc2Vs");
    sb.append("Zi5faW5mbGlnaHQgKys7CiAgICAgIGZvbyh3aGVyZSwgc3RhdGUpOwogICAgICBzdGF0ZS52aWV3LnRy");
    sb.append("ZWUuc3Vic2NyaWJlKHN0YXRlLnZpZXcuZGVsdGEpOwogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRl");
    sb.append("KGluaXQpOwogICAgICBzZWxmLl9pbmZsaWdodCAtLTsKICAgICAgaWYgKHB1c2gpIHsKICAgICAgICB3");
    sb.append("aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe21lcmdlOmZhbHNlfSwgIiIsIGZpeEhyZWYocGF0aCkgKyBz");
    sb.append("ZWFyY2gpOwogICAgICB9CiAgICAgIHNldFB1c2hFdmVudChmdW5jdGlvbigpIHsKICAgICAgICBzdGF0");
    sb.append("ZS52aWV3LnRyZWUudXBkYXRlKHsgdmlld2VyX3dlYl9wdXNoX3N0YXR1czogZ2V0V2ViUHVzaFN0YXR1");
    sb.append("cygpfSk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHBhdGggIT0gIi80MDQiKSB7CiAg");
    sb.append("ICAgICAgc2VsZi5ydW4od2hlcmUsICIvNDA0Iik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gZGVm");
    sb.append("YXVsdCA0MDQKICAgICAgfQogICAgfQogICAgd2hlcmUuYXBwZW5kQ2hpbGQoY29ubmVjdGlvbk1vbml0");
    sb.append("b3JEb20pOwogIH07CgogIHZhciBpZGVudGl0aWVzID0ge307CgogIHZhciBzdGFzaF9pZGVudGl0eSA9");
    sb.append("IGZ1bmN0aW9uKG5hbWUsIGlkZW50aXR5LCBjb25uZWN0aW9uKSB7CiAgICAvLyBUT0RPOiBibG93IGF3");
    sb.append("YXkgY29ubmVjdGlvbnMgKE9LLCB3aGF0IGRvZXMgdGhpcyBtZWFuKQogICAgaWRlbnRpdGllc1tuYW1l");
    sb.append("XSA9IGlkZW50aXR5OwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkZW50aXR5XyIgKyBuYW1lLCBp");
    sb.append("ZGVudGl0eSk7CiAgICB2YXIgcmVxID0ge307CiAgICByZXFbJ25hbWUnXSA9IG5hbWU7CiAgICByZXFb");
    sb.append("J2lkZW50aXR5J10gPSBpZGVudGl0eTsKICAgIHJlcVsnbWF4LWFnZSddID0gNTUyOTYwMDsKCiAgICB2");
    sb.append("YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5n");
    sb.append("ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgICAg");
    sb.append("aWYgKHRoaXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImxh");
    sb.append("c3Rfc3Rhc2hlZF9pZGVudGl0eV8iICsgbmFtZSwgIiIgKyBEYXRlLm5vdygpKQogICAgICAgICAgaWYg");
    sb.append("KGNvbm5lY3Rpb24gIT0gbnVsbCkgewogICAgICAgICAgICBjb25uZWN0aW9uLklkZW50aXR5U3Rhc2go");
    sb.append("aWRlbnRpdHksIG5hbWUsIHsKICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAg");
    sb.append("ICAgICAgICAgICAvLyBUSElTIEhBUyBEUkFHT05TIFVOVElMIEEgRlVMTCBQUk9EVUNUSU9OIERFUExP");
    sb.append("WU1FTlQKICAgICAgICAgICAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8iICsg");
    sb.append("bmFtZSwgImNvb2tpZToiICsgbmFtZSk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBmYWls");
    sb.append("dXJlOiBmdW5jdGlvbiAoeHl6KSB7CgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAg");
    sb.append("ICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgeGh0dHAub3BlbigiUFVUIiwgc2VsZi5w");
    sb.append("cm90b2NvbCArICIvLyIgKyBzZWxmLmhvc3QgKyAiL35zdGFzaC8iICsgRGF0ZS5ub3coKSwgdHJ1ZSk7");
    sb.append("CiAgICB4aHR0cC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogICAgeGh0dHAuc2VuZChKU09OLnN0cmlu");
    sb.append("Z2lmeShyZXEpKTsKICB9OwoKICB2YXIgc2hvdWxkX3N0YXNoX2lkZW50aXR5ID0gZnVuY3Rpb24obmFt");
    sb.append("ZSkgewogICAgdmFyIHN0YXNoX2tleSA9ICJsYXN0X3N0YXNoZWRfaWRlbnRpdHlfIiArIG5hbWU7CiAg");
    sb.append("ICB2YXIgbGFzdFN0YXNoID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oc3Rhc2hfa2V5KTsKICAgIHRyeSB7");
    sb.append("CiAgICAgIHZhciBwYXJzZWQgPSBwYXJzZUZsb2F0KGxhc3RTdGFzaCk7CiAgICAgIGlmIChpc05hTihw");
    sb.append("YXJzZWQpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgdmFyIGFnZSA9IERhdGUu");
    sb.append("bm93KCkgLSBuZXcgRGF0ZShwYXJzZWQpLmdldFRpbWUoKTsKICAgICAgcmV0dXJuIGFnZSA+PSAxLjQ0");
    sb.append("ZSs3OwogICAgfSBjYXRjaCAoZXgpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfTsKCiAgc2Vs");
    sb.append("Zi5TSUdOT1VUID0gZnVuY3Rpb24gKCkgewogICAgaWRlbnRpdGllcyA9IHt9OwogICAgZm9yICh2YXIg");
    sb.append("aWRlbnRpdHlOYW1lIGluIGlkZW50aXRpZXMpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0o");
    sb.append("ImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUpOwogICAgfQogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0");
    sb.append("ZW0oImlkZW50aXR5X2RlZmF1bHQiKTsKICAgIHZhciBheGUgPSBbXTsKICAgIGZvciAodmFyIGNpZCBp");
    sb.append("biBjb25uZWN0aW9ucykgewogICAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tjaWRdOwogICAgICBpZiAo");
    sb.append("Y28ucHRyICE9IG51bGwpIHsKICAgICAgICBjby5wdHIuZW5kKHsgc3VjY2VzczogZnVuY3Rpb24gKCkg");
    sb.append("eyB9LCBmYWlsdXJlOiBmdW5jdGlvbiAoKSB7IH0gfSk7CiAgICAgIH0KICAgICAgYXhlLnB1c2goY2lk");
    sb.append("KTsKICAgIH0KICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXhlLmxlbmd0aDsgaysrKSB7CiAgICAgIGRl");
    sb.append("bGV0ZSBjb25uZWN0aW9uc1theGVba11dOwogICAgfQogIH07CgogIHNlbGYuR09PR0xFX1NJR05fT04g");
    sb.append("PSBmdW5jdGlvbiAoYWNjZXNzVG9rZW4pIHsKICAgIGNvbm5lY3Rpb24uSW5pdENvbnZlcnRHb29nbGVV");
    sb.append("c2VyKGFjY2Vzc1Rva2VuLCB7CiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAg");
    sb.append("ICAgc3Rhc2hfaWRlbnRpdHkoImRlZmF1bHQiLCBwYXlsb2FkLmlkZW50aXR5LCBjb25uZWN0aW9uKTsK");
    sb.append("ICAgICAgICBzZWxmLmdvdG8oIi8iLCBmYWxzZSk7CiAgICAgIH0sCiAgICAgIGZhaWx1cmU6IGZ1bmN0");
    sb.append("aW9uIChyZWFzb24pIHsKICAgICAgICBjb25zb2xlLmxvZygiR29vZ2xlIGZhaWx1cmU6ICIgKyByZWFz");
    sb.append("b24pOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvKiogUlVOVElNRSB8IHJlZGlyZWN0IHRvIGEgcGFn");
    sb.append("ZSB3aXRoIHN0YXRlICovCiAgc2VsZi5hUkRwID0gZnVuY3Rpb24gKHN0YXRlLCBwdWxsZXIpIHsKICAg");
    sb.append("IHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB1cmkgPSBwdWxsZXIoc3RhdGUudmlldy5pbml0");
    sb.append("KTsKICAgICAgcmV0dXJuIHVyaTsKICAgIH07CiAgfTsKCiAgLyoqIFJVTlRJTUUgfCByZWRpcmVjdCB0");
    sb.append("byBhIHN0YXRpYyBwYWdlICovCiAgc2VsZi5hUkR6ID0gZnVuY3Rpb24gKHJhdykgewogICAgcmV0dXJu");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHJhdzsKICAgIH0KICB9OwoKICB2YXIgaWRlbnRpdHlF");
    sb.append("dmVudHMgPSB7fTsKICB2YXIgYWZ0ZXJIYXZlSWRlbnRpdHkgPSBmdW5jdGlvbihpZGVudGl0eU5hbWUs");
    sb.append("IGNhbGxiYWNrKSB7CiAgICBpZGVudGl0eUV2ZW50c1tpZGVudGl0eU5hbWVdID0gY2FsbGJhY2s7CiAg");
    sb.append("fTsKICBzZWxmLmFmdGVySGF2ZUlkZW50aXR5ID0gYWZ0ZXJIYXZlSWRlbnRpdHk7CgogIC8qKiBmb3Ig");
    sb.append("Y3VzdG9tIGVsZW1lbnRzIHRvIGxlYXJuIG9mIHRoZSBpZGVudGl0eSAqLwogIHNlbGYuSUQgPSBmdW5j");
    sb.append("dGlvbiAoaWRlbnRpdHlOYW1lLCByZWRpcmVjdFRvRnVuYykgewogICAgaWYgKGlkZW50aXR5TmFtZSA9");
    sb.append("PT0gdHJ1ZSkgewogICAgICBpZGVudGl0eU5hbWUgPSAiZGVmYXVsdCI7CiAgICB9CiAgICAvLyBJRiBp");
    sb.append("ZGVudGl0eSBjb250YWlucyBkb3RzCiAgICB2YXIgaWRlbnRpdHkgPSBudWxsOwogICAgdmFyIGNsZWFu");
    sb.append("dXAgPSBmdW5jdGlvbiAoKSB7CiAgICB9OwoKICAgIHZhciB2YWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRl");
    sb.append("bSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSk7CiAgICBpZiAodmFsKSB7CiAgICAgIGlkZW50aXRp");
    sb.append("ZXNbaWRlbnRpdHlOYW1lXSA9IHZhbDsKICAgICAgaWYgKHNob3VsZF9zdGFzaF9pZGVudGl0eShpZGVu");
    sb.append("dGl0eU5hbWUpKSB7CiAgICAgICAgc3Rhc2hfaWRlbnRpdHkoaWRlbnRpdHlOYW1lLCB2YWwsIG51bGwp");
    sb.append("OwogICAgICB9CiAgICB9CgogICAgaWYgKGlkZW50aXR5TmFtZS5zdGFydHNXaXRoKCJkaXJlY3Q6Iikp");
    sb.append("IHsKICAgICAgLy8gVXNlLCBhcyBpcwogICAgICBpZGVudGl0eSA9IGlkZW50aXR5TmFtZS5zdWJzdHJp");
    sb.append("bmcoNyk7CiAgICB9IGVsc2UgaWYgKGlkZW50aXR5TmFtZSBpbiBpZGVudGl0aWVzKSB7CiAgICAgIGlk");
    sb.append("ZW50aXR5ID0gaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdOwogICAgICBjbGVhbnVwID0gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgIGRlbGV0ZSBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV07CiAgICAgICAgbG9jYWxT");
    sb.append("dG9yYWdlLnJlbW92ZUl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUpOwogICAgICAgIHNlbGYu");
    sb.append("Z290byhyZWRpcmVjdFRvRnVuYygpLCBmYWxzZSk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICAv");
    sb.append("LyB3aGF0ZXZlciBwYWdlIHdlIGFyZSwgbmVlZHMgdG8gZGllIHdoaWNoIG1lYW5zIHdlIG5lZWQgdG8g");
    sb.append("bnVrZSBldmVyeXRoaW5nIQogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAg");
    sb.append("ICAgc2VsZi5nb3RvKHJlZGlyZWN0VG9GdW5jKCksIGZhbHNlKTsKICAgICAgfSwgMTApOwogICAgICBy");
    sb.append("ZXR1cm4geyBhYm9ydDogdHJ1ZSB9OwogICAgfQogICAgaWYgKGlkZW50aXR5TmFtZSBpbiBpZGVudGl0");
    sb.append("eUV2ZW50cykgewogICAgICBpZGVudGl0eUV2ZW50c1tpZGVudGl0eU5hbWVdKGlkZW50aXR5KTsKICAg");
    sb.append("ICAgZGVsZXRlIGlkZW50aXR5RXZlbnRzW2lkZW50aXR5TmFtZV07CiAgICB9CiAgICByZXR1cm4geyBh");
    sb.append("Ym9ydDogZmFsc2UsIGNsZWFudXA6IGNsZWFudXAsIGlkZW50aXR5OiBpZGVudGl0eSB9OwogIH07Cgog");
    sb.append("IC8qIEZvciBjdXN0b20gY2FsbGJhY2tzIHRvIHJlZGlyZWN0IGFuZCBpbnZhbGlkYXRlIElEIGZhaWx1");
    sb.append("cmVzICovCiAgc2VsZi5GSURDTCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgbG9va3VwKSB7CiAgICByZXR1");
    sb.append("cm4gewogICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgY2FsbGJhY2suc3Vj");
    sb.append("Y2VzcyhyZXN1bHQpOwogICAgICB9LAogICAgICBuZXh0OiBmdW5jdGlvbiAoaXRlbSkgewogICAgICAg");
    sb.append("IGNhbGxiYWNrLm5leHQoaXRlbSk7CiAgICAgIH0sCiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgICAgY2FsbGJhY2suY29tcGxldGUoKTsKICAgICAgfSwKICAgICAgZmFpbHVyZTogZnVuY3Rp");
    sb.append("b24gKHJlYXNvbikgewogICAgICAgIGNhbGxiYWNrLmZhaWx1cmUocmVhc29uKTsKICAgICAgICBpZiAo");
    sb.append("cmVhc29uID09IDQwMzQwMyB8fCByZWFzb24gPT0gNDAzNTAwIHx8IHJlYXNvbiA9PSAxODQzMzMgfHwg");
    sb.append("cmVhc29uID09IDk4MjI1MykgewogICAgICAgICAgbG9va3VwLmNsZWFudXAoKTsKICAgICAgICB9CiAg");
    sb.append("ICAgIH0KICAgIH07CiAgfTsKCiAgdmFyIGN1c3RvbURhdGFTb3VyY2VzID0ge307CgogIC8qKiBwcm92");
    sb.append("aWRlIGN1c3RvbSBkYXRhICovCiAgc2VsZi5QUkNVREEgPSBmdW5jdGlvbiAobmFtZSwgZm9vKSB7CiAg");
    sb.append("ICBjdXN0b21EYXRhU291cmNlc1tuYW1lXSA9IGZvbzsKICB9OwoKICAvLyA8Y3VzdG9tZGF0YSBzcmM9");
    sb.append("c3JjIChwYXJhbWV0ZXI6eD15KSogPgogIHNlbGYuQ1VEQSA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9y");
    sb.append("U3RhdGUsIHNyYywgcnhvYmosIHJlZGlyZWN0VG8sIGNoaWxkTWFrZXIpIHsKICAgIHZhciB1bnN1YiA9");
    sb.append("IG1ha2VfdW5zdWIoKTsKICAgIHJ4b2JqLl9fID0gZGVib3VuY2UoMTAsIGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFyIGN1c3RvbVRy");
    sb.append("ZWUgPSBmYWxzZTsKICAgICAgaWYgKHNyYyBpbiBjdXN0b21EYXRhU291cmNlcykgewogICAgICAgIHZh");
    sb.append("ciBjb25zID0gY3VzdG9tRGF0YVNvdXJjZXNbc3JjXTsKICAgICAgICBpZiAodHlwZW9mIChjb25zKSA9");
    sb.append("PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICBjdXN0b21UcmVlID0gY29ucyhyeG9iaiwgcHJpb3JTdGF0");
    sb.append("ZSwgcmVkaXJlY3RUbywgc2VsZik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghY3VzdG9tVHJl");
    sb.append("ZSkgewogICAgICAgIGN1c3RvbVRyZWUgPSBuZXcgQWRhbWFUcmVlKCk7CiAgICAgIH0KICAgICAgdmFy");
    sb.append("IHN0YXRlID0gewogICAgICAgIHNlcnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwKICAgICAgICBkYXRh");
    sb.append("OiB7IGNvbm5lY3Rpb246IHByaW9yU3RhdGUuY29ubmVjdGlvbiwgdHJlZTogY3VzdG9tVHJlZSwgZGVs");
    sb.append("dGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAgICAgICB2aWV3OiBuZXdfZGVsdGFf");
    sb.append("Y29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICAgIGN1cnJlbnQ6ICJkYXRhIgogICAgICB9OwogICAg");
    sb.append("ICBjaGlsZE1ha2VyKHN0YXRlKTsKICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAg");
    sb.append("ICB9KTsKICB9OwoKICAvLyA8dGl0bGUgdmFsdWU9Ii4uLiIgLz4KICBzZWxmLlNUID0gZnVuY3Rpb24g");
    sb.append("KHJ4b2JqKSB7CiAgICBpZiAocnhvYmoudmFsdWUpIHsKICAgICAgZG9jdW1lbnQudGl0bGUgPSByeG9i");
    sb.append("ai52YWx1ZTsKICAgIH0KICAgIHJ4b2JqLl9fID0gZGVib3VuY2UoNSwgZnVuY3Rpb24gKCkgewogICAg");
    sb.append("ICBpZiAocnhvYmoudmFsdWUpIHsKICAgICAgICBkb2N1bWVudC50aXRsZSA9IHJ4b2JqLnZhbHVlOwog");
    sb.append("ICAgICB9CiAgICB9KTsKICB9OwoKICAvLyA8dmlld3N5bmM+CiAgc2VsZi5WU3kgPSBmdW5jdGlvbiAo");
    sb.append("cGFyZW50LCBwcmlvclN0YXRlLCBhdmFpbCwgbm90YXZhaWwpIHsKICAgIHZhciB1bnN1YiA9IG1ha2Vf");
    sb.append("dW5zdWIoKTsKICAgIHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLnN1YnNjcmliZV9zeW5jKGZ1bmN0");
    sb.append("aW9uIChzeW5jZWQpIHsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsK");
    sb.append("ICAgICAgdmFyIHN0YXRlID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgaWYgKHN5bmNlZCkgewogICAg");
    sb.append("ICAgIGF2YWlsKHBhcmVudCwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIG5vdGF2YWlsKHBh");
    sb.append("cmVudCwgc3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwog");
    sb.append("ICAgICAvLyBUT0RPOiByZXR1cm4gZmFsc2UgdG8gdW5zdWIKICAgICAgcmV0dXJuIHRydWU7CiAgICB9");
    sb.append("KTsKICB9OwoKICB2YXIgYmluZF9yZXNwb25kZXIgPSBmdW5jdGlvbiAoY28sIGNsZWFudXAsIHJldHJ5");
    sb.append("X3NtKSB7CiAgICByZXRyeV9zbS51bmV4cGVjdGVkX2Vycm9ycyA9IDA7CiAgICByZXRyeV9zbS5iYWNr");
    sb.append("b2ZmID0gMTsKICAgIHJldHVybiB7CiAgICAgIG5leHQ6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAg");
    sb.append("ICAgY28uZGVidWdnZXIocGF5bG9hZCk7CiAgICAgICAgY28uc2V0X2Nvbm5lY3RlZCh0cnVlKTsKICAg");
    sb.append("ICAgICByZXRyeV9zbS51bmV4cGVjdGVkX2Vycm9ycyA9IDA7CiAgICAgICAgcmV0cnlfc20uYmFja29m");
    sb.append("ZiA9IDE7CiAgICAgICAgaWYgKCJkYXRhIiBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBjby50");
    sb.append("cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLmRhdGEpOwogICAgICAgIH0KICAgICAgICBpZiAoIm91dHN0");
    sb.append("YW5kaW5nIiBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBjby5vbmRlY2lkZShwYXlsb2FkLmRl");
    sb.append("bHRhLm91dHN0YW5kaW5nKTsKICAgICAgICB9CiAgICAgICAgaWYgKCd2aWV3c3RhdGUnIGluIHBheWxv");
    sb.append("YWQuZGVsdGEpIHsKICAgICAgICAgIGNvLnZpZXdzdGF0ZXRyZWUudXBkYXRlKHBheWxvYWQuZGVsdGEu");
    sb.append("dmlld3N0YXRlKTsKICAgICAgICB9CiAgICAgICAgaWYgKCdsb2cnIGluIHBheWxvYWQuZGVsdGEpIHsK");
    sb.append("ICAgICAgICAgIGNvbnNvbGUubG9nKHBheWxvYWQuZGVsdGEubG9nKTsKICAgICAgICB9CiAgICAgICAg");
    sb.append("aWYgKCdyZWxvYWQnIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIGlmIChwYXlsb2FkLmRlbHRh");
    sb.append("LnJlbG9hZFsncHJlc2VydmUtdmlldyddKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVt");
    sb.append("KCdyeHZpZXdzdGF0ZScsIEpTT04uc3RyaW5naWZ5KGNvLnZpZXdzdGF0ZXRyZWUucmF3KCkpKTsKICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICAg");
    sb.append("ICAgaWYgKCd2aWV3cG9ydCcgaW4gcGF5bG9hZC5kZWx0YSAmJiAnbWVzc2FnZScgaW4gcGF5bG9hZC5k");
    sb.append("ZWx0YSkgewogICAgICAgICAgdmFyIHZpZXdwb3J0ID0gcGF5bG9hZC5kZWx0YS52aWV3cG9ydDsKICAg");
    sb.append("ICAgICAgIGlmICh2aWV3cG9ydCBpbiBjby5oYW5kbGVycykgewogICAgICAgICAgICBjby5oYW5kbGVy");
    sb.append("c1t2aWV3cG9ydF0ocGF5bG9hZC5kZWx0YS5tZXNzYWdlLCBjbyk7CiAgICAgICAgICB9CiAgICAgICAg");
    sb.append("fQogICAgICAgIGlmICgndmlldy1zdGF0ZS1maWx0ZXInIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAg");
    sb.append("ICAgIHZhciBmaWx0ZXIgPSB7fTsKICAgICAgICAgIHZhciBrZXlzID0gcGF5bG9hZC5kZWx0YVsndmll");
    sb.append("dy1zdGF0ZS1maWx0ZXInXTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwga2V5cy5sZW5ndGg7");
    sb.append("IGsrKykgewogICAgICAgICAgICBmaWx0ZXJba2V5c1trXV0gPSB0cnVlOwogICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgY28uZmlsdGVyID0gZmlsdGVyOwogICAgICAgICAgY28uaGFzX2ZpbHRlciA9IHRydWU7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmICgnZ290bycgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgc2Vs");
    sb.append("Zi5nb3RvKHBheWxvYWQuZGVsdGEuZ290bywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSwKICAgICAg");
    sb.append("Y29tcGxldGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBzaG91bGRuJ3QgcmVhbGlzdGljYWxseSBo");
    sb.append("YXBwZW4gVE9ETzogdmFsaWRhdGUgPC0gdHJ1dGgKICAgICAgICBjby5zZXRfY29ubmVjdGVkKGZhbHNl");
    sb.append("KTsKICAgICAgICBjby5wdHIgPSBudWxsOwogICAgICB9LAogICAgICBmYWlsdXJlOiBmdW5jdGlvbiAo");
    sb.append("cmVhc29uKSB7CiAgICAgICAgLy8gcmVnaXN0ZXIgdGhlIGZhaWx1cmUKICAgICAgICBjby5zZXRfY29u");
    sb.append("bmVjdGVkKGZhbHNlKTsKICAgICAgICBjby5wdHIgPSBudWxsOwogICAgICAgIGlmIChyZWFzb24gPT0g");
    sb.append("NDAzNDAzIHx8IHJlYXNvbiA9PSA0MDM1MDAgfHwgcmVhc29uID09IDE4NDMzMyB8fCByZWFzb24gPT0g");
    sb.append("OTgyMjUzKSB7CiAgICAgICAgICBjbGVhbnVwKCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQog");
    sb.append("ICAgICAgIC8vIGlzIGl0IGFuIGV4cGVjdGVkIGVycm9yIHRoYXQgd2lsbCBoYXBwZW4gYSBidW5jaD8K");
    sb.append("ICAgICAgICB2YXIgZXhwZWN0ZWRfZXJyb3IgPSByZWFzb24gPT0gOTk5OwogICAgICAgIC8vIGRvIHdl");
    sb.append("IG5vdCBrbm93IGFib3V0IGFuIGVycm9yIHRoYXQgaGFwcGVucyBhIGJ1bmNoPyBpZiBzbywgdGhlbiBs");
    sb.append("ZXQncyBhdCBsZWFzdCB0cnkgYWdhaW4gYSBudW1iZXIgb2YgZmluaXRlIHRpbWVzLgogICAgICAgIHZh");
    sb.append("ciBibGluZF9yZXRyeSA9IHJldHJ5X3NtLnVuZXhwZWN0ZWRfZXJyb3JzIDwgMTY7CiAgICAgICAgaWYg");
    sb.append("KGJsaW5kX3JldHJ5KSB7CiAgICAgICAgICByZXRyeV9zbS51bmV4cGVjdGVkX2Vycm9ycysrOwogICAg");
    sb.append("ICAgIH0KICAgICAgICAvLyByZXRyeSBvbiBlaXRoZXIgY2FzZQogICAgICAgIGlmIChleHBlY3RlZF9l");
    sb.append("cnJvciB8fCBibGluZF9yZXRyeSkgewogICAgICAgICAgcmV0cnlfc20uYmFja29mZiA9IE1hdGguY2Vp");
    sb.append("bChNYXRoLm1pbihyZXRyeV9zbS5iYWNrb2ZmICsgTWF0aC5yYW5kb20oKSAqIHJldHJ5X3NtLmJhY2tv");
    sb.append("ZmYgKyAoYmxpbmRfcmV0cnkgPyAxMjUgOiAxKSwgMjUwMCkpOwogICAgICAgICAgaWYgKGV4cGVjdGVk");
    sb.append("X2Vycm9yKSB7CiAgICAgICAgICAgIC8vIHRoZSBleHBlY3RlZCBlcnJvciBpcyBhIGNvbm5lY3Rpb24g");
    sb.append("ZXZlbnQsIHNvIHdlIHByb3RlY3QgdGhlIHNlcnZpY2UgYW5kIGp1bXAgYmFjay1vZmYgcmlnaHQgdG8g");
    sb.append("bmVhciBtYXggb3ZlciBhIG5pY2Ugc3ByZWFkCiAgICAgICAgICAgIHJldHJ5X3NtLmJhY2tvZmYgPSBN");
    sb.append("YXRoLm1pbigxMjUwLCByZXRyeV9zbS5iYWNrb2ZmKSArIE1hdGgucmFuZG9tKCkgKiAxMjUwOwogICAg");
    sb.append("ICAgICAgfQogICAgICAgICAgaWYgKGV4cGVjdGVkX2Vycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUu");
    sb.append("bG9nKCJjb25uZWN0LWxvc3N8cmV0cnlpbmcuLi4gKCIgKyByZXRyeV9zbS5iYWNrb2ZmICsgIik7IHJl");
    sb.append("YXNvbj0iICsgcmVhc29uICsgKGJsaW5kX3JldHJ5ID8gIiBbYmxpbmRdIiA6ICIiKSk7CiAgICAgICAg");
    sb.append("ICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygiY29ubmVjdC1mYWlsdXJlfHJldHJ5aW5n");
    sb.append("Li4uICgiICsgcmV0cnlfc20uYmFja29mZiArICIpOyByZWFzb249IiArIHJlYXNvbiArIChibGluZF9y");
    sb.append("ZXRyeSA/ICIgW2JsaW5kXSIgOiAiIikpOwogICAgICAgICAgfQogICAgICAgICAgLy8gVE9ETzogbmVl");
    sb.append("ZCBhIGRpZmZlcmVudCBmZWVkYmFjayBtZWNoYW5pc20gKG1heWJlIGEgbnVtYmVyIHVuZGVyIHRoZSB3");
    sb.append("aWZpIGljb24/KQogICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAg");
    sb.append("ICAgIHJldHJ5X3NtLmdvKCk7CiAgICAgICAgICB9LCByZXRyeV9zbS5iYWNrb2ZmKTsKICAgICAgICB9");
    sb.append("IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coImdhdmUgdXAgY29ubmVjdGlvbjsiICsgY28ubGFi");
    sb.append("ZWwgKyAiOyByZWFzb249IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAg");
    sb.append("dmFyIHNldHVwX2NvID0gZnVuY3Rpb24oZGVzaXJlZCwgdW5zdWIsIGNvLCBzdGF0ZSkgewogICAgY28u");
    sb.append("dmlld3N0YXRldHJlZSA9IHN0YXRlLnZpZXcudHJlZTsKICAgIHZhciBzeW5jX3RyZWUgPSBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgIC8vIGxldCdzIGNvcHkgb3V0IHRoZSB0cmVlIGZyb20gdGhlIHZpZXdzdGF0ZQog");
    sb.append("ICAgICB2YXIgbmV3X3RyZWUgPSBzYWZlX2ZpbHRlcihzdGF0ZS52aWV3LnRyZWUuY29weSgpKTsKCiAg");
    sb.append("ICAgIC8vIGlmIHdlIGhhdmUgZ290IGEgZmlsdGVyIGZyb20gdGhlIHNlcnZlciwgdGhlbiBsZXQncyBm");
    sb.append("aWx0ZXIKICAgICAgaWYgKGNvLmhhc19maWx0ZXIpIHsKICAgICAgICAvLyByZWNvbnN0cnVjdCB0aGUg");
    sb.append("bmV3IHZpZXcgYmFzZWQgb24gdGhlIGludGVyc2VjdGlvbiBvZiB0aGUgZmlsdGVyIGFuZCB0aGUgbmV3");
    sb.append("IHN0YXRlCiAgICAgICAgdmFyIGZpbHRlcmVkID0ge307CiAgICAgICAgZm9yICh2YXIgayBpbiBuZXdf");
    sb.append("dHJlZSkgewogICAgICAgICAgaWYgKGNvLmZpbHRlcltrXSkgewogICAgICAgICAgICBmaWx0ZXJlZFtr");
    sb.append("XSA9IG5ld190cmVlW2tdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBhc3N1bWUgdGhl");
    sb.append("IG5ldyB0cmVlCiAgICAgICAgbmV3X3RyZWUgPSBmaWx0ZXJlZDsKICAgICAgfQogICAgICAvLyBpZiB0");
    sb.append("aGUgY2xvbmUgKGkuZS4gc3RyaW5naWZpZWQgdmVyc2lvbikgaXMgdGhlIHNhbWUgYXMgd2hhdCB3ZSBs");
    sb.append("YXN0IHNlbnQsIHRoZW4gZG9uJ3Qgc2VuZCBhbnl0aGluZwogICAgICB2YXIgcHJpb3JfY2xvbmUgPSBK");
    sb.append("U09OLnN0cmluZ2lmeShuZXdfdHJlZSk7CiAgICAgIGlmIChwcmlvcl9jbG9uZSA9PSBjby52aWV3c3Rh");
    sb.append("dGVfY2xvbmUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY28udmlld3N0YXRlX3NlbnQg");
    sb.append("PSBmYWxzZTsKICAgICAgY28udnNzZXErKzsKICAgICAgY28uc3luYygpOwogICAgICB2YXIgc3luY2Vk");
    sb.append("ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChjby52c3NlcSA9PSB0aGlzLmJvdW5kKSB7CiAgICAg");
    sb.append("ICAgICBjby52aWV3c3RhdGVfc2VudCA9IHRydWU7CiAgICAgICAgICBjby5zeW5jKCk7CiAgICAgICAg");
    sb.append("fQogICAgICB9LmJpbmQoeyBib3VuZDogY28udnNzZXEgfSk7CiAgICAgIGNvLnZpZXdzdGF0ZV9jbG9u");
    sb.append("ZSA9IEpTT04uc3RyaW5naWZ5KG5ld190cmVlKTsKICAgICAgY28ucHRyLnVwZGF0ZShuZXdfdHJlZSwg");
    sb.append("eyBzdWNjZXNzOiBzeW5jZWQsIGZhaWx1cmU6IHN5bmNlZCB9KTsKICAgIH07CiAgICB2YXIgYmluZCA9");
    sb.append("IGZ1bmN0aW9uIChzZW5kTm93KSB7CiAgICAgIHVuc3ViLnZpZXcgPSBzdGF0ZS52aWV3LnRyZWUuc3Vi");
    sb.append("c2NyaWJlKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoY28ucHRyID09IG51bGwpIHsKICAgICAgICAg");
    sb.append("IHJldHVybjsKICAgICAgICB9CiAgICAgICAgc3luY190cmVlKCk7CiAgICAgIH0pOwogICAgICBpZiAo");
    sb.append("c2VuZE5vdykgewogICAgICAgIHN5bmNfdHJlZSgpOwogICAgICB9CiAgICB9OwogICAgaWYgKGNvLnB0");
    sb.append("ciAhPSBudWxsICYmIGNvLmJvdW5kID09IGRlc2lyZWQpIHsKICAgICAgYmluZCh0cnVlKTsKICAgICAg");
    sb.append("cmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKGNvLnB0ciAhPSBudWxsKSB7CiAgICAgIGNvLnB0ci5l");
    sb.append("bmQoeyBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7IH0sIGZhaWx1cmU6IGZ1bmN0aW9uICgpIHsgfSB9KTsK");
    sb.append("ICAgICAgY28ucHRyID0gbnVsbDsKICAgIH0KICAgIHJldHVybiBiaW5kOwogIH07CgogIC8vIDxjb25u");
    sb.append("ZWN0aW9uIGJpbGxpbmcgLi4uPgogIHNlbGYuQkNPTk5FQ1QgPSBmdW5jdGlvbiAoc3RhdGUsIHJ4b2Jq");
    sb.append("KSB7CiAgICB2YXIgdW5zdWIgPSB7CiAgICAgIHZpZXc6IGZ1bmN0aW9uICgpIHsKICAgICAgfQogICAg");
    sb.append("fTsKICAgIHJ4b2JqLl9fID0gZGVib3VuY2UoNSwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoISgnbmFt");
    sb.append("ZScgaW4gcnhvYmopKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpZExvb2t1cCA9");
    sb.append("IHNlbGYuSUQocnhvYmouaWRlbnRpdHksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0");
    sb.append("OyB9KTsKICAgICAgaWYgKGlkTG9va3VwLmFib3J0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAg");
    sb.append("ICAgIHZhciBjbyA9IGdldF9jb25uZWN0aW9uX29iaihyeG9iai5uYW1lKTsKICAgICAgdmFyIGRlc2ly");
    sb.append("ZWQgPSAiOmJpbGxpbmc6IiArIGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2YXIgYmluZCA9IHNldHVw");
    sb.append("X2NvKGRlc2lyZWQsIHVuc3ViLCBjbywgc3RhdGUpOwogICAgICBpZiAoYmluZCA9PT0gZmFsc2UpIHsK");
    sb.append("ICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY28uYm91bmQgPSBkZXNpcmVkOwogICAgICB2YXIg");
    sb.append("aWRlbnRpdHkgPSBpZExvb2t1cC5pZGVudGl0eTsKICAgICAgdmFyIGNsZWFudXAgPSBpZExvb2t1cC5j");
    sb.append("bGVhbnVwOwogICAgICB1bnN1Yi52aWV3KCk7CiAgICAgIGNvLmlkZW50aXR5ID0gaWRlbnRpdHk7CiAg");
    sb.append("ICAgIGNvLmhhbmRsZXJzID0ge307CiAgICAgIGNvLnZpZXdzdGF0ZV9zZW50ID0gdHJ1ZTsKICAgICAg");
    sb.append("Y28ubGFiZWwgPSAiQmlsbGluZyBbICIgKyByeG9iai5uYW1lICsgIl0iOwogICAgICBjby52aWFfYmls");
    sb.append("bGluZyA9IHRydWU7CiAgICAgIGNvLnZpYV9kb21haW4gPSBmYWxzZTsKICAgICAgdmFyIHJldHJ5X3Nt");
    sb.append("ID0ge307CiAgICAgIHJldHJ5X3NtLnJlc3BvbmRlciA9IGJpbmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVw");
    sb.append("LCByZXRyeV9zbSk7CiAgICAgIHJldHJ5X3NtLmdvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gYmlh");
    sb.append("cyB0byBub3RoaW5nIG5ldwogICAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAg");
    sb.append("Y28ucHRyID0gY29ubmVjdGlvbi5CaWxsaW5nQ29ubmVjdGlvbkNyZWF0ZShpZGVudGl0eSwgcmV0cnlf");
    sb.append("c20ucmVzcG9uZGVyKTsKICAgICAgfTsKICAgICAgcmV0cnlfc20uZ28oKTsKICAgICAgY28udHJlZS51");
    sb.append("cGRhdGUoe30pOwogICAgICBiaW5kKGZhbHNlKTsKICAgIH0pOwogIH07CgogIC8vIENIRUNLIEZPUiBP");
    sb.append("VkVSUklERSBTSUdOQUwgSEVSRQogIHNlbGYuZG9tYWluID0gbG9jYXRpb24uaG9zdG5hbWU7CiAgc2Vs");
    sb.append("Zi5ob3N0ID0gbG9jYXRpb24uaG9zdDsKICBzZWxmLnByb3RvY29sID0gbG9jYXRpb24ucHJvdG9jb2w7");
    sb.append("CiAgc2VsZi5pc19tb2JpbGUgPSBmYWxzZTsKCiAgdmFyIGhvc3RPdmVycmlkZSA9IGxvY2FsU3RvcmFn");
    sb.append("ZS5nZXRJdGVtKCJtZG9faG9zdCIpOyAvLyBtdWx0aSBkb21haW4gZW5kcG9pbnQgY2hvaWNlCiAgaWYg");
    sb.append("KGhvc3RPdmVycmlkZSAhPSBudWxsKSB7CiAgICBzZWxmLmhvc3QgPSBob3N0T3ZlcnJpZGU7CiAgICBz");
    sb.append("ZWxmLmRvbWFpbiA9IGhvc3RPdmVycmlkZS5zcGxpdCgiOiIpWzBdOwogIH0KCiAgc2VsZi51cmxfcHJl");
    sb.append("Zml4ID0gc2VsZi5wcm90b2NvbCArICIvLyIgKyBzZWxmLmhvc3Q7CgoKICBzZWxmLm1vYmlsZUluaXQg");
    sb.append("PSBmdW5jdGlvbihkZWZhdWx0T3ZlcnJpZGVEb21haW4pIHsKICAgIHNlbGYuZG9tYWluID0gZGVmYXVs");
    sb.append("dE92ZXJyaWRlRG9tYWluOwogICAgc2VsZi5ob3N0ID0gZGVmYXVsdE92ZXJyaWRlRG9tYWluOwogICAg");
    sb.append("c2VsZi5wcm90b2NvbCA9ICJodHRwczoiOwogICAgY29ubmVjdGlvbi5wcm90b2NvbCA9ICJodHRwczoi");
    sb.append("OwogICAgc2VsZi5pc19tb2JpbGUgPSB0cnVlOwogIH07CiAgc2VsZi5tb2JpbGVJbml0TXVsdGlEb21h");
    sb.append("aW4gPSBmdW5jdGlvbihzdGFydCwgYmV0YVByZWZpeCwgcHJvZFByZWZpeCkgewogICAgc2VsZi5tZF9i");
    sb.append("ZXRhUHJlZml4ID0gYmV0YVByZWZpeDsKICAgIHNlbGYubWRfcHJvZFByZWZpeCA9IHByb2RQcmVmaXg7");
    sb.append("CiAgICBzZWxmLnByb3RvY29sID0gImh0dHBzOiI7CiAgICBjb25uZWN0aW9uLnByb3RvY29sID0gImh0");
    sb.append("dHBzOiI7CiAgICBzZWxmLmlzX21vYmlsZSA9IHRydWU7CiAgICB2YXIgaW5pdGlhbF9wYXRoID0gc3Rh");
    sb.append("cnQ7CiAgICBpZiAoInJlYWR5IiA9PSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibWRsIikpIHsKICAgICAg");
    sb.append("aW5pdGlhbF9wYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNl");
    sb.append("YXJjaCArIHdpbmRvdy5sb2NhdGlvbi5oYXNoOwogICAgfQogICAgc2VsZi5ydW4oZG9jdW1lbnQuYm9k");
    sb.append("eSwgZml4UGF0aChpbml0aWFsX3BhdGgpLCBmYWxzZSk7CiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1");
    sb.append("bmN0aW9uIChwKSB7CiAgICAgIHNlbGYucnVuKGRvY3VtZW50LmJvZHksIGZpeFBhdGgoaW5pdGlhbF9w");
    sb.append("YXRoKSwgZmFsc2UpOwogICAgfTsKICB9OwogIHZhciBnZXRPckNyZWF0ZU1hbmlmZXN0cyA9IGZ1bmN0");
    sb.append("aW9uKCkgewogICAgdmFyIGRiID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIl9fZG9tYWluX21hbmlmZXN0");
    sb.append("cyIpOwogICAgaWYgKGRiID09IG51bGwpIHsKICAgICAgZGIgPSB7c2VxOjAsIG1hbmlmZXN0czpbXX07");
    sb.append("CiAgICB9IGVsc2UgewogICAgICBkYiA9IEpTT04ucGFyc2UoZGIpOwogICAgfQogICAgcmV0dXJuIGRi");
    sb.append("OwogIH07CiAgdmFyIHNhdmVNYW5pZmVzdHMgPSBmdW5jdGlvbihkYikgewogICAgbG9jYWxTdG9yYWdl");
    sb.append("LnNldEl0ZW0oIl9fZG9tYWluX21hbmlmZXN0cyIsIEpTT04uc3RyaW5naWZ5KGRiKSk7CiAgfTsKICBz");
    sb.append("ZWxmLnJlZ2lzdGVyTWFuaWZlc3QgPSBmdW5jdGlvbih1cmwsIHVzZSA9IGZhbHNlKSB7CiAgICB2YXIg");
    sb.append("ZGIgPSBnZXRPckNyZWF0ZU1hbmlmZXN0cygpOwogICAgdmFyIGFkZCA9IGZ1bmN0aW9uKG1hbmlmZXN0");
    sb.append("KSB7CiAgICAgIG1hbmlmZXN0LnNvdXJjZSA9IHVybDsKICAgICAgbWFuaWZlc3QuaWQgPSBkYi5zZXE7");
    sb.append("CiAgICAgIGRiLnNlcSsrOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGRiLm1hbmlmZXN0cy5sZW5n");
    sb.append("dGg7IGsrKykgewogICAgICAgIGlmIChkYi5tYW5pZmVzdHNba10uc291cmNlID09IHVybCkgewogICAg");
    sb.append("ICAgICAgZGIubWFuaWZlc3RzW2tdID0gbWFuaWZlc3Q7CiAgICAgICAgICBzYXZlTWFuaWZlc3RzKGRi");
    sb.append("KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZGIubWFuaWZlc3RzLnB1");
    sb.append("c2gobWFuaWZlc3QpOwogICAgICBzYXZlTWFuaWZlc3RzKGRiKTsKICAgIH07CiAgICB2YXIgeGh0dHAg");
    sb.append("PSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgICAgaWYgKHRoaXMu");
    sb.append("c3RhdHVzID09IDIwMCkgewogICAgICAgICAgYWRkKEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQp");
    sb.append("KTsKCiAgICAgICAgICBpZih1c2UpIHsKICAgICAgICAgICAgaWYgKGRiLm1hbmlmZXN0cy5sZW5ndGgg");
    sb.append("PiAwKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBkYi5tYW5pZmVzdHMubGVuZ3Ro");
    sb.append("OyBrKyspIHsKICAgICAgICAgICAgICAgIGlmIChkYi5tYW5pZmVzdHNba10uc291cmNlID09IHVybCkg");
    sb.append("ewogICAgICAgICAgICAgICAgICBzZWxmLnVzZU1hbmlmZXN0KGRiLm1hbmlmZXN0c1trXS5pZCk7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICB4aHR0cC5v");
    sb.append("cGVuKCJHRVQiLCB1cmwsIHRydWUpOwogICAgeGh0dHAuc2VuZCgpOwogIH07CiAgLy8gUlVOVElNRSht");
    sb.append("b2JpbGUpIHwgcng6YWN0aW9uPSJtYW5pZmVzdC1hZGQ6IgogIHNlbGYuTURfYSA9IGZ1bmN0aW9uKGRv");
    sb.append("bSwgdHlwZSwgdmFsdWUpIHsKICAgIHJlZ19ldmVudChudWxsLCBkb20sIHR5cGUsIGZ1bmN0aW9uKCkg");
    sb.append("ewogICAgICBzZWxmLnJlZ2lzdGVyTWFuaWZlc3QodHlwZW9mKHZhbHVlKSA9PSAnZnVuY3Rpb24nID8g");
    sb.append("dmFsdWUoKSA6IHZhbHVlKTsKICAgIH0pOwogIH07CgogIHNlbGYudXNlTWFuaWZlc3QgPSBmdW5jdGlv");
    sb.append("bihpZCkgewogICAgICB2YXIgZGIgPSBnZXRPckNyZWF0ZU1hbmlmZXN0cygpOwogICAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IGRiLm1hbmlmZXN0cy5sZW5ndGg7IGsrKykgewogICAgICAgIHZhciBtYW5pZmVz");
    sb.append("dCA9IGRiLm1hbmlmZXN0c1trXTsKICAgICAgICBpZiAobWFuaWZlc3QuaWQgPT0gaWQpIHsKICAgICAg");
    sb.append("ICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJtZG9faG9zdCIsIG5ldyBVUkwoZGIubWFuaWZlc3RzW2td");
    sb.append("LnNvdXJjZSkuaG9zdCk7CiAgICAgICAgICBpZiAobWFuaWZlc3QuYmV0YSkgewogICAgICAgICAgICBs");
    sb.append("b2NhbFN0b3JhZ2Uuc2V0SXRlbSgibWRlYyIsICJiZXRhIik7CiAgICAgICAgICB9IGVsc2UgewogICAg");
    sb.append("ICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibWRlYyIsICJwcm9kIik7CiAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibWRsIiwgInJlYWR5Iik7CiAgICAgICAgICB3aW5k");
    sb.append("b3cubG9jYXRpb24uaHJlZiA9ICIvIjsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAvLyBSVU5USU1F");
    sb.append("KG1vYmlsZSkgfCByeDphY3Rpb249Im1hbmlmZXN0LXVzZToiCiAgc2VsZi5NRF91ID0gZnVuY3Rpb24o");
    sb.append("ZG9tLCB0eXBlLCB2YWx1ZSkgewogICAgcmVnX2V2ZW50KG51bGwsIGRvbSwgdHlwZSwgZnVuY3Rpb24o");
    sb.append("KSB7CiAgICAgIHNlbGYudXNlTWFuaWZlc3QodHlwZW9mKHZhbHVlKSA9PSAnZnVuY3Rpb24nID8gdmFs");
    sb.append("dWUoKSA6IHZhbHVlKTsKICAgIH0pOwogIH07CiAgc2VsZi5tb2JpbGVMb2FkID0gZnVuY3Rpb24odXJs");
    sb.append("KSB7CiAgICB2YXIgcGFyc2VkID0gbmV3IFVSTCh1cmwpOwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0o");
    sb.append("Im1kb19ob3N0IiwgcGFyc2VkLmhvc3QpOwogICAgaWYgKHBhcnNlZC5ob3N0LmVuZHNXaXRoKHNlbGYu");
    sb.append("bWRfYmV0YVByZWZpeCkpIHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kZWMiLCAiYmV0YSIp");
    sb.append("OwogICAgfSBlbHNlIHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kZWMiLCAicHJvZCIpOwog");
    sb.append("ICAgfQogICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwYXJzZWQucGF0aDsKICB9OwogIC8vIFJVTlRJ");
    sb.append("TUUobW9iaWxlKSB8IHJ4OmFjdGlvbj0ibWFuaWZlc3QtZGVsOiIKICBzZWxmLk1EX2QgPSBmdW5jdGlv");
    sb.append("bihkb20sIHR5cGUsIHZhbHVlKSB7CiAgICByZWdfZXZlbnQobnVsbCwgZG9tLCB0eXBlLCBmdW5jdGlv");
    sb.append("bigpIHsKICAgICAgdmFyIGlkID0gcGFyc2VJbnQodHlwZW9mKHZhbHVlKSA9PSAnZnVuY3Rpb24nID8g");
    sb.append("dmFsdWUoKSA6IHZhbHVlKTsKICAgICAgdmFyIGRiID0gZ2V0T3JDcmVhdGVNYW5pZmVzdHMoKTsKICAg");
    sb.append("ICAgdmFyIG5ld19tYW5pZmVzdHMgPSBbXTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBkYi5tYW5p");
    sb.append("ZmVzdHMubGVuZ3RoOyBrKyspIHsKICAgICAgICBpZiAoZGIubWFuaWZlc3RzW2tdLmlkICE9IGlkKSB7");
    sb.append("CiAgICAgICAgICBuZXdfbWFuaWZlc3RzLnB1c2goZGIubWFuaWZlc3RzW2tdKTsKICAgICAgICB9CiAg");
    sb.append("ICAgIH0KICAgICAgZGIubWFuaWZlc3RzID0gbmV3X21hbmlmZXN0czsKICAgICAgc2F2ZU1hbmlmZXN0");
    sb.append("cyhkYik7CiAgICB9KTsKICB9OwoKICAvLyA8Y29ubmVjdGlvbiB1c2UtZG9tYWluIC4uLj4KICBzZWxm");
    sb.append("LkRDT05ORUNUID0gZnVuY3Rpb24gKHN0YXRlLCByeG9iaikgewogICAgdmFyIHVuc3ViID0gewogICAg");
    sb.append("ICB2aWV3OiBmdW5jdGlvbiAoKSB7CiAgICAgIH0KICAgIH07CiAgICByeG9iai5fXyA9IGRlYm91bmNl");
    sb.append("KDUsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCEoJ25hbWUnIGluIHJ4b2JqKSkgewogICAgICAgIHJl");
    sb.append("dHVybjsKICAgICAgfQogICAgICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKHJ4b2JqLmlkZW50aXR5LCBm");
    sb.append("dW5jdGlvbiAoKSB7IHJldHVybiByeG9iai5yZWRpcmVjdDsgfSk7CiAgICAgIGlmIChpZExvb2t1cC5h");
    sb.append("Ym9ydCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgY28gPSBnZXRfY29ubmVjdGlv");
    sb.append("bl9vYmoocnhvYmoubmFtZSk7CiAgICAgIHZhciBkb21haW4gPSBzZWxmLmRvbWFpbjsKICAgICAgdmFy");
    sb.append("IGRlc2lyZWQgPSBkb21haW4gKyBpZExvb2t1cC5pZGVudGl0eTsKICAgICAgdmFyIGJpbmQgPSBzZXR1");
    sb.append("cF9jbyhkZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKTsKICAgICAgaWYgKGJpbmQgPT09IGZhbHNlKSB7");
    sb.append("CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvLmJvdW5kID0gZGVzaXJlZDsKCiAgICAgIHZh");
    sb.append("ciBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2YXIgY2xlYW51cCA9IGlkTG9va3Vw");
    sb.append("LmNsZWFudXA7CiAgICAgIHVuc3ViLnZpZXcoKTsKICAgICAgY28uaWRlbnRpdHkgPSBpZGVudGl0eTsK");
    sb.append("ICAgICAgY28uaGFuZGxlcnMgPSB7fTsKICAgICAgY28udmlld3N0YXRlX3NlbnQgPSB0cnVlOwogICAg");
    sb.append("ICBjby5sYWJlbCA9ICJEb21haW46IiArIGRvbWFpbiArICIgWyAiICsgcnhvYmoubmFtZSArICJdIjsK");
    sb.append("ICAgICAgY28udmlhX2RvbWFpbiA9IHRydWU7CiAgICAgIGNvLnZpYV9iaWxsaW5nID0gZmFsc2U7CiAg");
    sb.append("ICAgIGNvLmRvbWFpbiA9IGRvbWFpbjsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAgICAgIHJldHJ5");
    sb.append("X3NtLnJlc3BvbmRlciA9IGJpbmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9zbSk7CiAgICAg");
    sb.append("IHJldHJ5X3NtLmdvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3RoaW5nIG5ldwog");
    sb.append("ICAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0gY29ubmVjdGlv");
    sb.append("bi5Db25uZWN0aW9uQ3JlYXRlVmlhRG9tYWluKGlkZW50aXR5LCBkb21haW4sIHNhZmVfZmlsdGVyKHN0");
    sb.append("YXRlLnZpZXcudHJlZS5jb3B5KCkpLCByZXRyeV9zbS5yZXNwb25kZXIpOwogICAgICB9OwogICAgICBy");
    sb.append("ZXRyeV9zbS5nbygpOwogICAgICBjby50cmVlLnVwZGF0ZSh7fSk7CiAgICAgIGJpbmQoZmFsc2UpOwog");
    sb.append("ICAgfSk7CiAgfTsKCiAgLy8gPGNvbm5lY3Rpb24gLi4uPgogIHNlbGYuQ09OTkVDVCA9IGZ1bmN0aW9u");
    sb.append("IChzdGF0ZSwgcnhvYmopIHsKICAgIHZhciB1bnN1YiA9IHsKICAgICAgdmlldzogZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICB9CiAgICB9OwogICAgcnhvYmouX18gPSBkZWJvdW5jZSg1LCBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgIHZhciB2YWxpZCA9ICdrZXknIGluIHJ4b2JqICYmICdzcGFjZScgaW4gcnhvYmogJiYgJ25hbWUn");
    sb.append("IGluIHJ4b2JqOwogICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAg");
    sb.append("IHZhciBpZExvb2t1cCA9IHNlbGYuSUQocnhvYmouaWRlbnRpdHksIGZ1bmN0aW9uICgpIHsgcmV0dXJu");
    sb.append("IHJ4b2JqLnJlZGlyZWN0OyB9KTsKICAgICAgaWYgKGlkTG9va3VwLmFib3J0KSB7CiAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICB9CiAgICAgIHZhciBjbyA9IGdldF9jb25uZWN0aW9uX29iaihyeG9iai5uYW1lKTsK");
    sb.append("ICAgICAgdmFyIGRlc2lyZWQgPSByeG9iai5zcGFjZSArICIvIiArIHJ4b2JqLmtleSArICIvIiArIGlk");
    sb.append("TG9va3VwLmlkZW50aXR5OyAvLyBUT0RPOiBuZWVkIHNvbWUga2luZCBvZiBoYXNoaW5nIGZ1bmN0aW9u");
    sb.append("IGhlcmUKICAgICAgdmFyIGJpbmQgPSBzZXR1cF9jbyhkZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKTsK");
    sb.append("ICAgICAgaWYgKGJpbmQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNv");
    sb.append("LmJvdW5kID0gZGVzaXJlZDsKCiAgICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5Owog");
    sb.append("ICAgICB2YXIgY2xlYW51cCA9IGlkTG9va3VwLmNsZWFudXA7CiAgICAgIHVuc3ViLnZpZXcoKTsKICAg");
    sb.append("ICAgY28uc3BhY2UgPSByeG9iai5zcGFjZTsKICAgICAgY28ua2V5ID0gcnhvYmoua2V5OwogICAgICBj");
    sb.append("by5pZGVudGl0eSA9IGlkZW50aXR5OwogICAgICBjby5oYW5kbGVycyA9IHt9OwogICAgICBjby52aWV3");
    sb.append("c3RhdGVfc2VudCA9IHRydWU7CiAgICAgIGNvLmxhYmVsID0gY28uc3BhY2UgKyAiLyIgKyBjby5rZXkg");
    sb.append("KyAiIFsgIiArIHJ4b2JqLm5hbWUgKyAiXSI7CiAgICAgIGNvLnZpYV9kb21haW4gPSBmYWxzZTsKICAg");
    sb.append("ICAgY28udmlhX2JpbGxpbmcgPSBmYWxzZTsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAgICAgIHJl");
    sb.append("dHJ5X3NtLnJlc3BvbmRlciA9IGJpbmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9zbSk7CiAg");
    sb.append("ICAgIHJldHJ5X3NtLmdvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3RoaW5nIG5l");
    sb.append("dwogICAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0gY29ubmVj");
    sb.append("dGlvbi5Db25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5LCByeG9iai5zcGFjZSwgcnhvYmoua2V5LCBzYWZl");
    sb.append("X2ZpbHRlcihzdGF0ZS52aWV3LnRyZWUuY29weSgpKSwgcmV0cnlfc20ucmVzcG9uZGVyKTsKICAgICAg");
    sb.append("fTsKICAgICAgcmV0cnlfc20uZ28oKTsKICAgICAgY28udHJlZS51cGRhdGUoe30pOwogICAgICBiaW5k");
    sb.append("KGZhbHNlKTsKICAgIH0pOwogIH07CgogIHNlbGYuSU5URVJOQUwgPSBmdW5jdGlvbiAocHJpb3JTdGF0");
    sb.append("ZSkgewogICAgcmV0dXJuIHsKICAgICAgc2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNlLAogICAgICBk");
    sb.append("YXRhOiB7IGNvbm5lY3Rpb246IG51bGwsIHRyZWU6IG5ldyBBZGFtYVRyZWUoKSwgZGVsdGE6IHt9LCBw");
    sb.append("YXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JT");
    sb.append("dGF0ZS52aWV3KSwKICAgICAgY3VycmVudDogImRhdGEiCiAgICB9OwogIH07CgogIHZhciByZWNhbGxf");
    sb.append("ZW1haWwgPSBmdW5jdGlvbiAoZWwpIHsKICAgIGlmIChlbC50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0g");
    sb.append("IklOUFVUIikgewogICAgICBpZiAoImVtYWlsIiA9PSBlbC50eXBlICYmICJlbWFpbCIgPT0gZWwubmFt");
    sb.append("ZSkgewogICAgICAgIGVsLnZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImVtYWlsX3JlbWVtYmVy");
    sb.append("Iik7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAg");
    sb.append("ICAgdmFyIGFyciA9IGVsLmNoaWxkcmVuOwogICAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAg");
    sb.append("ICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgICAgcmVjYWxsX2VtYWlsKGVsLmNo");
    sb.append("aWxkcmVuW2tdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICBzZWxmLmFVUCA9IGZ1bmN0");
    sb.append("aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgdmFyIGlkTG9va3VwID0g");
    sb.append("c2VsZi5JRChpZGVudGl0eU5hbWUsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJ4X2ZvcndhcmQ7");
    sb.append("IH0pOyAvLyBUT0RPOiBtYWtlIHJ4dmFyCiAgICBpZiAoaWRMb29rdXAuYWJvcnQpIHsKICAgICAgcmV0");
    sb.append("dXJuOwogICAgfQogICAgZm9ybS5hY3Rpb24gPSAiaHR0cHM6Ly8iICsgQWRhbWEuUHJvZHVjdGlvbiAr");
    sb.append("ICIvfnVwbG9hZCI7CiAgICBmb3JtLm1ldGhvZCA9ICJwb3N0IjsKICAgIGZvcm0uZW5jdHlwZSA9ICJt");
    sb.append("dWx0aXBhcnQvZm9ybS1kYXRhIjsKICAgIHZhciBpZGVudGl0eUlucHV0ID0gZG9jdW1lbnQuY3JlYXRl");
    sb.append("RWxlbWVudCgiaW5wdXQiKTsKICAgIGlkZW50aXR5SW5wdXQudHlwZSA9ICJoaWRkZW4iOwogICAgaWRl");
    sb.append("bnRpdHlJbnB1dC5uYW1lID0gImlkZW50aXR5IjsKICAgIGlkZW50aXR5SW5wdXQudmFsdWUgPSBpZExv");
    sb.append("b2t1cC5pZGVudGl0eTsKICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWRlbnRpdHlJbnB1dCk7CiAgICB2YXIg");
    sb.append("aWZyYW1lVGFyZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CiAgICBpZnJhbWVU");
    sb.append("YXJnZXQubmFtZSA9ICJVUExPQURfIiArIE1hdGgucmFuZG9tKCk7CiAgICBpZnJhbWVUYXJnZXQud2lk");
    sb.append("dGggPSAiMSI7CiAgICBpZnJhbWVUYXJnZXQuaGVpZ2h0ID0gIjEiOwoKICAgIGZvcm0uYXBwZW5kQ2hp");
    sb.append("bGQoaWZyYW1lVGFyZ2V0KTsKICAgIGZvcm0udGFyZ2V0ID0gaWZyYW1lVGFyZ2V0Lm5hbWU7CiAgfTsK");
    sb.append("CiAgc2VsZi5hRFVQID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7");
    sb.append("CiAgICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKGlkZW50aXR5TmFtZSwgZnVuY3Rpb24gKCkgeyByZXR1");
    sb.append("cm4gcnhvYmoucnhfZm9yd2FyZDsgfSk7IC8vIFRPRE86IG1ha2Ugcnh2YXIKICAgIGlmIChpZExvb2t1");
    sb.append("cC5hYm9ydCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBmb3JtLmFjdGlvbiA9IHNlbGYucHJvdG9j");
    sb.append("b2wgKyAiLy8iICsgc2VsZi5ob3N0ICsgIi9+dXBsb2FkIjsKICAgIGZvcm0ubWV0aG9kID0gInBvc3Qi");
    sb.append("OwogICAgZm9ybS5lbmN0eXBlID0gIm11bHRpcGFydC9mb3JtLWRhdGEiOwogICAgewogICAgICB2YXIg");
    sb.append("aWRlbnRpdHlJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGlkZW50");
    sb.append("aXR5SW5wdXQudHlwZSA9ICJoaWRkZW4iOwogICAgICBpZGVudGl0eUlucHV0Lm5hbWUgPSAiaWRlbnRp");
    sb.append("dHkiOwogICAgICBpZGVudGl0eUlucHV0LnZhbHVlID0gaWRMb29rdXAuaWRlbnRpdHk7CiAgICAgIGZv");
    sb.append("cm0uYXBwZW5kQ2hpbGQoaWRlbnRpdHlJbnB1dCk7CiAgICB9CiAgICB7CiAgICAgIHZhciBkb21haW5J");
    sb.append("bnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGRvbWFpbklucHV0LnR5");
    sb.append("cGUgPSAiaGlkZGVuIjsKICAgICAgZG9tYWluSW5wdXQubmFtZSA9ICJkb21haW4iOwogICAgICBkb21h");
    sb.append("aW5JbnB1dC52YWx1ZSA9IHNlbGYuZG9tYWluOwogICAgICBmb3JtLmFwcGVuZENoaWxkKGRvbWFpbklu");
    sb.append("cHV0KTsKICAgIH0KICAgIHZhciBpZnJhbWVUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJp");
    sb.append("ZnJhbWUiKTsKICAgIGlmcmFtZVRhcmdldC5uYW1lID0gIlVQTE9BRF8iICsgTWF0aC5yYW5kb20oKTsK");
    sb.append("ICAgIGlmcmFtZVRhcmdldC53aWR0aCA9ICIxIjsKICAgIGlmcmFtZVRhcmdldC5oZWlnaHQgPSAiMSI7");
    sb.append("CiAgICBmb3JtLmFwcGVuZENoaWxkKGlmcmFtZVRhcmdldCk7CiAgICBmb3JtLnRhcmdldCA9IGlmcmFt");
    sb.append("ZVRhcmdldC5uYW1lOwogIH07CgoKCiAgdmFyIGdldF9mb3JtX2FuZF9wdyA9IGZ1bmN0aW9uKGZvcm0p");
    sb.append("IHsKICAgIHZhciBwYXNzd29yZHMgPSB7fTsKICAgIHZhciByZXEgPSBnZXRfZm9ybShmb3JtLCBwYXNz");
    sb.append("d29yZHMpOwogICAgaWYgKCdwYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB7CiAgICAgIHJlcVsncGFzc3dv");
    sb.append("cmQnXSA9IHBhc3N3b3Jkc1sncGFzc3dvcmQnXTsKICAgIH0KICAgIGlmICgnbmV3X3Bhc3N3b3JkJyBp");
    sb.append("biBwYXNzd29yZHMpIHsKICAgICAgcmVxWyduZXdfcGFzc3dvcmQnXSA9IHBhc3N3b3Jkc1snbmV3X3Bh");
    sb.append("c3N3b3JkJ107CiAgICB9CiAgICByZXR1cm4gcmVxOwogIH0KCiAgdmFyIGNvbW1vbkF1dGhvcml6ZSA9");
    sb.append("IGZ1bmN0aW9uKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqLCBuZXh0U3RlcCkgewogICAg");
    sb.append("cnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1p");
    sb.append("dCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBz");
    sb.append("ZW5kUmVxID0gZnVuY3Rpb24ocmVxKSB7CiAgICAgICAgdmFyIHNtID0ge2F0dGVtcHRzOjB9OwogICAg");
    sb.append("ICAgIHNtLnJlc3BvbmRlciA9IHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7");
    sb.append("CiAgICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwg");
    sb.append("Y29ubmVjdGlvbik7CiAgICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7");
    sb.append("CiAgICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICAgIH0sCiAgICAgICAgICBmYWls");
    sb.append("dXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFp");
    sb.append("bGVkIHNpZ25pbmcgaW50byBkb2N1bWVudDoiICsgcmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9");
    sb.append("OwogICAgICAgIG5leHRTdGVwKHJlcSwgc20ucmVzcG9uZGVyKTsKICAgICAgfQogICAgICB2YXIgcGFz");
    sb.append("c3dvcmRzID0ge307CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybShmb3JtLCBwYXNzd29yZHMpOwogICAg");
    sb.append("ICBpZiAoJ3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgICByZXFbJ3Bhc3N3b3JkJ10gPSBw");
    sb.append("YXNzd29yZHNbJ3Bhc3N3b3JkJ107CiAgICAgIH0KICAgICAgaWYgKCduZXdfcGFzc3dvcmQnIGluIHBh");
    sb.append("c3N3b3JkcykgewogICAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3b3Jk");
    sb.append("c1snbmV3X3Bhc3N3b3JkJ10sIHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChoYXNoZWRfcHcp");
    sb.append("IHsKICAgICAgICAgICAgcmVxWyduZXdfcGFzc3dvcmQnXSA9IGhhc2hlZF9wdy5wYXNzd29yZEhhc2g7");
    sb.append("CiAgICAgICAgICAgIHNlbmRSZXEocmVxKTsKICAgICAgICAgIH0sCiAgICAgICAgICBmYWlsZWQ6IGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgdG8gaGFzaCBw");
    sb.append("YXNzd29yZCIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHNl");
    sb.append("bmRSZXEocmVxKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfQoKICAvLyByeDphY3Rpb249ZG9jdW1l");
    sb.append("bnQ6YXV0aG9yaXplCiAgc2VsZi5hRE9DID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5h");
    sb.append("bWUsIHJ4b2JqKSB7CiAgICBjb21tb25BdXRob3JpemUoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwg");
    sb.append("cnhvYmosIGZ1bmN0aW9uKHJlcSwgcmVzcG9uZGVyKSB7CiAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRB");
    sb.append("dXRob3JpemF0aW9uKHJlcS5zcGFjZSwgcmVxLmtleSwgcmVxLCByZXNwb25kZXIpOwogICAgfSk7CiAg");
    sb.append("fTsKCiAgLy8gcng6YWN0aW9uPWRvbWFpbjphdXRob3JpemUKICBzZWxmLmFET00gPSBmdW5jdGlvbiAo");
    sb.append("Zm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIGNvbW1vbkF1dGhvcml6ZShmb3Jt");
    sb.append("LCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgZnVuY3Rpb24ocmVxLCByZXNwb25kZXIpIHsKICAg");
    sb.append("ICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6YXRpb25Eb21haW4oc2VsZi5kb21haW4sIHJlcSwg");
    sb.append("cmVzcG9uZGVyKTsKICAgIH0pOwogIH07CgogIC8vIHJ4OmV2ZW50PXRvZ2dsZS1wYXNzd29yZAogIHNl");
    sb.append("bGYub25QV1QgPSBmdW5jdGlvbihkb20sIHN0YXRlLCB0eXBlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUs");
    sb.append("IGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBjdXIgPSBkb207CiAgICAgIHdo");
    sb.append("aWxlIChjdXIudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9ICJQQVNTV09SRC1IT0xERVIiKSB7CiAgICAg");
    sb.append("ICAgY3VyID0gY3VyLnBhcmVudEVsZW1lbnQ7CiAgICAgIH0KICAgICAgdmFyIGh1bnQgPSBmdW5jdGlv");
    sb.append("bihub2RlKSB7CiAgICAgICAgaWYgKG5vZGUudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09ICJJTlBVVCIg");
    sb.append("JiYgKG5vZGUubmFtZSA9PSAicGFzc3dvcmQiIHx8IG5vZGUubmFtZSA9PSAiY29uZmlybS1wYXNzd29y");
    sb.append("ZCIgfHwgbmFtZSA9PSAibmV3X3Bhc3N3b3JkIiB8fCBuYW1lID09ICJjb25maXJtLW5ld19wYXNzd29y");
    sb.append("ZCIpKSB7CiAgICAgICAgICBpZiAobm9kZS50eXBlID09ICJwYXNzd29yZCIpIHsKICAgICAgICAgICAg");
    sb.append("bm9kZS50eXBlID0gInRleHQiCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBub2RlLnR5cGUg");
    sb.append("PSAicGFzc3dvcmQiCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgnY2hpbGRyZW4nIGlu");
    sb.append("IG5vZGUpIHsKICAgICAgICAgIHZhciBjaCA9IG5vZGUuY2hpbGRyZW47CiAgICAgICAgICB2YXIgbiA9");
    sb.append("IGNoLmxlbmd0aDsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAg");
    sb.append("ICAgIGh1bnQoY2hba10pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKGN1");
    sb.append("ciAhPSBudWxsKSB7CiAgICAgICAgaHVudChjdXIpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyBS");
    sb.append("VU5USU1FIHwgcng6YWN0aW9uPWRvbWFpbjpzaWduLWluICh0byBkZXByZWNhdGUpCiAgc2VsZi5hZERT");
    sb.append("TyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgcnhvYmou");
    sb.append("X18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1");
    sb.append("bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBn");
    sb.append("ZXRfZm9ybV9hbmRfcHcoZm9ybSk7CiAgICAgIHZhciBzbSA9IHthdHRlbXB0czowfTsKICAgICAgc20u");
    sb.append("cmVzcG9uZGVyID0gewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAg");
    sb.append("ICBzdGFzaF9pZGVudGl0eShpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rpb24p");
    sb.append("OwogICAgICAgICAgLy8gVE9ETzogYmxvdyBhd2F5IGNvbm5lY3Rpb25zCiAgICAgICAgICBzZWxmLmdv");
    sb.append("dG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwog");
    sb.append("ICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmly");
    sb.append("ZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2lnbmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwog");
    sb.append("ICAgICAgIH0KICAgICAgfTsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZURvbWFpbihz");
    sb.append("ZWxmLmRvbWFpbiwgcmVxLnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHNtLnJlc3BvbmRlcik7CiAgICB9");
    sb.append("LCB0cnVlKTsKICB9CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9jdW1lbnQ6c2lnbi1pbiAodG8g");
    sb.append("ZGVwcmVjYXRlKQogIHNlbGYuYURTTyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1l");
    sb.append("LCByeG9iaikgeyAvLyBERVBSRUNBVEVECiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAg");
    sb.append("IGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQu");
    sb.append("cHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAg");
    sb.append("ICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZShyZXEuc3BhY2UsIHJlcS5rZXksIHJlcS51c2Vy");
    sb.append("bmFtZSwgcmVxLnBhc3N3b3JkLCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsK");
    sb.append("ICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwgY29u");
    sb.append("bmVjdGlvbik7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAgICAgICAg");
    sb.append("IHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3Mo");
    sb.append("Zm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAg");
    sb.append("ICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6IiArIHJl");
    sb.append("YXNvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIHRydWUpOwogIH07CgogIC8vIFJVTlRJTUUg");
    sb.append("fCByeDphY3Rpb249ZG9tYWluOnNpZ24taW4tcmVzZXQgKHRvIGRlcHJlY2F0ZSkKICBzZWxmLmFkRFNP");
    sb.append("ciA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgeyAvLyBERVBSRUNB");
    sb.append("VEVECiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5l");
    sb.append("cignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAg");
    sb.append("ICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVu");
    sb.append("dEF1dGhvcml6ZURvbWFpbldpdGhSZXNldChzZWxmLmRvbWFpbiwgcmVxLnVzZXJuYW1lLCByZXEucGFz");
    sb.append("c3dvcmQsIHJlcS5uZXdfcGFzc3dvcmQsewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2Fk");
    sb.append("KSB7CiAgICAgICAgICBzdGFzaF9pZGVudGl0eShpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHks");
    sb.append("IGNvbm5lY3Rpb24pOwogICAgICAgICAgLy8gVE9ETzogYmxvdyBhd2F5IGNvbm5lY3Rpb25zCiAgICAg");
    sb.append("ICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAgZmlyZV9zdWNj");
    sb.append("ZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewog");
    sb.append("ICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2lnbmluZyBpbnRvIGRvY3VtZW50OiIg");
    sb.append("KyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0cnVlKTsKICB9CgogIC8vIFJVTlRJ");
    sb.append("TUUgfCByeDphY3Rpb249ZG9jdW1lbnQ6c2lnbi1pbi1yZXNldCAodG8gZGVwcmVjYXRlKQogIHNlbGYu");
    sb.append("YURTT3IgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsgLy8gREVQ");
    sb.append("UkVDQVRFRAogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFkZEV2ZW50TGlz");
    sb.append("dGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7");
    sb.append("CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybV9hbmRfcHcoZm9ybSk7CiAgICAgIGNvbm5lY3Rpb24uRG9j");
    sb.append("dW1lbnRBdXRob3JpemVXaXRoUmVzZXQocmVxLnNwYWNlLCByZXEua2V5LCByZXEudXNlcm5hbWUsIHJl");
    sb.append("cS5wYXNzd29yZCwgcmVxLm5ld19wYXNzd29yZCx7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBh");
    sb.append("eWxvYWQpIHsKICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVu");
    sb.append("dGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMK");
    sb.append("ICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJl");
    sb.append("X3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29u");
    sb.append("KSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1l");
    sb.append("bnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9LCB0cnVlKTsKICAgIH0pOwogIH07CgogIHNl");
    sb.append("bGYuYXV0b2dlbmlkID0gMTsKICBzZWxmLlggPSBmdW5jdGlvbigpIHsKICAgIHNlbGYuYXV0b2dlbmlk");
    sb.append("Kys7CiAgICByZXR1cm4gJ3gnICsgc2VsZi5hdXRvZ2VuaWQ7CiAgfTsKCiAgdmFyIHRyYW5zZm9ybXMg");
    sb.append("PSB7fTsKICB0cmFuc2Zvcm1zWydwcmluY2lwYWwuYWdlbnQnXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJu");
    sb.append("IHguYWdlbnQ7IH07CiAgdHJhbnNmb3Jtc1sncHJpbmNpcGFsLmF1dGhvcml0eSddID0gZnVuY3Rpb24o");
    sb.append("eCkgeyByZXR1cm4geC5hdXRob3JpdHk7IH07CiAgdHJhbnNmb3Jtc1sndHJpbSddID0gZnVuY3Rpb24o");
    sb.append("eCkgeyByZXR1cm4gKCcnICsgeCkudHJpbSgpOyB9OwogIHRyYW5zZm9ybXNbJ3VwcGVyJ10gPSBmdW5j");
    sb.append("dGlvbih4KSB7IHJldHVybiAoJycgKyB4KS50b1VwcGVyQ2FzZSgpOyB9OwogIHRyYW5zZm9ybXNbJ2xv");
    sb.append("d2VyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiAoJycgKyB4KS50b0xvd2VyQ2FzZSgpOyB9OwogIHRy");
    sb.append("YW5zZm9ybXNbJ2lzX2VtcHR5X3N0ciddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geCA9PSAiIjsgfTsK");
    sb.append("ICB0cmFuc2Zvcm1zWydpc19ub3RfZW1wdHlfc3RyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiB4ICE9");
    sb.append("ICIiOyB9OwogIHRyYW5zZm9ybXNbJ2pzb25pZnknXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIEpTT04u");
    sb.append("c3RyaW5naWZ5KHgpOyB9OwogIHRyYW5zZm9ybXNbJ3RpbWVfbm93J10gPSBmdW5jdGlvbih4KSB7IHJl");
    sb.append("dHVybiBEYXRlLm5vdygpICsgIiI7IH07CiAgdHJhbnNmb3Jtc1snc2l6ZV9ieXRlcyddID0gZnVuY3Rp");
    sb.append("b24oeHJhdykgewogICAgdmFyIHggPSAwLjA7CiAgICBpZiAodHlwZW9mKHhyYXcpID09ICdudW1iZXIn");
    sb.append("KSB7CiAgICAgIHggPSB4cmF3OwogICAgfSBlbHNlIHsKICAgICAgdHJ5IHsKICAgICAgICB4ID0gcGFy");
    sb.append("c2VGbG9hdCh4cmF3KTsKICAgICAgfSBjYXRjaCAoZXgpIHsKCiAgICAgIH0KICAgIH0KICAgIHZhciBp");
    sb.append("dmFsID0gTWF0aC5mbG9vcih4KTsKICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4gaXZh");
    sb.append("bCArICIgQiI7CiAgICB9CiAgICBpdmFsIC89IDEwMjQ7CiAgICBpZiAoaXZhbCA8IDEwMjQpIHsKICAg");
    sb.append("ICAgcmV0dXJuIE1hdGgucm91bmQoaXZhbCAqIDEwKSAvIDEwLjAgKyAiIEtCIjsKICAgIH0KICAgIGl2");
    sb.append("YWwgLz0gMTAyNDsKICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4gTWF0aC5yb3VuZChp");
    sb.append("dmFsICogMTApIC8gMTAuMCArICIgTUIiOwogICAgfQogICAgaXZhbCAvPSAxMDI0OwogICAgaWYgKGl2");
    sb.append("YWwgPCAxMDI0KSB7CiAgICAgIHJldHVybiBNYXRoLnJvdW5kKGl2YWwgKiAxMCkgLyAxMC4wICsgIiBH");
    sb.append("QiI7CiAgICB9CiAgfQogIHRyYW5zZm9ybXNbJ29yZGluYWxpemUnXSA9IGZ1bmN0aW9uKG4pIHsKICAg");
    sb.append("IGNvbnN0IG51bSA9IHBhcnNlSW50KG4pOwogICAgaWYgKCFpc05hTihudW0pKSB7CiAgICAgIGxldCBv");
    sb.append("cmQgPSAndGgnOwogICAgICBpZiAobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSkgewogICAgICAg");
    sb.append("IG9yZCA9ICdzdCc7CiAgICAgIH0KICAgICAgZWxzZSBpZiAobiAlIDEwID09IDIgJiYgbiAlIDEwMCAh");
    sb.append("PSAxMikgewogICAgICAgIG9yZCA9ICduZCc7CiAgICAgIH0KICAgICAgZWxzZSBpZiAobiAlIDEwID09");
    sb.append("IDMgJiYgbiAlIDEwMCAhPSAxMykgewogICAgICAgIG9yZCA9ICdyZCc7CiAgICAgIH0KICAgICAgcmV0");
    sb.append("dXJuIG4gKyBvcmQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbjsKICAgIH0KICB9CiAgdHJhbnNm");
    sb.append("b3Jtc1sndnVsZ2FyX2ZyYWN0aW9uJ10gPSBmdW5jdGlvbih4cmF3KSB7CiAgICB2YXIgeCA9IDAuMDsK");
    sb.append("ICAgIGlmICh0eXBlb2YoeHJhdykgPT0gJ251bWJlcicpIHsKICAgICAgeCA9IHhyYXc7CiAgICB9IGVs");
    sb.append("c2UgewogICAgICB0cnkgewogICAgICAgIHggPSBwYXJzZUZsb2F0KHhyYXcpOwogICAgICB9IGNhdGNo");
    sb.append("IChleCkgewoKICAgICAgfQogICAgfQogICAgdmFyIGl2YWwgPSBNYXRoLmZsb29yKHgpOwogICAgdmFy");
    sb.append("IGNoYW5nZSA9IHggLSBpdmFsOwogICAgdmFyIHN1ZmZpeCA9ICIiOwogICAgaWYgKGNoYW5nZSA8PSAw");
    sb.append("LjA2MjUpIHsKICAgICAgLy8gMAogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC4xODc1KSB7CiAgICAg");
    sb.append("IHN1ZmZpeCA9ICLihZsiOwogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC4zMTI1KSB7CiAgICAgIHN1");
    sb.append("ZmZpeCA9ICLCvCI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjQzNzUpIHsKICAgICAgc3VmZml4");
    sb.append("ID0gIuKFnCI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjU2MjUpIHsKICAgICAgc3VmZml4ID0g");
    sb.append("IsK9IjsKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9IDAuNjg3NSkgewogICAgICBzdWZmaXggPSAi4oWd");
    sb.append("IjsKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9IDAuODEyNSkgewogICAgICBzdWZmaXggPSAiwr4iOyAv");
    sb.append("LyAzLzQKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9IDAuOTM3NSkgewogICAgICBzdWZmaXggPSAi4oWe");
    sb.append("IjsKICAgIH0gLy8gZWxzZSAxCiAgICByZXR1cm4gaXZhbCArIHN1ZmZpeDsKICB9CiAgdHJhbnNmb3Jt");
    sb.append("c1sndGltZV9hZ28nXSA9IGZ1bmN0aW9uKGR0LCBmb3JtYXQpIHsKICAgIC8vIG9ubHkgdHJhbnNmb3Jt");
    sb.append("IHN0cmluZ3MKICAgIGlmICh0eXBlb2YgKGR0KSA9PSAic3RyaW5nIikgewogICAgICAvLyBsZXQncyBz");
    sb.append("dHJpcCBvdXQgZXZlcnl0aGluZyBhZnRlciB0aGUgYnJhY2tldHMKICAgICAgdmFyIHMgPSBkdDsKICAg");
    sb.append("ICAgdmFyIGsgPSBzLmluZGV4T2YoJ1snKTsKICAgICAgaWYgKGsgPj0gMCkgewogICAgICAgIHMgPSBz");
    sb.append("LnN1YnN0cmluZygwLCBrKTsKICAgICAgfQogICAgICB2YXIgZCA9IERhdGUucGFyc2Uocyk7CiAgICAg");
    sb.append("IGlmIChOdW1iZXIuaXNOYU4oZCkpIHsKICAgICAgICAvLyBpdCBpc24ndCBhIG51bWJlciwgc28gd2Ug");
    sb.append("ZGlkbid0IGdldCBhIGRhdGUgc3RhbXA7IGRlZmF1bHQgdG8gdGhlIGlucHV0CiAgICAgICAgcmV0dXJu");
    sb.append("IGR0OwogICAgICB9CiAgICAgIC8vIHdlIGFyZSBpbnRlcmVzdGVkIGluIHByb2R1Y2luZyBhIHN0cmlu");
    sb.append("ZyBsaWtlICJYIG1pbnV0ZXMgYWdvIiwgc28gc3RhcnQgd2l0aCBzZWNvbmRzCiAgICAgIHZhciBkZWx0");
    sb.append("YSA9IChEYXRlLm5vdygpIC0gZCkvMTAwMDsgLy8gc2Vjb25kczsKICAgICAgaWYgKGRlbHRhIDwgNjAp");
    sb.append("IHsKICAgICAgICByZXR1cm4gIkxlc3MgdGhhbiBhIG1pbnV0ZSBhZ28iOwogICAgICB9CiAgICAgIC8v");
    sb.append("IGl0IHdhc24ndCA5MCBzZWNvbmRzIGFnbyBvciBsZXNzLCBzbyBsZXQncyByZWZpbmUgdG93YXJkcyBt");
    sb.append("aW51dGVzCiAgICAgIGRlbHRhIC89IDYwOyAvLyBub3cgaXQgaXMgbWludXRlcwogICAgICBpZiAoZGVs");
    sb.append("dGEgPCA2MCkgewogICAgICAgIGNvbnN0IGRlbHRhSW50ID0gTWF0aC5mbG9vcihkZWx0YSk7CiAgICAg");
    sb.append("ICAgcmV0dXJuIGAke2RlbHRhSW50fSBtaW51dGUke2RlbHRhSW50ID4gMSA/ICdzJzogJyd9IGFnb2A7");
    sb.append("CiAgICAgIH0KICAgICAgaWYgKGRlbHRhID4gMi42MjhlKzcpIHsKICAgICAgICByZXR1cm4gIk5ldmVy");
    sb.append("IjsKICAgICAgfQogICAgICAvLyBpdCB3YXNuJ3QgOTAgbWludXRlcyBhZ28sIHNvIGxldCdzIGp1c3Qg");
    sb.append("cHV0IHRoZSB0aW1lIHN0YW1wIHVwCiAgICAgIHZhciBkdGhlbiA9IG5ldyBEYXRlKGQpOwogICAgICB2");
    sb.append("YXIgZG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBvcHRzID0ge307CiAgICAgIGlmIChmb3JtYXQp");
    sb.append("ewogICAgICAgIGZvcm1hdC50cmltKCkuc3BsaXQoIiIpLmZvckVhY2goY2hhciA9PiB7CiAgICAgICAg");
    sb.append("ICBjb25zdCBrZXlzID0geyJoIjogImhvdXIiLCAibSI6ICJtaW51dGUiLCAicyI6ICJzZWNvbmQifQog");
    sb.append("ICAgICAgICAgaWYgKGNoYXIgaW4ga2V5cyl7CiAgICAgICAgICAgIG9wdHNba2V5c1tjaGFyXV0gPSAi");
    sb.append("bnVtZXJpYyI7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfQogICAgICBpZiAoZHRoZW4udG9M");
    sb.append("b2NhbGVEYXRlU3RyaW5nKCkgIT0gZG5vdy50b0xvY2FsZURhdGVTdHJpbmcoKSkgewogICAgICAgIHJl");
    sb.append("dHVybiBkdGhlbi50b0xvY2FsZURhdGVTdHJpbmcoKSArICIgIiArIGR0aGVuLnRvTG9jYWxlVGltZVN0");
    sb.append("cmluZyhbXSwgb3B0cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGR0aGVuLnRvTG9jYWxlVGltZVN0cmlu");
    sb.append("ZyhbXSwgb3B0cyk7CiAgICB9IGVsc2UgewogICAgICAvLyBkbyBub3RoaW5nCiAgICAgIHJldHVybiBk");
    sb.append("dDsKICAgIH0KICB9OwoKICB0cmFuc2Zvcm1zWyd0aW1lJ10gPSBmdW5jdGlvbihkdCkgewogICAgICAg");
    sb.append("IC8vIG9ubHkgdHJhbnNmb3JtIHN0cmluZ3MKICAgIGlmICh0eXBlb2YgKGR0KSA9PSAic3RyaW5nIikg");
    sb.append("ewogICAgICAvLyBsZXQncyBzdHJpcCBvdXQgZXZlcnl0aGluZyBhZnRlciB0aGUgYnJhY2tldHMKICAg");
    sb.append("ICAgdmFyIHMgPSBkdDsKICAgICAgdmFyIGsgPSBzLmluZGV4T2YoJ1snKTsKICAgICAgaWYgKGsgPj0g");
    sb.append("MCkgewogICAgICAgIHMgPSBzLnN1YnN0cmluZygwLCBrKTsKICAgICAgfQoKICAgICAgLy8gQ29udmVy");
    sb.append("dCBzdHJpbmcgdG8gdGltZSBmb3JtYXQKICAgICAgdmFyIHQgPSBkdC5pbmRleE9mKCI6Iik7CiAgICAg");
    sb.append("IGlmICh0IDwgMCkgewogICAgICAgIHJldHVybiBkdDsKICAgICAgfQogICAgICB2YXIgaCA9IGR0LnNw");
    sb.append("bGl0KCI6IilbMF07CiAgICAgIHZhciBob3VycyA9IGg7CiAgICAgIGlmIChoLmxlbmd0aCA+IDIpIHsK");
    sb.append("ICAgICAgICBob3VycyA9IGguc3Vic3RyaW5nKGgubGVuZ3RoIC0gMiwgaC5sZW5ndGgpOyAvLyB0cmlt");
    sb.append("IGxlZnQgaW4gY2FzZSBvZiBkYXRldGltZQogICAgICB9CiAgICAgIHZhciBBbU9yUG0gPSBob3VycyA+");
    sb.append("PSAxMiA/ICdwbScgOiAnYW0nOwogICAgICBob3VycyA9IChob3VycyAlIDEyKSB8fCAxMjsKICAgICAg");
    sb.append("dmFyIG0gPSBkdC5zcGxpdCgiOiIpWzFdCiAgICAgIHZhciBtaW51dGVzID0gbTsKICAgICAgaWYgKG0u");
    sb.append("bGVuZ3RoID4gMikgewogICAgICAgIG1pbnV0ZXMgPSBtLnN1YnN0cmluZygwLDIpOyAvLyB0cmltIHJp");
    sb.append("Z2h0IGluIGNhc2Ugb2YgZGF0ZXRpbWUKICAgICAgfQoKICAgICAgcmV0dXJuIGhvdXJzICsgIjoiICsg");
    sb.append("bWludXRlcyArICIgIiArIEFtT3JQbTsgCiAgICB9IGVsc2UgewogICAgICAvLyBkbyBub3RoaW5nCiAg");
    sb.append("ICAgIHJldHVybiBkdDsKICAgIH0KICB9OwoKICB0cmFuc2Zvcm1zWydkYXRlLWZvcm1hdCddID0gZnVu");
    sb.append("Y3Rpb24oZHQsIGZvcm1hdCkgewogICAgaWYgKHR5cGVvZiAoZHQpID09ICJzdHJpbmciKSB7CiAgICAg");
    sb.append("IC8vIGlmIGRhdGUgaXMgbm90IHNldCwgcmV0dXJuIGVtcHR5IHN0cmluZwogICAgICBpZiAoZHQgPT0g");
    sb.append("IjEtMDEtMDEiKSByZXR1cm4gIiI7CgogICAgICAvLyBsZXQncyBzdHJpcCBvdXQgZXZlcnl0aGluZyBh");
    sb.append("ZnRlciB0aGUgYnJhY2tldHMKICAgICAgdmFyIHMgPSBkdDsKICAgICAgdmFyIGsgPSBzLmluZGV4T2Yo");
    sb.append("J1snKTsKICAgICAgaWYgKGsgPj0gMCkgewogICAgICAgIHMgPSBzLnN1YnN0cmluZygwLCBrKTsKICAg");
    sb.append("ICAgfQogICAgICBjb25zdCBwID0gZm9ybWF0LnRvTG93ZXJDYXNlKCkuc3BsaXQoIi8iKTsKICAgICAg");
    sb.append("Y29uc3Qgb3B0cyA9IHt9OwogICAgICBwLmZvckVhY2goZiA9PiB7CiAgICAgICAgY29uc3QgdmFsID0g");
    sb.append("Zi5sZW5ndGggPiAyID8gIm51bWVyaWMiIDogIjItZGlnaXQiOwogICAgICAgIGNvbnN0IGtleXMgPSB7");
    sb.append("InkiOiAieWVhciIsICJtIjogIm1vbnRoIiwgImQiOiAiZGF5In0KICAgICAgICBvcHRzW2tleXNbZi5j");
    sb.append("aGFyQXQoMCldXSA9IHZhbDsKICAgICAgfSkKCiAgICAgIC8vIGlmIG5vdCBkYXRldGltZSwgY29udmVy");
    sb.append("dGluZyB0byBvbmUgaGVyZSB0byBwcmV2ZW50IHRpbWV6b25lIGlzc3VlcwogICAgICBjb25zdCBkYXRl");
    sb.append("dGltZSA9IHMuaW5jbHVkZXMoIlQiKSA/IHMgOiBzICsgIlQwMDowMDowMCI7CiAgICAgIHJldHVybiBu");
    sb.append("ZXcgRGF0ZShkYXRldGltZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIG9wdHMpOwogICAgfSBl");
    sb.append("bHNlIHsKICAgICAgLy8gZG8gbm90aGluZwogICAgICByZXR1cm4gZHQ7CiAgICB9CiAgfQoKICB0cmFu");
    sb.append("c2Zvcm1zWydjdXJyZW5jeSddID0gZnVuY3Rpb24oeCwgZm10KSB7CiAgICBjb25zdCBudW0gPSBwYXJz");
    sb.append("ZUZsb2F0KHgpOwogICAgaWYgKGlzTmFOKG51bSkpIHJldHVybiB4OwogICAgdHJ5IHsKICAgICAgcmV0");
    sb.append("dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdChbXSwgewogICAgICAgIHN0eWxlOiAnY3VycmVuY3knLAog");
    sb.append("ICAgICAgIGN1cnJlbmN5OiBmbXQsCiAgICAgICAgdXNlR3JvdXBpbmc6IHRydWUsCiAgICAgIH0pLmZv");
    sb.append("cm1hdChudW0pCiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBjb25zb2xlLmVycm9yKCInY3VycmVu");
    sb.append("Y3knIHRyYW5zZm9ybSBlcnJvcjogIiwgZXJyb3IpOwogICAgICByZXR1cm4geDsKICAgIH0KICAgIAog");
    sb.append("IH0KICAKCiAgc2VsZi5SVFIgPSBmdW5jdGlvbihuYW1lLCB0cmFuc2Zvcm0pIHsKICAgIHRyYW5zZm9y");
    sb.append("bXNbbmFtZV0gPSB0cmFuc2Zvcm07CiAgfTsKICBzZWxmLnJlZ2lzdGVyVHJhbnNmb3JtID0gc2VsZi5S");
    sb.append("VFI7CgogIC8vIHtibGFofG5hbWV9CiAgc2VsZi5UUiA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgIGlmIChu");
    sb.append("YW1lIGluIHRyYW5zZm9ybXMpIHsKICAgICAgcmV0dXJuIHRyYW5zZm9ybXNbbmFtZV07CiAgICB9IAog");
    sb.append("ICAgLy8gZXg6IGRhdGUtZm9ybWF0Om1tL2RkL3l5CiAgICBpZiAobmFtZS5pbmNsdWRlcygiOiIpKXsK");
    sb.append("ICAgICAgY29uc3QgW2tleSwgZm9ybWF0XSAgPSBuYW1lLnNwbGl0KCI6Iik7CiAgICAgIGlmIChrZXkg");
    sb.append("aW4gdHJhbnNmb3JtcykgewogICAgICAgIHJldHVybiB4ID0+IHRyYW5zZm9ybXNba2V5XSh4LCBmb3Jt");
    sb.append("YXQpOwogICAgICB9CiAgICB9CiAgICAKICAgIHJldHVybiBmdW5jdGlvbih4KSB7IHJldHVybiB4OyB9");
    sb.append("OwogIH07CgogIC8vIFRPRE8KICB2YXIgdmFsaWRhdG9ycyA9IHt9OwogIHNlbGYuUlYgPSBmdW5jdGlv");
    sb.append("bihuYW1lLCB2YWxpZGF0b3IpIHsKICAgIHZhbGlkYXRvcnNbbmFtZV0gPSB2YWxpZGF0b3I7CiAgfTsK");
    sb.append("ICBzZWxmLnJlZ2lzdGVyVmFsaWRhdG9yID0gc2VsZi5SVjsKCiAgdmFyIGNvbW1vblB1dCA9IGZ1bmN0");
    sb.append("aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgdXJsZmFjdG9yeSkgewogICAgLy8g");
    sb.append("V0lQCiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5l");
    sb.append("cignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAg");
    sb.append("ICAgdmFyIHBhc3N3b3JkcyA9IHt9OwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm0oZm9ybSwgcGFzc3dv");
    sb.append("cmRzKTsKCiAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB1cmwgPSB1cmxm");
    sb.append("YWN0b3J5KHJ4b2JqKTsKICAgICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAg");
    sb.append("ICAgICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAo");
    sb.append("dGhpcy5yZWFkeVN0YXRlID09IDQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkg");
    sb.append("ewogICAgICAgICAgICAgIHZhciB0eXBlID0gdGhpcy5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1U");
    sb.append("eXBlIik7CiAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gInRleHQvZXJyb3IiKSB7CiAgICAgICAgICAg");
    sb.append("ICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgdGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAg");
    sb.append("cmV0dXJuOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAiYXBwbGljYXRpb24vanNvbiIp");
    sb.append("IHsKICAgICAgICAgICAgICAgIHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4");
    sb.append("dCk7CiAgICAgICAgICAgICAgICBpZiAoJ2lkZW50aXR5JyBpbiBwYXlsb2FkKSB7CiAgICAgICAgICAg");
    sb.append("ICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwgbnVsbCk7");
    sb.append("CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYuZ290byhy");
    sb.append("eG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwog");
    sb.append("ICAgICAgICAgICAgIGZvcm0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInN1Ym1pdHRlZCIpKTsKICAg");
    sb.append("ICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0");
    sb.append("byBjb21tdW5pY2F0ZSB0byBzZXJ2ZXIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAg");
    sb.append("IH07CiAgICAgICAgeGh0dHAub3BlbigiUFVUIiwgdXJsLCB0cnVlKTsKICAgICAgICB4aHR0cC53aXRo");
    sb.append("Q3JlZGVudGlhbHMgPSB0cnVlOwogICAgICAgIHhodHRwLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxKSk7");
    sb.append("CiAgICAgIH07CgogICAgICBpZiAoJ3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgICBpZiAo");
    sb.append("ISgnY29uZmlybS1wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB8fCBwYXNzd29yZHNbJ3Bhc3N3b3JkJ10g");
    sb.append("PT0gcGFzc3dvcmRzWydjb25maXJtLXBhc3N3b3JkJ10pIHsKICAgICAgICAgIGNvbm5lY3Rpb24uRG9j");
    sb.append("dW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3b3Jkc1sncGFzc3dvcmQnXSwgewogICAgICAgICAgICBzdWNj");
    sb.append("ZXNzOiBmdW5jdGlvbiAoaGFzaGVkX3B3KSB7CiAgICAgICAgICAgICAgcmVxWydwYXNzd29yZCddID0g");
    sb.append("aGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsKICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIH0s");
    sb.append("CiAgICAgICAgICAgIGZhaWxlZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGZpcmVfZmFpbHVy");
    sb.append("ZShmb3JtLCAiRmFpbGVkIHRvIGhhc2ggcGFzc3dvcmQiKTsKICAgICAgICAgICAgfQogICAgICAgICAg");
    sb.append("fSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiUGFzc3dvcmRz");
    sb.append("IGRvbid0IG1hdGNoIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIG5leHQoKTsKICAg");
    sb.append("ICAgfQogICAgfSwgdHJ1ZSk7CiAgfQoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWRvbWFpbjpwdXQK");
    sb.append("ICBzZWxmLmFkRFBVVCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikg");
    sb.append("ewogICAgY29tbW9uUHV0KGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqLCBmdW5jdGlvbiAo");
    sb.append("cnhvYmopIHsgcmV0dXJuIHNlbGYucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0ICsgIi8iICsgcnhv");
    sb.append("YmoucGF0aDsgfSkKICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWRvY3VtZW50OnB1dAogIHNl");
    sb.append("bGYuYURQVVQgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAg");
    sb.append("IGNvbW1vblB1dChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgZnVuY3Rpb24gKHJ4b2Jq");
    sb.append("KSB7IHJldHVybiBzZWxmLnByb3RvY29sICsgIi8vIiArIGNvbm5lY3Rpb24uaG9zdCArICIvIiArIHJ4");
    sb.append("b2JqLnNwYWNlICsgIi8iICsgcnhvYmoua2V5ICsgIi8iICsgcnhvYmoucGF0aDsgfSkKICB9OwoKICAv");
    sb.append("LyBSVU5USU1FIHwgcng6YWN0aW9uPWFkYW1hOnNpZ24taW4KICBzZWxmLmFTTyA9IGZ1bmN0aW9uIChm");
    sb.append("b3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgcnhvYmouX18gPSBmdW5jdGlvbiAo");
    sb.append("KSB7IH07CiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHJlY2FsbF9lbWFp");
    sb.append("bChmb3JtKTsKICAgIH0sIDEpOwogICAgLy8gVE9ETzogcHVsbCBlbWFpbCBvdXQgb2YgdGhpbiBhaXIK");
    sb.append("ICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBl");
    sb.append("dnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsK");
    sb.append("ICAgICAgaWYgKHJlcS5yZW1lbWJlcikgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJlbWFp");
    sb.append("bF9yZW1lbWJlciIsIHJlcS5lbWFpbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9jYWxTdG9yYWdl");
    sb.append("LnNldEl0ZW0oImVtYWlsX3JlbWVtYmVyIiwgIiIpOwogICAgICB9CiAgICAgIGNvbm5lY3Rpb24uQWNj");
    sb.append("b3VudExvZ2luKHJlcS5lbWFpbCwgcmVxLnBhc3N3b3JkLCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rp");
    sb.append("b24gKHBheWxvYWQpIHsKICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9h");
    sb.append("ZC5pZGVudGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2Fy");
    sb.append("ZCwgZmFsc2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAg");
    sb.append("ZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJB");
    sb.append("Y2NvdW50TG9naW4gRmFpbGVkOiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0");
    sb.append("cnVlKTsKICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWFkYW1hOnNpZ24tdXAKICBzZWxmLmFT");
    sb.append("VSA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgZm9yd2FyZFRvKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlz");
    sb.append("dGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7");
    sb.append("CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybShmb3JtLCB7fSk7CiAgICAgIGNvbm5lY3Rpb24uSW5pdFNl");
    sb.append("dHVwQWNjb3VudChyZXEuZW1haWwsIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoLyogcGF5bG9h");
    sb.append("ZCAqLykgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImVtYWlsIiwgcmVxLmVtYWlsKTsK");
    sb.append("ICAgICAgICAgIHNlbGYuZ290byhmb3J3YXJkVG8sIGZhbHNlKTsKICAgICAgICAgIGZpcmVfc3VjY2Vz");
    sb.append("cyhmb3JtKTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAg");
    sb.append("ICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiSW5pdFNldHVwQWNjb3VudCBGYWlsZWQ6IiArIHJlYXNv");
    sb.append("bik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIHRydWUpOwogIH07CgogIC8vIFJVTlRJTUUgfCBy");
    sb.append("eDphY3Rpb249YWRhbWE6c2V0LXBhc3N3b3JkCiAgc2VsZi5hU1AgPSBmdW5jdGlvbiAoZm9ybSwgc3Rh");
    sb.append("dGUsIGZvcndhcmRUbykgewogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlv");
    sb.append("biAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zv");
    sb.append("cm1fYW5kX3B3KGZvcm0pOwogICAgICBpZiAoISgiZW1haWwiIGluIHJlcSkpIHsKICAgICAgICByZXEu");
    sb.append("ZW1haWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiZW1haWwiKTsKICAgICAgfQogICAgICBjb25uZWN0");
    sb.append("aW9uLkluaXRDb21wbGV0ZUFjY291bnQocmVxLmVtYWlsLCBmYWxzZSwgcmVxLmNvZGUsIHsKICAgICAg");
    sb.append("ICBzdWNjZXNzOiBmdW5jdGlvbiAoaW5pdCkgewogICAgICAgICAgdmFyIGlkZW50aXR5ID0gaW5pdC5p");
    sb.append("ZGVudGl0eTsKICAgICAgICAgIGNvbm5lY3Rpb24uQWNjb3VudFNldFBhc3N3b3JkKGluaXQuaWRlbnRp");
    sb.append("dHksIHJlcS5wYXNzd29yZCwgewogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAg");
    sb.append("ICAgICAgICAgc3Rhc2hfaWRlbnRpdHkoImRlZmF1bHQiLCBpZGVudGl0eSwgY29ubmVjdGlvbik7CiAg");
    sb.append("ICAgICAgICAgICAgc2VsZi5nb3RvKGZvcndhcmRUbywgZmFsc2UpOwogICAgICAgICAgICAgIGZpcmVf");
    sb.append("c3VjY2Vzcyhmb3JtKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24g");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIEFjY291bnRT");
    sb.append("ZXRQYXNzd29yZDoiICsgcmVhc29uKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAg");
    sb.append("fSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1");
    sb.append("cmUoZm9ybSwgIkZhaWxlZCBJbml0Q29tcGxldGVBY2NvdW50OiIgKyByZWFzb24pOwogICAgICAgIH0K");
    sb.append("ICAgICAgfSk7CiAgICB9LCB0cnVlKTsKICB9OwoKCiAgdmFyIGh5ZHJhdGVfZm9ybSA9IGZ1bmN0aW9u");
    sb.append("KGVsLCBpbnB1dCkgewogICAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9VcHBlckNhc2UoKTsKICAgIHZh");
    sb.append("ciBpc1NldHRhYmxlID0gdGFnID09ICJTRUxFQ1QiIHx8IHRhZyA9PSAiSU5QVVQiIHx8IHRhZyA9PSAi");
    sb.append("SElEREVOIjsKICAgIGlmICgnbmFtZScgaW4gZWwgJiYgaXNTZXR0YWJsZSkgewogICAgICB2YXIgbmFt");
    sb.append("ZSA9IGVsLm5hbWU7CiAgICAgIHZhciBwYXlsb2FkID0gaW5wdXQ7CiAgICAgIHZhciBrRG90T3JTbGFz");
    sb.append("aCA9IGZpcnN0T2NjdXIobmFtZS5pbmRleE9mKCcuJyksIG5hbWUuaW5kZXhPZignLycpKTsKICAgICAg");
    sb.append("d2hpbGUgKGtEb3RPclNsYXNoID4gMCkgewogICAgICAgIHZhciBpdGVtID0gbmFtZS5zdWJzdHJpbmco");
    sb.append("MCwga0RvdE9yU2xhc2gpOwogICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZyhrRG90T3JTbGFzaCAr");
    sb.append("IDEpOwogICAgICAgIGlmIChpdGVtIGluIHBheWxvYWQpIHsKICAgICAgICAgIHBheWxvYWQgPSBwYXls");
    sb.append("b2FkW2l0ZW1dOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAg");
    sb.append("ICAgIGtEb3RPclNsYXNoID0gZmlyc3RPY2N1cihuYW1lLmluZGV4T2YoJy4nKSwgbmFtZS5pbmRleE9m");
    sb.append("KCcvJykpOwogICAgICB9CiAgICAgIGlmIChuYW1lIGluIHBheWxvYWQpIHsKICAgICAgICB2YXIgdHlw");
    sb.append("ZSA9IGVsLnR5cGUudG9VcHBlckNhc2UoKTsKICAgICAgICBpZiAodHlwZSA9PSAiQ0hFQ0tCT1giKSB7");
    sb.append("CiAgICAgICAgICBlbC5jaGVja2VkID0gcGF5bG9hZFtuYW1lXSA9PSAidHJ1ZSIgfHwgcGF5bG9hZFtu");
    sb.append("YW1lXSA9PT0gdHJ1ZSA/IHRydWUgOiBmYWxzZTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gIlJB");
    sb.append("RElPIikgewogICAgICAgICAgaWYgKHBheWxvYWRbbmFtZV0gPT0gZWwudmFsdWUpIHsKICAgICAgICAg");
    sb.append("ICAgZWwuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg");
    sb.append("IGVsLnZhbHVlID0gcGF5bG9hZFtuYW1lXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmICgi");
    sb.append("Y2hpbGRyZW4iIGluIGVsKSB7CiAgICAgIHZhciBhcnIgPSBlbC5jaGlsZHJlbjsKICAgICAgdmFyIG4g");
    sb.append("PSBhcnIubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgIHZh");
    sb.append("ciBjaCA9IGVsLmNoaWxkcmVuW2tdOwogICAgICAgIGh5ZHJhdGVfZm9ybShjaCwgaW5wdXQpOwogICAg");
    sb.append("ICB9CiAgICB9CiAgfQoKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbjpjb3B5LWZvcm06JHRhcmdldC1p");
    sb.append("ZAogIHNlbGYuYUNGID0gZnVuY3Rpb24oZm9ybSwgdGFyZ2V0Rm9ybUlkKSB7CiAgICBmb3JtLmFkZEV2");
    sb.append("ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1");
    sb.append("bHQoKTsKICAgICAgdmFyIGlucHV0ID0gZ2V0X2Zvcm0oZm9ybSwge30pOwogICAgICB2YXIgdGFyZ2V0");
    sb.append("ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0Rm9ybUlkKTsKICAgICAgaWYgKHRhcmdldCkg");
    sb.append("ewogICAgICAgIGh5ZHJhdGVfZm9ybSh0YXJnZXQsIGlucHV0KTsKICAgICAgICBmaXJlX3N1Y2Nlc3Mo");
    sb.append("Zm9ybSkKICAgICAgfSBlbHNlIHsKICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgImZhaWxlZCB0byBm");
    sb.append("aW5kIGZvcm0gYnkgaWQgJyIgKyB0YXJnZXRGb3JtSWQgKyAiJyIpOwogICAgICB9CiAgICB9LCB0cnVl");
    sb.append("KTsKICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPXNlbmQ6JGNoYW5uZWwKICBzZWxmLmFTRCA9");
    sb.append("IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgY2hhbm5lbCwgbXNUb0RlYm91bmNlKSB7CiAgICAvLyBUT0RP");
    sb.append("OiBkbyBkZWJvdW5jZSBpZiA+IDAKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVu");
    sb.append("Y3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHBhc3N3b3Jk");
    sb.append("cyA9IHt9OwogICAgICB2YXIgbXNnID0gZ2V0X2Zvcm0oZm9ybSwgcGFzc3dvcmRzKTsKCiAgICAgIGlm");
    sb.append("IChldnQuc3VibWl0dGVyKSB7CiAgICAgICAgdmFyIHMgPSBldnQuc3VibWl0dGVyOwogICAgICAgIGlm");
    sb.append("IChzLm5hbWUgJiYgcy52YWx1ZSkgewogICAgICAgICAgaWYgKHMudmFsdWUgPT0gInRydWUiKSB7IHMu");
    sb.append("dmFsdWUgPSB0cnVlOyB9CiAgICAgICAgICBlbHNlIGlmIChzLnZhbHVlID09ICJmYWxzZSIpIHsgcy52");
    sb.append("YWx1ZSA9IGZhbHNlOyB9CiAgICAgICAgICBtc2dbcy5uYW1lXSA9IHMudmFsdWU7CiAgICAgICAgfQog");
    sb.append("ICAgICB9CgogICAgICB2YXIgYWZ0ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgY2hhbm5lbFRv");
    sb.append("VXNlID0gY2hhbm5lbDsKICAgICAgICBpZiAoY2hhbm5lbCA9PSAiX19kcyIpIHsKICAgICAgICAgIGNo");
    sb.append("YW5uZWxUb1VzZSA9IG1zZ1snX19jaGFubmVsJ107CiAgICAgICAgICBkZWxldGUgbXNnWydfX2NoYW5u");
    sb.append("ZWwnXTsKICAgICAgICB9CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5kKGNoYW5u");
    sb.append("ZWxUb1VzZSwgbXNnLCB7CiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoLyogcGF5bG9hZCAqLykg");
    sb.append("ewogICAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgICB9LAogICAgICAgICAgZmFp");
    sb.append("bHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIlNl");
    sb.append("bmQgZmFpbGVkOiIgKyByZWFzb24pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwoKICAg");
    sb.append("ICAgdmFyIHBvc3RQYXNzd29yZCA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICgnbmV3X3Bhc3N3b3Jk");
    sb.append("JyBpbiBwYXNzd29yZHMpIHsKICAgICAgICAgIGlmICghKCdjb25maXJtLW5ld19wYXNzd29yZCcgaW4g");
    sb.append("cGFzc3dvcmRzKSB8fCBwYXNzd29yZHNbJ25ld19wYXNzd29yZCddID09IHBhc3N3b3Jkc1snY29uZmly");
    sb.append("bS1uZXdfcGFzc3dvcmQnXSkgewogICAgICAgICAgICBjb25uZWN0aW9uLkRvY3VtZW50c0hhc2hQYXNz");
    sb.append("d29yZChwYXNzd29yZHNbJ25ld19wYXNzd29yZCddLCB7CiAgICAgICAgICAgICAgc3VjY2VzczogZnVu");
    sb.append("Y3Rpb24gKGhhc2hlZF9wdykgewogICAgICAgICAgICAgICAgbXNnWyduZXdfcGFzc3dvcmQnXSA9IGhh");
    sb.append("c2hlZF9wdy5wYXNzd29yZEhhc2g7CiAgICAgICAgICAgICAgICBhZnRlcigpOwogICAgICAgICAgICAg");
    sb.append("IH0sCiAgICAgICAgICAgICAgZmFpbGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmaXJl");
    sb.append("X2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0byBoYXNoIHBhc3N3b3JkIik7CiAgICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgICB9KTsKCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmaXJlX2ZhaWx1cmUo");
    sb.append("Zm9ybSwgIlBhc3N3b3JkcyBtaXNtYXRjaCBmb3IgbmV3IHBhc3N3b3JkLiIpOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhZnRlcigpOwogICAgICAgIH0KICAgICAgfQoKICAgICAg");
    sb.append("aWYgKCdwYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB7CiAgICAgICAgaWYgKCEoJ2NvbmZpcm0tcGFzc3dv");
    sb.append("cmQnIGluIHBhc3N3b3JkcykgfHwgcGFzc3dvcmRzWydwYXNzd29yZCddID09IHBhc3N3b3Jkc1snY29u");
    sb.append("ZmlybS1wYXNzd29yZCddKSB7CiAgICAgICAgICBjb25uZWN0aW9uLkRvY3VtZW50c0hhc2hQYXNzd29y");
    sb.append("ZChwYXNzd29yZHNbJ3Bhc3N3b3JkJ10sIHsKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGhh");
    sb.append("c2hlZF9wdykgewogICAgICAgICAgICAgIG1zZ1sncGFzc3dvcmQnXSA9IGhhc2hlZF9wdy5wYXNzd29y");
    sb.append("ZEhhc2g7CiAgICAgICAgICAgICAgcG9zdFBhc3N3b3JkKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAg");
    sb.append("ICAgIGZhaWxlZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAi");
    sb.append("RmFpbGVkIHRvIGhhc2ggcGFzc3dvcmQiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAg");
    sb.append("ICAgfSBlbHNlIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiUGFzc3dvcmRzIG1pc21hdGNo");
    sb.append("Iik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHBvc3RQYXNzd29yZCgpOwogICAgICB9");
    sb.append("CiAgICB9LCB0cnVlKTsKICB9OwogIC8vIDx0b2RvdGFzaz5kZXNjcmlwdGlvbjwvdG9kb3Rhc2s+CiAg");
    sb.append("c2VsZi5UQVNLID0gZnVuY3Rpb24ocGRvbSwgaWQsIHNlY3Rpb24sIGRlc2NyaXB0aW9uKSB7CiAgICB2");
    sb.append("YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgZWxlbWVudC5pbm5l");
    sb.append("ckhUTUwgPSAiJiM5NzQ0OyAiICsgZGVzY3JpcHRpb24gKyAiICggIiArIHNlY3Rpb24gKyAiKSA8YnIg");
    sb.append("Lz4iOwogICAgcGRvbS5hcHBlbmRDaGlsZChlbGVtZW50KTsKICB9OwogIC8vIFJVTlRJTUU6IHByZS1j");
    sb.append("b21wcmVzc2lvbiBmb3Igc2V0dGluZyBhbiBhdHRyaWJ1dGUKICAvLyAiZC5zZXRBdHRyaWJ1dGUoYSx2");
    sb.append("KTsiIC0tPgogIC8vICQuU0EoZCxhLHYpOyIKICBzZWxmLlNBID0gZnVuY3Rpb24oZG9tLCBhdHRyLCB2");
    sb.append("YWx1ZSkgewogICAgZG9tLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7CiAgfTsKICBzZWxmLlNJSCA9");
    sb.append("IGZ1bmN0aW9uKGRvbSwgaHRtbCkgewogICAgZG9tLmlubmVySFRNTCA9IGh0bWw7CiAgfTsKICAvLyBS");
    sb.append("VU5USU1FOiBzZXQgdGhlIGxhYmVsIG9mIGFuIG9wdGlvbgogIHNlbGYuU0wgPSBmdW5jdGlvbihkb20s");
    sb.append("IHZhbHVlKSB7CiAgICBkb20ubGFiZWwgPSB2YWx1ZTsKICAgIGRvbS5pbm5lclRleHQgPSB2YWx1ZTsK");
    sb.append("ICB9OwoKICAvLyBmb3Igc2VsZWN0cwogIC8vIGQudmFsdWU9JHZhbHVlOwogIC8vICQuU1YoZCwkdmFs");
    sb.append("dWUpOwogIHNlbGYuU1YgPSBmdW5jdGlvbihkb20sIHZhbHVlKSB7CiAgICB2YXIgcHJpb3IgPSBkb20u");
    sb.append("dmFsdWU7CiAgICBkb20udmFsdWUgPSB2YWx1ZTsKICAgIGRvbS5yeHZhbHVlID0gdmFsdWU7CiAgICBp");
    sb.append("ZiAocHJpb3IgIT0gdmFsdWUpIHsKICAgICAgZG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJmb3Jj");
    sb.append("ZWQiKSk7CiAgICB9CiAgfTsKICBzZWxmLkZWID0gZnVuY3Rpb24oZG9tLCBmaWVsZCwgdmFsdWUpIHsK");
    sb.append("ICAgIHZhciBwcmlvciA9IGRvbVtmaWVsZF07CiAgICBkb21bZmllbGRdID0gdmFsdWU7CiAgICBpZiAo");
    sb.append("cHJpb3IgIT0gdmFsdWUpIHsKICAgICAgZG9tLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJmb3JjZWQi");
    sb.append("KSk7CiAgICB9CiAgfTsKICBzZWxmLm1lcmdlR290byA9IGZ1bmN0aW9uKGhyZWYsIHN0YXRlKSB7CiAg");
    sb.append("ICB2YXIgcGFydHMgPSAoaHJlZi5zdGFydHNXaXRoKCIvIikgPyBocmVmLnN1YnN0cmluZygxKSA6IGhy");
    sb.append("ZWYpLnNwbGl0KCIvIik7CiAgICB2YXIgbWVyZ2VJbml0ID0ge307CiAgICBpZiAocm91dGUocGFydHMs");
    sb.append("IDAsIHJvdXRlciwgbWVyZ2VJbml0KSkgewogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKG1lcmdl");
    sb.append("SW5pdCk7CiAgICB9CiAgfTsKICAvLyBSVU5USU1FIHwgPC4uLiBocmVmPSIiIC4uLj4KICBzZWxmLkhS");
    sb.append("RUYgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgaHJlZiwgbWVyZ2UpIHsKICAgIGRvbS5zZXRBdHRyaWJ1");
    sb.append("dGUoImhyZWYiLCBmaXhIcmVmKGhyZWYpKTsKICAgIGRvbS5vbmNsaWNrID0gZnVuY3Rpb24gKGV2dCkg");
    sb.append("ewogICAgICB2YXIgdHJpbUhyZWYgPSBocmVmOwogICAgICBpZiAodHJpbUhyZWYuc3RhcnRzV2l0aCgi");
    sb.append("LyIpKSB7CiAgICAgICAgdHJpbUhyZWYgPSB0cmltSHJlZi5zdWJzdHJpbmcoMSk7CiAgICAgIH0KICAg");
    sb.append("ICAgdmFyIGtRID0gdHJpbUhyZWYuaW5kZXhPZignPycpOwogICAgICBpZiAoa1EgPiAwKSB7CiAgICAg");
    sb.append("ICAgdHJpbUhyZWYgPSB0cmltSHJlZi5zdWJzdHJpbmcoMCwga1EpOwogICAgICB9CiAgICAgIHZhciBw");
    sb.append("YXJ0cyA9IHRyaW1IcmVmLnNwbGl0KCIvIik7CiAgICAgIHZhciBtZXJnZUluaXQgPSB7fTsKICAgICAg");
    sb.append("aWYgKHJvdXRlKHBhcnRzLCAwLCByb3V0ZXIsIG1lcmdlSW5pdCkpIHsKICAgICAgICBldnQucHJldmVu");
    sb.append("dERlZmF1bHQoKTsKICAgICAgICBpZiAobWVyZ2UpIHsKICAgICAgICAgIHN0YXRlLnZpZXcudHJlZS51");
    sb.append("cGRhdGUobWVyZ2VJbml0KTsKICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7bWVyZ2U6");
    sb.append("dHJ1ZX0sICIiLCBmaXhIcmVmKGhyZWYpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2VsZi5n");
    sb.append("b3RvKGhyZWYsIHRydWUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAg");
    sb.append("ICAgcmV0dXJuIHRydWU7CiAgICB9OwogIH07CiAgLy8gUlVOVElNRSB8IDwuLi4gY2xhc3M9IiIgLi4u");
    sb.append("PgogIHNlbGYuQUMgPSBmdW5jdGlvbiAoZG9tLCB2YWx1ZSkgewogICAgZG9tLnNldEF0dHJpYnV0ZSgi");
    sb.append("Y2xhc3MiLCB2YWx1ZSk7CiAgfTsKICBzZWxmLkFDTEFTUyA9IGZ1bmN0aW9uIChkb20sIHZhbHVlKSB7");
    sb.append("IC8vIHRvIGRlcHJlY2F0ZSBpbiB0aGUgZnV0dXJlCiAgICBkb20uc2V0QXR0cmlidXRlKCJjbGFzcyIs");
    sb.append("IHZhbHVlKTsKICB9OwogIC8vIFJVTlRJTUUgfCA8Li4uIHNyYz0iIiAuLi4+CiAgc2VsZi5BU1JDID0g");
    sb.append("ZnVuY3Rpb24gKGRvbSwgdmFsdWUpIHsKICAgIGRvbS5zZXRBdHRyaWJ1dGUoInNyYyIsIHZhbHVlKTsK");
    sb.append("ICB9OwoKICBzZWxmLmZpbmRFbGVtZW50QnlJZEluVW5ib3VuZERvbSA9IGZ1bmN0aW9uKGRvbSwgaWQp");
    sb.append("IHsKICAgIHZhciBmZWJpZCA9IGZ1bmN0aW9uIChkLCBpZCkgewogICAgICBpZiAoJ2lkJyBpbiBkKSB7");
    sb.append("CiAgICAgICAgaWYgKGQuaWQgPT0gaWQpIHsKICAgICAgICAgIHJldHVybiBkOwogICAgICAgIH0KICAg");
    sb.append("ICAgfQogICAgICBpZiAoJ2NoaWxkcmVuJyBpbiBkKSB7CiAgICAgICAgdmFyIGFyciA9IGQuY2hpbGRy");
    sb.append("ZW47CiAgICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwg");
    sb.append("bjsgaysrKSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gZmViaWQoYXJyW2tdLCBpZCk7CiAgICAgICAg");
    sb.append("ICBpZiAocmVzdWx0ICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfTsKICAgIHJldHVybiBm");
    sb.append("ZWJpZChkb20sIGlkKTsKICB9OwogIHNlbGYucG9sbEVsZW1lbnQgPSBmdW5jdGlvbihkb20sIHRpbWVv");
    sb.append("dXQsIHN1Y2Nlc3MsIGZhaWx1cmUpIHsKICAgIHZhciBhZG0gPSBmdW5jdGlvbiAoZG9tLCByZW1haW4p");
    sb.append("IHsKICAgICAgaWYgKHJlbWFpbiA8IDApIHsKICAgICAgICBmYWlsdXJlKCk7CiAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICB9CiAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAgICAgICBz");
    sb.append("dWNjZXNzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgICAgYWRtKGRvbSwgcmVtYWluIC0gMjUpOwogICAgICAgIH0sIDI1KTsKICAgICAg");
    sb.append("fQogICAgfTsKICAgIGFkbShkb20sIHRpbWVvdXQpOwogIH07CiAgdmFyIGxpYnNMb2FkZWQgPSB7fTsK");
    sb.append("ICBzZWxmLmxvYWRMaWJyYXJ5ID0gZnVuY3Rpb24obGliLCBjYWxsYmFjaykgewogICAgaWYgKGxpYiBp");
    sb.append("biBsaWJzTG9hZGVkKSB7CiAgICAgIGNhbGxiYWNrKGxpYnNMb2FkZWRbbGliXSk7CiAgICAgIHJldHVy");
    sb.append("bjsKICAgIH0KICAgIGxpYnNMb2FkZWRbbGliXSA9IGZhbHNlOwogICAgdmFyIHNjcmlwdCA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJyxs");
    sb.append("aWIpOwogICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICBsaWJzTG9hZGVkW2xpYl0g");
    sb.append("PSB0cnVlOwogICAgICBjYWxsYmFjayh0cnVlKTsKICAgIH07CiAgICBzY3JpcHQub25lcnJvciA9IGZ1");
    sb.append("bmN0aW9uKCkgewogICAgICBjYWxsYmFjayhmYWxzZSk7CiAgICB9OwogICAgZG9jdW1lbnQuaGVhZC5h");
    sb.append("cHBlbmRDaGlsZChzY3JpcHQpOwogIH07CiAgd2luZG93LnJ4aHRtbCA9IHNlbGY7CiAgcmV0dXJuIHNl");
    sb.append("bGY7Cn0pKCk7Cg==");
    return sb.toString();
  }
  public static final String TESTER = new String(Base64.getDecoder().decode(make_tester()), StandardCharsets.UTF_8);
  private static String make_tester() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIF9fZ3JhcGggPSB7fTsNCnZhciBfX3RvZG8gPSBbXTsNCnZhciBfX3N0YXRlID0gew0KICBleGVj");
    sb.append("dXRlX2Zvcm06IGZhbHNlLA0KICBmb3JtX2V4ZWN1dGluZzogIiIsDQogIGlkZ2VuOiAwDQp9Ow0KDQpm");
    sb.append("dW5jdGlvbiBfX2NyZWF0ZShuYW1lKSB7DQogIHJldHVybiB7bmFtZTogbmFtZSwgdmlzaXRlZDogZmFs");
    sb.append("c2UsIHRlc3RzOiB7fSwgbmVlZF9zbmFwc2hvdDogdHJ1ZSwgc3ViX25hbWU6ICIifTsNCn0NCg0KZnVu");
    sb.append("Y3Rpb24gX19nZXRDdXJyZW50TG9jYXRpb25BbmRJbmRleCgpIHsNCiAgdmFyIGN1cnJlbnQgPSB3aW5k");
    sb.append("b3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoOw0KICBpZiAoIShjdXJy");
    sb.append("ZW50IGluIF9fZ3JhcGgpKSB7DQogICAgX19ncmFwaFtjdXJyZW50XSA9IF9fY3JlYXRlKGN1cnJlbnQp");
    sb.append("Ow0KICB9DQogIGlmICghX19ncmFwaFtjdXJyZW50XS52aXNpdGVkKSB7DQogICAgX19ncmFwaFtjdXJy");
    sb.append("ZW50XS52aXNpdGVkID0gdHJ1ZTsNCiAgfQ0KDQogIHZhciBsaW5rcyA9IGRvY3VtZW50LmdldEVsZW1l");
    sb.append("bnRzQnlUYWdOYW1lKCJhIik7DQogIGZvciAodmFyIGsgPSAwOyBrIDwgbGlua3MubGVuZ3RoOyBrKysp");
    sb.append("IHsNCiAgICBpZiAoImhyZWYiIGluIGxpbmtzW2tdKSB7DQogICAgICB2YXIgbmV4dCA9IGxpbmtzW2td");
    sb.append("LmhyZWY7DQogICAgICBpZiAoIShuZXh0IGluIF9fZ3JhcGgpKSB7DQogICAgICAgIF9fZ3JhcGhbbmV4");
    sb.append("dF0gPSBfX2NyZWF0ZShuZXh0KTsNCiAgICAgICAgX190b2RvLnB1c2gobmV4dCk7DQogICAgICB9DQog");
    sb.append("ICAgfQ0KICB9DQoNCiAgcmV0dXJuIF9fZ3JhcGhbY3VycmVudF07DQp9DQoNCmZ1bmN0aW9uIF9faW5k");
    sb.append("ZXhDdXJyZW50KGN1cnJlbnQpIHsNCiAgdmFyIGNyZWF0ZWQgPSBbXTsNCiAgLy8gVE9ETzogbG9vayBm");
    sb.append("b3IgYWxsIHRoZSBlbGVtZW50cyB3aXRoIHRlc3Q6JG5hbWU6c2V0PQ0KICB2YXIgaW5kZXggPSBmdW5j");
    sb.append("dGlvbiAoZG9tKSB7DQogICAgZm9yIChjb25zdCBhdHRyIG9mIGRvbS5hdHRyaWJ1dGVzKSB7DQogICAg");
    sb.append("ICBpZiAoYXR0ci5uYW1lLnN0YXJ0c1dpdGgoInRlc3Q6IikpIHsNCiAgICAgICAgdmFyIHRlc3ROYW1l");
    sb.append("QW5kQ29tbWFuZCA9IGF0dHIubmFtZS5zdWJzdHJpbmcoNSk7DQogICAgICAgIHZhciBrQ29sb24gPSB0");
    sb.append("ZXN0TmFtZUFuZENvbW1hbmQuaW5kZXhPZigiOiIpOw0KICAgICAgICBpZiAoa0NvbG9uID4gMCkgew0K");
    sb.append("ICAgICAgICAgIHZhciB0ZXN0bmFtZSA9IHRlc3ROYW1lQW5kQ29tbWFuZC5zdWJzdHJpbmcoMCwga0Nv");
    sb.append("bG9uKTsNCiAgICAgICAgICB2YXIgY29tbWFuZCA9IHRlc3ROYW1lQW5kQ29tbWFuZC5zdWJzdHJpbmco");
    sb.append("a0NvbG9uICsgMSk7DQogICAgICAgICAgdmFyIHRlc3Q7DQogICAgICAgICAgaWYgKCEodGVzdG5hbWUg");
    sb.append("aW4gY3VycmVudC50ZXN0cykpIHsNCiAgICAgICAgICAgIHRlc3QgPSB7bmFtZTogdGVzdG5hbWUsIHNl");
    sb.append("dHM6IHt9LCBjbGljazogbnVsbCwgcmVhZHk6IGZhbHNlLCByYW46IGZhbHNlfTsNCiAgICAgICAgICAg");
    sb.append("IGN1cnJlbnQudGVzdHNbdGVzdG5hbWVdID0gdGVzdDsNCiAgICAgICAgICAgIGNyZWF0ZWQucHVzaCh0");
    sb.append("ZXN0KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGVzdCA9IGN1cnJlbnQudGVzdHNb");
    sb.append("dGVzdG5hbWVdOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIXRlc3QucmVhZHkpIHsNCiAgICAg");
    sb.append("ICAgICAgIGlmIChjb21tYW5kID09ICJjbGljayIpIHsNCiAgICAgICAgICAgICAgdGVzdC5jbGljayA9");
    sb.append("IGRvbTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5zdGFydHNXaXRoKCJzZXQ6IikpIHsN");
    sb.append("CiAgICAgICAgICAgICAgdGVzdC5zZXRzW2NvbW1hbmQuc3Vic3RyaW5nKDQpXSA9IHtlbGVtZW50OiBk");
    sb.append("b20sIHZhbHVlOiBhdHRyLnZhbHVlfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAg");
    sb.append("IH0NCiAgICAgIH0NCiAgICB9DQogICAgaWYgKCJjaGlsZHJlbiIgaW4gZG9tKSB7DQogICAgICB2YXIg");
    sb.append("YXJyID0gZG9tLmNoaWxkcmVuOw0KICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOw0KICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBuOyBrKyspIHsNCiAgICAgICAgaW5kZXgoZG9tLmNoaWxkcmVuW2tdKTsNCiAg");
    sb.append("ICAgIH0NCiAgICB9DQogIH07DQogIGluZGV4KGRvY3VtZW50LmJvZHkpOw0KDQogIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgY3JlYXRlZC5sZW5ndGg7IGsrKykgew0KICAgIGNyZWF0ZWRba10ucmVhZHkgPSB0cnVl");
    sb.append("Ow0KICB9DQogIHJldHVybiBudWxsOw0KfQ0KDQpmdW5jdGlvbiBfX3N0YXJ0VGVzdEFnZW50KCkgew0K");
    sb.append("ICBjb25zb2xlLmxvZygiVGVzdCBBZ2VudCBTdGFydGluZyBVcCIpOw0KICByZXR1cm4gdHJ1ZTsNCn0N");
    sb.append("Cg0KZnVuY3Rpb24gX19wb2xsVGVzdEFnZW50KCkgew0KICB2YXIgJCA9IHdpbmRvdy5yeGh0bWw7DQog");
    sb.append("IGlmICgkLl9pbmZsaWdodCA9PSAwKSB7DQogICAgdmFyIGN1cnJlbnQgPSBfX2dldEN1cnJlbnRMb2Nh");
    sb.append("dGlvbkFuZEluZGV4KCk7DQoNCiAgICBpZiAoY3VycmVudC5uZWVkX3NuYXBzaG90KSB7DQogICAgICBj");
    sb.append("dXJyZW50Lm5lZWRfc25hcHNob3QgPSBmYWxzZTsNCiAgICAgIHJldHVybiAic25hcHNob3Q6IiArIGN1");
    sb.append("cnJlbnQubmFtZSArIGN1cnJlbnQuc3ViX25hbWU7DQogICAgfQ0KDQogICAgaWYgKF9fdG9kby5sZW5n");
    sb.append("dGggPiAwKSB7DQogICAgICB2YXIgdXJpID0gX190b2RvLnBvcCgpOw0KICAgICAgY29uc29sZS5sb2co");
    sb.append("ImdvaW5nIHRvOiIgKyB1cmkpOw0KICAgICAgJC5nb3RvKHVyaSk7DQogICAgICByZXR1cm4gIndhaXQ6");
    sb.append("MjUiOw0KICAgIH0NCg0KICAgIC8vIGluZGV4IHRoZSBjdXJyZW50DQogICAgX19pbmRleEN1cnJlbnQo");
    sb.append("Y3VycmVudCk7DQoNCiAgICBmb3IgKHZhciB0ZXN0bmFtZSBpbiBjdXJyZW50LnRlc3RzKSB7DQogICAg");
    sb.append("ICB2YXIgdGVzdCA9IGN1cnJlbnQudGVzdHNbdGVzdG5hbWVdOw0KICAgICAgaWYgKCF0ZXN0LnJhbikg");
    sb.append("ew0KICAgICAgICB0ZXN0LnJhbiA9IHRydWU7DQogICAgICAgIGlmICh0ZXN0LmNsaWNrKSB7DQogICAg");
    sb.append("ICAgICAgaWYgKCF0ZXN0LmNsaWNrLmlkKSB7DQogICAgICAgICAgICBfX3N0YXRlLmlkZ2VuKys7DQog");
    sb.append("ICAgICAgICAgICB0ZXN0LmNsaWNrLmlkID0gIl9fYXV0b19jbGlja19pZF8iICsgX19zdGF0ZS5pZGdl");
    sb.append("bjsNCiAgICAgICAgICB9DQogICAgICAgICAgY3VycmVudC5uZWVkX3NuYXBzaG90ID0gdHJ1ZTsNCiAg");
    sb.append("ICAgICAgICBjdXJyZW50LnN1Yl9uYW1lID0gIiMjIiArIHRlc3RuYW1lOw0KICAgICAgICAgIHJldHVy");
    sb.append("biAiY2xpY2s6IiArIHRlc3QuY2xpY2suaWQ7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAg");
    sb.append("cmV0dXJuICJkb25lIjsNCiAgfSBlbHNlIHsNCiAgICBjb25zb2xlLmxvZygiKGluc3RhYmxlKSIpOw0K");
    sb.append("ICB9DQogIHJldHVybiAid2FpdDo1MCI7DQp9");
    return sb.toString();
  }
  public static final String CONNECTION = new String(Base64.getDecoder().decode(make_connection()), StandardCharsets.UTF_8);
  private static String make_connection() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoKICogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG91dGxp");
    sb.append("bmVkIGluIHRoZQogKiBmaWxlICdMSUNFTlNFJyAoaXQncyBkdWFsIGxpY2Vuc2VkKSBsb2NhdGVkIGlu");
    sb.append("IHRoZSByb290IGRpcmVjdG9yeQogKiBuZWFyIHRoZSBSRUFETUUubWQgd2hpY2ggeW91IHNob3VsZCBh");
    sb.append("bHNvIHJlYWQuIEZvciBtb3JlIGluZm9ybWF0aW9uCiAqIGFib3V0IHRoZSBwcm9qZWN0IHdoaWNoIG93");
    sb.append("bnMgdGhpcyBmaWxlLCBzZWUgaHR0cHM6Ly93d3cuYWRhbWEtcGxhdGZvcm0uY29tLyAuCiAqCiAqIChj");
    sb.append("KSAyMDIxIC0gMjAyMyBieSBBZGFtYSBQbGF0Zm9ybSBJbml0aWF0aXZlLCBMTEMKICovCi8qKiBUaGUg");
    sb.append("V2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gQWRhbWEgKi8KY2xhc3MgV2ViU29ja2V0QWRhbWFDb25uZWN0");
    sb.append("aW9uIHsKICBjb25zdHJ1Y3Rvcihob3N0KSB7CiAgICAvLyBvbiBmYWlsdXJlLCB3ZSBiYWNrLW9mZiB3");
    sb.append("aXRoIHRoaXMgbWlsbGlzZWNvbmRzCiAgICB0aGlzLmJhY2tvZmYgPSAxOwogICAgLy8gdGhlIGhvc3Qg");
    sb.append("d2UgYXJlIGNvbm5lY3RpbmcgdG8KICAgIHRoaXMuaG9zdCA9IGhvc3Q7CiAgICAvLyBmb3JtIHRoZSBV");
    sb.append("Ukwgb2YgdGhlIGhvc3QKICAgIHRoaXMudXJsID0gIndzczovLyIgKyBob3N0ICsgIi9+cyI7CiAgICAv");
    sb.append("LyBpcyB0aGUgY29ubmVjdGlvbiBjb25uZWN0ZWQKICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAg");
    sb.append("ICAvLyBpcyB0aGUgY29ubmVjdGlvbiBkZWFkCiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIC8vIHRo");
    sb.append("ZSBtYXhpbXVtIHBlcmlvZCBvZiB0aW1lIGJldHdlZW4gd2FpdGluZyBmb3IgYSByZXRyeQogICAgdGhp");
    sb.append("cy5tYXhpbXVtX2JhY2tvZmYgPSA1MDAwOwogICAgLy8gd2hlbiB0aGUgY29ubmVjdGlvbiB0aW1lcyBv");
    sb.append("dXQgZnJvbSB0aGUgc2VydmVyLCBob3cgbG9uZyB0byB3YWl0IHVudGlsIHdlIHJlY29ubmVjdAogICAg");
    sb.append("dGhpcy5yZXNldF9iYWNrb2ZmID0gMTAwMDsKICAgIC8vIHRoZSBhY3R1YWwgd2Vic29ja2V0CiAgICB0");
    sb.append("aGlzLnNvY2tldCA9IG51bGw7CiAgICAvLyB3aGF0IGhhcHBlbnMgd2hlbiB0aGUgc3RhdHVzIGNoYW5n");
    sb.append("ZXMKICAgIHRoaXMub25zdGF0dXNjaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7IH07CiAgICAvLyB3");
    sb.append("aGF0IGhhcHBlbnMgd2hlbiB3ZSBsZWFybiB0aGUgbGF0ZW5jeQogICAgdGhpcy5vbnBpbmcgPSBmdW5j");
    sb.append("dGlvbiAoc2Vjb25kcywgbGF0ZW5jeSkgeyB9OwogICAgLy8gaXMgYSByZXRyeSBzY2hlZHVsZWQKICAg");
    sb.append("IHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICAvLyBjYWxsYmFjayBtYXBwaW5nCiAgICB0aGlzLmNh");
    sb.append("bGxiYWNrcyA9IG5ldyBNYXAoKTsKICAgIC8vIGlkIGdlbmVyYXRpb24KICAgIHRoaXMubmV4dElkID0g");
    sb.append("MDsKICAgIC8vIGV2ZW50cyB0byBleGVjdXRlIG9uIHJlY29ubmVjdAogICAgdGhpcy5vbnJlY29ubmVj");
    sb.append("dCA9IG5ldyBNYXAoKTsKICAgIC8vIHByb3RvY29sIGZvciBtZXRyaWNzCiAgICB0aGlzLnByb3RvY29s");
    sb.append("ID0gbG9jYXRpb24ucHJvdG9jb2w7CiAgfQoKICAvKiogc3RvcCB0aGUgY29ubmVjdGlvbiAqLwogIHN0");
    sb.append("b3AoKSB7CiAgICB0aGlzLmRlYWQgPSB0cnVlOwogICAgaWYgKHRoaXMuc29ja2V0ICE9PSBudWxsKSB7");
    sb.append("CiAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7CiAgICB9CiAgfQoKICBidW1wKGJtKSB7CiAgICB0cnkg");
    sb.append("ewogICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAub3Blbigi");
    sb.append("UFVUIiwgdGhpcy5wcm90b2NvbCArICIvLyIgKyB0aGlzLmhvc3QgKyAiL35ibS8iICsgYm0sIHRydWUp");
    sb.append("OwogICAgICB4aHR0cC5zZW5kKCk7CiAgICB9IGNhdGNoIChleCkgewogICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICB9CiAgfQoKICBsb2cobmFtZSwgYm9keSkgewogICAgdHJ5IHsKICAgICAgdmFyIHhodHRwID0g");
    sb.append("bmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIHhodHRwLm9wZW4oIlBVVCIsIHRoaXMucHJvdG9jb2wg");
    sb.append("KyAiLy8iICsgdGhpcy5ob3N0ICsgIi9+bGcvIiArIG5hbWUsIHRydWUpOwogICAgICB4aHR0cC5zZW5k");
    sb.append("KGJvZHkpOwogICAgfSBjYXRjaCAoZXgpIHsKICAgICAgLy8gZG9uJ3QgY2FyZQogICAgfQogIH0KCiAg");
    sb.append("LyoqIHByaXZhdGU6IHJldHJ5IHRoZSBjb25uZWN0aW9uICovCiAgX3JldHJ5KCkgewogICAgLy8gbnVs");
    sb.append("bCBvdXQgdGhlIHNvY2tldAogICAgdGhpcy5zb2NrZXQgPSBudWxsOwogICAgLy8gaWYgd2UgYXJlIGNv");
    sb.append("bm5lY3RlZCwgdHJhbnNpdGlvbiB0aGUgc3RhdHVzCiAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHsKICAg");
    sb.append("ICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5vbnN0YXR1c2NoYW5nZShmYWxzZSk7");
    sb.append("CiAgICAgIHRoaXMuY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNiLCBpZCkgewogICAgICAgIGNi");
    sb.append("KHtmYWlsdXJlOjk5OX0pOwogICAgICB9KTsKICAgIH0KICAgIHRoaXMuY2FsbGJhY2tzLmNsZWFyKCk7");
    sb.append("CiAgICAvLyBpZiB3ZSBhcmUgZGVhZCwgdGhlbiBkb24ndCBhY3R1YWxseSByZXRyeQogICAgaWYgKHRo");
    sb.append("aXMuZGVhZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICAvLyBtYWtlIHN1cmUKICAgIGlmICghdGhp");
    sb.append("cy5zY2hlZHVsZWQpIHsKICAgICAgLy8gc2NoZWR1bGUgYSByZXRyeTsgZmlyc3QgY29tcHV0ZSBob3cg");
    sb.append("bG9uZyB0byB0YWtlCiAgICAgIC8vIGNvbXB1dGUgaG93IGxvbmcgd2UgbmVlZCB0byB3YWl0CiAgICAg");
    sb.append("IHZhciBoYWx2ZUFmdGVyU2NoZWR1bGUgPSBmYWxzZTsKICAgICAgdGhpcy5iYWNrb2ZmICs9IE1hdGgu");
    sb.append("cmFuZG9tKCkgKiB0aGlzLmJhY2tvZmY7CiAgICAgIGlmICh0aGlzLmJhY2tvZmYgPiB0aGlzLm1heGlt");
    sb.append("dW1fYmFja29mZikgewogICAgICAgIHRoaXMuYmFja29mZiA9IHRoaXMubWF4aW11bV9iYWNrb2ZmOwog");
    sb.append("ICAgICAgIGhhbHZlQWZ0ZXJTY2hlZHVsZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIC8vIHNjaGVkdWxl");
    sb.append("IGl0CiAgICAgIHRoaXMuc2NoZWR1bGVkID0gdHJ1ZTsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLnN0YXJ0KCk7CiAgICAgIH0sIHRo");
    sb.append("aXMuYmFja29mZik7CgogICAgICAvLyB3ZSBqdXN0IHNjaGVkdWxlZCBpdCBmb3IgdGhlIG1heGltdW0g");
    sb.append("YmFja29mZiB0aW1lLCBsZXQncyByZWR1Y2UgdGhlIGJhY2tvZmYgc28gdGhlIG5leHQgb25lIHdpbGwg");
    sb.append("aGF2ZSBzb21lIGppdHRlcgogICAgICBpZiAoaGFsdmVBZnRlclNjaGVkdWxlKSB7CiAgICAgICAgdGhp");
    sb.append("cy5iYWNrb2ZmIC89IDIuMDsKICAgICAgfQogICAgfQogIH0KCiAgLyoqIHN0YXJ0IHRoZSBjb25uZWN0");
    sb.append("aW9uICovCiAgc3RhcnQoKSB7CiAgICAvLyByZXNldCB0aGUgc3RhdGUKICAgIHZhciBzZWxmID0gdGhp");
    sb.append("czsKICAgIHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIHRo");
    sb.append("aXMuaGFzX2hhZF9waW5nID0gZmFsc2U7CiAgICB0aGlzLmxhc3RfcGluZyA9IDA7CiAgICB0aGlzLnBp");
    sb.append("bmdfZmFpbHVyZXMgPSAwOwogICAgLy8gY3JlYXRlIHRoZSBzb2NrZXQgYW5kIGJpbmQgZXZlbnQgaGFu");
    sb.append("ZGxlcnMKICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCh0aGlzLnVybCk7CiAgICB0aGlzLnNv");
    sb.append("Y2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIHJlc3VsdCA9IEpTT04u");
    sb.append("cGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgIC8vIGEgbWVzc2FnZSBhcnJpdmVkLCBpcyBpdCBhIGNvbm5l");
    sb.append("Y3Rpb24gc2lnbmFsCiAgICAgIGlmICgicGluZyIgaW4gcmVzdWx0KSB7CiAgICAgICAgc2VsZi5vbnBp");
    sb.append("bmcocmVzdWx0LnBpbmcsIHJlc3VsdC5sYXRlbmN5KTsKICAgICAgICByZXN1bHQucG9uZyA9IG5ldyBE");
    sb.append("YXRlKCkuZ2V0VGltZSgpIC8gMTAwMC4wOwogICAgICAgIHNlbGYuc29ja2V0LnNlbmQoSlNPTi5zdHJp");
    sb.append("bmdpZnkocmVzdWx0KSk7CiAgICAgICAgc2VsZi5sYXN0X3BpbmcgPSBuZXcgRGF0ZSgpLmdldFRpbWUo");
    sb.append("KTsKICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9");
    sb.append("CiAgICAgIGlmICgic3RhdHVzIiBpbiByZXN1bHQpIHsKICAgICAgICAvLyBoZXksIGFyZSB3ZSBjb25u");
    sb.append("ZWN0ZWQ/CiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgIT0gImNvbm5lY3RlZCIpIHsKICAgICAgICAg");
    sb.append("IC8vIG5vcGUsIE9LLCBsZXQncyBtYWtlIHRoaXMgYSBkZWFkIHNvY2tldAogICAgICAgICAgc2VsZi5z");
    sb.append("b2NrZXQuY2xvc2UoKTsKICAgICAgICAgIHNlbGYuc29ja2V0ID0gbnVsbDsKICAgICAgICAgIHNlbGYu");
    sb.append("YmFja29mZiA9IHNlbGYucmVzZXRfYmFja29mZjsKICAgICAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIHRlbGwgdGhlIGNsaWVudCB0aGF0IHdlIGFy");
    sb.append("ZSBnb29kIQogICAgICAgIHNlbGYuYmFja29mZiA9IDE7CiAgICAgICAgc2VsZi5jb25uZWN0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIHNlbGYub25zdGF0dXNjaGFuZ2UodHJ1ZSk7CiAgICAgICAgc2VsZi5fcmVjb25u");
    sb.append("ZWN0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIHRoZSByZXN1bHQgd2FzIGEgZmFp");
    sb.append("bHVyZS4uLgogICAgICBpZiAoImZhaWx1cmUiIGluIHJlc3VsdCkgewogICAgICAgIC8vIGZpbmQgdGhl");
    sb.append("IGNhbGxiYWNrLCB0aGVuIGludm9rZSBpdCAoYW5kIGNsZWFuIHVwKQogICAgICAgIGlmIChzZWxmLmNh");
    sb.append("bGxiYWNrcy5oYXMocmVzdWx0LmZhaWx1cmUpKSB7CiAgICAgICAgICB2YXIgY2IgPSBzZWxmLmNhbGxi");
    sb.append("YWNrcy5nZXQocmVzdWx0LmZhaWx1cmUpOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHNl");
    sb.append("bGYuY2FsbGJhY2tzLmRlbGV0ZShyZXN1bHQuZmFpbHVyZSk7CiAgICAgICAgICAgIGNiKHJlc3VsdCk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCJkZWxpdmVyIiBpbiByZXN1bHQp");
    sb.append("IHsKICAgICAgICAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWNjZXNzLCBzbyBsZXQncyBmaW5kIHRo");
    sb.append("ZSBjYWxsYmFjaywgYW5kIGlmIG5lZWQgYmUgY2xlYW4gdXAKICAgICAgICBpZiAoc2VsZi5jYWxsYmFj");
    sb.append("a3MuaGFzKHJlc3VsdC5kZWxpdmVyKSkgewogICAgICAgICAgdmFyIGNiID0gc2VsZi5jYWxsYmFja3Mu");
    sb.append("Z2V0KHJlc3VsdC5kZWxpdmVyKTsKICAgICAgICAgIGlmIChjYikgewogICAgICAgICAgICBpZiAocmVz");
    sb.append("dWx0LmRvbmUpIHsKICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrcy5kZWxldGUocmVzdWx0LmRlbGl2");
    sb.append("ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNiKHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfQogICAgICB9CiAgICB9OwogICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChldmVu");
    sb.append("dCkgewogICAgICBzZWxmLmJ1bXAoInIiKTsKICAgICAgLy8gbGV0J3MgcmV0cnkuLi4gb3Igc2hvdWxk");
    sb.append("IHdlIG5vdAogICAgICBzZWxmLl9yZXRyeSgpOwogICAgfTsKICAgIHRoaXMuc29ja2V0Lm9uZXJyb3Ig");
    sb.append("PSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgc2VsZi5idW1wKCJyIik7CiAgICAgIC8vIHNvbWV0aGlu");
    sb.append("ZyBiYWQgaGFwcGVuZWQsIGxldCdzIHJldHJ5CiAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICB9OwoKICB9");
    sb.append("CgogIGtlZXBhbGl2ZSgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHdpbmRvdy5zZXRJbnRlcnZh");
    sb.append("bChmdW5jdGlvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc2VsZi5oYXNfaGFkX3BpbmcgJiYg");
    sb.append("c2VsZi5zb2NrZXQpIHsKICAgICAgICAgIHZhciB0aW1lU2luY2VMYXN0UGluZyA9IG5ldyBEYXRlKCku");
    sb.append("Z2V0VGltZSgpIC0gc2VsZi5sYXN0X3Bpbmc7CiAgICAgICAgICAvLyBUT0RPOiBicm9hZGNhc3QgYSBs");
    sb.append("YXRlbmN5CiAgICAgICAgICBpZiAodGltZVNpbmNlTGFzdFBpbmcgPiAyNTAwKSB7CiAgICAgICAgICAg");
    sb.append("IHNlbGYucGluZ19mYWlsdXJlcysrOwogICAgICAgICAgICBpZiAoc2VsZi5waW5nX2ZhaWx1cmVzID49");
    sb.append("IDMpIHsKICAgICAgICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IGZhbHNlOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbigpIHt9OwogICAgICAgICAgICAgIHNlbGYuc29j");
    sb.append("a2V0LmNsb3NlKCk7CiAgICAgICAgICAgICAgc2VsZi5zb2NrZXQgPSBudWxsOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuX3JldHJ5KCk7CiAgICAgICAgICAgICAgc2VsZi5idW1wKCJkIik7CiAgICAgICAgICAgICAg");
    sb.append("Y29uc29sZS5lcnJvcigiaGFkIHRvIGZvcmNlIGEgZGlzY29ubmVjdCIpOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnBpbmdfZmFpbHVyZXMgPSAwOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7");
    sb.append("CiAgICAgIH0KICAgIH0sIDEyNTApOwogIH0KCiAgLyoqIHByaXZhdGU6IHNlbmQgYSByYXcgbWVzc2Fn");
    sb.append("ZSAqLwogIF93cml0ZShyZXF1ZXN0LCBjYWxsYmFjaykgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkg");
    sb.append("ewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNrcy5zZXQocmVxdWVzdC5p");
    sb.append("ZCwgY2FsbGJhY2spOwogICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7");
    sb.append("CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKiBhcGk6IHdhaXQgZm9yIGEgY29ubmVjdGlvbiAqLwog");
    sb.append("IGFzeW5jIHdhaXRfY29ubmVjdGVkKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHJl");
    sb.append("dHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZ29vZCkgewogICAgICAgIGdvb2QodHJ1ZSk7CiAgICAg");
    sb.append("IH0pOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcHJpb3IgPSB0");
    sb.append("aGlzLm9uc3RhdHVzY2hhbmdlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGdvb2Qp");
    sb.append("IHsKICAgICAgICBzZWxmLm9uc3RhdHVzY2hhbmdlID0gZnVuY3Rpb24gKHN0YXR1cykgewogICAgICAg");
    sb.append("ICAgcHJpb3Ioc3RhdHVzKTsKICAgICAgICAgIGlmIChzdGF0dXMpIHsKICAgICAgICAgICAgZ29vZCh0");
    sb.append("cnVlKTsKICAgICAgICAgICAgc2VsZi5vbnN0YXR1c2NoYW5nZSA9IHByaW9yOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0KCiAgX3JlY29ubmVjdCgpIHsKICAgIHRoaXMub25y");
    sb.append("ZWNvbm5lY3QuZm9yRWFjaChmdW5jdGlvbiAoc20sIGlkKSB7CiAgICAgIHNtLl9fcmV0cnkoKTsKICAg");
    sb.append("IH0pOwogIH0KCiAgLyoqIGV4ZWN1dGUgYSByZXF1ZXNlIHJlc3BvbnNlIHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfcnIoc20pIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHNtLmZpcnN0ID0gdHJ1ZTsKICAgIGlmICghc2VsZi5fd3JpdGUoc20ucmVxdWVzdCwgZnVuY3Rpb24g");
    sb.append("KHJlc3BvbnNlKSB7CiAgICAgIGlmIChzbS5maXJzdCkgewogICAgICAgIHNtLmZpcnN0ID0gZmFsc2U7");
    sb.append("CiAgICAgICAgaWYgKCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgICAgaWYgKCdmYWlsdXJl");
    sb.append("JyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLmZhaWx1cmUocmVzcG9u");
    sb.append("c2UucmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCdzdWNj");
    sb.append("ZXNzJyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLnN1Y2Nlc3MocmVz");
    sb.append("cG9uc2UucmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBzZWxmLm9u");
    sb.append("cmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICB9KSkgewogICAgICBzZWxmLm9ucmVjb25uZWN0LnNl");
    sb.append("dChzbS5pZCwgc20pOwogICAgICBzbS5fX3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHNtKTsKICAgICAgfTsKICAgICAgcmV0dXJuIHNtOwogICAgfQogICAgcmV0dXJu");
    sb.append("IG51bGw7CiAgfQoKICAvKiogZXhlY3V0ZSBhIHN0cmVhbSByZXF1ZXN0IHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfc3RyZWFtKHNtKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICBzZWxmLl93cml0ZShzbS5yZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYg");
    sb.append("KCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgIGlmICgnZmFpbHVyZScgaW4gc20ucmVzcG9u");
    sb.append("ZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuZmFpbHVyZShyZXNwb25zZS5yZWFzb24pOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBzZWxmLm9ucmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZSkgewogICAgICAgIGlmICgnbmV4dCcg");
    sb.append("aW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIubmV4dChyZXNwb25zZS5yZXNw");
    sb.append("b25zZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5kb25lKSB7CiAgICAgICAg");
    sb.append("aWYgKCdjb21wbGV0ZScgaW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuY29t");
    sb.append("cGxldGUoKTsKICAgICAgICB9CiAgICAgICAgc2VsZi5vbnJlY29ubmVjdC5kZWxldGUoc20uaWQpOwog");
    sb.append("ICAgICB9CiAgICB9KTsKICAgIHNlbGYub25yZWNvbm5lY3Quc2V0KHNtLmlkLCBzbSk7CiAgICBzbS5f");
    sb.append("X3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oc20pOwogICAg");
    sb.append("fTsKICAgIHJldHVybiBzbTsKICB9CgogIF9faWQoKSB7CiAgICB0aGlzLm5leHRJZCsrOwogICAgcmV0");
    sb.append("dXJuIHRoaXMubmV4dElkOwogIH0KCiAgLyoqW0JFR0lOLUlOVk9LRV0qKi8KICBJbml0U2V0dXBBY2Nv");
    sb.append("dW50KGVtYWlsLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9");
    sb.append("IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklk");
    sb.append("LAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpbml0");
    sb.append("L3NldHVwLWFjY291bnQiLCAiaWQiOnBhcklkLCAiZW1haWwiOiBlbWFpbH0KICAgIH0pOwogIH0KICBJ");
    sb.append("bml0Q29udmVydEdvb2dsZVVzZXIoYWNjZXNzVG9rZW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6ImluaXQvY29udmVydC1nb29nbGUtdXNlciIsICJpZCI6cGFySWQsICJh");
    sb.append("Y2Nlc3MtdG9rZW4iOiBhY2Nlc3NUb2tlbn0KICAgIH0pOwogIH0KICBJbml0Q29tcGxldGVBY2NvdW50");
    sb.append("KGVtYWlsLCByZXZva2UsIGNvZGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6ImluaXQvY29tcGxldGUtYWNjb3VudCIsICJpZCI6cGFySWQsICJlbWFpbCI6IGVtYWlsLCAi");
    sb.append("cmV2b2tlIjogcmV2b2tlLCAiY29kZSI6IGNvZGV9CiAgICB9KTsKICB9CiAgRGVpbml0KGlkZW50aXR5");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkZWluaXQiLCAiaWQi");
    sb.append("OnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBBY2NvdW50U2V0UGFzc3dv");
    sb.append("cmQoaWRlbnRpdHksIHBhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJt");
    sb.append("ZXRob2QiOiJhY2NvdW50L3NldC1wYXNzd29yZCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50");
    sb.append("aXR5LCAicGFzc3dvcmQiOiBwYXNzd29yZH0KICAgIH0pOwogIH0KICBBY2NvdW50R2V0UGF5bWVudFBs");
    sb.append("YW4oaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFy");
    sb.append("SWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFj");
    sb.append("Y291bnQvZ2V0LXBheW1lbnQtcGxhbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQog");
    sb.append("ICAgfSk7CiAgfQogIEFjY291bnRMb2dpbihlbWFpbCwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFjY291bnQvbG9naW4iLCAiaWQiOnBhcklkLCAiZW1h");
    sb.append("aWwiOiBlbWFpbCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgUHJvYmUoaWRlbnRp");
    sb.append("dHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InByb2JlIiwgImlk");
    sb.append("IjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgU3RhdHMocmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InN0YXRzIiwgImlkIjpwYXJJZH0K");
    sb.append("ICAgIH0pOwogIH0KICBJZGVudGl0eUhhc2goaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImlkZW50aXR5L2hhc2giLCAiaWQiOnBhcklkLCAiaWRlbnRpdHki");
    sb.append("OiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBJZGVudGl0eVN0YXNoKGlkZW50aXR5LCBuYW1lLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpZGVudGl0eS9zdGFzaCIsICJp");
    sb.append("ZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibmFtZSI6IG5hbWV9CiAgICB9KTsKICB9CiAg");
    sb.append("U3BhY2VDcmVhdGUoaWRlbnRpdHksIHNwYWNlLCB0ZW1wbGF0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAg");
    sb.append("ICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2UvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5");
    sb.append("IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAidGVtcGxhdGUiOiB0ZW1wbGF0ZX0KICAgIH0pOwog");
    sb.append("IH0KICBTcGFjZURlbGV0ZShpZGVudGl0eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL2RlbGV0ZSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlk");
    sb.append("ZW50aXR5LCAic3BhY2UiOiBzcGFjZX0KICAgIH0pOwogIH0KICBTcGFjZVJlZmxlY3QoaWRlbnRpdHks");
    sb.append("IHNwYWNlLCBrZXksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFy");
    sb.append("SWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNw");
    sb.append("YWNlL3JlZmxlY3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3Bh");
    sb.append("Y2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgU3BhY2VMaXN0KGlkZW50aXR5LCBtYXJrZXIsIGxp");
    sb.append("bWl0LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2Uv");
    sb.append("bGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibWFya2VyIjogbWFya2VyLCAi");
    sb.append("bGltaXQiOiBsaW1pdH0KICAgIH0pOwogIH0KICBQdXNoUmVnaXN0ZXIoaWRlbnRpdHksIGRvbWFpbiwg");
    sb.append("c3Vic2NyaXB0aW9uLCBkZXZpY2VJbmZvLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJwdXNoL3JlZ2lzdGVyIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHks");
    sb.append("ICJkb21haW4iOiBkb21haW4sICJzdWJzY3JpcHRpb24iOiBzdWJzY3JpcHRpb24sICJkZXZpY2UtaW5m");
    sb.append("byI6IGRldmljZUluZm99CiAgICB9KTsKICB9CiAgRG9tYWluUmVmbGVjdChpZGVudGl0eSwgZG9tYWlu");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb21haW4vcmVmbGVj");
    sb.append("dCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWlufQogICAg");
    sb.append("fSk7CiAgfQogIERvbWFpbkdldFZhcGlkUHVibGljS2V5KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9nZXQtdmFwaWQtcHVibGlj");
    sb.append("LWtleSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWlufQog");
    sb.append("ICAgfSk7CiAgfQogIERvY3VtZW50QXV0aG9yaXphdGlvbihzcGFjZSwga2V5LCBtZXNzYWdlLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemF0");
    sb.append("aW9uIiwgImlkIjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJtZXNzYWdlIjogbWVz");
    sb.append("c2FnZX0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6YXRpb25Eb21haW4oZG9tYWluLCBtZXNz");
    sb.append("YWdlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAg");
    sb.append("ICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9h");
    sb.append("dXRob3JpemF0aW9uLWRvbWFpbiIsICJpZCI6cGFySWQsICJkb21haW4iOiBkb21haW4sICJtZXNzYWdl");
    sb.append("IjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZShzcGFjZSwga2V5LCB1c2Vy");
    sb.append("bmFtZSwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("ImRvY3VtZW50L2F1dGhvcml6ZSIsICJpZCI6cGFySWQsICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5");
    sb.append("LCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAg");
    sb.append("RG9jdW1lbnRBdXRob3JpemVEb21haW4oZG9tYWluLCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjog");
    sb.append("cmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS1kb21h");
    sb.append("aW4iLCAiaWQiOnBhcklkLCAiZG9tYWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBh");
    sb.append("c3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemVXaXRoUmVzZXQo");
    sb.append("c3BhY2UsIGtleSwgdXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS13aXRoLXJlc2V0");
    sb.append("IiwgImlkIjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJ1c2VybmFtZSI6IHVzZXJu");
    sb.append("YW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAg");
    sb.append("IH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZURvbWFpbldpdGhSZXNldChkb21haW4sIHVzZXJuYW1l");
    sb.append("LCBwYXNzd29yZCwgbmV3X3Bhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemUtZG9tYWluLXdpdGgtcmVzZXQiLCAiaWQiOnBhcklk");
    sb.append("LCAiZG9tYWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dv");
    sb.append("cmQsICJuZXdfcGFzc3dvcmQiOiBuZXdfcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRDcmVh");
    sb.append("dGUoaWRlbnRpdHksIHNwYWNlLCBrZXksIGVudHJvcHksIGFyZywgcmVzcG9uZGVyKSB7CiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAg");
    sb.append("ICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50");
    sb.append("aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZW50cm9weSI6IGVudHJv");
    sb.append("cHksICJhcmciOiBhcmd9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRMaXN0KGlkZW50aXR5LCBzcGFjZSwg");
    sb.append("bWFya2VyLCBsaW1pdCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFy");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBp");
    sb.append("ZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhv");
    sb.append("ZCI6ImRvY3VtZW50L2xpc3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNl");
    sb.append("Ijogc3BhY2UsICJtYXJrZXIiOiBtYXJrZXIsICJsaW1pdCI6IGxpbWl0fQogICAgfSk7CiAgfQogIE1l");
    sb.append("c3NhZ2VEaXJlY3RTZW5kKGlkZW50aXR5LCBzcGFjZSwga2V5LCBjaGFubmVsLCBtZXNzYWdlLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJtZXNzYWdlL2RpcmVjdC1zZW5k");
    sb.append("IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijog");
    sb.append("a2V5LCAiY2hhbm5lbCI6IGNoYW5uZWwsICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBN");
    sb.append("ZXNzYWdlRGlyZWN0U2VuZE9uY2UoaWRlbnRpdHksIHNwYWNlLCBrZXksIGRlZHVwZSwgY2hhbm5lbCwg");
    sb.append("bWVzc2FnZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBz");
    sb.append("ZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoibWVzc2Fn");
    sb.append("ZS9kaXJlY3Qtc2VuZC1vbmNlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFj");
    sb.append("ZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZGVkdXBlIjogZGVkdXBlLCAiY2hhbm5lbCI6IGNoYW5uZWws");
    sb.append("ICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBDb25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5");
    sb.append("LCBzcGFjZSwga2V5LCB2aWV3ZXJTdGF0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJl");
    sb.append("YW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6ImNvbm5lY3Rpb24vY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAidmlld2VyLXN0YXRlIjogdmlld2Vy");
    sb.append("U3RhdGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIp");
    sb.append("IHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwK");
    sb.append("ICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3");
    sb.append("b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2Vy");
    sb.append("bmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19w");
    sb.append("YXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5u");
    sb.append("ZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAog");
    sb.append("ICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhv");
    sb.append("ZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJj");
    sb.append("aGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQs");
    sb.append("ICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5j");
    sb.append("dGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0");
    sb.append("U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJ");
    sb.append("ZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUi");
    sb.append("OiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEz");
    sb.append("ODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUs");
    sb.append("IHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjog");
    sb.append("c3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0");
    sb.append("ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3Rh");
    sb.append("dGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBDb25uZWN0aW9u");
    sb.append("Q3JlYXRlVmlhRG9tYWluKGlkZW50aXR5LCBkb21haW4sIHZpZXdlclN0YXRlLCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiBy");
    sb.append("ZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiY29ubmVjdGlvbi9jcmVhdGUtdmlhLWRv");
    sb.append("bWFpbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAi");
    sb.append("dmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBt");
    sb.append("ZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9zZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwg");
    sb.append("Im1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVu");
    sb.append("Y3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAg");
    sb.append("ICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAg");
    sb.append("ICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWQsICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwg");
    sb.append("Im5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2Vu");
    sb.append("ZE9uY2U6IGZ1bmN0aW9uKGNoYW5uZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAg");
    sb.append("ICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1l");
    sb.append("c3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0");
    sb.append("aW9uKHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAg");
    sb.append("IHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRl");
    sb.append("cjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nh");
    sb.append("bi1hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAg");
    sb.append("fSwKICAgICAgYXR0YWNoOiBmdW5jdGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNp");
    sb.append("emUsIGRpZ2VzdE1kNSwgZGlnZXN0U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3Vi");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDog");
    sb.append("c3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6");
    sb.append("IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJ");
    sb.append("ZCwgImFzc2V0LWlkIjogYXNzZXRJZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUi");
    sb.append("OiBjb250ZW50VHlwZSwgInNpemUiOiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2Vz");
    sb.append("dC1zaGEzODQiOiBkaWdlc3RTaGEzODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTog");
    sb.append("ZnVuY3Rpb24odmlld2VyU3RhdGUsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwK");
    sb.append("ICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRo");
    sb.append("b2Q6ICJjb25uZWN0aW9uL3VwZGF0ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmll");
    sb.append("d2VyLXN0YXRlIjogdmlld2VyU3RhdGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVu");
    sb.append("Y3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAg");
    sb.append("ICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9u");
    sb.append("ZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24v");
    sb.append("ZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAg");
    sb.append("IH0pOwogIH0KICBEb2N1bWVudHNIYXNoUGFzc3dvcmQocGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50cy9oYXNoLXBhc3N3b3JkIiwgImlkIjpw");
    sb.append("YXJJZCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgQmlsbGluZ0Nvbm5lY3Rpb25D");
    sb.append("cmVhdGUoaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAg");
    sb.append("aWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRo");
    sb.append("b2QiOiJiaWxsaW5nLWNvbm5lY3Rpb24vY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRl");
    sb.append("bnRpdHl9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIp");
    sb.append("IHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwK");
    sb.append("ICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3");
    sb.append("b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2Vy");
    sb.append("bmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19w");
    sb.append("YXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5u");
    sb.append("ZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAog");
    sb.append("ICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhv");
    sb.append("ZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJj");
    sb.append("aGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQs");
    sb.append("ICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5j");
    sb.append("dGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0");
    sb.append("U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("ICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNw");
    sb.append("b25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlv");
    sb.append("bi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJ");
    sb.append("ZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUi");
    sb.append("OiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEz");
    sb.append("ODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUs");
    sb.append("IHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjog");
    sb.append("c3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0");
    sb.append("ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3Rh");
    sb.append("dGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBBdHRhY2htZW50");
    sb.append("U3RhcnQoaWRlbnRpdHksIHNwYWNlLCBrZXksIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgcmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImF0dGFjaG1lbnQvc3RhcnQiLCAi");
    sb.append("aWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXks");
    sb.append("ICJmaWxlbmFtZSI6IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29udGVudFR5cGV9LAogICAgICBh");
    sb.append("cHBlbmQ6IGZ1bmN0aW9uKGNodW5rTWQ1LCBiYXNlNjRCeXRlcywgc3ViUmVzcG9uZGVyKSB7CiAgICAg");
    sb.append("ICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAg");
    sb.append("ICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvYXBwZW5kIiwgaWQ6IHN1YklkLCAidXBsb2Fk");
    sb.append("IjpwYXJJZCwgImNodW5rLW1kNSI6IGNodW5rTWQ1LCAiYmFzZTY0LWJ5dGVzIjogYmFzZTY0Qnl0ZXN9");
    sb.append("CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGZpbmlzaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvZmluaXNoIiwgaWQ6IHN1YklkLCAi");
    sb.append("dXBsb2FkIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQogIEF0dGFjaG1lbnRT");
    sb.append("dGFydEJ5RG9tYWluKGlkZW50aXR5LCBkb21haW4sIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgcmVzcG9u");
    sb.append("ZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("IHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3Bv");
    sb.append("bmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImF0dGFjaG1lbnQvc3RhcnQt");
    sb.append("YnktZG9tYWluIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21h");
    sb.append("aW4sICJmaWxlbmFtZSI6IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29udGVudFR5cGV9LAogICAg");
    sb.append("ICBhcHBlbmQ6IGZ1bmN0aW9uKGNodW5rTWQ1LCBiYXNlNjRCeXRlcywgc3ViUmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAg");
    sb.append("ICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvYXBwZW5kIiwgaWQ6IHN1YklkLCAidXBs");
    sb.append("b2FkIjpwYXJJZCwgImNodW5rLW1kNSI6IGNodW5rTWQ1LCAiYmFzZTY0LWJ5dGVzIjogYmFzZTY0Qnl0");
    sb.append("ZXN9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGZpbmlzaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVy");
    sb.append("KSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVf");
    sb.append("cnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIs");
    sb.append("CiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvZmluaXNoIiwgaWQ6IHN1Yklk");
    sb.append("LCAidXBsb2FkIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQoKICAvKipbRU5E");
    sb.append("LUlOVk9LRV0qKi8KfQoKdmFyIEFkYW1hID0gewogIFByb2R1Y3Rpb246ICJhd3MtdXMtZWFzdC0yLmFk");
    sb.append("YW1hLXBsYXRmb3JtLmNvbSIsCiAgQmV0YTogImJldGEuYWRhbWEtcGxhdGZvcm0uY29tIiwKICBDb25u");
    sb.append("ZWN0aW9uOiBXZWJTb2NrZXRBZGFtYUNvbm5lY3Rpb24KfTsK");
    return sb.toString();
  }
  public static final String WORKER = new String(Base64.getDecoder().decode(make_worker()), StandardCharsets.UTF_8);
  private static String make_worker() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyogQWRhbWEgd29ya2VyOiBoYW5kbGUgc2ltcGxlIHB1c2ggbm90aWZpY2F0aW9ucyAqLwoKY29uc29s");
    sb.append("ZS5sb2coImFkYW1hIHdvcmtlciBzdGFydGVkIik7CnNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaCcs");
    sb.append("IGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmRhdGEpIHsKICAgIHZhciBqc29uID0gZXZlbnQu");
    sb.append("ZGF0YS5qc29uKCk7CiAgICBpZiAoanNvbikgewogICAgICBjb25zb2xlLmxvZyhqc29uKTsKICAgICAg");
    sb.append("dmFyIHB1c2hUb2tlbiA9ICJOQSI7CiAgICAgIGlmICgnQHB0JyBpbiBqc29uKSB7CiAgICAgICAgcHVz");
    sb.append("aFRva2VuID0ganNvblsnQHB0J107CiAgICAgIH0KICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAg");
    sb.append("Ym9keToganNvbi5ib2R5ID8ganNvbi5ib2R5IDogIkdlbmVyaWMgUHVzaCBCb2R5IiwKICAgICAgfTsK");
    sb.append("ICAgICAgaWYgKGpzb24uaWNvbikgewogICAgICAgIG9wdGlvbnMuaWNvbiA9IGpzb24uaWNvbjsKICAg");
    sb.append("ICAgfQogICAgICB2YXIgc2hvdyA9IHRydWU7CiAgICAgIGlmIChqc29uLmhpZGUpIHsKICAgICAgICBz");
    sb.append("aG93ID0gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgaWYgKGpzb24udXJs");
    sb.append("KSB7CiAgICAgICAgZGF0YS51cmwgPSBqc29uLnVybDsKICAgICAgfQogICAgICBvcHRpb25zLmRhdGEg");
    sb.append("PSBkYXRhOwogICAgICBpZiAoc2hvdykgewogICAgICAgIGV2ZW50LndhaXRVbnRpbChzZWxmLnJlZ2lz");
    sb.append("dHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKGpzb24udGl0bGUgPyBqc29uLnRpdGxlIDogIkdlbmVyaWMg");
    sb.append("UHVzaCBUaXRsZSIsIG9wdGlvbnMpKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mKGpzb24uYmFkZ2Up");
    sb.append("ID09ICJudW1iZXIiICYmIG5hdmlnYXRvci5zZXRBcHBCYWRnZSkgewogICAgICAgIHRyeSB7CiAgICAg");
    sb.append("ICAgICBldmVudC53YWl0VW50aWwobmF2aWdhdG9yLnNldEFwcEJhZGdlKGpzb24uYmFkZ2UpKTsKICAg");
    sb.append("ICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgZXZlbnQud2FpdFVu");
    sb.append("dGlsKGZldGNoKHNlbGYubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5sb2NhdGlvbi5ob3N0");
    sb.append("ICsgIi9+cHQvIiArIHB1c2hUb2tlbiwgewogICAgICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgICAg");
    sb.append("IGhlYWRlcnM6IHt9LAogICAgICAgICAgYm9keTogcHVzaFRva2VuCiAgICAgICAgfSkpOwogICAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICAgIH0KICAgIH0KICB9Cn0pOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdub3RpZmljYXRpb25j");
    sb.append("bGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50Lm5vdGlmaWNhdGlvbiAmJiBldmVudC5u");
    sb.append("b3RpZmljYXRpb24uZGF0YSAmJiBldmVudC5ub3RpZmljYXRpb24uZGF0YS51cmwpIHsKICAgIHZhciB1");
    sb.append("cmwgPSBzZWxmLmxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHNlbGYubG9jYXRpb24uaG9zdCArIGV2");
    sb.append("ZW50Lm5vdGlmaWNhdGlvbi5kYXRhLnVybDsKICAgIHZhciBob21lID0gc2VsZi5sb2NhdGlvbi5wcm90");
    sb.append("b2NvbCArICIvLyIgKyBzZWxmLmxvY2F0aW9uLmhvc3Q7CiAgICBldmVudC5ub3RpZmljYXRpb24uY2xv");
    sb.append("c2UoKTsgLy8gQW5kcm9pZCBuZWVkcyBleHBsaWNpdCBjbG9zZS4KICAgIGV2ZW50LndhaXRVbnRpbCgK");
    sb.append("ICAgICAgY2xpZW50cy5tYXRjaEFsbCh7dHlwZTogJ3dpbmRvdyd9KS50aGVuKCB3YyA9PiB7CiAgICAg");
    sb.append("ICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHdpbmRvdy90YWIgb3BlbiB3aXRoIHRoZSB0");
    sb.append("YXJnZXQgVVJMCiAgICAgICAgdmFyIGNsaWVudFdpdGhQcmVmaXggPSBudWxsOwogICAgICAgIHZhciBj");
    sb.append("bGllbnRXaXRoSG9tZSA9IG51bGw7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Yy5sZW5ndGg7");
    sb.append("IGkrKykgewogICAgICAgICAgdmFyIGNsaWVudCA9IHdjW2ldOwogICAgICAgICAgY29uc29sZS5sb2co");
    sb.append("ImNsaWVudDoiICsgY2xpZW50LnVybCArICI7IiArIHVybCk7CiAgICAgICAgICBpZiAoY2xpZW50LnVy");
    sb.append("bCA9PT0gdXJsICYmICdmb2N1cycgaW4gY2xpZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjbGllbnQu");
    sb.append("Zm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjbGllbnQudXJsLnN0YXJ0c1dpdGgodXJs");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoUHJlZml4ID0g");
    sb.append("Y2xpZW50OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNsaWVudC51cmwuc3RhcnRzV2l0aChob21l");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoSG9tZSA9IGNs");
    sb.append("aWVudDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNsaWVudFdpdGhQcmVmaXggIT0g");
    sb.append("bnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpwcmVmaXg6IiArIHVybCk7CiAgICAgICAg");
    sb.append("ICByZXR1cm4gY2xpZW50V2l0aFByZWZpeC5uYXZpZ2F0ZSh1cmwpOwogICAgICAgIH0KICAgICAgICBp");
    sb.append("ZiAoY2xpZW50V2l0aEhvbWUgIT0gbnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpob21l");
    sb.append("OiIgKyB1cmwpOwogICAgICAgICAgcmV0dXJuIGNsaWVudFdpdGhIb21lLm5hdmlnYXRlKHVybCk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmIChjbGllbnRzLm9wZW5XaW5kb3cpIHsKICAgICAgICAgIGNvbnNvbGUu");
    sb.append("bG9nKCJvcGVuOm5ldzoiICsgdXJsKTsKICAgICAgICAgIHJldHVybiBjbGllbnRzLm9wZW5XaW5kb3co");
    sb.append("dXJsKTsKICAgICAgICB9CiAgICAgIH0pCiAgICApOwogIH0KfSk7");
    return sb.toString();
  }
}
