/*
* Adama Platform and Language
* Copyright (C) 2021 - 2023 by Adama Platform Initiative, LLC
* 
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.
* 
* You should have received a copy of the GNU Affero General Public License
* along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/
package org.adamalang.cli.devbox;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class JavaScriptResourcesRaw {
  public static final String TREE = new String(Base64.getDecoder().decode(make_tree()), StandardCharsets.UTF_8);
  private static String make_tree() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIGEgc2ltcGxpZmllZCBwdWIvc3ViIGRpZmZlcmVudGlhbCB0cmVlICovCmZ1bmN0aW9uIEFkYW1h");
    sb.append("VHJlZSgpIHsKICB2YXIgaWQgPSAwOwoKICB2YXIgcm9vdCA9IHt9OwogIHZhciBhbGxfc3Vic2NyaXB0");
    sb.append("aW9ucyA9IHt9OwoKICB2YXIgY2xvbmVfb2JqZWN0ID0gZnVuY3Rpb24gKG9iaikgewogICAgaWYgKEFy");
    sb.append("cmF5LmlzQXJyYXkob2JqKSkgewogICAgICB2YXIgbmV4dCA9IFtdOwogICAgICBmb3IgKHZhciBrID0g");
    sb.append("MDsgayA8IG9iai5sZW5ndGg7IGsrKykgewogICAgICAgIG5leHQucHVzaChjbG9uZV9vYmplY3Qob2Jq");
    sb.append("W2tdKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG5leHQ7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAob2Jq");
    sb.append("KSA9PSAib2JqZWN0IikgewogICAgICB2YXIgbmV4dCA9IHt9OwogICAgICBmb3IgKGtleSBpbiBvYmop");
    sb.append("IHsKICAgICAgICBpZiAoa2V5WzBdID09ICIjIiB8fCBrZXkgPT0gIl9fa2V5IiB8fCBrZXkgPT0gIkBv");
    sb.append("IiB8fCBrZXkgPT0gIkBzIikgY29udGludWU7CiAgICAgICAgbmV4dFtrZXldID0gY2xvbmVfb2JqZWN0");
    sb.append("KG9ialtrZXldKTsKICAgICAgfQogICAgICByZXR1cm4gbmV4dDsKICAgIH0gZWxzZSB7CiAgICAgIHJl");
    sb.append("dHVybiBvYmo7CiAgICB9CiAgfTsKCiAgdGhpcy5udWtlID0gZnVuY3Rpb24gKCkgewogICAgYWxsX3N1");
    sb.append("YnNjcmlwdGlvbnMgPSB7fTsKICB9OwoKICB0aGlzLmNvcHkgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1");
    sb.append("cm4gY2xvbmVfb2JqZWN0KHJvb3QpOwogIH07CgogIHRoaXMuc3RyID0gZnVuY3Rpb24gKCkgewogICAg");
    sb.append("cmV0dXJuIEpTT04uc3RyaW5naWZ5KHJvb3QpOwogIH07CgogIHRoaXMucmF3ID0gZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgcmV0dXJuIHJvb3Q7CiAgfTsKCiAgLy8gZmlsdGVyIHRoZSBzdWJzY3JpcHRpb25zIHRvIHRo");
    sb.append("ZSBvbmVzIHRoYXQgaGF2ZSB0aGUga2V5CiAgdmFyIHN1YiA9IGZ1bmN0aW9uIChzLCBrZXkpIHsKICAg");
    sb.append("IC8vIGlmIHdlIGhhdmUgbm90aGluZywgdGhlbiB3ZSByZXR1cm4gbm90aGluZwogICAgaWYgKHMubGVu");
    sb.append("Z3RoID09IDApIHsKICAgICAgcmV0dXJuIHM7CiAgICB9CiAgICAvLyBtYWtlIGEgbmV3IGFycmF5CiAg");
    sb.append("ICB2YXIgbiA9IFtdOwogICAgZm9yICh2YXIgayA9IDA7IGsgPCBzLmxlbmd0aDsgaysrKSB7IC8vIHN1");
    sb.append("Y2ggdGhhdCBldmVyeSBlbGVtZW50CiAgICAgIGlmIChrZXkgaW4gc1trXSkgeyAvLyB3aGljaCBjb250");
    sb.append("YWlucyB0aGUga2V5CiAgICAgICAgbi5wdXNoKHNba11ba2V5XSk7IC8vIGlzIGFkZGVkIHRvIHRoZSBu");
    sb.append("ZXcgYXJyYXkKICAgICAgfQogICAgfQogICAgcmV0dXJuIG47CiAgfTsKCiAgLy8gZmlyZSBldmVudHMg");
    sb.append("YXQgdGhlIGN1cnJlbnQgc3Vic2NyaXB0aW9uCiAgdmFyIGZpcmUgPSBmdW5jdGlvbiAocywgdmFsdWUs");
    sb.append("IGV2ZW50cykgewogICAgLy8gZm9yIGVhY2ggc3Vic2NyaXB0aW9uCiAgICBmb3IgKHZhciBqID0gMDsg");
    sb.append("aiA8IHMubGVuZ3RoOyBqKyspIHsKICAgICAgdmFyIHYgPSBzW2pdOwogICAgICAvLyBpZiBpdCBoYXMg");
    sb.append("ZXZlbnRzCiAgICAgIGlmICgiQGUiIGluIHYpIHsKICAgICAgICAvLyBmaXJlIGVhY2ggZXZlbnQKICAg");
    sb.append("ICAgICB2YXIgZXZ0cyA9IHZbIkBlIl07CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBldnRzLmxl");
    sb.append("bmd0aDsgaysrKSB7CiAgICAgICAgICBldmVudHMucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAg");
    sb.append("IHRoaXMuZih0aGlzLnYpOwogICAgICAgICAgfS5iaW5kKHsgZjogZXZ0c1trXSwgdjogdmFsdWUgfSkp");
    sb.append("OwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIHZhciB3ZWF2ZSA9IGZ1bmN0aW9uIChzLCBj");
    sb.append("YWxsYmFjaywga2V5KSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShjYWxsYmFjaykpIHsKICAgICAgZm9y");
    sb.append("ICh2YXIgayA9IDA7IGsgPCBjYWxsYmFjay5sZW5ndGg7IGsrKykgewogICAgICAgIHdlYXZlKHMsIGNh");
    sb.append("bGxiYWNrW2tdLCBrZXkpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09");
    sb.append("ICJmdW5jdGlvbiIpIHsKICAgICAgaWYgKCEoa2V5IGluIHMpKSB7CiAgICAgICAgc1trZXldID0ge307");
    sb.append("CiAgICAgIH0KICAgICAgdmFyIHNrID0gc1trZXldOwogICAgICBpZiAoISgiQGUiIGluIHNrKSkgewog");
    sb.append("ICAgICAgIHNrWyJAZSJdID0gW2NhbGxiYWNrXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBza1siQGUi");
    sb.append("XS5wdXNoKGNhbGxiYWNrKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgKGNhbGxiYWNrKSA9");
    sb.append("PSAib2JqZWN0IikgewogICAgICBpZiAoIShrZXkgaW4gcykpIHsKICAgICAgICBzW2tleV0gPSB7fTsK");
    sb.append("ICAgICAgfQogICAgICB2YXIgc2sgPSBzW2tleV07CiAgICAgIGZvciAodmFyIGNrIGluIGNhbGxiYWNr");
    sb.append("KSB7CiAgICAgICAgaWYgKGNrID09ICJAZSIpIHsKICAgICAgICAgIHdlYXZlKHMsIGNhbGxiYWNrW2Nr");
    sb.append("XSwga2V5KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2VhdmUoc2ssIGNhbGxiYWNrW2NrXSwg");
    sb.append("Y2spOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIHdlIGhhdmUgZGV0ZWN0ZWQgYW4g");
    sb.append("YWRkaXRpb24KICB2YXIgZmlyZV9hZGQgPSBmdW5jdGlvbiAocywga2V5KSB7CiAgICBmb3IgKHZhciBq");
    sb.append("ID0gMDsgaiA8IHMubGVuZ3RoOyBqKyspIHsgLy8gZm9yIGVhY2ggc3Vic2NyaXB0aW9uCiAgICAgIHZh");
    sb.append("ciB2ID0gc1tqXTsKICAgICAgaWYgKCIrIiBpbiB2KSB7IC8vIGlmIHRoZSBzdWJzY3JpcHRpb24gaGFz");
    sb.append("IHRoZSBhYmlsaXR5IHRvIGFkZCBuZXcgb2JqZWN0cwogICAgICAgIHZhciB2YSA9IHZbIisiXTsKICAg");
    sb.append("ICAgICBpZiAoIkBlIiBpbiB2YSkgeyAvLyBpZiBhcmUgZXZlbnRzIGFzc29jaWF0ZWQgdG8gJysnCiAg");
    sb.append("ICAgICAgICB2YXIgZXZhID0gdmFbIkBlIl07CiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV2");
    sb.append("YS5sZW5ndGg7IGsrKykgeyAvLyBmb3IgZWFjaCAnKycgYWJpbGl0eQogICAgICAgICAgICB3ZWF2ZSh2");
    sb.append("LCBldmFba10oa2V5KSwga2V5KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9");
    sb.append("OwoKICAvLyBmaXJlIGEgZGVsZXRlIG1lc3NhZ2UgZm9yIHRoZSBnaXZlbiBrZXkKICB2YXIgZmlyZV9k");
    sb.append("ZWwgPSBmdW5jdGlvbiAocywga2V5KSB7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHMubGVuZ3RoOyBq");
    sb.append("KyspIHsgLy8gZm9yIGVhY2ggc3Vic2NyaXB0aW9uCiAgICAgIHZhciB2ID0gc1tqXTsKICAgICAgaWYg");
    sb.append("KCItIiBpbiB2KSB7IC8vIGlmIHRoZSBzdWJzY3JpcHRpb24gaGFzIHRoZSBhYmlsaXR5IHRvIGRlbGV0");
    sb.append("ZSBwcmlvciBrZXlzCiAgICAgICAgdmFyIHZhID0gdlsiLSJdOwogICAgICAgIGlmICgiQGUiIGluIHZh");
    sb.append("KSB7IC8vIGlmIGFyZSBldmVudHMgYXNzb2NpYXRlZCB0byAnLScKICAgICAgICAgIHZhciBldmEgPSB2");
    sb.append("YVsiQGUiXTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZhLmxlbmd0aDsgaysrKSB7IC8v");
    sb.append("IGZvciBlYWNoICctJyBhYmlsaXR5CiAgICAgICAgICAgIGV2YVtrXShrZXkpOyAvLyBldmFsdWF0ZSB0");
    sb.append("aGUgJy0nCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gYSBkZWxl");
    sb.append("dGUgb2YgYSB0cmVlIGhhcyBiZWVuIGRldGVjdGVkLCBsZXQncwogIHZhciBkZWwgPSBmdW5jdGlvbiAo");
    sb.append("cykgewogICAgLy8gaWYgdGhlIHN1YnNjcmlwdGlvbnMgaXMgYW4gYXJyYXksIHRoZW4gZGVsZXRlIGFs");
    sb.append("bCBjaGlsZHJlbgogICAgaWYgKEFycmF5LmlzQXJyYXkocykpIHsKICAgICAgdmFyIG4gPSBzLmxlbmd0");
    sb.append("aDsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICBkZWwoc1trXSk7CiAg");
    sb.append("ICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChzKSA9PSAib2JqZWN0IikgeyAvLyBvdGhlcndpc2Us");
    sb.append("IGl0ZXJhdGUgb3ZlciB0aGUga2V5cwogICAgICBmb3IgKHZhciBrZXkgaW4gcykgewogICAgICAgIGlm");
    sb.append("ICghKGtleSA9PSAnKycgfHwga2V5ID09ICctJykpIHsKICAgICAgICAgIHZhciBjaCA9IHNba2V5XTsK");
    sb.append("ICAgICAgICAgIGlmIChrZXkgPT0gIkBlIikgeyAvLyB3ZSBoYXZlIGV2ZW50cywgc28gbGV0J3Mgc2Vu");
    sb.append("ZCB0aG9zZSBldmVudHMuLi4KICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjaC5sZW5ndGg7");
    sb.append("IGorKykgewogICAgICAgICAgICAgIGNoW2pdKG51bGwpOyAvLyBhIG51bGwgdG8gaW5kaWNhdGUgZGVs");
    sb.append("ZXRpb24KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsgLy8gcmVjdXJzZSBpbnRvIHRoZSBj");
    sb.append("aGlsZCBmaWVsZAogICAgICAgICAgICBkZWwoY2gpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAg");
    sb.append("fQogICAgfQogIH07CgogIC8vIGRlbGV0ZSB0aGUgZ2l2ZW4ga2V5IHdpdGhpbiB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uCiAgdmFyIGRlbF9rZXkgPSBmdW5jdGlvbiAocywga2V5KSB7CiAgICBpZiAoQXJyYXkuaXNBcnJh");
    sb.append("eShzKSkgeyAvLyBpZiB3ZSBoYXZlIGFuIGFycmF5IG9mIHN1YnNjcmlwdGlvbnMsIHRoZW4gc2ltcGx5");
    sb.append("IHJlcGVhdAogICAgICB2YXIgbiA9IHMubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47");
    sb.append("IGsrKykgewogICAgICAgIGRlbF9rZXkoc1trXSwga2V5KTsgLy8gZm9yIGVhY2ggZWxlbWVudAogICAg");
    sb.append("ICB9CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAocykgPT0gIm9iamVjdCIpIHsgLy8gb3RoZXJ3aXNlLCB3");
    sb.append("ZSBoYXZlIGEgc3ViY3JpcHRpb24gY2FsbGJhY2sKICAgICAgaWYgKGtleSBpbiBzKSB7IC8vIGlmIHRo");
    sb.append("ZSBrZXkgaXMgaW4gdGhlIHN1YnNjcmlwdGlvbiBjYWxsYmFjawogICAgICAgIGRlbGV0ZSBzW2tleV07");
    sb.append("IC8vIGRlbGV0ZSBpdAogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gbWVyZ2UgdGhlIGdpdmVuIGRlbHRh");
    sb.append("IGludG8gdGhlIHRyZWUgYW5kIGZpcmUgc3Vic2NyaXB0aW9ucyAocykKICB2YXIgbWVyZ2UgPSBmdW5j");
    sb.append("dGlvbiAodHJlZSwgZGVsdGEsIHMsIGV2ZW50cywgb3B0aW1hbCkgewogICAgaWYgKG9wdGltYWwgJiYg");
    sb.append("cy5sZW5ndGggPT0gMCkgewogICAgICAvLyBubyB2YWx1ZSBpbiBtZXJnaW5nIGFnYWluc3QgYSBmYXV4");
    sb.append("IHRyZWUgd2l0aG91dCBzdWJzY3JpcHRpb25zCiAgICAgIHJldHVybjsKICAgIH0KICAgIGZvciAodmFy");
    sb.append("IGtleSBpbiBkZWx0YSkgeyAvLyBmb3IgZWFjaCBiaXQgb2YgZGF0YSB3aXRoaW4gdGhlIHRyZWUKICAg");
    sb.append("ICAgdmFyIGVLZXkgPSAiIyIgKyBrZXk7IC8vIGNvbXB1dGUgdGhlIHNlY3JldCBkYXRhIHBhdGgKICAg");
    sb.append("ICAgdmFyIHByaW9yID0gdHJlZVtrZXldOyAvLyBmaW5kIHRoZSBwcmlvciBzdGF0ZSB3aXRoaW4gdGhl");
    sb.append("IHRyZWUKICAgICAgdmFyIG5leHQgPSBkZWx0YVtrZXldOyAvLyBicmluZyB0aGUgY2hhbmdlIHByZXNl");
    sb.append("bnQgZm9yIHRoZSBjdXJyZW50IGtleQogICAgICBpZiAobmV4dCA9PSBudWxsKSB7IC8vIHRoZSBpdGVt");
    sb.append("IGlzIGdvaW5nIHBvb2YKICAgICAgICAvLyB0aGUgcHJpb3IgdmFsdWUgaXMgYW4gYXJyYXksIHNvIHdl");
    sb.append("IG1heSBoYXZlIHNvbWUgc3BlY2lhbCB0aGluZ3MgYXNzb2NpYXRlIHdpdGggaXQKICAgICAgICBpZiAo");
    sb.append("QXJyYXkuaXNBcnJheShwcmlvcikpIHsgLy8gVU5URVNUCiAgICAgICAgICBpZiAoZUtleSBpbiB0cmVl");
    sb.append("KSB7CiAgICAgICAgICAgIGRlbChzdWIocywgZUtleSkpOwogICAgICAgICAgfQogICAgICAgICAgZGVs");
    sb.append("ZXRlIHRyZWVbZUtleV07CiAgICAgICAgfQogICAgICAgIGRlbChzdWIocywga2V5KSk7IC8vIGlzc3Vl");
    sb.append("IGEgZGVsZXRlIGZvciBhbGwgdGhlIHN1YnNjcmlwdGlvbnMgZm9yIHRoZSBraWQKICAgICAgICBkZWxl");
    sb.append("dGUgdHJlZVtrZXldOyAvLyBkZWxldGUgdGhlIGRhdGEgaW4gdGhlIHRyZWUKICAgICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgICBpZiAodHlwZW9mIChuZXh0KSA9PSAib2JqZWN0IiAmJiAhQXJyYXkuaXNBcnJheShuZXh0");
    sb.append("KSkgeyAvLyBpZiB0aGUgZGVsdGEgaXMgYW4gb2JqZWN0CiAgICAgICAgICB2YXIgYXJyID0gQXJyYXku");
    sb.append("aXNBcnJheShwcmlvcikgfHwgIkBvIiBpbiBuZXh0IHx8ICJAcyIgaW4gbmV4dDsgLy8gZGV0ZWN0IGlm");
    sb.append("IHdlIG5lZWQgdG8gdXNlIGFycmF5IGxvZ2ljCiAgICAgICAgICBpZiAoYXJyKSB7IC8vIHdlIGhhdmUg");
    sb.append("ZGV0ZWN0ZWQgYW4gYXJyYXkKICAgICAgICAgICAgaWYgKCEoa2V5IGluIHRyZWUpKSB7IC8vIGxldCdz");
    sb.append("IG1ha2Ugc3VyZSB0aGUgdHJlZSBoYXMgYW4gZW1wdHkgYXJyYXkKICAgICAgICAgICAgICB0cmVlW2tl");
    sb.append("eV0gPSBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIShlS2V5IGluIHRyZWUpKSB7IC8v");
    sb.append("IGxldCdzIG1ha2Ugc3VyZSB0aGUgc2VjcmV0IGRhdGEgZXhpc3RzIGFzIHdlbGwKICAgICAgICAgICAg");
    sb.append("ICB0cmVlW2VLZXldID0ge307CiAgICAgICAgICAgICAgaWYgKCJAbyIgaW4gbmV4dCkgeyAvLyBpZiB3");
    sb.append("ZSBoYXZlIGEgYnVuY2ggb2Yga2V5cywgdGhlbiBsZXQncyBtYWtlIHN1cmUgdG8gcHJlc2VydmUgdGhh");
    sb.append("dCBmb3IgbWFrZV9kZWx0YQogICAgICAgICAgICAgICAgdHJlZVtlS2V5XVsiQG8iXSA9IHRydWU7CiAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRyZWVbZUtleV0uX19rZXkgPSBrZXk7IC8vIGFubm90");
    sb.append("YXRlIHRoZSBuZXcgaXRlbSB3aXRoIHRoZSBnaXZlbiBrZXkKICAgICAgICAgICAgfQogICAgICAgICAg");
    sb.append("ICB2YXIgZUJhc2UgPSB0cmVlW2VLZXldOyAvLyBnZXQgdGhlIHNlY3JldCAoYW5kIHJlYWwpIGRhdGEg");
    sb.append("Zm9yIHRoZSBvYmplY3QgaW4gcXVlc3Rpb24KICAgICAgICAgICAgdmFyIGVTdWIgPSBzdWIocywga2V5");
    sb.append("KTsgLy8gc2NvcGUgdGhlIHN1YnNjcmlwdGlvbiB0byB0aGUga2V5CiAgICAgICAgICAgIHZhciBvcmRl");
    sb.append("cmluZyA9IG51bGw7IC8vIGRldGVjdGlvbiBvZiBpZiB3ZSBoYXZlIEBvIG9yZGVyaW5nIHRvIHJlb3Jk");
    sb.append("ZXIgdGhlIHZhbHVlcwogICAgICAgICAgICB2YXIgcmVzaXplID0gbnVsbDsgLy8gZGV0ZWN0aW9uIG9m");
    sb.append("IGFuIGFycmF5IHdpdGhvdXQgX19rZXkKICAgICAgICAgICAgdmFyIGRlbGF5ID0ge307IC8vIHdlIGRl");
    sb.append("bGF5IGFsbCBldmVudHMgc3VjaCB0aGF0IHRoZSBhcnJheSBjYW4gYmUgYnVpbHQgZm9yIGlubGluZSBt");
    sb.append("YWtlX2RlbHRhIGNhbGxzIHRvIHdvcmsKICAgICAgICAgICAgZm9yICh2YXIgYUtleSBpbiBuZXh0KSB7");
    sb.append("IC8vIGZvciBlYWNoIGZpZWxkIHdpdGhpbiB0aGUgZGlmZmVyZW5jZQogICAgICAgICAgICAgIHZhciB2");
    sb.append("YWwgPSBuZXh0W2FLZXldOwogICAgICAgICAgICAgIGlmIChhS2V5ID09ICJAbyIpIHsgLy8gdGhlIHZh");
    sb.append("bHVlIGlzIGEgbmV3IG9yZGVyaW5nIG9mIHRoZSBhcnJheQogICAgICAgICAgICAgICAgb3JkZXJpbmcg");
    sb.append("PSB2YWw7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhS2V5ID09ICJAcyIpIHsgLy8gdGhlIHZhbHVl");
    sb.append("IGlzIGEgcmVzaXplIG9mIHRoZSBhcnJheQogICAgICAgICAgICAgICAgcmVzaXplID0gdmFsOwogICAg");
    sb.append("ICAgICAgICAgIH0gZWxzZSBpZiAodmFsID09IG51bGwpIHsgLy8gZGVsZXRlIHRoZSBlbGVtZW50CiAg");
    sb.append("ICAgICAgICAgICAgICBpZiAoYUtleSBpbiBlQmFzZSkgeyAvLyBpZiBpdCBleGlzdHMgd2l0aGluIHRo");
    sb.append("ZSBzZWNyZXQga2V5CiAgICAgICAgICAgICAgICAgIGRlbGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsK");
    sb.append("ICAgICAgICAgICAgICAgICAgICBkZWwoc3ViKGVTdWIsIHgpKTsgLy8gaXNzdWUgZGVsZXRlcwogICAg");
    sb.append("ICAgICAgICAgICAgICAgIGRlbGV0ZSBlQmFzZVt4XTsgLy8gZGVsZXRlIHRoZSB2YWx1ZQogICAgICAg");
    sb.append("ICAgICAgICAgICAgIGRlbF9rZXkoZVN1YiwgeCk7IC8vIGRlbGV0ZSB0aGUga2V5cyBmcm9tIHRoZSBv");
    sb.append("YmplY3QKICAgICAgICAgICAgICAgICAgICBmaXJlX2RlbChlU3ViLCB4KTsKICAgICAgICAgICAgICAg");
    sb.append("ICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgeyAvLyB3ZSBoYXZlIGRh");
    sb.append("dGEKICAgICAgICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRoZSBkYXRhIGRpZG4n");
    sb.append("dCBleGlzdCwgc28gZmlyZSBhbiBhZGRpdGlvbiB0byBleHRlbmQgdGhlIHN1YnNjcmlwdGlvbnMKICAg");
    sb.append("ICAgICAgICAgICAgICAgZmlyZV9hZGQoZVN1YiwgYUtleSk7CiAgICAgICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICAgICAgICB2YXIgblZhbCA9IG5leHRbYUtleV07IC8vIGdldCB0aGUgbmV3IHZhbHVlCiAgICAg");
    sb.append("ICAgICAgICAgICBpZiAodHlwZW9mIChuVmFsKSA9PSAib2JqZWN0IikgeyAvLyBpZiB0aGUgbmV3IHZh");
    sb.append("bHVlIGlzIGFuIG9iamVjdAogICAgICAgICAgICAgICAgICBpZiAoIShhS2V5IGluIGVCYXNlKSkgeyAv");
    sb.append("LyB0aGVuIG1ha2Ugc3VyZSB0aGUgbmV3IGl0ZW0gaXMgd2l0aGluIHRoZSBzZWNyZXQgdHJlZQogICAg");
    sb.append("ICAgICAgICAgICAgICAgIGVCYXNlW2FLZXldID0ge307CiAgICAgICAgICAgICAgICAgICAgZUJhc2Vb");
    sb.append("YUtleV0uX19rZXkgPSBhS2V5OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGRl");
    sb.append("bGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAgICAgICBtZXJnZShlQmFzZVt4");
    sb.append("XSwgbmV4dFt4XSwgc3ViKGVTdWIsIHgpLCBldmVudHMsIG9wdGltYWwpOyAvLyByZWN1cnNlOiBtZXJn");
    sb.append("ZSB0aGUgZGlmZmVyZW5jZSBpbnRvIHRoZSBzZWNyZXQgdHJlZSBhbmQgcHVibGlzaCB0byBhbGwgZWxl");
    sb.append("bWVudCBzdWJzY3JpcHRpb25zCiAgICAgICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgeCksIGVC");
    sb.append("YXNlW3hdLCBldmVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSBlbHNl");
    sb.append("IHsgLy8gb3RoZXJ3aXNlLCBzZXQgdGhlIHZhbHVlIGludG8gdGhlIHRyZWUKICAgICAgICAgICAgICAg");
    sb.append("ICAgZUJhc2VbYUtleV0gPSBuVmFsOwogICAgICAgICAgICAgICAgICBkZWxheVthS2V5XSA9IGZ1bmN0");
    sb.append("aW9uICh4KSB7CiAgICAgICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgeCksIGVCYXNlW3hdLCBl");
    sb.append("dmVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg");
    sb.append("ICAgLy8gYW5kIHRlbGwgZXZlcnlvbmUgdGhlIG5ldyB2YWx1ZSBmb3IgdGhpcwogICAgICAgICAgICAg");
    sb.append("IH0KICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgYmVmb3JlID0gdHJlZVtrZXldOyAvLyBzdGFz");
    sb.append("aCBhIHBvaW50ZXIgdG8gdGhlIGFycmF5CiAgICAgICAgICAgIHZhciBkZWxheU9yZGVyID0gW107Cgog");
    sb.append("ICAgICAgICAgICBpZiAob3JkZXJpbmcgIT0gbnVsbCkgeyAvLyBhbiBvcmRlcmluZyBjaGFuZ2UgaXMg");
    sb.append("aGFwcGVuaW5nCiAgICAgICAgICAgICAgdmFyIGFmdGVyID0gW107IC8vIHdlIHdpbGwgcmVidWlsZCB0");
    sb.append("aGUgYXJyYXkgaGVyZQogICAgICAgICAgICAgIHZhciBtc2cgPSBbXTsgLy8gYW5kIHJlY29yZCB0aGUg");
    sb.append("a2V5cyBoZXJlCiAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBvcmRlcmluZy5sZW5ndGg7");
    sb.append("IGsrKykgeyAvLyBmb3IgZWFjaCBvcmRlcmluZyBpbnN0cnVjdGlvbgogICAgICAgICAgICAgICAgdmFy");
    sb.append("IGluc3RyID0gb3JkZXJpbmdba107CiAgICAgICAgICAgICAgICB2YXIgdHlwZV9pbnN0ciA9IHR5cGVv");
    sb.append("ZiAoaW5zdHIpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVfaW5zdHIgPT0gInN0cmluZyIgfHwgdHlw");
    sb.append("ZV9pbnN0ciA9PSAibnVtYmVyIikgeyAvLyBpZiB0aGUgaW5zdHJ1Y3Rpb24gcmVmZXJzIHRvIGFuIGl0");
    sb.append("ZW0KICAgICAgICAgICAgICAgICAgYWZ0ZXIucHVzaChlQmFzZVtpbnN0cl0pOyAvLyBwdXNoIHRoZSBp");
    sb.append("dGVtIGludG8gdGhlIG5ldyBhcnJheQogICAgICAgICAgICAgICAgICBtc2cucHVzaCgiIiArIGluc3Ry");
    sb.append("KTsgLy8gcmVjb3JkIHRoZSBrZXkgb2YgdGhlIGl0ZW0KICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8v");
    sb.append("IG90aGVyd2lzZSwgdGhlIGluc3RydWN0aW9uIGlzIGEgcmFuZ2UKICAgICAgICAgICAgICAgICAgdmFy");
    sb.append("IHN0YXJ0ID0gaW5zdHJbMF07CiAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBpbnN0clsxXTsKICAg");
    sb.append("ICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IHN0YXJ0OyBqIDw9IGVuZDsgaisrKSB7IC8vIGl0ZXJh");
    sb.append("dGUgb3ZlciB0aGUgcmFuZ2UgYW5kIGNvcHkKICAgICAgICAgICAgICAgICAgICBpZiAoYmVmb3JlW2pd");
    sb.append("KSB7CiAgICAgICAgICAgICAgICAgICAgICBhZnRlci5wdXNoKGJlZm9yZVtqXSk7IC8vIHRoZSBpdGVt");
    sb.append("cyBmcm9tIHRoZSBwcmV2aW91cyBjb3B5CiAgICAgICAgICAgICAgICAgICAgICBtc2cucHVzaChiZWZv");
    sb.append("cmVbal0uX19rZXkpOyAvLyBhbmQgYW5ub3RhdGUgdGhlIGtleXMKICAgICAgICAgICAgICAgICAgICB9");
    sb.append("CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICAgICAgZGVsYXlPcmRlci5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGZpcmUo");
    sb.append("c3ViKGVTdWIsICJ+IiksIG1zZywgZXZlbnRzKTsgLy8gdGVsbCBzdWJzY3JpcHRpb25zIGFib3V0IHRo");
    sb.append("ZSBuZXcgb3JkZXJpbmcKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0cmVlW2tleV0gPSBh");
    sb.append("ZnRlcjsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNpemUgIT0gbnVsbCkgeyAvLyBhbHRlcm5hdGl2");
    sb.append("ZWx5LCBhbiBhcnJheSB3aXRob3V0IGtleXMgaXMgYmVpbmcgcmVzaXplZAogICAgICAgICAgICAgIHZh");
    sb.append("ciBhZnRlciA9IFtdOwogICAgICAgICAgICAgIHZhciBtc2cgPSBbXTsKICAgICAgICAgICAgICBmb3Ig");
    sb.append("KHZhciBrID0gMDsgayA8IHJlc2l6ZTsgaysrKSB7IC8vIHdlIHJlYnVpbGQgdGhlIGFycmF5CiAgICAg");
    sb.append("ICAgICAgICAgICBhZnRlcltrXSA9IGVCYXNlWyIiICsga107CiAgICAgICAgICAgICAgICBtc2cucHVz");
    sb.append("aCgiIiArIGspOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWxheU9yZGVyLnB1c2goZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgIn4iKSwgbXNnLCBldmVudHMp");
    sb.append("OyAvLyB0ZWxsIHN1YnNjcmlwdGlvbnMgYWJvdXQgdGhlIG5ldyBvcmRlcmluZwogICAgICAgICAgICAg");
    sb.append("IH0pOwogICAgICAgICAgICAgIHRyZWVba2V5XSA9IGFmdGVyOwogICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIGZvciAoYUtleSBpbiBkZWxheSkgewogICAgICAgICAgICAgIGRlbGF5W2FLZXldKGFLZXkpOwog");
    sb.append("ICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZGVsYXlPcmRlci5sZW5n");
    sb.append("dGg7IGsrKykgewogICAgICAgICAgICAgIGRlbGF5T3JkZXJba10oKTsKICAgICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgICBmaXJlKGVTdWIsIHRyZWVba2V5XSwgZXZlbnRzKTsgLy8gdGVsbCBldmVyeW9uZSBhYm91");
    sb.append("dCB0aGUgbmV3IHZhbHVlCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIShrZXkgaW4g");
    sb.append("dHJlZSkgfHwgdHlwZW9mICh0cmVlW2tleV0pICE9ICJvYmplY3QiKSB7CiAgICAgICAgICAgICAgdHJl");
    sb.append("ZVtrZXldID0ge307CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGUgPSBzdWIocywga2V5KTsK");
    sb.append("ICAgICAgICAgICAgbWVyZ2UodHJlZVtrZXldLCBuZXh0LCBlLCBldmVudHMsIG9wdGltYWwpOwogICAg");
    sb.append("ICAgICAgICBmaXJlKGUsIHRyZWVba2V5XSwgZXZlbnRzKTsKICAgICAgICAgIH0KICAgICAgICB9IGVs");
    sb.append("c2UgeyAvLyBub3QgYW4gb2JqZWN0LCBzbyBpdCBpcyBhIHZhbHVlCiAgICAgICAgICB0cmVlW2tleV0g");
    sb.append("PSBuZXh0OyAvLyBzdGFzaCB0aGUgbmV3IHZhbHVlCiAgICAgICAgICBmaXJlKHN1YihzLCBrZXkpLCBu");
    sb.append("ZXh0LCBldmVudHMpOyAvLyBhbmQgdGVsbCBldmVyeW9uZSBhYm91dCBpdAogICAgICAgIH0KICAgICAg");
    sb.append("fQogICAgfQogICAgZmlyZShzLCB0cmVlLCBldmVudHMpOwogIH07CgogIHZhciBmaXJlX2V2ZW50cyA9");
    sb.append("IGZ1bmN0aW9uIChldmVudHMpIHsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZlbnRzLmxlbmd0aDsg");
    sb.append("aysrKSB7CiAgICAgIGV2ZW50c1trXSgpOwogICAgfQogIH07CgogIHRoaXMudXBkYXRlX2luX3Byb2dy");
    sb.append("ZXNzID0gZmFsc2U7CiAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoZGVsdGEpIHsKICAgIHRoaXMudXBk");
    sb.append("YXRlX2luX3Byb2dyZXNzID0gdHJ1ZTsKICAgIHZhciBhcnIgPSBbXTsgLy8gY29udmVydCB0aGUgc3Vi");
    sb.append("c2NyaXB0aW9ucyBpbnRvIGFuIGFycmF5CiAgICBmb3IgKHZhciBrIGluIGFsbF9zdWJzY3JpcHRpb25z");
    sb.append("KSB7CiAgICAgIGFyci5wdXNoKGFsbF9zdWJzY3JpcHRpb25zW2tdKTsKICAgIH0KICAgIHZhciBldmVu");
    sb.append("dHMgPSBbXTsKICAgIG1lcmdlKHJvb3QsIGRlbHRhLCBhcnIsIGV2ZW50cywgZmFsc2UpOyAvLyBleGVj");
    sb.append("dXRlIHRoZSBtZXJnZSBhbmQgZmlyZSBldmVudHMKICAgIGZpcmVfZXZlbnRzKGV2ZW50cyk7CiAgICB3");
    sb.append("aGlsZSAodGhpcy5zdWJzY3JpYmVfZGVsYXkubGVuZ3RoID4gMCkgewogICAgICB2YXIgY29weSA9IHRo");
    sb.append("aXMuc3Vic2NyaWJlX2RlbGF5OwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxheSA9IFtdOwogICAgICB2");
    sb.append("YXIgZmxhdCA9IFtdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNvcHkubGVuZ3RoOyBrKyspIHsK");
    sb.append("ICAgICAgICBpZiAoIWNvcHlba10uYWJvcnRlZCkgewogICAgICAgICAgZmxhdC5wdXNoKGNvcHlba10u");
    sb.append("c3ViKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZXZlbnRzID0gW107CiAgICAgIG1lcmdlKHt9LCBt");
    sb.append("YWtlX29wdGltYWxfZGVsdGEocm9vdCwgZmxhdCksIGZsYXQsIGV2ZW50cywgdHJ1ZSk7IC8vIGV4ZWN1");
    sb.append("dGUgdGhlIG1lcmdlIGFuZCBmaXJlIGV2ZW50cwogICAgICBmaXJlX2V2ZW50cyhldmVudHMpOwogICAg");
    sb.append("fQogICAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICB9OwoKICAvLyBmaXggdGhlIGNh");
    sb.append("bGxiYWNrIHN0cnVjdHVyZSBmcm9tIHRoZSB1c2VyJ3MgaGFwcHkgbGFuZCB0byB0aGUgcmlnb3Igb2Yg");
    sb.append("dGhlIGZvcm1hdCBuZWVkZWQKICB2YXIgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViID0gZnVuY3Rp");
    sb.append("b24gKGNhbGxiYWNrLCBzdWIpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrKSkgeyAvLyBp");
    sb.append("ZiB0aGUgY2FsbGJhY2sgaXMgYW4gYXJyYXksIHRoZW4gZmxhdHRlbiB0aGUgYXJyYXkgaW50byB0aGUg");
    sb.append("bmV3IG9iamVjdAogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhbGxiYWNrLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViKGNhbGxiYWNrW2tdLCBzdWIpOwogICAg");
    sb.append("ICB9CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09ICJvYmplY3QiKSB7IC8vIG9oLCB0");
    sb.append("aGUgY2FsbGJhY2sgaXMgYW4gb2JqZWN0CiAgICAgIGZvciAodmFyIGtleSBpbiBjYWxsYmFjaykgeyAv");
    sb.append("LyBpdGVyYXRlIG92ZXIgZWFjaCBrZXkKICAgICAgICBpZiAoa2V5ID09ICJAZSIpIHsgLy8gZm9yY2Ug");
    sb.append("dGhlIGZ1bmN0aW9ucyB0byBtZXJnZSB0b2dldGhlcgogICAgICAgICAgdHJhbnNmb3JtX2NhbGxiYWNr");
    sb.append("X2ludG9fc3ViKGNhbGxiYWNrW2tleV0sIHN1Yik7CiAgICAgICAgfSBlbHNlIHsgLy8gbm9ybWFsIGZs");
    sb.append("b3cKICAgICAgICAgIGlmICghKGtleSBpbiBzdWIpKSB7IC8vIGRpdmUgaW50byB0aGUgb2JqZWN0IGFu");
    sb.append("ZCBtYWtlIHN1cmUgdGhlIHN1YnNjcmlwdGlvbiBoYXMgdGhlIGZpZWxkCiAgICAgICAgICAgIHN1Yltr");
    sb.append("ZXldID0ge307CiAgICAgICAgICB9CiAgICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIo");
    sb.append("Y2FsbGJhY2tba2V5XSwgc3ViW2tleV0pOyAvLyByZWN1cnNlIGFuZCBwYWlyIHRoZSBldmVudHMgdG8g");
    sb.append("dGhlIG5ldyBzdWJzY3JpcHRpb24KICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9m");
    sb.append("IChjYWxsYmFjaykgPT0gImZ1bmN0aW9uIikgeyAvLyBpdCdzIGEgZnVuY3Rpb24KICAgICAgaWYgKCEo");
    sb.append("IkBlIiBpbiBzdWIpKSB7IC8vIGxldCdzIGVuc3VyZSB0aGVyZSBpcyBhbiBldmVudCBsaXN0CiAgICAg");
    sb.append("ICAgc3ViWyJAZSJdID0gW2NhbGxiYWNrXTsKICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCBqdXN0");
    sb.append("IGFkZCBpdAogICAgICAgIHN1YlsiQGUiXS5wdXNoKGNhbGxiYWNrKTsKICAgICAgfQogICAgfQogIH07");
    sb.append("CgogIC8vIGNvbnZlcnQgdGhlIHRyZWUgdG8gYSBkZWx0YTsgdGhpcyB0cmVlIGlzIGFzc3VtZWQgdG8g");
    sb.append("aGF2ZSBiZWVuIG1lcmdlZCBhbHJlYWR5CiAgdmFyIG1ha2VfZGVsdGEgPSBmdW5jdGlvbiAoc3QpIHsK");
    sb.append("ICAgIHZhciBkZWx0YSA9IHt9OyAvLyB0aGUgZGVsdGEgdG8gY29uc3RydWN0CiAgICBmb3IgKHZhciBr");
    sb.append("IGluIHN0KSB7IC8vIGZvciBlYWNoIGtleSB3aXRoaW4gdGhlIG9iamVjdAogICAgICBpZiAoa1swXSA9");
    sb.append("PSAiIyIgfHwgayA9PSAiQG8iIHx8IGsgPT0gIl9fa2V5IikgY29udGludWU7IC8vIHNraXAgdGhlc2UK");
    sb.append("ICAgICAgdmFyIHYgPSBzdFtrXTsKICAgICAgaWYgKCgiIyIgKyBrKSBpbiBzdCkgeyAvLyB0aGUgcmVz");
    sb.append("dWx0IGlzIGFuIGFycmF5CiAgICAgICAgdmFyIHB2ID0gc3RbJyMnICsga107CiAgICAgICAgdmFyIGQg");
    sb.append("PSB7fTsKICAgICAgICBpZiAoIkBvIiBpbiBwdikgeyAvLyBhbmQgd2UgaGF2ZSBhIHNwZWNpZmljIG9y");
    sb.append("ZGVyaW5nIHRvIG1lbW9pemUKICAgICAgICAgIHZhciBvID0gW107CiAgICAgICAgICBmb3IgKHZhciBq");
    sb.append("ID0gMDsgaiA8IHYubGVuZ3RoOyBqKyspIHsgLy8gY29weSB0aGUgZWxlbWVudHMgZnJvbSB0aGUgYXJy");
    sb.append("YXkKICAgICAgICAgICAgdmFyIHZqID0gdltqXTsKICAgICAgICAgICAgaWYgKHZqKSB7CiAgICAgICAg");
    sb.append("ICAgICAgZFt2ai5fX2tleV0gPSBtYWtlX2RlbHRhKHZqKTsgLy8gdXNpbmcgdGhlIF9fa2V5IGVtYmVk");
    sb.append("ZGVkIGluIHRoZSBvYmplY3QKICAgICAgICAgICAgICBvLnB1c2godltqXS5fX2tleSk7CiAgICAgICAg");
    sb.append("ICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGRbIkBvIl0gPSBvOwogICAgICAgIH0gZWxzZSB7IC8v");
    sb.append("IG90aGVyd2lzZTsgcmVjb3JkIHRoZSBzaXplIGFzIHdlIHJlY3Vyc2UKICAgICAgICAgIGZvciAodmFy");
    sb.append("IGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgewogICAgICAgICAgICBkWyIiICsgal0gPSBtYWtlX2Rl");
    sb.append("bHRhKHB2W2pdKTsKICAgICAgICAgIH0KICAgICAgICAgIGRbIkBzIl0gPSB2Lmxlbmd0aDsKICAgICAg");
    sb.append("ICB9CiAgICAgICAgZGVsdGFba10gPSBkOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiAodikgPT0gIm9i");
    sb.append("amVjdCIpIHsgLy8gaXQncyBqdXN0IGFuIG9iamVjdCwgc28gcmVjdXJzZSBkaXJlY3RseQogICAgICAg");
    sb.append("IGRlbHRhW2tdID0gbWFrZV9kZWx0YSh2KTsKICAgICAgfSBlbHNlIHsgLy8gZmluYWxseSwgaXQgaXMg");
    sb.append("YSB2YWx1ZSBzbyBqdXN0IHNldCBpdAogICAgICAgIGRlbHRhW2tdID0gdjsKICAgICAgfQogICAgfQog");
    sb.append("ICAgcmV0dXJuIGRlbHRhOwogIH07CiAgdGhpcy5NYWtlRGVsdGEgPSBtYWtlX2RlbHRhOwoKICB2YXIg");
    sb.append("bWFrZV9vcHRpbWFsX2RlbHRhID0gZnVuY3Rpb24oc3QsIHN1YnMpIHsKICAgIHZhciBmaWx0ZXIgPSB7");
    sb.append("fTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc3Vicy5sZW5ndGg7IGsrKykgewogICAgICB2YXIgcyA9");
    sb.append("IHN1YnNba107CiAgICAgIGlmICh0eXBlb2YocykgPT0gImZ1bmN0aW9uIikgewogICAgICAgIC8vIGZh");
    sb.append("bGxiYWNrIHdoZW4gdGhlIGhpZ2ggbGV2ZWwgaXMgYSBmdW5jdGlvbiAod2UgbmVlZCBpdCBhbGwhKQog");
    sb.append("ICAgICAgIHJldHVybiBtYWtlX2RlbHRhKHN0KTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YocykgPT0g");
    sb.append("Im9iamVjdCIpIHsKICAgICAgICBmb3IgKHZhciBqIGluIHMpIHsKICAgICAgICAgIGZpbHRlcltqXSA9");
    sb.append("IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICB2YXIgbmV3X3N0ID0ge307IC8vIHRoZSBk");
    sb.append("ZWx0YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsgaW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdp");
    sb.append("dGhpbiB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAi");
    sb.append("X19rZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQogICAgICBpZiAoayBpbiBmaWx0ZXIpIHsKICAg");
    sb.append("ICAgICBuZXdfc3Rba10gPSBzdFtrXTsKICAgICAgICBpZiAoKCIjIiArIGspIGluIHN0KSB7CiAgICAg");
    sb.append("ICAgICBuZXdfc3RbIiMiICsga10gPSBzdFsiIyIgKyBrXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0K");
    sb.append("ICAgIHJldHVybiBtYWtlX2RlbHRhKG5ld19zdCk7CiAgfTsKCiAgdGhpcy5zdWJzY3JpYmVfZGVsYXkg");
    sb.append("PSBbXTsKCiAgLy8gYHN1YnNjcmliZWAgdGhlIGdpdmVuIHN0cnVjdHVyYWwgY2FsbGJhY2sKICB0aGlz");
    sb.append("LnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgdmFyIHN1YiA9IHt9OwogICAgdHJh");
    sb.append("bnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViKGNhbGxiYWNrLCBzdWIpOyAgLy8gdHJhbnNmb3JtIHRoZSBj");
    sb.append("YWxsYmFjayBpbnRvIGEgc2FmZSBjYWxsYmFjawogICAgdmFyIFMgPSAiIiArIGlkKys7IC8vIGNyZWF0");
    sb.append("ZSBhbiBpZCBmb3IgdGhlIHN1YnNjcmlwdGlvbgogICAgYWxsX3N1YnNjcmlwdGlvbnNbU10gPSBzdWI7");
    sb.append("IC8vIHJlY29yZCB0aGUgc3Vic2NyaXB0aW9uCiAgICBpZiAodGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3Mp");
    sb.append("IHsKICAgICAgdmFyIHNtID0ge307CiAgICAgIHNtLnN1YiA9IHN1YjsKICAgICAgc20uYWJvcnRlZCA9");
    sb.append("IGZhbHNlOwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxheS5wdXNoKHNtKTsKICAgICAgcmV0dXJuIGZ1");
    sb.append("bmN0aW9uKCkgewogICAgICAgIHNtLmFib3J0ZWQgPSB0cnVlOwogICAgICAgIGRlbGV0ZSBhbGxfc3Vi");
    sb.append("c2NyaXB0aW9uc1tTXTsKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBkZWx0YSA9IG1ha2Vf");
    sb.append("b3B0aW1hbF9kZWx0YShyb290LCBbc3ViXSk7CiAgICAgIHZhciBldmVudHMgPSBbXTsKICAgICAgbWVy");
    sb.append("Z2Uoe30sIGRlbHRhLCBbc3ViXSwgZXZlbnRzLCB0cnVlKTsgLy8gZXhlY3V0ZSB0aGUgY2FsbGJhY2sg");
    sb.append("bm93IG9uIGEgY2FsbGJhY2sgb2YgYWxsIGRhdGEgdG8gZmlyZSBldmVudHMgYW5kIGZpbGwgdGhlIHN1");
    sb.append("YnNjcmlwdGlvbiBvYmplY3QKICAgICAgZmlyZV9ldmVudHMoZXZlbnRzKTsKICAgICAgcmV0dXJuIGZ1");
    sb.append("bmN0aW9uICgpIHsgLy8gcmV0dXJuIGEgbWV0aG9kIHRvIHVuc3Vic2NyaWJlCiAgICAgICAgZGVsZXRl");
    sb.append("IGFsbF9zdWJzY3JpcHRpb25zW1NdOwogICAgICB9OwogICAgfQogIH07Cn0=");
    return sb.toString();
  }
  public static final String DEBUGGER = new String(Base64.getDecoder().decode(make_debugger()), StandardCharsets.UTF_8);
  private static String make_debugger() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIFRoZSBBbWF6aW5nIEludGVybmFsIERlYnVnZ2VyIGZvciBSeEhUTUwgQ29ubmVjdGlvbiAqLwpB");
    sb.append("ZGFtYS5EZWJ1Z2dlciA9IChmdW5jdGlvbigpIHsKICB2YXIgc2VsZiA9IHt9OwogIHNlbGYuc2hvd24g");
    sb.append("PSBmYWxzZTsKICB2YXIgY29ubmVjdGlvbnMgPSB7fTsKICB2YXIgY3VycmVudCA9IG51bGw7CgogIC8q");
    sb.append("KiBIZWxwZXIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCAqLwogIHZhciBudWtl");
    sb.append("ID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAg");
    sb.append("d2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0g");
    sb.append("cGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwoKICAvKiogSGVscGVyIHwgY3JlYXRlIGEgc2ltcGxl");
    sb.append("IGVsZW1lbnQgd2l0aCB0aGUgZ2l2ZW4gY29udGVudCBhcyB0aGUgaW5uZXJIVE1MICovCiAgdmFyIHNp");
    sb.append("bXBsZSA9IGZ1bmN0aW9uKHRhZywgY29udGVudCkgewogICAgdmFyIGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KHRhZyk7CiAgICBkLmlubmVySFRNTCA9IGNvbnRlbnQ7CiAgICByZXR1cm4gZDsKICB9Cgog");
    sb.append("IHZhciBidXR0b25TdHlsZSA9ICJiYWNrZ3JvdW5kOiMzMzM7IGJvcmRlcjogMXB4IHNvbGlkICNmMDA7");
    sb.append("IGNvbG9yOiNmZmY7IHBhZGRpbmc6M3B4OyBtYXJnaW46M3B4OyBib3JkZXItcmFkaXVzOiAzcHg7IjsK");
    sb.append("ICB2YXIgaW5wdXRTdHlsZSA9ICJiYWNrZ3JvdW5kOiNlZWU7IGNvbG9yOiMwMDA7IjsKICB2YXIgcGx1");
    sb.append("c1NWRyA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9u");
    sb.append("ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjNzdk");
    sb.append("NjU2XCIgc3R5bGU9XCJ3aWR0aDoxOHB4OyBoZWlnaHQ6MThweDtcIj48cGF0aCBzdHJva2UtbGluZWNh");
    sb.append("cD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTEyIDl2Nm0zLTNIOW0xMiAw");
    sb.append("YTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+PC9zdmc+IjsKICB2YXIgbWludXNTVkcgPSAi");
    sb.append("PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3");
    sb.append("Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2YwMFwiIHN0eWxl");
    sb.append("PVwid2lkdGg6MThweDsgaGVpZ2h0OjE4cHg7XCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwi");
    sb.append("IHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk0xNSAxMkg5bTEyIDBhOSA5IDAgMTEtMTggMCA5");
    sb.append("IDkgMCAwMTE4IDB6XCIgLz48L3N2Zz4iOwoKICAvLyB3ZSBhcmUgZ29pbmcgdG8gY3JlYXRlIGEgZG9j");
    sb.append("dW1lbnQKICB2YXIgdmlld0pzb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICB2YXIg");
    sb.append("dmlld0NoYW5uZWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgogIHZpZXdKc29uLnN0");
    sb.append("eWxlID0gImZvbnQtZmFtaWx5OiBcIkpldEJyYWlucyBNb25vXCIsIHNvdXJjZS1jb2RlLXBybywgTWVu");
    sb.append("bG8sIE1vbmFjbywgQ29uc29sYXMsIG1vbm9zcGFjZTsgZm9udC1zaXplOiAxNHB4OyBjb2xvcjogI2Zm");
    sb.append("ZjsgYmFja2dyb3VuZC1jb2xvcjogIzAwMDsgd2lkdGg6MTAwJSIKICB2aWV3Q2hhbm5lbHMuc3R5bGUg");
    sb.append("PSAiZm9udC1mYW1pbHk6IFwiSmV0QnJhaW5zIE1vbm9cIiwgc291cmNlLWNvZGUtcHJvLCBNZW5sbywg");
    sb.append("TW9uYWNvLCBDb25zb2xhcywgbW9ub3NwYWNlOyBmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjZmZmOyBi");
    sb.append("YWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB3aWR0aDoxMDAlIgoKICAvKiogUmVmbGVjdGlvbiB8IGdpdmVu");
    sb.append("IGEgcmVmbGVjdGVkIHR5cGUsIGV4dHJhY3QgdGhlIHN0cnVjdHVyZSB0eXBlICoqLwogIHZhciBleHRy");
    sb.append("YWN0U3RydWN0dXJlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIHR5cGVzKSB7CiAgICBpZiAodHlwZS5uYXR1");
    sb.append("cmUgPT0gInJlYWN0aXZlX3JlZiIgfHwgdHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV9yZWYiKSB7CiAgICAg");
    sb.append("IHJldHVybiBleHRyYWN0U3RydWN0dXJlVHlwZSh0eXBlc1t0eXBlLnJlZl0sIHR5cGVzKTsKICAgIH0K");
    sb.append("ICAgIGlmICh0eXBlLm5hdHVyZSA9PSAicmVhY3RpdmVfcmVjb3JkIiB8fCB0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIHJldHVybiB0eXBlOwogICAgfQogICAgcmV0dXJuIG51bGw7");
    sb.append("CiAgfQoKICAvKiogVHJlZVZpZXcgfCBHaXZlbiBhIHR5cGUgKGFuZCBhIHR5cGUgZm9yZXN0KSBjcmVh");
    sb.append("dGUgYSAnbmFtZWQnIGRvbSBlbGVtZW50CiAgICogIGFsb25nIHdpdGggYW4gdXBkYXRlIGRlbHRhLiBU");
    sb.append("aGUgdXBkYXRlIGRlbHRhIGlzIGEgZnVuY3Rpb25hbCAob3Igc3RydWN0dXJhbCBmdW5jdGlvbmFsKQog");
    sb.append("ICAqICBjbG9zdXJlIHRoYXQgd2lsbCB1cGRhdGUgdGhlIGRvbSBlbGVtZW50IHN1Y2ggdGhhdCBpdCBj");
    sb.append("YW4gYmUgYXR0YWNoZWQgdG8gYW4gQWRhbWEgVHJlZSAqLwogIHZhciBjb252ZXJ0VHlwZVRvRG9tRGVs");
    sb.append("dGEgPSBmdW5jdGlvbih0eXBlLCB0eXBlcykgewogICAgaWYgKHR5cGUubmF0dXJlID09ICJyZWFjdGl2");
    sb.append("ZV9yZWYiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfcmVmIikgewogICAgICAvLyBnbyB0byB0aGUg");
    sb.append("Zm9yZXN0IGFuZCB0dXJuIHRoZSByZWYgaW50byBhIG1hbmlmZXN0ZWQgdHlwZQogICAgICByZXR1cm4g");
    sb.append("Y29udmVydFR5cGVUb0RvbURlbHRhKHR5cGVzW3R5cGUucmVmXSwgdHlwZXMpOwogICAgfQogICAgaWYg");
    sb.append("KHR5cGUubmF0dXJlID09ICJuYXRpdmVfbWF5YmUiIHx8IHR5cGUubmF0dXJlID09ICJyZWFjdGl2ZV9t");
    sb.append("YXliZSIpIHsKICAgICAgLy8gYSBtYXliZSBpcyBqdXN0IGEgd3JhcHBlciBhcm91bmQgYW5vdGhlciB0");
    sb.append("eXBlIHRoYXQgY2FuIG51bGwgb3V0CiAgICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJzcGFuIik7CiAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZS50eXBl");
    sb.append("LCB0eXBlcyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOiBkb20sCiAgICAgICAgbmFtZTogIm1h");
    sb.append("eWJlJmx0OyIgKyByZXN1bHQubmFtZSArICImZ3Q7IiwKICAgICAgICB1cGRhdGU6IFtyZXN1bHQudXBk");
    sb.append("YXRlLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgbnVrZShkb20pOwogICAgICAgICAgaWYgKHZh");
    sb.append("bHVlID09IG51bGwpIHsKICAgICAgICAgICAgZG9tLmlubmVySFRNTCA9ICI8aT5udWxsPC9pPiI7CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb20uYXBwZW5kKHJlc3VsdC5kb20pOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH1dCiAgICAgIH07CiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0gIm5hdGl2");
    sb.append("ZV9saXN0IiB8fCB0eXBlLm5hdHVyZSA9PSAibmF0aXZlX2FycmF5IikgewogICAgICAvLyB0aGlzIGlz");
    sb.append("IHRoZSBtb3N0IGNvbXBsZXggdHlwZSBhcyBpdCByZXF1aXJlcyBhIGRpZmZlcmVudGlhbCBzdHJ1Y3R1");
    sb.append("cmUuCgogICAgICAvLyB3ZSBjcmVhdGUgYSBkdW1teSB0byBnZXQgdGhlIG5hbWUgb2YgdGhlIHR5cGUK");
    sb.append("ICAgICAgdmFyIGR1bW15ID0gY29udmVydFR5cGVUb0RvbURlbHRhKHR5cGUudHlwZSwgdHlwZXMpOwoK");
    sb.append("ICAgICAgLy8gc28sIHdlIGhhdmUgdHdvIGNvbnNpZGVyYXRpb25zLiBGaXJzdCwgaXMgdGhpcyBhIGxp");
    sb.append("c3Qgb2Ygc3RydWN0dXJlcyBPUiBhIGxpc3Qgb2YgdmFsdWVzLgogICAgICB2YXIgcmVjb3JkVHlwZSA9");
    sb.append("IGV4dHJhY3RTdHJ1Y3R1cmVUeXBlKHR5cGUudHlwZSwgdHlwZXMpOwogICAgICBpZiAocmVjb3JkVHlw");
    sb.append("ZSAhPSBudWxsKSB7CiAgICAgICAgLy8gaXQgaXMgYSBsaXN0IG9mIHN0cnVjdHVyZXMsIHNvIHdlIHdh");
    sb.append("bnQgdG8gY3JlYXRlIGEgbmljZSBsb29raW5nIHRhYmxlIHdpdGggcGFnaW5hdGlvbiEKICAgICAgICB2");
    sb.append("YXIgdGFibGVDb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB2");
    sb.append("YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICB0YWJs");
    sb.append("ZUNvbnRyb2xzLmFwcGVuZChzaG93aGlkZSk7CgogICAgICAgIHZhciB0YWJsZUhvbGRlciA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CiAgICAgICAgdGFibGVDb250cm9scy5hcHBlbmQodGFi");
    sb.append("bGVIb2xkZXIpOwogICAgICAgIHZhciB0YWJsZUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo");
    sb.append("InRoZWFkIik7CiAgICAgICAgdGFibGVIb2xkZXIuYXBwZW5kKHRhYmxlSGVhZGVyKTsKICAgICAgICB2");
    sb.append("YXIgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5hcHBlbmQoaGVhZGVyUm93KTsKICAgICAgICB2YXIgY29sb3JTdHlsZSA9ICJib3JkZXI6IDFw");
    sb.append("eCBzb2xpZCAjM2I1NGRhOyI7CiAgICAgICAgZm9yICh2YXIgZmllbGROYW1lIGluIHJlY29yZFR5cGUu");
    sb.append("ZmllbGRzKSB7CiAgICAgICAgICB2YXIgZmllbGQgPSByZWNvcmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVd");
    sb.append("OwogICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBmaWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgIGNv");
    sb.append("bnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21E");
    sb.append("ZWx0YShmaWVsZC50eXBlLCB0eXBlcyk7CiAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJ0ZCIpOwogICAgICAgICAgdGQuaW5uZXJIVE1MID0gcmVzdWx0Lm5hbWUgKyAiICIgKyBm");
    sb.append("aWVsZE5hbWU7CiAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kKHRkKTsKICAgICAgICAgIHRkLnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZSArICJwYWRkaW5nLWxlZnQ6IDAuNWVtOyBwYWRkaW5nLXJpZ2h0OiAwLjVlbTsi");
    sb.append("CiAgICAgICAgfQogICAgICAgIHRhYmxlSG9sZGVyLnN0eWxlID0gY29sb3JTdHlsZSArICJwYWRkaW5n");
    sb.append("OiAwLjVlbTsgbWFyZ2luOjAuNWVtOyBkaXNwbGF5Om5vbmUiCiAgICAgICAgaGVhZGVyUm93LnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZTsKICAgICAgICB2YXIgdGFibGVCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgidGJvZHkiKTsKICAgICAgICB0YWJsZUhvbGRlci5hcHBlbmQodGFibGVCb2R5KTsKICAgICAgICB2");
    sb.append("YXIgcm93c0J5S2V5ID0ge307CiAgICAgICAgdmFyIHBhZ2luZyA9IHsKICAgICAgICAgIHNob3duOmZh");
    sb.append("bHNlLAogICAgICAgICAgb3JkZXI6W10sCiAgICAgICAgICBwYWdlOiAwLAogICAgICAgICAgcGFnZV9s");
    sb.append("aW1pdDogMTAsCiAgICAgICAgfTsKICAgICAgICB2YXIgY29udHJvbGxlciA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB0YWJsZUNvbnRyb2xzLmFwcGVuZChjb250cm9sbGVyKTsK");
    sb.append("ICAgICAgICBwYWdpbmcucmVmb3JtID1mdW5jdGlvbigpIHsKICAgICAgICAgIG51a2UodGFibGVCb2R5");
    sb.append("KTsKICAgICAgICAgIHZhciBzdGFydCA9IE1hdGgubWluKHRoaXMucGFnZSAqIHRoaXMucGFnZV9saW1p");
    sb.append("dCwgdGhpcy5vcmRlci5sZW5ndGggLSB0aGlzLnBhZ2VfbGltaXQpOwogICAgICAgICAgZm9yICh2YXIg");
    sb.append("YXQgPSBzdGFydDsgYXQgPCBzdGFydCArIHBhZ2luZy5wYWdlX2xpbWl0OyBhdCsrKSB7CiAgICAgICAg");
    sb.append("ICAgIHZhciByb3cgPSByb3dzQnlLZXlbcGFnaW5nLm9yZGVyW2F0XV07CiAgICAgICAgICAgIGlmIChy");
    sb.append("b3cpIHsKICAgICAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kKHJvdyk7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIG51a2UoY29udHJvbGxlcik7CiAgICAgICAgICBpZiAodGhpcy5zaG93");
    sb.append("bikgewogICAgICAgICAgICB2YXIgcGFnZXMgPSB0aGlzLm9yZGVyLmxlbmd0aCAvIHRoaXMucGFnZV9s");
    sb.append("aW1pdDsKICAgICAgICAgICAgaWYgKHBhZ2VzID4gMSkgewogICAgICAgICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgcGFnZXM7IGsrKykgewogICAgICAgICAgICAgICAgdmFyIGdvdG9QYWdlID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgICAgICAgICBnb3RvUGFnZS5zdHlsZSA9");
    sb.append("IGJ1dHRvblN0eWxlOwogICAgICAgICAgICAgICAgZ290b1BhZ2UuaW5uZXJIVE1MID0gIltQRzoiICsg");
    sb.append("ayArICJdIjsKICAgICAgICAgICAgICAgIGdvdG9QYWdlLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIHRoaXMucGFnaW5nLnBhZ2UgPSB0aGlzLnBnOwogICAgICAgICAgICAgICAg");
    sb.append("ICB0aGlzLnBhZ2luZy5yZWZvcm0oKTsKICAgICAgICAgICAgICAgIH0uYmluZCh7cGFnaW5nOiB0aGlz");
    sb.append("LCBwZzoga30pOwogICAgICAgICAgICAgICAgY29udHJvbGxlci5hcHBlbmQoZ290b1BhZ2UpOwogICAg");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2hvd2hpZGUuaW5u");
    sb.append("ZXJIVE1MID0gdGhpcy5zaG93biA/IG1pbnVzU1ZHIDogcGx1c1NWRzsKICAgICAgICAgIHNob3doaWRl");
    sb.append("Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5zaG93biA9ICF0aGlzLnNob3du");
    sb.append("OwogICAgICAgICAgICBpZiAodGhpcy5zaG93bikgewogICAgICAgICAgICAgIHRhYmxlSG9sZGVyLnN0");
    sb.append("eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMu");
    sb.append("cmVmb3JtKCk7CiAgICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgICAgfS5iaW5kKHBhZ2luZyk7CgoK");
    sb.append("ICAgICAgICByZXR1cm4gewogICAgICAgICAgZG9tOiB0YWJsZUNvbnRyb2xzLAogICAgICAgICAgbmFt");
    sb.append("ZTogImxpc3QmbHQ7IiArIGR1bW15Lm5hbWUgKyAiJmd0OyIsCiAgICAgICAgICB1cGRhdGU6IHsKICAg");
    sb.append("ICAgICAgICAgJysnOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgdmFyIHJvdyA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7CiAgICAgICAgICAgICAgcm93c0J5S2V5W2tleV0gPSByb3c7");
    sb.append("CiAgICAgICAgICAgICAgdmFyIGRlbHRhID0ge307CiAgICAgICAgICAgICAgZm9yICh2YXIgZmllbGRO");
    sb.append("YW1lIGluIHJlY29yZFR5cGUuZmllbGRzKSB7CiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSByZWNv");
    sb.append("cmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBm");
    sb.append("aWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShmaWVsZC50");
    sb.append("eXBlLCB0eXBlcyk7CiAgICAgICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJ0ZCIpOwogICAgICAgICAgICAgICAgdGQuc3R5bGUgPSBjb2xvclN0eWxlICsgInBhZGRpbmc6IDAu");
    sb.append("MjVlbTsgdGV4dC1hbGlnbjp0b3AiOwogICAgICAgICAgICAgICAgdGQuYXBwZW5kKHJlc3VsdC5kb20p");
    sb.append("OwogICAgICAgICAgICAgICAgcm93LmFwcGVuZCh0ZCk7CiAgICAgICAgICAgICAgICBkZWx0YVtmaWVs");
    sb.append("ZE5hbWVdID0gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJu");
    sb.append("IGRlbHRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnLSc6IGZ1bmN0aW9uIChrZXkpIHsKICAg");
    sb.append("ICAgICAgICAgICB2YXIgZG9tID0gcm93c0J5S2V5W2tleV07CiAgICAgICAgICAgICAgdGFibGVCb2R5");
    sb.append("LnJlbW92ZShkb20pOwogICAgICAgICAgICAgIGRlbGV0ZSByb3dzQnlLZXlba2V5XTsKICAgICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAgICAgICBpZiAo");
    sb.append("b3JkZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcGFnaW5nLm9yZGVyID0gb3JkZXI7CiAgICAg");
    sb.append("ICAgICAgICAgICBwYWdpbmcucmVmb3JtKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIG5vdCBhIHJlY29yZCwg");
    sb.append("c28gd2UgdXNlIGEgc2ltcGxlIGxpc3QKICAgICAgICB2YXIgbGlzdEhvbGRlciA9IGRvY3VtZW50LmNy");
    sb.append("ZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHZhciBkb21CeUtleSA9IHt9OwogICAgICAgIHJldHVy");
    sb.append("biB7CiAgICAgICAgICBkb206IGxpc3RIb2xkZXIsCiAgICAgICAgICBuYW1lOiAibGlzdDwiICsgZHVt");
    sb.append("bXkubmFtZSArICI+IiwKICAgICAgICAgIHVwZGF0ZTogewogICAgICAgICAgICAnKyc6IGZ1bmN0aW9u");
    sb.append("IChrZXkpIHsKICAgICAgICAgICAgICB2YXIgaXRlbUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoInNwYW4iKTsKICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udmVydFR5cGVUb0RvbURlbHRh");
    sb.append("KHR5cGUudHlwZSwgdHlwZXMpOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHJlc3VsdC5k");
    sb.append("b20pOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHNpbXBsZSgic3BhbiIsICIsICIpKTsK");
    sb.append("ICAgICAgICAgICAgICBkb21CeUtleVtrZXldID0gaXRlbUhvbGRlcjsKICAgICAgICAgICAgICByZXR1");
    sb.append("cm4gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJy0nOiBmdW5jdGlvbiAo");
    sb.append("a2V5KSB7CiAgICAgICAgICAgICAgdmFyIGRvbSA9IGRvbUJ5S2V5W2tleV07CiAgICAgICAgICAgICAg");
    sb.append("bGlzdEhvbGRlci5yZW1vdmUoZG9tKTsKICAgICAgICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsK");
    sb.append("ICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlLm5hdHVy");
    sb.append("ZSA9PSAicmVhY3RpdmVfdmFsdWUiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfdmFsdWUiKSB7CiAg");
    sb.append("ICAgIC8vIGl0J3MganVzdCBkYXRhLCBzbyBjcmVhdGUgYSBzaW5nbGUgbm9kZSB0byBkcmF3IGl0CiAg");
    sb.append("ICAgIHZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICBpdGVtLmlu");
    sb.append("bmVySFRNTCA9ICJudWxsIjsKICAgICAgaXRlbS5zdHlsZSA9ICJjb2xvcjogIzc3YTVmZjsiOwogICAg");
    sb.append("ICB2YXIgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZTsgfTsK");
    sb.append("ICAgICAgaWYgKHR5cGUudHlwZSA9PSAic3RyaW5nIikgewogICAgICAgIGl0ZW0uc3R5bGUgPSAiY29s");
    sb.append("b3I6ICM3N2Q2NTYiOwogICAgICAgIHVwZGF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW0uaW5uZXJI");
    sb.append("VE1MID0gIlwiIiArIHZhbHVlICsgIlwiIjsgfTsKICAgICAgfSBlbHNlIGlmICh0eXBlLnR5cGUgPT0g");
    sb.append("InByaW5jaXBhbCIpIHsKICAgICAgICBpdGVtLnN0eWxlID0gImNvbG9yOiAjQkE4M0ZGOyI7CiAgICAg");
    sb.append("ICAgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZSAhPSBudWxs");
    sb.append("ID8gKHZhbHVlLmFnZW50ICsgIkAiICsgdmFsdWUuYXV0aG9yaXR5KSA6ICJudWxsIjsgfTsKICAgICAg");
    sb.append("fSBlbHNlIGlmICh0eXBlLnR5cGUgPT0gImJvb2wiKSB7CiAgICAgICAgaXRlbS5zdHlsZSA9ICJjb2xv");
    sb.append("cjogI0U4M0IzQjsiOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOml0ZW0sCiAgICAg");
    sb.append("ICAgbmFtZTogdHlwZS50eXBlLAogICAgICAgIHVwZGF0ZTogdXBkYXRlCiAgICAgIH07CiAgICB9CiAg");
    sb.append("ICBpZiAodHlwZS5uYXR1cmUgPT0gInJlYWN0aXZlX3JlY29yZCIgfHwgdHlwZS5uYXR1cmUgPT0gIm5h");
    sb.append("dGl2ZV9tZXNzYWdlIikgewogICAgICAvLyBpdCdzIGEgc3RydWN0dXJlLCBzbyBsZXQncyBjcmVhdGUg");
    sb.append("YSByZWNvcmQgdGhhdCBjYW4gc2hvdy9oaWRlCiAgICAgIHZhciBvYmpfaG9sZGVyID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICB2YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJidXR0b24iKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoc2hvd2hpZGUpOwogICAgICBv");
    sb.append("YmpfaG9sZGVyLnNob3dHcm91cCA9IHR5cGUubmFtZSAhPSAiUm9vdCI7CgogICAgICB2YXIgZ3JvdXAg");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoZ3Jv");
    sb.append("dXApOwogICAgICBncm91cC5hcHBlbmQoc2ltcGxlKCJkaXYiLCAieyIpKTsKICAgICAgdmFyIGNoaWxk");
    sb.append("cmVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKICAgICAgZ3JvdXAuYXBwZW5kKGNoaWxk");
    sb.append("cmVuKTsKICAgICAgZ3JvdXAuYXBwZW5kKHNpbXBsZSgiZGl2IiwgIn0iKSk7CiAgICAgIGdyb3VwLnN0");
    sb.append("eWxlID0gInBhZGRpbmctbGVmdDoxMHB4IjsKICAgICAgY2hpbGRyZW4uc3R5bGUgPSAicGFkZGluZy1s");
    sb.append("ZWZ0OjEwcHg7IjsKICAgICAgc2hvd2hpZGUub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgIG9i");
    sb.append("al9ob2xkZXIuc2hvd0dyb3VwID0gISBvYmpfaG9sZGVyLnNob3dHcm91cDsKICAgICAgICBpZiAob2Jq");
    sb.append("X2hvbGRlci5zaG93R3JvdXApIHsKICAgICAgICAgIGdyb3VwLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAg");
    sb.append("ICAgICAgIHNob3doaWRlLmlubmVySFRNTCA9IG1pbnVzU1ZHOwogICAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgICBncm91cC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgc2hvd2hpZGUuaW5uZXJI");
    sb.append("VE1MID0gcGx1c1NWRzsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNob3doaWRlLm9uY2xpY2soKTsK");
    sb.append("CiAgICAgIHZhciBkZWx0YSA9IHt9OwogICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gdHlwZS5maWVs");
    sb.append("ZHMpIHsKICAgICAgICB2YXIgZmllbGQgPSB0eXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgIGlm");
    sb.append("ICgicHJpdmF0ZSIgPT0gZmllbGQucHJpdmFjeSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAg");
    sb.append("fQogICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEoZmllbGQudHlwZSwgdHlw");
    sb.append("ZXMpOwogICAgICAgIHZhciBmaWVsZERvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7CiAg");
    sb.append("ICAgICAgZmllbGREb20uYXBwZW5kKHNpbXBsZSgic3BhbiIsICBmaWVsZC5wcml2YWN5ICsgIiAiICsg");
    sb.append("cmVzdWx0Lm5hbWUgKyAiICIgKyBmaWVsZE5hbWUgKyAiID0gIikpOwogICAgICAgIGZpZWxkRG9tLmFw");
    sb.append("cGVuZChyZXN1bHQuZG9tKTsKICAgICAgICBjaGlsZHJlbi5hcHBlbmQoZmllbGREb20pOwogICAgICAg");
    sb.append("IGRlbHRhW2ZpZWxkTmFtZV0gPSByZXN1bHQudXBkYXRlOwogICAgICB9CiAgICAgIHJldHVybiB7CiAg");
    sb.append("ICAgICAgZG9tOiBvYmpfaG9sZGVyLAogICAgICAgIG5hbWU6IHR5cGUubmFtZSwKICAgICAgICB1cGRh");
    sb.append("dGU6ZGVsdGEKICAgICAgfTsKICAgIH0KICAgIHZhciB1bmtub3duID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICB1bmtub3duLmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KHR5cGUpOwog");
    sb.append("ICAgcmV0dXJuIHtkb206IHVua25vd24sIHVwZGF0ZTogZnVuY3Rpb24oKSB7fX07CiAgfTsKCiAgc2Vs");
    sb.append("Zi5mb3JtSWRHZW4gPSAwOwogIHZhciBuZXh0Rm9ybUlkID0gZnVuY3Rpb24oKSB7CiAgICBzZWxmLmZv");
    sb.append("cm1JZEdlbisrOwogICAgcmV0dXJuIHNlbGYuZm9ybUlkR2VuOwogIH07CiAgdmFyIGZpbGxPdXRGb3Jt");
    sb.append("Rm9yVHlwZSA9IGZ1bmN0aW9uKGRvbSwgbmFtZSwgdHlwZSwgdHlwZXMpIHsKICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX3JlZiIpIHsKICAgICAgZmlsbE91dEZvcm1Gb3JUeXBlKGRvbSwgbmFtZSwg");
    sb.append("dHlwZXNbdHlwZS5yZWZdLCB0eXBlcyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIGZvciAodmFyIGZpZWxkIGluIHR5cGUuZmll");
    sb.append("bGRzKSB7CiAgICAgICAgdmFyIGZpZWxkVHlwZSA9IHR5cGUuZmllbGRzW2ZpZWxkXS50eXBlOwogICAg");
    sb.append("ICAgIHZhciBmaWVsZEhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAg");
    sb.append("IGZpbGxPdXRGb3JtRm9yVHlwZShmaWVsZEhvbGRlciwgbmFtZSA9PSAiIiA/IGZpZWxkIDogKG5hbWUg");
    sb.append("KyAiLiIgKyBmaWVsZCksIGZpZWxkVHlwZSwgdHlwZXMpOwogICAgICAgIGRvbS5hcHBlbmQoZmllbGRI");
    sb.append("b2xkZXIpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX2FycmF5IikgewogICAgICAvLyBUT0RPCiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0g");
    sb.append("Im5hdGl2ZV9tYXliZSIpIHsKICAgICAgdmFyIG1heWJlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVs");
    sb.append("Iik7CiAgICAgIGxhYmVsLmlubmVySFRNTCA9ICJlbmFibGUgIiArIG5hbWU7CiAgICAgIHZhciBjaGVj");
    sb.append("a2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGNoZWNrYm94LnR5cGUg");
    sb.append("PSAiY2hlY2tib3giOwogICAgICBjaGVja2JveC5pZCA9IG5leHRGb3JtSWQoKTsKICAgICAgY2hlY2ti");
    sb.append("b3gubmFtZSA9ICIiOwogICAgICBsYWJlbC5odG1sRm9yID0gY2hlY2tib3guaWQ7CiAgICAgIHZhciBt");
    sb.append("YXliZVZhbHVlUmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBtYXli");
    sb.append("ZVZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGZpbGxPdXRGb3JtRm9y");
    sb.append("VHlwZShtYXliZVZhbHVlLCBuYW1lLCB0eXBlLnR5cGUsIHR5cGVzKTsKICAgICAgbWF5YmVIb2xkZXIu");
    sb.append("YXBwZW5kKGxhYmVsKTsKICAgICAgbWF5YmVIb2xkZXIuYXBwZW5kKGNoZWNrYm94KTsKICAgICAgbWF5");
    sb.append("YmVIb2xkZXIuYXBwZW5kKG1heWJlVmFsdWVSZWYpOwogICAgICBkb20uYXBwZW5kKG1heWJlSG9sZGVy");
    sb.append("KTsKICAgICAgY2hlY2tib3gub25jaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBudWtlKG1heWJl");
    sb.append("VmFsdWVSZWYpOwogICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7CiAgICAgICAgICBtYXliZVZh");
    sb.append("bHVlUmVmLmFwcGVuZChtYXliZVZhbHVlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybjsK");
    sb.append("ICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAibmF0aXZlX3ZhbHVlIikgewogICAgICB2YXIgbGFi");
    sb.append("ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwogICAgICB2YXIgaW5wdXQgPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoKICAgICAgaW5wdXQuaWQgPSAiZGVidWdnZXJfZm9y");
    sb.append("bV9pZF8iICsgbmV4dEZvcm1JZCgpOwogICAgICBsYWJlbC5pbm5lckhUTUwgPSBuYW1lOwogICAgICBp");
    sb.append("bnB1dC5uYW1lID0gbmFtZTsKICAgICAgaW5wdXQuc3R5bGUgPSBpbnB1dFN0eWxlOwogICAgICBpbnB1");
    sb.append("dC50eXBlID0gInRleHQiOwogICAgICBsYWJlbC5mb3JIdG1sID0gaW5wdXQuaWQ7CiAgICAgIGRvbS5h");
    sb.append("cHBlbmQobGFiZWwpOwogICAgICBkb20uYXBwZW5kKGlucHV0KTsKICAgICAgcmV0dXJuOwogICAgfQog");
    sb.append("ICAgZG9tLmlubmVySFRNTCA9IG5hbWUgKyAiLS0+IiArIEpTT04uc3RyaW5naWZ5KHR5cGUpOwogIH07");
    sb.append("CgogIHZhciBtYWtlQ2hhbm5lbERlYnVnZ2VyID0gZnVuY3Rpb24oY2hhbm5lbHMsIHR5cGVzLCBjb25u");
    sb.append("ZWN0aW9uKSB7CiAgICB2YXIgc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3Qi");
    sb.append("KTsKICAgIHNlbGVjdG9yLnN0eWxlID0gImJhY2tncm91bmQ6ICMzMzM7IGNvbG9yOiNmZmY7IjsKICAg");
    sb.append("IHZpZXdDaGFubmVscy5hcHBlbmQoc2VsZWN0b3IpOwogICAgdmFyIGZvcm1Ib2xkZXIgPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHZpZXdDaGFubmVscy5hcHBlbmQoZm9ybUhvbGRlcik7");
    sb.append("CiAgICB2YXIgY2hvb3NlID0gZnVuY3Rpb24oY2hhbm5lbCkgewogICAgICBudWtlKGZvcm1Ib2xkZXIp");
    sb.append("OwogICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTsKICAgICAgZm9y");
    sb.append("bUhvbGRlci5hcHBlbmQoZm9ybSk7CiAgICAgIHZhciB0eXBlID0gdHlwZXNbY2hhbm5lbHNbY2hhbm5l");
    sb.append("bF1dOwogICAgICBmaWxsT3V0Rm9ybUZvclR5cGUoZm9ybSwgIiIsIHR5cGUsIHR5cGVzKTsKCiAgICAg");
    sb.append("IHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgYnV0dG9u");
    sb.append("LnN0eWxlID0gYnV0dG9uU3R5bGU7CiAgICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQp");
    sb.append("IHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciBtZXNzYWdlID0gUnhI");
    sb.append("VE1MLkJ1aWxkRm9ybU9iamVjdChmb3JtKTsKICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlNlbmRp");
    sb.append("bmciOwogICAgICAgIGNvbnNvbGUubG9nKGNoYW5uZWwgKyAiOiIgKyBKU09OLnN0cmluZ2lmeShtZXNz");
    sb.append("YWdlKSk7CiAgICAgICAgY29ubmVjdGlvbi5zZW5kKGNoYW5uZWwsIG1lc3NhZ2UsIHsKICAgICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlN1Y2Nl");
    sb.append("c3MhIFNlbmQgQW5vdGhlciEiOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9u");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIltGYWlsZWQ6IiArIHJlYXNv");
    sb.append("biArICJdLCBUcnkgQWdhaW4iOwogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICB9OwogICAgICBi");
    sb.append("dXR0b24uaW5uZXJIVE1MID0gIlNlbmQiOwogICAgICBmb3JtLmFwcGVuZChidXR0b24pOwogICAgICAv");
    sb.append("LyBCdWlsZEZvcm1PYmplY3QKICAgIH07CiAgICB2YXIgZmlyc3QgPSBudWxsOwogICAgdmFyIGNoYW5u");
    sb.append("ZWxzU29ydGVkID0gW107CiAgICBmb3IgKHZhciBjaCBpbiBjaGFubmVscykgewogICAgICBjaGFubmVs");
    sb.append("c1NvcnRlZC5wdXNoKGNoKTsKICAgIH0KICAgIGNoYW5uZWxzU29ydGVkLnNvcnQoKTsKICAgIGZvciAo");
    sb.append("dmFyIGsgaW4gY2hhbm5lbHNTb3J0ZWQpIHsKICAgICAgdmFyIGNoID0gY2hhbm5lbHNTb3J0ZWRba107");
    sb.append("CiAgICAgIGlmIChmaXJzdCA9PSBudWxsKSB7CiAgICAgICAgZmlyc3QgPSBjaDsKICAgICAgfQogICAg");
    sb.append("ICB2YXIgbXNnVHlwZSA9IGNoYW5uZWxzW2NoXTsKICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQuaW5uZXJIVE1MID0gY2ggKyAiIDogIiArIG1zZ1R5");
    sb.append("cGU7CiAgICAgIG9wdC5sYWJlbCA9IGNoICsgIiA6ICIgKyBtc2dUeXBlOwogICAgICBvcHQudmFsdWUg");
    sb.append("PSBjaDsKICAgICAgc2VsZWN0b3IuYXBwZW5kKG9wdCk7CiAgICAgIHNlbGVjdG9yLm9uY2hhbmdlID0g");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICAgICAgY2hvb3NlKHNlbGVjdG9yLnZhbHVlKTsKICAgICAgfTsKICAgIH0K");
    sb.append("CiAgICBpZiAoZmlyc3QgIT0gbnVsbCkgewogICAgICBjaG9vc2UoZmlyc3QpOwogICAgfQogIH07Cgog");
    sb.append("IHZhciByZW5kZXIgPSBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tuYW1l");
    sb.append("XTsKICAgIGlmIChjby5yZW5kZXJlZCA9PSBjby5ib3VuZCkgewogICAgICByZXR1cm47CiAgICB9CiAg");
    sb.append("ICBjby5yZW5kZXJlZCA9IGNvLmJvdW5kOwogICAgY28uZGVidWdfdHJlZS5udWtlKCk7CiAgICBudWtl");
    sb.append("KHZpZXdKc29uKTsKICAgIG51a2Uodmlld0NoYW5uZWxzKTsKCiAgICB2YXIgaGFuZGxlciA9IHsKICAg");
    sb.append("ICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAvLyBoYW5kbGUgdGhlIGRhdGEg");
    sb.append("aW5zcGVjdG9yIHRhYgogICAgICAgIHZhciByZWZsZWN0aW9uID0gcGF5bG9hZC5yZWZsZWN0aW9uOwog");
    sb.append("ICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEocmVmbGVjdGlvbi50eXBlc1si");
    sb.append("X19Sb290Il0sIHJlZmxlY3Rpb24udHlwZXMpOwogICAgICAgIHZpZXdKc29uLmFwcGVuZChyZXN1bHQu");
    sb.append("ZG9tKTsKICAgICAgICBjby5kZWJ1Z190cmVlLnN1YnNjcmliZShyZXN1bHQudXBkYXRlKTsKICAgICAg");
    sb.append("ICAvLyBoYW5kbGUgdGhlIGNoYW5uZWxzIHRhYgogICAgICAgIG1ha2VDaGFubmVsRGVidWdnZXIocmVm");
    sb.append("bGVjdGlvbi5jaGFubmVscywgcmVmbGVjdGlvbi50eXBlcywgY28ucHRyKTsKICAgICAgfSwKICAgICAg");
    sb.append("ZmFpbHVyZTogZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0gIltG");
    sb.append("QUlMRUQgVE8gR0VUIFNDSEVNQToiICsgcmVhc29uICsgIl0iOwogICAgICAgIHZpZXdDaGFubmVscy5p");
    sb.append("bm5lckhUTUwgPSAiW0ZBSUxFRCBUTyBHRVQgU0NIRU1BOiIgKyByZWFzb24gKyAiXSI7CiAgICAgIH0K");
    sb.append("ICAgIH07CiAgICBpZiAoY28udmlhX2JpbGxpbmcpIHsKICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0g");
    sb.append("IkJpbGlsbmcgZG9jdW1lbnQgbm90IHN1cHBvcnRlZCI7CiAgICAgIHZpZXdDaGFubmVscy5pbm5lckhU");
    sb.append("TUwgPSB2aWV3SnNvbi5pbm5lckhUTUw7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChjby52aWFf");
    sb.append("ZG9tYWluKSB7CiAgICAgIGNvLnJhdy5Eb21haW5SZWZsZWN0KGNvLmlkZW50aXR5LCBjby5kb21haW4s");
    sb.append("IGhhbmRsZXIpOwogICAgfSBlbHNlIHsKICAgICAgY28ucmF3LlNwYWNlUmVmbGVjdChjby5pZGVudGl0");
    sb.append("eSwgY28uc3BhY2UsIGNvLmtleSwgaGFuZGxlcik7CiAgICB9CiAgfTsKCiAgdmFyIGNvbm5lY3Rpb25T");
    sb.append("ZWxlY3RvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwogIGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMzMzOyBjb2xvcjogI2ZmZiI7CiAgdmFyIHN3aXRjaF90");
    sb.append("b19jb25uZWN0aW9uID0gZnVuY3Rpb24obmFtZSkgewogICAgY3VycmVudCA9IG5hbWU7CiAgICBudWtl");
    sb.append("KHZpZXdDaGFubmVscyk7CiAgICBudWtlKHZpZXdKc29uKTsKICAgIGNvbm5lY3Rpb25zW25hbWVdLnJl");
    sb.append("bmRlcmVkID0gIiI7CiAgICByZW5kZXIobmFtZSk7CiAgfTsKICBjb25uZWN0aW9uU2VsZWN0b3Iub25j");
    sb.append("aGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgIHN3aXRjaF90b19jb25uZWN0aW9uKGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci52YWx1ZSk7CiAgfTsKICB2YXIgcmVmcmVzaF9zZWxlY3QgPSBmdW5jdGlvbigpIHsKICAgIG51");
    sb.append("a2UoY29ubmVjdGlvblNlbGVjdG9yKTsKICAgIGZvciAodmFyIG5hbWUgaW4gY29ubmVjdGlvbnMpIHsK");
    sb.append("ICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQu");
    sb.append("dmFsdWUgPSBuYW1lOwogICAgICBvcHQuaW5uZXJUZXh0ID0gbmFtZTsKICAgICAgY29ubmVjdGlvblNl");
    sb.append("bGVjdG9yLmFwcGVuZENoaWxkKG9wdCk7CiAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHsKICAgICAg");
    sb.append("ICBzd2l0Y2hfdG9fY29ubmVjdGlvbihuYW1lKTsKICAgICAgICBjb25uZWN0aW9uU2VsZWN0b3IudmFs");
    sb.append("dWUgPSBuYW1lOwogICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi50b2dnbGUgPSBmdW5jdGlvbigpIHsK");
    sb.append("ICAgIGlmIChzZWxmLnNob3duKSB7CiAgICAgIHRyeSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1v");
    sb.append("dmVDaGlsZChzZWxmLnJvb3QpOwogICAgICB9IGNhdGNoIChub3RwcmVzZW50KSB7CiAgICAgICAgc2Vs");
    sb.append("Zi5zaG93biA9ICFzZWxmLnNob3duOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHNlbGYucm9v");
    sb.append("dCk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgc2VsZi5yb290ID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGRlYnVnZ2VyUG9zaXRpb24gPSBsb2NhbFN0b3JhZ2Uu");
    sb.append("Z2V0SXRlbSgiQWRhbWFEZWJ1Z2dlclBvc2l0aW9uIik7CiAgICAgIGlmICghZGVidWdnZXJQb3NpdGlv");
    sb.append("biB8fCBkZWJ1Z2dlclBvc2l0aW9uID09ICIiKSB7CiAgICAgICAgZGVidWdnZXJQb3NpdGlvbiA9ICJ0");
    sb.append("b3A6MHB4OyBsZWZ0OjBweDt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiOwogICAgICB9CiAgICAgIHNl");
    sb.append("bGYucm9vdC5zdHlsZSA9ICJwb3NpdGlvbjphYnNvbHV0ZTsiICsgZGVidWdnZXJQb3NpdGlvbiArICI7");
    sb.append("YmFja2dyb3VuZDogIzAwMDtib3JkZXI6MXB4IHNvbGlkIHJlZDt6LWluZGV4OjEwMDA7IG92ZXJmbG93");
    sb.append("OnNjcm9sbCI7CiAgICAgIHZhciB0aXRsZUJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIp");
    sb.append("OwogICAgICB0aXRsZUJhci5pbm5lckhUTUwgPSAiQWRhbWEgRGVidWdnZXIiOwogICAgICB0aXRsZUJh");
    sb.append("ci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMjIyOyBjb2xvcjogIzBmMDsgY3Vyc29yOm1vdmU7IHdpZHRo");
    sb.append("OjEwMCU7IGZvbnQtdmFyaWFudDogc21hbGwtY2FwczsgcGFkZGluZzoycHg7IHRleHQtYWxpZ246IGNl");
    sb.append("bnRlcjsiOwogICAgICB0aXRsZUJhci5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAg");
    sb.append("ZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICB2YXIgcmVjdCA9IHNlbGYucm9vdC5nZXRCb3VuZGlu");
    sb.append("Z0NsaWVudFJlY3QoKTsKICAgICAgICB2YXIgc3RhcnQgPSB7eDogZXYuY2xpZW50WCwgeTogZXYuY2xp");
    sb.append("ZW50WX07CiAgICAgICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uKG54KSB7CiAgICAgICAgICBzZWxmLnJv");
    sb.append("b3Quc3R5bGUubGVmdCA9IChyZWN0LmxlZnQgKyBueC5jbGllbnRYIC0gc3RhcnQueCkgKyAicHgiOwog");
    sb.append("ICAgICAgICAgc2VsZi5yb290LnN0eWxlLnRvcCA9IChyZWN0LnRvcCArIG54LmNsaWVudFkgLSBzdGFy");
    sb.append("dC55KSArICJweCI7CiAgICAgICAgfTsKICAgICAgICB3aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlv");
    sb.append("bihueCkgewogICAgICAgICAgdXBkYXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVt");
    sb.append("KCJBZGFtYURlYnVnZ2VyUG9zaXRpb24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0");
    sb.append("OiIrc2VsZi5yb290LnN0eWxlLmxlZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAg");
    sb.append("ICB9OwogICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbihueCkgewogICAgICAgICAgdXBk");
    sb.append("YXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJBZGFtYURlYnVnZ2VyUG9zaXRp");
    sb.append("b24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0OiIrc2VsZi5yb290LnN0eWxlLmxl");
    sb.append("ZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAgICAgIHdpbmRvdy5vbm1vdXNlbW92");
    sb.append("ZSA9IGZ1bmN0aW9uKCkge307CiAgICAgICAgICB3aW5kb3cub25tb3VzZXVwID0gZnVuY3Rpb24oKSB7");
    sb.append("fTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzZWxmLnJvb3Qu");
    sb.append("YXBwZW5kQ2hpbGQodGl0bGVCYXIpOwogICAgICBzZWxmLnJvb3QuYXBwZW5kQ2hpbGQoY29ubmVjdGlv");
    sb.append("blNlbGVjdG9yKTsKICAgICAgc2VsZi5yb290LmFwcGVuZENoaWxkKHZpZXdKc29uKTsKICAgICAgc2Vs");
    sb.append("Zi5yb290LmFwcGVuZENoaWxkKHZpZXdDaGFubmVscyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5k");
    sb.append("Q2hpbGQoc2VsZi5yb290KTsKICAgIH0KICAgIHNlbGYuc2hvd24gPSAhc2VsZi5zaG93bjsKICB9OwoK");
    sb.append("ICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oY29ubmVjdGlvbikgewogICAgY29ubmVjdGlvbnNbY29u");
    sb.append("bmVjdGlvbi5uYW1lXSA9IGNvbm5lY3Rpb247CiAgICBjb25uZWN0aW9uLmRlYnVnX3RyZWUgPSBuZXcg");
    sb.append("QWRhbWFUcmVlKCk7CiAgICBjb25uZWN0aW9uLmRlYnVnZ2luZyA9ICI/IjsKICAgIHJlZnJlc2hfc2Vs");
    sb.append("ZWN0KCk7CiAgICByZXR1cm4gZnVuY3Rpb24ocGF5bG9hZCkgewogICAgICBpZiAoY29ubmVjdGlvbi5i");
    sb.append("b3VuZCAhPSBjb25uZWN0aW9uLmRlYnVnZ2luZyAmJiBjdXJyZW50ID09IGNvbm5lY3Rpb24ubmFtZSkg");
    sb.append("ewogICAgICAgIHJlbmRlcihjb25uZWN0aW9uLm5hbWUpOwogICAgICB9CiAgICAgIGlmICgiZGF0YSIg");
    sb.append("aW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgIGNvbm5lY3Rpb24uZGVidWdfdHJlZS51cGRhdGUocGF5");
    sb.append("bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgfQogICAgICAvKgogICAgICBpZiAoIm91dHN0YW5kaW5nIiBp");
    sb.append("biBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBjby5vbmRlY2lkZShwYXlsb2FkLmRlbHRhLm91dHN0");
    sb.append("YW5kaW5nKTsKICAgICAgfQogICAgICBpZiAoJ3ZpZXdzdGF0ZScgaW4gcGF5bG9hZC5kZWx0YSkgewov");
    sb.append("LyAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLnZpZXdzdGF0ZSk7CiAg");
    sb.append("ICAgIH0KICAgICAgaWYgKCdnb3RvJyBpbiBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBzZWxmLmdv");
    sb.append("dG8ocGF5bG9hZC5kZWx0YS5nb3RvKTsKICAgICAgfQogICAgICAqLwogICAgfQogIH07CiAgcmV0dXJu");
    sb.append("IHNlbGY7Cn0pKCk7");
    return sb.toString();
  }
  public static final String RXHTML = new String(Base64.getDecoder().decode(make_rxhtml()), StandardCharsets.UTF_8);
  private static String make_rxhtml() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIFJ4SFRNTCA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB7fTsKCiAgdmFyIHRlbXBsYXRl");
    sb.append("cyA9IHt9OwogIHZhciByb3V0ZXIgPSB7fTsKICAvLyBUaGlzIHN0cmFuZ2UgZXNjYXBpbmcgaXMgZm9y");
    sb.append("IGRldmVsb3BlciBtb2RlIHRvIHByb3h5IHRvIGxvY2FsaG9zdC4KICB2YXIgY29ubmVjdGlvbiA9IG5l");
    sb.append("dyBBZGFtYS5Db25uZWN0aW9uKC8qRU5EUE9JTlQ9WyovQWRhbWEuUHJvZHVjdGlvbi8qXSovKTsKICB2");
    sb.append("YXIgY29ubmVjdGlvbnMgPSB7fTsKICBzZWxmLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uOwogIHNlbGYu");
    sb.append("YnVtcCA9IGZ1bmN0aW9uKG0pIHsKICAgIGNvbm5lY3Rpb24uYnVtcChtKTsKICB9OwoKICB2YXIgY29u");
    sb.append("bmVjdGlvbk1vbml0b3JEb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICBjb25uZWN0");
    sb.append("aW9uLm9uc3RhdHVzY2hhbmdlID0gZnVuY3Rpb24gKHN0YXR1cykgewogICAgdmFyIGljb24gPSBmdW5j");
    sb.append("dGlvbiAoY29sb3IpIHsgcmV0dXJuICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9z");
    sb.append("dmdcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVc");
    sb.append("IiBzdHJva2U9XCIiICsgY29sb3IgKyAiXCIgc3R5bGU9XCJ3aWR0aDoxNnB4OyBoZWlnaHQ6MTZweFwi");
    sb.append("PjxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGQ9");
    sb.append("XCJNOC4yODggMTUuMDM4YTUuMjUgNS4yNSAwIDAxNy40MjQgME01LjEwNiAxMS44NTZjMy44MDctMy44");
    sb.append("MDggOS45OC0zLjgwOCAxMy43ODggME0xLjkyNCA4LjY3NGM1LjU2NS01LjU2NSAxNC41ODctNS41NjUg");
    sb.append("MjAuMTUyIDBNMTIuNTMgMTguMjJsLS41My41My0uNTMtLjUzYS43NS43NSAwIDAxMS4wNiAwelwiIC8+");
    sb.append("PC9zdmc+XG4iOyB9OwogICAgaWYgKCFzdGF0dXMpIHsKICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20u");
    sb.append("dGl0bGUgPSAiZGlzY29ubmVjdGVkIjsKICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20uaW5uZXJIVE1M");
    sb.append("ID0gaWNvbigicmVkIik7CiAgICAgIGNvbm5lY3Rpb24ub25waW5nID0gZnVuY3Rpb24gKF8xLCBfMikg");
    sb.append("eyB9OwogICAgfSBlbHNlIHsKICAgICAgY29ubmVjdGlvbi5vbnBpbmcgPSBmdW5jdGlvbiAoXywgbGF0");
    sb.append("ZW5jeSkgewogICAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLnRpdGxlID0gImNvbm5lY3RlZDsgbGF0");
    sb.append("ZW5jeT0iICsgbGF0ZW5jeSArICJtcyI7CiAgICAgICAgaWYgKGxhdGVuY3kgPj0gMTAwKSB7CiAgICAg");
    sb.append("ICAgICBjb25uZWN0aW9uTW9uaXRvckRvbS5pbm5lckhUTUwgPSBpY29uKCJvcmFuZ2UiKTsKICAgICAg");
    sb.append("ICB9IGVsc2UgewogICAgICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20uaW5uZXJIVE1MID0gaWNvbigi");
    sb.append("Z3JlZW4iKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfTsKICBjb25uZWN0aW9uTW9uaXRvckRv");
    sb.append("bS5zdHlsZSA9ICJwb3NpdGlvbjpmaXhlZDsgYm90dG9tOjBweDsgcmlnaHQ6MHB4IjsKICBpZiAoQWRh");
    sb.append("bWEuRGVidWdnZXIpIHsKICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLm9uY2xpY2sgPSBBZGFtYS5EZWJ1");
    sb.append("Z2dlci50b2dnbGU7CiAgfQogIGNvbm5lY3Rpb24uc3RhcnQoKTsKICBjb25uZWN0aW9uLmtlZXBhbGl2");
    sb.append("ZSgpOwoKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihldmVudCkgewog");
    sb.append("ICAgdmFyIHBheWxvYWQgPSB7fTsKICAgIHBheWxvYWQubWVzc2FnZSA9IGV2ZW50Lm1lc3NhZ2U7CiAg");
    sb.append("ICBwYXlsb2FkLmZpbGVuYW1lID0gZXZlbnQuZmlsZW5hbWU7CiAgICBwYXlsb2FkLmxpbmVubyA9IGV2");
    sb.append("ZW50LmxpbmVubzsKICAgIHBheWxvYWQuY29sbm8gPSBldmVudC5jb2xubzsKICAgIHBheWxvYWQuZmls");
    sb.append("ZW5hbWUgPSBldmVudC5maWxlbmFtZTsKICAgIGNvbm5lY3Rpb24ubG9nKCJ3aW5kb3cuZXJyb3IiLCBK");
    sb.append("U09OLnN0cmluZ2lmeShwYXlsb2FkKSk7CiAgfSk7CgogIGNvbm5lY3Rpb24uYnVtcCgicnhodG1sIik7");
    sb.append("CgogIHZhciByb290UmVwbGFjZSA9ICIvIjsKICB2YXIgZml4UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7");
    sb.append("CiAgICByZXR1cm4gcGF0aDsKICB9OwogIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUuZW5kc1dp");
    sb.append("dGgoIi5hZGFtYS1wbGF0Zm9ybS5jb20iKSAmJiAhd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmVuZHNX");
    sb.append("aXRoKCJpZGUuYWRhbWEtcGxhdGZvcm0uY29tIikpIHsKICAgIC8vIHRoaXMgZXhpc3RzIGlmIHNvbWVv");
    sb.append("bmUgaXMgdHJ5aW5nIHRvIHVzZSB0aGUgZ2xvYmFsIGRvbWFpbiBmb3IgdGhlaXIgc2l0ZQogICAgdmFy");
    sb.append("IHBhcnRzID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCIvIik7CiAgICByb290UmVwbGFj");
    sb.append("ZSA9IFtwYXJ0c1swXSwgcGFydHNbMV0sIHBhcnRzWzJdLCAiIl0uam9pbigiLyIpOwogICAgdmFyIG9m");
    sb.append("ZnNldCA9IHBhcnRzWzBdLmxlbmd0aCArIHBhcnRzWzFdLmxlbmd0aCArIHBhcnRzWzJdLmxlbmd0aCAr");
    sb.append("IDI7CiAgICBmaXhQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHsKICAgICAgcmV0dXJuIHBhdGguc3Vic3Ry");
    sb.append("aW5nKG9mZnNldCk7CiAgICB9OwogIH0KCiAgdmFyIGZpeEhyZWYgPSBmdW5jdGlvbiAoaHJlZikgewog");
    sb.append("ICAgaWYgKCFocmVmKSB7CiAgICAgIHJldHVybiAiIyI7CiAgICB9CiAgICBpZiAoaHJlZi5zdGFydHNX");
    sb.append("aXRoKCIvIikpIHsKICAgICAgcmV0dXJuIHJvb3RSZXBsYWNlICsgaHJlZi5zdWJzdHJpbmcoMSk7CiAg");
    sb.append("ICB9CiAgICByZXR1cm4gaHJlZjsKICB9OwoKICB2YXIgZ2V0X2Nvbm5lY3Rpb25fb2JqID0gZnVuY3Rp");
    sb.append("b24gKG5hbWUpIHsKICAgIGlmIChuYW1lIGluIGNvbm5lY3Rpb25zKSB7CiAgICAgIHJldHVybiBjb25u");
    sb.append("ZWN0aW9uc1tuYW1lXTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgbmFtZTog");
    sb.append("bmFtZSwKICAgICAgICBwdHI6IG51bGwsCiAgICAgICAgdHJlZTogbmV3IEFkYW1hVHJlZSgpLAogICAg");
    sb.append("ICAgIG91dHN0YW5kaW5nOiB7fSwKICAgICAgICBkZWNpc2lvbnM6IHt9LAogICAgICAgIGNob2ljZV9z");
    sb.append("dWJzOiB7fSwKICAgICAgICByZXNldHM6IHt9LAogICAgICAgIGNvbm5lY3Rpb25fZXZlbnRzOiB7fSwK");
    sb.append("ICAgICAgICBzeW5jX2V2ZW50czoge30sCiAgICAgICAgaWQ6IDAsCiAgICAgICAgY29ubmVjdGlvbl9z");
    sb.append("dGF0ZTogZmFsc2UsCiAgICAgICAgY2hvaWNlczoge30sCiAgICAgICAgYm91bmQ6ICIiLAogICAgICAg");
    sb.append("IHZpZXdzdGF0ZV9zZW50OiB0cnVlLAogICAgICAgIHZpZXdzdGF0ZV9jbG9uZTogIiIsCiAgICAgICAg");
    sb.append("aGFzX2ZpbHRlcjogZmFsc2UsCiAgICAgICAgc3luY2VkOiBmYWxzZSwKICAgICAgICBmaWx0ZXI6IHt9");
    sb.append("LAogICAgICAgIHZzc2VxOiAwLAogICAgICAgIGRlYnVnZ2VyOiBmdW5jdGlvbiAoZGVsdGEpIHsgfSwK");
    sb.append("ICAgICAgICByYXc6IGNvbm5lY3Rpb24KICAgICAgfTsKICAgICAgb2JqLm51a2UgPSBmdW5jdGlvbiAo");
    sb.append("KSB7CiAgICAgICAgdGhpcy5jb25uZWN0aW9uX2V2ZW50cyA9IHt9OwogICAgICAgIHRoaXMuc3luY19l");
    sb.append("dmVudHMgPSB7fTsKICAgICAgICB0aGlzLmNob2ljZV9zdWJzID0ge307CiAgICAgIH0uYmluZChvYmop");
    sb.append("OwogICAgICBpZiAoQWRhbWEuRGVidWdnZXIpIHsKICAgICAgICBvYmouZGVidWdnZXIgPSBBZGFtYS5E");
    sb.append("ZWJ1Z2dlci5yZWdpc3RlcihvYmopOwogICAgICB9CiAgICAgIG9iai5zeW5jID0gZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICAgIHZhciBzeW5jZWQgPSB0aGlzLmNvbm5lY3Rpb25fc3RhdGUgJiYgdGhpcy52aWV3c3Rh");
    sb.append("dGVfc2VudDsKICAgICAgICBpZiAodGhpcy5zeW5jZWQgPT0gc3luY2VkKSB7CiAgICAgICAgICByZXR1");
    sb.append("cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuc3luY2VkID0gc3luY2VkOwogICAgICAgIHZhciBheGUg");
    sb.append("PSBbXTsKICAgICAgICBmb3IgKHZhciBzdWIgaW4gb2JqLnN5bmNfZXZlbnRzKSB7CiAgICAgICAgICBp");
    sb.append("ZiAoIShvYmouc3luY19ldmVudHNbc3ViXShzeW5jZWQpKSkgewogICAgICAgICAgICBheGUucHVzaChz");
    sb.append("dWIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5s");
    sb.append("ZW5ndGg7IGsrKykgewogICAgICAgICAgZGVsZXRlIG9iai5zeW5jX2V2ZW50c1theGVba11dOwogICAg");
    sb.append("ICAgIH0KICAgICAgfS5iaW5kKG9iaik7CiAgICAgIG9iai5zdWJzY3JpYmVfc3luYyA9IGZ1bmN0aW9u");
    sb.append("IChjYWxsYmFjaykgewogICAgICAgIHZhciBzID0gIi18IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlz");
    sb.append("LnN5bmNfZXZlbnRzW3NdID0gY2FsbGJhY2s7CiAgICAgICAgY2FsbGJhY2sodGhpcy5zeW5jZWQpOwog");
    sb.append("ICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5zeW5jX2V2ZW50");
    sb.append("c1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH07CiAgICAgIG9iai5zZXRfY29ubmVjdGVk");
    sb.append("ID0gZnVuY3Rpb24gKGNzKSB7CiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbl9zdGF0ZSA9PSBjcykg");
    sb.append("ewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmNvbm5lY3Rpb25fc3RhdGUg");
    sb.append("PSBjczsKICAgICAgICB2YXIgYXhlID0gW107CiAgICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5jb25u");
    sb.append("ZWN0aW9uX2V2ZW50cykgewogICAgICAgICAgaWYgKCEob2JqLmNvbm5lY3Rpb25fZXZlbnRzW3N1Yl0o");
    sb.append("Y3MpKSkgewogICAgICAgICAgICBheGUucHVzaChzdWIpOwogICAgICAgICAgfQogICAgICAgIH0KICAg");
    sb.append("ICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAgZGVsZXRl");
    sb.append("IG9iai5jb25uZWN0aW9uX2V2ZW50c1theGVba11dOwogICAgICAgIH0KICAgICAgICB0aGlzLnN5bmMo");
    sb.append("KTsKICAgICAgfS5iaW5kKG9iaik7CiAgICAgIG9iai5jb25uZWN0ZWQgPSBmdW5jdGlvbiAoY2FsbGJh");
    sb.append("Y2spIHsKICAgICAgICB2YXIgcyA9ICItfCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhpcy5jb25uZWN0");
    sb.append("aW9uX2V2ZW50c1tzXSA9IGNhbGxiYWNrOwogICAgICAgIGNhbGxiYWNrKHRoaXMuY29ubmVjdGlvbl9z");
    sb.append("dGF0ZSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmNv");
    sb.append("bm5lY3Rpb25fZXZlbnRzW3NdOwogICAgICAgIH0uYmluZCh0aGlzKTsKICAgICAgfS5iaW5kKG9iaik7");
    sb.append("CiAgICAgIG9iai5zdWJzY3JpYmVfYW55ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgdmFy");
    sb.append("IHMgPSAiLXwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMuZGVjaXNpb25zW3NdID0gY2FsbGJhY2s7");
    sb.append("CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlY2lzaW9u");
    sb.append("c1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vi");
    sb.append("c2NyaWJlID0gZnVuY3Rpb24gKGNoYW5uZWwsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSBjaGFu");
    sb.append("bmVsICsgInwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMuZGVjaXNpb25zW3NdID0gY2FsbGJhY2s7");
    sb.append("CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlY2lzaW9u");
    sb.append("c1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vi");
    sb.append("c2NyaWJlX3Jlc2V0ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIGRyID0gInJlc2V0");
    sb.append("fCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhpcy5yZXNldHNbZHJdID0gY2FsbGJhY2s7CiAgICAgICAg");
    sb.append("cmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlc2V0c1tkcl07CiAgICAg");
    sb.append("ICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1YnNjcmliZV9jaG9p");
    sb.append("Y2UgPSBmdW5jdGlvbiAoY2hhbm5lbCwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9IGNoYW5uZWwg");
    sb.append("KyAifCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhpcy5jaG9pY2Vfc3Vic1tzXSA9IGNhbGxiYWNrOwog");
    sb.append("ICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5jaG9pY2Vfc3Vi");
    sb.append("c1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmoub25j");
    sb.append("aG9pY2VzID0gZnVuY3Rpb24gKGNoYW5uZWwsIGNob2ljZSkgewogICAgICAgIHZhciBheGUgPSBbXTsK");
    sb.append("ICAgICAgICBmb3IgKHZhciBzdWIgaW4gb2JqLmNob2ljZV9zdWJzKSB7CiAgICAgICAgICBpZiAoc3Vi");
    sb.append("LnN0YXJ0c1dpdGgoY2hhbm5lbCArICJ8IikpIHsKICAgICAgICAgICAgaWYgKCFvYmouY2hvaWNlX3N1");
    sb.append("YnNbc3ViXShjaG9pY2UpKSB7CiAgICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5n");
    sb.append("dGg7IGsrKykgewogICAgICAgICAgZGVsZXRlIG9iai5jaG9pY2Vfc3Vic1theGVba11dOwogICAgICAg");
    sb.append("IH0KICAgICAgfTsKICAgICAgb2JqLm9uZGVjaWRlID0gZnVuY3Rpb24gKG91dHN0YW5kaW5nKSB7CiAg");
    sb.append("ICAgICAgdmFyIGF4ZVJlc2V0ID0gW107CiAgICAgICAgZm9yICh2YXIgZHIgaW4gb2JqLnJlc2V0cykg");
    sb.append("ewogICAgICAgICAgdmFyIHIgPSBvYmoucmVzZXRzW2RyXTsKICAgICAgICAgIGlmICghKHIoKSkpIHsK");
    sb.append("ICAgICAgICAgICAgYXhlUmVzZXQucHVzaChkcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAg");
    sb.append("IGZvciAodmFyIGsgPSAwOyBrIDwgYXhlUmVzZXQubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0");
    sb.append("ZSBvYmoucmVzZXRzW2F4ZVJlc2V0W2tdXTsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgY2ggaW4g");
    sb.append("b2JqLm91dHN0YW5kaW5nKSB7CiAgICAgICAgICBvYmoub3V0c3RhbmRpbmdbY2hdID0geyBvcHRpb25z");
    sb.append("OiBbXSB9OwogICAgICAgIH0KICAgICAgICB2YXIgbiA9IG91dHN0YW5kaW5nLmxlbmd0aDsKICAgICAg");
    sb.append("ICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgICAgdmFyIG8gPSBvdXRzdGFuZGlu");
    sb.append("Z1trXTsKICAgICAgICAgIG9iai5vdXRzdGFuZGluZ1tvLmNoYW5uZWxdID0gbzsKICAgICAgICB9CiAg");
    sb.append("ICAgICAgZm9yICh2YXIgY2ggaW4gb2JqLm91dHN0YW5kaW5nKSB7CiAgICAgICAgICB2YXIgb3V0ID0g");
    sb.append("b2JqLm91dHN0YW5kaW5nW2NoXTsKICAgICAgICAgIHZhciBheGUgPSBbXTsKICAgICAgICAgIGZvciAo");
    sb.append("dmFyIHN1YiBpbiBvYmouZGVjaXNpb25zKSB7CiAgICAgICAgICAgIGlmIChzdWIuc3RhcnRzV2l0aChj");
    sb.append("aCArICJ8IikgfHwgc3ViLnN0YXJ0c1dpdGgoIi18IikpIHsKICAgICAgICAgICAgICBpZiAoIW9iai5k");
    sb.append("ZWNpc2lvbnNbc3ViXShvdXQsIGNoKSkgewogICAgICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAg");
    sb.append("ICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgYXhlLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgIGRlbGV0ZSBvYmouZGVjaXNpb25z");
    sb.append("W2F4ZVtrXV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgICBjb25uZWN0aW9uc1tu");
    sb.append("YW1lXSA9IG9iajsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwogIHNlbGYuZ2V0Q29ubmVjdGlv");
    sb.append("bkJ5TmFtZSA9IGdldF9jb25uZWN0aW9uX29iajsKCiAgc2VsZi5tYWtlID0gZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgcmV0dXJuIG5ldyBBZGFtYVRyZWUoKTsKICB9OwoKICAvLyBIRUxQRVIgfCBzdWJzY3JpYmUgdGhl");
    sb.append("IGdpdmVuICdzdWInIHRvIGNoYW5nZXMgd2l0aGluIHN0YXRlIGZvciB0aGUgZ2l2ZW4gZmllbGQgbmFt");
    sb.append("ZWQgbmFtZQogIHZhciBzdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIHN1YikgewogICAg");
    sb.append("dmFyIHNzID0gc2VsZi5wSShzdGF0ZSwgbmFtZSk7CiAgICB2YXIgcyA9IHNzW3NzLmN1cnJlbnRdOwog");
    sb.append("ICAgaWYgKHMgPT0gbnVsbCkgewogICAgICBjb25zb2xlLmVycm9yKHNzLmN1cnJlbnQgKyAiIGlzIG5v");
    sb.append("dCBhdmFpbGFibGU7IHVuYWJsZSB0byBzdWJzY3JpYmUuIik7CiAgICAgIHJldHVybjsKICAgIH0KICAg");
    sb.append("IGlmICgiQGUiIGluIHMuZGVsdGEpIHsKICAgICAgcy5kZWx0YVsiQGUiXS5wdXNoKHN1Yik7CiAgICB9");
    sb.append("IGVsc2UgewogICAgICBzLmRlbHRhWyJAZSJdID0gW3N1Yl07CiAgICB9CiAgfTsKICBzZWxmLnN1YnNj");
    sb.append("cmliZSA9IHN1YnNjcmliZTsKCiAgLy8gSEVMUEVSIHwgY3JlYXRlIGZyZXNoIHN0YXRlCiAgdmFyIGZy");
    sb.append("ZXNoID0gZnVuY3Rpb24gKHdoZXJlKSB7CiAgICByZXR1cm4gewogICAgICB0cmVlOiBuZXcgQWRhbWFU");
    sb.append("cmVlKCksCiAgICAgIGRlbHRhOiB7fSwKICAgICAgcGFyZW50OiBudWxsLAogICAgICBwYXRoOiBudWxs");
    sb.append("LAogICAgICB3aGVyZTogd2hlcmUKICAgIH07CiAgfTsKICBzZWxmLmZyZXNoID0gZnJlc2g7CgogIC8v");
    sb.append("IEhFTFBFUjogcmVtb3ZlIHBvdGVudGlhbGx5IHNlbnNpdGl2ZSBpbmZvcm1hdGlvbiBmcm9tIGFuIG9i");
    sb.append("amVjdAogIHZhciBzYWZlX2ZpbHRlciA9IGZ1bmN0aW9uKG8pIHsKICAgIGlmICgncGFzc3dvcmQnIGlu");
    sb.append("IG8pIHsKICAgICAgZGVsZXRlIG9bJ3Bhc3N3b3JkJ107CiAgICB9CiAgICBpZiAoJ29uZV90aW1lX3Bh");
    sb.append("c3N3b3JkJyBpbiBvKSB7CiAgICAgIGRlbGV0ZSBvWydvbmVfdGltZV9wYXNzd29yZCddOwogICAgfQog");
    sb.append("ICAgcmV0dXJuIG87CiAgfQoKICAvLyBIRUxQRVIgfCBjcmVhdGUgYSBuZXcgZGVsdGEgY29weSBmcm9t");
    sb.append("IHRoZSBnaXZlbiBzcGVjaWZpYyBzdGF0ZSAoaS5lLiBlaXRoZXIgZGF0YSBvciB2aWV3KQogIHZhciBu");
    sb.append("ZXdfZGVsdGFfY29weSA9IGZ1bmN0aW9uIChzcykgewogICAgaWYgKHNzID09IG51bGwpIHsKICAgICAg");
    sb.append("cmV0dXJuIG51bGw7CiAgICB9CiAgICB2YXIgcGFyZW50ID0gbnVsbDsKICAgIGlmIChzcy5wYXJlbnQg");
    sb.append("IT0gbnVsbCkgewogICAgICBwYXJlbnQgPSBuZXdfZGVsdGFfY29weShzcy5wYXJlbnQpOwogICAgfQog");
    sb.append("ICAgdmFyIG5ld19kZWx0YSA9IHt9OwogICAgaWYgKHBhcmVudCAhPSBudWxsKSB7CiAgICAgIHBhcmVu");
    sb.append("dC5kZWx0YVtzcy5wYXRoXSA9IG5ld19kZWx0YTsKICAgIH0KICAgIHJldHVybiB7IHRyZWU6IHNzLnRy");
    sb.append("ZWUsIHBhcmVudDogcGFyZW50LCBkZWx0YTogbmV3X2RlbHRhLCBwYXRoOiBzcy5wYXRoIH07CiAgfTsK");
    sb.append("ICBzZWxmLm1ha2VEZWx0YUNvcHkgPSBuZXdfZGVsdGFfY29weTsKCiAgLy8gSEVMUEVSIHwgY29uc3Ry");
    sb.append("dWN0IGEgcGF0aCB0bwogIHZhciBwYXRoX3RvID0gZnVuY3Rpb24gKHNzLCBvYmopIHsKICAgIGlmIChz");
    sb.append("cy5wYXJlbnQgIT0gbnVsbCkgewogICAgICB2YXIgcGVlbCA9IHt9OwogICAgICBwZWVsW3NzLnBhdGhd");
    sb.append("ID0gb2JqOwogICAgICByZXR1cm4gcGF0aF90byhzcy5wYXJlbnQsIHBlZWwpOwogICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwogIHNlbGYucGF0aFRvID0gcGF0aF90bzsKCiAgLy8g");
    sb.append("SEVMUEVSIHwgZ2V0IHRoZSByb290IG9mIHRoZSBzcGVjaWZpYyBzdGF0ZSAoaS5lLiBlaXRoZXIgdGhl");
    sb.append("IGRhdGEncyByb290IG9yIHRoZSB2aWV3J3Mgcm9vdCkKICB2YXIgcm9vdF9vZiA9IGZ1bmN0aW9uIChz");
    sb.append("cykgewogICAgdmFyIHggPSBzczsKICAgIHdoaWxlICh4LnBhcmVudCAhPSBudWxsKSB7CiAgICAgIHgg");
    sb.append("PSB4LnBhcmVudDsKICAgIH0KICAgIHJldHVybiB4OwogIH07CiAgc2VsZi5yb290T2YgPSByb290X29m");
    sb.append("OwoKICAvLyBIRUxQRVIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBmcm9tIHRoZSBnaXZlbiBET00g");
    sb.append("bm9kZQogIHZhciBudWtlID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQu");
    sb.append("bGFzdENoaWxkOwogICAgd2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3Qp");
    sb.append("OwogICAgICBsYXN0ID0gcGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwogIHNlbGYubnVrZSA9IG51");
    sb.append("a2U7CgogIC8vIEhFTFBFUjogZGVib3VuY2UgdGhlIGdpdmVuIGZ1bmN0aW9uYWwgd2hlbiByYXBpZCBm");
    sb.append("dW5jdGlvbiBzcHJlYWQgaXMgZXhwZWN0ZWQKICB2YXIgZGVib3VuY2UgPSBmdW5jdGlvbiAobXMsIGZv");
    sb.append("bykgewogICAgdmFyIHN0YXR1cyA9IHsgaW5mbGlnaHQ6IGZhbHNlLCB0aW1lb3V0OiBudWxsIH07CiAg");
    sb.append("ICBzdGF0dXMuaW5mbGlnaHQgPSBmYWxzZTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGlm");
    sb.append("ICghc3RhdHVzLmluZmxpZ2h0KSB7CiAgICAgICAgc3RhdHVzLmluZmxpZ2h0ID0gdHJ1ZTsKICAgICAg");
    sb.append("ICBzdGF0dXMudGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAg");
    sb.append("IHN0YXR1cy5pbmZsaWdodCA9IGZhbHNlOwogICAgICAgICAgc3RhdHVzLnRpbWVvdXQgPSBudWxsOwog");
    sb.append("ICAgICAgICAgZm9vKCk7CiAgICAgICAgfSwgbXMgLyogbXMgKi8pOyAvLyBkZWJvdW5jZSB0aGUgcGFy");
    sb.append("YW1ldGVycwogICAgICB9CiAgICB9OwogIH07CiAgc2VsZi5kZWJvdW5jZSA9IGRlYm91bmNlOwoKICAv");
    sb.append("LyBIRUxQRVIgfCBwcmVwYXJlIGEgZnJlZSB1bnN1YnNjcmliZSBvYmplY3QKICB2YXIgbWFrZV91bnN1");
    sb.append("YiA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIF9fZGF0YTogZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICB9LCBfX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgICAgfQogICAgfTsKICB9OwoKICAvLyBIRUxQ");
    sb.append("RVIgfCBhdWdtZW50IGFuIGV4aXN0aW5nIG9iamVjdCB3aXRoIHVuc3Vic2NyaWJlIGRhdGEKICB2YXIg");
    sb.append("YWRkX3Vuc3ViID0gZnVuY3Rpb24gKG9iaikgewogICAgb2JqLl9fZGF0YSA9IGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgIH07CiAgICBvYmouX192aWV3ID0gZnVuY3Rpb24gKCkgewogICAgfTsKICB9OwoKICAvLyBIRUxQ");
    sb.append("RVIgfCBmaXJlIHRoZSB1bnN1YnNjcmliZSBjYWxscyB3aXRoaW4gYW4gb2JqZWN0CiAgdmFyIGZpcmVf");
    sb.append("dW5zdWIgPSBmdW5jdGlvbiAodW5zdWIpIHsKICAgIHVuc3ViLl9fZGF0YSgpOwogICAgdW5zdWIuX192");
    sb.append("aWV3KCk7CiAgfTsKCiAgdmFyIGlzRW1wdHlEZWx0YSA9IGZ1bmN0aW9uKGRlbHRhKSB7CiAgICBpZiAo");
    sb.append("dHlwZW9mKGRlbHRhKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gZWxz");
    sb.append("ZSBpZiAoQXJyYXkuaXNBcnJheShkZWx0YSkpIHsKICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkZWx0");
    sb.append("YS5sZW5ndGg7IGorKykgewogICAgICAgIGlmICghaXNFbXB0eURlbHRhKGRlbHRhW2pdKSkgewogICAg");
    sb.append("ICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2Yo");
    sb.append("ZGVsdGEpID09ICJvYmplY3QiKSB7CiAgICAgIGZvciAodmFyIGsgaW4gZGVsdGEpIHsKICAgICAgICBp");
    sb.append("ZiAoIWlzRW1wdHlEZWx0YShkZWx0YVtrXSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg");
    sb.append("ICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy8gSEVMUEVSIHwgc3Vic2Ny");
    sb.append("aWJlIHRvIHN0YXRlIGFuZCBwb3B1bGF0ZSB1bnN1YnNjcmliZSBvYmplY3QKICB2YXIgc3Vic2NyaWJl");
    sb.append("X3N0YXRlID0gZnVuY3Rpb24gKHN0YXRlLCB1bnN1YikgewogICAgLy8gICYmICFpc0VtcHR5RGVsdGEo");
    sb.append("c3RhdGUuZGF0YSkKICAgIHVuc3ViLl9fZGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgIH07CiAgICB1bnN1");
    sb.append("Yi5fX3ZpZXcgPSBmdW5jdGlvbiAoKSB7CiAgICB9OwoKICAgIGlmIChzdGF0ZS5kYXRhICE9IG51bGwp");
    sb.append("IHsKICAgICAgdmFyIGRlbHRhID0gcm9vdF9vZihzdGF0ZS5kYXRhKS5kZWx0YTsKICAgICAgaWYgKCFp");
    sb.append("c0VtcHR5RGVsdGEoZGVsdGEpKSB7CiAgICAgICAgdW5zdWIuX19kYXRhID0gc3RhdGUuZGF0YS50cmVl");
    sb.append("LnN1YnNjcmliZShkZWx0YSk7CiAgICAgIH0KICAgIH0KICAgIC8vICAmJiAhaXNFbXB0eURlbHRhKHN0");
    sb.append("YXRlLnZpZXcpCiAgICBpZiAoc3RhdGUudmlldyAhPSBudWxsKSB7CiAgICAgIHZhciBkZWx0YSA9IHJv");
    sb.append("b3Rfb2Yoc3RhdGUudmlldykuZGVsdGE7CiAgICAgIGlmICghaXNFbXB0eURlbHRhKGRlbHRhKSkgewog");
    sb.append("ICAgICAgIHVuc3ViLl9fdmlldyA9IHN0YXRlLnZpZXcudHJlZS5zdWJzY3JpYmUoZGVsdGEpOwogICAg");
    sb.append("ICB9CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8IFN3aXRjaCB0byB0aGUgdmlldyBvYmplY3QKICBz");
    sb.append("ZWxmLnBWID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4geyBzZXJ2aWNlOiBzdGF0ZS5zZXJ2");
    sb.append("aWNlLCBkYXRhOiBzdGF0ZS5kYXRhLCB2aWV3OiBzdGF0ZS52aWV3LCBjdXJyZW50OiAidmlldyIgfTsK");
    sb.append("ICB9OwogIHNlbGYubmV3U3RhdGVWaWV3T2YgPSBzZWxmLnBWOwoKICAvLyBSVU5USU1FIHwgU3dpdGNo");
    sb.append("IHRvIHRoZSBkYXRhIG9iamVjdAogIHNlbGYucEQgPSBmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVy");
    sb.append("biB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZp");
    sb.append("ZXcsIGN1cnJlbnQ6ICJkYXRhIiB9OwogIH07CiAgc2VsZi5uZXdTdGF0ZURhdGFPZiA9IHNlbGYucEQ7");
    sb.append("CgogIC8vIFJVTlRJTUUgfCBTd2l0Y2ggdG8gdGhlIHJvb3Qgb2JqZWN0IC8gKFJvb3QpCiAgc2VsZi5w");
    sb.append("UiA9IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6IHN0YXRlLnNlcnZp");
    sb.append("Y2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6IHN0YXRlLmN1cnJl");
    sb.append("bnQgfTsKICAgIHZhciBwcmlvciA9IG5leHRbc3RhdGUuY3VycmVudF07CiAgICB3aGlsZSAocHJpb3Ig");
    sb.append("IT0gbnVsbCkgewogICAgICBuZXh0W3N0YXRlLmN1cnJlbnRdID0gcHJpb3I7CiAgICAgIHByaW9yID0g");
    sb.append("cHJpb3IucGFyZW50OwogICAgfQogICAgcmV0dXJuIG5leHQ7CiAgfTsKICBzZWxmLm5ld1N0YXRlUm9v");
    sb.append("dE9mID0gc2VsZi5wUjsKCiAgLy8gUlVOVElNRSB8IC4uLyAoVXApCiAgc2VsZi5wVSA9IGZ1bmN0aW9u");
    sb.append("IChzdGF0ZSkgewogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0");
    sb.append("YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6IHN0YXRlLmN1cnJlbnQgfTsKICAgIHZh");
    sb.append("ciBwcmlvciA9IG5leHRbc3RhdGUuY3VycmVudF07CiAgICBpZiAocHJpb3IucGFyZW50ICE9IG51bGwp");
    sb.append("IHsKICAgICAgbmV4dFtzdGF0ZS5jdXJyZW50XSA9IHByaW9yLnBhcmVudDsKICAgIH0KICAgIHJldHVy");
    sb.append("biBuZXh0OwogIH07CiAgc2VsZi5uZXdTdGF0ZVBhcmVudE9mID0gc2VsZi5wVTsKCiAgLy8gUlVOVElN");
    sb.append("RSB8IGRpdmUgb25lIGxldmVsIEludG8gcGF0aDEvcGF0aDIvLi4uLi9wYXRoTgogIHNlbGYucEkgPSBm");
    sb.append("dW5jdGlvbiAoc3RhdGUsIG5hbWUpIHsKICAgIHZhciBwcmlvciA9IHN0YXRlW3N0YXRlLmN1cnJlbnRd");
    sb.append("OwogICAgaWYgKHByaW9yID09IG51bGwpIHsKICAgICAgY29uc29sZS5lcnJvcihzdGF0ZS5jdXJyZW50");
    sb.append("ICsgIiBpcyBub3QgcHJlc2VudCIpOwogICAgICByZXR1cm4gc3RhdGU7CiAgICB9CiAgICBpZiAoIShu");
    sb.append("YW1lIGluIHByaW9yLmRlbHRhKSkgewogICAgICBwcmlvci5kZWx0YVtuYW1lXSA9IHt9OwogICAgfQog");
    sb.append("ICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZp");
    sb.append("ZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6IHN0YXRlLmN1cnJlbnQgfTsKICAgIG5leHRbc3RhdGUuY3Vy");
    sb.append("cmVudF0gPSB7CiAgICAgIHRyZWU6IHByaW9yLnRyZWUsCiAgICAgIGRlbHRhOiBwcmlvci5kZWx0YVtu");
    sb.append("YW1lXSwKICAgICAgcGFyZW50OiBwcmlvciwKICAgICAgcGF0aDogbmFtZQogICAgfTsKICAgIGlmIChu");
    sb.append("ZXh0LmN1cnJlbnQgPT0gImRhdGEiKSB7CiAgICAgIG5leHQuZGF0YS5jb25uZWN0aW9uID0gcHJpb3Iu");
    sb.append("Y29ubmVjdGlvbjsKICAgIH0KICAgIHJldHVybiBuZXh0OwogIH07CiAgc2VsZi5uZXdTdGF0ZURpdmVJ");
    sb.append("bnRvID0gc2VsZi5wSTsKCiAgLy8gUlVOVElNRSB8IGV4dGVuZCB0aGUgZ2l2ZW4gc3RhdGUgd2l0aCB0");
    sb.append("aGUgdmlldyBoYXZpbmcgYSBzZXBhcmF0ZSBjaGlsZAogIHNlbGYucEVWID0gZnVuY3Rpb24gKHN0YXRl");
    sb.append("LCBuYW1lKSB7CiAgICBpZiAoIShuYW1lIGluIHN0YXRlLnZpZXcuZGVsdGEpKSB7CiAgICAgIHN0YXRl");
    sb.append("LnZpZXcuZGVsdGFbbmFtZV0gPSB7fTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHNlcnZpY2U6IHN0");
    sb.append("YXRlLnNlcnZpY2UsCiAgICAgIGRhdGE6IHN0YXRlLmRhdGEsCiAgICAgIHZpZXc6IHsKICAgICAgICB0");
    sb.append("cmVlOiBzdGF0ZS52aWV3LnRyZWUsCiAgICAgICAgZGVsdGE6IHN0YXRlLnZpZXcuZGVsdGFbbmFtZV0s");
    sb.append("CiAgICAgICAgcGFyZW50OiBzdGF0ZS52aWV3LAogICAgICAgIHBhdGg6IG5hbWUKICAgICAgfSwKICAg");
    sb.append("ICAgY3VycmVudDogc3RhdGUuY3VycmVudAogICAgfTsKICB9OwogIHNlbGYubmV3U3RhdGVDcmVhdGVW");
    sb.append("aWV3Q2hpbGQgPSBzZWxmLnBFVjsKCiAgc2VsZi5wSUUgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIGV4");
    sb.append("cGFuZFZpZXcpIHsKICAgIHZhciBuZXh0ID0gc2VsZi5wSShzdGF0ZSwgbmFtZSk7CiAgICBpZiAoZXhw");
    sb.append("YW5kVmlldykgewogICAgICByZXR1cm4gc2VsZi5wRVYobmV4dCwgbmFtZSk7CiAgICB9IGVsc2Ugewog");
    sb.append("ICAgICByZXR1cm4gbmV4dDsKICAgIH0KICB9OwoKICB2YXIgZm9yayA9IGZ1bmN0aW9uIChwcmlvclN0");
    sb.append("YXRlKSB7CiAgICB2YXIgc3RhdGUgPSB7CiAgICAgIHNlcnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwK");
    sb.append("ICAgICAgZGF0YTogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS5kYXRhKSwKICAgICAgdmlldzogbmV3");
    sb.append("X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgY3VycmVudDogcHJpb3JTdGF0ZS5jdXJy");
    sb.append("ZW50CiAgICB9OwogICAgaWYgKHN0YXRlLmRhdGEgIT0gbnVsbCkgewogICAgICBzdGF0ZS5kYXRhLmNv");
    sb.append("bm5lY3Rpb24gPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbjsKICAgIH0KICAgIHJldHVybiBzdGF0");
    sb.append("ZTsKICB9OwoKICAvLyBSVU5USU1FIHwgc3Vic2NyaWJlIGJldHdlZW4gdGhlIHN0YXRlIGFuZCB0aGUg");
    sb.append("b2JqZWN0LgogIC8vIFdoZW4gdGhlIG1lbWJlciBmaWVsZCB3aXRoaW4gc3RhdGUgb2YgbmFtZSBjaGFu");
    sb.append("Z2VzLCBjb3B5IHRoYXQgdmFsdWUgaW50byB0aGUgb2JqIGFuZCBydW4gcmVjb21wdXRlKCkKICBzZWxm");
    sb.append("LlkgPSBmdW5jdGlvbiAoc3RhdGUsIG9iaiwgbmFtZSwgcmVjb21wdXRlKSB7CiAgICB2YXIgc3ViID0g");
    sb.append("ZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICByZWNvbXB1dGUo");
    sb.append("KTsKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfTsKCiAgc2VsZi5ZMiA9");
    sb.append("IGZ1bmN0aW9uIChzdGF0ZSwgciwga2V5LCBuYW1lLCByZWNvbXB1dGUpIHsKICAgIHZhciBzdWIgPSBm");
    sb.append("dW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG9iaiA9IHIuX1trZXldOwogICAgICBvYmpbbmFtZV0g");
    sb.append("PSB2YWx1ZTsKICAgICAgcmVjb21wdXRlKG9iaik7CiAgICAgIHJldHVybiB0cnVlOwogICAgfTsKICAg");
    sb.append("IHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBSVU5USU1FOiBidWlsZCBhbiBy");
    sb.append("eG9iagogIHNlbGYuUlggPSBmdW5jdGlvbiAodmFycykgewogICAgdmFyIG8gPSB7fTsKICAgIG8uXyA9");
    sb.append("IHt9OwogICAgZm9yICh2YXIgayA9IDA7IGsgPCB2YXJzLmxlbmd0aDsgaysrKSB7CiAgICAgIG8uX1t2");
    sb.append("YXJzW2tdXSA9IHt9OwogICAgfQogICAgby5fXyA9IGZ1bmN0aW9uKCkge307CiAgICByZXR1cm4gbzsK");
    sb.append("ICB9OwoKICAvLyBSVU5USU1FIHwgSnVzdCBzdWJzY3JpYmVlIHZhbHVlIHRvIHRoZSBvYmplY3QgZmll");
    sb.append("bGQgb2YgbmFtZSAobm8tcmVjb21wdXRlKQogIHNlbGYuWVMgPSBmdW5jdGlvbiAoc3RhdGUsIG9iaiwg");
    sb.append("bmFtZSkgewogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBvYmpbbmFtZV0gPSB2");
    sb.append("YWx1ZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBz");
    sb.append("dWIpOwogIH07CgogIC8vIFJVTlRJTUUgfCAiVGV4dCIKICBzZWxmLlQgPSBmdW5jdGlvbiAodHgpIHsK");
    sb.append("ICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0eCk7CiAgfTsKCiAgLy8gY29udmVydCBh");
    sb.append("IHZhbHVlIGludG8gYSBib29sZWFuCiAgc2VsZi5CID0gZnVuY3Rpb24odmFsKSB7CiAgICBpZiAodmFs");
    sb.append("ID09PSB0cnVlKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIHZhbCA9PSAidHJ1");
    sb.append("ZSI7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx2aWV3LXdyaXRlIG5hbWU9IiIgdmFsdWU9IiI+CiAgc2Vs");
    sb.append("Zi5WVyA9IGZ1bmN0aW9uKHN0YXRlLCBuYW1lLCByeE9iaikgewogICAgcnhPYmouX18gPSBkZWJvdW5j");
    sb.append("ZSg1MCwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgdmFyIHZhbHVlID0gcnhP");
    sb.append("YmoudmFsdWU7CiAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAg");
    sb.append("b2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvYmpbbmFtZV0gPSB2YWx1");
    sb.append("ZTsKICAgICAgfQogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAg");
    sb.append("IHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsKICAgIH0pOwogIH07CgogIC8v");
    sb.append("IFJVTlRJTUUgfCA8bG9va3VwIHBhdGg9Li4uPgogIHNlbGYuTCA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFt");
    sb.append("ZSkgewogICAgdmFyIGRvbSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTsKICAgIHZhciBzdWIg");
    sb.append("PSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgZG9tLm5vZGVWYWx1ZSA9IHZhbHVlOwogICAgfTsKICAg");
    sb.append("IHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICAgIHJldHVybiBkb207CiAgfTsKCiAgLy8gUlVO");
    sb.append("VElNRSB8IDxsb29rdXAgcGF0aD0uLi4gdHJhbnNmb3JtPSIkdHJhbnNmb3JtIiAvPgogIHNlbGYuTFQg");
    sb.append("PSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIHRyYW5zZm9ybSkgewogICAgdmFyIGRvbSA9IGRvY3VtZW50");
    sb.append("LmNyZWF0ZVRleHROb2RlKCIiKTsKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAg");
    sb.append("aWYgKHZhbHVlICE9IG51bGwpIHsKICAgICAgICBkb20ubm9kZVZhbHVlID0gdHJhbnNmb3JtKHZhbHVl");
    sb.append("KTsKICAgICAgfQogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICAgIHJldHVy");
    sb.append("biBkb207CiAgfTsKCiAgc2VsZi5MaCA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSkgewogICAgdmFyIGRv");
    sb.append("bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAo");
    sb.append("dmFsdWUpIHsKICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHsKICAgICAgICBkb20uaW5uZXJIVE1MID0g");
    sb.append("dmFsdWU7CiAgICAgIH0KICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICBy");
    sb.append("ZXR1cm4gZG9tOwogIH07CgogIC8vIFJVTlRJTUUgfCA8bG9va3VwIHBhdGg9Li4uIHRyYW5zZm9ybT0i");
    sb.append("JHRyYW5zZm9ybSIgLz4KICBzZWxmLkxUZFQgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIHRyYW5zZm9y");
    sb.append("bSwgZnJlcSkgewogICAgdmFyIGRvbSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTsKICAgIC8v");
    sb.append("IGNyZWF0ZSB0aGUgbmV4dXMgb2JqZWN0CiAgICB2YXIgb2JqID0ge307CiAgICBvYmouZnJlcSA9IGZy");
    sb.append("ZXE7CiAgICBvYmoudmFsdWUgPSAiIjsKCiAgICAvLyB1cGRhdGUgd2lsbCBleGVjdXRlIHRoZSB0cmFu");
    sb.append("c2Zvcm0gb24gdGhlIHZhbHVlCiAgICBvYmoudXBkYXRlID0gZnVuY3Rpb24oKSB7CiAgICAgIGRvbS5u");
    sb.append("b2RlVmFsdWUgPSB0cmFuc2Zvcm0odGhpcy52YWx1ZSk7CiAgICB9LmJpbmQob2JqKTsKCiAgICAvLyBz");
    sb.append("dWJzY3JpcHRpb24gd2lsbCBzeW5jIHRoZSB2YWx1ZQogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1");
    sb.append("ZSkgewogICAgICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsK");
    sb.append("ICAgICAgICB0aGlzLnVwZGF0ZSgpOwogICAgICB9CiAgICB9LmJpbmQob2JqKTsKCiAgICAvLyByZWZy");
    sb.append("ZXNoIHdpbGwgcmUtZXhlY3V0ZSB0aGUgdXBkYXRlIChhbmQgdGh1cyB0aGUgdHJhbnNmb3JtKQogICAg");
    sb.append("b2JqLnJlZnJlc2ggPSBmdW5jdGlvbigpIHsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgICAgaWYgKGRv");
    sb.append("Y3VtZW50LmJvZHkuY29udGFpbnMoZG9tKSkgeyAvLyB3aWxsIHJ1biBzbyBsb25nIGFzIHRoZSBET00g");
    sb.append("Y29udGFpbnMgdGhlIG5vZGUgd2UgbWFuaXB1bGF0ZWQKICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0");
    sb.append("aGlzLnJlZnJlc2gsIHRoaXMuZnJlcSk7CiAgICAgIH0KICAgIH0uYmluZChvYmopOwogICAgLy8ga2lj");
    sb.append("ayBvZmYgdGhlIGF1dG8gdHJhbnNmb3JtCiAgICB3aW5kb3cuc2V0VGltZW91dChvYmoucmVmcmVzaCwg");
    sb.append("ZnJlcSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICByZXR1cm4gZG9tOwogIH07");
    sb.append("CgogIC8vIFJVTlRJTUUgfCA8dGFnPgogIHNlbGYuRSA9IGZ1bmN0aW9uICh0YWcsIG5zKSB7CiAgICBp");
    sb.append("ZiAobnMgPT0gdW5kZWZpbmVkIHx8IG5zID09IG51bGwpIHsKICAgICAgdmFyIGRvbSA9IGRvY3VtZW50");
    sb.append("LmNyZWF0ZUVsZW1lbnQodGFnKTsKICAgICAgaWYgKHRhZyA9PSAic2VsZWN0IikgewogICAgICAgIGRv");
    sb.append("bS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHsgZG9tLnJ4dmFsdWUgPSBkb20u");
    sb.append("dmFsdWU7IH0pOwogICAgICB9CiAgICAgIHJldHVybiBkb207CiAgICB9IGVsc2UgewogICAgICB2YXIg");
    sb.append("cmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCB0YWcpOwogICAgICByZXN1bHQuc2V0");
    sb.append("QXR0cmlidXRlKCJ4bWxucyIsIG5zKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9OwoKICBz");
    sb.append("ZWxmLkNTdCA9IGZ1bmN0aW9uIChwYXJlbnQsIHN0YXRlLCBjaGlsZE1ha2VyQ29ubmVjdGVkLCBjaGls");
    sb.append("ZE1ha2VyRGlzY29ubmVjdGVkKSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICBpZiAo");
    sb.append("IXN0YXRlLmRhdGEuY29ubmVjdGlvbikgewogICAgICByZXR1cm47CiAgICB9CiAgICBzdGF0ZS5kYXRh");
    sb.append("LmNvbm5lY3Rpb24uY29ubmVjdGVkKGZ1bmN0aW9uKGNzKSB7CiAgICAgIGlmICh0aGlzLnByaW9yID09");
    sb.append("IGNzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgZmly");
    sb.append("ZV91bnN1Yih1bnN1Yik7CiAgICAgIHRoaXMucHJpb3IgPSBjczsKICAgICAgdmFyIG5ld1N0YXRlID0g");
    sb.append("Zm9yayhzdGF0ZSk7CiAgICAgIGlmIChjcykgewogICAgICAgIGNoaWxkTWFrZXJDb25uZWN0ZWQocGFy");
    sb.append("ZW50LCBuZXdTdGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hpbGRNYWtlckRpc2Nvbm5lY3Rl");
    sb.append("ZChwYXJlbnQsIG5ld1N0YXRlKTsKICAgICAgfQogICAgICBzdWJzY3JpYmVfc3RhdGUobmV3U3RhdGUs");
    sb.append("IHVuc3ViKTsKICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuY29udGFpbnMocGFyZW50KTsKICAgIH0u");
    sb.append("YmluZCh7cHJpb3I6bnVsbH0pKTsKICB9OwoKICAvLyBkb2N1bWVudC1nZXQKICBzZWxmLkRjRyA9IGZ1");
    sb.append("bmN0aW9uKHBhcmVudCwgcHJpb3JTdGF0ZSwgcnhPYmosIGNoaWxkTWFrZXJGZXRjaGVkLCBjaGlsZE1h");
    sb.append("a2VyRmFpbGVkKSB7CiAgICAvLyBUT0RPCiAgfTsKCiAgLy8gUlVOVElNRSA8ZG9tYWluLWdldCB1cmw9");
    sb.append("InBhdGgiIHNlYXJjaDp4PSIuLi4iPgogIHNlbGYuREcgPSBmdW5jdGlvbihwYXJlbnQsIHByaW9yU3Rh");
    sb.append("dGUsIHJ4T2JqLCBjaGlsZE1ha2VyRmV0Y2hlZCwgY2hpbGRNYWtlckZhaWxlZCkgewogICAgdmFyIHVu");
    sb.append("c3ViID0gbWFrZV91bnN1YigpOwogICAgcnhPYmouX18gPSBkZWJvdW5jZSg1MCwgZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICBpZiAoISgndXJsJyBpbiByeE9iaikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAg");
    sb.append("ICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgdmFyIGlkZW50aXR5ID0gbnVsbDsKICAgICAgZm9yICh2YXIg");
    sb.append("YXJnIGluIHJ4T2JqKSB7CiAgICAgICAgdmFyIHZhbCA9IHJ4T2JqW2FyZ107CiAgICAgICAgc3dpdGNo");
    sb.append("IChhcmcpIHsKICAgICAgICAgIGNhc2UgIl9fIjoKICAgICAgICAgIGNhc2UgIl8iOgogICAgICAgICAg");
    sb.append("Y2FzZSAidXJsIjoKICAgICAgICAgIGNhc2UgInJlZGlyZWN0IjoKICAgICAgICAgICAgYnJlYWs7CiAg");
    sb.append("ICAgICAgICBjYXNlICJpZGVudGl0eSI6CiAgICAgICAgICAgIGlmICh0eXBlb2YodmFsKSA9PSAic3Ry");
    sb.append("aW5nIikgewogICAgICAgICAgICAgIGlkZW50aXR5ID0gcnhPYmpbYXJnXTsKICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGFyZ3MucHVzaChh");
    sb.append("cmcgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsKSk7CiAgICAgICAgfQogICAgICB9CiAgICAg");
    sb.append("IHZhciB1cmwgPSByeE9iai51cmwgKyAoYXJncy5sZW5ndGggPiAwID8gIj8iICsgYXJncy5qb2luKCIm");
    sb.append("IikgOiAiIik7CiAgICAgIHRoaXMuZ2VuICsrOwogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZh");
    sb.append("ciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFu");
    sb.append("Z2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMueGh0dHAucmVhZHlTdGF0ZSA9PSA0ICYm");
    sb.append("IHRoaXMuZ2VuID09IHNlbGYuZ2VuKSB7CiAgICAgICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAg");
    sb.append("ICAgIG51a2UocGFyZW50KTsKICAgICAgICAgIHZhciB0cmVlID0gbmV3IEFkYW1hVHJlZSgpOwogICAg");
    sb.append("ICAgICAgdmFyIHN0YXRlID0gewogICAgICAgICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2Us");
    sb.append("CiAgICAgICAgICAgIGRhdGE6IHsgY29ubmVjdGlvbjogcHJpb3JTdGF0ZS5jb25uZWN0aW9uLCB0cmVl");
    sb.append("OiB0cmVlLCBkZWx0YToge30sIHBhcmVudDogbnVsbCwgcGF0aDogbnVsbCB9LAogICAgICAgICAgICB2");
    sb.append("aWV3OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICAgICAgICBjdXJyZW50OiAi");
    sb.append("ZGF0YSIKICAgICAgICAgIH07CgogICAgICAgICAgaWYgKHRoaXMueGh0dHAuc3RhdHVzID09IDIwMCkg");
    sb.append("ewogICAgICAgICAgICB2YXIgdHlwZSA9IHRoaXMueGh0dHAuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRl");
    sb.append("bnQtVHlwZSIpOwogICAgICAgICAgICBpZiAodHlwZSA9PSAiYXBwbGljYXRpb24vanNvbiIpIHsKICAg");
    sb.append("ICAgICAgICAgICB2YXIgdG9QdXNoID0gdHJlZS5NYWtlRGVsdGEoSlNPTi5wYXJzZSh0aGlzLnhodHRw");
    sb.append("LnJlc3BvbnNlVGV4dCkpOwogICAgICAgICAgICAgIGNoaWxkTWFrZXJGZXRjaGVkKHBhcmVudCwgc3Rh");
    sb.append("dGUpOwogICAgICAgICAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAgICAgICAg");
    sb.append("ICAgIHRyZWUudXBkYXRlKHRvUHVzaCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAg");
    sb.append("Y2hpbGRNYWtlckZhaWxlZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICAgICAgICBzdWJzY3JpYmVfc3Rh");
    sb.append("dGUoc3RhdGUsIHVuc3ViKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg");
    sb.append("ICAgY2hpbGRNYWtlckZhaWxlZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICAgICAgc3Vic2NyaWJlX3N0");
    sb.append("YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LmJpbmQoe2dlbjpz");
    sb.append("ZWxmLmdlbiwgeGh0dHA6eGh0dHB9KTsKICAgICAgeGh0dHAub3BlbigiR0VUIiwgIi9+ZCIgKyB1cmws");
    sb.append("IHRydWUpOwogICAgICBpZiAoaWRlbnRpdHkgIT0gbnVsbCkgewogICAgICAgIHhodHRwLnNldFJlcXVl");
    sb.append("c3RIZWFkZXIoIkF1dGhvcml6YXRpb24iLCAiQmVhcmVyICIgKyBpZGVudGl0eSk7CiAgICAgIH0KICAg");
    sb.append("ICAgeGh0dHAud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsKICAgICAgeGh0dHAuc2VuZCgpOwogICAgfS5i");
    sb.append("aW5kKHt1cmw6IiIsIGdlbjowfSkpOwogICAgcnhPYmouX18oKTsKICB9CgogIC8vIFJVTlRJTUUgfCA8");
    sb.append("cGljayBuYW1lPS4uLj4KICBzZWxmLlAgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCByeE9i");
    sb.append("aiwgY2hpbGRNYWtlckNvbm5lY3RlZCwgY2hpbGRNYWtlckRpc2Nvbm5lY3RlZCwga2VlcE9wZW4pIHsK");
    sb.append("ICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIHJ4T2JqLl9fID0gZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICBpZiAoISgnbmFtZScgaW4gcnhPYmopKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAg");
    sb.append("IGlmICh0aGlzLm5hbWUgPT0gcnhPYmoubmFtZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAg");
    sb.append("ICB2YXIgY28gPSBnZXRfY29ubmVjdGlvbl9vYmoocnhPYmoubmFtZSk7CiAgICAgIHRoaXMubmFtZSA9");
    sb.append("IHJ4T2JqLm5hbWU7CiAgICAgIGNvLmNvbm5lY3RlZChmdW5jdGlvbiAoY3MpIHsKICAgICAgICBpZiAo");
    sb.append("dGhpcy5yZW5kZXJlZCAmJiBrZWVwT3BlbikgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAg");
    sb.append("ICAgICBudWtlKHBhcmVudCk7CiAgICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgICAgdmFyIHN0");
    sb.append("YXRlID0gewogICAgICAgICAgc2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNlLAogICAgICAgICAgZGF0");
    sb.append("YTogeyBjb25uZWN0aW9uOiBjbywgdHJlZTogY28udHJlZSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGws");
    sb.append("IHBhdGg6IG51bGwgfSwKICAgICAgICAgIHZpZXc6IG5ld19kZWx0YV9jb3B5KHByaW9yU3RhdGUudmll");
    sb.append("dyksCiAgICAgICAgICBjdXJyZW50OiAiZGF0YSIKICAgICAgICB9OwogICAgICAgIGlmIChjcykgewog");
    sb.append("ICAgICAgICAgdGhpcy5yZW5kZXJlZCA9IHRydWU7CiAgICAgICAgICBjaGlsZE1ha2VyQ29ubmVjdGVk");
    sb.append("KHBhcmVudCwgc3RhdGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjaGlsZE1ha2VyRGlzY29u");
    sb.append("bmVjdGVkKHBhcmVudCwgc3RhdGUpOwogICAgICAgIH0KICAgICAgICBzdWJzY3JpYmVfc3RhdGUoc3Rh");
    sb.append("dGUsIHVuc3ViKTsKICAgICAgICAvLyBUT0RPOiByZXR1cm4gZmFsc2UgdG8gdW5zdWIKICAgICAgICBy");
    sb.append("ZXR1cm4gdHJ1ZTsKICAgICAgfS5iaW5kKHRoaXMpKTsKICAgIH0uYmluZCh7IG5hbWU6ICIiLCByZW5k");
    sb.append("ZXJlZDpmYWxzZSB9KTsKICB9OwoKICAvLyBSVU5USU1FIHwgPHRlbXBsYXRlIG5hbWU9Ii4uLiI+CiAg");
    sb.append("c2VsZi5UUCA9IGZ1bmN0aW9uIChuYW1lLCBmb28pIHsKICAgIHRlbXBsYXRlc1tuYW1lXSA9IGZvbzsK");
    sb.append("ICB9OwoKICAvLyBSVU5USU1FIHwgPHRhZyByeDp0ZW1wbGF0ZT0kbmFtZT4KICBzZWxmLlVUID0gZnVu");
    sb.append("Y3Rpb24gKHBhcmVudCwgc3RhdGUsIG5hbWUsIGNoaWxkX21ha2VyKSB7CiAgICB2YXIgZm9vID0gdGVt");
    sb.append("cGxhdGVzW25hbWVdOwogICAgaWYgKHR5cGVvZihmb28pID09ICJmdW5jdGlvbiIpIHsKICAgICAgZm9v");
    sb.append("KHBhcmVudCwgc3RhdGUsIGNoaWxkX21ha2VyKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUuZXJy");
    sb.append("b3IoImZhaWxlZCB0byBmaW5kIHRlbXBsYXRlOiAiICsgbmFtZSk7CiAgICB9CiAgfTsKCiAgLy8gUlVO");
    sb.append("VElNRSB8IDx0YWcgcng6c3dpdGNoPXBhdGggLi4+CiAgc2VsZi5TVyA9IGZ1bmN0aW9uIChwYXJlbnQs");
    sb.append("IHByaW9yU3RhdGUsIG5hbWUsIGNoaWxkcmVuTWFrZXIpIHsKICAgIHZhciBzd3N0ID0geyBwcmlvcjog");
    sb.append("bnVsbCB9OwogICAgYWRkX3Vuc3ViKHN3c3QpOwogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkg");
    sb.append("ewogICAgICBpZiAodmFsdWUgPT0gdGhpcy5wcmlvcikgewogICAgICAgIHJldHVybjsKICAgICAgfQog");
    sb.append("ICAgICB0aGlzLnByaW9yID0gdmFsdWU7CiAgICAgIGZpcmVfdW5zdWIodGhpcyk7CiAgICAgIG51a2Uo");
    sb.append("cGFyZW50KTsKICAgICAgdmFyIHN0YXRlID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgY2hpbGRyZW5N");
    sb.append("YWtlcihwYXJlbnQsIHNlbGYucEQoc3RhdGUpLCAiIiArIHZhbHVlKTsKICAgICAgc3Vic2NyaWJlX3N0");
    sb.append("YXRlKHN0YXRlLCB0aGlzKTsKCiAgICB9LmJpbmQoc3dzdCk7CiAgICBzdWJzY3JpYmUocHJpb3JTdGF0");
    sb.append("ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBSVU5USU1FIHwgPHRhZyByeDppdGVyYXRlPXBhdGggLi4u");
    sb.append("PgogIHNlbGYuSVQgPSBmdW5jdGlvbiAocGFyZW50RG9tLCBzdGF0ZSwgbmFtZSwgZXhwYW5kVmlldywg");
    sb.append("bWFrZXIpIHsKICAgIHZhciBpdF9zdGF0ZSA9IHNlbGYucElFKHN0YXRlLCBuYW1lLCBleHBhbmRWaWV3");
    sb.append("KTsKICAgIHZhciBkb21CeUtleSA9IHt9OwogICAgdmFyIHZpZXdVblN1YkJ5S2V5ID0ge307CiAgICB2");
    sb.append("YXIga2lsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yICh2YXIga2V5IGluIHZpZXdVblN1YkJ5S2V5");
    sb.append("KSB7CiAgICAgICAgZmlyZV91bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAgICAgICBkZWxldGUg");
    sb.append("dmlld1VuU3ViQnlLZXlba2V5XTsKICAgICAgfQogICAgICBmb3IgKHZhciBrZXkgaW4gZG9tQnlLZXkp");
    sb.append("IHsKICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsKICAgICAgfQogICAgfTsKCiAgICB2YXIgc3Vi");
    sb.append("ID0gewogICAgICAiKyI6IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB2YXIgbmV3X3N0YXRlID0gZm9y");
    sb.append("ayhzZWxmLnBJRShpdF9zdGF0ZSwga2V5LCBleHBhbmRWaWV3KSk7CiAgICAgICAgdmFyIHVuc3ViID0g");
    sb.append("bWFrZV91bnN1YigpOwogICAgICAgIHZhciBkb20gPSBtYWtlcihuZXdfc3RhdGUpOwogICAgICAgIGRv");
    sb.append("bUJ5S2V5W2tleV0gPSBkb207CiAgICAgICAgdmlld1VuU3ViQnlLZXlba2V5XSA9IHVuc3ViOwogICAg");
    sb.append("ICAgIHBhcmVudERvbS5hcHBlbmQoZG9tKTsKICAgICAgICB2YXIgaXRlbV9kZWx0YSA9IG5ld19zdGF0");
    sb.append("ZS5kYXRhLmRlbHRhOwogICAgICAgIG5ld19zdGF0ZS5kYXRhLmRlbHRhID0ge307CiAgICAgICAgc3Vi");
    sb.append("c2NyaWJlX3N0YXRlKG5ld19zdGF0ZSwgdW5zdWIpOwogICAgICAgIGlmIChleHBhbmRWaWV3KSB7CiAg");
    sb.append("ICAgICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHBhdGhfdG8obmV3X3N0YXRlLnZpZXcsIHsiJGtl");
    sb.append("eSI6IGtleX0pKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBpdGVtX2RlbHRhOwogICAgICB9LAog");
    sb.append("ICAgICAiLSI6IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBpZiAoa2V5IGluIGRvbUJ5S2V5KSB7CiAg");
    sb.append("ICAgICAgICBwYXJlbnREb20ucmVtb3ZlQ2hpbGQoZG9tQnlLZXlba2V5XSk7CiAgICAgICAgICBkZWxl");
    sb.append("dGUgZG9tQnlLZXlba2V5XTsKICAgICAgICB9CiAgICAgICAgaWYgKGtleSBpbiB2aWV3VW5TdWJCeUtl");
    sb.append("eSkgewogICAgICAgICAgZmlyZV91bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAgICAgICAgIGRl");
    sb.append("bGV0ZSB2aWV3VW5TdWJCeUtleVtrZXldOwogICAgICAgIH0KICAgICAgfSwKICAgICAgIn4iOiBmdW5j");
    sb.append("dGlvbiAob3JkKSB7CiAgICAgICAgdmFyIHZhbHVlVG9TZXQgPSBmYWxzZTsKICAgICAgICAvLyB0aGUg");
    sb.append("dmFsdWVzIGFyZSBmaWxsaW5nIHVwIEFGVEVyIHRoZSB2YWx1ZSB3YXMgc2V0LAogICAgICAgIC8vIHNv");
    sb.append("IGRldGVjdCB0aGUgYWJzZW5jZSBvZiBhIHZhbHVlIGFsb25nIHdpdGggdGhlIGV4aXN0ZW5jZSBvZiBh");
    sb.append("IHZhbHVlCiAgICAgICAgaWYgKCFwYXJlbnREb20udmFsdWUgJiYgcGFyZW50RG9tLnJ4dmFsdWUgIT0g");
    sb.append("IiIpIHsKICAgICAgICAgIHZhbHVlVG9TZXQgPSBwYXJlbnREb20ucnh2YWx1ZTsKICAgICAgICAgIC8v");
    sb.append("IHRoaXMgdmFsdWUsIHdlIHdhbnQgdG8gcmVzdG9yZSBvbmNlCiAgICAgICAgfQogICAgICAgIG51a2Uo");
    sb.append("cGFyZW50RG9tKTsKICAgICAgICBpZiAob3JkID09IG51bGwpIHsKICAgICAgICAgIGtpbGwoKTsKICAg");
    sb.append("ICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBvcmQubGVu");
    sb.append("Z3RoOyBrKyspIHsKICAgICAgICAgIHBhcmVudERvbS5hcHBlbmQoZG9tQnlLZXlbb3JkW2tdXSk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmICh2YWx1ZVRvU2V0KSB7CiAgICAgICAgICBwYXJlbnREb20udmFsdWUg");
    sb.append("PSB2YWx1ZVRvU2V0OwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwg");
    sb.append("bmFtZSwgc3ViKTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uLiByeDptb25pdG9yPSJzdGF0ZS1w");
    sb.append("YXRoIiByeDpyaXNlPSJjb21tYW5kcy4uLiIgcng6ZmFsbD0iY29tbWFuZHMuLi4iCiAgc2VsZi5NTiA9");
    sb.append("IGZ1bmN0aW9uIChkb20sIHN0YXRlLCBuYW1lLCBza2lwRmlyc3QsIGRlbGF5KSB7CiAgICB2YXIgc3Vi");
    sb.append("ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewog");
    sb.append("ICAgICAgIHZhciBuID0gMDsKICAgICAgICB0cnkgewogICAgICAgICAgbiA9IHR5cGVvZiAodmFsdWUp");
    sb.append("ID09ICdudW1iZXInID8gdmFsdWUgOiBwYXJzZUludCh2YWx1ZSk7CiAgICAgICAgfSBjYXRjaCAoZmFp");
    sb.append("bGVkUGFyc2luZ04pIHsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuZmlyc3QpIHsKICAgICAgICAg");
    sb.append("IHRoaXMuYXQgPSBuOwogICAgICAgICAgdGhpcy5maXJzdCA9IGZhbHNlOwogICAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5hdCA8IG4pIHsKICAgICAgICAgIHZhciBlID0gbmV3");
    sb.append("IEV2ZW50KCJyaXNlIik7CiAgICAgICAgICBkb20uZGlzcGF0Y2hFdmVudChlKTsKICAgICAgICB9IGVs");
    sb.append("c2UgaWYgKHRoaXMuYXQgPiBuKSB7CiAgICAgICAgICB2YXIgZSA9IG5ldyBFdmVudCgiZmFsbCIpOwog");
    sb.append("ICAgICAgICAgZG9tLmRpc3BhdGNoRXZlbnQoZSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuYXQgPSBu");
    sb.append("OwogICAgICB9LmJpbmQodGhpcyksIHRoaXMuZGVsYXkpOwogICAgfS5iaW5kKHthdDotMSwgZmlyc3Q6");
    sb.append("c2tpcEZpcnN0LCBkZWxheTpkZWxheSA/IGRlbGF5IDogMTB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwg");
    sb.append("bmFtZSwgc3ViKTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uLiByeDpyZXBlYXQ9JD4KICBzZWxm");
    sb.append("LlJQID0gZnVuY3Rpb24gKHBhcmVudERvbSwgc3RhdGUsIG5hbWUsIGV4cGFuZFZpZXcsIG1ha2VyKSB7");
    sb.append("CiAgICB2YXIgaXRfc3RhdGUgPSBzZWxmLnBJRShzdGF0ZSwgIiQiICsgbmFtZSwgZXhwYW5kVmlldyk7");
    sb.append("CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHZhciBuID0gMDsKICAgICAgdHJ5");
    sb.append("IHsKICAgICAgICBuID0gdHlwZW9mICh2YWx1ZSkgPT0gJ251bWJlcicgPyB2YWx1ZSA6IHBhcnNlSW50");
    sb.append("KHZhbHVlKTsKICAgICAgfSBjYXRjaCAoZmFpbGVkUGFyc2luZ04pIHsKICAgICAgfQogICAgICB3aGls");
    sb.append("ZSAodGhpcy5hdCA8IG4gLSAxKSB7CiAgICAgICAgdGhpcy5hdCArKzsKICAgICAgICB0aGlzLnRyYWNr");
    sb.append("ICsrOwogICAgICAgIHZhciBuZXdfc3RhdGUgPSBmb3JrKHNlbGYucElFKGl0X3N0YXRlLCB0aGlzLnRy");
    sb.append("YWNrICsgIiIsIGV4cGFuZFZpZXcpKTsKICAgICAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAg");
    sb.append("ICAgICAgdmFyIGRvbSA9IG1ha2VyKHNlbGYucEQobmV3X3N0YXRlKSk7CiAgICAgICAgdGhpcy5pdGVt");
    sb.append("c1t0aGlzLmF0XSA9IHt1bnN1Yjp1bnN1YiwgZG9tOmRvbX07CiAgICAgICAgcGFyZW50RG9tLmFwcGVu");
    sb.append("ZChkb20pOwogICAgICAgIGlmIChleHBhbmRWaWV3KSB7CiAgICAgICAgICBzdGF0ZS52aWV3LnRyZWUu");
    sb.append("dXBkYXRlKHBhdGhfdG8obmV3X3N0YXRlLnZpZXcsIHsiJGluZGV4IjogdGhpcy50cmFja30pKTsKICAg");
    sb.append("ICAgICB9CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKG5ld19zdGF0ZSwgdW5zdWIpOwogICAgICB9CiAg");
    sb.append("ICAgIHdoaWxlICh0aGlzLmF0ID49IG4gJiYgdGhpcy5hdCA+PSAwKSB7CiAgICAgICAgZmlyZV91bnN1");
    sb.append("Yih0aGlzLml0ZW1zW3RoaXMuYXRdLnVuc3ViKTsKICAgICAgICBwYXJlbnREb20ucmVtb3ZlQ2hpbGQo");
    sb.append("dGhpcy5pdGVtc1t0aGlzLmF0XS5kb20pOwogICAgICAgIHRoaXMuaXRlbXNbdGhpcy5hdF0gPSBudWxs");
    sb.append("OwogICAgICAgIGRlbGV0ZSB0aGlzLml0ZW1zW3RoaXMuYXRdOwogICAgICAgIHRoaXMuYXQtLTsKICAg");
    sb.append("ICAgfQogICAgfS5iaW5kKHtpdGVtczpbXSwgYXQ6LTEsIHRyYWNrOjB9KTsKICAgIHN1YnNjcmliZShz");
    sb.append("dGF0ZSwgbmFtZSwgc3ViKTsKICB9CiAgdmFyIGZpbmQgPSBmdW5jdGlvbiAoc3RhdGUsIGNoYW5uZWws");
    sb.append("IGtleSwgdmFsdWUpIHsKICAgIGlmIChjaGFubmVsIGluIHN0YXRlWyJkYXRhIl0uY29ubmVjdGlvbi5v");
    sb.append("dXRzdGFuZGluZykgewogICAgICB2YXIgYXJyID0gc3RhdGVbImRhdGEiXS5jb25uZWN0aW9uLm91dHN0");
    sb.append("YW5kaW5nW2NoYW5uZWxdLm9wdGlvbnM7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXJyLmxlbmd0");
    sb.append("aDsgaysrKSB7CiAgICAgICAgdmFyIHMgPSBhcnJba107CiAgICAgICAgaWYgKGtleSBpbiBzICYmIHNb");
    sb.append("a2V5XSA9PSB2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgfQogICAgICB9CiAgICAg");
    sb.append("IHJldHVybiBudWxsOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfTsKCiAg");
    sb.append("dmFyIGN1c3RvbXMgPSB7fTsKCiAgc2VsZi5QUkNVQUMgPSBmdW5jdGlvbiAobmFtZSwgZm9vKSB7CiAg");
    sb.append("ICBjdXN0b21zW25hbWVdID0gZm9vOwogIH07CgogIHNlbGYuZXhDQyA9IGZ1bmN0aW9uIChkb20sIHR5");
    sb.append("cGUsIHN0YXRlLCBjdXN0b21Db21tYW5kTmFtZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5");
    sb.append("cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGN1c3RvbUNvbW1hbmROYW1lIGluIGN1c3RvbXMpIHsK");
    sb.append("ICAgICAgICBjdXN0b21zW2N1c3RvbUNvbW1hbmROYW1lXShzdGF0ZSwgZG9tKTsKICAgICAgfQogICAg");
    sb.append("fSk7CiAgfTsKCiAgLy8gY3VzdG9tIGV2ZW50IG9uIGZvcm1zOyByeDpzdWNjZXNzPSIuLi4iCiAgdmFy");
    sb.append("IGZpcmVfc3VjY2VzcyA9IGZ1bmN0aW9uIChmb3JtKSB7CiAgICBmb3JtLmRpc3BhdGNoRXZlbnQobmV3");
    sb.append("IEV2ZW50KCJzdWNjZXNzIikpOwogICAgZm9ybS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgic3VibWl0");
    sb.append("dGVkIikpOwogIH07CiAgc2VsZi5maXJlX3N1Y2Nlc3MgPSBmaXJlX3N1Y2Nlc3M7CgogIC8vIGN1c3Rv");
    sb.append("bSBldmVudCBvbiBmb3Jtczsgcng6ZmFpbGVkPSIuLi4iCiAgdmFyIGZpcmVfZmFpbHVyZSA9IGZ1bmN0");
    sb.append("aW9uIChkb20sIG1zZykgewogICAgdmFyIGUgPSBuZXcgRXZlbnQoImZhaWx1cmUiKTsKICAgIGUubWVz");
    sb.append("c2FnZSA9IG1zZzsKICAgIGNvbnNvbGUuZXJyb3IobXNnKTsKICAgIGRvbS5kaXNwYXRjaEV2ZW50KGUp");
    sb.append("OwogIH07CiAgc2VsZi5maXJlX2ZhaWx1cmUgPSBmaXJlX2ZhaWx1cmU7CgogIHNlbGYuYUNDID0gZnVu");
    sb.append("Y3Rpb24gKGZvcm0sIHN0YXRlLCBjdXN0b21Db21tYW5kTmFtZSkgewogICAgdmFyIHNpZ25hbCA9IGZ1");
    sb.append("bmN0aW9uIChtc2cpIHsKICAgICAgaWYgKHNpZ25hbCA9PSBudWxsKSB7CiAgICAgICAgZmlyZV9zdWNj");
    sb.append("ZXNzKGZvcm0pOwogICAgICB9IGVsc2UgewogICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCBtc2cpOwog");
    sb.append("ICAgICB9CiAgICB9OwogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAo");
    sb.append("ZXZ0KSB7CiAgICAgIGlmIChjdXN0b21Db21tYW5kTmFtZSBpbiBjdXN0b21zKSB7CiAgICAgICAgZXZ0");
    sb.append("LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdmFyIG9iaiA9IGdldF9mb3JtKGZvcm0sIHt9KTsKICAg");
    sb.append("ICAgICBjdXN0b21zW2N1c3RvbUNvbW1hbmROYW1lXShvYmosIHN0YXRlLCBzaWduYWwsIHNlbGYpOwog");
    sb.append("ICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaXJlX2ZhaWx1");
    sb.append("cmUoZm9ybSwgIkZhaWxlZCB0byBmaW5kICciICsgY3VzdG9tQ29tbWFuZE5hbWUgKyAiJyIpOwogICAg");
    sb.append("ICB9CiAgICB9LCB0cnVlKTsKICB9OwoKICB2YXIgbWFrZV9jaG9pY2VfYXJyYXkgPSBmdW5jdGlvbiAo");
    sb.append("c3RhdGUsIGNoYW5uZWwpIHsKICAgIHZhciBjaG9pY2VzID0gc3RhdGUuZGF0YS5jb25uZWN0aW9uLmNo");
    sb.append("b2ljZXM7CiAgICBpZiAoIShjaGFubmVsIGluIGNob2ljZXMpKSB7CiAgICAgIGNob2ljZXNbY2hhbm5l");
    sb.append("bF0gPSB7fTsKICAgIH0KICAgIHZhciBjaG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxdOwogICAgdmFyIGFy");
    sb.append("ciA9IFtdOwogICAgZm9yICh2YXIgaWQgaW4gY2hvaWNlKSB7CiAgICAgIGFyci5wdXNoKGNob2ljZVtp");
    sb.append("ZF0pOwogICAgfQogICAgcmV0dXJuIGFycjsKICB9CgogIHNlbGYuZXhGSU4gPSBmdW5jdGlvbiAoZG9t");
    sb.append("LCB0eXBlLCBzdGF0ZSwgY2hhbm5lbCkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgdmFyIGFyciA9IG1ha2VfY2hvaWNlX2FycmF5KHN0YXRlLCBjaGFubmVs");
    sb.append("KTsKICAgICAgdmFyIGNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgICAgIGRlbGV0ZSBzdGF0ZS5kYXRh");
    sb.append("LmNvbm5lY3Rpb24uY2hvaWNlc1tjaGFubmVsXTsKICAgICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24u");
    sb.append("b25jaG9pY2VzKGNoYW5uZWwsIHt9KTsKICAgICAgfTsKICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9u");
    sb.append("LnB0ci5zZW5kKGNoYW5uZWwsIGFyciwgewogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24p");
    sb.append("IHsKICAgICAgICAgIGNsZWFyKCk7CiAgICAgICAgICBjb25zb2xlLmxvZygiZmFpbGVkOiIgKyByZWFz");
    sb.append("b24pOwogICAgICAgIH0sCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAg");
    sb.append("ICAgIGNsZWFyKCk7CiAgICAgICAgICBjb25zb2xlLmxvZygiU3VjY2Vzc3wiICsgcGF5bG9hZC5zZXEp");
    sb.append("OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICB9OwoKICBzZWxmLkZJTiA9IGZ1bmN0aW9uIChw");
    sb.append("YXJlbnQsIHByaW9yU3RhdGUsIGNoYW5uZWwsIHNob3VsZEJlLCBfZXhwYW5kLCBtYWtlclRydWUsIG1h");
    sb.append("a2VyRmFsc2UpIHsKICAgIHZhciBmaW5hbGl6ZSA9IHsKICAgICAgb3duZXI6IHBhcmVudCwKICAgICAg");
    sb.append("c2hvd246IGZhbHNlCiAgICB9OwogICAgYWRkX3Vuc3ViKGZpbmFsaXplKTsKCiAgICB2YXIgY2hhbmdl");
    sb.append("ID0gZnVuY3Rpb24gKHNob3cpIHsKICAgICAgZmlyZV91bnN1YihmaW5hbGl6ZSk7CiAgICAgIG51a2Uo");
    sb.append("cGFyZW50KTsKICAgICAgdmFyIHN0YXRlID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgaWYgKHNob3cg");
    sb.append("PT09IHNob3VsZEJlKSB7CiAgICAgICAgbWFrZXJUcnVlKHBhcmVudCwgc3RhdGUpOwogICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgIG1ha2VyRmFsc2UocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2Ny");
    sb.append("aWJlX3N0YXRlKHN0YXRlLCBmaW5hbGl6ZSk7CiAgICB9OwoKICAgIGZpbmFsaXplLnVwZGF0ZSA9IGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgdmFyIG91dCA9IHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLm91dHN0");
    sb.append("YW5kaW5nW2NoYW5uZWxdOwogICAgICBpZiAoIShvdXQpKSByZXR1cm47CiAgICAgIHZhciBhcnIgPSBt");
    sb.append("YWtlX2Nob2ljZV9hcnJheShwcmlvclN0YXRlLCBjaGFubmVsKTsKICAgICAgdmFyIHJlc3VsdCA9ICgn");
    sb.append("bWluJyBpbiBvdXQgJiYgJ21heCcgaW4gb3V0KSA/IChvdXQubWluIDw9IGFyci5sZW5ndGggJiYgYXJy");
    sb.append("Lmxlbmd0aCA8PSBvdXQubWF4KSA6IHRydWU7CiAgICAgIGlmIChmaW5hbGl6ZS5ldmFsICE9IHJlc3Vs");
    sb.append("dCkgewogICAgICAgIGZpbmFsaXplLmV2YWwgPSByZXN1bHQ7CiAgICAgICAgY2hhbmdlKGZpbmFsaXpl");
    sb.append("LmV2YWwpOwogICAgICB9CiAgICB9OwoKICAgIHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLnN1YnNj");
    sb.append("cmliZV9jaG9pY2UoY2hhbm5lbCwgZnVuY3Rpb24gKCkgewogICAgICBmaW5hbGl6ZS51cGRhdGUoKTsK");
    sb.append("ICAgICAgLy8gVE9ETzogcmV0dXJuIHdoZXRoZXIgb3Igbm90IHRoaXMgbmVlZHMgdG8gYmUgYXhlZAog");
    sb.append("ICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwogIH07CgogIHZhciBmb3JtX29mID0gZnVuY3Rpb24oZG9t");
    sb.append("KSB7CiAgICB2YXIgbmV4dCA9IGRvbTsKICAgIHdoaWxlIChuZXh0ICE9IG51bGwpIHsKICAgICAgaWYg");
    sb.append("KG5leHQudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09ICJGT1JNIikgewogICAgICAgIHJldHVybiBuZXh0");
    sb.append("OwogICAgICB9CiAgICAgIG5leHQgPSBuZXh0LnBhcmVudEVsZW1lbnQ7CiAgICB9CiAgICByZXR1cm4g");
    sb.append("bnVsbDsKICB9CgogIHZhciByZWdfZXZlbnQgPSBmdW5jdGlvbiAoc3RhdGUsIGRvbSwgdHlwZSwgcnVu");
    sb.append("bmFibGUpIHsKICAgIC8vIFRPRE86IGNvbm5lY3RlZC9kaXNjb25uZWN0ZWQgYXMgc3BlY2lhbCBldmVu");
    sb.append("dHMgdG8gY29uc2lkZXIKICAgIGlmICh0eXBlID09ICJjaGVjayIgfHwgdHlwZSA9PSAidW5jaGVjayIp");
    sb.append("IHsKICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogICAgICAg");
    sb.append("IGlmICh0aGlzLnR5cGUgPT0gImNoZWNrIiAmJiBkb20uY2hlY2tlZCkgewogICAgICAgICAgcnVubmFi");
    sb.append("bGUoKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PSAidW5jaGVjayIgJiYgIWRvbS5jaGVj");
    sb.append("a2VkKSB7CiAgICAgICAgICBydW5uYWJsZSgpOwogICAgICAgIH0KICAgICAgfS5iaW5kKHt0eXBlOnR5");
    sb.append("cGV9KSk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gImxvYWQiKSB7CiAgICAgIHdpbmRvdy5zZXRUaW1l");
    sb.append("b3V0KHJ1bm5hYmxlLCAxKTsKICAgIH0gZWxzZSBpZiAodHlwZT09InN1Ym1pdCIgfHwgdHlwZT09InN1");
    sb.append("Ym1pdHRlZCIpIHsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgdmFy");
    sb.append("IGZvcm0gPSBmb3JtX29mKGRvbSk7CiAgICAgICAgaWYgKGZvcm0pIHsKICAgICAgICAgIGZvcm0uYWRk");
    sb.append("RXZlbnRMaXN0ZW5lcih0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5i");
    sb.append("b2R5LmNvbnRhaW5zKGRvbSkpIHsKICAgICAgICAgICAgICBydW5uYWJsZSgpOwogICAgICAgICAgICB9");
    sb.append("CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sIDEpOwogICAgfSBlbHNlIGlmICh0eXBlLnN0");
    sb.append("YXJ0c1dpdGgoImRlbGF5OiIpKSB7CiAgICAgIC8vIGRlbGF5IHdpbGwgcnVuIGFmdGVyICRkZWxheVRp");
    sb.append("bWVNUyBJRiB0aGUgZG9tIGVsZW1lbnQgaXMgc3RpbGwgdmlzaWJsZSB0byB0aGUgZG9jdW1lbnQKICAg");
    sb.append("ICAgdmFyIGRlbGF5VGltZU1TID0gcGFyc2VJbnQodHlwZS5zdWJzdHJpbmcoNikpOwogICAgICB3aW5k");
    sb.append("b3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlu");
    sb.append("cyhkb20pKSB7CiAgICAgICAgICBydW5uYWJsZSgpOwogICAgICAgIH0KICAgICAgfSwgZGVsYXlUaW1l");
    sb.append("TVMpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHR5cGUgPT0gImNsaWNrIikgewogICAgICAgIGRvbS5h");
    sb.append("ZGRFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICB2YXIgZmlyZSA9");
    sb.append("IHRydWU7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgZWwgPSBldmVudC50YXJnZXQ7CiAg");
    sb.append("ICAgICAgICAgIHdoaWxlIChlbCAmJiBmaXJlKSB7CiAgICAgICAgICAgICAgaWYgKGVsLmhhc0F0dHJp");
    sb.append("YnV0ZSgncHJldmVudDpjbGljaycpKSB7CiAgICAgICAgICAgICAgICBmaXJlID0gZmFsc2U7CiAgICAg");
    sb.append("ICAgICAgICAgfQogICAgICAgICAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudDsKICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgfSBjYXRjaCAoZXgpIHsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChmaXJlKSB7");
    sb.append("CiAgICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgcnVubmFibGUpOwogICAgICB9CiAg");
    sb.append("ICB9CiAgfQoKCgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBzZXQ6bmFtZT12YWx1");
    sb.append("ZSAuLi4iPgogIHNlbGYuYlMgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgbmFtZSwgdmFsdWUpIHsKICAg");
    sb.append("IGlmICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAg");
    sb.append("cnVuOiBmdW5jdGlvbigpIHt9LCAvLyBkbyBub3RoaW5nLCB0aGlzIGlzIGEgc2ltcGxlIG1lcmdlCiAg");
    sb.append("ICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAg");
    sb.append("b2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmll");
    sb.append("dywgb2JqKTsKICAgICAgICAgIHJldHVybiBkZWx0YTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAgIHZhciBk");
    sb.append("ZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBydW46");
    sb.append("IGZ1bmN0aW9uKCkge30sIC8vIGRvIG5vdGhpbmcsIHRoaXMgaXMgYSBzaW1wbGUgbWVyZ2UKICAgICAg");
    sb.append("ICBtZXJnZTogZnVuY3Rpb24oKSB7IHJldHVybiBkZWx0YTsgfQogICAgICB9CiAgICB9CiAgfTsKCiAg");
    sb.append("dmFyIG1lcmdlX2RlbHRhID0gZnVuY3Rpb24oYSwgYikgewogICAgaWYgKHR5cGVvZihhKSA9PSAib2Jq");
    sb.append("ZWN0IiAmJiB0eXBlb2YoYikgPT0gIm9iamVjdCIpIHsKICAgICAgdmFyIHJlc3VsdCA9IHt9OwogICAg");
    sb.append("ICBmb3IgKHZhciBrIGluIGEpIHsKICAgICAgICBpZiAoayBpbiBiKSB7CiAgICAgICAgICByZXN1bHRb");
    sb.append("a10gPSBtZXJnZV9kZWx0YShhW2tdLCBiW2tdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVz");
    sb.append("dWx0W2tdID0gYVtrXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yKHZhciBrIGluIGIpIHsKICAg");
    sb.append("ICAgICBpZiAoIShrIGluIGEpKSB7CiAgICAgICAgICByZXN1bHRba10gPSBiW2tdOwogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmV0dXJuIGE7CiAgfTsKICBzZWxm");
    sb.append("Lk1EID0gbWVyZ2VfZGVsdGE7CgogIHNlbGYub25CID0gZnVuY3Rpb24oZG9tLCB0eXBlLCBzdGF0ZSwg");
    sb.append("YXJyKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24oKSB7CiAgICAgIHZh");
    sb.append("ciBzdW0gPSB7fTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBhcnIubGVuZ3RoOyBrKyspIHsKICAg");
    sb.append("ICAgICB2YXIgY21kID0gYXJyW2tdOwogICAgICAgIGNtZC5ydW4oKTsKICAgICAgICB2YXIgdG9NZXJn");
    sb.append("ZSA9IGNtZC5tZXJnZSgpCiAgICAgICAgc3VtID0gbWVyZ2VfZGVsdGEoc3VtLCB0b01lcmdlKTsKICAg");
    sb.append("ICAgfQogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHN1bSk7CiAgICB9KTsKICB9OwoKICAvLyBj");
    sb.append("aG9vc2UKICBzZWxmLmV4Q0ggPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgY2hhbm5l");
    sb.append("bCwga2V5KSB7CiAgICB2YXIgZGVjaWRlID0geyB2YWx1ZTogbnVsbCB9OwogICAgcmVnX2V2ZW50KHN0");
    sb.append("YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHJlc3VsdCA9IGZpbmQoc3RhdGUs");
    sb.append("IGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKTsKICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7CiAg");
    sb.append("ICAgICAgdmFyIGNob2ljZXMgPSBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24uY2hvaWNlczsKICAgICAgICBp");
    sb.append("ZiAoIShjaGFubmVsIGluIGNob2ljZXMpKSB7CiAgICAgICAgICBjaG9pY2VzW2NoYW5uZWxdID0ge307");
    sb.append("CiAgICAgICAgfQogICAgICAgIHZhciBjaG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxdOwogICAgICAgIHZh");
    sb.append("ciB2YWxLZXkgPSByZXN1bHRba2V5XTsKICAgICAgICBpZiAodmFsS2V5IGluIGNob2ljZSkgewogICAg");
    sb.append("ICAgICAgZGVsZXRlIGNob2ljZVt2YWxLZXldOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjaG9p");
    sb.append("Y2VbdmFsS2V5XSA9IHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9u");
    sb.append("Lm9uY2hvaWNlcyhjaGFubmVsLCBjaG9pY2UpOwogICAgICB9CiAgICB9KTsKICAgIHN1YnNjcmliZShz");
    sb.append("dGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRlY2lkZS52YWx1ZSA9IHZhbHVlOwog");
    sb.append("ICAgfSk7CiAgfTsKCiAgLy8gZGVjaWRlCiAgc2VsZi5leEQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBz");
    sb.append("dGF0ZSwgbmFtZSwgY2hhbm5lbCwga2V5KSB7CiAgICB2YXIgZGVjaWRlID0geyB2YWx1ZTogbnVsbCB9");
    sb.append("OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHJl");
    sb.append("c3VsdCA9IGZpbmQoc3RhdGUsIGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKTsKICAgICAgaWYgKHJl");
    sb.append("c3VsdCAhPSBudWxsKSB7CiAgICAgICAgbGV0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAg");
    sb.append("ICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5kKGNoYW5uZWwsIHJlc3VsdCwgewogICAgICAg");
    sb.append("ICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewoKICAgICAgICAgIH0sCiAgICAgICAgICBzdWNj");
    sb.append("ZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiU3VjY2Vzc3wi");
    sb.append("ICsgcGF5bG9hZC5zZXEgKyAiO2xhdGVuY3k9IiArIChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0KSk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgc3Vic2NyaWJlKHN0YXRl");
    sb.append("LCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgZGVjaWRlLnZhbHVlID0gdmFsdWU7CiAgICB9");
    sb.append("KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZmlyZTpjaGFubmVsIC4u");
    sb.append("LiIgLi4uPgogIHNlbGYub25GUiA9IGZ1bmN0aW9uIChzdGF0ZSwgZG9tLCB0eXBlLCBjaGFubmVsKSB7");
    sb.append("CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICBzdGF0ZS5k");
    sb.append("YXRhLmNvbm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbCwge30sIHsKICAgICAgICBzdWNjZXNzOiBmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiU0VOVCAnIiArIGNoYW5uZWwgKyAiJyIpOwog");
    sb.append("ICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgY29u");
    sb.append("c29sZS5sb2coIkZBSUxFRCBUTyBGSVJFICciICsgY2hhbm5lbCArICInIERVRToiICsgcmVhc29uKTsg");
    sb.append("JycKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4");
    sb.append("OmV2ZW50PSIuLi4gZm9yY2UtYXV0aD1uYW1lLHRva2VuIC4uLiI+CiAgc2VsZi5vbkZPUkNFX0FVVEgg");
    sb.append("PSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBpZGVudGl0eU5hbWUsIGlkZW50aXR5KSB7CiAgICByZWdfZXZl");
    sb.append("bnQobnVsbCwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlO");
    sb.append("YW1lXSA9IGlkZW50aXR5OwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlk");
    sb.append("ZW50aXR5TmFtZSwgaWRlbnRpdHkpOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiBy");
    sb.append("eDpldmVudD0iLi4uIHNldDpuYW1lPXZhbHVlIC4uLiI+CiAgc2VsZi5vblMgPSBmdW5jdGlvbiAoZG9t");
    sb.append("LCB0eXBlLCBzdGF0ZSwgbmFtZSwgdmFsdWUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBl");
    sb.append("LCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgaWYgKHR5cGVvZiAodmFsdWUp");
    sb.append("ID09ICJmdW5jdGlvbiIpIHsKICAgICAgICBvYmpbbmFtZV0gPSB2YWx1ZSgpOwogICAgICB9IGVsc2Ug");
    sb.append("ewogICAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICB9CiAgICAgIHZhciBkZWx0YSA9IHBhdGhf");
    sb.append("dG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgc3RhdGVbc3RhdGUuY3VycmVudF0udHJlZS51cGRhdGUo");
    sb.append("ZGVsdGEpOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHRl");
    sb.append("Om5hbWUgLi4uIj4KICBzZWxmLm9uVE0gPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwg");
    sb.append("b3gsIG95KSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7");
    sb.append("CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gewogICAgICAgIHg6ZXZlbnQuY2xp");
    sb.append("ZW50WCArIHdpbmRvdy5zY3JvbGxYICsgb3gsCiAgICAgICAgeTpldmVudC5jbGllbnRZICsgd2luZG93");
    sb.append("LnNjcm9sbFkgKyBveQogICAgICB9OwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcs");
    sb.append("IG9iaik7CiAgICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsKICAgIH0p");
    sb.append("OwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiB0ZTpuYW1lIC4uLiI+CiAg");
    sb.append("c2VsZi5vblRFID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG5hbWUpIHsKICAgIHJlZ19ldmVu");
    sb.append("dChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIG9iaiA9IHt9Owog");
    sb.append("ICAgICBvYmpbbmFtZV0gPSBldmVudC5tZXNzYWdlOwogICAgICBpZiAoZXZlbnQubWVzc2FnZSkgewog");
    sb.append("ICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgICBzdGF0ZVtz");
    sb.append("dGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8v");
    sb.append("IFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiByZXNldCAuLi4iPgogIHNlbGYub1JTVCA9IGZ1");
    sb.append("bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwg");
    sb.append("ZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBmID0gZm9ybV9vZihkb20pOwogICAgICBpZiAoZiAh");
    sb.append("PSBudWxsKSB7CiAgICAgICAgZi5yZXNldCgpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyBSVU5U");
    sb.append("SU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gcmVzZXQgLi4uIj4KICBzZWxmLm9STEQgPSBmdW5jdGlv");
    sb.append("biAoZG9tLCB0eXBlLCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0");
    sb.append("aW9uIChldmVudCkgewogICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0pOwogIH07CgogIC8vIFJV");
    sb.append("TlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBzdWJtaXQgLi4uIj4KICBzZWxmLm9TQk1UID0gZnVu");
    sb.append("Y3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBm");
    sb.append("dW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGYgPSBmb3JtX29mKGRvbSk7CiAgICAgIGlmIChmICE9");
    sb.append("IG51bGwpIHsKICAgICAgICB2YXIgZSA9IG5ldyBTdWJtaXRFdmVudCgnc3VibWl0JywgewogICAgICAg");
    sb.append("ICAgJ2J1YmJsZXMnICAgIDogdHJ1ZSwKICAgICAgICAgICdjYW5jZWxhYmxlJyA6IHRydWUKICAgICAg");
    sb.append("ICB9KTsKICAgICAgICBmLmRpc3BhdGNoRXZlbnQoZSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIHNl");
    sb.append("bGYub05LID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwg");
    sb.append("ZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGN1ciA9IGRvbTsKICAgICAgd2hp");
    sb.append("bGUgKGN1ci50YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT0gIk5VQ0xFQVIiKSB7CiAgICAgICAgY3VyID0g");
    sb.append("Y3VyLnBhcmVudEVsZW1lbnQ7CiAgICAgIH0KICAgICAgaWYgKGN1ciAhPSBudWxsKSB7CiAgICAgICAg");
    sb.append("bnVrZShjdXIpOwogICAgICB9CiAgICB9KTsKICB9OwoKCiAgc2VsZi5vVUNLID0gZnVuY3Rpb24gKGRv");
    sb.append("bSwgdHlwZSwgc3RhdGUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAo");
    sb.append("ZXZlbnQpIHsKICAgICAgZG9tLmNoZWNrZWQgPSBmYWxzZTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJ");
    sb.append("TUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBnb3RvOnVyaSAuLi4iPgogIHNlbGYub25HTyA9IGZ1bmN0");
    sb.append("aW9uIChkb20sIHR5cGUsIHN0YXRlLCB2YWx1ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5");
    sb.append("cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHVyaSA9ICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rp");
    sb.append("b24iKSA/IHZhbHVlKCkgOiB2YWx1ZTsKICAgICAgc2VsZi5nb3RvKHVyaSwgZmFsc2UpOwogICAgfSk7");
    sb.append("CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHRvZ2dsZTpuYW1lIC4uLiI+");
    sb.append("CiAgc2VsZi5vblQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSkgewogICAgdmFyIGNh");
    sb.append("cHR1cmVkID0geyB2YWx1ZTogZmFsc2UgfTsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gIWNhcHR1cmVk");
    sb.append("LnZhbHVlOwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0");
    sb.append("YXRlLnZpZXcudHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5h");
    sb.append("bWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBjYXB0dXJlZC52YWx1ZSA9IHZhbHVlID09IHRydWU7");
    sb.append("CiAgICB9KTsKICB9OwoKICB2YXIgb3JkZXJfdG9nZ2xlID0gZnVuY3Rpb24ocHJpb3IsIHZhbCkgewog");
    sb.append("ICAgdmFyIHBhcnRzID0gcHJpb3Iuc3BsaXQoIiwiKTsKICAgIHZhciBwcmVmaXggPSAnJzsKICAgIHZh");
    sb.append("ciBuZXh0ID0gWyIiXTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcGFydHMubGVuZ3RoOyBrKyspIHsK");
    sb.append("ICAgICAgaWYgKHBhcnRzW2tdID09ICIiKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSBp");
    sb.append("ZiAodmFsID09IHBhcnRzW2tdKSB7CiAgICAgICAgcHJlZml4ID0gJy0nOwogICAgICB9IGVsc2UgaWYg");
    sb.append("KCItIiArIHZhbCA9PXBhcnRzW2tdKSB7CiAgICAgICAgcHJlZml4ID0gJyc7CiAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgbmV4dC5wdXNoKHBhcnRzW2tdKTsKICAgICAgfQogICAgfQogICAgbmV4dFswXSA9IHBy");
    sb.append("ZWZpeCArIHZhbDsKICAgIHJldHVybiBuZXh0LmpvaW4oIiwiKTsKICB9CgogIC8vIFJVTlRJTUU6IDx0");
    sb.append("YWcgLi4gcng6ZXZlbnQ9Ii4uLiBvcmRlci10b2dnbGU6bmFtZT12YWwgLi4uIj4KICBzZWxmLm9uT1Qg");
    sb.append("PSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgdmFsKSB7CiAgICB2YXIgY2FwdHVyZWQg");
    sb.append("PSB7IHZhbHVlOiAiIiB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSBvcmRlcl90b2dnbGUoY2FwdHVy");
    sb.append("ZWQudmFsdWUsIHZhbCk7CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsK");
    sb.append("ICAgICAgc3RhdGVbc3RhdGUuY3VycmVudF0udHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgICBz");
    sb.append("dWJzY3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBjYXB0dXJlZC52YWx1");
    sb.append("ZSA9IHZhbHVlOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4u");
    sb.append("IGRlbHRhOm5hbWU9ZGlmZiIgLi4uIj4KICBzZWxmLm9uRCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0");
    sb.append("YXRlLCBuYW1lLCBkaWZmKSB7CiAgICB2YXIgY2FwdHVyZWQgPSB7IHZhbHVlOiAwIH07CiAgICByZWdf");
    sb.append("ZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgb2JqID0ge307CiAg");
    sb.append("ICAgIG9ialtuYW1lXSA9IGNhcHR1cmVkLnZhbHVlICsgZGlmZjsKICAgICAgdmFyIGRlbHRhID0gcGF0");
    sb.append("aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0");
    sb.append("ZShkZWx0YSk7CiAgICB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVl");
    sb.append("KSB7CiAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAibnVtYmVyIikgewogICAgICAgIGNhcHR1cmVk");
    sb.append("LnZhbHVlID0gdmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHZhbCA9IHBhcnNlRmxvYXQo");
    sb.append("dmFsdWUpOwogICAgICAgIGlmICghaXNOYU4odmFsKSkgewogICAgICAgICAgY2FwdHVyZWQudmFsdWUg");
    sb.append("PSB2YWw7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9OwogIHNlbGYuQ1NFTiA9IGZ1bmN0aW9u");
    sb.append("IChwYXJlbnQsIHByaW9yU3RhdGUsIGV2YWxTdGF0ZSwgY2hhbm5lbCwga2V5LCBuYW1lLCBzaG91bGRC");
    sb.append("ZSwgX2V4cGFuZCwgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7CiAgICB2YXIgY2hvc2VuID0gewogICAg");
    sb.append("ICB2YWx1ZTogIiIsCiAgICAgIG93bmVyOiBwYXJlbnQsCiAgICAgIHNob3duOiBmYWxzZSwKICAgICAg");
    sb.append("ZXZhbDogbnVsbAogICAgfTsKICAgIGFkZF91bnN1YihjaG9zZW4pOwogICAgdmFyIGNoYW5nZSA9IGZ1");
    sb.append("bmN0aW9uIChzaG93KSB7CiAgICAgIGZpcmVfdW5zdWIoY2hvc2VuKTsKICAgICAgbnVrZShwYXJlbnQp");
    sb.append("OwogICAgICB2YXIgc3RhdGUgPSBmb3JrKHByaW9yU3RhdGUpOwogICAgICBpZiAoc2hvdyA9PT0gc2hv");
    sb.append("dWxkQmUpIHsKICAgICAgICBtYWtlclRydWUocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgICAgbWFrZXJGYWxzZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfQogICAgICBzdWJzY3JpYmVfc3Rh");
    sb.append("dGUoc3RhdGUsIGNob3Nlbik7CiAgICB9OwoKICAgIGNob3Nlbi51cGRhdGUgPSBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgIHZhciBvdXQgPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFu");
    sb.append("bmVsXTsKICAgICAgaWYgKCEob3V0KSkgcmV0dXJuOwoKICAgICAgdmFyIGNob2ljZXMgPSBwcmlvclN0");
    sb.append("YXRlLmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwogICAgICBpZiAoIShjaGFubmVsIGluIGNob2ljZXMp");
    sb.append("KSB7CiAgICAgICAgY2hvaWNlc1tjaGFubmVsXSA9IHt9OwogICAgICB9CiAgICAgIHZhciBjaG9pY2Ug");
    sb.append("PSBjaG9pY2VzW2NoYW5uZWxdOwogICAgICB2YXIgcmVzdWx0ID0gY2hvc2VuLnZhbHVlIGluIGNob2lj");
    sb.append("ZTsKICAgICAgaWYgKGNob3Nlbi5ldmFsICE9IHJlc3VsdCkgewogICAgICAgIGNob3Nlbi5ldmFsID0g");
    sb.append("cmVzdWx0OwogICAgICAgIGNoYW5nZShjaG9zZW4uZXZhbCk7CiAgICAgIH0KICAgIH07CgogICAgcHJp");
    sb.append("b3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24uc3Vic2NyaWJlX2Nob2ljZShjaGFubmVsLCBmdW5jdGlvbiAo");
    sb.append("KSB7CiAgICAgIGNob3Nlbi51cGRhdGUoKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKCiAgICBz");
    sb.append("dWJzY3JpYmUoZXZhbFN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgY2hvc2VuLnZh");
    sb.append("bHVlID0gdmFsdWU7CiAgICAgIGNob3Nlbi51cGRhdGUoKTsKICAgIH0pOwogIH07CgogIHNlbGYuREUg");
    sb.append("PSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBldmFsU3RhdGUsIGNoYW5uZWwsIGtleSwgbmFt");
    sb.append("ZSwgc2hvdWxkQmUsIF9leHBhbmQsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSkgewogICAgdmFyIGRlY2lk");
    sb.append("ZSA9IHsKICAgICAgdmFsdWU6ICIiLAogICAgICBvd25lcjogcGFyZW50LAogICAgICBzaG93bjogZmFs");
    sb.append("c2UsCiAgICAgIGV2YWw6IG51bGwKICAgIH07CiAgICBhZGRfdW5zdWIoZGVjaWRlKTsKICAgIHZhciBj");
    sb.append("aGFuZ2UgPSBmdW5jdGlvbiAoc2hvdykgewogICAgICBmaXJlX3Vuc3ViKGRlY2lkZSk7CiAgICAgIG51");
    sb.append("a2UocGFyZW50KTsKICAgICAgdmFyIHN0YXRlID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgaWYgKHNo");
    sb.append("b3cgPT09IHNob3VsZEJlKSB7CiAgICAgICAgbWFrZXJUcnVlKHBhcmVudCwgc3RhdGUpOwogICAgICB9");
    sb.append("IGVsc2UgewogICAgICAgIG1ha2VyRmFsc2UocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vi");
    sb.append("c2NyaWJlX3N0YXRlKHN0YXRlLCBkZWNpZGUpOwogICAgfTsKCiAgICBkZWNpZGUudXBkYXRlID0gZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICB2YXIgcmVzdWx0ID0gZmluZChwcmlvclN0YXRlLCBjaGFubmVsLCBrZXks");
    sb.append("IGRlY2lkZS52YWx1ZSkgIT0gbnVsbDsKICAgICAgaWYgKGRlY2lkZS5ldmFsICE9IHJlc3VsdCkgewog");
    sb.append("ICAgICAgIGRlY2lkZS5ldmFsID0gcmVzdWx0OwogICAgICAgIGNoYW5nZShkZWNpZGUuZXZhbCk7CiAg");
    sb.append("ICAgIH0KICAgIH07CgogICAgcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24uc3Vic2NyaWJlKGNoYW5u");
    sb.append("ZWwsIGZ1bmN0aW9uICgpIHsKICAgICAgZGVjaWRlLnVwZGF0ZSgpOwogICAgICAvLyBUT0RPOiByZXR1");
    sb.append("cm4gd2hldGhlciBvciBub3QgdGhpcyBuZWVkcyB0byBiZSBheGVkCiAgICAgIHJldHVybiB0cnVlOwog");
    sb.append("ICAgfSk7CgogICAgc3Vic2NyaWJlKGV2YWxTdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAg");
    sb.append("ICAgIGRlY2lkZS52YWx1ZSA9IHZhbHVlOwogICAgICBkZWNpZGUudXBkYXRlKCk7CiAgICB9KTsKICB9");
    sb.append("OwoKICB2YXIgY29tbW9uSWYgPSBmdW5jdGlvbihwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHNob3VsZEJl");
    sb.append("LCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5nKSB7CiAgICB2YXIg");
    sb.append("dW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICBpZiAoZm9yY2VIaWRpbmcpIHsKICAgICAgcGFyZW50LnN0");
    sb.append("eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7CiAg");
    sb.append("ICAgIHZhciBzaG93ID0gKHZhbHVlID8gdHJ1ZSA6IGZhbHNlKSA9PT0gc2hvdWxkQmU7CiAgICAgIGlm");
    sb.append("ICh0aGlzLnNob3duID09IHNob3cpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5z");
    sb.append("aG93biA9IHNob3c7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAg");
    sb.append("ICAgIHZhciBuZXh0ID0gc2VsZi5wRChmb3JrKG9yaWdpbmFsU3RhdGUpKTsKICAgICAgaWYgKHNob3cp");
    sb.append("IHsKICAgICAgICBpZiAoZm9yY2VIaWRpbmcpIHsKICAgICAgICAgIHBhcmVudC5zdHlsZS5kaXNwbGF5");
    sb.append("ID0gIiI7CiAgICAgICAgfQogICAgICAgIG1ha2VyVHJ1ZShwYXJlbnQsIG5leHQpOwogICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgIGlmIChmb3JjZUhpZGluZykgewogICAgICAgICAgcGFyZW50LnN0eWxlLmRpc3Bs");
    sb.append("YXkgPSAibm9uZSI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1ha2VyRmFsc2UocGFyZW50LCBu");
    sb.append("ZXh0KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKG5leHQsIHVuc3ViKTsK");
    sb.append("ICAgIH0uYmluZCh7IHNob3duOiAnbm8nIH0pOwogIH0KCiAgLy8gUlVOVElNRSB8IHJ4OmlmIC8gcng6");
    sb.append("aWZub3QgPSAicGF0aDE9cGF0aDIiCiAgc2VsZi5JRmVxID0gZnVuY3Rpb24gKHBhcmVudCwgb3JpZ2lu");
    sb.append("YWxTdGF0ZSwgcXVlcnlTdGF0ZUxlZnQsIG5hbWVMZWZ0LCBxdWVyeVN0YXRlUmlnaHQsIG5hbWVSaWdo");
    sb.append("dCwgc2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcp");
    sb.append("IHsKICAgIHZhciBjb21tb24gPSB7bGVmdDpmYWxzZSwgcmlnaHQ6dHJ1ZX07CiAgICBjb21tb24ucyA9");
    sb.append("IGNvbW1vbklmKHBhcmVudCwgb3JpZ2luYWxTdGF0ZSwgc2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2Vy");
    sb.append("VHJ1ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpOwogICAgY29tbW9uLmsgPSBkZWJvdW5jZSg1LCBm");
    sb.append("dW5jdGlvbigpIHsKICAgICAgdGhpcy5zKHRoaXMubGVmdCA9PSB0aGlzLnJpZ2h0KTsKICAgIH0uYmlu");
    sb.append("ZChjb21tb24pKTsKICAgIHN1YnNjcmliZShxdWVyeVN0YXRlTGVmdCwgbmFtZUxlZnQsIGZ1bmN0aW9u");
    sb.append("IChsZWZ0KSB7CiAgICAgIHRoaXMubGVmdCA9IGxlZnQ7CiAgICAgIHRoaXMuaygpOwogICAgfS5iaW5k");
    sb.append("KGNvbW1vbikpCiAgICBzdWJzY3JpYmUocXVlcnlTdGF0ZVJpZ2h0LCBuYW1lUmlnaHQsIGZ1bmN0aW9u");
    sb.append("IChyaWdodCkgewogICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7CiAgICAgIHRoaXMuaygpOwogICAgfS5i");
    sb.append("aW5kKGNvbW1vbikpOwogIH07CgogIC8qKiB0aGUgYWJvdmUgc3BlYWtzIHRvIGEgZGVlcCBwYXR0ZXJu");
    sb.append("LiBXZSBjb3VsZCB0YWtlIGFueSBleHByZXNzaW9uIGFuZCB0aGVuIGxpbmVhcml6ZSBpdCBpbnRvIHJl");
    sb.append("YWN0aXZlIHBhcnRzLCBhbmQgdGhlbiBhc3NlbWJsZSBhIHN0YXRlbWVudCBzdGF0ZW1lbnQgb24gdGhl");
    sb.append("IGZseS4gV2Ugc2hvdWxkIGxvb2sgaW50byB1c2luZyB0aGUgY29uZGl0aW9uIGxhbmd1YWdlIGZvciB0");
    sb.append("aGlzICovCgogIC8vIFJVTlRJTUUgfCByeDppZiAvIHJ4Omlmbm90ID0gInBhdGgiCiAgc2VsZi5JRiA9");
    sb.append("IGZ1bmN0aW9uIChwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHF1ZXJ5U3RhdGUsIG5hbWUsIHNob3VsZEJl");
    sb.append("LCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5nKSB7CiAgICBzdWJz");
    sb.append("Y3JpYmUocXVlcnlTdGF0ZSwgbmFtZSwgY29tbW9uSWYocGFyZW50LCBvcmlnaW5hbFN0YXRlLCBzaG91");
    sb.append("bGRCZSwgZXhwYW5kVmlldywgbWFrZXJUcnVlLCBtYWtlckZhbHNlLCBmb3JjZUhpZGluZykpOwogIH07");
    sb.append("CgogIC8vLyBSVU5USU1FIHwgcng6YWN0aW9uPWNvcHk6cGF0aAogIHNlbGYuYUNQID0gZnVuY3Rpb24g");
    sb.append("KGZvcm0sIHN0YXRlLCBuYW1lKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1");
    sb.append("bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBvYmogPSBn");
    sb.append("ZXRfZm9ybShmb3JtLCB7fSk7CiAgICAgIGlmIChuYW1lICE9ICIuIiAmJiBuYW1lICE9ICIiKSB7CiAg");
    sb.append("ICAgICAgdmFyIG5vID0ge307CiAgICAgICAgbm9bbmFtZV0gPSBvYmo7CiAgICAgICAgb2JqID0gbm87");
    sb.append("CiAgICAgIH0KICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBz");
    sb.append("dGF0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsKICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAg");
    sb.append("fSwgdHJ1ZSk7CiAgfTsKCiAgc2VsZi5WU1AgPSBmdW5jdGlvbihzdGF0ZSwgdmFycykgewogICAgdmFy");
    sb.append("IHNtID0ge307CiAgICBzbS52YXJzID0gdmFyczsKICAgIHNtLmxhc3QgPSB7fTsKICAgIHNtLnBhcmFt");
    sb.append("cyA9ICIiOwogICAgc20ubW9kZSA9ICJyZXBsYWNlIjsKICAgIHNtLnBpbmcgPSBkZWJvdW5jZSg1LCBm");
    sb.append("dW5jdGlvbigpIHsKICAgICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0");
    sb.append("aGlzLnZhcnMubGVuZ3RoOyBrKyspIHsKICAgICAgICB2YXIgYXJnID0gdGhpcy52YXJzW2tdOwogICAg");
    sb.append("ICAgIGlmIChhcmcgaW4gdGhpcy5sYXN0KSB7CiAgICAgICAgICBhcmdzLnB1c2goYXJnICsgIj0iICsg");
    sb.append("dGhpcy5sYXN0W2FyZ10pOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgcmVzdWx0ID0gIj8iICth");
    sb.append("cmdzLmpvaW4oIiYiKTsKICAgICAgaWYgKHJlc3VsdCAhPSAiPyIgJiYgd2luZG93LmxvY2F0aW9uLnNl");
    sb.append("YXJjaCAhPT0gcmVzdWx0KSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgIG9iai52aWV3ZXJf");
    sb.append("c2VhcmNoX3F1ZXJ5ID0gcmVzdWx0OwogICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmll");
    sb.append("dywgb2JqKTsKICAgICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsKICAgICAgICB3aW5k");
    sb.append("b3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sICIiLCBmaXhIcmVmKHdpbmRvdy5sb2NhdGlvbi5wYXRo");
    sb.append("bmFtZSArIHJlc3VsdCkpOwogICAgICB9CiAgICB9LmJpbmQoc20pKTsKICAgIHN0YXRlLnZpZXcudHJl");
    sb.append("ZS5zdWJzY3JpYmUoZnVuY3Rpb24ocykgewogICAgICB0aGlzLmxhc3QgPSBzOwogICAgICB0aGlzLnBp");
    sb.append("bmcoKTsKICAgIH0uYmluZChzbSkpOwogIH07CgogIHNlbGYuRiA9IGZ1bmN0aW9uKG8saykgewogICAg");
    sb.append("aWYgKGsgaW4gbykgewogICAgICByZXR1cm4gb1trXTsKICAgIH0KICAgIHJldHVybiAiIjsKICB9OwoK");
    sb.append("ICAvLyBSVU5USU1FIHwgPGlucHV0IC4uLiByeDpzeW5jPXBhdGggLi4uPgogIHNlbGYuU1kgPSBmdW5j");
    sb.append("dGlvbiAoZWwsIHN0YXRlLCBuYW1lLCBtcykgewogICAgdmFyIHR5cGUgPSAoInR5cGUiIGluIGVsKSA/");
    sb.append("IGVsLnR5cGUudG9VcHBlckNhc2UoKSA6ICJ0ZXh0IjsKICAgIHZhciBzaWduYWwgPSBmdW5jdGlvbiAo");
    sb.append("dmFsdWUpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSB2YWx1ZTsKICAgICAg");
    sb.append("dmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZS52aWV3LnRyZWUu");
    sb.append("dXBkYXRlKGRlbHRhKTsKICAgICAgaWYgKHRoaXMuZGVkdXBlICE9IHZhbHVlKSB7CiAgICAgICAgdGhp");
    sb.append("cy5kZWR1cGUgPSB2YWx1ZTsKICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgiYWZ0ZXJz");
    sb.append("eW5jIikpOwogICAgICB9CiAgICB9LmJpbmQoe2RlZHVwZToiIn0pOwogICAgaWYgKHR5cGUgPT0gIkNI");
    sb.append("RUNLQk9YIikgewogICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBkZWJvdW5jZShtcywg");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgIHNpZ25hbChlbC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlKTsKICAg");
    sb.append("ICAgfSkpOwogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2lnbmFs");
    sb.append("KGVsLmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpOwogICAgICB9LCAxKTsKICAgIH0gZWxzZSBpZiAodHlw");
    sb.append("ZSA9PSAiUkFESU8iKSB7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGRlYm91bmNl");
    sb.append("KG1zLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHsKICAgICAgICAgIHNpZ25h");
    sb.append("bChlbC52YWx1ZSk7CiAgICAgICAgfQogICAgICB9KSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgZiA9");
    sb.append("IGRlYm91bmNlKG1zLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2lnbmFsKGVsLnZhbHVlKTsKICAgICAg");
    sb.append("fSk7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGYpOwogICAgICBlbC5hZGRFdmVu");
    sb.append("dExpc3RlbmVyKCdrZXl1cCcsIGYpCiAgICAgIGVsLm9ua2V5dXAgPSBlbC5vbmNoYW5nZTsKICAgICAg");
    sb.append("d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHNpZ25hbChlbC52YWx1ZSk7CiAg");
    sb.append("ICAgIH0sIDUpOwogICAgfQogIH07CgogIHZhciBmaXJzdE9jY3VyID0gZnVuY3Rpb24oYSwgYikgewog");
    sb.append("ICAgaWYgKGEgPiAwICYmIGIgPiAwKSB7CiAgICAgIHJldHVybiBNYXRoLm1pbihhLCBiKTsKICAgIH0K");
    sb.append("ICAgIGlmIChhID4gMCkgewogICAgICByZXR1cm4gYTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBi");
    sb.append("OwogICAgfQogIH07CiAgLy8gSEVMUEVSIHwgZXh0cmFjdCBhbGwgdGhlIGlucHV0cyBmcm9tIHRoZSBn");
    sb.append("aXZlbiBlbGVtZW50IGFuZCBidWlsZCBhbiBvYmplY3QKICB2YXIgYnVpbGRfb2JqID0gZnVuY3Rpb24g");
    sb.append("KGVsLCBvYmpUb0luc2VydEludG8sIHBhc3N3b3JkcywgaXNSb290KSB7CiAgICBpZiAoZWwudGFnTmFt");
    sb.append("ZS50b1VwcGVyQ2FzZSgpID09ICJGT1JNIiAmJiAhaXNSb290KSB7CiAgICAgIC8vIGRvbid0IGNhcmUg");
    sb.append("YWJvdXQgbmVzdGVkIGZvcm1zCiAgICAgIHJldHVybjsKICAgIH0KICAgIHZhciB1cHBlclRhZyA9IGVs");
    sb.append("LnRhZ05hbWUudG9VcHBlckNhc2UoKTsKICAgIHZhciBqdXN0U2V0ID0gdXBwZXJUYWcgPT0gIlRFWFRB");
    sb.append("UkVBIiB8fCB1cHBlclRhZyA9PSAiU0VMRUNUIjsKICAgIHZhciBpc0lucHV0Qm94ID0gdXBwZXJUYWcg");
    sb.append("PT0gIklOUFVUIjsKICAgIHZhciBpc0ZpZWxkU2V0ID0gdXBwZXJUYWcgPT0gIkZJRUxEU0VUIjsKICAg");
    sb.append("IHZhciBpc1B1bGwgPSB1cHBlclRhZyA9PSAiUFVMTFZBTFVFIjsKICAgIHZhciBoYXNOYW1lID0gIm5h");
    sb.append("bWUiIGluIGVsOwogICAgdmFyIGluc2VydEF0ID0gb2JqVG9JbnNlcnRJbnRvOwogICAgLy8gdGhlIGFw");
    sb.append("cGx5IGZ1bmN0aW9uIGlzIGhvdyB3ZSBpbmplY3QgdGhlIHZhbHVlIGludG8gdGhlIG9iamVjdAogICAg");
    sb.append("dmFyIGFwcGx5ID0gZnVuY3Rpb24gKHZhbCkgeyB9OwoKICAgIHZhciBuYW1lID0gIiI7CiAgICBpZiAo");
    sb.append("aGFzTmFtZSAmJiAoanVzdFNldCB8fCBpc0lucHV0Qm94IHx8IGlzRmllbGRTZXQgfHwgaXNQdWxsKSkg");
    sb.append("ewogICAgICBuYW1lID0gZWwubmFtZTsKICAgICAgaWYgKG5hbWUgPT0gIiIpIHsgLy8gdGhpcyBpcyBh");
    sb.append("IHNwZWNpYWwgbmFtZSBmb3IgdGhpbmdzIHRoYXQgZG9uJ3QgZ2V0IHBpY2tlZCB1cAogICAgICAgIHJl");
    sb.append("dHVybjsKICAgICAgfQogICAgICB2YXIga0RvdE9yU2xhc2ggPSBmaXJzdE9jY3VyKG5hbWUuaW5kZXhP");
    sb.append("ZignLicpLCBuYW1lLmluZGV4T2YoJy8nKSk7CiAgICAgIHdoaWxlIChrRG90T3JTbGFzaCA+IDApIHsK");
    sb.append("ICAgICAgICB2YXIgcGFyID0gbmFtZS5zdWJzdHJpbmcoMCwga0RvdE9yU2xhc2gpOwogICAgICAgIGlm");
    sb.append("ICghKHBhciBpbiBpbnNlcnRBdCkpIHsKICAgICAgICAgIGluc2VydEF0W3Bhcl0gPSB7fTsKICAgICAg");
    sb.append("ICB9CiAgICAgICAgaW5zZXJ0QXQgPSBpbnNlcnRBdFtwYXJdOwogICAgICAgIG5hbWUgPSBuYW1lLnN1");
    sb.append("YnN0cmluZyhrRG90T3JTbGFzaCArIDEpOwogICAgICAgIGtEb3RPclNsYXNoID0gZmlyc3RPY2N1cihu");
    sb.append("YW1lLmluZGV4T2YoJy4nKSwgbmFtZS5pbmRleE9mKCcvJykpOwogICAgICB9CgogICAgICBpZiAobmFt");
    sb.append("ZS5lbmRzV2l0aCgiKyIpKSB7CiAgICAgICAgLy8gaGVyZSwgd2UgcHVzaCB0aGUgdmFsdWUgaW50byB0");
    sb.append("aGUgYXJyYXkKICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoMCwgbmFtZS5sZW5ndGggLSAxKTsK");
    sb.append("ICAgICAgICBhcHBseSA9IGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICBpZiAoIShuYW1lIGluIGluc2Vy");
    sb.append("dEF0KSkgewogICAgICAgICAgICBpbnNlcnRBdFtuYW1lXSA9IFt2XTsKICAgICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICAgIGluc2VydEF0W25hbWVdLnB1c2godik7CiAgICAgICAgICB9CiAgICAgICAgfTsK");
    sb.append("ICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBoZXJlIHdlIHNldCB0aGUgb2JqZWN0CiAgICAgICAgYXBw");
    sb.append("bHkgPSBmdW5jdGlvbiAodikgewogICAgICAgICAgaW5zZXJ0QXRbbmFtZV0gPSB2OwogICAgICAgIH07");
    sb.append("CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaXNQdWxsKSB7CiAgICAgIGFwcGx5KGVsLnB1bGwoKSk7CiAg");
    sb.append("ICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoanVzdFNldCkgewogICAgICBhcHBseShlbC52YWx1ZSk7");
    sb.append("CiAgICB9IGVsc2UgaWYgKGlzRmllbGRTZXQpIHsKICAgICAgdmFyIG5leHRPYmplY3QgPSB7fTsKICAg");
    sb.append("ICAgaWYgKCJjaGlsZHJlbiIgaW4gZWwpIHsKICAgICAgICB2YXIgYXJyID0gZWwuY2hpbGRyZW47CiAg");
    sb.append("ICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysr");
    sb.append("KSB7CiAgICAgICAgICB2YXIgY2ggPSBlbC5jaGlsZHJlbltrXTsKICAgICAgICAgIGJ1aWxkX29iaihj");
    sb.append("aCwgbmV4dE9iamVjdCwgcGFzc3dvcmRzLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGFw");
    sb.append("cGx5KG5leHRPYmplY3QpOwogICAgfSBlbHNlIGlmIChpc0lucHV0Qm94KSB7CiAgICAgIHZhciB0eXBl");
    sb.append("ID0gKCJ0eXBlIiBpbiBlbCkgPyBlbC50eXBlLnRvVXBwZXJDYXNlKCkgOiAiVEVYVCI7CiAgICAgIGlm");
    sb.append("ICh0eXBlID09ICJTVUJNSVQiIHx8IHR5cGUgPT0gIlJFU0VUIikgcmV0dXJuOwogICAgICBpZiAoKHR5");
    sb.append("cGUgPT0gIlBBU1NXT1JEIiB8fCBuYW1lID09ICJwYXNzd29yZCIgfHwgbmFtZSA9PSAiY29uZmlybS1w");
    sb.append("YXNzd29yZCIpKSB7CiAgICAgICAgcGFzc3dvcmRzW25hbWVdID0gZWwudmFsdWU7CiAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICB9CiAgICAgIGlmICh0eXBlID09ICJDSEVDS0JPWCIpIHsKICAgICAgICBhcHBseShl");
    sb.append("bC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlKTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJSQURJTyIp");
    sb.append("IHsKICAgICAgICBpZiAoZWwuY2hlY2tlZCkgewogICAgICAgICAgYXBwbHkoZWwudmFsdWUpOwogICAg");
    sb.append("ICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBhcHBseShlbC52YWx1ZSk7CiAgICAgIH0KICAgIH0g");
    sb.append("ZWxzZSB7CiAgICAgIGlmICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAgICAgdmFyIGFyciA9IGVsLmNo");
    sb.append("aWxkcmVuOwogICAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IG47IGsrKykgewogICAgICAgICAgdmFyIGNoID0gZWwuY2hpbGRyZW5ba107CiAgICAgICAgICBi");
    sb.append("dWlsZF9vYmooY2gsIG9ialRvSW5zZXJ0SW50bywgcGFzc3dvcmRzLCBmYWxzZSk7CiAgICAgICAgfQog");
    sb.append("ICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi5CdWlsZEZvcm1PYmplY3QgPSBmdW5jdGlvbihmb3JtKSB7");
    sb.append("CiAgICB2YXIgb2JqID0ge307CiAgICBidWlsZF9vYmooZm9ybSwgb2JqLCBmYWxzZSwgdHJ1ZSk7CiAg");
    sb.append("ICByZXR1cm4gb2JqOwogIH07CgogIC8vIEhFTFBFUiB8IHJldHVybiBhbiBvYmplY3Qgb2YgYWxsIHRo");
    sb.append("ZSBpbnB1dHMgb2YgdGhlIGdpdmVuIGZvcm0gZWxlbWVudAogIHZhciBnZXRfZm9ybSA9IGZ1bmN0aW9u");
    sb.append("IChmb3JtLCBwYXNzd29yZHMpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIGJ1aWxkX29iaihmb3JtLCBv");
    sb.append("YmosIHBhc3N3b3JkcywgdHJ1ZSk7CiAgICByZXR1cm4gb2JqOwogIH07CgogIHZhciB3cmFwcGVycyA9");
    sb.append("IHt9OwogIHZhciB3cmFwcGVyc19vbmxvYWQgPSB7fTsKICBzZWxmLlBSV1AgPSBmdW5jdGlvbiAobmFt");
    sb.append("ZSwgZm9vKSB7CiAgICB3cmFwcGVyc1tuYW1lXSA9IGZvbzsKICAgIGlmIChuYW1lIGluIHdyYXBwZXJz");
    sb.append("X29ubG9hZCkgewogICAgICB2YXIgdG9sb2FkID0gd3JhcHBlcnNfb25sb2FkW25hbWVdOwogICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IHRvbG9hZC5sZW5ndGg7IGsrKykgewogICAgICAgIHRvbG9hZFtrXSgp");
    sb.append("OwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gPC4uLiByeDp3cmFwPWNvbnN0ID4KICBzZWxmLldQID0g");
    sb.append("ZnVuY3Rpb24gKGRvbSwgc3RhdGUsIG5hbWUsIHJ4b2JqLCBjaGlsZE1ha2VyV2l0aENhc2UpIHsKICAg");
    sb.append("IGlmIChuYW1lIGluIHdyYXBwZXJzKSB7CiAgICAgIHdyYXBwZXJzW25hbWVdKGRvbSwgc3RhdGUsIHJ4");
    sb.append("b2JqLCBjaGlsZE1ha2VyV2l0aENhc2UsIHNlbGYpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGxvYWRl");
    sb.append("ciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB3cmFwcGVyc1tuYW1lXShkb20sIHN0YXRlLCByeG9iaiwg");
    sb.append("Y2hpbGRNYWtlcldpdGhDYXNlLCBzZWxmKTsKICAgICAgfTsKICAgICAgaWYgKG5hbWUgaW4gd3JhcHBl");
    sb.append("cnNfb25sb2FkKSB7CiAgICAgICAgd3JhcHBlcnNfb25sb2FkW25hbWVdLnB1c2gobG9hZGVyKTsKICAg");
    sb.append("ICAgfSBlbHNlIHsKICAgICAgICB3cmFwcGVyc19vbmxvYWRbbmFtZV0gPSBbbG9hZGVyXTsKICAgICAg");
    sb.append("fQogICAgfQogIH07CgogIC8vIFJVTlRJTUUgfCByZWdpc3RlciB0aGUgcGFnZSBmb3IgdGhlIHVyaSB0");
    sb.append("byB0aGUgZ2l2ZW4gZm9vKCkuCiAgc2VsZi5QRyA9IGZ1bmN0aW9uICh1cmksIGZvbykgewogICAgdmFy");
    sb.append("IGhlYWQgPSByb3V0ZXI7CiAgICBmb3IgKHZhciBrID0gMDsgayA8IHVyaS5sZW5ndGg7IGsrKykgewog");
    sb.append("ICAgICB2YXIgcGFydCA9IHVyaVtrXTsKICAgICAgaWYgKCEocGFydCBpbiBoZWFkKSkgewogICAgICAg");
    sb.append("IGhlYWRbcGFydF0gPSB7fTsKICAgICAgfQogICAgICBoZWFkID0gaGVhZFtwYXJ0XTsKICAgIH0KICAg");
    sb.append("IGhlYWRbIkAiXSA9IGZvbzsKICB9OwoKICB2YXIgcm91dGUgPSBmdW5jdGlvbiAocGFydHMsIGF0LCBo");
    sb.append("ZWFkLCB2aWV3KSB7CiAgICBpZiAoYXQgPCBwYXJ0cy5sZW5ndGgpIHsKICAgICAgaWYgKCJudW1iZXIi");
    sb.append("IGluIGhlYWQpIHsKICAgICAgICB2YXIgbmVjayA9IGhlYWRbIm51bWJlciJdOwogICAgICAgIHZhciB2");
    sb.append("YWwgPSBwYXJzZUZsb2F0KHBhcnRzW2F0XSk7CiAgICAgICAgaWYgKCFpc05hTih2YWwpKSB7CiAgICAg");
    sb.append("ICAgICBmb3IgKHZhciBicmFuY2ggaW4gbmVjaykgewogICAgICAgICAgICB2aWV3W2JyYW5jaF0gPSB2");
    sb.append("YWw7CiAgICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSByb3V0ZShwYXJ0cywgYXQgKyAxLCBuZWNrW2Jy");
    sb.append("YW5jaF0sIHZpZXcpOwogICAgICAgICAgICBpZiAoY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAg");
    sb.append("ICAgICAgcmV0dXJuIGNhbmRpZGF0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWxldGUgdmll");
    sb.append("d1ticmFuY2hdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoInRleHQiIGlu");
    sb.append("IGhlYWQpIHsKICAgICAgICB2YXIgbmVjayA9IGhlYWRbInRleHQiXTsKICAgICAgICB2YXIgdmFsID0g");
    sb.append("cGFydHNbYXRdOwogICAgICAgIGZvciAodmFyIGJyYW5jaCBpbiBuZWNrKSB7CiAgICAgICAgICB2aWV3");
    sb.append("W2JyYW5jaF0gPSB2YWw7CiAgICAgICAgICB2YXIgY2FuZGlkYXRlID0gcm91dGUocGFydHMsIGF0ICsg");
    sb.append("MSwgbmVja1ticmFuY2hdLCB2aWV3KTsKICAgICAgICAgIGlmIChjYW5kaWRhdGUgIT09IG51bGwpIHsK");
    sb.append("ICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTsKICAgICAgICAgIH0KICAgICAgICAgIGRlbGV0ZSB2");
    sb.append("aWV3W2JyYW5jaF07CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICgiZml4ZWQiIGluIGhlYWQpIHsK");
    sb.append("ICAgICAgICB2YXIgbmVjayA9IGhlYWRbImZpeGVkIl07CiAgICAgICAgZm9yICh2YXIgYnJhbmNoIGlu");
    sb.append("IG5lY2spIHsKICAgICAgICAgIGlmIChicmFuY2ggPT0gcGFydHNbYXRdKSB7CiAgICAgICAgICAgIHZh");
    sb.append("ciBjYW5kaWRhdGUgPSByb3V0ZShwYXJ0cywgYXQgKyAxLCBuZWNrW2JyYW5jaF0sIHZpZXcpOwogICAg");
    sb.append("ICAgICAgICBpZiAoY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNhbmRp");
    sb.append("ZGF0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNl");
    sb.append("IHsKICAgICAgaWYgKCJAIiBpbiBoZWFkKSB7CiAgICAgICAgcmV0dXJuIGhlYWRbIkAiXTsKICAgICAg");
    sb.append("fQogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfTsKCgogIHNlbGYucmVzdW1lX3VyaSA9ICIvIjsKICBz");
    sb.append("ZWxmLmdhdGVzID0gW107CiAgLyoqIFJVTlRJTUUgfCA8Z2F0ZS1leGl0IGd1YXJkPSJyZWFkIiBzZXQ9");
    sb.append("IiI+ICovCiAgc2VsZi5JRyA9IGZ1bmN0aW9uKHN0YXRlUmVhZCwgcmVhZCwgc3RhdGVXcml0ZSwgd3Jp");
    sb.append("dGUpIHsKICAgIHZhciBzbSA9IHsKICAgICAgdmFsdWU6IGZhbHNlLAogICAgICBydW46IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgICAgIGlmICh0aGlzLnZhbHVlKSB7CiAgICAgICAgICB2YXIgb2JqID0ge307CiAgICAg");
    sb.append("ICAgICBvYmpbd3JpdGVdID0gdHJ1ZTsKICAgICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGVX");
    sb.append("cml0ZS52aWV3LCBvYmopOwogICAgICAgICAgc3RhdGVXcml0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRh");
    sb.append("KTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAg");
    sb.append("ICAgIH0sCiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlUmVhZCwgcmVhZCwgZnVuY3Rpb24odmFsdWUp");
    sb.append("IHsKICAgICAgc20udmFsdWUgPSB2YWx1ZTsKICAgIH0pOwogICAgc2VsZi5nYXRlcy5wdXNoKHNtKTsK");
    sb.append("ICB9OwogIHNlbGYuZ290byA9IGZ1bmN0aW9uICh1cmksIG5vdykgewogICAgc2VsZi5yZXN1bWVfdXJp");
    sb.append("ID0gdXJpOwogICAgdmFyIGJsb2NrZWQgPSBmYWxzZTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc2Vs");
    sb.append("Zi5nYXRlcy5sZW5ndGg7IGsrKykgewogICAgICBpZiAoc2VsZi5nYXRlc1trXS5ydW4oKSkgewogICAg");
    sb.append("ICAgIGJsb2NrZWQgPSB0cnVlOwogICAgICB9CiAgICB9CiAgICBpZiAoYmxvY2tlZCkgewogICAgICBy");
    sb.append("ZXR1cm47CiAgICB9CiAgICBpZiAobm93KSB7CiAgICAgIHNlbGYuZ290b19ub3codXJpKTsKICAgIH0g");
    sb.append("ZWxzZSB7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLmdv");
    sb.append("dG9fbm93KHVyaSk7CiAgICAgIH0sIDEpOwogICAgfQogIH07CiAgLy8gUlVOVElNRTogPHRhZyAuLi4g");
    sb.append("cng6ZXZlbnQ9Ii4uLiByZXN1bWUgLi4uIj4uLgogIHNlbGYuYlIgPSBmdW5jdGlvbigpIHsKICAgIHJl");
    sb.append("dHVybiB7CiAgICAgIHJ1bjogZnVuY3Rpb24oKSB7CiAgICAgICAgc2VsZi5nYXRlcyA9IFtdOwogICAg");
    sb.append("ICAgIHNlbGYuZ290byhzZWxmLnJlc3VtZV91cmksIGZhbHNlKTsKICAgICAgfSwKICAgICAgbWVyZ2U6");
    sb.append("IGZ1bmN0aW9uKCkge30KICAgIH07CiAgfTsKICBzZWxmLmdvdG9fbm93ID0gZnVuY3Rpb24odXJpKSB7");
    sb.append("CiAgICBpZiAodXJpLnN0YXJ0c1dpdGgoIi8iKSkgewogICAgICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5");
    sb.append("LCB1cmksIHRydWUpOwogICAgfSBlbHNlIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBmaXhI");
    sb.append("cmVmKHVyaSk7CiAgICB9CiAgfTsKCiAgdmFyIHVybEJhc2U2NFRvVWludDhBcnJheSA9IGZ1bmN0aW9u");
    sb.append("KGJhc2U2NCkgewogICAgdmFyIHJhd0RhdGEgPSB3aW5kb3cuYXRvYihiYXNlNjQpOwogICAgdmFyIG91");
    sb.append("dHB1dEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkocmF3RGF0YS5sZW5ndGgpOwogICAgZm9yICh2YXIgaSA9");
    sb.append("IDA7IGkgPCByYXdEYXRhLmxlbmd0aDsgKytpKSB7CiAgICAgIG91dHB1dEFycmF5W2ldID0gcmF3RGF0");
    sb.append("YS5jaGFyQ29kZUF0KGkpOwogICAgfQogICAgcmV0dXJuIG91dHB1dEFycmF5OwogIH0KCiAgc2VsZi5j");
    sb.append("dXJyZW50UHVzaEV2ZW50ID0gZnVuY3Rpb24oKSB7fTsKCiAgdmFyIGdldFdlYlB1c2hTdGF0dXMgPSBm");
    sb.append("dW5jdGlvbigpIHsKICAgIHZhciByZXN1bHQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgid2VicHVzaF9z");
    sb.append("dGF0dXMiKTsKICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mKHJlc3VsdCkgPT0gInN0cmluZyIpIHsKICAg");
    sb.append("ICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIHJldHVybiAidW5rbm93biI7CiAgfQoKICB2YXIgc2V0");
    sb.append("UHVzaFN0YXR1cyA9IGZ1bmN0aW9uKHN0YXR1cykgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIndl");
    sb.append("YnB1c2hfc3RhdHVzIiwgc3RhdHVzKTsKICAgIHNlbGYuY3VycmVudFB1c2hFdmVudCgpOwogIH07CiAg");
    sb.append("c2VsZi5zZXRQdXNoU3RhdHVzID0gc2V0UHVzaFN0YXR1czsKCiAgdmFyIHNldFB1c2hFdmVudCA9IGZ1");
    sb.append("bmN0aW9uKGZvbykgewogICAgc2VsZi5jdXJyZW50UHVzaEV2ZW50ID0gZm9vOwogIH07CgogIHZhciBz");
    sb.append("ZXR1cFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIChyZWdpc3RyYXRpb24sIHZhcGlkUHVibGljS2V5LCBp");
    sb.append("ZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9uKSB7CiAgICBjb25uZWN0aW9uLmJ1bXAoIndwcyIp");
    sb.append("OwogICAgdmFyIHB1c2hLZXlMb2NhbCA9ICJwdXNoX2VuZHBvaW50XyIgKyBpZGVudGl0eU5hbWU7CiAg");
    sb.append("ICByZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIKICAgIC5nZXRTdWJzY3JpcHRpb24oKS50aGVuKGFzeW5j");
    sb.append("IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHsKICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAgICAg");
    sb.append("ICAgICByZXR1cm4gc3Vic2NyaXB0aW9uOwogICAgICAgIH0KICAgICAgICBjb25zdCBjb252ZXJ0ZWRW");
    sb.append("YXBpZEtleSA9IHVybEJhc2U2NFRvVWludDhBcnJheSh2YXBpZFB1YmxpY0tleSk7CiAgICAgICAgcmV0");
    sb.append("dXJuIHJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5zdWJzY3JpYmUoewogICAgICAgICAgdXNlclZpc2li");
    sb.append("bGVPbmx5OiB0cnVlLAogICAgICAgICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IGNvbnZlcnRlZFZhcGlk");
    sb.append("S2V5CiAgICAgICAgfSk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHsKICAgICAg");
    sb.append("Ly8gbWFrZSBzdXJlIHdlIGhhdmUgYW4gZW5kcG9pbnQgc2F2ZWQgcmVsYXRlZCB0byB0aGUgcmlnaHQg");
    sb.append("dmVyc2lvbgogICAgICBjb25uZWN0aW9uLklkZW50aXR5SGFzaChpZGVudGl0eSwgewogICAgICAgIHN1");
    sb.append("Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVt");
    sb.append("KCJwdXNoX3dvcmtlcl92ZXJzaW9uIikgIT0gdmVyc2lvbiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgi");
    sb.append("bGFzdF9pZGVudGl0eV91c2VkIikgIT0gcmVzdWx0LmlkZW50aXR5SGFzaCkgewogICAgICAgICAgICBs");
    sb.append("b2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwdXNoS2V5TG9jYWwpOwogICAgICAgICAgICBsb2NhbFN0b3Jh");
    sb.append("Z2Uuc2V0SXRlbSgicHVzaF93b3JrZXJfdmVyc2lvbiIsIHZlcnNpb24pOwogICAgICAgICAgICBsb2Nh");
    sb.append("bFN0b3JhZ2Uuc2V0SXRlbSgibGFzdF9pZGVudGl0eV91c2VkIiwgcmVzdWx0LmlkZW50aXR5SGFzaCk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgc3ViID0gc3Vic2NyaXB0aW9uLnRvSlNPTigpOwogICAg");
    sb.append("ICAgICAgdmFyIHZhbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHB1c2hLZXlMb2NhbCk7CiAgICAgICAg");
    sb.append("ICBpZiAodmFsICYmIHZhbCA9PSBzdWIuZW5kcG9pbnQpIHsKICAgICAgICAgICAgY29ubmVjdGlvbi5i");
    sb.append("dW1wKCJ3cGEiKTsKICAgICAgICAgICAgc2V0UHVzaFN0YXR1cygic3VjY2VzcyIpOwogICAgICAgICAg");
    sb.append("ICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBzdWJbJ0BtZXRob2QnXSA9ICd3ZWJwdXNoJzsK");
    sb.append("ICAgICAgICAgIHN1YlsnQHRpbWUnXSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgdmFy");
    sb.append("IGRldmljZSA9IHt9OwogICAgICAgICAgZGV2aWNlLm1vZGUgPSAnd2ViJwogICAgICAgICAgaWYgKHdp");
    sb.append("bmRvdyAmJiB3aW5kb3cubmF2aWdhdG9yICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSB7CiAg");
    sb.append("ICAgICAgICAgIGRldmljZS51YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50OwogICAgICAgICAg");
    sb.append("fQogICAgICAgICAgY29ubmVjdGlvbi5QdXNoUmVnaXN0ZXIoaWRlbnRpdHksIHNlbGYuZG9tYWluLCBz");
    sb.append("dWIsIGRldmljZSwgewogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAg");
    sb.append("ICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwdXNoS2V5TG9jYWwsIHN1Yi5lbmRwb2ludCk7CiAgICAgICAg");
    sb.append("ICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIndlYnB1c2hfc3RhdHVzIiwgInN1Y2Nlc3MiKTsKICAg");
    sb.append("ICAgICAgICAgICBzZXRQdXNoU3RhdHVzKCJzdWNjZXNzIik7CiAgICAgICAgICAgIH0sCiAgICAgICAg");
    sb.append("ICAgIGZhaWx1cmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGNvbm5lY3Rpb24uYnVtcCgid3Bm");
    sb.append("Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTog");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICAgICAgICBjb25uZWN0aW9uLmJ1bXAoIndwZiIpOwogICAgICAgIH0KICAg");
    sb.append("ICAgfSk7CiAgICB9LCBmdW5jdGlvbihlcnIpIHsKICAgICAgc2V0UHVzaFN0YXR1cygiZmFpbGVkIik7");
    sb.append("CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHB1c2hLZXlMb2NhbCk7CiAgICAgIGxvY2FsU3Rv");
    sb.append("cmFnZS5yZW1vdmVJdGVtKCJsYXN0X2lkZW50aXR5X3VzZWQiKTsKICAgICAgbG9jYWxTdG9yYWdlLnJl");
    sb.append("bW92ZUl0ZW0oInB1c2hfd29ya2VyX3ZlcnNpb24iKTsKICAgICAgY29ubmVjdGlvbi5idW1wKCJ3cGQi");
    sb.append("KTsKICAgICAgY29ubmVjdGlvbi5sb2coInB1c2hzZXR1cCIsICIiICsgZXJyKTsKICAgIH0pOwogIH0K");
    sb.append("CiAgdmFyIHNldHVwUHVzaCA9IGZ1bmN0aW9uKHBhdGgsIHZhcGlkUHVibGljS2V5LCBpZGVudGl0eSwg");
    sb.append("aWRlbnRpdHlOYW1lLCB2ZXJzaW9uKSB7CiAgICBpZiAobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpIHsK");
    sb.append("ICAgICAgdHJ5IHsKICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5nZXRSZWdpc3RyYXRpb25z");
    sb.append("KCkudGhlbihmdW5jdGlvbiAocmVnaXN0cmF0aW9ucykgewogICAgICAgICAgdmFyIGZvdW5kID0gZmFs");
    sb.append("c2U7CiAgICAgICAgICBmb3IgKGxldCByZWdpc3RyYXRpb24gb2YgcmVnaXN0cmF0aW9ucykgewogICAg");
    sb.append("ICAgICAgICBpZiAocmVnaXN0cmF0aW9uLmFjdGl2ZSkgewogICAgICAgICAgICAgIGlmICghcmVnaXN0");
    sb.append("cmF0aW9uLmFjdGl2ZS5zY3JpcHRVUkwuZW5kc1dpdGgocGF0aCkpIHsKICAgICAgICAgICAgICAgIHJl");
    sb.append("Z2lzdHJhdGlvbi51bnJlZ2lzdGVyKCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg");
    sb.append("ICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHNldHVwU3Vic2NyaXB0aW9uKHJlZ2lzdHJh");
    sb.append("dGlvbiwgdmFwaWRQdWJsaWNLZXksIGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pOwogICAg");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKCFmb3VuZCkg");
    sb.append("ewogICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihwYXRoKTsKICAgICAg");
    sb.append("ICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHkudGhlbihmdW5jdGlvbiAocmVnaXN0cmF0");
    sb.append("aW9uKSB7CiAgICAgICAgICAgICAgc2V0dXBTdWJzY3JpcHRpb24ocmVnaXN0cmF0aW9uLCB2YXBpZFB1");
    sb.append("YmxpY0tleSwgaWRlbnRpdHksIGlkZW50aXR5TmFtZSwgdmVyc2lvbik7CiAgICAgICAgICAgIH0pOwog");
    sb.append("ICAgICAgICAgfQogICAgICAgIH0sIGZ1bmN0aW9uKGV4KSB7CiAgICAgICAgICBjb25uZWN0aW9uLmJ1");
    sb.append("bXAoIndwaTMiKTsKICAgICAgICAgIGNvbm5lY3Rpb24ubG9nKCJ3b3JrZXItZmluZCIsICIiICsgZXgp");
    sb.append("OwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoImZh");
    sb.append("aWxlZCB0byByZWdpc3RlciBzZXJ2aWNlIHdvcmtlciIsIGV4KTsKICAgICAgICBzZXRQdXNoU3RhdHVz");
    sb.append("KCJpbXBvc3NpYmxlIik7CiAgICAgICAgY29ubmVjdGlvbi5idW1wKCJ3cGkyIik7CiAgICAgICAgY29u");
    sb.append("bmVjdGlvbi5sb2coIndvcmtlci1pbnN0YWxsIiwgIiIgKyBleCk7CiAgICAgIH0KICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgIGNvbnNvbGUubG9nKCJubyBzZXJ2aWNlIHdvcmtlciBhdmFpbGFibGUiKTsKICAgICAgc2V0");
    sb.append("UHVzaFN0YXR1cygiaW1wb3NzaWJsZSIpOwogICAgICBjb25uZWN0aW9uLmJ1bXAoIndwaTEiKTsKICAg");
    sb.append("IH0KICB9CgogIHNlbGYud29ya2VyID0gZnVuY3Rpb24oaWRlbnRpdHlOYW1lLCBwYXRoLCB2ZXJzaW9u");
    sb.append("KSB7CiAgICB0cnkgewogICAgICBhZnRlckhhdmVJZGVudGl0eShpZGVudGl0eU5hbWUsIGZ1bmN0aW9u");
    sb.append("KGlkZW50aXR5KSB7CiAgICAgICAgY29ubmVjdGlvbi5Eb21haW5HZXRWYXBpZFB1YmxpY0tleShpZGVu");
    sb.append("dGl0eSwgc2VsZi5kb21haW4sIHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7");
    sb.append("CiAgICAgICAgICAgIHNldHVwUHVzaChwYXRoLCByZXNwb25zZS5wdWJsaWNLZXksIGlkZW50aXR5LCBp");
    sb.append("ZGVudGl0eU5hbWUsIHZlcnNpb24pOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0");
    sb.append("aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcigiZmFpbGVkIHRvIGdldCBwdWJs");
    sb.append("aWMta2V5OiIgKyByZWFzb24pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pOwogICAgfSBj");
    sb.append("YXRjaCAoZXgpIHsKICAgICAgY29uc29sZS5lcnJvcigiZmFpbGVkIHRvIGluaXRpYWxpemUgd29ya2Vy");
    sb.append("IiwgZXgpOwogICAgfQogIH07CgogIHNlbGYuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgIHNlbGYucnVu");
    sb.append("KGRvY3VtZW50LmJvZHksIGZpeFBhdGgod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93Lmxv");
    sb.append("Y2F0aW9uLnNlYXJjaCArIHdpbmRvdy5sb2NhdGlvbi5oYXNoKSwgZmFsc2UpOwogICAgd2luZG93Lm9u");
    sb.append("cG9wc3RhdGUgPSBmdW5jdGlvbiAocCkgewogICAgICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5LCBmaXhQ");
    sb.append("YXRoKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyB3aW5k");
    sb.append("b3cubG9jYXRpb24uaGFzaCksIGZhbHNlKTsKICAgIH07CiAgfTsKCiAgc2VsZi5jdXJyZW50Vmlld2Vy");
    sb.append("SWQgPSAwOwogIC8vIEFQSSB8IFJ1biB0aGUgcGFnZSBpbiB0aGUgZ2l2ZW4gcGxhY2UKICBzZWxmLnJ1");
    sb.append("biA9IGZ1bmN0aW9uICh3aGVyZSwgcmF3UGF0aCwgcHVzaCkgewogICAgdmFyIHBhdGggPSByYXdQYXRo");
    sb.append("OwogICAgd2hpbGUgKHBhdGguZW5kc1dpdGgoIi8iKSAmJiBwYXRoICE9ICIvIikgewogICAgICBwYXRo");
    sb.append("ID0gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sZW5ndGggLSAxKTsKICAgIH0KICAgIGZvciAoY29uS2V5");
    sb.append("IGluIGNvbm5lY3Rpb25zKSB7CiAgICAgIGNvbm5lY3Rpb25zW2NvbktleV0udHJlZS5udWtlKCk7CiAg");
    sb.append("ICAgIGNvbm5lY3Rpb25zW2NvbktleV0ubnVrZSgpOwogICAgfQogICAgdmFyIHNlYXJjaCA9ICIiOwog");
    sb.append("ICAgdmFyIGtRdWVzdGlvbiA9IHBhdGguaW5kZXhPZignPycpOwogICAgaWYgKGtRdWVzdGlvbiA+IDAp");
    sb.append("IHsKICAgICAgc2VhcmNoID0gcGF0aC5zdWJzdHJpbmcoa1F1ZXN0aW9uKTsKICAgICAgcGF0aCA9IHBh");
    sb.append("dGguc3Vic3RyaW5nKDAsIGtRdWVzdGlvbik7CiAgICB9CiAgICB2YXIgcGFydHMgPSAocGF0aC5zdGFy");
    sb.append("dHNXaXRoKCIvIikgPyBwYXRoLnN1YnN0cmluZygxKSA6IHBhdGgpLnNwbGl0KCIvIik7CiAgICB2YXIg");
    sb.append("aW5pdCA9IHt9OwogICAgc2VsZi5jdXJyZW50Vmlld2VySWQrKzsKICAgIGluaXQudmlld2VyX2N1cnJl");
    sb.append("bnRfcGFnZV9pZCA9IHNlbGYuY3VycmVudFZpZXdlcklkOwogICAgdHJ5IHsKICAgICAgaW5pdC52aWV3");
    sb.append("ZXJfdGltZXpvbmUgPSBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpv");
    sb.append("bmU7CiAgICAgIGluaXQudmlld2VyX2xhbmd1YWdlID0gbmF2aWdhdG9yLmxhbmd1YWdlOwogICAgfSBj");
    sb.append("YXRjaCAoYnJvd3NlckJhZCkgewogICAgICAvLyB3ZSBqdXN0IGRvbid0IHNlZSB0aGUgdmlld3N0YXRl");
    sb.append("IGlmIHdlIGRvbid0IGhhdmUgdGhlc2UgYXZhaWxhYmxlCiAgICB9CiAgICBpbml0LnZpZXdlcl9zZWFy");
    sb.append("Y2hfcXVlcnkgPSAiIjsKICAgIGluaXQudmlld2VyX3dlYl9wdXNoX3N0YXR1cyA9IGdldFdlYlB1c2hT");
    sb.append("dGF0dXMoKTsKICAgIGlmIChzZWFyY2ggIT0gIj8iKSB7CiAgICAgIGluaXQudmlld2VyX3NlYXJjaF9x");
    sb.append("dWVyeSA9IHNlYXJjaDsKICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhzZWFy");
    sb.append("Y2guc3Vic3RyaW5nKDEpKTsKICAgICAgdmFyIGtJdCA9IHBhcmFtcy5rZXlzKCk7CiAgICAgIHZhciBw");
    sb.append("ID0ga0l0Lm5leHQoKTsKICAgICAgd2hpbGUgKCFwLmRvbmUpIHsKICAgICAgICBpbml0W3AudmFsdWVd");
    sb.append("ID0gcGFyYW1zLmdldChwLnZhbHVlKTsKICAgICAgICBwID0ga0l0Lm5leHQoKTsKICAgICAgfQogICAg");
    sb.append("fQogICAgdmFyIGZvbyA9IHJvdXRlKHBhcnRzLCAwLCByb3V0ZXIsIGluaXQpOwogICAgbnVrZSh3aGVy");
    sb.append("ZSk7CiAgICBpZiAoZm9vICE9IG51bGwpIHsKICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApOwogICAg");
    sb.append("ICB2YXIgc3RhdGUgPSB7IHNlcnZpY2U6IGNvbm5lY3Rpb24sIGRhdGE6IG51bGwsIHZpZXc6IGZyZXNo");
    sb.append("KHdoZXJlKSwgY3VycmVudDogInZpZXciIH07CiAgICAgIHNlbGYuX19jdXJyZW50ID0gc3RhdGU7Cgog");
    sb.append("ICAgICBjb25zdCB2aWV3c3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncnh2aWV3c3RhdGUnKTsK");
    sb.append("ICAgICAgaWYgKG51bGwgIT09IHZpZXdzdGF0ZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJ");
    sb.append("dGVtKCdyeHZpZXdzdGF0ZScpOwogICAgICAgIGluaXQgPSBPYmplY3QuYXNzaWduKHt9LCBpbml0LCBK");
    sb.append("U09OLnBhcnNlKHZpZXdzdGF0ZSkpOwogICAgICB9CgogICAgICBzdGF0ZS52aWV3LmluaXQgPSBpbml0");
    sb.append("OwogICAgICBzZWxmLmdhdGVzID0gW107CiAgICAgIHNlbGYucmVzdW1lX3VyaSA9IHBhdGg7CiAgICAg");
    sb.append("IGZvbyh3aGVyZSwgc3RhdGUpOwogICAgICBzdGF0ZS52aWV3LnRyZWUuc3Vic2NyaWJlKHN0YXRlLnZp");
    sb.append("ZXcuZGVsdGEpOwogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKGluaXQpOwogICAgICBpZiAocHVz");
    sb.append("aCkgewogICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7bWVyZ2U6ZmFsc2V9LCAiIiwgZml4");
    sb.append("SHJlZihwYXRoKSArIHNlYXJjaCk7CiAgICAgIH0KICAgICAgc2V0UHVzaEV2ZW50KGZ1bmN0aW9uKCkg");
    sb.append("ewogICAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoeyB2aWV3ZXJfd2ViX3B1c2hfc3RhdHVzOiBn");
    sb.append("ZXRXZWJQdXNoU3RhdHVzKCl9KTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBpZiAocGF0aCAh");
    sb.append("PSAiLzQwNCIpIHsKICAgICAgICBzZWxmLnJ1bih3aGVyZSwgIi80MDQiKTsKICAgICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgICAvLyBkZWZhdWx0IDQwNAogICAgICB9CiAgICB9CiAgICB3aGVyZS5hcHBlbmRDaGlsZChj");
    sb.append("b25uZWN0aW9uTW9uaXRvckRvbSk7CiAgfTsKCiAgdmFyIGlkZW50aXRpZXMgPSB7fTsKCiAgc2VsZi5T");
    sb.append("SUdOT1VUID0gZnVuY3Rpb24gKCkgewogICAgaWRlbnRpdGllcyA9IHt9OwogICAgZm9yICh2YXIgaWRl");
    sb.append("bnRpdHlOYW1lIGluIGlkZW50aXRpZXMpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImlk");
    sb.append("ZW50aXR5XyIgKyBpZGVudGl0eU5hbWUpOwogICAgfQogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0o");
    sb.append("ImlkZW50aXR5X2RlZmF1bHQiKTsKICAgIHZhciBheGUgPSBbXTsKICAgIGZvciAodmFyIGNpZCBpbiBj");
    sb.append("b25uZWN0aW9ucykgewogICAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tjaWRdOwogICAgICBpZiAoY28u");
    sb.append("cHRyICE9IG51bGwpIHsKICAgICAgICBjby5wdHIuZW5kKHsgc3VjY2VzczogZnVuY3Rpb24gKCkgeyB9");
    sb.append("LCBmYWlsdXJlOiBmdW5jdGlvbiAoKSB7IH0gfSk7CiAgICAgIH0KICAgICAgYXhlLnB1c2goY2lkKTsK");
    sb.append("ICAgIH0KICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXhlLmxlbmd0aDsgaysrKSB7CiAgICAgIGRlbGV0");
    sb.append("ZSBjb25uZWN0aW9uc1theGVba11dOwogICAgfQogIH07CgogIHNlbGYuR09PR0xFX1NJR05fT04gPSBm");
    sb.append("dW5jdGlvbiAoYWNjZXNzVG9rZW4pIHsKICAgIGNvbm5lY3Rpb24uSW5pdENvbnZlcnRHb29nbGVVc2Vy");
    sb.append("KGFjY2Vzc1Rva2VuLCB7CiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAg");
    sb.append("aWRlbnRpdGllc1siZGVmYXVsdCJdID0gcGF5bG9hZC5pZGVudGl0eTsKICAgICAgICBsb2NhbFN0b3Jh");
    sb.append("Z2Uuc2V0SXRlbSgiaWRlbnRpdHlfZGVmYXVsdCIsIHBheWxvYWQuaWRlbnRpdHkpOwogICAgICAgIHNl");
    sb.append("bGYuZ290bygiLyIsIGZhbHNlKTsKICAgICAgfSwKICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNv");
    sb.append("bikgewogICAgICAgIGNvbnNvbGUubG9nKCJHb29nbGUgZmFpbHVyZTogIiArIHJlYXNvbik7CiAgICAg");
    sb.append("IH0KICAgIH0pOwogIH07CgogIC8qKiBSVU5USU1FIHwgcmVkaXJlY3QgdG8gYSBwYWdlIHdpdGggc3Rh");
    sb.append("dGUgKi8KICBzZWxmLmFSRHAgPSBmdW5jdGlvbiAoc3RhdGUsIHB1bGxlcikgewogICAgcmV0dXJuIGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgdmFyIHVyaSA9IHB1bGxlcihzdGF0ZS52aWV3LmluaXQpOwogICAgICBy");
    sb.append("ZXR1cm4gdXJpOwogICAgfTsKICB9OwoKICAvKiogUlVOVElNRSB8IHJlZGlyZWN0IHRvIGEgc3RhdGlj");
    sb.append("IHBhZ2UgKi8KICBzZWxmLmFSRHogPSBmdW5jdGlvbiAocmF3KSB7CiAgICByZXR1cm4gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICByZXR1cm4gcmF3OwogICAgfQogIH07CgogIHZhciBpZGVudGl0eUV2ZW50cyA9IHt9");
    sb.append("OwogIHZhciBhZnRlckhhdmVJZGVudGl0eSA9IGZ1bmN0aW9uKGlkZW50aXR5TmFtZSwgY2FsbGJhY2sp");
    sb.append("IHsKICAgIGlkZW50aXR5RXZlbnRzW2lkZW50aXR5TmFtZV0gPSBjYWxsYmFjazsKICB9OwogIHNlbGYu");
    sb.append("YWZ0ZXJIYXZlSWRlbnRpdHkgPSBhZnRlckhhdmVJZGVudGl0eTsKCiAgLyoqIGZvciBjdXN0b20gZWxl");
    sb.append("bWVudHMgdG8gbGVhcm4gb2YgdGhlIGlkZW50aXR5ICovCiAgc2VsZi5JRCA9IGZ1bmN0aW9uIChpZGVu");
    sb.append("dGl0eU5hbWUsIHJlZGlyZWN0VG9GdW5jKSB7CiAgICBpZiAoaWRlbnRpdHlOYW1lID09PSB0cnVlKSB7");
    sb.append("CiAgICAgIGlkZW50aXR5TmFtZSA9ICJkZWZhdWx0IjsKICAgIH0KICAgIC8vIElGIGlkZW50aXR5IGNv");
    sb.append("bnRhaW5zIGRvdHMKICAgIHZhciBpZGVudGl0eSA9IG51bGw7CiAgICB2YXIgY2xlYW51cCA9IGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgIH07CgogICAgdmFyIHZhbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpZGVudGl0");
    sb.append("eV8iICsgaWRlbnRpdHlOYW1lKTsKICAgIGlmICh2YWwpIHsKICAgICAgaWRlbnRpdGllc1tpZGVudGl0");
    sb.append("eU5hbWVdID0gdmFsOwogICAgfQoKICAgIGlmIChpZGVudGl0eU5hbWUuc3RhcnRzV2l0aCgiZGlyZWN0");
    sb.append("OiIpKSB7CiAgICAgIC8vIFVzZSwgYXMgaXMKICAgICAgaWRlbnRpdHkgPSBpZGVudGl0eU5hbWUuc3Vi");
    sb.append("c3RyaW5nKDcpOwogICAgfSBlbHNlIGlmIChpZGVudGl0eU5hbWUgaW4gaWRlbnRpdGllcykgewogICAg");
    sb.append("ICBpZGVudGl0eSA9IGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXTsKICAgICAgY2xlYW51cCA9IGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICBkZWxldGUgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdOwogICAgICAgIGxv");
    sb.append("Y2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlOYW1lKTsKICAgICAgICBz");
    sb.append("ZWxmLmdvdG8ocmVkaXJlY3RUb0Z1bmMoKSwgZmFsc2UpOwogICAgICB9OwogICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgLy8gd2hhdGV2ZXIgcGFnZSB3ZSBhcmUsIG5lZWRzIHRvIGRpZSB3aGljaCBtZWFucyB3ZSBuZWVk");
    sb.append("IHRvIG51a2UgZXZlcnl0aGluZyEKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICAgIHNlbGYuZ290byhyZWRpcmVjdFRvRnVuYygpLCBmYWxzZSk7CiAgICAgIH0sIDEwKTsKICAg");
    sb.append("ICAgcmV0dXJuIHsgYWJvcnQ6IHRydWUgfTsKICAgIH0KICAgIGlmIChpZGVudGl0eU5hbWUgaW4gaWRl");
    sb.append("bnRpdHlFdmVudHMpIHsKICAgICAgaWRlbnRpdHlFdmVudHNbaWRlbnRpdHlOYW1lXShpZGVudGl0eSk7");
    sb.append("CiAgICAgIGRlbGV0ZSBpZGVudGl0eUV2ZW50c1tpZGVudGl0eU5hbWVdOwogICAgfQogICAgcmV0dXJu");
    sb.append("IHsgYWJvcnQ6IGZhbHNlLCBjbGVhbnVwOiBjbGVhbnVwLCBpZGVudGl0eTogaWRlbnRpdHkgfTsKICB9");
    sb.append("OwoKICAvKiBGb3IgY3VzdG9tIGNhbGxiYWNrcyB0byByZWRpcmVjdCBhbmQgaW52YWxpZGF0ZSBJRCBm");
    sb.append("YWlsdXJlcyAqLwogIHNlbGYuRklEQ0wgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGxvb2t1cCkgewogICAg");
    sb.append("cmV0dXJuIHsKICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIGNhbGxiYWNr");
    sb.append("LnN1Y2Nlc3MocmVzdWx0KTsKICAgICAgfSwKICAgICAgbmV4dDogZnVuY3Rpb24gKGl0ZW0pIHsKICAg");
    sb.append("ICAgICBjYWxsYmFjay5uZXh0KGl0ZW0pOwogICAgICB9LAogICAgICBjb21wbGV0ZTogZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgIGNhbGxiYWNrLmNvbXBsZXRlKCk7CiAgICAgIH0sCiAgICAgIGZhaWx1cmU6IGZ1");
    sb.append("bmN0aW9uIChyZWFzb24pIHsKICAgICAgICBjYWxsYmFjay5mYWlsdXJlKHJlYXNvbik7CiAgICAgICAg");
    sb.append("aWYgKHJlYXNvbiA9PSA0MDM0MDMgfHwgcmVhc29uID09IDQwMzUwMCB8fCByZWFzb24gPT0gMTg0MzMz");
    sb.append("KSB7CiAgICAgICAgICBsb29rdXAuY2xlYW51cCgpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9");
    sb.append("OwoKICB2YXIgY3VzdG9tRGF0YVNvdXJjZXMgPSB7fTsKCiAgLyoqIHByb3ZpZGUgY3VzdG9tIGRhdGEg");
    sb.append("Ki8KICBzZWxmLlBSQ1VEQSA9IGZ1bmN0aW9uIChuYW1lLCBmb28pIHsKICAgIGN1c3RvbURhdGFTb3Vy");
    sb.append("Y2VzW25hbWVdID0gZm9vOwogIH07CgogIC8vIDxjdXN0b21kYXRhIHNyYz1zcmMgKHBhcmFtZXRlcjp4");
    sb.append("PXkpKiA+CiAgc2VsZi5DVURBID0gZnVuY3Rpb24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgc3JjLCByeG9i");
    sb.append("aiwgcmVkaXJlY3RUbywgY2hpbGRNYWtlcikgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwog");
    sb.append("ICAgcnhvYmouX18gPSBkZWJvdW5jZSgxMCwgZnVuY3Rpb24gKCkgewogICAgICBmaXJlX3Vuc3ViKHVu");
    sb.append("c3ViKTsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICB2YXIgY3VzdG9tVHJlZSA9IGZhbHNlOwogICAg");
    sb.append("ICBpZiAoc3JjIGluIGN1c3RvbURhdGFTb3VyY2VzKSB7CiAgICAgICAgdmFyIGNvbnMgPSBjdXN0b21E");
    sb.append("YXRhU291cmNlc1tzcmNdOwogICAgICAgIGlmICh0eXBlb2YgKGNvbnMpID09ICJmdW5jdGlvbiIpIHsK");
    sb.append("ICAgICAgICAgIGN1c3RvbVRyZWUgPSBjb25zKHJ4b2JqLCBwcmlvclN0YXRlLCByZWRpcmVjdFRvLCBz");
    sb.append("ZWxmKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCFjdXN0b21UcmVlKSB7CiAgICAgICAgY3Vz");
    sb.append("dG9tVHJlZSA9IG5ldyBBZGFtYVRyZWUoKTsKICAgICAgfQogICAgICB2YXIgc3RhdGUgPSB7CiAgICAg");
    sb.append("ICAgc2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNlLAogICAgICAgIGRhdGE6IHsgY29ubmVjdGlvbjog");
    sb.append("cHJpb3JTdGF0ZS5jb25uZWN0aW9uLCB0cmVlOiBjdXN0b21UcmVlLCBkZWx0YToge30sIHBhcmVudDog");
    sb.append("bnVsbCwgcGF0aDogbnVsbCB9LAogICAgICAgIHZpZXc6IG5ld19kZWx0YV9jb3B5KHByaW9yU3RhdGUu");
    sb.append("dmlldyksCiAgICAgICAgY3VycmVudDogImRhdGEiCiAgICAgIH07CiAgICAgIGNoaWxkTWFrZXIoc3Rh");
    sb.append("dGUpOwogICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsKICAgIH0pOwogIH07CgogIC8v");
    sb.append("IDx0aXRsZSB2YWx1ZT0iLi4uIiAvPgogIHNlbGYuU1QgPSBmdW5jdGlvbiAocnhvYmopIHsKICAgIGlm");
    sb.append("IChyeG9iai52YWx1ZSkgewogICAgICBkb2N1bWVudC50aXRsZSA9IHJ4b2JqLnZhbHVlOwogICAgfQog");
    sb.append("ICAgcnhvYmouX18gPSBkZWJvdW5jZSg1LCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChyeG9iai52YWx1");
    sb.append("ZSkgewogICAgICAgIGRvY3VtZW50LnRpdGxlID0gcnhvYmoudmFsdWU7CiAgICAgIH0KICAgIH0pOwog");
    sb.append("IH07CgogIC8vIDx2aWV3c3luYz4KICBzZWxmLlZTeSA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3Rh");
    sb.append("dGUsIGF2YWlsLCBub3RhdmFpbCkgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgcHJp");
    sb.append("b3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24uc3Vic2NyaWJlX3N5bmMoZnVuY3Rpb24gKHN5bmNlZCkgewog");
    sb.append("ICAgICBudWtlKHBhcmVudCk7CiAgICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICB2YXIgc3RhdGUg");
    sb.append("PSBmb3JrKHByaW9yU3RhdGUpOwogICAgICBpZiAoc3luY2VkKSB7CiAgICAgICAgYXZhaWwocGFyZW50");
    sb.append("LCBzdGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbm90YXZhaWwocGFyZW50LCBzdGF0ZSk7CiAg");
    sb.append("ICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgIC8vIFRPRE86IHJl");
    sb.append("dHVybiBmYWxzZSB0byB1bnN1YgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwogIH07CgogIHZhciBi");
    sb.append("aW5kX3Jlc3BvbmRlciA9IGZ1bmN0aW9uIChjbywgY2xlYW51cCwgcmV0cnlfc20pIHsKICAgIHJldHJ5");
    sb.append("X3NtLnVuZXhwZWN0ZWRfZXJyb3JzID0gMDsKICAgIHJldHJ5X3NtLmJhY2tvZmYgPSAxOwogICAgcmV0");
    sb.append("dXJuIHsKICAgICAgbmV4dDogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICBjby5kZWJ1Z2dlcihw");
    sb.append("YXlsb2FkKTsKICAgICAgICBjby5zZXRfY29ubmVjdGVkKHRydWUpOwogICAgICAgIHJldHJ5X3NtLnVu");
    sb.append("ZXhwZWN0ZWRfZXJyb3JzID0gMDsKICAgICAgICByZXRyeV9zbS5iYWNrb2ZmID0gMTsKICAgICAgICBp");
    sb.append("ZiAoImRhdGEiIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIGNvLnRyZWUudXBkYXRlKHBheWxv");
    sb.append("YWQuZGVsdGEuZGF0YSk7CiAgICAgICAgfQogICAgICAgIGlmICgib3V0c3RhbmRpbmciIGluIHBheWxv");
    sb.append("YWQuZGVsdGEpIHsKICAgICAgICAgIGNvLm9uZGVjaWRlKHBheWxvYWQuZGVsdGEub3V0c3RhbmRpbmcp");
    sb.append("OwogICAgICAgIH0KICAgICAgICBpZiAoJ3ZpZXdzdGF0ZScgaW4gcGF5bG9hZC5kZWx0YSkgewogICAg");
    sb.append("ICAgICAgY28udmlld3N0YXRldHJlZS51cGRhdGUocGF5bG9hZC5kZWx0YS52aWV3c3RhdGUpOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBpZiAoJ2xvZycgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgY29uc29s");
    sb.append("ZS5sb2cocGF5bG9hZC5kZWx0YS5sb2cpOwogICAgICAgIH0KICAgICAgICBpZiAoJ3JlbG9hZCcgaW4g");
    sb.append("cGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgaWYgKHBheWxvYWQuZGVsdGEucmVsb2FkWydwcmVzZXJ2");
    sb.append("ZS12aWV3J10pIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3J4dmlld3N0YXRlJywg");
    sb.append("SlNPTi5zdHJpbmdpZnkoY28udmlld3N0YXRldHJlZS5yYXcoKSkpOwogICAgICAgICAgfQogICAgICAg");
    sb.append("ICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0KICAgICAgICBpZiAoJ3ZpZXdwb3J0");
    sb.append("JyBpbiBwYXlsb2FkLmRlbHRhICYmICdtZXNzYWdlJyBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAg");
    sb.append("ICB2YXIgdmlld3BvcnQgPSBwYXlsb2FkLmRlbHRhLnZpZXdwb3J0OwogICAgICAgICAgaWYgKHZpZXdw");
    sb.append("b3J0IGluIGNvLmhhbmRsZXJzKSB7CiAgICAgICAgICAgIGNvLmhhbmRsZXJzW3ZpZXdwb3J0XShwYXls");
    sb.append("b2FkLmRlbHRhLm1lc3NhZ2UsIGNvKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCd2");
    sb.append("aWV3LXN0YXRlLWZpbHRlcicgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgdmFyIGZpbHRlciA9");
    sb.append("IHt9OwogICAgICAgICAgdmFyIGtleXMgPSBwYXlsb2FkLmRlbHRhWyd2aWV3LXN0YXRlLWZpbHRlcidd");
    sb.append("OwogICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBrZXlzLmxlbmd0aDsgaysrKSB7CiAgICAgICAg");
    sb.append("ICAgIGZpbHRlcltrZXlzW2tdXSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICBjby5maWx0ZXIg");
    sb.append("PSBmaWx0ZXI7CiAgICAgICAgICBjby5oYXNfZmlsdGVyID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAg");
    sb.append("aWYgKCdnb3RvJyBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBzZWxmLmdvdG8ocGF5bG9hZC5k");
    sb.append("ZWx0YS5nb3RvLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBjb21wbGV0ZTogZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICAgIC8vIHNob3VsZG4ndCByZWFsaXN0aWNhbGx5IGhhcHBlbiBUT0RPOiB2YWxp");
    sb.append("ZGF0ZSA8LSB0cnV0aAogICAgICAgIGNvLnNldF9jb25uZWN0ZWQoZmFsc2UpOwogICAgICAgIGNvLnB0");
    sb.append("ciA9IG51bGw7CiAgICAgIH0sCiAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAg");
    sb.append("ICAvLyByZWdpc3RlciB0aGUgZmFpbHVyZQogICAgICAgIGNvLnNldF9jb25uZWN0ZWQoZmFsc2UpOwog");
    sb.append("ICAgICAgIGNvLnB0ciA9IG51bGw7CiAgICAgICAgaWYgKHJlYXNvbiA9PSA0MDM0MDMgfHwgcmVhc29u");
    sb.append("ID09IDQwMzUwMCB8fCByZWFzb24gPT0gMTg0MzMzKSB7CiAgICAgICAgICBjbGVhbnVwKCk7CiAgICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIGlzIGl0IGFuIGV4cGVjdGVkIGVycm9yIHRo");
    sb.append("YXQgd2lsbCBoYXBwZW4gYSBidW5jaD8KICAgICAgICB2YXIgZXhwZWN0ZWRfZXJyb3IgPSByZWFzb24g");
    sb.append("PT0gOTk5OwogICAgICAgIC8vIGRvIHdlIG5vdCBrbm93IGFib3V0IGFuIGVycm9yIHRoYXQgaGFwcGVu");
    sb.append("cyBhIGJ1bmNoPyBpZiBzbywgdGhlbiBsZXQncyBhdCBsZWFzdCB0cnkgYWdhaW4gYSBudW1iZXIgb2Yg");
    sb.append("ZmluaXRlIHRpbWVzLgogICAgICAgIHZhciBibGluZF9yZXRyeSA9IHJldHJ5X3NtLnVuZXhwZWN0ZWRf");
    sb.append("ZXJyb3JzIDwgMTY7CiAgICAgICAgaWYgKGJsaW5kX3JldHJ5KSB7CiAgICAgICAgICByZXRyeV9zbS51");
    sb.append("bmV4cGVjdGVkX2Vycm9ycysrOwogICAgICAgIH0KICAgICAgICAvLyByZXRyeSBvbiBlaXRoZXIgY2Fz");
    sb.append("ZQogICAgICAgIGlmIChleHBlY3RlZF9lcnJvciB8fCBibGluZF9yZXRyeSkgewogICAgICAgICAgcmV0");
    sb.append("cnlfc20uYmFja29mZiA9IE1hdGguY2VpbChNYXRoLm1pbihyZXRyeV9zbS5iYWNrb2ZmICsgTWF0aC5y");
    sb.append("YW5kb20oKSAqIHJldHJ5X3NtLmJhY2tvZmYgKyAoYmxpbmRfcmV0cnkgPyAxMjUgOiAxKSwgMjUwMCkp");
    sb.append("OwogICAgICAgICAgaWYgKGV4cGVjdGVkX2Vycm9yKSB7CiAgICAgICAgICAgIC8vIHRoZSBleHBlY3Rl");
    sb.append("ZCBlcnJvciBpcyBhIGNvbm5lY3Rpb24gZXZlbnQsIHNvIHdlIHByb3RlY3QgdGhlIHNlcnZpY2UgYW5k");
    sb.append("IGp1bXAgYmFjay1vZmYgcmlnaHQgdG8gbmVhciBtYXggb3ZlciBhIG5pY2Ugc3ByZWFkCiAgICAgICAg");
    sb.append("ICAgIHJldHJ5X3NtLmJhY2tvZmYgPSBNYXRoLm1pbigxMjUwLCByZXRyeV9zbS5iYWNrb2ZmKSArIE1h");
    sb.append("dGgucmFuZG9tKCkgKiAxMjUwOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGV4cGVjdGVkX2Vycm9y");
    sb.append("KSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjb25uZWN0LWxvc3N8cmV0cnlpbmcuLi4gKCIgKyBy");
    sb.append("ZXRyeV9zbS5iYWNrb2ZmICsgIik7IHJlYXNvbj0iICsgcmVhc29uICsgKGJsaW5kX3JldHJ5ID8gIiBb");
    sb.append("YmxpbmRdIiA6ICIiKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygi");
    sb.append("Y29ubmVjdC1mYWlsdXJlfHJldHJ5aW5nLi4uICgiICsgcmV0cnlfc20uYmFja29mZiArICIpOyByZWFz");
    sb.append("b249IiArIHJlYXNvbiArIChibGluZF9yZXRyeSA/ICIgW2JsaW5kXSIgOiAiIikpOwogICAgICAgICAg");
    sb.append("fQogICAgICAgICAgLy8gVE9ETzogbmVlZCBhIGRpZmZlcmVudCBmZWVkYmFjayBtZWNoYW5pc20gKG1h");
    sb.append("eWJlIGEgbnVtYmVyIHVuZGVyIHRoZSB3aWZpIGljb24/KQogICAgICAgICAgd2luZG93LnNldFRpbWVv");
    sb.append("dXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHJ5X3NtLmdvKCk7CiAgICAgICAgICB9LCByZXRy");
    sb.append("eV9zbS5iYWNrb2ZmKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coImdhdmUg");
    sb.append("dXAgY29ubmVjdGlvbjsiICsgY28ubGFiZWwgKyAiOyByZWFzb249IiArIHJlYXNvbik7CiAgICAgICAg");
    sb.append("fQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIHNldHVwX2NvID0gZnVuY3Rpb24oZGVzaXJlZCwgdW5z");
    sb.append("dWIsIGNvLCBzdGF0ZSkgewogICAgY28udmlld3N0YXRldHJlZSA9IHN0YXRlLnZpZXcudHJlZTsKICAg");
    sb.append("IHZhciBzeW5jX3RyZWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIGxldCdzIGNvcHkgb3V0IHRoZSB0");
    sb.append("cmVlIGZyb20gdGhlIHZpZXdzdGF0ZQogICAgICB2YXIgbmV3X3RyZWUgPSBzYWZlX2ZpbHRlcihzdGF0");
    sb.append("ZS52aWV3LnRyZWUuY29weSgpKTsKCiAgICAgIC8vIGlmIHdlIGhhdmUgZ290IGEgZmlsdGVyIGZyb20g");
    sb.append("dGhlIHNlcnZlciwgdGhlbiBsZXQncyBmaWx0ZXIKICAgICAgaWYgKGNvLmhhc19maWx0ZXIpIHsKICAg");
    sb.append("ICAgICAvLyByZWNvbnN0cnVjdCB0aGUgbmV3IHZpZXcgYmFzZWQgb24gdGhlIGludGVyc2VjdGlvbiBv");
    sb.append("ZiB0aGUgZmlsdGVyIGFuZCB0aGUgbmV3IHN0YXRlCiAgICAgICAgdmFyIGZpbHRlcmVkID0ge307CiAg");
    sb.append("ICAgICAgZm9yICh2YXIgayBpbiBuZXdfdHJlZSkgewogICAgICAgICAgaWYgKGNvLmZpbHRlcltrXSkg");
    sb.append("ewogICAgICAgICAgICBmaWx0ZXJlZFtrXSA9IG5ld190cmVlW2tdOwogICAgICAgICAgfQogICAgICAg");
    sb.append("IH0KICAgICAgICAvLyBhc3N1bWUgdGhlIG5ldyB0cmVlCiAgICAgICAgbmV3X3RyZWUgPSBmaWx0ZXJl");
    sb.append("ZDsKICAgICAgfQogICAgICAvLyBpZiB0aGUgY2xvbmUgKGkuZS4gc3RyaW5naWZpZWQgdmVyc2lvbikg");
    sb.append("aXMgdGhlIHNhbWUgYXMgd2hhdCB3ZSBsYXN0IHNlbnQsIHRoZW4gZG9uJ3Qgc2VuZCBhbnl0aGluZwog");
    sb.append("ICAgICB2YXIgcHJpb3JfY2xvbmUgPSBKU09OLnN0cmluZ2lmeShuZXdfdHJlZSk7CiAgICAgIGlmIChw");
    sb.append("cmlvcl9jbG9uZSA9PSBjby52aWV3c3RhdGVfY2xvbmUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0K");
    sb.append("ICAgICAgY28udmlld3N0YXRlX3NlbnQgPSBmYWxzZTsKICAgICAgY28udnNzZXErKzsKICAgICAgY28u");
    sb.append("c3luYygpOwogICAgICB2YXIgc3luY2VkID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChjby52c3Nl");
    sb.append("cSA9PSB0aGlzLmJvdW5kKSB7CiAgICAgICAgICBjby52aWV3c3RhdGVfc2VudCA9IHRydWU7CiAgICAg");
    sb.append("ICAgICBjby5zeW5jKCk7CiAgICAgICAgfQogICAgICB9LmJpbmQoeyBib3VuZDogY28udnNzZXEgfSk7");
    sb.append("CiAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9IEpTT04uc3RyaW5naWZ5KG5ld190cmVlKTsKICAgICAg");
    sb.append("Y28ucHRyLnVwZGF0ZShuZXdfdHJlZSwgeyBzdWNjZXNzOiBzeW5jZWQsIGZhaWx1cmU6IHN5bmNlZCB9");
    sb.append("KTsKICAgIH07CiAgICB2YXIgYmluZCA9IGZ1bmN0aW9uIChzZW5kTm93KSB7CiAgICAgIHVuc3ViLnZp");
    sb.append("ZXcgPSBzdGF0ZS52aWV3LnRyZWUuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoY28u");
    sb.append("cHRyID09IG51bGwpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgc3luY190cmVl");
    sb.append("KCk7CiAgICAgIH0pOwogICAgICBpZiAoc2VuZE5vdykgewogICAgICAgIHN5bmNfdHJlZSgpOwogICAg");
    sb.append("ICB9CiAgICB9OwogICAgaWYgKGNvLnB0ciAhPSBudWxsICYmIGNvLmJvdW5kID09IGRlc2lyZWQpIHsK");
    sb.append("ICAgICAgYmluZCh0cnVlKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKGNvLnB0ciAh");
    sb.append("PSBudWxsKSB7CiAgICAgIGNvLnB0ci5lbmQoeyBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7IH0sIGZhaWx1");
    sb.append("cmU6IGZ1bmN0aW9uICgpIHsgfSB9KTsKICAgICAgY28ucHRyID0gbnVsbDsKICAgIH0KICAgIHJldHVy");
    sb.append("biBiaW5kOwogIH07CgogIC8vIDxjb25uZWN0aW9uIGJpbGxpbmcgLi4uPgogIHNlbGYuQkNPTk5FQ1Qg");
    sb.append("PSBmdW5jdGlvbiAoc3RhdGUsIHJ4b2JqKSB7CiAgICB2YXIgdW5zdWIgPSB7CiAgICAgIHZpZXc6IGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgfQogICAgfTsKICAgIHJ4b2JqLl9fID0gZGVib3VuY2UoNSwgZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICBpZiAoISgnbmFtZScgaW4gcnhvYmopKSB7CiAgICAgICAgcmV0dXJuOwogICAg");
    sb.append("ICB9CiAgICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQocnhvYmouaWRlbnRpdHksIGZ1bmN0aW9uICgp");
    sb.append("IHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0OyB9KTsKICAgICAgaWYgKGlkTG9va3VwLmFib3J0KSB7CiAg");
    sb.append("ICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBjbyA9IGdldF9jb25uZWN0aW9uX29iaihyeG9i");
    sb.append("ai5uYW1lKTsKICAgICAgdmFyIGRlc2lyZWQgPSAiOmJpbGxpbmc6IiArIGlkTG9va3VwLmlkZW50aXR5");
    sb.append("OwogICAgICB2YXIgYmluZCA9IHNldHVwX2NvKGRlc2lyZWQsIHVuc3ViLCBjbywgc3RhdGUpOwogICAg");
    sb.append("ICBpZiAoYmluZCA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY28uYm91");
    sb.append("bmQgPSBkZXNpcmVkOwogICAgICB2YXIgaWRlbnRpdHkgPSBpZExvb2t1cC5pZGVudGl0eTsKICAgICAg");
    sb.append("dmFyIGNsZWFudXAgPSBpZExvb2t1cC5jbGVhbnVwOwogICAgICB1bnN1Yi52aWV3KCk7CiAgICAgIGNv");
    sb.append("LmlkZW50aXR5ID0gaWRlbnRpdHk7CiAgICAgIGNvLmhhbmRsZXJzID0ge307CiAgICAgIGNvLnZpZXdz");
    sb.append("dGF0ZV9zZW50ID0gdHJ1ZTsKICAgICAgY28ubGFiZWwgPSAiQmlsbGluZyBbICIgKyByeG9iai5uYW1l");
    sb.append("ICsgIl0iOwogICAgICBjby52aWFfYmlsbGluZyA9IHRydWU7CiAgICAgIGNvLnZpYV9kb21haW4gPSBm");
    sb.append("YWxzZTsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAgICAgIHJldHJ5X3NtLnJlc3BvbmRlciA9IGJp");
    sb.append("bmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9zbSk7CiAgICAgIHJldHJ5X3NtLmdvID0gZnVu");
    sb.append("Y3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3RoaW5nIG5ldwogICAgICAgIGNvLnZpZXdzdGF0");
    sb.append("ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0gY29ubmVjdGlvbi5CaWxsaW5nQ29ubmVjdGlv");
    sb.append("bkNyZWF0ZShpZGVudGl0eSwgcmV0cnlfc20ucmVzcG9uZGVyKTsKICAgICAgfTsKICAgICAgcmV0cnlf");
    sb.append("c20uZ28oKTsKICAgICAgY28udHJlZS51cGRhdGUoe30pOwogICAgICBiaW5kKGZhbHNlKTsKICAgIH0p");
    sb.append("OwogIH07CgogIHNlbGYuZG9tYWluID0gbG9jYXRpb24uaG9zdG5hbWU7CiAgc2VsZi5ob3N0ID0gbG9j");
    sb.append("YXRpb24uaG9zdDsKICBzZWxmLnByb3RvY29sID0gbG9jYXRpb24ucHJvdG9jb2w7CgogIHNlbGYubW9i");
    sb.append("aWxlSW5pdCA9IGZ1bmN0aW9uKG92ZXJyaWRlRG9tYWluKSB7CiAgICBzZWxmLmRvbWFpbiA9IG92ZXJy");
    sb.append("aWRlRG9tYWluOwogICAgc2VsZi5ob3N0ID0gb3ZlcnJpZGVEb21haW47CiAgICBzZWxmLnByb3RvY29s");
    sb.append("ID0gImh0dHBzIjsKICB9OwoKICAvLyA8Y29ubmVjdGlvbiB1c2UtZG9tYWluIC4uLj4KICBzZWxmLkRD");
    sb.append("T05ORUNUID0gZnVuY3Rpb24gKHN0YXRlLCByeG9iaikgewogICAgdmFyIHVuc3ViID0gewogICAgICB2");
    sb.append("aWV3OiBmdW5jdGlvbiAoKSB7CiAgICAgIH0KICAgIH07CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDUs");
    sb.append("IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCEoJ25hbWUnIGluIHJ4b2JqKSkgewogICAgICAgIHJldHVy");
    sb.append("bjsKICAgICAgfQogICAgICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKHJ4b2JqLmlkZW50aXR5LCBmdW5j");
    sb.append("dGlvbiAoKSB7IHJldHVybiByeG9iai5yZWRpcmVjdDsgfSk7CiAgICAgIGlmIChpZExvb2t1cC5hYm9y");
    sb.append("dCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgY28gPSBnZXRfY29ubmVjdGlvbl9v");
    sb.append("YmoocnhvYmoubmFtZSk7CiAgICAgIHZhciBkb21haW4gPSBzZWxmLmRvbWFpbjsKICAgICAgdmFyIGRl");
    sb.append("c2lyZWQgPSBkb21haW4gKyBpZExvb2t1cC5pZGVudGl0eTsKICAgICAgdmFyIGJpbmQgPSBzZXR1cF9j");
    sb.append("byhkZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKTsKICAgICAgaWYgKGJpbmQgPT09IGZhbHNlKSB7CiAg");
    sb.append("ICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvLmJvdW5kID0gZGVzaXJlZDsKCiAgICAgIHZhciBp");
    sb.append("ZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2YXIgY2xlYW51cCA9IGlkTG9va3VwLmNs");
    sb.append("ZWFudXA7CiAgICAgIHVuc3ViLnZpZXcoKTsKICAgICAgY28uaWRlbnRpdHkgPSBpZGVudGl0eTsKICAg");
    sb.append("ICAgY28uaGFuZGxlcnMgPSB7fTsKICAgICAgY28udmlld3N0YXRlX3NlbnQgPSB0cnVlOwogICAgICBj");
    sb.append("by5sYWJlbCA9ICJEb21haW46IiArIGRvbWFpbiArICIgWyAiICsgcnhvYmoubmFtZSArICJdIjsKICAg");
    sb.append("ICAgY28udmlhX2RvbWFpbiA9IHRydWU7CiAgICAgIGNvLnZpYV9iaWxsaW5nID0gZmFsc2U7CiAgICAg");
    sb.append("IGNvLmRvbWFpbiA9IGRvbWFpbjsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAgICAgIHJldHJ5X3Nt");
    sb.append("LnJlc3BvbmRlciA9IGJpbmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9zbSk7CiAgICAgIHJl");
    sb.append("dHJ5X3NtLmdvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3RoaW5nIG5ldwogICAg");
    sb.append("ICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0gY29ubmVjdGlvbi5D");
    sb.append("b25uZWN0aW9uQ3JlYXRlVmlhRG9tYWluKGlkZW50aXR5LCBkb21haW4sIHNhZmVfZmlsdGVyKHN0YXRl");
    sb.append("LnZpZXcudHJlZS5jb3B5KCkpLCByZXRyeV9zbS5yZXNwb25kZXIpOwogICAgICB9OwogICAgICByZXRy");
    sb.append("eV9zbS5nbygpOwogICAgICBjby50cmVlLnVwZGF0ZSh7fSk7CiAgICAgIGJpbmQoZmFsc2UpOwogICAg");
    sb.append("fSk7CiAgfTsKCiAgLy8gPGNvbm5lY3Rpb24gLi4uPgogIHNlbGYuQ09OTkVDVCA9IGZ1bmN0aW9uIChz");
    sb.append("dGF0ZSwgcnhvYmopIHsKICAgIHZhciB1bnN1YiA9IHsKICAgICAgdmlldzogZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICB9CiAgICB9OwogICAgcnhvYmouX18gPSBkZWJvdW5jZSg1LCBmdW5jdGlvbiAoKSB7CiAgICAg");
    sb.append("IHZhciB2YWxpZCA9ICdrZXknIGluIHJ4b2JqICYmICdzcGFjZScgaW4gcnhvYmogJiYgJ25hbWUnIGlu");
    sb.append("IHJ4b2JqOwogICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZh");
    sb.append("ciBpZExvb2t1cCA9IHNlbGYuSUQocnhvYmouaWRlbnRpdHksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4");
    sb.append("b2JqLnJlZGlyZWN0OyB9KTsKICAgICAgaWYgKGlkTG9va3VwLmFib3J0KSB7CiAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICB9CiAgICAgIHZhciBjbyA9IGdldF9jb25uZWN0aW9uX29iaihyeG9iai5uYW1lKTsKICAg");
    sb.append("ICAgdmFyIGRlc2lyZWQgPSByeG9iai5zcGFjZSArICIvIiArIHJ4b2JqLmtleSArICIvIiArIGlkTG9v");
    sb.append("a3VwLmlkZW50aXR5OyAvLyBUT0RPOiBuZWVkIHNvbWUga2luZCBvZiBoYXNoaW5nIGZ1bmN0aW9uIGhl");
    sb.append("cmUKICAgICAgdmFyIGJpbmQgPSBzZXR1cF9jbyhkZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKTsKICAg");
    sb.append("ICAgaWYgKGJpbmQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvLmJv");
    sb.append("dW5kID0gZGVzaXJlZDsKCiAgICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAg");
    sb.append("ICB2YXIgY2xlYW51cCA9IGlkTG9va3VwLmNsZWFudXA7CiAgICAgIHVuc3ViLnZpZXcoKTsKICAgICAg");
    sb.append("Y28uc3BhY2UgPSByeG9iai5zcGFjZTsKICAgICAgY28ua2V5ID0gcnhvYmoua2V5OwogICAgICBjby5p");
    sb.append("ZGVudGl0eSA9IGlkZW50aXR5OwogICAgICBjby5oYW5kbGVycyA9IHt9OwogICAgICBjby52aWV3c3Rh");
    sb.append("dGVfc2VudCA9IHRydWU7CiAgICAgIGNvLmxhYmVsID0gY28uc3BhY2UgKyAiLyIgKyBjby5rZXkgKyAi");
    sb.append("IFsgIiArIHJ4b2JqLm5hbWUgKyAiXSI7CiAgICAgIGNvLnZpYV9kb21haW4gPSBmYWxzZTsKICAgICAg");
    sb.append("Y28udmlhX2JpbGxpbmcgPSBmYWxzZTsKICAgICAgdmFyIHJldHJ5X3NtID0ge307CiAgICAgIHJldHJ5");
    sb.append("X3NtLnJlc3BvbmRlciA9IGJpbmRfcmVzcG9uZGVyKGNvLCBjbGVhbnVwLCByZXRyeV9zbSk7CiAgICAg");
    sb.append("IHJldHJ5X3NtLmdvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gYmlhcyB0byBub3RoaW5nIG5ldwog");
    sb.append("ICAgICAgIGNvLnZpZXdzdGF0ZV9jbG9uZSA9ICJ7fSI7CiAgICAgICAgY28ucHRyID0gY29ubmVjdGlv");
    sb.append("bi5Db25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5LCByeG9iai5zcGFjZSwgcnhvYmoua2V5LCBzYWZlX2Zp");
    sb.append("bHRlcihzdGF0ZS52aWV3LnRyZWUuY29weSgpKSwgcmV0cnlfc20ucmVzcG9uZGVyKTsKICAgICAgfTsK");
    sb.append("ICAgICAgcmV0cnlfc20uZ28oKTsKICAgICAgY28udHJlZS51cGRhdGUoe30pOwogICAgICBiaW5kKGZh");
    sb.append("bHNlKTsKICAgIH0pOwogIH07CgogIHNlbGYuSU5URVJOQUwgPSBmdW5jdGlvbiAocHJpb3JTdGF0ZSkg");
    sb.append("ewogICAgcmV0dXJuIHsKICAgICAgc2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNlLAogICAgICBkYXRh");
    sb.append("OiB7IGNvbm5lY3Rpb246IG51bGwsIHRyZWU6IG5ldyBBZGFtYVRyZWUoKSwgZGVsdGE6IHt9LCBwYXJl");
    sb.append("bnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0");
    sb.append("ZS52aWV3KSwKICAgICAgY3VycmVudDogImRhdGEiCiAgICB9OwogIH07CgogIHZhciByZWNhbGxfZW1h");
    sb.append("aWwgPSBmdW5jdGlvbiAoZWwpIHsKICAgIGlmIChlbC50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIklO");
    sb.append("UFVUIikgewogICAgICBpZiAoImVtYWlsIiA9PSBlbC50eXBlICYmICJlbWFpbCIgPT0gZWwubmFtZSkg");
    sb.append("ewogICAgICAgIGVsLnZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImVtYWlsX3JlbWVtYmVyIik7");
    sb.append("CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAgICAg");
    sb.append("dmFyIGFyciA9IGVsLmNoaWxkcmVuOwogICAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgICAgcmVjYWxsX2VtYWlsKGVsLmNoaWxk");
    sb.append("cmVuW2tdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICBzZWxmLmFVUCA9IGZ1bmN0aW9u");
    sb.append("IChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgdmFyIGlkTG9va3VwID0gc2Vs");
    sb.append("Zi5JRChpZGVudGl0eU5hbWUsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJ4X2ZvcndhcmQ7IH0p");
    sb.append("OyAvLyBUT0RPOiBtYWtlIHJ4dmFyCiAgICBpZiAoaWRMb29rdXAuYWJvcnQpIHsKICAgICAgcmV0dXJu");
    sb.append("OwogICAgfQogICAgZm9ybS5hY3Rpb24gPSAiaHR0cHM6Ly8iICsgQWRhbWEuUHJvZHVjdGlvbiArICIv");
    sb.append("fnVwbG9hZCI7CiAgICBmb3JtLm1ldGhvZCA9ICJwb3N0IjsKICAgIGZvcm0uZW5jdHlwZSA9ICJtdWx0");
    sb.append("aXBhcnQvZm9ybS1kYXRhIjsKICAgIHZhciBpZGVudGl0eUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiaW5wdXQiKTsKICAgIGlkZW50aXR5SW5wdXQudHlwZSA9ICJoaWRkZW4iOwogICAgaWRlbnRp");
    sb.append("dHlJbnB1dC5uYW1lID0gImlkZW50aXR5IjsKICAgIGlkZW50aXR5SW5wdXQudmFsdWUgPSBpZExvb2t1");
    sb.append("cC5pZGVudGl0eTsKICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWRlbnRpdHlJbnB1dCk7CiAgICB2YXIgaWZy");
    sb.append("YW1lVGFyZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CiAgICBpZnJhbWVUYXJn");
    sb.append("ZXQubmFtZSA9ICJVUExPQURfIiArIE1hdGgucmFuZG9tKCk7CiAgICBpZnJhbWVUYXJnZXQud2lkdGgg");
    sb.append("PSAiMSI7CiAgICBpZnJhbWVUYXJnZXQuaGVpZ2h0ID0gIjEiOwoKICAgIGZvcm0uYXBwZW5kQ2hpbGQo");
    sb.append("aWZyYW1lVGFyZ2V0KTsKICAgIGZvcm0udGFyZ2V0ID0gaWZyYW1lVGFyZ2V0Lm5hbWU7CiAgfTsKCiAg");
    sb.append("c2VsZi5hRFVQID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAg");
    sb.append("ICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKGlkZW50aXR5TmFtZSwgZnVuY3Rpb24gKCkgeyByZXR1cm4g");
    sb.append("cnhvYmoucnhfZm9yd2FyZDsgfSk7IC8vIFRPRE86IG1ha2Ugcnh2YXIKICAgIGlmIChpZExvb2t1cC5h");
    sb.append("Ym9ydCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBmb3JtLmFjdGlvbiA9IHNlbGYucHJvdG9jb2wg");
    sb.append("KyAiLy8iICsgc2VsZi5ob3N0ICsgIi9+dXBsb2FkIjsKICAgIGZvcm0ubWV0aG9kID0gInBvc3QiOwog");
    sb.append("ICAgZm9ybS5lbmN0eXBlID0gIm11bHRpcGFydC9mb3JtLWRhdGEiOwogICAgewogICAgICB2YXIgaWRl");
    sb.append("bnRpdHlJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGlkZW50aXR5");
    sb.append("SW5wdXQudHlwZSA9ICJoaWRkZW4iOwogICAgICBpZGVudGl0eUlucHV0Lm5hbWUgPSAiaWRlbnRpdHki");
    sb.append("OwogICAgICBpZGVudGl0eUlucHV0LnZhbHVlID0gaWRMb29rdXAuaWRlbnRpdHk7CiAgICAgIGZvcm0u");
    sb.append("YXBwZW5kQ2hpbGQoaWRlbnRpdHlJbnB1dCk7CiAgICB9CiAgICB7CiAgICAgIHZhciBkb21haW5JbnB1");
    sb.append("dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGRvbWFpbklucHV0LnR5cGUg");
    sb.append("PSAiaGlkZGVuIjsKICAgICAgZG9tYWluSW5wdXQubmFtZSA9ICJkb21haW4iOwogICAgICBkb21haW5J");
    sb.append("bnB1dC52YWx1ZSA9IHNlbGYuZG9tYWluOwogICAgICBmb3JtLmFwcGVuZENoaWxkKGRvbWFpbklucHV0");
    sb.append("KTsKICAgIH0KICAgIHZhciBpZnJhbWVUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJh");
    sb.append("bWUiKTsKICAgIGlmcmFtZVRhcmdldC5uYW1lID0gIlVQTE9BRF8iICsgTWF0aC5yYW5kb20oKTsKICAg");
    sb.append("IGlmcmFtZVRhcmdldC53aWR0aCA9ICIxIjsKICAgIGlmcmFtZVRhcmdldC5oZWlnaHQgPSAiMSI7CiAg");
    sb.append("ICBmb3JtLmFwcGVuZENoaWxkKGlmcmFtZVRhcmdldCk7CiAgICBmb3JtLnRhcmdldCA9IGlmcmFtZVRh");
    sb.append("cmdldC5uYW1lOwogIH07CgogIHZhciBzdGFzaF9pZGVudGl0eSA9IGZ1bmN0aW9uKG5hbWUsIGlkZW50");
    sb.append("aXR5LCBjb25uZWN0aW9uKSB7CiAgICB2YXIgcmVxID0ge307CiAgICByZXFbJ25hbWUnXSA9IG5hbWU7");
    sb.append("CiAgICByZXFbJ2lkZW50aXR5J10gPSBpZGVudGl0eTsKICAgIHJlcVsnbWF4LWFnZSddID0gNTUyOTYw");
    sb.append("MDsKCiAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHhodHRwLm9ucmVhZHlz");
    sb.append("dGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7");
    sb.append("CiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgY29ubmVjdGlvbi5JZGVu");
    sb.append("dGl0eVN0YXNoKGlkZW50aXR5LCBuYW1lLCB7CiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkg");
    sb.append("ewogICAgICAgICAgICAgIC8vIFRISVMgSEFTIERSQUdPTlMgVU5USUwgQSBGVUxMIFBST0RVQ1RJT04g");
    sb.append("REVQTE9ZTUVOVAogICAgICAgICAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8i");
    sb.append("ICsgbmFtZSwgImNvb2tpZToiICsgbmFtZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWx1");
    sb.append("cmU6IGZ1bmN0aW9uKHh5eikgewoKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQog");
    sb.append("ICAgICB9CiAgICB9OwogICAgeGh0dHAub3BlbigiUFVUIiwgc2VsZi5wcm90b2NvbCArICIvLyIgKyBz");
    sb.append("ZWxmLmhvc3QgKyAiL35zdGFzaC8iICsgRGF0ZS5ub3coKSwgdHJ1ZSk7CiAgICB4aHR0cC53aXRoQ3Jl");
    sb.append("ZGVudGlhbHMgPSB0cnVlOwogICAgeGh0dHAuc2VuZChKU09OLnN0cmluZ2lmeShyZXEpKTsKICB9OwoK");
    sb.append("ICB2YXIgZ2V0X2Zvcm1fYW5kX3B3ID0gZnVuY3Rpb24oZm9ybSkgewogICAgdmFyIHBhc3N3b3JkcyA9");
    sb.append("IHt9OwogICAgdmFyIHJlcSA9IGdldF9mb3JtKGZvcm0sIHBhc3N3b3Jkcyk7CiAgICBpZiAoJ3Bhc3N3");
    sb.append("b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgcmVxWydwYXNzd29yZCddID0gcGFzc3dvcmRzWydwYXNz");
    sb.append("d29yZCddOwogICAgfQogICAgcmV0dXJuIHJlcTsKICB9CgogIHZhciBjb21tb25BdXRob3JpemUgPSBm");
    sb.append("dW5jdGlvbihmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgbmV4dFN0ZXApIHsKICAgIHJ4");
    sb.append("b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9OwogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQn");
    sb.append("LCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVx");
    sb.append("ID0gZ2V0X2Zvcm1fYW5kX3B3KGZvcm0pOwogICAgICB2YXIgc20gPSB7YXR0ZW1wdHM6MH07CiAgICAg");
    sb.append("IHNtLnJlc3BvbmRlciA9IHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAg");
    sb.append("ICAgICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdID0gcGF5bG9hZC5pZGVudGl0eTsKICAgICAgICAg");
    sb.append("IGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlOYW1lLCBwYXlsb2FkLmlk");
    sb.append("ZW50aXR5KTsKICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVu");
    sb.append("dGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMK");
    sb.append("ICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJl");
    sb.append("X3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29u");
    sb.append("KSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1l");
    sb.append("bnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9OwogICAgICBuZXh0U3RlcChyZXEsIHNtLnJl");
    sb.append("c3BvbmRlcik7CiAgICB9LCB0cnVlKTsKICB9CgogIC8vIHJ4OmFjdGlvbj1kb2N1bWVudDphdXRob3Jp");
    sb.append("emUKICBzZWxmLmFET0MgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmop");
    sb.append("IHsKICAgIGNvbW1vbkF1dGhvcml6ZShmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgZnVu");
    sb.append("Y3Rpb24ocmVxLCByZXNwb25kZXIpIHsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6YXRp");
    sb.append("b24ocmVxLnNwYWNlLCByZXEua2V5LCByZXEsIHJlc3BvbmRlcik7CiAgICB9KTsKICB9OwoKICAvLyBy");
    sb.append("eDphY3Rpb249ZG9tYWluOmF1dGhvcml6ZQogIHNlbGYuYURPTSA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0");
    sb.append("ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgY29tbW9uQXV0aG9yaXplKGZvcm0sIHN0YXRlLCBp");
    sb.append("ZGVudGl0eU5hbWUsIHJ4b2JqLCBmdW5jdGlvbihyZXEsIHJlc3BvbmRlcikgewogICAgICBjb25uZWN0");
    sb.append("aW9uLkRvY3VtZW50QXV0aG9yaXphdGlvbkRvbWFpbihzZWxmLmRvbWFpbiwgcmVxLCByZXNwb25kZXIp");
    sb.append("OwogICAgfSk7CiAgfTsKCiAgLy8gcng6ZXZlbnQ9dG9nZ2xlLXBhc3N3b3JkCiAgc2VsZi5vblBXVCA9");
    sb.append("IGZ1bmN0aW9uKGRvbSwgc3RhdGUsIHR5cGUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBl");
    sb.append("LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGN1ciA9IGRvbTsKICAgICAgd2hpbGUgKGN1ci50");
    sb.append("YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT0gIlBBU1NXT1JELUhPTERFUiIpIHsKICAgICAgICBjdXIgPSBj");
    sb.append("dXIucGFyZW50RWxlbWVudDsKICAgICAgfQogICAgICB2YXIgaHVudCA9IGZ1bmN0aW9uKG5vZGUpIHsK");
    sb.append("ICAgICAgICBpZiAobm9kZS50YWdOYW1lLnRvVXBwZXJDYXNlKCkgPT0gIklOUFVUIiAmJiAobm9kZS5u");
    sb.append("YW1lID09ICJwYXNzd29yZCIgfHwgbm9kZS5uYW1lID09ICJjb25maXJtLXBhc3N3b3JkIikpIHsKICAg");
    sb.append("ICAgICAgIGlmIChub2RlLnR5cGUgPT0gInBhc3N3b3JkIikgewogICAgICAgICAgICBub2RlLnR5cGUg");
    sb.append("PSAidGV4dCIKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5vZGUudHlwZSA9ICJwYXNzd29y");
    sb.append("ZCIKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCdjaGlsZHJlbicgaW4gbm9kZSkgewog");
    sb.append("ICAgICAgICAgdmFyIGNoID0gbm9kZS5jaGlsZHJlbjsKICAgICAgICAgIHZhciBuID0gY2gubGVuZ3Ro");
    sb.append("OwogICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAgICAgaHVudChj");
    sb.append("aFtrXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgICBpZiAoY3VyICE9IG51bGwp");
    sb.append("IHsKICAgICAgICBodW50KGN1cik7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUUgfCBy");
    sb.append("eDphY3Rpb249ZG9tYWluOnNpZ24taW4KICBzZWxmLmFkRFNPID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRl");
    sb.append("LCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAg");
    sb.append("IGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQu");
    sb.append("cHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAg");
    sb.append("ICAgdmFyIHNtID0ge2F0dGVtcHRzOjB9OwogICAgICBzbS5yZXNwb25kZXIgPSB7CiAgICAgICAgc3Vj");
    sb.append("Y2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1l");
    sb.append("XSA9IHBheWxvYWQuaWRlbnRpdHk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRp");
    sb.append("dHlfIiArIGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7CiAgICAgICAgICBzdGFzaF9pZGVu");
    sb.append("dGl0eShpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgICAg");
    sb.append("Ly8gVE9ETzogYmxvdyBhd2F5IGNvbm5lY3Rpb25zCiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhf");
    sb.append("Zm9yd2FyZCwgZmFsc2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAg");
    sb.append("ICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZv");
    sb.append("cm0sICJGYWlsZWQgc2lnbmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAg");
    sb.append("ICAgfTsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZURvbWFpbihzZWxmLmRvbWFpbiwg");
    sb.append("cmVxLnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHNtLnJlc3BvbmRlcik7CiAgICB9LCB0cnVlKTsKICB9");
    sb.append("CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9jdW1lbnQ6c2lnbi1pbgogIHNlbGYuYURTTyA9IGZ1");
    sb.append("bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgeyAvLyBERVBSRUNBVEVECiAg");
    sb.append("ICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3Vi");
    sb.append("bWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFy");
    sb.append("IHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhv");
    sb.append("cml6ZShyZXEuc3BhY2UsIHJlcS5rZXksIHJlcS51c2VybmFtZSwgcmVxLnBhc3N3b3JkLCB7CiAgICAg");
    sb.append("ICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIGlkZW50aXRpZXNbaWRlbnRp");
    sb.append("dHlOYW1lXSA9IHBheWxvYWQuaWRlbnRpdHk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgi");
    sb.append("aWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7CiAgICAgICAgICAvLyBU");
    sb.append("T0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3");
    sb.append("YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAg");
    sb.append("ICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwg");
    sb.append("IkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9");
    sb.append("KTsKICAgIH0sIHRydWUpOwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9tYWluOnNpZ24t");
    sb.append("aW4tcmVzZXQKICBzZWxmLmFkRFNPciA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1l");
    sb.append("LCByeG9iaikgeyAvLyBERVBSRUNBVEVECiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAg");
    sb.append("IGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQu");
    sb.append("cHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAg");
    sb.append("ICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZURvbWFpbldpdGhSZXNldChzZWxmLmRvbWFpbiwg");
    sb.append("cmVxLnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHJlcS5uZXdfcGFzc3dvcmQsewogICAgICAgIHN1Y2Nl");
    sb.append("c3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV0g");
    sb.append("PSBwYXlsb2FkLmlkZW50aXR5OwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkZW50aXR5");
    sb.append("XyIgKyBpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHkpOwogICAgICAgICAgLy8gVE9ETzogYmxv");
    sb.append("dyBhd2F5IGNvbm5lY3Rpb25zCiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFs");
    sb.append("c2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVy");
    sb.append("ZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQg");
    sb.append("c2lnbmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9");
    sb.append("LCB0cnVlKTsKICB9CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9jdW1lbnQ6c2lnbi1pbi1yZXNl");
    sb.append("dAogIHNlbGYuYURTT3IgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmop");
    sb.append("IHsgLy8gREVQUkVDQVRFRAogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFk");
    sb.append("ZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnRE");
    sb.append("ZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybV9hbmRfcHcoZm9ybSk7CiAgICAgIGNvbm5l");
    sb.append("Y3Rpb24uRG9jdW1lbnRBdXRob3JpemVXaXRoUmVzZXQocmVxLnNwYWNlLCByZXEua2V5LCByZXEudXNl");
    sb.append("cm5hbWUsIHJlcS5wYXNzd29yZCwgcmVxLm5ld19wYXNzd29yZCx7CiAgICAgICAgc3VjY2VzczogZnVu");
    sb.append("Y3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxv");
    sb.append("YWQuaWRlbnRpdHk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlk");
    sb.append("ZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkg");
    sb.append("Y29ubmVjdGlvbnMKICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAg");
    sb.append("ICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5j");
    sb.append("dGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5n");
    sb.append("IGludG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9LCB0cnVlKTsKICAgIH0p");
    sb.append("OwogIH07CgogIHNlbGYuYXV0b2dlbmlkID0gMTsKICBzZWxmLlggPSBmdW5jdGlvbigpIHsKICAgIHNl");
    sb.append("bGYuYXV0b2dlbmlkKys7CiAgICByZXR1cm4gJ3gnICsgc2VsZi5hdXRvZ2VuaWQ7CiAgfTsKCiAgdmFy");
    sb.append("IHRyYW5zZm9ybXMgPSB7fTsKICB0cmFuc2Zvcm1zWydwcmluY2lwYWwuYWdlbnQnXSA9IGZ1bmN0aW9u");
    sb.append("KHgpIHsgcmV0dXJuIHguYWdlbnQ7IH07CiAgdHJhbnNmb3Jtc1sncHJpbmNpcGFsLmF1dGhvcml0eSdd");
    sb.append("ID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geC5hdXRob3JpdHk7IH07CiAgdHJhbnNmb3Jtc1sndHJpbSdd");
    sb.append("ID0gZnVuY3Rpb24oeCkgeyByZXR1cm4gKCcnICsgeCkudHJpbSgpOyB9OwogIHRyYW5zZm9ybXNbJ3Vw");
    sb.append("cGVyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiAoJycgKyB4KS50b1VwcGVyQ2FzZSgpOyB9OwogIHRy");
    sb.append("YW5zZm9ybXNbJ2xvd2VyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiAoJycgKyB4KS50b0xvd2VyQ2Fz");
    sb.append("ZSgpOyB9OwogIHRyYW5zZm9ybXNbJ2lzX2VtcHR5X3N0ciddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4g");
    sb.append("eCA9PSAiIjsgfTsKICB0cmFuc2Zvcm1zWydpc19ub3RfZW1wdHlfc3RyJ10gPSBmdW5jdGlvbih4KSB7");
    sb.append("IHJldHVybiB4ICE9ICIiOyB9OwogIHRyYW5zZm9ybXNbJ2pzb25pZnknXSA9IGZ1bmN0aW9uKHgpIHsg");
    sb.append("cmV0dXJuIEpTT04uc3RyaW5naWZ5KHgpOyB9OwogIHRyYW5zZm9ybXNbJ3RpbWVfbm93J10gPSBmdW5j");
    sb.append("dGlvbih4KSB7IHJldHVybiBEYXRlLm5vdygpICsgIiI7IH07CiAgdHJhbnNmb3Jtc1snc2l6ZV9ieXRl");
    sb.append("cyddID0gZnVuY3Rpb24oeHJhdykgewogICAgdmFyIHggPSAwLjA7CiAgICBpZiAodHlwZW9mKHhyYXcp");
    sb.append("ID09ICdudW1iZXInKSB7CiAgICAgIHggPSB4cmF3OwogICAgfSBlbHNlIHsKICAgICAgdHJ5IHsKICAg");
    sb.append("ICAgICB4ID0gcGFyc2VGbG9hdCh4cmF3KTsKICAgICAgfSBjYXRjaCAoZXgpIHsKCiAgICAgIH0KICAg");
    sb.append("IH0KICAgIHZhciBpdmFsID0gTWF0aC5mbG9vcih4KTsKICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAg");
    sb.append("ICByZXR1cm4gaXZhbCArICIgQiI7CiAgICB9CiAgICBpdmFsIC89IDEwMjQ7CiAgICBpZiAoaXZhbCA8");
    sb.append("IDEwMjQpIHsKICAgICAgcmV0dXJuIE1hdGgucm91bmQoaXZhbCAqIDEwKSAvIDEwLjAgKyAiIEtCIjsK");
    sb.append("ICAgIH0KICAgIGl2YWwgLz0gMTAyNDsKICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4g");
    sb.append("TWF0aC5yb3VuZChpdmFsICogMTApIC8gMTAuMCArICIgTUIiOwogICAgfQogICAgaXZhbCAvPSAxMDI0");
    sb.append("OwogICAgaWYgKGl2YWwgPCAxMDI0KSB7CiAgICAgIHJldHVybiBNYXRoLnJvdW5kKGl2YWwgKiAxMCkg");
    sb.append("LyAxMC4wICsgIiBHQiI7CiAgICB9CiAgfQogIHRyYW5zZm9ybXNbJ3Z1bGdhcl9mcmFjdGlvbiddID0g");
    sb.append("ZnVuY3Rpb24oeHJhdykgewogICAgdmFyIHggPSAwLjA7CiAgICBpZiAodHlwZW9mKHhyYXcpID09ICdu");
    sb.append("dW1iZXInKSB7CiAgICAgIHggPSB4cmF3OwogICAgfSBlbHNlIHsKICAgICAgdHJ5IHsKICAgICAgICB4");
    sb.append("ID0gcGFyc2VGbG9hdCh4cmF3KTsKICAgICAgfSBjYXRjaCAoZXgpIHsKCiAgICAgIH0KICAgIH0KICAg");
    sb.append("IHZhciBpdmFsID0gTWF0aC5mbG9vcih4KTsKICAgIHZhciBjaGFuZ2UgPSB4IC0gaXZhbDsKICAgIHZh");
    sb.append("ciBzdWZmaXggPSAiIjsKICAgIGlmIChjaGFuZ2UgPD0gMC4wNjI1KSB7CiAgICAgIC8vIDAKICAgIH0g");
    sb.append("ZWxzZSBpZiAoY2hhbmdlIDw9IDAuMTg3NSkgewogICAgICBzdWZmaXggPSAi4oWbIjsKICAgIH0gZWxz");
    sb.append("ZSBpZiAoY2hhbmdlIDw9IDAuMzEyNSkgewogICAgICBzdWZmaXggPSAiwrwiOwogICAgfSBlbHNlIGlm");
    sb.append("IChjaGFuZ2UgPD0gMC40Mzc1KSB7CiAgICAgIHN1ZmZpeCA9ICLihZwiOwogICAgfSBlbHNlIGlmIChj");
    sb.append("aGFuZ2UgPD0gMC41NjI1KSB7CiAgICAgIHN1ZmZpeCA9ICLCvSI7CiAgICB9IGVsc2UgaWYgKGNoYW5n");
    sb.append("ZSA8PSAwLjY4NzUpIHsKICAgICAgc3VmZml4ID0gIuKFnSI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8");
    sb.append("PSAwLjgxMjUpIHsKICAgICAgc3VmZml4ID0gIsK+IjsgLy8gMy80CiAgICB9IGVsc2UgaWYgKGNoYW5n");
    sb.append("ZSA8PSAwLjkzNzUpIHsKICAgICAgc3VmZml4ID0gIuKFniI7CiAgICB9IC8vIGVsc2UgMQogICAgcmV0");
    sb.append("dXJuIGl2YWwgKyBzdWZmaXg7CiAgfQogIHRyYW5zZm9ybXNbJ3RpbWVfYWdvJ10gPSBmdW5jdGlvbihk");
    sb.append("dCkgewogICAgLy8gb25seSB0cmFuc2Zvcm0gc3RyaW5ncwogICAgaWYgKHR5cGVvZiAoZHQpID09ICJz");
    sb.append("dHJpbmciKSB7CiAgICAgIC8vIGxldCdzIHN0cmlwIG91dCBldmVyeXRoaW5nIGFmdGVyIHRoZSBicmFj");
    sb.append("a2V0cwogICAgICB2YXIgcyA9IGR0OwogICAgICB2YXIgayA9IHMuaW5kZXhPZignWycpOwogICAgICBp");
    sb.append("ZiAoayA+PSAwKSB7CiAgICAgICAgcyA9IHMuc3Vic3RyaW5nKDAsIGspOwogICAgICB9CiAgICAgIHZh");
    sb.append("ciBkID0gRGF0ZS5wYXJzZShzKTsKICAgICAgaWYgKE51bWJlci5pc05hTihkKSkgewogICAgICAgIC8v");
    sb.append("IGl0IGlzbid0IGEgbnVtYmVyLCBzbyB3ZSBkaWRuJ3QgZ2V0IGEgZGF0ZSBzdGFtcDsgZGVmYXVsdCB0");
    sb.append("byB0aGUgaW5wdXQKICAgICAgICByZXR1cm4gZHQ7CiAgICAgIH0KICAgICAgLy8gd2UgYXJlIGludGVy");
    sb.append("ZXN0ZWQgaW4gcHJvZHVjaW5nIGEgc3RyaW5nIGxpa2UgIlggbWludXRlcyBhZ28iLCBzbyBzdGFydCB3");
    sb.append("aXRoIHNlY29uZHMKICAgICAgdmFyIGRlbHRhID0gKERhdGUubm93KCkgLSBkKS8xMDAwOyAvLyBzZWNv");
    sb.append("bmRzOwogICAgICBpZiAoZGVsdGEgPCA2MCkgewogICAgICAgIHJldHVybiAiTGVzcyB0aGFuIGEgbWlu");
    sb.append("dXRlIGFnbyI7CiAgICAgIH0KICAgICAgLy8gaXQgd2Fzbid0IDkwIHNlY29uZHMgYWdvIG9yIGxlc3Ms");
    sb.append("IHNvIGxldCdzIHJlZmluZSB0b3dhcmRzIG1pbnV0ZXMKICAgICAgZGVsdGEgLz0gNjA7IC8vIG5vdyBp");
    sb.append("dCBpcyBtaW51dGVzCiAgICAgIGlmIChkZWx0YSA8IDYwKSB7CiAgICAgICAgcmV0dXJuIE1hdGguZmxv");
    sb.append("b3IoZGVsdGEpICsgIiBtaW51dGVzIGFnbyI7CiAgICAgIH0KICAgICAgaWYgKGRlbHRhID4gMi42Mjhl");
    sb.append("KzcpIHsKICAgICAgICByZXR1cm4gIk5ldmVyIjsKICAgICAgfQogICAgICAvLyBpdCB3YXNuJ3QgOTAg");
    sb.append("bWludXRlcyBhZ28sIHNvIGxldCdzIGp1c3QgcHV0IHRoZSB0aW1lIHN0YW1wIHVwCiAgICAgIHZhciBk");
    sb.append("dGhlbiA9IG5ldyBEYXRlKGQpOwogICAgICB2YXIgZG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgIGlmIChk");
    sb.append("dGhlbi50b0xvY2FsZURhdGVTdHJpbmcoKSAhPSBkbm93LnRvTG9jYWxlRGF0ZVN0cmluZygpKSB7CiAg");
    sb.append("ICAgICAgcmV0dXJuIGR0aGVuLnRvTG9jYWxlRGF0ZVN0cmluZygpICsgIiAiICsgZHRoZW4udG9Mb2Nh");
    sb.append("bGVUaW1lU3RyaW5nKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGR0aGVuLnRvTG9jYWxlVGltZVN0cmlu");
    sb.append("ZygpOwogICAgfSBlbHNlIHsKICAgICAgLy8gZG8gbm90aGluZwogICAgICByZXR1cm4gZHQ7CiAgICB9");
    sb.append("CiAgfTsKCiAgdHJhbnNmb3Jtc1sndGltZSddID0gZnVuY3Rpb24oZHQpIHsKICAgICAgICAvLyBvbmx5");
    sb.append("IHRyYW5zZm9ybSBzdHJpbmdzCiAgICBpZiAodHlwZW9mIChkdCkgPT0gInN0cmluZyIpIHsKICAgICAg");
    sb.append("Ly8gbGV0J3Mgc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGJyYWNrZXRzCiAgICAgIHZhciBz");
    sb.append("ID0gZHQ7CiAgICAgIHZhciBrID0gcy5pbmRleE9mKCdbJyk7CiAgICAgIGlmIChrID49IDApIHsKICAg");
    sb.append("ICAgICBzID0gcy5zdWJzdHJpbmcoMCwgayk7CiAgICAgIH0KCiAgICAgIC8vIENvbnZlcnQgc3RyaW5n");
    sb.append("IHRvIHRpbWUgZm9ybWF0CiAgICAgIHZhciB0ID0gZHQuaW5kZXhPZigiOiIpOwogICAgICBpZiAodCA8");
    sb.append("IDApIHsKICAgICAgICByZXR1cm4gZHQ7CiAgICAgIH0KICAgICAgdmFyIGggPSBkdC5zcGxpdCgiOiIp");
    sb.append("WzBdOwogICAgICB2YXIgaG91cnMgPSBoOwogICAgICBpZiAoaC5sZW5ndGggPiAyKSB7CiAgICAgICAg");
    sb.append("aG91cnMgPSBoLnN1YnN0cmluZyhoLmxlbmd0aCAtIDIsIGgubGVuZ3RoKTsgLy8gdHJpbSBsZWZ0IGlu");
    sb.append("IGNhc2Ugb2YgZGF0ZXRpbWUKICAgICAgfQogICAgICB2YXIgQW1PclBtID0gaG91cnMgPj0gMTIgPyAn");
    sb.append("cG0nIDogJ2FtJzsKICAgICAgaG91cnMgPSAoaG91cnMgJSAxMikgfHwgMTI7CiAgICAgIHZhciBtID0g");
    sb.append("ZHQuc3BsaXQoIjoiKVsxXQogICAgICB2YXIgbWludXRlcyA9IG07CiAgICAgIGlmIChtLmxlbmd0aCA+");
    sb.append("IDIpIHsKICAgICAgICBtaW51dGVzID0gbS5zdWJzdHJpbmcoMCwyKTsgLy8gdHJpbSByaWdodCBpbiBj");
    sb.append("YXNlIG9mIGRhdGV0aW1lCiAgICAgIH0KCiAgICAgIHJldHVybiBob3VycyArICI6IiArIG1pbnV0ZXMg");
    sb.append("KyAiICIgKyBBbU9yUG07IAogICAgfSBlbHNlIHsKICAgICAgLy8gZG8gbm90aGluZwogICAgICByZXR1");
    sb.append("cm4gZHQ7CiAgICB9CiAgfTsKCiAgc2VsZi5SVFIgPSBmdW5jdGlvbihuYW1lLCB0cmFuc2Zvcm0pIHsK");
    sb.append("ICAgIHRyYW5zZm9ybXNbbmFtZV0gPSB0cmFuc2Zvcm07CiAgfTsKICBzZWxmLnJlZ2lzdGVyVHJhbnNm");
    sb.append("b3JtID0gc2VsZi5SVFI7CgogIC8vIHtibGFofG5hbWV9CiAgc2VsZi5UUiA9IGZ1bmN0aW9uKG5hbWUp");
    sb.append("IHsKICAgIGlmIChuYW1lIGluIHRyYW5zZm9ybXMpIHsKICAgICAgcmV0dXJuIHRyYW5zZm9ybXNbbmFt");
    sb.append("ZV07CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24oeCkgeyByZXR1cm4geDsgfTsKICB9OwoKICAvLyBU");
    sb.append("T0RPCiAgdmFyIHZhbGlkYXRvcnMgPSB7fTsKICBzZWxmLlJWID0gZnVuY3Rpb24obmFtZSwgdmFsaWRh");
    sb.append("dG9yKSB7CiAgICB2YWxpZGF0b3JzW25hbWVdID0gdmFsaWRhdG9yOwogIH07CiAgc2VsZi5yZWdpc3Rl");
    sb.append("clZhbGlkYXRvciA9IHNlbGYuUlY7CgogIHZhciBjb21tb25QdXQgPSBmdW5jdGlvbiAoZm9ybSwgc3Rh");
    sb.append("dGUsIGlkZW50aXR5TmFtZSwgcnhvYmosIHVybGZhY3RvcnkpIHsKICAgIC8vIFdJUAogICAgcnhvYmou");
    sb.append("X18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1");
    sb.append("bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBwYXNzd29y");
    sb.append("ZHMgPSB7fTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtKGZvcm0sIHBhc3N3b3Jkcyk7CgogICAgICB2");
    sb.append("YXIgbmV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdXJsID0gdXJsZmFjdG9yeShyeG9iaik7");
    sb.append("CiAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgeGh0dHAub25y");
    sb.append("ZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0");
    sb.append("ZSA9PSA0KSB7CiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAg");
    sb.append("ICB2YXIgdHlwZSA9IHRoaXMuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpOwogICAgICAg");
    sb.append("ICAgICAgIGlmICh0eXBlID09ICJ0ZXh0L2Vycm9yIikgewogICAgICAgICAgICAgICAgZmlyZV9mYWls");
    sb.append("dXJlKGZvcm0sIHRoaXMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAg");
    sb.append("ICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gImFwcGxpY2F0aW9uL2pzb24iKSB7CiAgICAgICAgICAg");
    sb.append("ICAgICB2YXIgcGF5bG9hZCA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgICAg");
    sb.append("ICAgICAgaWYgKCdpZGVudGl0eScgaW4gcGF5bG9hZCkgewogICAgICAgICAgICAgICAgICBpZGVudGl0");
    sb.append("aWVzW2lkZW50aXR5TmFtZV0gPSBwYXlsb2FkLmlkZW50aXR5OwogICAgICAgICAgICAgICAgICBsb2Nh");
    sb.append("bFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0");
    sb.append("eSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYuZ290");
    sb.append("byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0p");
    sb.append("OwogICAgICAgICAgICAgIGZvcm0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInN1Ym1pdHRlZCIpKTsK");
    sb.append("ICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxl");
    sb.append("ZCB0byBjb21tdW5pY2F0ZSB0byBzZXJ2ZXIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAg");
    sb.append("ICAgIH07CiAgICAgICAgeGh0dHAub3BlbigiUFVUIiwgdXJsLCB0cnVlKTsKICAgICAgICB4aHR0cC53");
    sb.append("aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogICAgICAgIHhodHRwLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVx");
    sb.append("KSk7CiAgICAgIH07CgogICAgICBpZiAoJ3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgICBp");
    sb.append("ZiAoISgnY29uZmlybS1wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB8fCBwYXNzd29yZHNbJ3Bhc3N3b3Jk");
    sb.append("J10gPT0gcGFzc3dvcmRzWydjb25maXJtLXBhc3N3b3JkJ10pIHsKICAgICAgICAgIGNvbm5lY3Rpb24u");
    sb.append("RG9jdW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3b3Jkc1sncGFzc3dvcmQnXSwgewogICAgICAgICAgICBz");
    sb.append("dWNjZXNzOiBmdW5jdGlvbiAoaGFzaGVkX3B3KSB7CiAgICAgICAgICAgICAgcmVxWydwYXNzd29yZCdd");
    sb.append("ID0gaGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsKICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAg");
    sb.append("IH0sCiAgICAgICAgICAgIGZhaWxlZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGZpcmVfZmFp");
    sb.append("bHVyZShmb3JtLCAiRmFpbGVkIHRvIGhhc2ggcGFzc3dvcmQiKTsKICAgICAgICAgICAgfQogICAgICAg");
    sb.append("ICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiUGFzc3dv");
    sb.append("cmRzIGRvbid0IG1hdGNoIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIG5leHQoKTsK");
    sb.append("ICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfQoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWRvbWFpbjpw");
    sb.append("dXQKICBzZWxmLmFkRFBVVCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9i");
    sb.append("aikgewogICAgY29tbW9uUHV0KGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqLCBmdW5jdGlv");
    sb.append("biAocnhvYmopIHsgcmV0dXJuIHNlbGYucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0ICsgIi8iICsg");
    sb.append("cnhvYmoucGF0aDsgfSkKICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWRvY3VtZW50OnB1dAog");
    sb.append("IHNlbGYuYURQVVQgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsK");
    sb.append("ICAgIGNvbW1vblB1dChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgZnVuY3Rpb24gKHJ4");
    sb.append("b2JqKSB7IHJldHVybiAiaHR0cHM6Ly8iICsgY29ubmVjdGlvbi5ob3N0ICsgIi8iICsgcnhvYmouc3Bh");
    sb.append("Y2UgKyAiLyIgKyByeG9iai5rZXkgKyAiLyIgKyByeG9iai5wYXRoOyB9KQogIH07CgogIC8vIFJVTlRJ");
    sb.append("TUUgfCByeDphY3Rpb249YWRhbWE6c2lnbi1pbgogIHNlbGYuYVNPID0gZnVuY3Rpb24gKGZvcm0sIHN0");
    sb.append("YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsK");
    sb.append("ICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgcmVjYWxsX2VtYWlsKGZvcm0p");
    sb.append("OwogICAgfSwgMSk7CiAgICAvLyBUT0RPOiBwdWxsIGVtYWlsIG91dCBvZiB0aGluIGFpcgogICAgZm9y");
    sb.append("bS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2");
    sb.append("ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm1fYW5kX3B3KGZvcm0pOwogICAgICBp");
    sb.append("ZiAocmVxLnJlbWVtYmVyKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImVtYWlsX3JlbWVt");
    sb.append("YmVyIiwgcmVxLmVtYWlsKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRl");
    sb.append("bSgiZW1haWxfcmVtZW1iZXIiLCAiIik7CiAgICAgIH0KICAgICAgY29ubmVjdGlvbi5BY2NvdW50TG9n");
    sb.append("aW4ocmVxLmVtYWlsLCByZXEucGFzc3dvcmQsIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5");
    sb.append("bG9hZCkgewogICAgICAgICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdID0gcGF5bG9hZC5pZGVudGl0");
    sb.append("eTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlOYW1l");
    sb.append("LCBwYXlsb2FkLmlkZW50aXR5KTsKICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBm");
    sb.append("YWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWls");
    sb.append("dXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkFjY291");
    sb.append("bnRMb2dpbiBGYWlsZWQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIHRydWUp");
    sb.append("OwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249YWRhbWE6c2lnbi11cAogIHNlbGYuYVNVID0g");
    sb.append("ZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBmb3J3YXJkVG8pIHsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5l");
    sb.append("cignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAg");
    sb.append("ICAgdmFyIHJlcSA9IGdldF9mb3JtKGZvcm0sIHt9KTsKICAgICAgY29ubmVjdGlvbi5Jbml0U2V0dXBB");
    sb.append("Y2NvdW50KHJlcS5lbWFpbCwgewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgvKiBwYXlsb2FkICov");
    sb.append("KSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZW1haWwiLCByZXEuZW1haWwpOwogICAg");
    sb.append("ICAgICAgc2VsZi5nb3RvKGZvcndhcmRUbywgZmFsc2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZv");
    sb.append("cm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAg");
    sb.append("ICAgZmlyZV9mYWlsdXJlKGZvcm0sICJJbml0U2V0dXBBY2NvdW50IEZhaWxlZDoiICsgcmVhc29uKTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFj");
    sb.append("dGlvbj1hZGFtYTpzZXQtcGFzc3dvcmQKICBzZWxmLmFTUCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwg");
    sb.append("Zm9yd2FyZFRvKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChl");
    sb.append("dnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybV9h");
    sb.append("bmRfcHcoZm9ybSk7CiAgICAgIGlmICghKCJlbWFpbCIgaW4gcmVxKSkgewogICAgICAgIHJlcS5lbWFp");
    sb.append("bCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJlbWFpbCIpOwogICAgICB9CiAgICAgIGNvbm5lY3Rpb24u");
    sb.append("SW5pdENvbXBsZXRlQWNjb3VudChyZXEuZW1haWwsIGZhbHNlLCByZXEuY29kZSwgewogICAgICAgIHN1");
    sb.append("Y2Nlc3M6IGZ1bmN0aW9uIChpbml0KSB7CiAgICAgICAgICB2YXIgaWRlbnRpdHkgPSBpbml0LmlkZW50");
    sb.append("aXR5OwogICAgICAgICAgY29ubmVjdGlvbi5BY2NvdW50U2V0UGFzc3dvcmQoaW5pdC5pZGVudGl0eSwg");
    sb.append("cmVxLnBhc3N3b3JkLCB7CiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHsKICAgICAgICAg");
    sb.append("ICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfZGVmYXVsdCIsIGlkZW50aXR5KTsKICAg");
    sb.append("ICAgICAgICAgICBzZWxmLmdvdG8oZm9yd2FyZFRvLCBmYWxzZSk7CiAgICAgICAgICAgICAgZmlyZV9z");
    sb.append("dWNjZXNzKGZvcm0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAo");
    sb.append("cmVhc29uKSB7CiAgICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgQWNjb3VudFNl");
    sb.append("dFBhc3N3b3JkOiIgKyByZWFzb24pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9");
    sb.append("LAogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGZpcmVfZmFpbHVy");
    sb.append("ZShmb3JtLCAiRmFpbGVkIEluaXRDb21wbGV0ZUFjY291bnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQog");
    sb.append("ICAgICB9KTsKICAgIH0sIHRydWUpOwogIH07CgoKICB2YXIgaHlkcmF0ZV9mb3JtID0gZnVuY3Rpb24o");
    sb.append("ZWwsIGlucHV0KSB7CiAgICB2YXIgdGFnID0gZWwudGFnTmFtZS50b1VwcGVyQ2FzZSgpOwogICAgdmFy");
    sb.append("IGlzU2V0dGFibGUgPSB0YWcgPT0gIlNFTEVDVCIgfHwgdGFnID09ICJJTlBVVCIgfHwgdGFnID09ICJI");
    sb.append("SURERU4iOwogICAgaWYgKCduYW1lJyBpbiBlbCAmJiBpc1NldHRhYmxlKSB7CiAgICAgIHZhciBuYW1l");
    sb.append("ID0gZWwubmFtZTsKICAgICAgdmFyIHBheWxvYWQgPSBpbnB1dDsKICAgICAgdmFyIGtEb3RPclNsYXNo");
    sb.append("ID0gZmlyc3RPY2N1cihuYW1lLmluZGV4T2YoJy4nKSwgbmFtZS5pbmRleE9mKCcvJykpOwogICAgICB3");
    sb.append("aGlsZSAoa0RvdE9yU2xhc2ggPiAwKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBuYW1lLnN1YnN0cmluZygw");
    sb.append("LCBrRG90T3JTbGFzaCk7CiAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKGtEb3RPclNsYXNoICsg");
    sb.append("MSk7CiAgICAgICAgaWYgKGl0ZW0gaW4gcGF5bG9hZCkgewogICAgICAgICAgcGF5bG9hZCA9IHBheWxv");
    sb.append("YWRbaXRlbV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAg");
    sb.append("ICAga0RvdE9yU2xhc2ggPSBmaXJzdE9jY3VyKG5hbWUuaW5kZXhPZignLicpLCBuYW1lLmluZGV4T2Yo");
    sb.append("Jy8nKSk7CiAgICAgIH0KICAgICAgaWYgKG5hbWUgaW4gcGF5bG9hZCkgewogICAgICAgIHZhciB0eXBl");
    sb.append("ID0gZWwudHlwZS50b1VwcGVyQ2FzZSgpOwogICAgICAgIGlmICh0eXBlID09ICJDSEVDS0JPWCIpIHsK");
    sb.append("ICAgICAgICAgIGVsLmNoZWNrZWQgPSBwYXlsb2FkW25hbWVdID09ICJ0cnVlIiB8fCBwYXlsb2FkW25h");
    sb.append("bWVdID09PSB0cnVlID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAiUkFE");
    sb.append("SU8iKSB7CiAgICAgICAgICBpZiAocGF5bG9hZFtuYW1lXSA9PSBlbC52YWx1ZSkgewogICAgICAgICAg");
    sb.append("ICBlbC5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAg");
    sb.append("ZWwudmFsdWUgPSBwYXlsb2FkW25hbWVdOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYgKCJj");
    sb.append("aGlsZHJlbiIgaW4gZWwpIHsKICAgICAgdmFyIGFyciA9IGVsLmNoaWxkcmVuOwogICAgICB2YXIgbiA9");
    sb.append("IGFyci5sZW5ndGg7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgdmFy");
    sb.append("IGNoID0gZWwuY2hpbGRyZW5ba107CiAgICAgICAgaHlkcmF0ZV9mb3JtKGNoLCBpbnB1dCk7CiAgICAg");
    sb.append("IH0KICAgIH0KICB9CgoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uOmNvcHktZm9ybTokdGFyZ2V0LWlk");
    sb.append("CiAgc2VsZi5hQ0YgPSBmdW5jdGlvbihmb3JtLCB0YXJnZXRGb3JtSWQpIHsKICAgIGZvcm0uYWRkRXZl");
    sb.append("bnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24oZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVs");
    sb.append("dCgpOwogICAgICB2YXIgaW5wdXQgPSBnZXRfZm9ybShmb3JtLCB7fSk7CiAgICAgIHZhciB0YXJnZXQg");
    sb.append("PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRGb3JtSWQpOwogICAgICBpZiAodGFyZ2V0KSB7");
    sb.append("CiAgICAgICAgaHlkcmF0ZV9mb3JtKHRhcmdldCwgaW5wdXQpOwogICAgICAgIGZpcmVfc3VjY2Vzcyhm");
    sb.append("b3JtKQogICAgICB9IGVsc2UgewogICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiZmFpbGVkIHRvIGZp");
    sb.append("bmQgZm9ybSBieSBpZCAnIiArIHRhcmdldEZvcm1JZCArICInIik7CiAgICAgIH0KICAgIH0sIHRydWUp");
    sb.append("OwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249c2VuZDokY2hhbm5lbAogIHNlbGYuYVNEID0g");
    sb.append("ZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBjaGFubmVsKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIo");
    sb.append("J3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAg");
    sb.append("IHZhciBwYXNzd29yZHMgPSB7fTsKICAgICAgdmFyIG1zZyA9IGdldF9mb3JtKGZvcm0sIHBhc3N3b3Jk");
    sb.append("cyk7CgogICAgICBpZiAoZXZ0LnN1Ym1pdHRlcikgewogICAgICAgIHZhciBzID0gZXZ0LnN1Ym1pdHRl");
    sb.append("cjsKICAgICAgICBpZiAocy5uYW1lICYmIHMudmFsdWUpIHsKICAgICAgICAgIGlmIChzLnZhbHVlID09");
    sb.append("ICJ0cnVlIikgeyBzLnZhbHVlID0gdHJ1ZTsgfQogICAgICAgICAgZWxzZSBpZiAocy52YWx1ZSA9PSAi");
    sb.append("ZmFsc2UiKSB7IHMudmFsdWUgPSBmYWxzZTsgfQogICAgICAgICAgbXNnW3MubmFtZV0gPSBzLnZhbHVl");
    sb.append("OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGFmdGVyID0gZnVuY3Rpb24oKSB7CiAgICAgICAg");
    sb.append("Ly8gVE9ETzogcGFzcyB0aHJvdWdoIHRoZSBkZWJ1Z2dlcgogICAgICAgIHN0YXRlLmRhdGEuY29ubmVj");
    sb.append("dGlvbi5wdHIuc2VuZChjaGFubmVsLCBtc2csIHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgv");
    sb.append("KiBwYXlsb2FkICovKSB7CiAgICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICAgIH0s");
    sb.append("CiAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgIGZpcmVfZmFp");
    sb.append("bHVyZShmb3JtLCAiU2VuZCBmYWlsZWQ6IiArIHJlYXNvbik7CiAgICAgICAgICB9CiAgICAgICAgfSk7");
    sb.append("CiAgICAgIH07CgogICAgICBpZiAoJ3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgICBpZiAo");
    sb.append("ISgnY29uZmlybS1wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB8fCBwYXNzd29yZHNbJ3Bhc3N3b3JkJ10g");
    sb.append("PT0gcGFzc3dvcmRzWydjb25maXJtLXBhc3N3b3JkJ10pIHsKICAgICAgICAgIGNvbm5lY3Rpb24uRG9j");
    sb.append("dW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3b3Jkc1sncGFzc3dvcmQnXSwgewogICAgICAgICAgICBzdWNj");
    sb.append("ZXNzOiBmdW5jdGlvbiAoaGFzaGVkX3B3KSB7CiAgICAgICAgICAgICAgbXNnWydwYXNzd29yZCddID0g");
    sb.append("aGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsKICAgICAgICAgICAgICBhZnRlcigpOwogICAgICAgICAgICB9");
    sb.append("LAogICAgICAgICAgICBmYWlsZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBmaXJlX2ZhaWx1");
    sb.append("cmUoZm9ybSwgIkZhaWxlZCB0byBoYXNoIHBhc3N3b3JkIik7CiAgICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIlBhc3N3b3Jk");
    sb.append("cyBtaXNtYXRjaCIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBhZnRlcigpOwogICAg");
    sb.append("ICB9CiAgICB9LCB0cnVlKTsKICB9OwogIC8vIDx0b2RvdGFzaz5kZXNjcmlwdGlvbjwvdG9kb3Rhc2s+");
    sb.append("CiAgc2VsZi5UQVNLID0gZnVuY3Rpb24ocGRvbSwgaWQsIHNlY3Rpb24sIGRlc2NyaXB0aW9uKSB7CiAg");
    sb.append("ICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgZWxlbWVudC5p");
    sb.append("bm5lckhUTUwgPSAiJiM5NzQ0OyAiICsgZGVzY3JpcHRpb24gKyAiICggIiArIHNlY3Rpb24gKyAiKSA8");
    sb.append("YnIgLz4iOwogICAgcGRvbS5hcHBlbmRDaGlsZChlbGVtZW50KTsKICB9OwogIC8vIFJVTlRJTUU6IHBy");
    sb.append("ZS1jb21wcmVzc2lvbiBmb3Igc2V0dGluZyBhbiBhdHRyaWJ1dGUKICAvLyAiZC5zZXRBdHRyaWJ1dGUo");
    sb.append("YSx2KTsiIC0tPgogIC8vICQuU0EoZCxhLHYpOyIKICBzZWxmLlNBID0gZnVuY3Rpb24oZG9tLCBhdHRy");
    sb.append("LCB2YWx1ZSkgewogICAgZG9tLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7CiAgfTsKICAvLyBmb3Ig");
    sb.append("c2VsZWN0cwogIC8vIGQudmFsdWU9JHZhbHVlOwogIC8vICQuU1YoZCwkdmFsdWUpOwogIHNlbGYuU1Yg");
    sb.append("PSBmdW5jdGlvbihkb20sIHZhbHVlKSB7CiAgICBkb20udmFsdWUgPSB2YWx1ZTsKICAgIGRvbS5yeHZh");
    sb.append("bHVlID0gdmFsdWU7CiAgfTsKICBzZWxmLm1lcmdlR290byA9IGZ1bmN0aW9uKGhyZWYsIHN0YXRlKSB7");
    sb.append("CiAgICB2YXIgcGFydHMgPSAoaHJlZi5zdGFydHNXaXRoKCIvIikgPyBocmVmLnN1YnN0cmluZygxKSA6");
    sb.append("IGhyZWYpLnNwbGl0KCIvIik7CiAgICB2YXIgbWVyZ2VJbml0ID0ge307CiAgICBpZiAocm91dGUocGFy");
    sb.append("dHMsIDAsIHJvdXRlciwgbWVyZ2VJbml0KSkgewogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKG1l");
    sb.append("cmdlSW5pdCk7CiAgICB9CiAgfTsKICAvLyBSVU5USU1FIHwgPC4uLiBocmVmPSIiIC4uLj4KICBzZWxm");
    sb.append("LkhSRUYgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgaHJlZiwgbWVyZ2UpIHsKICAgIGRvbS5zZXRBdHRy");
    sb.append("aWJ1dGUoImhyZWYiLCBmaXhIcmVmKGhyZWYpKTsKICAgIGRvbS5vbmNsaWNrID0gZnVuY3Rpb24gKGV2");
    sb.append("dCkgewogICAgICB2YXIgdHJpbUhyZWYgPSBocmVmOwogICAgICBpZiAodHJpbUhyZWYuc3RhcnRzV2l0");
    sb.append("aCgiLyIpKSB7CiAgICAgICAgdHJpbUhyZWYgPSB0cmltSHJlZi5zdWJzdHJpbmcoMSk7CiAgICAgIH0K");
    sb.append("ICAgICAgdmFyIGtRID0gdHJpbUhyZWYuaW5kZXhPZignPycpOwogICAgICBpZiAoa1EgPiAwKSB7CiAg");
    sb.append("ICAgICAgdHJpbUhyZWYgPSB0cmltSHJlZi5zdWJzdHJpbmcoMCwga1EpOwogICAgICB9CiAgICAgIHZh");
    sb.append("ciBwYXJ0cyA9IHRyaW1IcmVmLnNwbGl0KCIvIik7CiAgICAgIHZhciBtZXJnZUluaXQgPSB7fTsKICAg");
    sb.append("ICAgaWYgKHJvdXRlKHBhcnRzLCAwLCByb3V0ZXIsIG1lcmdlSW5pdCkpIHsKICAgICAgICBldnQucHJl");
    sb.append("dmVudERlZmF1bHQoKTsKICAgICAgICBpZiAobWVyZ2UpIHsKICAgICAgICAgIHN0YXRlLnZpZXcudHJl");
    sb.append("ZS51cGRhdGUobWVyZ2VJbml0KTsKICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7bWVy");
    sb.append("Z2U6dHJ1ZX0sICIiLCBmaXhIcmVmKGhyZWYpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2Vs");
    sb.append("Zi5nb3RvKGhyZWYsIHRydWUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0K");
    sb.append("ICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogIH07CiAgLy8gUlVOVElNRSB8IDwuLi4gY2xhc3M9IiIg");
    sb.append("Li4uPgogIHNlbGYuQUMgPSBmdW5jdGlvbiAoZG9tLCB2YWx1ZSkgewogICAgZG9tLnNldEF0dHJpYnV0");
    sb.append("ZSgiY2xhc3MiLCB2YWx1ZSk7CiAgfTsKICBzZWxmLkFDTEFTUyA9IGZ1bmN0aW9uIChkb20sIHZhbHVl");
    sb.append("KSB7IC8vIHRvIGRlcHJlY2F0ZSBpbiB0aGUgZnV0dXJlCiAgICBkb20uc2V0QXR0cmlidXRlKCJjbGFz");
    sb.append("cyIsIHZhbHVlKTsKICB9OwogIC8vIFJVTlRJTUUgfCA8Li4uIHNyYz0iIiAuLi4+CiAgc2VsZi5BU1JD");
    sb.append("ID0gZnVuY3Rpb24gKGRvbSwgdmFsdWUpIHsKICAgIGRvbS5zZXRBdHRyaWJ1dGUoInNyYyIsIHZhbHVl");
    sb.append("KTsKICB9OwogIHdpbmRvdy5yeGh0bWwgPSBzZWxmOwogIHJldHVybiBzZWxmOwp9KSgpOwo=");
    return sb.toString();
  }
  public static final String CONNECTION = new String(Base64.getDecoder().decode(make_connection()), StandardCharsets.UTF_8);
  private static String make_connection() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoKICogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG91dGxp");
    sb.append("bmVkIGluIHRoZQogKiBmaWxlICdMSUNFTlNFJyAoaXQncyBkdWFsIGxpY2Vuc2VkKSBsb2NhdGVkIGlu");
    sb.append("IHRoZSByb290IGRpcmVjdG9yeQogKiBuZWFyIHRoZSBSRUFETUUubWQgd2hpY2ggeW91IHNob3VsZCBh");
    sb.append("bHNvIHJlYWQuIEZvciBtb3JlIGluZm9ybWF0aW9uCiAqIGFib3V0IHRoZSBwcm9qZWN0IHdoaWNoIG93");
    sb.append("bnMgdGhpcyBmaWxlLCBzZWUgaHR0cHM6Ly93d3cuYWRhbWEtcGxhdGZvcm0uY29tLyAuCiAqCiAqIChj");
    sb.append("KSAyMDIxIC0gMjAyMyBieSBBZGFtYSBQbGF0Zm9ybSBJbml0aWF0aXZlLCBMTEMKICovCi8qKiBUaGUg");
    sb.append("V2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gQWRhbWEgKi8KY2xhc3MgV2ViU29ja2V0QWRhbWFDb25uZWN0");
    sb.append("aW9uIHsKICBjb25zdHJ1Y3Rvcihob3N0KSB7CiAgICAvLyBvbiBmYWlsdXJlLCB3ZSBiYWNrLW9mZiB3");
    sb.append("aXRoIHRoaXMgbWlsbGlzZWNvbmRzCiAgICB0aGlzLmJhY2tvZmYgPSAxOwogICAgLy8gdGhlIGhvc3Qg");
    sb.append("d2UgYXJlIGNvbm5lY3RpbmcgdG8KICAgIHRoaXMuaG9zdCA9IGhvc3Q7CiAgICAvLyBmb3JtIHRoZSBV");
    sb.append("Ukwgb2YgdGhlIGhvc3QKICAgIHRoaXMudXJsID0gIndzczovLyIgKyBob3N0ICsgIi9+cyI7CiAgICAv");
    sb.append("LyBpcyB0aGUgY29ubmVjdGlvbiBjb25uZWN0ZWQKICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAg");
    sb.append("ICAvLyBUT0RPCiAgICB0aGlzLmFzc2V0cyA9IHRydWU7CiAgICAvLyBpcyB0aGUgY29ubmVjdGlvbiBk");
    sb.append("ZWFkCiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIC8vIHRoZSBtYXhpbXVtIHBlcmlvZCBvZiB0aW1l");
    sb.append("IGJldHdlZW4gd2FpdGluZyBmb3IgYSByZXRyeQogICAgdGhpcy5tYXhpbXVtX2JhY2tvZmYgPSA1MDAw");
    sb.append("OwogICAgLy8gd2hlbiB0aGUgY29ubmVjdGlvbiB0aW1lcyBvdXQgZnJvbSB0aGUgc2VydmVyLCBob3cg");
    sb.append("bG9uZyB0byB3YWl0IHVudGlsIHdlIHJlY29ubmVjdAogICAgdGhpcy5yZXNldF9iYWNrb2ZmID0gMTAw");
    sb.append("MDsKICAgIC8vIHRoZSBhY3R1YWwgd2Vic29ja2V0CiAgICB0aGlzLnNvY2tldCA9IG51bGw7CiAgICAv");
    sb.append("LyB3aGF0IGhhcHBlbnMgd2hlbiB0aGUgc3RhdHVzIGNoYW5nZXMKICAgIHRoaXMub25zdGF0dXNjaGFu");
    sb.append("Z2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7IH07CiAgICAvLyB3aGF0IGhhcHBlbnMgd2hlbiB3ZSBsZWFy");
    sb.append("biB0aGUgbGF0ZW5jeQogICAgdGhpcy5vbnBpbmcgPSBmdW5jdGlvbiAoc2Vjb25kcywgbGF0ZW5jeSkg");
    sb.append("eyB9OwogICAgLy8gaXMgYSByZXRyeSBzY2hlZHVsZWQKICAgIHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7");
    sb.append("CiAgICAvLyBjYWxsYmFjayBtYXBwaW5nCiAgICB0aGlzLmNhbGxiYWNrcyA9IG5ldyBNYXAoKTsKICAg");
    sb.append("IC8vIGlkIGdlbmVyYXRpb24KICAgIHRoaXMubmV4dElkID0gMDsKICAgIC8vIGV2ZW50cyB0byBleGVj");
    sb.append("dXRlIG9uIHJlY29ubmVjdAogICAgdGhpcy5vbnJlY29ubmVjdCA9IG5ldyBNYXAoKTsKICB9CgogIC8q");
    sb.append("KiBzdG9wIHRoZSBjb25uZWN0aW9uICovCiAgc3RvcCgpIHsKICAgIHRoaXMuZGVhZCA9IHRydWU7CiAg");
    sb.append("ICBpZiAodGhpcy5zb2NrZXQgIT09IG51bGwpIHsKICAgICAgdGhpcy5zb2NrZXQuY2xvc2UoKTsKICAg");
    sb.append("IH0KICB9CgogIGJ1bXAoYm0pIHsKICAgIHRyeSB7CiAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRw");
    sb.append("UmVxdWVzdCgpOwogICAgICB4aHR0cC5vcGVuKCJQVVQiLCBsb2NhdGlvbi5wcm90b2NvbCArICIvLyIg");
    sb.append("KyB0aGlzLmhvc3QgKyAiL35ibS8iICsgYm0sIHRydWUpOwogICAgICB4aHR0cC5zZW5kKCk7CiAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAvLyBkb24ndCBjYXJlCiAgICB9CiAgfQoKICBsb2cobmFtZSwgYm9k");
    sb.append("eSkgewogICAgdHJ5IHsKICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAg");
    sb.append("IHhodHRwLm9wZW4oIlBVVCIsIGxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHRoaXMuaG9zdCArICIv");
    sb.append("fmxnLyIgKyBuYW1lLCB0cnVlKTsKICAgICAgeGh0dHAuc2VuZChib2R5KTsKICAgIH0gY2F0Y2ggKGV4");
    sb.append("KSB7CiAgICAgIC8vIGRvbid0IGNhcmUKICAgIH0KICB9CgogIC8qKiBwcml2YXRlOiByZXRyeSB0aGUg");
    sb.append("Y29ubmVjdGlvbiAqLwogIF9yZXRyeSgpIHsKICAgIC8vIG51bGwgb3V0IHRoZSBzb2NrZXQKICAgIHRo");
    sb.append("aXMuc29ja2V0ID0gbnVsbDsKICAgIC8vIGlmIHdlIGFyZSBjb25uZWN0ZWQsIHRyYW5zaXRpb24gdGhl");
    sb.append("IHN0YXR1cwogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFs");
    sb.append("c2U7CiAgICAgIHRoaXMub25zdGF0dXNjaGFuZ2UoZmFsc2UpOwogICAgICB0aGlzLmNhbGxiYWNrcy5m");
    sb.append("b3JFYWNoKGZ1bmN0aW9uIChjYiwgaWQpIHsKICAgICAgICBjYih7ZmFpbHVyZTo5OTl9KTsKICAgICAg");
    sb.append("fSk7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNrcy5jbGVhcigpOwogICAgLy8gaWYgd2UgYXJlIGRlYWQs");
    sb.append("IHRoZW4gZG9uJ3QgYWN0dWFsbHkgcmV0cnkKICAgIGlmICh0aGlzLmRlYWQpIHsKICAgICAgcmV0dXJu");
    sb.append("OwogICAgfQogICAgLy8gbWFrZSBzdXJlCiAgICBpZiAoIXRoaXMuc2NoZWR1bGVkKSB7CiAgICAgIC8v");
    sb.append("IHNjaGVkdWxlIGEgcmV0cnk7IGZpcnN0IGNvbXB1dGUgaG93IGxvbmcgdG8gdGFrZQogICAgICAvLyBj");
    sb.append("b21wdXRlIGhvdyBsb25nIHdlIG5lZWQgdG8gd2FpdAogICAgICB2YXIgaGFsdmVBZnRlclNjaGVkdWxl");
    sb.append("ID0gZmFsc2U7CiAgICAgIHRoaXMuYmFja29mZiArPSBNYXRoLnJhbmRvbSgpICogdGhpcy5iYWNrb2Zm");
    sb.append("OwogICAgICBpZiAodGhpcy5iYWNrb2ZmID4gdGhpcy5tYXhpbXVtX2JhY2tvZmYpIHsKICAgICAgICB0");
    sb.append("aGlzLmJhY2tvZmYgPSB0aGlzLm1heGltdW1fYmFja29mZjsKICAgICAgICBoYWx2ZUFmdGVyU2NoZWR1");
    sb.append("bGUgPSB0cnVlOwogICAgICB9CgogICAgICAvLyBzY2hlZHVsZSBpdAogICAgICB0aGlzLnNjaGVkdWxl");
    sb.append("ZCA9IHRydWU7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAo");
    sb.append("KSB7CiAgICAgICAgc2VsZi5zdGFydCgpOwogICAgICB9LCB0aGlzLmJhY2tvZmYpOwoKICAgICAgLy8g");
    sb.append("d2UganVzdCBzY2hlZHVsZWQgaXQgZm9yIHRoZSBtYXhpbXVtIGJhY2tvZmYgdGltZSwgbGV0J3MgcmVk");
    sb.append("dWNlIHRoZSBiYWNrb2ZmIHNvIHRoZSBuZXh0IG9uZSB3aWxsIGhhdmUgc29tZSBqaXR0ZXIKICAgICAg");
    sb.append("aWYgKGhhbHZlQWZ0ZXJTY2hlZHVsZSkgewogICAgICAgIHRoaXMuYmFja29mZiAvPSAyLjA7CiAgICAg");
    sb.append("IH0KICAgIH0KICB9CgogIC8qKiBzdGFydCB0aGUgY29ubmVjdGlvbiAqLwogIHN0YXJ0KCkgewogICAg");
    sb.append("Ly8gcmVzZXQgdGhlIHN0YXRlCiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB0aGlzLnNjaGVkdWxlZCA9");
    sb.append("IGZhbHNlOwogICAgdGhpcy5kZWFkID0gZmFsc2U7CiAgICB0aGlzLmhhc19oYWRfcGluZyA9IGZhbHNl");
    sb.append("OwogICAgdGhpcy5sYXN0X3BpbmcgPSAwOwogICAgdGhpcy5waW5nX2ZhaWx1cmVzID0gMDsKICAgIC8v");
    sb.append("IGNyZWF0ZSB0aGUgc29ja2V0IGFuZCBiaW5kIGV2ZW50IGhhbmRsZXJzCiAgICB0aGlzLnNvY2tldCA9");
    sb.append("IG5ldyBXZWJTb2NrZXQodGhpcy51cmwpOwogICAgdGhpcy5zb2NrZXQub25tZXNzYWdlID0gZnVuY3Rp");
    sb.append("b24gKGV2ZW50KSB7CiAgICAgIHZhciByZXN1bHQgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpOwogICAg");
    sb.append("ICAvLyBhIG1lc3NhZ2UgYXJyaXZlZCwgaXMgaXQgYSBjb25uZWN0aW9uIHNpZ25hbAogICAgICBpZiAo");
    sb.append("InBpbmciIGluIHJlc3VsdCkgewogICAgICAgIHNlbGYub25waW5nKHJlc3VsdC5waW5nLCByZXN1bHQu");
    sb.append("bGF0ZW5jeSk7CiAgICAgICAgcmVzdWx0LnBvbmcgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAu");
    sb.append("MDsKICAgICAgICBzZWxmLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpOwogICAgICAg");
    sb.append("IHNlbGYubGFzdF9waW5nID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgc2VsZi5oYXNfaGFk");
    sb.append("X3BpbmcgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoInN0YXR1cyIgaW4g");
    sb.append("cmVzdWx0KSB7CiAgICAgICAgLy8gaGV5LCBhcmUgd2UgY29ubmVjdGVkPwogICAgICAgIGlmIChyZXN1");
    sb.append("bHQuc3RhdHVzICE9ICJjb25uZWN0ZWQiKSB7CiAgICAgICAgICAvLyBub3BlLCBPSywgbGV0J3MgbWFr");
    sb.append("ZSB0aGlzIGEgZGVhZCBzb2NrZXQKICAgICAgICAgIHNlbGYuc29ja2V0LmNsb3NlKCk7CiAgICAgICAg");
    sb.append("ICBzZWxmLnNvY2tldCA9IG51bGw7CiAgICAgICAgICBzZWxmLmJhY2tvZmYgPSBzZWxmLnJlc2V0X2Jh");
    sb.append("Y2tvZmY7CiAgICAgICAgICBzZWxmLl9yZXRyeSgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0K");
    sb.append("ICAgICAgICAvLyB0ZWxsIHRoZSBjbGllbnQgdGhhdCB3ZSBhcmUgZ29vZCEKICAgICAgICBzZWxmLmJh");
    sb.append("Y2tvZmYgPSAxOwogICAgICAgIHNlbGYuY29ubmVjdGVkID0gdHJ1ZTsKICAgICAgICBzZWxmLmFzc2V0");
    sb.append("cyA9IHJlc3VsdC5hc3NldHM7CiAgICAgICAgc2VsZi5vbnN0YXR1c2NoYW5nZSh0cnVlKTsKICAgICAg");
    sb.append("ICBzZWxmLl9yZWNvbm5lY3QoKTsKICAgICAgICBzZWxmLkNvbmZpZ3VyZU1ha2VPckdldEFzc2V0S2V5");
    sb.append("KHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICAgIHRyeSB7");
    sb.append("CiAgICAgICAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAg");
    sb.append("ICAgeGh0dHAub3BlbigiR0VUIiwgbG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0ICsg");
    sb.append("Ii9+cCIgKyBwYXlsb2FkLmFzc2V0S2V5LCB0cnVlKTsKICAgICAgICAgICAgICB4aHR0cC53aXRoQ3Jl");
    sb.append("ZGVudGlhbHMgPSB0cnVlOwogICAgICAgICAgICAgIHhodHRwLnNlbmQoKTsKICAgICAgICAgICAgfSBj");
    sb.append("YXRjaCAoZXgpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhleCk7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0sCiAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIHRoZSByZXN1bHQgd2FzIGEgZmFp");
    sb.append("bHVyZS4uLgogICAgICBpZiAoImZhaWx1cmUiIGluIHJlc3VsdCkgewogICAgICAgIC8vIGZpbmQgdGhl");
    sb.append("IGNhbGxiYWNrLCB0aGVuIGludm9rZSBpdCAoYW5kIGNsZWFuIHVwKQogICAgICAgIGlmIChzZWxmLmNh");
    sb.append("bGxiYWNrcy5oYXMocmVzdWx0LmZhaWx1cmUpKSB7CiAgICAgICAgICB2YXIgY2IgPSBzZWxmLmNhbGxi");
    sb.append("YWNrcy5nZXQocmVzdWx0LmZhaWx1cmUpOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHNl");
    sb.append("bGYuY2FsbGJhY2tzLmRlbGV0ZShyZXN1bHQuZmFpbHVyZSk7CiAgICAgICAgICAgIGNiKHJlc3VsdCk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCJkZWxpdmVyIiBpbiByZXN1bHQp");
    sb.append("IHsKICAgICAgICAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWNjZXNzLCBzbyBsZXQncyBmaW5kIHRo");
    sb.append("ZSBjYWxsYmFjaywgYW5kIGlmIG5lZWQgYmUgY2xlYW4gdXAKICAgICAgICBpZiAoc2VsZi5jYWxsYmFj");
    sb.append("a3MuaGFzKHJlc3VsdC5kZWxpdmVyKSkgewogICAgICAgICAgdmFyIGNiID0gc2VsZi5jYWxsYmFja3Mu");
    sb.append("Z2V0KHJlc3VsdC5kZWxpdmVyKTsKICAgICAgICAgIGlmIChjYikgewogICAgICAgICAgICBpZiAocmVz");
    sb.append("dWx0LmRvbmUpIHsKICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrcy5kZWxldGUocmVzdWx0LmRlbGl2");
    sb.append("ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNiKHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfQogICAgICB9CiAgICB9OwogICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChldmVu");
    sb.append("dCkgewogICAgICBzZWxmLmJ1bXAoInIiKTsKICAgICAgLy8gbGV0J3MgcmV0cnkuLi4gb3Igc2hvdWxk");
    sb.append("IHdlIG5vdAogICAgICBzZWxmLl9yZXRyeSgpOwogICAgfTsKICAgIHRoaXMuc29ja2V0Lm9uZXJyb3Ig");
    sb.append("PSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgc2VsZi5idW1wKCJyIik7CiAgICAgIC8vIHNvbWV0aGlu");
    sb.append("ZyBiYWQgaGFwcGVuZWQsIGxldCdzIHJldHJ5CiAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICB9OwoKICB9");
    sb.append("CgogIGtlZXBhbGl2ZSgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHdpbmRvdy5zZXRJbnRlcnZh");
    sb.append("bChmdW5jdGlvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc2VsZi5oYXNfaGFkX3BpbmcgJiYg");
    sb.append("c2VsZi5zb2NrZXQpIHsKICAgICAgICAgIHZhciB0aW1lU2luY2VMYXN0UGluZyA9IG5ldyBEYXRlKCku");
    sb.append("Z2V0VGltZSgpIC0gc2VsZi5sYXN0X3Bpbmc7CiAgICAgICAgICAvLyBUT0RPOiBicm9hZGNhc3QgYSBs");
    sb.append("YXRlbmN5CiAgICAgICAgICBpZiAodGltZVNpbmNlTGFzdFBpbmcgPiAyNTAwKSB7CiAgICAgICAgICAg");
    sb.append("IHNlbGYucGluZ19mYWlsdXJlcysrOwogICAgICAgICAgICBpZiAoc2VsZi5waW5nX2ZhaWx1cmVzID49");
    sb.append("IDMpIHsKICAgICAgICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IGZhbHNlOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbigpIHt9OwogICAgICAgICAgICAgIHNlbGYuc29j");
    sb.append("a2V0LmNsb3NlKCk7CiAgICAgICAgICAgICAgc2VsZi5zb2NrZXQgPSBudWxsOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuX3JldHJ5KCk7CiAgICAgICAgICAgICAgc2VsZi5idW1wKCJkIik7CiAgICAgICAgICAgICAg");
    sb.append("Y29uc29sZS5lcnJvcigiaGFkIHRvIGZvcmNlIGEgZGlzY29ubmVjdCIpOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnBpbmdfZmFpbHVyZXMgPSAwOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7");
    sb.append("CiAgICAgIH0KICAgIH0sIDEyNTApOwogIH0KCiAgLyoqIHByaXZhdGU6IHNlbmQgYSByYXcgbWVzc2Fn");
    sb.append("ZSAqLwogIF93cml0ZShyZXF1ZXN0LCBjYWxsYmFjaykgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkg");
    sb.append("ewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNrcy5zZXQocmVxdWVzdC5p");
    sb.append("ZCwgY2FsbGJhY2spOwogICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7");
    sb.append("CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKiBhcGk6IHdhaXQgZm9yIGEgY29ubmVjdGlvbiAqLwog");
    sb.append("IGFzeW5jIHdhaXRfY29ubmVjdGVkKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHJl");
    sb.append("dHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZ29vZCkgewogICAgICAgIGdvb2QodHJ1ZSk7CiAgICAg");
    sb.append("IH0pOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcHJpb3IgPSB0");
    sb.append("aGlzLm9uc3RhdHVzY2hhbmdlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGdvb2Qp");
    sb.append("IHsKICAgICAgICBzZWxmLm9uc3RhdHVzY2hhbmdlID0gZnVuY3Rpb24gKHN0YXR1cykgewogICAgICAg");
    sb.append("ICAgcHJpb3Ioc3RhdHVzKTsKICAgICAgICAgIGlmIChzdGF0dXMpIHsKICAgICAgICAgICAgZ29vZCh0");
    sb.append("cnVlKTsKICAgICAgICAgICAgc2VsZi5vbnN0YXR1c2NoYW5nZSA9IHByaW9yOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0KCiAgX3JlY29ubmVjdCgpIHsKICAgIHRoaXMub25y");
    sb.append("ZWNvbm5lY3QuZm9yRWFjaChmdW5jdGlvbiAoc20sIGlkKSB7CiAgICAgIHNtLl9fcmV0cnkoKTsKICAg");
    sb.append("IH0pOwogIH0KCiAgLyoqIGV4ZWN1dGUgYSByZXF1ZXNlIHJlc3BvbnNlIHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfcnIoc20pIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHNtLmZpcnN0ID0gdHJ1ZTsKICAgIGlmICghc2VsZi5fd3JpdGUoc20ucmVxdWVzdCwgZnVuY3Rpb24g");
    sb.append("KHJlc3BvbnNlKSB7CiAgICAgIGlmIChzbS5maXJzdCkgewogICAgICAgIHNtLmZpcnN0ID0gZmFsc2U7");
    sb.append("CiAgICAgICAgaWYgKCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgICAgaWYgKCdmYWlsdXJl");
    sb.append("JyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLmZhaWx1cmUocmVzcG9u");
    sb.append("c2UucmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCdzdWNj");
    sb.append("ZXNzJyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLnN1Y2Nlc3MocmVz");
    sb.append("cG9uc2UucmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBzZWxmLm9u");
    sb.append("cmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICB9KSkgewogICAgICBzZWxmLm9ucmVjb25uZWN0LnNl");
    sb.append("dChzbS5pZCwgc20pOwogICAgICBzbS5fX3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHNtKTsKICAgICAgfTsKICAgICAgcmV0dXJuIHNtOwogICAgfQogICAgcmV0dXJu");
    sb.append("IG51bGw7CiAgfQoKICAvKiogZXhlY3V0ZSBhIHN0cmVhbSByZXF1ZXN0IHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfc3RyZWFtKHNtKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICBzZWxmLl93cml0ZShzbS5yZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYg");
    sb.append("KCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgIGlmICgnZmFpbHVyZScgaW4gc20ucmVzcG9u");
    sb.append("ZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuZmFpbHVyZShyZXNwb25zZS5yZWFzb24pOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBzZWxmLm9ucmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZSkgewogICAgICAgIGlmICgnbmV4dCcg");
    sb.append("aW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIubmV4dChyZXNwb25zZS5yZXNw");
    sb.append("b25zZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5kb25lKSB7CiAgICAgICAg");
    sb.append("aWYgKCdjb21wbGV0ZScgaW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuY29t");
    sb.append("cGxldGUoKTsKICAgICAgICB9CiAgICAgICAgc2VsZi5vbnJlY29ubmVjdC5kZWxldGUoc20uaWQpOwog");
    sb.append("ICAgICB9CiAgICB9KTsKICAgIHNlbGYub25yZWNvbm5lY3Quc2V0KHNtLmlkLCBzbSk7CiAgICBzbS5f");
    sb.append("X3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oc20pOwogICAg");
    sb.append("fTsKICAgIHJldHVybiBzbTsKICB9CgogIF9faWQoKSB7CiAgICB0aGlzLm5leHRJZCsrOwogICAgcmV0");
    sb.append("dXJuIHRoaXMubmV4dElkOwogIH0KCiAgLyoqW0JFR0lOLUlOVk9LRV0qKi8KICBJbml0U2V0dXBBY2Nv");
    sb.append("dW50KGVtYWlsLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9");
    sb.append("IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklk");
    sb.append("LAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpbml0");
    sb.append("L3NldHVwLWFjY291bnQiLCAiaWQiOnBhcklkLCAiZW1haWwiOiBlbWFpbH0KICAgIH0pOwogIH0KICBJ");
    sb.append("bml0Q29udmVydEdvb2dsZVVzZXIoYWNjZXNzVG9rZW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6ImluaXQvY29udmVydC1nb29nbGUtdXNlciIsICJpZCI6cGFySWQsICJh");
    sb.append("Y2Nlc3MtdG9rZW4iOiBhY2Nlc3NUb2tlbn0KICAgIH0pOwogIH0KICBJbml0Q29tcGxldGVBY2NvdW50");
    sb.append("KGVtYWlsLCByZXZva2UsIGNvZGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6ImluaXQvY29tcGxldGUtYWNjb3VudCIsICJpZCI6cGFySWQsICJlbWFpbCI6IGVtYWlsLCAi");
    sb.append("cmV2b2tlIjogcmV2b2tlLCAiY29kZSI6IGNvZGV9CiAgICB9KTsKICB9CiAgRGVpbml0KGlkZW50aXR5");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkZWluaXQiLCAiaWQi");
    sb.append("OnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBBY2NvdW50U2V0UGFzc3dv");
    sb.append("cmQoaWRlbnRpdHksIHBhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJt");
    sb.append("ZXRob2QiOiJhY2NvdW50L3NldC1wYXNzd29yZCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50");
    sb.append("aXR5LCAicGFzc3dvcmQiOiBwYXNzd29yZH0KICAgIH0pOwogIH0KICBBY2NvdW50R2V0UGF5bWVudFBs");
    sb.append("YW4oaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFy");
    sb.append("SWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFj");
    sb.append("Y291bnQvZ2V0LXBheW1lbnQtcGxhbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQog");
    sb.append("ICAgfSk7CiAgfQogIEFjY291bnRMb2dpbihlbWFpbCwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFjY291bnQvbG9naW4iLCAiaWQiOnBhcklkLCAiZW1h");
    sb.append("aWwiOiBlbWFpbCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgUHJvYmUoaWRlbnRp");
    sb.append("dHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InByb2JlIiwgImlk");
    sb.append("IjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgU3RhdHMocmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InN0YXRzIiwgImlkIjpwYXJJZH0K");
    sb.append("ICAgIH0pOwogIH0KICBJZGVudGl0eUhhc2goaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImlkZW50aXR5L2hhc2giLCAiaWQiOnBhcklkLCAiaWRlbnRpdHki");
    sb.append("OiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBJZGVudGl0eVN0YXNoKGlkZW50aXR5LCBuYW1lLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpZGVudGl0eS9zdGFzaCIsICJp");
    sb.append("ZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibmFtZSI6IG5hbWV9CiAgICB9KTsKICB9CiAg");
    sb.append("QXV0aG9yaXR5Q3JlYXRlKGlkZW50aXR5LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJhdXRob3JpdHkvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRp");
    sb.append("dHl9CiAgICB9KTsKICB9CiAgQXV0aG9yaXR5U2V0KGlkZW50aXR5LCBhdXRob3JpdHksIGtleVN0b3Jl");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdXRob3JpdHkvc2V0");
    sb.append("IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJhdXRob3JpdHkiOiBhdXRob3JpdHks");
    sb.append("ICJrZXktc3RvcmUiOiBrZXlTdG9yZX0KICAgIH0pOwogIH0KICBBdXRob3JpdHlHZXQoaWRlbnRpdHks");
    sb.append("IGF1dGhvcml0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJ");
    sb.append("ZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXV0");
    sb.append("aG9yaXR5L2dldCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiYXV0aG9yaXR5Ijog");
    sb.append("YXV0aG9yaXR5fQogICAgfSk7CiAgfQogIEF1dGhvcml0eUxpc3QoaWRlbnRpdHksIHJlc3BvbmRlcikg");
    sb.append("ewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1");
    sb.append("cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6");
    sb.append("IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdXRob3JpdHkvbGlzdCIsICJpZCI6");
    sb.append("cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQogICAgfSk7CiAgfQogIEF1dGhvcml0eURlc3Ryb3ko");
    sb.append("aWRlbnRpdHksIGF1dGhvcml0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2");
    sb.append("YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAg");
    sb.append("IGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0");
    sb.append("aG9kIjoiYXV0aG9yaXR5L2Rlc3Ryb3kiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwg");
    sb.append("ImF1dGhvcml0eSI6IGF1dGhvcml0eX0KICAgIH0pOwogIH0KICBTcGFjZUNyZWF0ZShpZGVudGl0eSwg");
    sb.append("c3BhY2UsIHRlbXBsYXRlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJzcGFjZS9jcmVhdGUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjog");
    sb.append("c3BhY2UsICJ0ZW1wbGF0ZSI6IHRlbXBsYXRlfQogICAgfSk7CiAgfQogIFNwYWNlR2VuZXJhdGVLZXko");
    sb.append("aWRlbnRpdHksIHNwYWNlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJzcGFjZS9nZW5lcmF0ZS1rZXkiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VHZXQoaWRlbnRpdHksIHNwYWNlLCByZXNwb25k");
    sb.append("ZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAg");
    sb.append("cmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6");
    sb.append("IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9nZXQiLCAiaWQiOnBhcklk");
    sb.append("LCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VT");
    sb.append("ZXQoaWRlbnRpdHksIHNwYWNlLCBwbGFuLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJzcGFjZS9zZXQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2UsICJwbGFuIjogcGxhbn0KICAgIH0pOwogIH0KICBTcGFjZVJlZGVwbG95S2ljayhp");
    sb.append("ZGVudGl0eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("InNwYWNlL3JlZGVwbG95LWtpY2siLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VTZXRSeGh0bWwoaWRlbnRpdHksIHNwYWNlLCBy");
    sb.append("eGh0bWwsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAg");
    sb.append("ICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL3Nl");
    sb.append("dC1yeGh0bWwiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2Us");
    sb.append("ICJyeGh0bWwiOiByeGh0bWx9CiAgICB9KTsKICB9CiAgU3BhY2VHZXRSeGh0bWwoaWRlbnRpdHksIHNw");
    sb.append("YWNlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAg");
    sb.append("ICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9nZXQt");
    sb.append("cnhodG1sIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlfQog");
    sb.append("ICAgfSk7CiAgfQogIFNwYWNlU2V0UG9saWN5KGlkZW50aXR5LCBzcGFjZSwgYWNjZXNzUG9saWN5LCBy");
    sb.append("ZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNw");
    sb.append("b25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9zZXQtcG9saWN5");
    sb.append("IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAiYWNjZXNz");
    sb.append("LXBvbGljeSI6IGFjY2Vzc1BvbGljeX0KICAgIH0pOwogIH0KICBTcGFjZUdldFBvbGljeShpZGVudGl0");
    sb.append("eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0g");
    sb.append("c2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQs");
    sb.append("CiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNl");
    sb.append("L2dldC1wb2xpY3kiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3Bh");
    sb.append("Y2V9CiAgICB9KTsKICB9CiAgU3BhY2VNZXRyaWNzKGlkZW50aXR5LCBzcGFjZSwgcHJlZml4LCBtZXRy");
    sb.append("aWNRdWVyeSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBz");
    sb.append("ZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2Uv");
    sb.append("bWV0cmljcyIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwg");
    sb.append("InByZWZpeCI6IHByZWZpeCwgIm1ldHJpYy1xdWVyeSI6IG1ldHJpY1F1ZXJ5fQogICAgfSk7CiAgfQog");
    sb.append("IFNwYWNlRGVsZXRlKGlkZW50aXR5LCBzcGFjZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRo");
    sb.append("aXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVl");
    sb.append("c3Q6IHsibWV0aG9kIjoic3BhY2UvZGVsZXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRp");
    sb.append("dHksICJzcGFjZSI6IHNwYWNlfQogICAgfSk7CiAgfQogIFNwYWNlU2V0Um9sZShpZGVudGl0eSwgc3Bh");
    sb.append("Y2UsIGVtYWlsLCByb2xlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJzcGFjZS9zZXQtcm9sZSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2Ui");
    sb.append("OiBzcGFjZSwgImVtYWlsIjogZW1haWwsICJyb2xlIjogcm9sZX0KICAgIH0pOwogIH0KICBTcGFjZUxp");
    sb.append("c3REZXZlbG9wZXJzKGlkZW50aXR5LCBzcGFjZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRo");
    sb.append("aXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9z");
    sb.append("dHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL2xpc3QtZGV2ZWxvcGVycyIsICJpZCI6cGFySWQsICJpZGVu");
    sb.append("dGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZX0KICAgIH0pOwogIH0KICBTcGFjZVJlZmxlY3Qo");
    sb.append("aWRlbnRpdHksIHNwYWNlLCBrZXksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6InNwYWNlL3JlZmxlY3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgU3BhY2VMaXN0KGlkZW50aXR5LCBt");
    sb.append("YXJrZXIsIGxpbWl0LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJ");
    sb.append("ZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlk");
    sb.append("OiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9k");
    sb.append("Ijoic3BhY2UvbGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibWFya2VyIjog");
    sb.append("bWFya2VyLCAibGltaXQiOiBsaW1pdH0KICAgIH0pOwogIH0KICBQdXNoUmVnaXN0ZXIoaWRlbnRpdHks");
    sb.append("IGRvbWFpbiwgc3Vic2NyaXB0aW9uLCBkZXZpY2VJbmZvLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxm");
    sb.append("ID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVj");
    sb.append("dXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAg");
    sb.append("cmVxdWVzdDogeyJtZXRob2QiOiJwdXNoL3JlZ2lzdGVyIiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHksICJkb21haW4iOiBkb21haW4sICJzdWJzY3JpcHRpb24iOiBzdWJzY3JpcHRpb24sICJk");
    sb.append("ZXZpY2UtaW5mbyI6IGRldmljZUluZm99CiAgICB9KTsKICB9CiAgRG9tYWluTWFwKGlkZW50aXR5LCBk");
    sb.append("b21haW4sIHNwYWNlLCBjZXJ0aWZpY2F0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7");
    sb.append("CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6");
    sb.append("IHsibWV0aG9kIjoiZG9tYWluL21hcCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAi");
    sb.append("ZG9tYWluIjogZG9tYWluLCAic3BhY2UiOiBzcGFjZSwgImNlcnRpZmljYXRlIjogY2VydGlmaWNhdGV9");
    sb.append("CiAgICB9KTsKICB9CiAgRG9tYWluQ29uZmlndXJlKGlkZW50aXR5LCBkb21haW4sIHByb2R1Y3RDb25m");
    sb.append("aWcsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9jb25m");
    sb.append("aWd1cmUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImRvbWFpbiI6IGRvbWFpbiwg");
    sb.append("InByb2R1Y3QtY29uZmlnIjogcHJvZHVjdENvbmZpZ30KICAgIH0pOwogIH0KICBEb21haW5SZWZsZWN0");
    sb.append("KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFy");
    sb.append("IHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBp");
    sb.append("ZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhv");
    sb.append("ZCI6ImRvbWFpbi9yZWZsZWN0IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21h");
    sb.append("aW4iOiBkb21haW59CiAgICB9KTsKICB9CiAgRG9tYWluTWFwRG9jdW1lbnQoaWRlbnRpdHksIGRvbWFp");
    sb.append("biwgc3BhY2UsIGtleSwgcm91dGUsIGNlcnRpZmljYXRlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxm");
    sb.append("ID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVj");
    sb.append("dXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAg");
    sb.append("cmVxdWVzdDogeyJtZXRob2QiOiJkb21haW4vbWFwLWRvY3VtZW50IiwgImlkIjpwYXJJZCwgImlkZW50");
    sb.append("aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW4sICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5");
    sb.append("LCAicm91dGUiOiByb3V0ZSwgImNlcnRpZmljYXRlIjogY2VydGlmaWNhdGV9CiAgICB9KTsKICB9CiAg");
    sb.append("RG9tYWluTGlzdChpZGVudGl0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2");
    sb.append("YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewog");
    sb.append("ICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7");
    sb.append("Im1ldGhvZCI6ImRvbWFpbi9saXN0IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAg");
    sb.append("ICB9KTsKICB9CiAgRG9tYWluTGlzdEJ5U3BhY2UoaWRlbnRpdHksIHNwYWNlLCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiBy");
    sb.append("ZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9tYWluL2xpc3QtYnktc3BhY2UiLCAi");
    sb.append("aWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAgICB9KTsKICB9");
    sb.append("CiAgRG9tYWluR2V0VmFwaWRQdWJsaWNLZXkoaWRlbnRpdHksIGRvbWFpbiwgcmVzcG9uZGVyKSB7CiAg");
    sb.append("ICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBz");
    sb.append("ZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25k");
    sb.append("ZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9tYWluL2dldC12YXBpZC1wdWJsaWMta2V5Iiwg");
    sb.append("ImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW59CiAgICB9KTsK");
    sb.append("ICB9CiAgRG9tYWluVW5tYXAoaWRlbnRpdHksIGRvbWFpbiwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2Vs");
    sb.append("ZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhl");
    sb.append("Y3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAg");
    sb.append("IHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9tYWluL3VubWFwIiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHksICJkb21haW4iOiBkb21haW59CiAgICB9KTsKICB9CiAgRG9tYWluR2V0KGlkZW50aXR5");
    sb.append("LCBkb21haW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0g");
    sb.append("c2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQs");
    sb.append("CiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFp");
    sb.append("bi9nZXQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImRvbWFpbiI6IGRvbWFpbn0K");
    sb.append("ICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6YXRpb24oc3BhY2UsIGtleSwgbWVzc2FnZSwgcmVz");
    sb.append("cG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsK");
    sb.append("ICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9u");
    sb.append("ZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQvYXV0aG9yaXph");
    sb.append("dGlvbiIsICJpZCI6cGFySWQsICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAibWVzc2FnZSI6IG1l");
    sb.append("c3NhZ2V9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemF0aW9uRG9tYWluKGRvbWFpbiwgbWVz");
    sb.append("c2FnZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxm");
    sb.append("Ll9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAg");
    sb.append("ICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQv");
    sb.append("YXV0aG9yaXphdGlvbi1kb21haW4iLCAiaWQiOnBhcklkLCAiZG9tYWluIjogZG9tYWluLCAibWVzc2Fn");
    sb.append("ZSI6IG1lc3NhZ2V9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemUoc3BhY2UsIGtleSwgdXNl");
    sb.append("cm5hbWUsIHBhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJkb2N1bWVudC9hdXRob3JpemUiLCAiaWQiOnBhcklkLCAic3BhY2UiOiBzcGFjZSwgImtleSI6IGtl");
    sb.append("eSwgInVzZXJuYW1lIjogdXNlcm5hbWUsICJwYXNzd29yZCI6IHBhc3N3b3JkfQogICAgfSk7CiAgfQog");
    sb.append("IERvY3VtZW50QXV0aG9yaXplRG9tYWluKGRvbWFpbiwgdXNlcm5hbWUsIHBhc3N3b3JkLCByZXNwb25k");
    sb.append("ZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAg");
    sb.append("cmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6");
    sb.append("IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemUtZG9t");
    sb.append("YWluIiwgImlkIjpwYXJJZCwgImRvbWFpbiI6IGRvbWFpbiwgInVzZXJuYW1lIjogdXNlcm5hbWUsICJw");
    sb.append("YXNzd29yZCI6IHBhc3N3b3JkfQogICAgfSk7CiAgfQogIERvY3VtZW50QXV0aG9yaXplV2l0aFJlc2V0");
    sb.append("KHNwYWNlLCBrZXksIHVzZXJuYW1lLCBwYXNzd29yZCwgbmV3X3Bhc3N3b3JkLCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3Bv");
    sb.append("bmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemUtd2l0aC1yZXNl");
    sb.append("dCIsICJpZCI6cGFySWQsICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAidXNlcm5hbWUiOiB1c2Vy");
    sb.append("bmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmQsICJuZXdfcGFzc3dvcmQiOiBuZXdfcGFzc3dvcmR9CiAg");
    sb.append("ICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemVEb21haW5XaXRoUmVzZXQoZG9tYWluLCB1c2VybmFt");
    sb.append("ZSwgcGFzc3dvcmQsIG5ld19wYXNzd29yZCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7");
    sb.append("CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6");
    sb.append("IHsibWV0aG9kIjoiZG9jdW1lbnQvYXV0aG9yaXplLWRvbWFpbi13aXRoLXJlc2V0IiwgImlkIjpwYXJJ");
    sb.append("ZCwgImRvbWFpbiI6IGRvbWFpbiwgInVzZXJuYW1lIjogdXNlcm5hbWUsICJwYXNzd29yZCI6IHBhc3N3");
    sb.append("b3JkLCAibmV3X3Bhc3N3b3JkIjogbmV3X3Bhc3N3b3JkfQogICAgfSk7CiAgfQogIERvY3VtZW50Q3Jl");
    sb.append("YXRlKGlkZW50aXR5LCBzcGFjZSwga2V5LCBlbnRyb3B5LCBhcmcsIHJlc3BvbmRlcikgewogICAgdmFy");
    sb.append("IHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5f");
    sb.append("X2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAog");
    sb.append("ICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2NyZWF0ZSIsICJpZCI6cGFySWQsICJpZGVu");
    sb.append("dGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgImtleSI6IGtleSwgImVudHJvcHkiOiBlbnRy");
    sb.append("b3B5LCAiYXJnIjogYXJnfQogICAgfSk7CiAgfQogIERvY3VtZW50RGVsZXRlKGlkZW50aXR5LCBzcGFj");
    sb.append("ZSwga2V5LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAog");
    sb.append("ICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVu");
    sb.append("dC9kZWxldGUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2Us");
    sb.append("ICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRMaXN0KGlkZW50aXR5LCBzcGFjZSwgbWFy");
    sb.append("a2VyLCBsaW1pdCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("ImRvY3VtZW50L2xpc3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjog");
    sb.append("c3BhY2UsICJtYXJrZXIiOiBtYXJrZXIsICJsaW1pdCI6IGxpbWl0fQogICAgfSk7CiAgfQogIE1lc3Nh");
    sb.append("Z2VEaXJlY3RTZW5kKGlkZW50aXR5LCBzcGFjZSwga2V5LCBjaGFubmVsLCBtZXNzYWdlLCByZXNwb25k");
    sb.append("ZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAg");
    sb.append("cmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6");
    sb.append("IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJtZXNzYWdlL2RpcmVjdC1zZW5kIiwg");
    sb.append("ImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5");
    sb.append("LCAiY2hhbm5lbCI6IGNoYW5uZWwsICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBNZXNz");
    sb.append("YWdlRGlyZWN0U2VuZE9uY2UoaWRlbnRpdHksIHNwYWNlLCBrZXksIGRlZHVwZSwgY2hhbm5lbCwgbWVz");
    sb.append("c2FnZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxm");
    sb.append("Ll9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAg");
    sb.append("ICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoibWVzc2FnZS9k");
    sb.append("aXJlY3Qtc2VuZC1vbmNlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6");
    sb.append("IHNwYWNlLCAia2V5Ijoga2V5LCAiZGVkdXBlIjogZGVkdXBlLCAiY2hhbm5lbCI6IGNoYW5uZWwsICJt");
    sb.append("ZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBDb25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5LCBz");
    sb.append("cGFjZSwga2V5LCB2aWV3ZXJTdGF0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAg");
    sb.append("ICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0o");
    sb.append("ewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0");
    sb.append("OiB7Im1ldGhvZCI6ImNvbm5lY3Rpb24vY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRl");
    sb.append("bnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAidmlld2VyLXN0YXRlIjogdmlld2VyU3Rh");
    sb.append("dGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsK");
    sb.append("ICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7");
    sb.append("CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAg");
    sb.append("ICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3Jk");
    sb.append("LCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAg");
    sb.append("ICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJj");
    sb.append("b25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2VybmFt");
    sb.append("ZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNz");
    sb.append("d29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5uZWws");
    sb.append("IGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAg");
    sb.append("ICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDog");
    sb.append("ImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFu");
    sb.append("bmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAg");
    sb.append("IH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewogICAg");
    sb.append("ICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAg");
    sb.append("ICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQsICJj");
    sb.append("b25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5jdGlv");
    sb.append("bihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0U2hh");
    sb.append("Mzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAg");
    sb.append("ICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25k");
    sb.append("ZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9h");
    sb.append("dHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJZCwg");
    sb.append("ImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUiOiBz");
    sb.append("aXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEzODR9");
    sb.append("CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUsIHN1");
    sb.append("YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3Vi");
    sb.append("UmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0ZSIs");
    sb.append("IGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9");
    sb.append("CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAg");
    sb.append("ICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVj");
    sb.append("dGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBDb25uZWN0aW9uQ3Jl");
    sb.append("YXRlVmlhRG9tYWluKGlkZW50aXR5LCBkb21haW4sIHZpZXdlclN0YXRlLCByZXNwb25kZXIpIHsKICAg");
    sb.append("IHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNl");
    sb.append("bGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNw");
    sb.append("b25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiY29ubmVjdGlvbi9jcmVhdGUtdmlhLWRvbWFp");
    sb.append("biIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAidmll");
    sb.append("d2VyLXN0YXRlIjogdmlld2VyU3RhdGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNz");
    sb.append("YWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAg");
    sb.append("ICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25k");
    sb.append("ZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9z");
    sb.append("ZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1l");
    sb.append("c3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rp");
    sb.append("b24odXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAg");
    sb.append("IHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("ICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAg");
    sb.append("cmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVj");
    sb.append("dGlvbiI6cGFySWQsICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5l");
    sb.append("d19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9u");
    sb.append("Y2U6IGZ1bmN0aW9uKGNoYW5uZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAg");
    sb.append("ICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAg");
    sb.append("ICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3Nh");
    sb.append("Z2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9u");
    sb.append("KHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjog");
    sb.append("c3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1h");
    sb.append("dHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwK");
    sb.append("ICAgICAgYXR0YWNoOiBmdW5jdGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUs");
    sb.append("IGRpZ2VzdE1kNSwgZGlnZXN0U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3Vi");
    sb.append("SWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsg");
    sb.append("bWV0aG9kOiAiY29ubmVjdGlvbi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwg");
    sb.append("ImFzc2V0LWlkIjogYXNzZXRJZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBj");
    sb.append("b250ZW50VHlwZSwgInNpemUiOiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1z");
    sb.append("aGEzODQiOiBkaWdlc3RTaGEzODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVu");
    sb.append("Y3Rpb24odmlld2VyU3RhdGUsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL3VwZGF0ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2Vy");
    sb.append("LXN0YXRlIjogdmlld2VyU3RhdGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rp");
    sb.append("b24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAg");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVy");
    sb.append("OiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5k");
    sb.append("IiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0p");
    sb.append("OwogIH0KICBEb2N1bWVudHNIYXNoUGFzc3dvcmQocGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFy");
    sb.append("IHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5f");
    sb.append("X2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAog");
    sb.append("ICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50cy9oYXNoLXBhc3N3b3JkIiwgImlkIjpwYXJJ");
    sb.append("ZCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgQmlsbGluZ0Nvbm5lY3Rpb25DcmVh");
    sb.append("dGUoaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJiaWxsaW5nLWNvbm5lY3Rpb24vY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRp");
    sb.append("dHl9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsK");
    sb.append("ICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7");
    sb.append("CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAg");
    sb.append("ICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3Jk");
    sb.append("LCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAg");
    sb.append("ICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJj");
    sb.append("b25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2VybmFt");
    sb.append("ZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNz");
    sb.append("d29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5uZWws");
    sb.append("IGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAg");
    sb.append("ICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDog");
    sb.append("ImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFu");
    sb.append("bmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAg");
    sb.append("IH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewogICAg");
    sb.append("ICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAg");
    sb.append("ICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQsICJj");
    sb.append("b25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5jdGlv");
    sb.append("bihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0U2hh");
    sb.append("Mzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAg");
    sb.append("ICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25k");
    sb.append("ZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9h");
    sb.append("dHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJZCwg");
    sb.append("ImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUiOiBz");
    sb.append("aXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEzODR9");
    sb.append("CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUsIHN1");
    sb.append("YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3Vi");
    sb.append("UmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0ZSIs");
    sb.append("IGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9");
    sb.append("CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAg");
    sb.append("ICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVj");
    sb.append("dGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBDb25maWd1cmVNYWtl");
    sb.append("T3JHZXRBc3NldEtleShyZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJ");
    sb.append("ZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBh");
    sb.append("cklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJj");
    sb.append("b25maWd1cmUvbWFrZS1vci1nZXQtYXNzZXQta2V5IiwgImlkIjpwYXJJZH0KICAgIH0pOwogIH0KICBB");
    sb.append("dHRhY2htZW50U3RhcnQoaWRlbnRpdHksIHNwYWNlLCBrZXksIGZpbGVuYW1lLCBjb250ZW50VHlwZSwg");
    sb.append("cmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQo");
    sb.append("KTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImF0dGFjaG1lbnQv");
    sb.append("c3RhcnQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJr");
    sb.append("ZXkiOiBrZXksICJmaWxlbmFtZSI6IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29udGVudFR5cGV9");
    sb.append("LAogICAgICBhcHBlbmQ6IGZ1bmN0aW9uKGNodW5rTWQ1LCBiYXNlNjRCeXRlcywgc3ViUmVzcG9uZGVy");
    sb.append("KSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVf");
    sb.append("cnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIs");
    sb.append("CiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvYXBwZW5kIiwgaWQ6IHN1Yklk");
    sb.append("LCAidXBsb2FkIjpwYXJJZCwgImNodW5rLW1kNSI6IGNodW5rTWQ1LCAiYmFzZTY0LWJ5dGVzIjogYmFz");
    sb.append("ZTY0Qnl0ZXN9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGZpbmlzaDogZnVuY3Rpb24oc3ViUmVz");
    sb.append("cG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNw");
    sb.append("b25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvZmluaXNoIiwgaWQ6");
    sb.append("IHN1YklkLCAidXBsb2FkIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQogIEF0");
    sb.append("dGFjaG1lbnRTdGFydEJ5RG9tYWluKGlkZW50aXR5LCBkb21haW4sIGZpbGVuYW1lLCBjb250ZW50VHlw");
    sb.append("ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9f");
    sb.append("aWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAg");
    sb.append("ICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImF0dGFjaG1l");
    sb.append("bnQvc3RhcnQtYnktZG9tYWluIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21h");
    sb.append("aW4iOiBkb21haW4sICJmaWxlbmFtZSI6IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29udGVudFR5");
    sb.append("cGV9LAogICAgICBhcHBlbmQ6IGZ1bmN0aW9uKGNodW5rTWQ1LCBiYXNlNjRCeXRlcywgc3ViUmVzcG9u");
    sb.append("ZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25k");
    sb.append("ZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvYXBwZW5kIiwgaWQ6IHN1");
    sb.append("YklkLCAidXBsb2FkIjpwYXJJZCwgImNodW5rLW1kNSI6IGNodW5rTWQ1LCAiYmFzZTY0LWJ5dGVzIjog");
    sb.append("YmFzZTY0Qnl0ZXN9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGZpbmlzaDogZnVuY3Rpb24oc3Vi");
    sb.append("UmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5f");
    sb.append("X2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJS");
    sb.append("ZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvZmluaXNoIiwg");
    sb.append("aWQ6IHN1YklkLCAidXBsb2FkIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQoK");
    sb.append("ICAvKipbRU5ELUlOVk9LRV0qKi8KfQoKdmFyIEFkYW1hID0gewogIFByb2R1Y3Rpb246ICJhd3MtdXMt");
    sb.append("ZWFzdC0yLmFkYW1hLXBsYXRmb3JtLmNvbSIsCiAgQmV0YTogImJldGEuYWRhbWEtcGxhdGZvcm0uY29t");
    sb.append("IiwKICBDb25uZWN0aW9uOiBXZWJTb2NrZXRBZGFtYUNvbm5lY3Rpb24KfTsK");
    return sb.toString();
  }
  public static final String WORKER = new String(Base64.getDecoder().decode(make_worker()), StandardCharsets.UTF_8);
  private static String make_worker() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyogQWRhbWEgd29ya2VyOiBoYW5kbGUgc2ltcGxlIHB1c2ggbm90aWZpY2F0aW9ucyAqLwoKY29uc29s");
    sb.append("ZS5sb2coImFkYW1hIHdvcmtlciBzdGFydGVkIik7CnNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaCcs");
    sb.append("IGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmRhdGEpIHsKICAgIHZhciBqc29uID0gZXZlbnQu");
    sb.append("ZGF0YS5qc29uKCk7CiAgICBpZiAoanNvbikgewogICAgICBjb25zb2xlLmxvZyhqc29uKTsKICAgICAg");
    sb.append("dmFyIHB1c2hUb2tlbiA9ICJOQSI7CiAgICAgIGlmICgnQHB0JyBpbiBqc29uKSB7CiAgICAgICAgcHVz");
    sb.append("aFRva2VuID0ganNvblsnQHB0J107CiAgICAgIH0KICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAg");
    sb.append("Ym9keToganNvbi5ib2R5ID8ganNvbi5ib2R5IDogIkdlbmVyaWMgUHVzaCBCb2R5IiwKICAgICAgfTsK");
    sb.append("ICAgICAgaWYgKGpzb24uaWNvbikgewogICAgICAgIG9wdGlvbnMuaWNvbiA9IGpzb24uaWNvbjsKICAg");
    sb.append("ICAgfQogICAgICB2YXIgc2hvdyA9IHRydWU7CiAgICAgIGlmIChqc29uLmhpZGUpIHsKICAgICAgICBz");
    sb.append("aG93ID0gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgaWYgKGpzb24udXJs");
    sb.append("KSB7CiAgICAgICAgZGF0YS51cmwgPSBqc29uLnVybDsKICAgICAgfQogICAgICBvcHRpb25zLmRhdGEg");
    sb.append("PSBkYXRhOwogICAgICBpZiAoc2hvdykgewogICAgICAgIGV2ZW50LndhaXRVbnRpbChzZWxmLnJlZ2lz");
    sb.append("dHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKGpzb24udGl0bGUgPyBqc29uLnRpdGxlIDogIkdlbmVyaWMg");
    sb.append("UHVzaCBUaXRsZSIsIG9wdGlvbnMpKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mKGpzb24uYmFkZ2Up");
    sb.append("ID09ICJudW1iZXIiICYmIG5hdmlnYXRvci5zZXRBcHBCYWRnZSkgewogICAgICAgIHRyeSB7CiAgICAg");
    sb.append("ICAgICBldmVudC53YWl0VW50aWwobmF2aWdhdG9yLnNldEFwcEJhZGdlKGpzb24uYmFkZ2UpKTsKICAg");
    sb.append("ICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgZXZlbnQud2FpdFVu");
    sb.append("dGlsKGZldGNoKHNlbGYubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5sb2NhdGlvbi5ob3N0");
    sb.append("ICsgIi9+cHQvIiArIHB1c2hUb2tlbiwgewogICAgICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgICAg");
    sb.append("IGhlYWRlcnM6IHt9LAogICAgICAgICAgYm9keTogcHVzaFRva2VuCiAgICAgICAgfSkpOwogICAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICAgIH0KICAgIH0KICB9Cn0pOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdub3RpZmljYXRpb25j");
    sb.append("bGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50Lm5vdGlmaWNhdGlvbiAmJiBldmVudC5u");
    sb.append("b3RpZmljYXRpb24uZGF0YSAmJiBldmVudC5ub3RpZmljYXRpb24uZGF0YS51cmwpIHsKICAgIHZhciB1");
    sb.append("cmwgPSBzZWxmLmxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHNlbGYubG9jYXRpb24uaG9zdCArIGV2");
    sb.append("ZW50Lm5vdGlmaWNhdGlvbi5kYXRhLnVybDsKICAgIHZhciBob21lID0gc2VsZi5sb2NhdGlvbi5wcm90");
    sb.append("b2NvbCArICIvLyIgKyBzZWxmLmxvY2F0aW9uLmhvc3Q7CiAgICBldmVudC5ub3RpZmljYXRpb24uY2xv");
    sb.append("c2UoKTsgLy8gQW5kcm9pZCBuZWVkcyBleHBsaWNpdCBjbG9zZS4KICAgIGV2ZW50LndhaXRVbnRpbCgK");
    sb.append("ICAgICAgY2xpZW50cy5tYXRjaEFsbCh7dHlwZTogJ3dpbmRvdyd9KS50aGVuKCB3YyA9PiB7CiAgICAg");
    sb.append("ICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHdpbmRvdy90YWIgb3BlbiB3aXRoIHRoZSB0");
    sb.append("YXJnZXQgVVJMCiAgICAgICAgdmFyIGNsaWVudFdpdGhQcmVmaXggPSBudWxsOwogICAgICAgIHZhciBj");
    sb.append("bGllbnRXaXRoSG9tZSA9IG51bGw7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Yy5sZW5ndGg7");
    sb.append("IGkrKykgewogICAgICAgICAgdmFyIGNsaWVudCA9IHdjW2ldOwogICAgICAgICAgY29uc29sZS5sb2co");
    sb.append("ImNsaWVudDoiICsgY2xpZW50LnVybCArICI7IiArIHVybCk7CiAgICAgICAgICBpZiAoY2xpZW50LnVy");
    sb.append("bCA9PT0gdXJsICYmICdmb2N1cycgaW4gY2xpZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjbGllbnQu");
    sb.append("Zm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjbGllbnQudXJsLnN0YXJ0c1dpdGgodXJs");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoUHJlZml4ID0g");
    sb.append("Y2xpZW50OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNsaWVudC51cmwuc3RhcnRzV2l0aChob21l");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoSG9tZSA9IGNs");
    sb.append("aWVudDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNsaWVudFdpdGhQcmVmaXggIT0g");
    sb.append("bnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpwcmVmaXg6IiArIHVybCk7CiAgICAgICAg");
    sb.append("ICByZXR1cm4gY2xpZW50V2l0aFByZWZpeC5uYXZpZ2F0ZSh1cmwpOwogICAgICAgIH0KICAgICAgICBp");
    sb.append("ZiAoY2xpZW50V2l0aEhvbWUgIT0gbnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpob21l");
    sb.append("OiIgKyB1cmwpOwogICAgICAgICAgcmV0dXJuIGNsaWVudFdpdGhIb21lLm5hdmlnYXRlKHVybCk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmIChjbGllbnRzLm9wZW5XaW5kb3cpIHsKICAgICAgICAgIGNvbnNvbGUu");
    sb.append("bG9nKCJvcGVuOm5ldzoiICsgdXJsKTsKICAgICAgICAgIHJldHVybiBjbGllbnRzLm9wZW5XaW5kb3co");
    sb.append("dXJsKTsKICAgICAgICB9CiAgICAgIH0pCiAgICApOwogIH0KfSk7");
    return sb.toString();
  }
}
