/*
* Adama Platform and Language
* Copyright (C) 2021 - 2023 by Adama Platform Initiative, LLC
* 
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.
* 
* You should have received a copy of the GNU Affero General Public License
* along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/
package org.adamalang.cli.devbox;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class JavaScriptResourcesRaw {
  public static final String TREE = new String(Base64.getDecoder().decode(make_tree()), StandardCharsets.UTF_8);
  private static String make_tree() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIGEgc2ltcGxpZmllZCBwdWIvc3ViIGRpZmZlcmVudGlhbCB0cmVlICovCmZ1bmN0aW9uIEFkYW1h");
    sb.append("VHJlZSgpIHsKICB2YXIgaWQgPSAwOwoKICB2YXIgcm9vdCA9IHt9OwogIHZhciBhbGxfc3Vic2NyaXB0");
    sb.append("aW9ucyA9IHt9OwoKICB2YXIgY2xvbmVfb2JqZWN0ID0gZnVuY3Rpb24gKG9iaikgewogICAgaWYgKEFy");
    sb.append("cmF5LmlzQXJyYXkob2JqKSkgewogICAgICB2YXIgbmV4dCA9IFtdOwogICAgICBmb3IgKHZhciBrID0g");
    sb.append("MDsgayA8IG9iai5sZW5ndGg7IGsrKykgewogICAgICAgIG5leHQucHVzaChjbG9uZV9vYmplY3Qob2Jq");
    sb.append("W2tdKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG5leHQ7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAob2Jq");
    sb.append("KSA9PSAib2JqZWN0IikgewogICAgICB2YXIgbmV4dCA9IHt9OwogICAgICBmb3IgKGtleSBpbiBvYmop");
    sb.append("IHsKICAgICAgICBpZiAoa2V5WzBdID09ICIjIiB8fCBrZXkgPT0gIl9fa2V5IiB8fCBrZXkgPT0gIkBv");
    sb.append("IiB8fCBrZXkgPT0gIkBzIikgY29udGludWU7CiAgICAgICAgbmV4dFtrZXldID0gY2xvbmVfb2JqZWN0");
    sb.append("KG9ialtrZXldKTsKICAgICAgfQogICAgICByZXR1cm4gbmV4dDsKICAgIH0gZWxzZSB7CiAgICAgIHJl");
    sb.append("dHVybiBvYmo7CiAgICB9CiAgfTsKCiAgdGhpcy5udWtlID0gZnVuY3Rpb24gKCkgewogICAgYWxsX3N1");
    sb.append("YnNjcmlwdGlvbnMgPSB7fTsKICB9OwoKICB0aGlzLmNvcHkgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1");
    sb.append("cm4gY2xvbmVfb2JqZWN0KHJvb3QpOwogIH07CgogIHRoaXMuc3RyID0gZnVuY3Rpb24gKCkgewogICAg");
    sb.append("cmV0dXJuIEpTT04uc3RyaW5naWZ5KHJvb3QpOwogIH07CgogIHRoaXMucmF3ID0gZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgcmV0dXJuIHJvb3Q7CiAgfTsKCiAgLy8gZmlsdGVyIHRoZSBzdWJzY3JpcHRpb25zIHRvIHRo");
    sb.append("ZSBvbmVzIHRoYXQgaGF2ZSB0aGUga2V5CiAgdmFyIHN1YiA9IGZ1bmN0aW9uIChzLCBrZXkpIHsKICAg");
    sb.append("IC8vIGlmIHdlIGhhdmUgbm90aGluZywgdGhlbiB3ZSByZXR1cm4gbm90aGluZwogICAgaWYgKHMubGVu");
    sb.append("Z3RoID09IDApIHsKICAgICAgcmV0dXJuIHM7CiAgICB9CiAgICAvLyBtYWtlIGEgbmV3IGFycmF5CiAg");
    sb.append("ICB2YXIgbiA9IFtdOwogICAgZm9yICh2YXIgayA9IDA7IGsgPCBzLmxlbmd0aDsgaysrKSB7IC8vIHN1");
    sb.append("Y2ggdGhhdCBldmVyeSBlbGVtZW50CiAgICAgIGlmIChrZXkgaW4gc1trXSkgeyAvLyB3aGljaCBjb250");
    sb.append("YWlucyB0aGUga2V5CiAgICAgICAgbi5wdXNoKHNba11ba2V5XSk7IC8vIGlzIGFkZGVkIHRvIHRoZSBu");
    sb.append("ZXcgYXJyYXkKICAgICAgfQogICAgfQogICAgcmV0dXJuIG47CiAgfTsKCiAgLy8gZmlyZSBldmVudHMg");
    sb.append("YXQgdGhlIGN1cnJlbnQgc3Vic2NyaXB0aW9uCiAgdmFyIGZpcmUgPSBmdW5jdGlvbiAocywgdmFsdWUs");
    sb.append("IGV2ZW50cykgewogICAgLy8gZm9yIGVhY2ggc3Vic2NyaXB0aW9uCiAgICBmb3IgKHZhciBqID0gMDsg");
    sb.append("aiA8IHMubGVuZ3RoOyBqKyspIHsKICAgICAgdmFyIHYgPSBzW2pdOwogICAgICAvLyBpZiBpdCBoYXMg");
    sb.append("ZXZlbnRzCiAgICAgIGlmICgiQGUiIGluIHYpIHsKICAgICAgICAvLyBmaXJlIGVhY2ggZXZlbnQKICAg");
    sb.append("ICAgICB2YXIgZXZ0cyA9IHZbIkBlIl07CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBldnRzLmxl");
    sb.append("bmd0aDsgaysrKSB7CiAgICAgICAgICBldmVudHMucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAg");
    sb.append("IHRoaXMuZih0aGlzLnYpOwogICAgICAgICAgfS5iaW5kKHsgZjogZXZ0c1trXSwgdjogdmFsdWUgfSkp");
    sb.append("OwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIHZhciB3ZWF2ZSA9IGZ1bmN0aW9uIChzLCBj");
    sb.append("YWxsYmFjaywga2V5KSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShjYWxsYmFjaykpIHsKICAgICAgZm9y");
    sb.append("ICh2YXIgayA9IDA7IGsgPCBjYWxsYmFjay5sZW5ndGg7IGsrKykgewogICAgICAgIHdlYXZlKHMsIGNh");
    sb.append("bGxiYWNrW2tdLCBrZXkpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09");
    sb.append("ICJmdW5jdGlvbiIpIHsKICAgICAgaWYgKCEoa2V5IGluIHMpKSB7CiAgICAgICAgc1trZXldID0ge307");
    sb.append("CiAgICAgIH0KICAgICAgdmFyIHNrID0gc1trZXldOwogICAgICBpZiAoISgiQGUiIGluIHNrKSkgewog");
    sb.append("ICAgICAgIHNrWyJAZSJdID0gW2NhbGxiYWNrXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBza1siQGUi");
    sb.append("XS5wdXNoKGNhbGxiYWNrKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgKGNhbGxiYWNrKSA9");
    sb.append("PSAib2JqZWN0IikgewogICAgICBpZiAoIShrZXkgaW4gcykpIHsKICAgICAgICBzW2tleV0gPSB7fTsK");
    sb.append("ICAgICAgfQogICAgICB2YXIgc2sgPSBzW2tleV07CiAgICAgIGZvciAodmFyIGNrIGluIGNhbGxiYWNr");
    sb.append("KSB7CiAgICAgICAgaWYgKGNrID09ICJAZSIpIHsKICAgICAgICAgIHdlYXZlKHMsIGNhbGxiYWNrW2Nr");
    sb.append("XSwga2V5KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2VhdmUoc2ssIGNhbGxiYWNrW2NrXSwg");
    sb.append("Y2spOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIHdlIGhhdmUgZGV0ZWN0ZWQgYW4g");
    sb.append("YWRkaXRpb24KICB2YXIgZmlyZV9hZGQgPSBmdW5jdGlvbiAocywga2V5KSB7CiAgICBmb3IgKHZhciBq");
    sb.append("ID0gMDsgaiA8IHMubGVuZ3RoOyBqKyspIHsgLy8gZm9yIGVhY2ggc3Vic2NyaXB0aW9uCiAgICAgIHZh");
    sb.append("ciB2ID0gc1tqXTsKICAgICAgaWYgKCIrIiBpbiB2KSB7IC8vIGlmIHRoZSBzdWJzY3JpcHRpb24gaGFz");
    sb.append("IHRoZSBhYmlsaXR5IHRvIGFkZCBuZXcgb2JqZWN0cwogICAgICAgIHZhciB2YSA9IHZbIisiXTsKICAg");
    sb.append("ICAgICBpZiAoIkBlIiBpbiB2YSkgeyAvLyBpZiBhcmUgZXZlbnRzIGFzc29jaWF0ZWQgdG8gJysnCiAg");
    sb.append("ICAgICAgICB2YXIgZXZhID0gdmFbIkBlIl07CiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV2");
    sb.append("YS5sZW5ndGg7IGsrKykgeyAvLyBmb3IgZWFjaCAnKycgYWJpbGl0eQogICAgICAgICAgICB3ZWF2ZSh2");
    sb.append("LCBldmFba10oa2V5KSwga2V5KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9");
    sb.append("OwoKICAvLyBmaXJlIGEgZGVsZXRlIG1lc3NhZ2UgZm9yIHRoZSBnaXZlbiBrZXkKICB2YXIgZmlyZV9k");
    sb.append("ZWwgPSBmdW5jdGlvbiAocywga2V5KSB7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHMubGVuZ3RoOyBq");
    sb.append("KyspIHsgLy8gZm9yIGVhY2ggc3Vic2NyaXB0aW9uCiAgICAgIHZhciB2ID0gc1tqXTsKICAgICAgaWYg");
    sb.append("KCItIiBpbiB2KSB7IC8vIGlmIHRoZSBzdWJzY3JpcHRpb24gaGFzIHRoZSBhYmlsaXR5IHRvIGRlbGV0");
    sb.append("ZSBwcmlvciBrZXlzCiAgICAgICAgdmFyIHZhID0gdlsiLSJdOwogICAgICAgIGlmICgiQGUiIGluIHZh");
    sb.append("KSB7IC8vIGlmIGFyZSBldmVudHMgYXNzb2NpYXRlZCB0byAnLScKICAgICAgICAgIHZhciBldmEgPSB2");
    sb.append("YVsiQGUiXTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZhLmxlbmd0aDsgaysrKSB7IC8v");
    sb.append("IGZvciBlYWNoICctJyBhYmlsaXR5CiAgICAgICAgICAgIGV2YVtrXShrZXkpOyAvLyBldmFsdWF0ZSB0");
    sb.append("aGUgJy0nCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gYSBkZWxl");
    sb.append("dGUgb2YgYSB0cmVlIGhhcyBiZWVuIGRldGVjdGVkLCBsZXQncwogIHZhciBkZWwgPSBmdW5jdGlvbiAo");
    sb.append("cykgewogICAgLy8gaWYgdGhlIHN1YnNjcmlwdGlvbnMgaXMgYW4gYXJyYXksIHRoZW4gZGVsZXRlIGFs");
    sb.append("bCBjaGlsZHJlbgogICAgaWYgKEFycmF5LmlzQXJyYXkocykpIHsKICAgICAgdmFyIG4gPSBzLmxlbmd0");
    sb.append("aDsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICBkZWwoc1trXSk7CiAg");
    sb.append("ICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChzKSA9PSAib2JqZWN0IikgeyAvLyBvdGhlcndpc2Us");
    sb.append("IGl0ZXJhdGUgb3ZlciB0aGUga2V5cwogICAgICBmb3IgKHZhciBrZXkgaW4gcykgewogICAgICAgIGlm");
    sb.append("ICghKGtleSA9PSAnKycgfHwga2V5ID09ICctJykpIHsKICAgICAgICAgIHZhciBjaCA9IHNba2V5XTsK");
    sb.append("ICAgICAgICAgIGlmIChrZXkgPT0gIkBlIikgeyAvLyB3ZSBoYXZlIGV2ZW50cywgc28gbGV0J3Mgc2Vu");
    sb.append("ZCB0aG9zZSBldmVudHMuLi4KICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjaC5sZW5ndGg7");
    sb.append("IGorKykgewogICAgICAgICAgICAgIGNoW2pdKG51bGwpOyAvLyBhIG51bGwgdG8gaW5kaWNhdGUgZGVs");
    sb.append("ZXRpb24KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsgLy8gcmVjdXJzZSBpbnRvIHRoZSBj");
    sb.append("aGlsZCBmaWVsZAogICAgICAgICAgICBkZWwoY2gpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAg");
    sb.append("fQogICAgfQogIH07CgogIC8vIGRlbGV0ZSB0aGUgZ2l2ZW4ga2V5IHdpdGhpbiB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uCiAgdmFyIGRlbF9rZXkgPSBmdW5jdGlvbiAocywga2V5KSB7CiAgICBpZiAoQXJyYXkuaXNBcnJh");
    sb.append("eShzKSkgeyAvLyBpZiB3ZSBoYXZlIGFuIGFycmF5IG9mIHN1YnNjcmlwdGlvbnMsIHRoZW4gc2ltcGx5");
    sb.append("IHJlcGVhdAogICAgICB2YXIgbiA9IHMubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47");
    sb.append("IGsrKykgewogICAgICAgIGRlbF9rZXkoc1trXSwga2V5KTsgLy8gZm9yIGVhY2ggZWxlbWVudAogICAg");
    sb.append("ICB9CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAocykgPT0gIm9iamVjdCIpIHsgLy8gb3RoZXJ3aXNlLCB3");
    sb.append("ZSBoYXZlIGEgc3ViY3JpcHRpb24gY2FsbGJhY2sKICAgICAgaWYgKGtleSBpbiBzKSB7IC8vIGlmIHRo");
    sb.append("ZSBrZXkgaXMgaW4gdGhlIHN1YnNjcmlwdGlvbiBjYWxsYmFjawogICAgICAgIGRlbGV0ZSBzW2tleV07");
    sb.append("IC8vIGRlbGV0ZSBpdAogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gbWVyZ2UgdGhlIGdpdmVuIGRlbHRh");
    sb.append("IGludG8gdGhlIHRyZWUgYW5kIGZpcmUgc3Vic2NyaXB0aW9ucyAocykKICB2YXIgbWVyZ2UgPSBmdW5j");
    sb.append("dGlvbiAodHJlZSwgZGVsdGEsIHMsIGV2ZW50cywgb3B0aW1hbCkgewogICAgaWYgKG9wdGltYWwgJiYg");
    sb.append("cy5sZW5ndGggPT0gMCkgewogICAgICAvLyBubyB2YWx1ZSBpbiBtZXJnaW5nIGFnYWluc3QgYSBmYXV4");
    sb.append("IHRyZWUgd2l0aG91dCBzdWJzY3JpcHRpb25zCiAgICAgIHJldHVybjsKICAgIH0KICAgIGZvciAodmFy");
    sb.append("IGtleSBpbiBkZWx0YSkgeyAvLyBmb3IgZWFjaCBiaXQgb2YgZGF0YSB3aXRoaW4gdGhlIHRyZWUKICAg");
    sb.append("ICAgdmFyIGVLZXkgPSAiIyIgKyBrZXk7IC8vIGNvbXB1dGUgdGhlIHNlY3JldCBkYXRhIHBhdGgKICAg");
    sb.append("ICAgdmFyIHByaW9yID0gdHJlZVtrZXldOyAvLyBmaW5kIHRoZSBwcmlvciBzdGF0ZSB3aXRoaW4gdGhl");
    sb.append("IHRyZWUKICAgICAgdmFyIG5leHQgPSBkZWx0YVtrZXldOyAvLyBicmluZyB0aGUgY2hhbmdlIHByZXNl");
    sb.append("bnQgZm9yIHRoZSBjdXJyZW50IGtleQogICAgICBpZiAobmV4dCA9PSBudWxsKSB7IC8vIHRoZSBpdGVt");
    sb.append("IGlzIGdvaW5nIHBvb2YKICAgICAgICAvLyB0aGUgcHJpb3IgdmFsdWUgaXMgYW4gYXJyYXksIHNvIHdl");
    sb.append("IG1heSBoYXZlIHNvbWUgc3BlY2lhbCB0aGluZ3MgYXNzb2NpYXRlIHdpdGggaXQKICAgICAgICBpZiAo");
    sb.append("QXJyYXkuaXNBcnJheShwcmlvcikpIHsgLy8gVU5URVNUCiAgICAgICAgICBpZiAoZUtleSBpbiB0cmVl");
    sb.append("KSB7CiAgICAgICAgICAgIGRlbChzdWIocywgZUtleSkpOwogICAgICAgICAgfQogICAgICAgICAgZGVs");
    sb.append("ZXRlIHRyZWVbZUtleV07CiAgICAgICAgfQogICAgICAgIGRlbChzdWIocywga2V5KSk7IC8vIGlzc3Vl");
    sb.append("IGEgZGVsZXRlIGZvciBhbGwgdGhlIHN1YnNjcmlwdGlvbnMgZm9yIHRoZSBraWQKICAgICAgICBkZWxl");
    sb.append("dGUgdHJlZVtrZXldOyAvLyBkZWxldGUgdGhlIGRhdGEgaW4gdGhlIHRyZWUKICAgICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgICBpZiAodHlwZW9mIChuZXh0KSA9PSAib2JqZWN0IiAmJiAhQXJyYXkuaXNBcnJheShuZXh0");
    sb.append("KSkgeyAvLyBpZiB0aGUgZGVsdGEgaXMgYW4gb2JqZWN0CiAgICAgICAgICB2YXIgYXJyID0gQXJyYXku");
    sb.append("aXNBcnJheShwcmlvcikgfHwgIkBvIiBpbiBuZXh0IHx8ICJAcyIgaW4gbmV4dDsgLy8gZGV0ZWN0IGlm");
    sb.append("IHdlIG5lZWQgdG8gdXNlIGFycmF5IGxvZ2ljCiAgICAgICAgICBpZiAoYXJyKSB7IC8vIHdlIGhhdmUg");
    sb.append("ZGV0ZWN0ZWQgYW4gYXJyYXkKICAgICAgICAgICAgaWYgKCEoa2V5IGluIHRyZWUpKSB7IC8vIGxldCdz");
    sb.append("IG1ha2Ugc3VyZSB0aGUgdHJlZSBoYXMgYW4gZW1wdHkgYXJyYXkKICAgICAgICAgICAgICB0cmVlW2tl");
    sb.append("eV0gPSBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIShlS2V5IGluIHRyZWUpKSB7IC8v");
    sb.append("IGxldCdzIG1ha2Ugc3VyZSB0aGUgc2VjcmV0IGRhdGEgZXhpc3RzIGFzIHdlbGwKICAgICAgICAgICAg");
    sb.append("ICB0cmVlW2VLZXldID0ge307CiAgICAgICAgICAgICAgaWYgKCJAbyIgaW4gbmV4dCkgeyAvLyBpZiB3");
    sb.append("ZSBoYXZlIGEgYnVuY2ggb2Yga2V5cywgdGhlbiBsZXQncyBtYWtlIHN1cmUgdG8gcHJlc2VydmUgdGhh");
    sb.append("dCBmb3IgbWFrZV9kZWx0YQogICAgICAgICAgICAgICAgdHJlZVtlS2V5XVsiQG8iXSA9IHRydWU7CiAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRyZWVbZUtleV0uX19rZXkgPSBrZXk7IC8vIGFubm90");
    sb.append("YXRlIHRoZSBuZXcgaXRlbSB3aXRoIHRoZSBnaXZlbiBrZXkKICAgICAgICAgICAgfQogICAgICAgICAg");
    sb.append("ICB2YXIgZUJhc2UgPSB0cmVlW2VLZXldOyAvLyBnZXQgdGhlIHNlY3JldCAoYW5kIHJlYWwpIGRhdGEg");
    sb.append("Zm9yIHRoZSBvYmplY3QgaW4gcXVlc3Rpb24KICAgICAgICAgICAgdmFyIGVTdWIgPSBzdWIocywga2V5");
    sb.append("KTsgLy8gc2NvcGUgdGhlIHN1YnNjcmlwdGlvbiB0byB0aGUga2V5CiAgICAgICAgICAgIHZhciBvcmRl");
    sb.append("cmluZyA9IG51bGw7IC8vIGRldGVjdGlvbiBvZiBpZiB3ZSBoYXZlIEBvIG9yZGVyaW5nIHRvIHJlb3Jk");
    sb.append("ZXIgdGhlIHZhbHVlcwogICAgICAgICAgICB2YXIgcmVzaXplID0gbnVsbDsgLy8gZGV0ZWN0aW9uIG9m");
    sb.append("IGFuIGFycmF5IHdpdGhvdXQgX19rZXkKICAgICAgICAgICAgdmFyIGRlbGF5ID0ge307IC8vIHdlIGRl");
    sb.append("bGF5IGFsbCBldmVudHMgc3VjaCB0aGF0IHRoZSBhcnJheSBjYW4gYmUgYnVpbHQgZm9yIGlubGluZSBt");
    sb.append("YWtlX2RlbHRhIGNhbGxzIHRvIHdvcmsKICAgICAgICAgICAgZm9yICh2YXIgYUtleSBpbiBuZXh0KSB7");
    sb.append("IC8vIGZvciBlYWNoIGZpZWxkIHdpdGhpbiB0aGUgZGlmZmVyZW5jZQogICAgICAgICAgICAgIHZhciB2");
    sb.append("YWwgPSBuZXh0W2FLZXldOwogICAgICAgICAgICAgIGlmIChhS2V5ID09ICJAbyIpIHsgLy8gdGhlIHZh");
    sb.append("bHVlIGlzIGEgbmV3IG9yZGVyaW5nIG9mIHRoZSBhcnJheQogICAgICAgICAgICAgICAgb3JkZXJpbmcg");
    sb.append("PSB2YWw7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhS2V5ID09ICJAcyIpIHsgLy8gdGhlIHZhbHVl");
    sb.append("IGlzIGEgcmVzaXplIG9mIHRoZSBhcnJheQogICAgICAgICAgICAgICAgcmVzaXplID0gdmFsOwogICAg");
    sb.append("ICAgICAgICAgIH0gZWxzZSBpZiAodmFsID09IG51bGwpIHsgLy8gZGVsZXRlIHRoZSBlbGVtZW50CiAg");
    sb.append("ICAgICAgICAgICAgICBpZiAoYUtleSBpbiBlQmFzZSkgeyAvLyBpZiBpdCBleGlzdHMgd2l0aGluIHRo");
    sb.append("ZSBzZWNyZXQga2V5CiAgICAgICAgICAgICAgICAgIGRlbGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsK");
    sb.append("ICAgICAgICAgICAgICAgICAgICBkZWwoc3ViKGVTdWIsIHgpKTsgLy8gaXNzdWUgZGVsZXRlcwogICAg");
    sb.append("ICAgICAgICAgICAgICAgIGRlbGV0ZSBlQmFzZVt4XTsgLy8gZGVsZXRlIHRoZSB2YWx1ZQogICAgICAg");
    sb.append("ICAgICAgICAgICAgIGRlbF9rZXkoZVN1YiwgeCk7IC8vIGRlbGV0ZSB0aGUga2V5cyBmcm9tIHRoZSBv");
    sb.append("YmplY3QKICAgICAgICAgICAgICAgICAgICBmaXJlX2RlbChlU3ViLCB4KTsKICAgICAgICAgICAgICAg");
    sb.append("ICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgeyAvLyB3ZSBoYXZlIGRh");
    sb.append("dGEKICAgICAgICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRoZSBkYXRhIGRpZG4n");
    sb.append("dCBleGlzdCwgc28gZmlyZSBhbiBhZGRpdGlvbiB0byBleHRlbmQgdGhlIHN1YnNjcmlwdGlvbnMKICAg");
    sb.append("ICAgICAgICAgICAgICAgZmlyZV9hZGQoZVN1YiwgYUtleSk7CiAgICAgICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICAgICAgICB2YXIgblZhbCA9IG5leHRbYUtleV07IC8vIGdldCB0aGUgbmV3IHZhbHVlCiAgICAg");
    sb.append("ICAgICAgICAgICBpZiAodHlwZW9mIChuVmFsKSA9PSAib2JqZWN0IikgeyAvLyBpZiB0aGUgbmV3IHZh");
    sb.append("bHVlIGlzIGFuIG9iamVjdAogICAgICAgICAgICAgICAgICBpZiAoIShhS2V5IGluIGVCYXNlKSkgeyAv");
    sb.append("LyB0aGVuIG1ha2Ugc3VyZSB0aGUgbmV3IGl0ZW0gaXMgd2l0aGluIHRoZSBzZWNyZXQgdHJlZQogICAg");
    sb.append("ICAgICAgICAgICAgICAgIGVCYXNlW2FLZXldID0ge307CiAgICAgICAgICAgICAgICAgICAgZUJhc2Vb");
    sb.append("YUtleV0uX19rZXkgPSBhS2V5OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGRl");
    sb.append("bGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAgICAgICBtZXJnZShlQmFzZVt4");
    sb.append("XSwgbmV4dFt4XSwgc3ViKGVTdWIsIHgpLCBldmVudHMsIG9wdGltYWwpOyAvLyByZWN1cnNlOiBtZXJn");
    sb.append("ZSB0aGUgZGlmZmVyZW5jZSBpbnRvIHRoZSBzZWNyZXQgdHJlZSBhbmQgcHVibGlzaCB0byBhbGwgZWxl");
    sb.append("bWVudCBzdWJzY3JpcHRpb25zCiAgICAgICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgeCksIGVC");
    sb.append("YXNlW3hdLCBldmVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSBlbHNl");
    sb.append("IHsgLy8gb3RoZXJ3aXNlLCBzZXQgdGhlIHZhbHVlIGludG8gdGhlIHRyZWUKICAgICAgICAgICAgICAg");
    sb.append("ICAgZUJhc2VbYUtleV0gPSBuVmFsOwogICAgICAgICAgICAgICAgICBkZWxheVthS2V5XSA9IGZ1bmN0");
    sb.append("aW9uICh4KSB7CiAgICAgICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgeCksIGVCYXNlW3hdLCBl");
    sb.append("dmVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg");
    sb.append("ICAgLy8gYW5kIHRlbGwgZXZlcnlvbmUgdGhlIG5ldyB2YWx1ZSBmb3IgdGhpcwogICAgICAgICAgICAg");
    sb.append("IH0KICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgYmVmb3JlID0gdHJlZVtrZXldOyAvLyBzdGFz");
    sb.append("aCBhIHBvaW50ZXIgdG8gdGhlIGFycmF5CiAgICAgICAgICAgIHZhciBkZWxheU9yZGVyID0gW107Cgog");
    sb.append("ICAgICAgICAgICBpZiAob3JkZXJpbmcgIT0gbnVsbCkgeyAvLyBhbiBvcmRlcmluZyBjaGFuZ2UgaXMg");
    sb.append("aGFwcGVuaW5nCiAgICAgICAgICAgICAgdmFyIGFmdGVyID0gW107IC8vIHdlIHdpbGwgcmVidWlsZCB0");
    sb.append("aGUgYXJyYXkgaGVyZQogICAgICAgICAgICAgIHZhciBtc2cgPSBbXTsgLy8gYW5kIHJlY29yZCB0aGUg");
    sb.append("a2V5cyBoZXJlCiAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBvcmRlcmluZy5sZW5ndGg7");
    sb.append("IGsrKykgeyAvLyBmb3IgZWFjaCBvcmRlcmluZyBpbnN0cnVjdGlvbgogICAgICAgICAgICAgICAgdmFy");
    sb.append("IGluc3RyID0gb3JkZXJpbmdba107CiAgICAgICAgICAgICAgICB2YXIgdHlwZV9pbnN0ciA9IHR5cGVv");
    sb.append("ZiAoaW5zdHIpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVfaW5zdHIgPT0gInN0cmluZyIgfHwgdHlw");
    sb.append("ZV9pbnN0ciA9PSAibnVtYmVyIikgeyAvLyBpZiB0aGUgaW5zdHJ1Y3Rpb24gcmVmZXJzIHRvIGFuIGl0");
    sb.append("ZW0KICAgICAgICAgICAgICAgICAgYWZ0ZXIucHVzaChlQmFzZVtpbnN0cl0pOyAvLyBwdXNoIHRoZSBp");
    sb.append("dGVtIGludG8gdGhlIG5ldyBhcnJheQogICAgICAgICAgICAgICAgICBtc2cucHVzaCgiIiArIGluc3Ry");
    sb.append("KTsgLy8gcmVjb3JkIHRoZSBrZXkgb2YgdGhlIGl0ZW0KICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8v");
    sb.append("IG90aGVyd2lzZSwgdGhlIGluc3RydWN0aW9uIGlzIGEgcmFuZ2UKICAgICAgICAgICAgICAgICAgdmFy");
    sb.append("IHN0YXJ0ID0gaW5zdHJbMF07CiAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBpbnN0clsxXTsKICAg");
    sb.append("ICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IHN0YXJ0OyBqIDw9IGVuZDsgaisrKSB7IC8vIGl0ZXJh");
    sb.append("dGUgb3ZlciB0aGUgcmFuZ2UgYW5kIGNvcHkKICAgICAgICAgICAgICAgICAgICBpZiAoYmVmb3JlW2pd");
    sb.append("KSB7CiAgICAgICAgICAgICAgICAgICAgICBhZnRlci5wdXNoKGJlZm9yZVtqXSk7IC8vIHRoZSBpdGVt");
    sb.append("cyBmcm9tIHRoZSBwcmV2aW91cyBjb3B5CiAgICAgICAgICAgICAgICAgICAgICBtc2cucHVzaChiZWZv");
    sb.append("cmVbal0uX19rZXkpOyAvLyBhbmQgYW5ub3RhdGUgdGhlIGtleXMKICAgICAgICAgICAgICAgICAgICB9");
    sb.append("CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICAgICAgZGVsYXlPcmRlci5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGZpcmUo");
    sb.append("c3ViKGVTdWIsICJ+IiksIG1zZywgZXZlbnRzKTsgLy8gdGVsbCBzdWJzY3JpcHRpb25zIGFib3V0IHRo");
    sb.append("ZSBuZXcgb3JkZXJpbmcKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0cmVlW2tleV0gPSBh");
    sb.append("ZnRlcjsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNpemUgIT0gbnVsbCkgeyAvLyBhbHRlcm5hdGl2");
    sb.append("ZWx5LCBhbiBhcnJheSB3aXRob3V0IGtleXMgaXMgYmVpbmcgcmVzaXplZAogICAgICAgICAgICAgIHZh");
    sb.append("ciBhZnRlciA9IFtdOwogICAgICAgICAgICAgIHZhciBtc2cgPSBbXTsKICAgICAgICAgICAgICBmb3Ig");
    sb.append("KHZhciBrID0gMDsgayA8IHJlc2l6ZTsgaysrKSB7IC8vIHdlIHJlYnVpbGQgdGhlIGFycmF5CiAgICAg");
    sb.append("ICAgICAgICAgICBhZnRlcltrXSA9IGVCYXNlWyIiICsga107CiAgICAgICAgICAgICAgICBtc2cucHVz");
    sb.append("aCgiIiArIGspOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWxheU9yZGVyLnB1c2goZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgIn4iKSwgbXNnLCBldmVudHMp");
    sb.append("OyAvLyB0ZWxsIHN1YnNjcmlwdGlvbnMgYWJvdXQgdGhlIG5ldyBvcmRlcmluZwogICAgICAgICAgICAg");
    sb.append("IH0pOwogICAgICAgICAgICAgIHRyZWVba2V5XSA9IGFmdGVyOwogICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIGZvciAoYUtleSBpbiBkZWxheSkgewogICAgICAgICAgICAgIGRlbGF5W2FLZXldKGFLZXkpOwog");
    sb.append("ICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZGVsYXlPcmRlci5sZW5n");
    sb.append("dGg7IGsrKykgewogICAgICAgICAgICAgIGRlbGF5T3JkZXJba10oKTsKICAgICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgICBmaXJlKGVTdWIsIHRyZWVba2V5XSwgZXZlbnRzKTsgLy8gdGVsbCBldmVyeW9uZSBhYm91");
    sb.append("dCB0aGUgbmV3IHZhbHVlCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIShrZXkgaW4g");
    sb.append("dHJlZSkgfHwgdHlwZW9mICh0cmVlW2tleV0pICE9ICJvYmplY3QiKSB7CiAgICAgICAgICAgICAgdHJl");
    sb.append("ZVtrZXldID0ge307CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGUgPSBzdWIocywga2V5KTsK");
    sb.append("ICAgICAgICAgICAgbWVyZ2UodHJlZVtrZXldLCBuZXh0LCBlLCBldmVudHMsIG9wdGltYWwpOwogICAg");
    sb.append("ICAgICAgICBmaXJlKGUsIHRyZWVba2V5XSwgZXZlbnRzKTsKICAgICAgICAgIH0KICAgICAgICB9IGVs");
    sb.append("c2UgeyAvLyBub3QgYW4gb2JqZWN0LCBzbyBpdCBpcyBhIHZhbHVlCiAgICAgICAgICB0cmVlW2tleV0g");
    sb.append("PSBuZXh0OyAvLyBzdGFzaCB0aGUgbmV3IHZhbHVlCiAgICAgICAgICBmaXJlKHN1YihzLCBrZXkpLCBu");
    sb.append("ZXh0LCBldmVudHMpOyAvLyBhbmQgdGVsbCBldmVyeW9uZSBhYm91dCBpdAogICAgICAgIH0KICAgICAg");
    sb.append("fQogICAgfQogICAgZmlyZShzLCB0cmVlLCBldmVudHMpOwogIH07CgogIHZhciBmaXJlX2V2ZW50cyA9");
    sb.append("IGZ1bmN0aW9uIChldmVudHMpIHsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZlbnRzLmxlbmd0aDsg");
    sb.append("aysrKSB7CiAgICAgIGV2ZW50c1trXSgpOwogICAgfQogIH07CgogIHRoaXMudXBkYXRlX2luX3Byb2dy");
    sb.append("ZXNzID0gZmFsc2U7CiAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoZGVsdGEpIHsKICAgIHRoaXMudXBk");
    sb.append("YXRlX2luX3Byb2dyZXNzID0gdHJ1ZTsKICAgIHZhciBhcnIgPSBbXTsgLy8gY29udmVydCB0aGUgc3Vi");
    sb.append("c2NyaXB0aW9ucyBpbnRvIGFuIGFycmF5CiAgICBmb3IgKHZhciBrIGluIGFsbF9zdWJzY3JpcHRpb25z");
    sb.append("KSB7CiAgICAgIGFyci5wdXNoKGFsbF9zdWJzY3JpcHRpb25zW2tdKTsKICAgIH0KICAgIHZhciBldmVu");
    sb.append("dHMgPSBbXTsKICAgIG1lcmdlKHJvb3QsIGRlbHRhLCBhcnIsIGV2ZW50cywgZmFsc2UpOyAvLyBleGVj");
    sb.append("dXRlIHRoZSBtZXJnZSBhbmQgZmlyZSBldmVudHMKICAgIGZpcmVfZXZlbnRzKGV2ZW50cyk7CiAgICB3");
    sb.append("aGlsZSAodGhpcy5zdWJzY3JpYmVfZGVsYXkubGVuZ3RoID4gMCkgewogICAgICB2YXIgY29weSA9IHRo");
    sb.append("aXMuc3Vic2NyaWJlX2RlbGF5OwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxheSA9IFtdOwogICAgICB2");
    sb.append("YXIgZmxhdCA9IFtdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNvcHkubGVuZ3RoOyBrKyspIHsK");
    sb.append("ICAgICAgICBpZiAoIWNvcHlba10uYWJvcnRlZCkgewogICAgICAgICAgZmxhdC5wdXNoKGNvcHlba10u");
    sb.append("c3ViKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZXZlbnRzID0gW107CiAgICAgIG1lcmdlKHt9LCBt");
    sb.append("YWtlX29wdGltYWxfZGVsdGEocm9vdCwgZmxhdCksIGZsYXQsIGV2ZW50cywgdHJ1ZSk7IC8vIGV4ZWN1");
    sb.append("dGUgdGhlIG1lcmdlIGFuZCBmaXJlIGV2ZW50cwogICAgICBmaXJlX2V2ZW50cyhldmVudHMpOwogICAg");
    sb.append("fQogICAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICB9OwoKICAvLyBmaXggdGhlIGNh");
    sb.append("bGxiYWNrIHN0cnVjdHVyZSBmcm9tIHRoZSB1c2VyJ3MgaGFwcHkgbGFuZCB0byB0aGUgcmlnb3Igb2Yg");
    sb.append("dGhlIGZvcm1hdCBuZWVkZWQKICB2YXIgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViID0gZnVuY3Rp");
    sb.append("b24gKGNhbGxiYWNrLCBzdWIpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrKSkgeyAvLyBp");
    sb.append("ZiB0aGUgY2FsbGJhY2sgaXMgYW4gYXJyYXksIHRoZW4gZmxhdHRlbiB0aGUgYXJyYXkgaW50byB0aGUg");
    sb.append("bmV3IG9iamVjdAogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhbGxiYWNrLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViKGNhbGxiYWNrW2tdLCBzdWIpOwogICAg");
    sb.append("ICB9CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09ICJvYmplY3QiKSB7IC8vIG9oLCB0");
    sb.append("aGUgY2FsbGJhY2sgaXMgYW4gb2JqZWN0CiAgICAgIGZvciAodmFyIGtleSBpbiBjYWxsYmFjaykgeyAv");
    sb.append("LyBpdGVyYXRlIG92ZXIgZWFjaCBrZXkKICAgICAgICBpZiAoa2V5ID09ICJAZSIpIHsgLy8gZm9yY2Ug");
    sb.append("dGhlIGZ1bmN0aW9ucyB0byBtZXJnZSB0b2dldGhlcgogICAgICAgICAgdHJhbnNmb3JtX2NhbGxiYWNr");
    sb.append("X2ludG9fc3ViKGNhbGxiYWNrW2tleV0sIHN1Yik7CiAgICAgICAgfSBlbHNlIHsgLy8gbm9ybWFsIGZs");
    sb.append("b3cKICAgICAgICAgIGlmICghKGtleSBpbiBzdWIpKSB7IC8vIGRpdmUgaW50byB0aGUgb2JqZWN0IGFu");
    sb.append("ZCBtYWtlIHN1cmUgdGhlIHN1YnNjcmlwdGlvbiBoYXMgdGhlIGZpZWxkCiAgICAgICAgICAgIHN1Yltr");
    sb.append("ZXldID0ge307CiAgICAgICAgICB9CiAgICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIo");
    sb.append("Y2FsbGJhY2tba2V5XSwgc3ViW2tleV0pOyAvLyByZWN1cnNlIGFuZCBwYWlyIHRoZSBldmVudHMgdG8g");
    sb.append("dGhlIG5ldyBzdWJzY3JpcHRpb24KICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9m");
    sb.append("IChjYWxsYmFjaykgPT0gImZ1bmN0aW9uIikgeyAvLyBpdCdzIGEgZnVuY3Rpb24KICAgICAgaWYgKCEo");
    sb.append("IkBlIiBpbiBzdWIpKSB7IC8vIGxldCdzIGVuc3VyZSB0aGVyZSBpcyBhbiBldmVudCBsaXN0CiAgICAg");
    sb.append("ICAgc3ViWyJAZSJdID0gW2NhbGxiYWNrXTsKICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCBqdXN0");
    sb.append("IGFkZCBpdAogICAgICAgIHN1YlsiQGUiXS5wdXNoKGNhbGxiYWNrKTsKICAgICAgfQogICAgfQogIH07");
    sb.append("CgogIC8vIGNvbnZlcnQgdGhlIHRyZWUgdG8gYSBkZWx0YTsgdGhpcyB0cmVlIGlzIGFzc3VtZWQgdG8g");
    sb.append("aGF2ZSBiZWVuIG1lcmdlZCBhbHJlYWR5CiAgdmFyIG1ha2VfZGVsdGEgPSBmdW5jdGlvbiAoc3QpIHsK");
    sb.append("ICAgIHZhciBkZWx0YSA9IHt9OyAvLyB0aGUgZGVsdGEgdG8gY29uc3RydWN0CiAgICBmb3IgKHZhciBr");
    sb.append("IGluIHN0KSB7IC8vIGZvciBlYWNoIGtleSB3aXRoaW4gdGhlIG9iamVjdAogICAgICBpZiAoa1swXSA9");
    sb.append("PSAiIyIgfHwgayA9PSAiQG8iIHx8IGsgPT0gIl9fa2V5IikgY29udGludWU7IC8vIHNraXAgdGhlc2UK");
    sb.append("ICAgICAgdmFyIHYgPSBzdFtrXTsKICAgICAgaWYgKCgiIyIgKyBrKSBpbiBzdCkgeyAvLyB0aGUgcmVz");
    sb.append("dWx0IGlzIGFuIGFycmF5CiAgICAgICAgdmFyIHB2ID0gc3RbJyMnICsga107CiAgICAgICAgdmFyIGQg");
    sb.append("PSB7fTsKICAgICAgICBpZiAoIkBvIiBpbiBwdikgeyAvLyBhbmQgd2UgaGF2ZSBhIHNwZWNpZmljIG9y");
    sb.append("ZGVyaW5nIHRvIG1lbW9pemUKICAgICAgICAgIHZhciBvID0gW107CiAgICAgICAgICBmb3IgKHZhciBq");
    sb.append("ID0gMDsgaiA8IHYubGVuZ3RoOyBqKyspIHsgLy8gY29weSB0aGUgZWxlbWVudHMgZnJvbSB0aGUgYXJy");
    sb.append("YXkKICAgICAgICAgICAgdmFyIHZqID0gdltqXTsKICAgICAgICAgICAgaWYgKHZqKSB7CiAgICAgICAg");
    sb.append("ICAgICAgZFt2ai5fX2tleV0gPSBtYWtlX2RlbHRhKHZqKTsgLy8gdXNpbmcgdGhlIF9fa2V5IGVtYmVk");
    sb.append("ZGVkIGluIHRoZSBvYmplY3QKICAgICAgICAgICAgICBvLnB1c2godltqXS5fX2tleSk7CiAgICAgICAg");
    sb.append("ICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGRbIkBvIl0gPSBvOwogICAgICAgIH0gZWxzZSB7IC8v");
    sb.append("IG90aGVyd2lzZTsgcmVjb3JkIHRoZSBzaXplIGFzIHdlIHJlY3Vyc2UKICAgICAgICAgIGZvciAodmFy");
    sb.append("IGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgewogICAgICAgICAgICBkWyIiICsgal0gPSBtYWtlX2Rl");
    sb.append("bHRhKHB2W2pdKTsKICAgICAgICAgIH0KICAgICAgICAgIGRbIkBzIl0gPSB2Lmxlbmd0aDsKICAgICAg");
    sb.append("ICB9CiAgICAgICAgZGVsdGFba10gPSBkOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiAodikgPT0gIm9i");
    sb.append("amVjdCIpIHsgLy8gaXQncyBqdXN0IGFuIG9iamVjdCwgc28gcmVjdXJzZSBkaXJlY3RseQogICAgICAg");
    sb.append("IGRlbHRhW2tdID0gbWFrZV9kZWx0YSh2KTsKICAgICAgfSBlbHNlIHsgLy8gZmluYWxseSwgaXQgaXMg");
    sb.append("YSB2YWx1ZSBzbyBqdXN0IHNldCBpdAogICAgICAgIGRlbHRhW2tdID0gdjsKICAgICAgfQogICAgfQog");
    sb.append("ICAgcmV0dXJuIGRlbHRhOwogIH07CgogIHZhciBtYWtlX29wdGltYWxfZGVsdGEgPSBmdW5jdGlvbihz");
    sb.append("dCwgc3VicykgewogICAgdmFyIGZpbHRlciA9IHt9OwogICAgZm9yICh2YXIgayA9IDA7IGsgPCBzdWJz");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgIHZhciBzID0gc3Vic1trXTsKICAgICAgaWYgKHR5cGVvZihzKSA9");
    sb.append("PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgLy8gZmFsbGJhY2sgd2hlbiB0aGUgaGlnaCBsZXZlbCBpcyBh");
    sb.append("IGZ1bmN0aW9uICh3ZSBuZWVkIGl0IGFsbCEpCiAgICAgICAgcmV0dXJuIG1ha2VfZGVsdGEoc3QpOwog");
    sb.append("ICAgICB9IGVsc2UgaWYgKHR5cGVvZihzKSA9PSAib2JqZWN0IikgewogICAgICAgIGZvciAodmFyIGog");
    sb.append("aW4gcykgewogICAgICAgICAgZmlsdGVyW2pdID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0K");
    sb.append("ICAgIHZhciBuZXdfc3QgPSB7fTsgLy8gdGhlIGRlbHRhIHRvIGNvbnN0cnVjdAogICAgZm9yICh2YXIg");
    sb.append("ayBpbiBzdCkgeyAvLyBmb3IgZWFjaCBrZXkgd2l0aGluIHRoZSBvYmplY3QKICAgICAgaWYgKGtbMF0g");
    sb.append("PT0gIiMiIHx8IGsgPT0gIkBvIiB8fCBrID09ICJfX2tleSIpIGNvbnRpbnVlOyAvLyBza2lwIHRoZXNl");
    sb.append("CiAgICAgIGlmIChrIGluIGZpbHRlcikgewogICAgICAgIG5ld19zdFtrXSA9IHN0W2tdOwogICAgICAg");
    sb.append("IGlmICgoIiMiICsgaykgaW4gc3QpIHsKICAgICAgICAgIG5ld19zdFsiIyIgKyBrXSA9IHN0WyIjIiAr");
    sb.append("IGtdOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG1ha2VfZGVsdGEobmV3X3N0KTsK");
    sb.append("ICB9OwoKICB0aGlzLnN1YnNjcmliZV9kZWxheSA9IFtdOwoKICAvLyBgc3Vic2NyaWJlYCB0aGUgZ2l2");
    sb.append("ZW4gc3RydWN0dXJhbCBjYWxsYmFjawogIHRoaXMuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGNhbGxiYWNr");
    sb.append("KSB7CiAgICB2YXIgc3ViID0ge307CiAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIoY2FsbGJh");
    sb.append("Y2ssIHN1Yik7ICAvLyB0cmFuc2Zvcm0gdGhlIGNhbGxiYWNrIGludG8gYSBzYWZlIGNhbGxiYWNrCiAg");
    sb.append("ICB2YXIgUyA9ICIiICsgaWQrKzsgLy8gY3JlYXRlIGFuIGlkIGZvciB0aGUgc3Vic2NyaXB0aW9uCiAg");
    sb.append("ICBhbGxfc3Vic2NyaXB0aW9uc1tTXSA9IHN1YjsgLy8gcmVjb3JkIHRoZSBzdWJzY3JpcHRpb24KICAg");
    sb.append("IGlmICh0aGlzLnVwZGF0ZV9pbl9wcm9ncmVzcykgewogICAgICB2YXIgc20gPSB7fTsKICAgICAgc20u");
    sb.append("c3ViID0gc3ViOwogICAgICBzbS5hYm9ydGVkID0gZmFsc2U7CiAgICAgIHRoaXMuc3Vic2NyaWJlX2Rl");
    sb.append("bGF5LnB1c2goc20pOwogICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgc20uYWJvcnRlZCA9");
    sb.append("IHRydWU7CiAgICAgICAgZGVsZXRlIGFsbF9zdWJzY3JpcHRpb25zW1NdOwogICAgICB9OwogICAgfSBl");
    sb.append("bHNlIHsKICAgICAgdmFyIGRlbHRhID0gbWFrZV9vcHRpbWFsX2RlbHRhKHJvb3QsIFtzdWJdKTsKICAg");
    sb.append("ICAgdmFyIGV2ZW50cyA9IFtdOwogICAgICBtZXJnZSh7fSwgZGVsdGEsIFtzdWJdLCBldmVudHMsIHRy");
    sb.append("dWUpOyAvLyBleGVjdXRlIHRoZSBjYWxsYmFjayBub3cgb24gYSBjYWxsYmFjayBvZiBhbGwgZGF0YSB0");
    sb.append("byBmaXJlIGV2ZW50cyBhbmQgZmlsbCB0aGUgc3Vic2NyaXB0aW9uIG9iamVjdAogICAgICBmaXJlX2V2");
    sb.append("ZW50cyhldmVudHMpOwogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyAvLyByZXR1cm4gYSBtZXRob2Qg");
    sb.append("dG8gdW5zdWJzY3JpYmUKICAgICAgICBkZWxldGUgYWxsX3N1YnNjcmlwdGlvbnNbU107CiAgICAgIH07");
    sb.append("CiAgICB9CiAgfTsKfQ==");
    return sb.toString();
  }
  public static final String DEBUGGER = new String(Base64.getDecoder().decode(make_debugger()), StandardCharsets.UTF_8);
  private static String make_debugger() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIFRoZSBBbWF6aW5nIEludGVybmFsIERlYnVnZ2VyIGZvciBSeEhUTUwgQ29ubmVjdGlvbiAqLwpB");
    sb.append("ZGFtYS5EZWJ1Z2dlciA9IChmdW5jdGlvbigpIHsKICB2YXIgc2VsZiA9IHt9OwogIHNlbGYuc2hvd24g");
    sb.append("PSBmYWxzZTsKICB2YXIgY29ubmVjdGlvbnMgPSB7fTsKICB2YXIgY3VycmVudCA9IG51bGw7CgogIC8q");
    sb.append("KiBIZWxwZXIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCAqLwogIHZhciBudWtl");
    sb.append("ID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAg");
    sb.append("d2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0g");
    sb.append("cGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwoKICAvKiogSGVscGVyIHwgY3JlYXRlIGEgc2ltcGxl");
    sb.append("IGVsZW1lbnQgd2l0aCB0aGUgZ2l2ZW4gY29udGVudCBhcyB0aGUgaW5uZXJIVE1MICovCiAgdmFyIHNp");
    sb.append("bXBsZSA9IGZ1bmN0aW9uKHRhZywgY29udGVudCkgewogICAgdmFyIGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KHRhZyk7CiAgICBkLmlubmVySFRNTCA9IGNvbnRlbnQ7CiAgICByZXR1cm4gZDsKICB9Cgog");
    sb.append("IHZhciBidXR0b25TdHlsZSA9ICJiYWNrZ3JvdW5kOiMzMzM7IGJvcmRlcjogMXB4IHNvbGlkICNmMDA7");
    sb.append("IGNvbG9yOiNmZmY7IHBhZGRpbmc6M3B4OyBtYXJnaW46M3B4OyBib3JkZXItcmFkaXVzOiAzcHg7IjsK");
    sb.append("ICB2YXIgaW5wdXRTdHlsZSA9ICJiYWNrZ3JvdW5kOiNlZWU7IGNvbG9yOiMwMDA7IjsKICB2YXIgcGx1");
    sb.append("c1NWRyA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9u");
    sb.append("ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjNzdk");
    sb.append("NjU2XCIgc3R5bGU9XCJ3aWR0aDoxOHB4OyBoZWlnaHQ6MThweDtcIj48cGF0aCBzdHJva2UtbGluZWNh");
    sb.append("cD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTEyIDl2Nm0zLTNIOW0xMiAw");
    sb.append("YTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+PC9zdmc+IjsKICB2YXIgbWludXNTVkcgPSAi");
    sb.append("PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3");
    sb.append("Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2YwMFwiIHN0eWxl");
    sb.append("PVwid2lkdGg6MThweDsgaGVpZ2h0OjE4cHg7XCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwi");
    sb.append("IHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk0xNSAxMkg5bTEyIDBhOSA5IDAgMTEtMTggMCA5");
    sb.append("IDkgMCAwMTE4IDB6XCIgLz48L3N2Zz4iOwoKICAvLyB3ZSBhcmUgZ29pbmcgdG8gY3JlYXRlIGEgZG9j");
    sb.append("dW1lbnQKICB2YXIgdmlld0pzb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICB2YXIg");
    sb.append("dmlld0NoYW5uZWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgogIHZpZXdKc29uLnN0");
    sb.append("eWxlID0gImZvbnQtZmFtaWx5OiBcIkpldEJyYWlucyBNb25vXCIsIHNvdXJjZS1jb2RlLXBybywgTWVu");
    sb.append("bG8sIE1vbmFjbywgQ29uc29sYXMsIG1vbm9zcGFjZTsgZm9udC1zaXplOiAxNHB4OyBjb2xvcjogI2Zm");
    sb.append("ZjsgYmFja2dyb3VuZC1jb2xvcjogIzAwMDsgd2lkdGg6MTAwJSIKICB2aWV3Q2hhbm5lbHMuc3R5bGUg");
    sb.append("PSAiZm9udC1mYW1pbHk6IFwiSmV0QnJhaW5zIE1vbm9cIiwgc291cmNlLWNvZGUtcHJvLCBNZW5sbywg");
    sb.append("TW9uYWNvLCBDb25zb2xhcywgbW9ub3NwYWNlOyBmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjZmZmOyBi");
    sb.append("YWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB3aWR0aDoxMDAlIgoKICAvKiogUmVmbGVjdGlvbiB8IGdpdmVu");
    sb.append("IGEgcmVmbGVjdGVkIHR5cGUsIGV4dHJhY3QgdGhlIHN0cnVjdHVyZSB0eXBlICoqLwogIHZhciBleHRy");
    sb.append("YWN0U3RydWN0dXJlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIHR5cGVzKSB7CiAgICBpZiAodHlwZS5uYXR1");
    sb.append("cmUgPT0gInJlYWN0aXZlX3JlZiIgfHwgdHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV9yZWYiKSB7CiAgICAg");
    sb.append("IHJldHVybiBleHRyYWN0U3RydWN0dXJlVHlwZSh0eXBlc1t0eXBlLnJlZl0sIHR5cGVzKTsKICAgIH0K");
    sb.append("ICAgIGlmICh0eXBlLm5hdHVyZSA9PSAicmVhY3RpdmVfcmVjb3JkIiB8fCB0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIHJldHVybiB0eXBlOwogICAgfQogICAgcmV0dXJuIG51bGw7");
    sb.append("CiAgfQoKICAvKiogVHJlZVZpZXcgfCBHaXZlbiBhIHR5cGUgKGFuZCBhIHR5cGUgZm9yZXN0KSBjcmVh");
    sb.append("dGUgYSAnbmFtZWQnIGRvbSBlbGVtZW50CiAgICogIGFsb25nIHdpdGggYW4gdXBkYXRlIGRlbHRhLiBU");
    sb.append("aGUgdXBkYXRlIGRlbHRhIGlzIGEgZnVuY3Rpb25hbCAob3Igc3RydWN0dXJhbCBmdW5jdGlvbmFsKQog");
    sb.append("ICAqICBjbG9zdXJlIHRoYXQgd2lsbCB1cGRhdGUgdGhlIGRvbSBlbGVtZW50IHN1Y2ggdGhhdCBpdCBj");
    sb.append("YW4gYmUgYXR0YWNoZWQgdG8gYW4gQWRhbWEgVHJlZSAqLwogIHZhciBjb252ZXJ0VHlwZVRvRG9tRGVs");
    sb.append("dGEgPSBmdW5jdGlvbih0eXBlLCB0eXBlcykgewogICAgaWYgKHR5cGUubmF0dXJlID09ICJyZWFjdGl2");
    sb.append("ZV9yZWYiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfcmVmIikgewogICAgICAvLyBnbyB0byB0aGUg");
    sb.append("Zm9yZXN0IGFuZCB0dXJuIHRoZSByZWYgaW50byBhIG1hbmlmZXN0ZWQgdHlwZQogICAgICByZXR1cm4g");
    sb.append("Y29udmVydFR5cGVUb0RvbURlbHRhKHR5cGVzW3R5cGUucmVmXSwgdHlwZXMpOwogICAgfQogICAgaWYg");
    sb.append("KHR5cGUubmF0dXJlID09ICJuYXRpdmVfbWF5YmUiIHx8IHR5cGUubmF0dXJlID09ICJyZWFjdGl2ZV9t");
    sb.append("YXliZSIpIHsKICAgICAgLy8gYSBtYXliZSBpcyBqdXN0IGEgd3JhcHBlciBhcm91bmQgYW5vdGhlciB0");
    sb.append("eXBlIHRoYXQgY2FuIG51bGwgb3V0CiAgICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJzcGFuIik7CiAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZS50eXBl");
    sb.append("LCB0eXBlcyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOiBkb20sCiAgICAgICAgbmFtZTogIm1h");
    sb.append("eWJlJmx0OyIgKyByZXN1bHQubmFtZSArICImZ3Q7IiwKICAgICAgICB1cGRhdGU6IFtyZXN1bHQudXBk");
    sb.append("YXRlLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgbnVrZShkb20pOwogICAgICAgICAgaWYgKHZh");
    sb.append("bHVlID09IG51bGwpIHsKICAgICAgICAgICAgZG9tLmlubmVySFRNTCA9ICI8aT5udWxsPC9pPiI7CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb20uYXBwZW5kKHJlc3VsdC5kb20pOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH1dCiAgICAgIH07CiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0gIm5hdGl2");
    sb.append("ZV9saXN0IiB8fCB0eXBlLm5hdHVyZSA9PSAibmF0aXZlX2FycmF5IikgewogICAgICAvLyB0aGlzIGlz");
    sb.append("IHRoZSBtb3N0IGNvbXBsZXggdHlwZSBhcyBpdCByZXF1aXJlcyBhIGRpZmZlcmVudGlhbCBzdHJ1Y3R1");
    sb.append("cmUuCgogICAgICAvLyB3ZSBjcmVhdGUgYSBkdW1teSB0byBnZXQgdGhlIG5hbWUgb2YgdGhlIHR5cGUK");
    sb.append("ICAgICAgdmFyIGR1bW15ID0gY29udmVydFR5cGVUb0RvbURlbHRhKHR5cGUudHlwZSwgdHlwZXMpOwoK");
    sb.append("ICAgICAgLy8gc28sIHdlIGhhdmUgdHdvIGNvbnNpZGVyYXRpb25zLiBGaXJzdCwgaXMgdGhpcyBhIGxp");
    sb.append("c3Qgb2Ygc3RydWN0dXJlcyBPUiBhIGxpc3Qgb2YgdmFsdWVzLgogICAgICB2YXIgcmVjb3JkVHlwZSA9");
    sb.append("IGV4dHJhY3RTdHJ1Y3R1cmVUeXBlKHR5cGUudHlwZSwgdHlwZXMpOwogICAgICBpZiAocmVjb3JkVHlw");
    sb.append("ZSAhPSBudWxsKSB7CiAgICAgICAgLy8gaXQgaXMgYSBsaXN0IG9mIHN0cnVjdHVyZXMsIHNvIHdlIHdh");
    sb.append("bnQgdG8gY3JlYXRlIGEgbmljZSBsb29raW5nIHRhYmxlIHdpdGggcGFnaW5hdGlvbiEKICAgICAgICB2");
    sb.append("YXIgdGFibGVDb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB2");
    sb.append("YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICB0YWJs");
    sb.append("ZUNvbnRyb2xzLmFwcGVuZChzaG93aGlkZSk7CgogICAgICAgIHZhciB0YWJsZUhvbGRlciA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CiAgICAgICAgdGFibGVDb250cm9scy5hcHBlbmQodGFi");
    sb.append("bGVIb2xkZXIpOwogICAgICAgIHZhciB0YWJsZUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo");
    sb.append("InRoZWFkIik7CiAgICAgICAgdGFibGVIb2xkZXIuYXBwZW5kKHRhYmxlSGVhZGVyKTsKICAgICAgICB2");
    sb.append("YXIgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5hcHBlbmQoaGVhZGVyUm93KTsKICAgICAgICB2YXIgY29sb3JTdHlsZSA9ICJib3JkZXI6IDFw");
    sb.append("eCBzb2xpZCAjM2I1NGRhOyI7CiAgICAgICAgZm9yICh2YXIgZmllbGROYW1lIGluIHJlY29yZFR5cGUu");
    sb.append("ZmllbGRzKSB7CiAgICAgICAgICB2YXIgZmllbGQgPSByZWNvcmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVd");
    sb.append("OwogICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBmaWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgIGNv");
    sb.append("bnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21E");
    sb.append("ZWx0YShmaWVsZC50eXBlLCB0eXBlcyk7CiAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJ0ZCIpOwogICAgICAgICAgdGQuaW5uZXJIVE1MID0gcmVzdWx0Lm5hbWUgKyAiICIgKyBm");
    sb.append("aWVsZE5hbWU7CiAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kKHRkKTsKICAgICAgICAgIHRkLnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZSArICJwYWRkaW5nLWxlZnQ6IDAuNWVtOyBwYWRkaW5nLXJpZ2h0OiAwLjVlbTsi");
    sb.append("CiAgICAgICAgfQogICAgICAgIHRhYmxlSG9sZGVyLnN0eWxlID0gY29sb3JTdHlsZSArICJwYWRkaW5n");
    sb.append("OiAwLjVlbTsgbWFyZ2luOjAuNWVtOyBkaXNwbGF5Om5vbmUiCiAgICAgICAgaGVhZGVyUm93LnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZTsKICAgICAgICB2YXIgdGFibGVCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgidGJvZHkiKTsKICAgICAgICB0YWJsZUhvbGRlci5hcHBlbmQodGFibGVCb2R5KTsKICAgICAgICB2");
    sb.append("YXIgcm93c0J5S2V5ID0ge307CiAgICAgICAgdmFyIHBhZ2luZyA9IHsKICAgICAgICAgIHNob3duOmZh");
    sb.append("bHNlLAogICAgICAgICAgb3JkZXI6W10sCiAgICAgICAgICBwYWdlOiAwLAogICAgICAgICAgcGFnZV9s");
    sb.append("aW1pdDogMTAsCiAgICAgICAgfTsKICAgICAgICB2YXIgY29udHJvbGxlciA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB0YWJsZUNvbnRyb2xzLmFwcGVuZChjb250cm9sbGVyKTsK");
    sb.append("ICAgICAgICBwYWdpbmcucmVmb3JtID1mdW5jdGlvbigpIHsKICAgICAgICAgIG51a2UodGFibGVCb2R5");
    sb.append("KTsKICAgICAgICAgIHZhciBzdGFydCA9IE1hdGgubWluKHRoaXMucGFnZSAqIHRoaXMucGFnZV9saW1p");
    sb.append("dCwgdGhpcy5vcmRlci5sZW5ndGggLSB0aGlzLnBhZ2VfbGltaXQpOwogICAgICAgICAgZm9yICh2YXIg");
    sb.append("YXQgPSBzdGFydDsgYXQgPCBzdGFydCArIHBhZ2luZy5wYWdlX2xpbWl0OyBhdCsrKSB7CiAgICAgICAg");
    sb.append("ICAgIHZhciByb3cgPSByb3dzQnlLZXlbcGFnaW5nLm9yZGVyW2F0XV07CiAgICAgICAgICAgIGlmIChy");
    sb.append("b3cpIHsKICAgICAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kKHJvdyk7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIG51a2UoY29udHJvbGxlcik7CiAgICAgICAgICBpZiAodGhpcy5zaG93");
    sb.append("bikgewogICAgICAgICAgICB2YXIgcGFnZXMgPSB0aGlzLm9yZGVyLmxlbmd0aCAvIHRoaXMucGFnZV9s");
    sb.append("aW1pdDsKICAgICAgICAgICAgaWYgKHBhZ2VzID4gMSkgewogICAgICAgICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgcGFnZXM7IGsrKykgewogICAgICAgICAgICAgICAgdmFyIGdvdG9QYWdlID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgICAgICAgICBnb3RvUGFnZS5zdHlsZSA9");
    sb.append("IGJ1dHRvblN0eWxlOwogICAgICAgICAgICAgICAgZ290b1BhZ2UuaW5uZXJIVE1MID0gIltQRzoiICsg");
    sb.append("ayArICJdIjsKICAgICAgICAgICAgICAgIGdvdG9QYWdlLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIHRoaXMucGFnaW5nLnBhZ2UgPSB0aGlzLnBnOwogICAgICAgICAgICAgICAg");
    sb.append("ICB0aGlzLnBhZ2luZy5yZWZvcm0oKTsKICAgICAgICAgICAgICAgIH0uYmluZCh7cGFnaW5nOiB0aGlz");
    sb.append("LCBwZzoga30pOwogICAgICAgICAgICAgICAgY29udHJvbGxlci5hcHBlbmQoZ290b1BhZ2UpOwogICAg");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2hvd2hpZGUuaW5u");
    sb.append("ZXJIVE1MID0gdGhpcy5zaG93biA/IG1pbnVzU1ZHIDogcGx1c1NWRzsKICAgICAgICAgIHNob3doaWRl");
    sb.append("Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5zaG93biA9ICF0aGlzLnNob3du");
    sb.append("OwogICAgICAgICAgICBpZiAodGhpcy5zaG93bikgewogICAgICAgICAgICAgIHRhYmxlSG9sZGVyLnN0");
    sb.append("eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMu");
    sb.append("cmVmb3JtKCk7CiAgICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgICAgfS5iaW5kKHBhZ2luZyk7CgoK");
    sb.append("ICAgICAgICByZXR1cm4gewogICAgICAgICAgZG9tOiB0YWJsZUNvbnRyb2xzLAogICAgICAgICAgbmFt");
    sb.append("ZTogImxpc3QmbHQ7IiArIGR1bW15Lm5hbWUgKyAiJmd0OyIsCiAgICAgICAgICB1cGRhdGU6IHsKICAg");
    sb.append("ICAgICAgICAgJysnOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgdmFyIHJvdyA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7CiAgICAgICAgICAgICAgcm93c0J5S2V5W2tleV0gPSByb3c7");
    sb.append("CiAgICAgICAgICAgICAgdmFyIGRlbHRhID0ge307CiAgICAgICAgICAgICAgZm9yICh2YXIgZmllbGRO");
    sb.append("YW1lIGluIHJlY29yZFR5cGUuZmllbGRzKSB7CiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSByZWNv");
    sb.append("cmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBm");
    sb.append("aWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShmaWVsZC50");
    sb.append("eXBlLCB0eXBlcyk7CiAgICAgICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJ0ZCIpOwogICAgICAgICAgICAgICAgdGQuc3R5bGUgPSBjb2xvclN0eWxlICsgInBhZGRpbmc6IDAu");
    sb.append("MjVlbTsgdGV4dC1hbGlnbjp0b3AiOwogICAgICAgICAgICAgICAgdGQuYXBwZW5kKHJlc3VsdC5kb20p");
    sb.append("OwogICAgICAgICAgICAgICAgcm93LmFwcGVuZCh0ZCk7CiAgICAgICAgICAgICAgICBkZWx0YVtmaWVs");
    sb.append("ZE5hbWVdID0gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJu");
    sb.append("IGRlbHRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnLSc6IGZ1bmN0aW9uIChrZXkpIHsKICAg");
    sb.append("ICAgICAgICAgICB2YXIgZG9tID0gcm93c0J5S2V5W2tleV07CiAgICAgICAgICAgICAgdGFibGVCb2R5");
    sb.append("LnJlbW92ZShkb20pOwogICAgICAgICAgICAgIGRlbGV0ZSByb3dzQnlLZXlba2V5XTsKICAgICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAgICAgICBpZiAo");
    sb.append("b3JkZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcGFnaW5nLm9yZGVyID0gb3JkZXI7CiAgICAg");
    sb.append("ICAgICAgICAgICBwYWdpbmcucmVmb3JtKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIG5vdCBhIHJlY29yZCwg");
    sb.append("c28gd2UgdXNlIGEgc2ltcGxlIGxpc3QKICAgICAgICB2YXIgbGlzdEhvbGRlciA9IGRvY3VtZW50LmNy");
    sb.append("ZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHZhciBkb21CeUtleSA9IHt9OwogICAgICAgIHJldHVy");
    sb.append("biB7CiAgICAgICAgICBkb206IGxpc3RIb2xkZXIsCiAgICAgICAgICBuYW1lOiAibGlzdDwiICsgZHVt");
    sb.append("bXkubmFtZSArICI+IiwKICAgICAgICAgIHVwZGF0ZTogewogICAgICAgICAgICAnKyc6IGZ1bmN0aW9u");
    sb.append("IChrZXkpIHsKICAgICAgICAgICAgICB2YXIgaXRlbUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoInNwYW4iKTsKICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udmVydFR5cGVUb0RvbURlbHRh");
    sb.append("KHR5cGUudHlwZSwgdHlwZXMpOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHJlc3VsdC5k");
    sb.append("b20pOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHNpbXBsZSgic3BhbiIsICIsICIpKTsK");
    sb.append("ICAgICAgICAgICAgICBkb21CeUtleVtrZXldID0gaXRlbUhvbGRlcjsKICAgICAgICAgICAgICByZXR1");
    sb.append("cm4gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJy0nOiBmdW5jdGlvbiAo");
    sb.append("a2V5KSB7CiAgICAgICAgICAgICAgdmFyIGRvbSA9IGRvbUJ5S2V5W2tleV07CiAgICAgICAgICAgICAg");
    sb.append("bGlzdEhvbGRlci5yZW1vdmUoZG9tKTsKICAgICAgICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsK");
    sb.append("ICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlLm5hdHVy");
    sb.append("ZSA9PSAicmVhY3RpdmVfdmFsdWUiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfdmFsdWUiKSB7CiAg");
    sb.append("ICAgIC8vIGl0J3MganVzdCBkYXRhLCBzbyBjcmVhdGUgYSBzaW5nbGUgbm9kZSB0byBkcmF3IGl0CiAg");
    sb.append("ICAgIHZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICBpdGVtLmlu");
    sb.append("bmVySFRNTCA9ICJudWxsIjsKICAgICAgaXRlbS5zdHlsZSA9ICJjb2xvcjogIzc3YTVmZjsiOwogICAg");
    sb.append("ICB2YXIgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZTsgfTsK");
    sb.append("ICAgICAgaWYgKHR5cGUudHlwZSA9PSAic3RyaW5nIikgewogICAgICAgIGl0ZW0uc3R5bGUgPSAiY29s");
    sb.append("b3I6ICM3N2Q2NTYiOwogICAgICAgIHVwZGF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW0uaW5uZXJI");
    sb.append("VE1MID0gIlwiIiArIHZhbHVlICsgIlwiIjsgfTsKICAgICAgfSBlbHNlIGlmICh0eXBlLnR5cGUgPT0g");
    sb.append("InByaW5jaXBhbCIpIHsKICAgICAgICBpdGVtLnN0eWxlID0gImNvbG9yOiAjQkE4M0ZGOyI7CiAgICAg");
    sb.append("ICAgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZSAhPSBudWxs");
    sb.append("ID8gKHZhbHVlLmFnZW50ICsgIkAiICsgdmFsdWUuYXV0aG9yaXR5KSA6ICJudWxsIjsgfTsKICAgICAg");
    sb.append("fSBlbHNlIGlmICh0eXBlLnR5cGUgPT0gImJvb2wiKSB7CiAgICAgICAgaXRlbS5zdHlsZSA9ICJjb2xv");
    sb.append("cjogI0U4M0IzQjsiOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOml0ZW0sCiAgICAg");
    sb.append("ICAgbmFtZTogdHlwZS50eXBlLAogICAgICAgIHVwZGF0ZTogdXBkYXRlCiAgICAgIH07CiAgICB9CiAg");
    sb.append("ICBpZiAodHlwZS5uYXR1cmUgPT0gInJlYWN0aXZlX3JlY29yZCIgfHwgdHlwZS5uYXR1cmUgPT0gIm5h");
    sb.append("dGl2ZV9tZXNzYWdlIikgewogICAgICAvLyBpdCdzIGEgc3RydWN0dXJlLCBzbyBsZXQncyBjcmVhdGUg");
    sb.append("YSByZWNvcmQgdGhhdCBjYW4gc2hvdy9oaWRlCiAgICAgIHZhciBvYmpfaG9sZGVyID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICB2YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJidXR0b24iKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoc2hvd2hpZGUpOwogICAgICBv");
    sb.append("YmpfaG9sZGVyLnNob3dHcm91cCA9IHR5cGUubmFtZSAhPSAiUm9vdCI7CgogICAgICB2YXIgZ3JvdXAg");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoZ3Jv");
    sb.append("dXApOwogICAgICBncm91cC5hcHBlbmQoc2ltcGxlKCJkaXYiLCAieyIpKTsKICAgICAgdmFyIGNoaWxk");
    sb.append("cmVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKICAgICAgZ3JvdXAuYXBwZW5kKGNoaWxk");
    sb.append("cmVuKTsKICAgICAgZ3JvdXAuYXBwZW5kKHNpbXBsZSgiZGl2IiwgIn0iKSk7CiAgICAgIGdyb3VwLnN0");
    sb.append("eWxlID0gInBhZGRpbmctbGVmdDoxMHB4IjsKICAgICAgY2hpbGRyZW4uc3R5bGUgPSAicGFkZGluZy1s");
    sb.append("ZWZ0OjEwcHg7IjsKICAgICAgc2hvd2hpZGUub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgIG9i");
    sb.append("al9ob2xkZXIuc2hvd0dyb3VwID0gISBvYmpfaG9sZGVyLnNob3dHcm91cDsKICAgICAgICBpZiAob2Jq");
    sb.append("X2hvbGRlci5zaG93R3JvdXApIHsKICAgICAgICAgIGdyb3VwLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAg");
    sb.append("ICAgICAgIHNob3doaWRlLmlubmVySFRNTCA9IG1pbnVzU1ZHOwogICAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgICBncm91cC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgc2hvd2hpZGUuaW5uZXJI");
    sb.append("VE1MID0gcGx1c1NWRzsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNob3doaWRlLm9uY2xpY2soKTsK");
    sb.append("CiAgICAgIHZhciBkZWx0YSA9IHt9OwogICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gdHlwZS5maWVs");
    sb.append("ZHMpIHsKICAgICAgICB2YXIgZmllbGQgPSB0eXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgIGlm");
    sb.append("ICgicHJpdmF0ZSIgPT0gZmllbGQucHJpdmFjeSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAg");
    sb.append("fQogICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEoZmllbGQudHlwZSwgdHlw");
    sb.append("ZXMpOwogICAgICAgIHZhciBmaWVsZERvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7CiAg");
    sb.append("ICAgICAgZmllbGREb20uYXBwZW5kKHNpbXBsZSgic3BhbiIsICBmaWVsZC5wcml2YWN5ICsgIiAiICsg");
    sb.append("cmVzdWx0Lm5hbWUgKyAiICIgKyBmaWVsZE5hbWUgKyAiID0gIikpOwogICAgICAgIGZpZWxkRG9tLmFw");
    sb.append("cGVuZChyZXN1bHQuZG9tKTsKICAgICAgICBjaGlsZHJlbi5hcHBlbmQoZmllbGREb20pOwogICAgICAg");
    sb.append("IGRlbHRhW2ZpZWxkTmFtZV0gPSByZXN1bHQudXBkYXRlOwogICAgICB9CiAgICAgIHJldHVybiB7CiAg");
    sb.append("ICAgICAgZG9tOiBvYmpfaG9sZGVyLAogICAgICAgIG5hbWU6IHR5cGUubmFtZSwKICAgICAgICB1cGRh");
    sb.append("dGU6ZGVsdGEKICAgICAgfTsKICAgIH0KICAgIHZhciB1bmtub3duID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICB1bmtub3duLmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KHR5cGUpOwog");
    sb.append("ICAgcmV0dXJuIHtkb206IHVua25vd24sIHVwZGF0ZTogZnVuY3Rpb24oKSB7fX07CiAgfTsKCiAgc2Vs");
    sb.append("Zi5mb3JtSWRHZW4gPSAwOwogIHZhciBuZXh0Rm9ybUlkID0gZnVuY3Rpb24oKSB7CiAgICBzZWxmLmZv");
    sb.append("cm1JZEdlbisrOwogICAgcmV0dXJuIHNlbGYuZm9ybUlkR2VuOwogIH07CiAgdmFyIGZpbGxPdXRGb3Jt");
    sb.append("Rm9yVHlwZSA9IGZ1bmN0aW9uKGRvbSwgbmFtZSwgdHlwZSwgdHlwZXMpIHsKICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX3JlZiIpIHsKICAgICAgZmlsbE91dEZvcm1Gb3JUeXBlKGRvbSwgbmFtZSwg");
    sb.append("dHlwZXNbdHlwZS5yZWZdLCB0eXBlcyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIGZvciAodmFyIGZpZWxkIGluIHR5cGUuZmll");
    sb.append("bGRzKSB7CiAgICAgICAgdmFyIGZpZWxkVHlwZSA9IHR5cGUuZmllbGRzW2ZpZWxkXS50eXBlOwogICAg");
    sb.append("ICAgIHZhciBmaWVsZEhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAg");
    sb.append("IGZpbGxPdXRGb3JtRm9yVHlwZShmaWVsZEhvbGRlciwgbmFtZSA9PSAiIiA/IGZpZWxkIDogKG5hbWUg");
    sb.append("KyAiLiIgKyBmaWVsZCksIGZpZWxkVHlwZSwgdHlwZXMpOwogICAgICAgIGRvbS5hcHBlbmQoZmllbGRI");
    sb.append("b2xkZXIpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX2FycmF5IikgewogICAgICAvLyBUT0RPCiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0g");
    sb.append("Im5hdGl2ZV9tYXliZSIpIHsKICAgICAgdmFyIG1heWJlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVs");
    sb.append("Iik7CiAgICAgIGxhYmVsLmlubmVySFRNTCA9ICJlbmFibGUgIiArIG5hbWU7CiAgICAgIHZhciBjaGVj");
    sb.append("a2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGNoZWNrYm94LnR5cGUg");
    sb.append("PSAiY2hlY2tib3giOwogICAgICBjaGVja2JveC5pZCA9IG5leHRGb3JtSWQoKTsKICAgICAgY2hlY2ti");
    sb.append("b3gubmFtZSA9ICIiOwogICAgICBsYWJlbC5odG1sRm9yID0gY2hlY2tib3guaWQ7CiAgICAgIHZhciBt");
    sb.append("YXliZVZhbHVlUmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBtYXli");
    sb.append("ZVZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGZpbGxPdXRGb3JtRm9y");
    sb.append("VHlwZShtYXliZVZhbHVlLCBuYW1lLCB0eXBlLnR5cGUsIHR5cGVzKTsKICAgICAgbWF5YmVIb2xkZXIu");
    sb.append("YXBwZW5kKGxhYmVsKTsKICAgICAgbWF5YmVIb2xkZXIuYXBwZW5kKGNoZWNrYm94KTsKICAgICAgbWF5");
    sb.append("YmVIb2xkZXIuYXBwZW5kKG1heWJlVmFsdWVSZWYpOwogICAgICBkb20uYXBwZW5kKG1heWJlSG9sZGVy");
    sb.append("KTsKICAgICAgY2hlY2tib3gub25jaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBudWtlKG1heWJl");
    sb.append("VmFsdWVSZWYpOwogICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7CiAgICAgICAgICBtYXliZVZh");
    sb.append("bHVlUmVmLmFwcGVuZChtYXliZVZhbHVlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybjsK");
    sb.append("ICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAibmF0aXZlX3ZhbHVlIikgewogICAgICB2YXIgbGFi");
    sb.append("ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwogICAgICB2YXIgaW5wdXQgPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoKICAgICAgaW5wdXQuaWQgPSAiZGVidWdnZXJfZm9y");
    sb.append("bV9pZF8iICsgbmV4dEZvcm1JZCgpOwogICAgICBsYWJlbC5pbm5lckhUTUwgPSBuYW1lOwogICAgICBp");
    sb.append("bnB1dC5uYW1lID0gbmFtZTsKICAgICAgaW5wdXQuc3R5bGUgPSBpbnB1dFN0eWxlOwogICAgICBpbnB1");
    sb.append("dC50eXBlID0gInRleHQiOwogICAgICBsYWJlbC5mb3JIdG1sID0gaW5wdXQuaWQ7CiAgICAgIGRvbS5h");
    sb.append("cHBlbmQobGFiZWwpOwogICAgICBkb20uYXBwZW5kKGlucHV0KTsKICAgICAgcmV0dXJuOwogICAgfQog");
    sb.append("ICAgZG9tLmlubmVySFRNTCA9IG5hbWUgKyAiLS0+IiArIEpTT04uc3RyaW5naWZ5KHR5cGUpOwogIH07");
    sb.append("CgogIHZhciBtYWtlQ2hhbm5lbERlYnVnZ2VyID0gZnVuY3Rpb24oY2hhbm5lbHMsIHR5cGVzLCBjb25u");
    sb.append("ZWN0aW9uKSB7CiAgICB2YXIgc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3Qi");
    sb.append("KTsKICAgIHNlbGVjdG9yLnN0eWxlID0gImJhY2tncm91bmQ6ICMzMzM7IGNvbG9yOiNmZmY7IjsKICAg");
    sb.append("IHZpZXdDaGFubmVscy5hcHBlbmQoc2VsZWN0b3IpOwogICAgdmFyIGZvcm1Ib2xkZXIgPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHZpZXdDaGFubmVscy5hcHBlbmQoZm9ybUhvbGRlcik7");
    sb.append("CiAgICB2YXIgY2hvb3NlID0gZnVuY3Rpb24oY2hhbm5lbCkgewogICAgICBudWtlKGZvcm1Ib2xkZXIp");
    sb.append("OwogICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTsKICAgICAgZm9y");
    sb.append("bUhvbGRlci5hcHBlbmQoZm9ybSk7CiAgICAgIHZhciB0eXBlID0gdHlwZXNbY2hhbm5lbHNbY2hhbm5l");
    sb.append("bF1dOwogICAgICBmaWxsT3V0Rm9ybUZvclR5cGUoZm9ybSwgIiIsIHR5cGUsIHR5cGVzKTsKCiAgICAg");
    sb.append("IHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgYnV0dG9u");
    sb.append("LnN0eWxlID0gYnV0dG9uU3R5bGU7CiAgICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQp");
    sb.append("IHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciBtZXNzYWdlID0gUnhI");
    sb.append("VE1MLkJ1aWxkRm9ybU9iamVjdChmb3JtKTsKICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlNlbmRp");
    sb.append("bmciOwogICAgICAgIGNvbnNvbGUubG9nKGNoYW5uZWwgKyAiOiIgKyBKU09OLnN0cmluZ2lmeShtZXNz");
    sb.append("YWdlKSk7CiAgICAgICAgY29ubmVjdGlvbi5zZW5kKGNoYW5uZWwsIG1lc3NhZ2UsIHsKICAgICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlN1Y2Nl");
    sb.append("c3MhIFNlbmQgQW5vdGhlciEiOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9u");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIltGYWlsZWQ6IiArIHJlYXNv");
    sb.append("biArICJdLCBUcnkgQWdhaW4iOwogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICB9OwogICAgICBi");
    sb.append("dXR0b24uaW5uZXJIVE1MID0gIlNlbmQiOwogICAgICBmb3JtLmFwcGVuZChidXR0b24pOwogICAgICAv");
    sb.append("LyBCdWlsZEZvcm1PYmplY3QKICAgIH07CiAgICB2YXIgZmlyc3QgPSBudWxsOwogICAgdmFyIGNoYW5u");
    sb.append("ZWxzU29ydGVkID0gW107CiAgICBmb3IgKHZhciBjaCBpbiBjaGFubmVscykgewogICAgICBjaGFubmVs");
    sb.append("c1NvcnRlZC5wdXNoKGNoKTsKICAgIH0KICAgIGNoYW5uZWxzU29ydGVkLnNvcnQoKTsKICAgIGZvciAo");
    sb.append("dmFyIGsgaW4gY2hhbm5lbHNTb3J0ZWQpIHsKICAgICAgdmFyIGNoID0gY2hhbm5lbHNTb3J0ZWRba107");
    sb.append("CiAgICAgIGlmIChmaXJzdCA9PSBudWxsKSB7CiAgICAgICAgZmlyc3QgPSBjaDsKICAgICAgfQogICAg");
    sb.append("ICB2YXIgbXNnVHlwZSA9IGNoYW5uZWxzW2NoXTsKICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQuaW5uZXJIVE1MID0gY2ggKyAiIDogIiArIG1zZ1R5");
    sb.append("cGU7CiAgICAgIG9wdC5sYWJlbCA9IGNoICsgIiA6ICIgKyBtc2dUeXBlOwogICAgICBvcHQudmFsdWUg");
    sb.append("PSBjaDsKICAgICAgc2VsZWN0b3IuYXBwZW5kKG9wdCk7CiAgICAgIHNlbGVjdG9yLm9uY2hhbmdlID0g");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICAgICAgY2hvb3NlKHNlbGVjdG9yLnZhbHVlKTsKICAgICAgfTsKICAgIH0K");
    sb.append("CiAgICBpZiAoZmlyc3QgIT0gbnVsbCkgewogICAgICBjaG9vc2UoZmlyc3QpOwogICAgfQogIH07Cgog");
    sb.append("IHZhciByZW5kZXIgPSBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tuYW1l");
    sb.append("XTsKICAgIGlmIChjby5yZW5kZXJlZCA9PSBjby5ib3VuZCkgewogICAgICByZXR1cm47CiAgICB9CiAg");
    sb.append("ICBjby5yZW5kZXJlZCA9IGNvLmJvdW5kOwogICAgY28uZGVidWdfdHJlZS5udWtlKCk7CiAgICBudWtl");
    sb.append("KHZpZXdKc29uKTsKICAgIG51a2Uodmlld0NoYW5uZWxzKTsKCiAgICB2YXIgaGFuZGxlciA9IHsKICAg");
    sb.append("ICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAvLyBoYW5kbGUgdGhlIGRhdGEg");
    sb.append("aW5zcGVjdG9yIHRhYgogICAgICAgIHZhciByZWZsZWN0aW9uID0gcGF5bG9hZC5yZWZsZWN0aW9uOwog");
    sb.append("ICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEocmVmbGVjdGlvbi50eXBlc1si");
    sb.append("X19Sb290Il0sIHJlZmxlY3Rpb24udHlwZXMpOwogICAgICAgIHZpZXdKc29uLmFwcGVuZChyZXN1bHQu");
    sb.append("ZG9tKTsKICAgICAgICBjby5kZWJ1Z190cmVlLnN1YnNjcmliZShyZXN1bHQudXBkYXRlKTsKICAgICAg");
    sb.append("ICAvLyBoYW5kbGUgdGhlIGNoYW5uZWxzIHRhYgogICAgICAgIG1ha2VDaGFubmVsRGVidWdnZXIocmVm");
    sb.append("bGVjdGlvbi5jaGFubmVscywgcmVmbGVjdGlvbi50eXBlcywgY28ucHRyKTsKICAgICAgfSwKICAgICAg");
    sb.append("ZmFpbHVyZTogZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0gIltG");
    sb.append("QUlMRUQgVE8gR0VUIFNDSEVNQToiICsgcmVhc29uICsgIl0iOwogICAgICAgIHZpZXdDaGFubmVscy5p");
    sb.append("bm5lckhUTUwgPSAiW0ZBSUxFRCBUTyBHRVQgU0NIRU1BOiIgKyByZWFzb24gKyAiXSI7CiAgICAgIH0K");
    sb.append("ICAgIH07CiAgICBpZiAoY28udmlhX2JpbGxpbmcpIHsKICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0g");
    sb.append("IkJpbGlsbmcgZG9jdW1lbnQgbm90IHN1cHBvcnRlZCI7CiAgICAgIHZpZXdDaGFubmVscy5pbm5lckhU");
    sb.append("TUwgPSB2aWV3SnNvbi5pbm5lckhUTUw7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChjby52aWFf");
    sb.append("ZG9tYWluKSB7CiAgICAgIGNvLnJhdy5Eb21haW5SZWZsZWN0KGNvLmlkZW50aXR5LCBjby5kb21haW4s");
    sb.append("IGhhbmRsZXIpOwogICAgfSBlbHNlIHsKICAgICAgY28ucmF3LlNwYWNlUmVmbGVjdChjby5pZGVudGl0");
    sb.append("eSwgY28uc3BhY2UsIGNvLmtleSwgaGFuZGxlcik7CiAgICB9CiAgfTsKCiAgdmFyIGNvbm5lY3Rpb25T");
    sb.append("ZWxlY3RvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwogIGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMzMzOyBjb2xvcjogI2ZmZiI7CiAgdmFyIHN3aXRjaF90");
    sb.append("b19jb25uZWN0aW9uID0gZnVuY3Rpb24obmFtZSkgewogICAgY3VycmVudCA9IG5hbWU7CiAgICBudWtl");
    sb.append("KHZpZXdDaGFubmVscyk7CiAgICBudWtlKHZpZXdKc29uKTsKICAgIGNvbm5lY3Rpb25zW25hbWVdLnJl");
    sb.append("bmRlcmVkID0gIiI7CiAgICByZW5kZXIobmFtZSk7CiAgfTsKICBjb25uZWN0aW9uU2VsZWN0b3Iub25j");
    sb.append("aGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgIHN3aXRjaF90b19jb25uZWN0aW9uKGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci52YWx1ZSk7CiAgfTsKICB2YXIgcmVmcmVzaF9zZWxlY3QgPSBmdW5jdGlvbigpIHsKICAgIG51");
    sb.append("a2UoY29ubmVjdGlvblNlbGVjdG9yKTsKICAgIGZvciAodmFyIG5hbWUgaW4gY29ubmVjdGlvbnMpIHsK");
    sb.append("ICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQu");
    sb.append("dmFsdWUgPSBuYW1lOwogICAgICBvcHQuaW5uZXJUZXh0ID0gbmFtZTsKICAgICAgY29ubmVjdGlvblNl");
    sb.append("bGVjdG9yLmFwcGVuZENoaWxkKG9wdCk7CiAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHsKICAgICAg");
    sb.append("ICBzd2l0Y2hfdG9fY29ubmVjdGlvbihuYW1lKTsKICAgICAgICBjb25uZWN0aW9uU2VsZWN0b3IudmFs");
    sb.append("dWUgPSBuYW1lOwogICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi50b2dnbGUgPSBmdW5jdGlvbigpIHsK");
    sb.append("ICAgIGlmIChzZWxmLnNob3duKSB7CiAgICAgIHRyeSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1v");
    sb.append("dmVDaGlsZChzZWxmLnJvb3QpOwogICAgICB9IGNhdGNoIChub3RwcmVzZW50KSB7CiAgICAgICAgc2Vs");
    sb.append("Zi5zaG93biA9ICFzZWxmLnNob3duOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHNlbGYucm9v");
    sb.append("dCk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgc2VsZi5yb290ID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGRlYnVnZ2VyUG9zaXRpb24gPSBsb2NhbFN0b3JhZ2Uu");
    sb.append("Z2V0SXRlbSgiQWRhbWFEZWJ1Z2dlclBvc2l0aW9uIik7CiAgICAgIGlmICghZGVidWdnZXJQb3NpdGlv");
    sb.append("biB8fCBkZWJ1Z2dlclBvc2l0aW9uID09ICIiKSB7CiAgICAgICAgZGVidWdnZXJQb3NpdGlvbiA9ICJ0");
    sb.append("b3A6MHB4OyBsZWZ0OjBweDt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiOwogICAgICB9CiAgICAgIHNl");
    sb.append("bGYucm9vdC5zdHlsZSA9ICJwb3NpdGlvbjphYnNvbHV0ZTsiICsgZGVidWdnZXJQb3NpdGlvbiArICI7");
    sb.append("YmFja2dyb3VuZDogIzAwMDtib3JkZXI6MXB4IHNvbGlkIHJlZDt6LWluZGV4OjEwMDA7IG92ZXJmbG93");
    sb.append("OnNjcm9sbCI7CiAgICAgIHZhciB0aXRsZUJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIp");
    sb.append("OwogICAgICB0aXRsZUJhci5pbm5lckhUTUwgPSAiQWRhbWEgRGVidWdnZXIiOwogICAgICB0aXRsZUJh");
    sb.append("ci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMjIyOyBjb2xvcjogIzBmMDsgY3Vyc29yOm1vdmU7IHdpZHRo");
    sb.append("OjEwMCU7IGZvbnQtdmFyaWFudDogc21hbGwtY2FwczsgcGFkZGluZzoycHg7IHRleHQtYWxpZ246IGNl");
    sb.append("bnRlcjsiOwogICAgICB0aXRsZUJhci5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAg");
    sb.append("ZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICB2YXIgcmVjdCA9IHNlbGYucm9vdC5nZXRCb3VuZGlu");
    sb.append("Z0NsaWVudFJlY3QoKTsKICAgICAgICB2YXIgc3RhcnQgPSB7eDogZXYuY2xpZW50WCwgeTogZXYuY2xp");
    sb.append("ZW50WX07CiAgICAgICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uKG54KSB7CiAgICAgICAgICBzZWxmLnJv");
    sb.append("b3Quc3R5bGUubGVmdCA9IChyZWN0LmxlZnQgKyBueC5jbGllbnRYIC0gc3RhcnQueCkgKyAicHgiOwog");
    sb.append("ICAgICAgICAgc2VsZi5yb290LnN0eWxlLnRvcCA9IChyZWN0LnRvcCArIG54LmNsaWVudFkgLSBzdGFy");
    sb.append("dC55KSArICJweCI7CiAgICAgICAgfTsKICAgICAgICB3aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlv");
    sb.append("bihueCkgewogICAgICAgICAgdXBkYXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVt");
    sb.append("KCJBZGFtYURlYnVnZ2VyUG9zaXRpb24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0");
    sb.append("OiIrc2VsZi5yb290LnN0eWxlLmxlZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAg");
    sb.append("ICB9OwogICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbihueCkgewogICAgICAgICAgdXBk");
    sb.append("YXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJBZGFtYURlYnVnZ2VyUG9zaXRp");
    sb.append("b24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0OiIrc2VsZi5yb290LnN0eWxlLmxl");
    sb.append("ZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAgICAgIHdpbmRvdy5vbm1vdXNlbW92");
    sb.append("ZSA9IGZ1bmN0aW9uKCkge307CiAgICAgICAgICB3aW5kb3cub25tb3VzZXVwID0gZnVuY3Rpb24oKSB7");
    sb.append("fTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzZWxmLnJvb3Qu");
    sb.append("YXBwZW5kQ2hpbGQodGl0bGVCYXIpOwogICAgICBzZWxmLnJvb3QuYXBwZW5kQ2hpbGQoY29ubmVjdGlv");
    sb.append("blNlbGVjdG9yKTsKICAgICAgc2VsZi5yb290LmFwcGVuZENoaWxkKHZpZXdKc29uKTsKICAgICAgc2Vs");
    sb.append("Zi5yb290LmFwcGVuZENoaWxkKHZpZXdDaGFubmVscyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5k");
    sb.append("Q2hpbGQoc2VsZi5yb290KTsKICAgIH0KICAgIHNlbGYuc2hvd24gPSAhc2VsZi5zaG93bjsKICB9OwoK");
    sb.append("ICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oY29ubmVjdGlvbikgewogICAgY29ubmVjdGlvbnNbY29u");
    sb.append("bmVjdGlvbi5uYW1lXSA9IGNvbm5lY3Rpb247CiAgICBjb25uZWN0aW9uLmRlYnVnX3RyZWUgPSBuZXcg");
    sb.append("QWRhbWFUcmVlKCk7CiAgICBjb25uZWN0aW9uLmRlYnVnZ2luZyA9ICI/IjsKICAgIHJlZnJlc2hfc2Vs");
    sb.append("ZWN0KCk7CiAgICByZXR1cm4gZnVuY3Rpb24ocGF5bG9hZCkgewogICAgICBpZiAoY29ubmVjdGlvbi5i");
    sb.append("b3VuZCAhPSBjb25uZWN0aW9uLmRlYnVnZ2luZyAmJiBjdXJyZW50ID09IGNvbm5lY3Rpb24ubmFtZSkg");
    sb.append("ewogICAgICAgIHJlbmRlcihjb25uZWN0aW9uLm5hbWUpOwogICAgICB9CiAgICAgIGlmICgiZGF0YSIg");
    sb.append("aW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgIGNvbm5lY3Rpb24uZGVidWdfdHJlZS51cGRhdGUocGF5");
    sb.append("bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgfQogICAgICAvKgogICAgICBpZiAoIm91dHN0YW5kaW5nIiBp");
    sb.append("biBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBjby5vbmRlY2lkZShwYXlsb2FkLmRlbHRhLm91dHN0");
    sb.append("YW5kaW5nKTsKICAgICAgfQogICAgICBpZiAoJ3ZpZXdzdGF0ZScgaW4gcGF5bG9hZC5kZWx0YSkgewov");
    sb.append("LyAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLnZpZXdzdGF0ZSk7CiAg");
    sb.append("ICAgIH0KICAgICAgaWYgKCdnb3RvJyBpbiBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBzZWxmLmdv");
    sb.append("dG8ocGF5bG9hZC5kZWx0YS5nb3RvKTsKICAgICAgfQogICAgICAqLwogICAgfQogIH07CiAgcmV0dXJu");
    sb.append("IHNlbGY7Cn0pKCk7");
    return sb.toString();
  }
  public static final String RXHTML = new String(Base64.getDecoder().decode(make_rxhtml()), StandardCharsets.UTF_8);
  private static String make_rxhtml() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIFJ4SFRNTCA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB7fTsKCiAgdmFyIHRlbXBsYXRl");
    sb.append("cyA9IHt9OwogIHZhciByb3V0ZXIgPSB7fTsKICAvLyBUaGlzIHN0cmFuZ2UgZXNjYXBpbmcgaXMgZm9y");
    sb.append("IGRldmVsb3BlciBtb2RlIHRvIHByb3h5IHRvIGxvY2FsaG9zdC4KICB2YXIgY29ubmVjdGlvbiA9IG5l");
    sb.append("dyBBZGFtYS5Db25uZWN0aW9uKC8qRU5EUE9JTlQ9WyovQWRhbWEuUHJvZHVjdGlvbi8qXSovKTsKICB2");
    sb.append("YXIgY29ubmVjdGlvbnMgPSB7fTsKCiAgdmFyIGNvbm5lY3Rpb25Nb25pdG9yRG9tID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgY29ubmVjdGlvbi5vbnN0YXR1c2NoYW5nZSA9IGZ1bmN0aW9u");
    sb.append("IChzdGF0dXMpIHsKICAgIHZhciBpY29uID0gZnVuY3Rpb24gKGNvbG9yKSB7IHJldHVybiAiPHN2ZyB4");
    sb.append("bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwi");
    sb.append("MCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiIiArIGNvbG9yICsgIlwiIHN0");
    sb.append("eWxlPVwid2lkdGg6MTZweDsgaGVpZ2h0OjE2cHhcIj48cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5k");
    sb.append("XCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTguMjg4IDE1LjAzOGE1LjI1IDUuMjUgMCAw");
    sb.append("MTcuNDI0IDBNNS4xMDYgMTEuODU2YzMuODA3LTMuODA4IDkuOTgtMy44MDggMTMuNzg4IDBNMS45MjQg");
    sb.append("OC42NzRjNS41NjUtNS41NjUgMTQuNTg3LTUuNTY1IDIwLjE1MiAwTTEyLjUzIDE4LjIybC0uNTMuNTMt");
    sb.append("LjUzLS41M2EuNzUuNzUgMCAwMTEuMDYgMHpcIiAvPjwvc3ZnPlxuIjsgfTsKICAgIGlmICghc3RhdHVz");
    sb.append("KSB7CiAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLnRpdGxlID0gImRpc2Nvbm5lY3RlZCI7CiAgICAg");
    sb.append("IGNvbm5lY3Rpb25Nb25pdG9yRG9tLmlubmVySFRNTCA9IGljb24oInJlZCIpOwogICAgICBjb25uZWN0");
    sb.append("aW9uLm9ucGluZyA9IGZ1bmN0aW9uIChfMSwgXzIpIHsgfTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbm5l");
    sb.append("Y3Rpb24ub25waW5nID0gZnVuY3Rpb24gKF8sIGxhdGVuY3kpIHsKICAgICAgICBjb25uZWN0aW9uTW9u");
    sb.append("aXRvckRvbS50aXRsZSA9ICJjb25uZWN0ZWQ7IGxhdGVuY3k9IiArIGxhdGVuY3kgKyAibXMiOwogICAg");
    sb.append("ICAgIGlmIChsYXRlbmN5ID49IDEwMCkgewogICAgICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20uaW5u");
    sb.append("ZXJIVE1MID0gaWNvbigib3JhbmdlIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbm5lY3Rp");
    sb.append("b25Nb25pdG9yRG9tLmlubmVySFRNTCA9IGljb24oImdyZWVuIik7CiAgICAgICAgfQogICAgICB9Owog");
    sb.append("ICAgfQogIH07CiAgY29ubmVjdGlvbk1vbml0b3JEb20uc3R5bGUgPSAicG9zaXRpb246Zml4ZWQ7IGJv");
    sb.append("dHRvbTowcHg7IHJpZ2h0OjBweCI7CiAgaWYgKEFkYW1hLkRlYnVnZ2VyKSB7CiAgICBjb25uZWN0aW9u");
    sb.append("TW9uaXRvckRvbS5vbmNsaWNrID0gQWRhbWEuRGVidWdnZXIudG9nZ2xlOwogIH0KICBjb25uZWN0aW9u");
    sb.append("LnN0YXJ0KCk7CgogIHZhciByb290UmVwbGFjZSA9ICIvIjsKICB2YXIgZml4UGF0aCA9IGZ1bmN0aW9u");
    sb.append("IChwYXRoKSB7CiAgICByZXR1cm4gcGF0aDsKICB9OwogIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdG5h");
    sb.append("bWUuZW5kc1dpdGgoIi5hZGFtYS1wbGF0Zm9ybS5jb20iKSAmJiAhd2luZG93LmxvY2F0aW9uLmhvc3Ru");
    sb.append("YW1lLmVuZHNXaXRoKCJpZGUuYWRhbWEtcGxhdGZvcm0uY29tIikpIHsKICAgIC8vIHRoaXMgZXhpc3Rz");
    sb.append("IGlmIHNvbWVvbmUgaXMgdHJ5aW5nIHRvIHVzZSB0aGUgZ2xvYmFsIGRvbWFpbiBmb3IgdGhlaXIgc2l0");
    sb.append("ZQogICAgdmFyIHBhcnRzID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCIvIik7CiAgICBy");
    sb.append("b290UmVwbGFjZSA9IFtwYXJ0c1swXSwgcGFydHNbMV0sIHBhcnRzWzJdLCAiIl0uam9pbigiLyIpOwog");
    sb.append("ICAgdmFyIG9mZnNldCA9IHBhcnRzWzBdLmxlbmd0aCArIHBhcnRzWzFdLmxlbmd0aCArIHBhcnRzWzJd");
    sb.append("Lmxlbmd0aCArIDI7CiAgICBmaXhQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHsKICAgICAgcmV0dXJuIHBh");
    sb.append("dGguc3Vic3RyaW5nKG9mZnNldCk7CiAgICB9OwogIH0KCiAgdmFyIGZpeEhyZWYgPSBmdW5jdGlvbiAo");
    sb.append("aHJlZikgewogICAgaWYgKCFocmVmKSB7CiAgICAgIHJldHVybiAiIyI7CiAgICB9CiAgICBpZiAoaHJl");
    sb.append("Zi5zdGFydHNXaXRoKCIvIikpIHsKICAgICAgcmV0dXJuIHJvb3RSZXBsYWNlICsgaHJlZi5zdWJzdHJp");
    sb.append("bmcoMSk7CiAgICB9CiAgICByZXR1cm4gaHJlZjsKICB9OwoKICB2YXIgZ2V0X2Nvbm5lY3Rpb25fb2Jq");
    sb.append("ID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgIGlmIChuYW1lIGluIGNvbm5lY3Rpb25zKSB7CiAgICAgIHJl");
    sb.append("dHVybiBjb25uZWN0aW9uc1tuYW1lXTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBvYmogPSB7CiAgICAg");
    sb.append("ICAgbmFtZTogbmFtZSwKICAgICAgICBwdHI6IG51bGwsCiAgICAgICAgdHJlZTogbmV3IEFkYW1hVHJl");
    sb.append("ZSgpLAogICAgICAgIG91dHN0YW5kaW5nOiB7fSwKICAgICAgICBkZWNpc2lvbnM6IHt9LAogICAgICAg");
    sb.append("IGNob2ljZV9zdWJzOiB7fSwKICAgICAgICByZXNldHM6IHt9LAogICAgICAgIGNvbm5lY3Rpb25fZXZl");
    sb.append("bnRzOiB7fSwKICAgICAgICBzeW5jX2V2ZW50czoge30sCiAgICAgICAgaWQ6IDAsCiAgICAgICAgY29u");
    sb.append("bmVjdGlvbl9zdGF0ZTogZmFsc2UsCiAgICAgICAgY2hvaWNlczoge30sCiAgICAgICAgYm91bmQ6ICIi");
    sb.append("LAogICAgICAgIHZpZXdzdGF0ZV9zZW50OiB0cnVlLAogICAgICAgIHZpZXdzdGF0ZV9jbG9uZTogIiIs");
    sb.append("CiAgICAgICAgaGFzX2ZpbHRlcjogZmFsc2UsCiAgICAgICAgc3luY2VkOiBmYWxzZSwKICAgICAgICBm");
    sb.append("aWx0ZXI6IHt9LAogICAgICAgIHZzc2VxOiAwLAogICAgICAgIGRlYnVnZ2VyOiBmdW5jdGlvbiAoZGVs");
    sb.append("dGEpIHsgfSwKICAgICAgICByYXc6IGNvbm5lY3Rpb24KICAgICAgfTsKICAgICAgb2JqLm51a2UgPSBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5jb25uZWN0aW9uX2V2ZW50cyA9IHt9OwogICAgICAgIHRo");
    sb.append("aXMuc3luY19ldmVudHMgPSB7fTsKICAgICAgICB0aGlzLmNob2ljZV9zdWJzID0ge307CiAgICAgIH0u");
    sb.append("YmluZChvYmopOwogICAgICBpZiAoQWRhbWEuRGVidWdnZXIpIHsKICAgICAgICBvYmouZGVidWdnZXIg");
    sb.append("PSBBZGFtYS5EZWJ1Z2dlci5yZWdpc3RlcihvYmopOwogICAgICB9CiAgICAgIG9iai5zeW5jID0gZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICAgIHZhciBzeW5jZWQgPSB0aGlzLmNvbm5lY3Rpb25fc3RhdGUgJiYgdGhp");
    sb.append("cy52aWV3c3RhdGVfc2VudDsKICAgICAgICBpZiAodGhpcy5zeW5jZWQgPT0gc3luY2VkKSB7CiAgICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuc3luY2VkID0gc3luY2VkOwogICAgICAg");
    sb.append("IHZhciBheGUgPSBbXTsKICAgICAgICBmb3IgKHZhciBzdWIgaW4gb2JqLnN5bmNfZXZlbnRzKSB7CiAg");
    sb.append("ICAgICAgICBpZiAoIShvYmouc3luY19ldmVudHNbc3ViXShzeW5jZWQpKSkgewogICAgICAgICAgICBh");
    sb.append("eGUucHVzaChzdWIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAgZGVsZXRlIG9iai5zeW5jX2V2ZW50c1theGVb");
    sb.append("a11dOwogICAgICAgIH0KICAgICAgfS5iaW5kKG9iaik7CiAgICAgIG9iai5zdWJzY3JpYmVfc3luYyA9");
    sb.append("IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHZhciBzID0gIi18IiArIHRoaXMuaWQrKzsKICAg");
    sb.append("ICAgICB0aGlzLnN5bmNfZXZlbnRzW3NdID0gY2FsbGJhY2s7CiAgICAgICAgY2FsbGJhY2sodGhpcy5z");
    sb.append("eW5jZWQpOwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5z");
    sb.append("eW5jX2V2ZW50c1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH07CiAgICAgIG9iai5zZXRf");
    sb.append("Y29ubmVjdGVkID0gZnVuY3Rpb24gKGNzKSB7CiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbl9zdGF0");
    sb.append("ZSA9PSBjcykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmNvbm5lY3Rp");
    sb.append("b25fc3RhdGUgPSBjczsKICAgICAgICB2YXIgYXhlID0gW107CiAgICAgICAgZm9yICh2YXIgc3ViIGlu");
    sb.append("IG9iai5jb25uZWN0aW9uX2V2ZW50cykgewogICAgICAgICAgaWYgKCEob2JqLmNvbm5lY3Rpb25fZXZl");
    sb.append("bnRzW3N1Yl0oY3MpKSkgewogICAgICAgICAgICBheGUucHVzaChzdWIpOwogICAgICAgICAgfQogICAg");
    sb.append("ICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAg");
    sb.append("ICAgZGVsZXRlIG9iai5jb25uZWN0aW9uX2V2ZW50c1theGVba11dOwogICAgICAgIH0KICAgICAgICB0");
    sb.append("aGlzLnN5bmMoKTsKICAgICAgfS5iaW5kKG9iaik7CiAgICAgIG9iai5jb25uZWN0ZWQgPSBmdW5jdGlv");
    sb.append("biAoY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9ICItfCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhp");
    sb.append("cy5jb25uZWN0aW9uX2V2ZW50c1tzXSA9IGNhbGxiYWNrOwogICAgICAgIGNhbGxiYWNrKHRoaXMuY29u");
    sb.append("bmVjdGlvbl9zdGF0ZSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0");
    sb.append("ZSB0aGlzLmNvbm5lY3Rpb25fZXZlbnRzW3NdOwogICAgICAgIH0uYmluZCh0aGlzKTsKICAgICAgfS5i");
    sb.append("aW5kKG9iaik7CiAgICAgIG9iai5zdWJzY3JpYmVfYW55ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAg");
    sb.append("ICAgICAgdmFyIHMgPSAiLXwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMuZGVjaXNpb25zW3NdID0g");
    sb.append("Y2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlz");
    sb.append("LmRlY2lzaW9uc1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAg");
    sb.append("ICBvYmouc3Vic2NyaWJlID0gZnVuY3Rpb24gKGNoYW5uZWwsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFy");
    sb.append("IHMgPSBjaGFubmVsICsgInwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMuZGVjaXNpb25zW3NdID0g");
    sb.append("Y2FsbGJhY2s7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlz");
    sb.append("LmRlY2lzaW9uc1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAg");
    sb.append("ICBvYmouc3Vic2NyaWJlX3Jlc2V0ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIGRy");
    sb.append("ID0gInJlc2V0fCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhpcy5yZXNldHNbZHJdID0gY2FsbGJhY2s7");
    sb.append("CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlc2V0c1tk");
    sb.append("cl07CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1YnNj");
    sb.append("cmliZV9jaG9pY2UgPSBmdW5jdGlvbiAoY2hhbm5lbCwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9");
    sb.append("IGNoYW5uZWwgKyAifCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhpcy5jaG9pY2Vfc3Vic1tzXSA9IGNh");
    sb.append("bGxiYWNrOwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5j");
    sb.append("aG9pY2Vfc3Vic1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAg");
    sb.append("ICBvYmoub25jaG9pY2VzID0gZnVuY3Rpb24gKGNoYW5uZWwsIGNob2ljZSkgewogICAgICAgIHZhciBh");
    sb.append("eGUgPSBbXTsKICAgICAgICBmb3IgKHZhciBzdWIgaW4gb2JqLmNob2ljZV9zdWJzKSB7CiAgICAgICAg");
    sb.append("ICBpZiAoc3ViLnN0YXJ0c1dpdGgoY2hhbm5lbCArICJ8IikpIHsKICAgICAgICAgICAgaWYgKCFvYmou");
    sb.append("Y2hvaWNlX3N1YnNbc3ViXShjaG9pY2UpKSB7CiAgICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAg");
    sb.append("ICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8");
    sb.append("IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAgZGVsZXRlIG9iai5jaG9pY2Vfc3Vic1theGVba11d");
    sb.append("OwogICAgICAgIH0KICAgICAgfTsKICAgICAgb2JqLm9uZGVjaWRlID0gZnVuY3Rpb24gKG91dHN0YW5k");
    sb.append("aW5nKSB7CiAgICAgICAgdmFyIGF4ZVJlc2V0ID0gW107CiAgICAgICAgZm9yICh2YXIgZHIgaW4gb2Jq");
    sb.append("LnJlc2V0cykgewogICAgICAgICAgdmFyIHIgPSBvYmoucmVzZXRzW2RyXTsKICAgICAgICAgIGlmICgh");
    sb.append("KHIoKSkpIHsKICAgICAgICAgICAgYXhlUmVzZXQucHVzaChkcik7CiAgICAgICAgICB9CiAgICAgICAg");
    sb.append("fQogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXhlUmVzZXQubGVuZ3RoOyBrKyspIHsKICAgICAg");
    sb.append("ICAgIGRlbGV0ZSBvYmoucmVzZXRzW2F4ZVJlc2V0W2tdXTsKICAgICAgICB9CiAgICAgICAgZm9yICh2");
    sb.append("YXIgY2ggaW4gb2JqLm91dHN0YW5kaW5nKSB7CiAgICAgICAgICBvYmoub3V0c3RhbmRpbmdbY2hdID0g");
    sb.append("eyBvcHRpb25zOiBbXSB9OwogICAgICAgIH0KICAgICAgICB2YXIgbiA9IG91dHN0YW5kaW5nLmxlbmd0");
    sb.append("aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgICAgdmFyIG8gPSBv");
    sb.append("dXRzdGFuZGluZ1trXTsKICAgICAgICAgIG9iai5vdXRzdGFuZGluZ1tvLmNoYW5uZWxdID0gbzsKICAg");
    sb.append("ICAgICB9CiAgICAgICAgZm9yICh2YXIgY2ggaW4gb2JqLm91dHN0YW5kaW5nKSB7CiAgICAgICAgICB2");
    sb.append("YXIgb3V0ID0gb2JqLm91dHN0YW5kaW5nW2NoXTsKICAgICAgICAgIHZhciBheGUgPSBbXTsKICAgICAg");
    sb.append("ICAgIGZvciAodmFyIHN1YiBpbiBvYmouZGVjaXNpb25zKSB7CiAgICAgICAgICAgIGlmIChzdWIuc3Rh");
    sb.append("cnRzV2l0aChjaCArICJ8IikgfHwgc3ViLnN0YXJ0c1dpdGgoIi18IikpIHsKICAgICAgICAgICAgICBp");
    sb.append("ZiAoIW9iai5kZWNpc2lvbnNbc3ViXShvdXQsIGNoKSkgewogICAgICAgICAgICAgICAgYXhlLnB1c2go");
    sb.append("c3ViKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGZv");
    sb.append("ciAodmFyIGsgPSAwOyBrIDwgYXhlLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgIGRlbGV0ZSBvYmou");
    sb.append("ZGVjaXNpb25zW2F4ZVtrXV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgICBjb25u");
    sb.append("ZWN0aW9uc1tuYW1lXSA9IG9iajsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwogIHNlbGYuZ2V0");
    sb.append("Q29ubmVjdGlvbkJ5TmFtZSA9IGdldF9jb25uZWN0aW9uX29iajsKCiAgc2VsZi5tYWtlID0gZnVuY3Rp");
    sb.append("b24gKCkgewogICAgcmV0dXJuIG5ldyBBZGFtYVRyZWUoKTsKICB9OwoKICAvLyBIRUxQRVIgfCBzdWJz");
    sb.append("Y3JpYmUgdGhlIGdpdmVuICdzdWInIHRvIGNoYW5nZXMgd2l0aGluIHN0YXRlIGZvciB0aGUgZ2l2ZW4g");
    sb.append("ZmllbGQgbmFtZWQgbmFtZQogIHZhciBzdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIHN1");
    sb.append("YikgewogICAgdmFyIHNzID0gc2VsZi5wSShzdGF0ZSwgbmFtZSk7CiAgICB2YXIgcyA9IHNzW3NzLmN1");
    sb.append("cnJlbnRdOwogICAgaWYgKHMgPT0gbnVsbCkgewogICAgICBjb25zb2xlLmVycm9yKHNzLmN1cnJlbnQg");
    sb.append("KyAiIGlzIG5vdCBhdmFpbGFibGU7IHVuYWJsZSB0byBzdWJzY3JpYmUuIik7CiAgICAgIHJldHVybjsK");
    sb.append("ICAgIH0KICAgIGlmICgiQGUiIGluIHMuZGVsdGEpIHsKICAgICAgcy5kZWx0YVsiQGUiXS5wdXNoKHN1");
    sb.append("Yik7CiAgICB9IGVsc2UgewogICAgICBzLmRlbHRhWyJAZSJdID0gW3N1Yl07CiAgICB9CiAgfTsKICBz");
    sb.append("ZWxmLnN1YnNjcmliZSA9IHN1YnNjcmliZTsKCiAgLy8gSEVMUEVSIHwgY3JlYXRlIGZyZXNoIHN0YXRl");
    sb.append("CiAgdmFyIGZyZXNoID0gZnVuY3Rpb24gKHdoZXJlKSB7CiAgICByZXR1cm4gewogICAgICB0cmVlOiBu");
    sb.append("ZXcgQWRhbWFUcmVlKCksCiAgICAgIGRlbHRhOiB7fSwKICAgICAgcGFyZW50OiBudWxsLAogICAgICBw");
    sb.append("YXRoOiBudWxsLAogICAgICB3aGVyZTogd2hlcmUKICAgIH07CiAgfTsKICBzZWxmLmZyZXNoID0gZnJl");
    sb.append("c2g7CgogIC8vIEhFTFBFUjogcmVtb3ZlIHBvdGVudGlhbGx5IHNlbnNpdGl2ZSBpbmZvcm1hdGlvbiBm");
    sb.append("cm9tIGFuIG9iamVjdAogIHZhciBzYWZlX2ZpbHRlciA9IGZ1bmN0aW9uKG8pIHsKICAgIGlmICgncGFz");
    sb.append("c3dvcmQnIGluIG8pIHsKICAgICAgZGVsZXRlIG9bJ3Bhc3N3b3JkJ107CiAgICB9CiAgICBpZiAoJ29u");
    sb.append("ZV90aW1lX3Bhc3N3b3JkJyBpbiBvKSB7CiAgICAgIGRlbGV0ZSBvWydvbmVfdGltZV9wYXNzd29yZCdd");
    sb.append("OwogICAgfQogICAgcmV0dXJuIG87CiAgfQoKICAvLyBIRUxQRVIgfCBjcmVhdGUgYSBuZXcgZGVsdGEg");
    sb.append("Y29weSBmcm9tIHRoZSBnaXZlbiBzcGVjaWZpYyBzdGF0ZSAoaS5lLiBlaXRoZXIgZGF0YSBvciB2aWV3");
    sb.append("KQogIHZhciBuZXdfZGVsdGFfY29weSA9IGZ1bmN0aW9uIChzcykgewogICAgaWYgKHNzID09IG51bGwp");
    sb.append("IHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICB2YXIgcGFyZW50ID0gbnVsbDsKICAgIGlmIChz");
    sb.append("cy5wYXJlbnQgIT0gbnVsbCkgewogICAgICBwYXJlbnQgPSBuZXdfZGVsdGFfY29weShzcy5wYXJlbnQp");
    sb.append("OwogICAgfQogICAgdmFyIG5ld19kZWx0YSA9IHt9OwogICAgaWYgKHBhcmVudCAhPSBudWxsKSB7CiAg");
    sb.append("ICAgIHBhcmVudC5kZWx0YVtzcy5wYXRoXSA9IG5ld19kZWx0YTsKICAgIH0KICAgIHJldHVybiB7IHRy");
    sb.append("ZWU6IHNzLnRyZWUsIHBhcmVudDogcGFyZW50LCBkZWx0YTogbmV3X2RlbHRhLCBwYXRoOiBzcy5wYXRo");
    sb.append("IH07CiAgfTsKICBzZWxmLm1ha2VEZWx0YUNvcHkgPSBuZXdfZGVsdGFfY29weTsKCiAgLy8gSEVMUEVS");
    sb.append("IHwgY29uc3RydWN0IGEgcGF0aCB0bwogIHZhciBwYXRoX3RvID0gZnVuY3Rpb24gKHNzLCBvYmopIHsK");
    sb.append("ICAgIGlmIChzcy5wYXJlbnQgIT0gbnVsbCkgewogICAgICB2YXIgcGVlbCA9IHt9OwogICAgICBwZWVs");
    sb.append("W3NzLnBhdGhdID0gb2JqOwogICAgICByZXR1cm4gcGF0aF90byhzcy5wYXJlbnQsIHBlZWwpOwogICAg");
    sb.append("fSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwogIHNlbGYucGF0aFRvID0gcGF0aF90");
    sb.append("bzsKCiAgLy8gSEVMUEVSIHwgZ2V0IHRoZSByb290IG9mIHRoZSBzcGVjaWZpYyBzdGF0ZSAoaS5lLiBl");
    sb.append("aXRoZXIgdGhlIGRhdGEncyByb290IG9yIHRoZSB2aWV3J3Mgcm9vdCkKICB2YXIgcm9vdF9vZiA9IGZ1");
    sb.append("bmN0aW9uIChzcykgewogICAgdmFyIHggPSBzczsKICAgIHdoaWxlICh4LnBhcmVudCAhPSBudWxsKSB7");
    sb.append("CiAgICAgIHggPSB4LnBhcmVudDsKICAgIH0KICAgIHJldHVybiB4OwogIH07CiAgc2VsZi5yb290T2Yg");
    sb.append("PSByb290X29mOwoKICAvLyBIRUxQRVIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBmcm9tIHRoZSBn");
    sb.append("aXZlbiBET00gbm9kZQogIHZhciBudWtlID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3Qg");
    sb.append("PSBwYXJlbnQubGFzdENoaWxkOwogICAgd2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNo");
    sb.append("aWxkKGxhc3QpOwogICAgICBsYXN0ID0gcGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwogIHNlbGYu");
    sb.append("bnVrZSA9IG51a2U7CgogIC8vIEhFTFBFUjogZGVib3VuY2UgdGhlIGdpdmVuIGZ1bmN0aW9uYWwgd2hl");
    sb.append("biByYXBpZCBmdW5jdGlvbiBzcHJlYWQgaXMgZXhwZWN0ZWQKICB2YXIgZGVib3VuY2UgPSBmdW5jdGlv");
    sb.append("biAobXMsIGZvbykgewogICAgdmFyIHN0YXR1cyA9IHsgaW5mbGlnaHQ6IGZhbHNlLCB0aW1lb3V0OiBu");
    sb.append("dWxsIH07CiAgICBzdGF0dXMuaW5mbGlnaHQgPSBmYWxzZTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgIGlmICghc3RhdHVzLmluZmxpZ2h0KSB7CiAgICAgICAgc3RhdHVzLmluZmxpZ2h0ID0gdHJ1");
    sb.append("ZTsKICAgICAgICBzdGF0dXMudGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgICAgICAgIHN0YXR1cy5pbmZsaWdodCA9IGZhbHNlOwogICAgICAgICAgc3RhdHVzLnRpbWVvdXQg");
    sb.append("PSBudWxsOwogICAgICAgICAgZm9vKCk7CiAgICAgICAgfSwgbXMgLyogbXMgKi8pOyAvLyBkZWJvdW5j");
    sb.append("ZSB0aGUgcGFyYW1ldGVycwogICAgICB9CiAgICB9OwogIH07CiAgc2VsZi5kZWJvdW5jZSA9IGRlYm91");
    sb.append("bmNlOwoKICAvLyBIRUxQRVIgfCBwcmVwYXJlIGEgZnJlZSB1bnN1YnNjcmliZSBvYmplY3QKICB2YXIg");
    sb.append("bWFrZV91bnN1YiA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIF9fZGF0YTogZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICB9LCBfX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgICAgfQogICAgfTsKICB9OwoK");
    sb.append("ICAvLyBIRUxQRVIgfCBhdWdtZW50IGFuIGV4aXN0aW5nIG9iamVjdCB3aXRoIHVuc3Vic2NyaWJlIGRh");
    sb.append("dGEKICB2YXIgYWRkX3Vuc3ViID0gZnVuY3Rpb24gKG9iaikgewogICAgb2JqLl9fZGF0YSA9IGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgIH07CiAgICBvYmouX192aWV3ID0gZnVuY3Rpb24gKCkgewogICAgfTsKICB9OwoK");
    sb.append("ICAvLyBIRUxQRVIgfCBmaXJlIHRoZSB1bnN1YnNjcmliZSBjYWxscyB3aXRoaW4gYW4gb2JqZWN0CiAg");
    sb.append("dmFyIGZpcmVfdW5zdWIgPSBmdW5jdGlvbiAodW5zdWIpIHsKICAgIHVuc3ViLl9fZGF0YSgpOwogICAg");
    sb.append("dW5zdWIuX192aWV3KCk7CiAgfTsKCiAgdmFyIGlzRW1wdHlEZWx0YSA9IGZ1bmN0aW9uKGRlbHRhKSB7");
    sb.append("CiAgICBpZiAodHlwZW9mKGRlbHRhKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVybiBmYWxzZTsK");
    sb.append("ICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkZWx0YSkpIHsKICAgICAgZm9yICh2YXIgaiA9IDA7");
    sb.append("IGogPCBkZWx0YS5sZW5ndGg7IGorKykgewogICAgICAgIGlmICghaXNFbXB0eURlbHRhKGRlbHRhW2pd");
    sb.append("KSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIGlm");
    sb.append("ICh0eXBlb2YoZGVsdGEpID09ICJvYmplY3QiKSB7CiAgICAgIGZvciAodmFyIGsgaW4gZGVsdGEpIHsK");
    sb.append("ICAgICAgICBpZiAoIWlzRW1wdHlEZWx0YShkZWx0YVtrXSkpIHsKICAgICAgICAgIHJldHVybiBmYWxz");
    sb.append("ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy8gSEVMUEVS");
    sb.append("IHwgc3Vic2NyaWJlIHRvIHN0YXRlIGFuZCBwb3B1bGF0ZSB1bnN1YnNjcmliZSBvYmplY3QKICB2YXIg");
    sb.append("c3Vic2NyaWJlX3N0YXRlID0gZnVuY3Rpb24gKHN0YXRlLCB1bnN1YikgewogICAgLy8gICYmICFpc0Vt");
    sb.append("cHR5RGVsdGEoc3RhdGUuZGF0YSkKICAgIHVuc3ViLl9fZGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgIH07");
    sb.append("CiAgICB1bnN1Yi5fX3ZpZXcgPSBmdW5jdGlvbiAoKSB7CiAgICB9OwoKICAgIGlmIChzdGF0ZS5kYXRh");
    sb.append("ICE9IG51bGwpIHsKICAgICAgdmFyIGRlbHRhID0gcm9vdF9vZihzdGF0ZS5kYXRhKS5kZWx0YTsKICAg");
    sb.append("ICAgaWYgKCFpc0VtcHR5RGVsdGEoZGVsdGEpKSB7CiAgICAgICAgdW5zdWIuX19kYXRhID0gc3RhdGUu");
    sb.append("ZGF0YS50cmVlLnN1YnNjcmliZShkZWx0YSk7CiAgICAgIH0KICAgIH0KICAgIC8vICAmJiAhaXNFbXB0");
    sb.append("eURlbHRhKHN0YXRlLnZpZXcpCiAgICBpZiAoc3RhdGUudmlldyAhPSBudWxsKSB7CiAgICAgIHZhciBk");
    sb.append("ZWx0YSA9IHJvb3Rfb2Yoc3RhdGUudmlldykuZGVsdGE7CiAgICAgIGlmICghaXNFbXB0eURlbHRhKGRl");
    sb.append("bHRhKSkgewogICAgICAgIHVuc3ViLl9fdmlldyA9IHN0YXRlLnZpZXcudHJlZS5zdWJzY3JpYmUoZGVs");
    sb.append("dGEpOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8IFN3aXRjaCB0byB0aGUgdmlldyBv");
    sb.append("YmplY3QKICBzZWxmLnBWID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4geyBzZXJ2aWNlOiBz");
    sb.append("dGF0ZS5zZXJ2aWNlLCBkYXRhOiBzdGF0ZS5kYXRhLCB2aWV3OiBzdGF0ZS52aWV3LCBjdXJyZW50OiAi");
    sb.append("dmlldyIgfTsKICB9OwogIHNlbGYubmV3U3RhdGVWaWV3T2YgPSBzZWxmLnBWOwoKICAvLyBSVU5USU1F");
    sb.append("IHwgU3dpdGNoIHRvIHRoZSBkYXRhIG9iamVjdAogIHNlbGYucEQgPSBmdW5jdGlvbiAoc3RhdGUpIHsK");
    sb.append("ICAgIHJldHVybiB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6");
    sb.append("IHN0YXRlLnZpZXcsIGN1cnJlbnQ6ICJkYXRhIiB9OwogIH07CiAgc2VsZi5uZXdTdGF0ZURhdGFPZiA9");
    sb.append("IHNlbGYucEQ7CgogIC8vIFJVTlRJTUUgfCBTd2l0Y2ggdG8gdGhlIHJvb3Qgb2JqZWN0IC8gKFJvb3Qp");
    sb.append("CiAgc2VsZi5wUiA9IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6IHN0");
    sb.append("YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6IHN0");
    sb.append("YXRlLmN1cnJlbnQgfTsKICAgIHZhciBwcmlvciA9IG5leHRbc3RhdGUuY3VycmVudF07CiAgICB3aGls");
    sb.append("ZSAocHJpb3IgIT0gbnVsbCkgewogICAgICBuZXh0W3N0YXRlLmN1cnJlbnRdID0gcHJpb3I7CiAgICAg");
    sb.append("IHByaW9yID0gcHJpb3IucGFyZW50OwogICAgfQogICAgcmV0dXJuIG5leHQ7CiAgfTsKICBzZWxmLm5l");
    sb.append("d1N0YXRlUm9vdE9mID0gc2VsZi5wUjsKCiAgLy8gUlVOVElNRSB8IC4uLyAoVXApCiAgc2VsZi5wVSA9");
    sb.append("IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2Us");
    sb.append("IGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6IHN0YXRlLmN1cnJlbnQg");
    sb.append("fTsKICAgIHZhciBwcmlvciA9IG5leHRbc3RhdGUuY3VycmVudF07CiAgICBpZiAocHJpb3IucGFyZW50");
    sb.append("ICE9IG51bGwpIHsKICAgICAgbmV4dFtzdGF0ZS5jdXJyZW50XSA9IHByaW9yLnBhcmVudDsKICAgIH0K");
    sb.append("ICAgIHJldHVybiBuZXh0OwogIH07CiAgc2VsZi5uZXdTdGF0ZVBhcmVudE9mID0gc2VsZi5wVTsKCiAg");
    sb.append("Ly8gUlVOVElNRSB8IGRpdmUgb25lIGxldmVsIEludG8gcGF0aDEvcGF0aDIvLi4uLi9wYXRoTgogIHNl");
    sb.append("bGYucEkgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUpIHsKICAgIHZhciBwcmlvciA9IHN0YXRlW3N0YXRl");
    sb.append("LmN1cnJlbnRdOwogICAgaWYgKHByaW9yID09IG51bGwpIHsKICAgICAgY29uc29sZS5lcnJvcihzdGF0");
    sb.append("ZS5jdXJyZW50ICsgIiBpcyBub3QgcHJlc2VudCIpOwogICAgICByZXR1cm4gc3RhdGU7CiAgICB9CiAg");
    sb.append("ICBpZiAoIShuYW1lIGluIHByaW9yLmRlbHRhKSkgewogICAgICBwcmlvci5kZWx0YVtuYW1lXSA9IHt9");
    sb.append("OwogICAgfQogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRl");
    sb.append("LmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6IHN0YXRlLmN1cnJlbnQgfTsKICAgIG5leHRb");
    sb.append("c3RhdGUuY3VycmVudF0gPSB7CiAgICAgIHRyZWU6IHByaW9yLnRyZWUsCiAgICAgIGRlbHRhOiBwcmlv");
    sb.append("ci5kZWx0YVtuYW1lXSwKICAgICAgcGFyZW50OiBwcmlvciwKICAgICAgcGF0aDogbmFtZQogICAgfTsK");
    sb.append("ICAgIGlmIChuZXh0LmN1cnJlbnQgPT0gImRhdGEiKSB7CiAgICAgIG5leHQuZGF0YS5jb25uZWN0aW9u");
    sb.append("ID0gcHJpb3IuY29ubmVjdGlvbjsKICAgIH0KICAgIHJldHVybiBuZXh0OwogIH07CiAgc2VsZi5uZXdT");
    sb.append("dGF0ZURpdmVJbnRvID0gc2VsZi5wSTsKCiAgLy8gUlVOVElNRSB8IGV4dGVuZCB0aGUgZ2l2ZW4gc3Rh");
    sb.append("dGUgd2l0aCB0aGUgdmlldyBoYXZpbmcgYSBzZXBhcmF0ZSBjaGlsZAogIHNlbGYucEVWID0gZnVuY3Rp");
    sb.append("b24gKHN0YXRlLCBuYW1lKSB7CiAgICBpZiAoIShuYW1lIGluIHN0YXRlLnZpZXcuZGVsdGEpKSB7CiAg");
    sb.append("ICAgIHN0YXRlLnZpZXcuZGVsdGFbbmFtZV0gPSB7fTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHNl");
    sb.append("cnZpY2U6IHN0YXRlLnNlcnZpY2UsCiAgICAgIGRhdGE6IHN0YXRlLmRhdGEsCiAgICAgIHZpZXc6IHsK");
    sb.append("ICAgICAgICB0cmVlOiBzdGF0ZS52aWV3LnRyZWUsCiAgICAgICAgZGVsdGE6IHN0YXRlLnZpZXcuZGVs");
    sb.append("dGFbbmFtZV0sCiAgICAgICAgcGFyZW50OiBzdGF0ZS52aWV3LAogICAgICAgIHBhdGg6IG5hbWUKICAg");
    sb.append("ICAgfSwKICAgICAgY3VycmVudDogc3RhdGUuY3VycmVudAogICAgfTsKICB9OwogIHNlbGYubmV3U3Rh");
    sb.append("dGVDcmVhdGVWaWV3Q2hpbGQgPSBzZWxmLnBFVjsKCiAgc2VsZi5wSUUgPSBmdW5jdGlvbiAoc3RhdGUs");
    sb.append("IG5hbWUsIGV4cGFuZFZpZXcpIHsKICAgIHZhciBuZXh0ID0gc2VsZi5wSShzdGF0ZSwgbmFtZSk7CiAg");
    sb.append("ICBpZiAoZXhwYW5kVmlldykgewogICAgICByZXR1cm4gc2VsZi5wRVYobmV4dCwgbmFtZSk7CiAgICB9");
    sb.append("IGVsc2UgewogICAgICByZXR1cm4gbmV4dDsKICAgIH0KICB9OwoKICB2YXIgZm9yayA9IGZ1bmN0aW9u");
    sb.append("IChwcmlvclN0YXRlKSB7CiAgICB2YXIgc3RhdGUgPSB7CiAgICAgIHNlcnZpY2U6IHByaW9yU3RhdGUu");
    sb.append("c2VydmljZSwKICAgICAgZGF0YTogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS5kYXRhKSwKICAgICAg");
    sb.append("dmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgY3VycmVudDogcHJpb3JT");
    sb.append("dGF0ZS5jdXJyZW50CiAgICB9OwogICAgaWYgKHN0YXRlLmRhdGEgIT0gbnVsbCkgewogICAgICBzdGF0");
    sb.append("ZS5kYXRhLmNvbm5lY3Rpb24gPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbjsKICAgIH0KICAgIHJl");
    sb.append("dHVybiBzdGF0ZTsKICB9OwoKICAvLyBSVU5USU1FIHwgc3Vic2NyaWJlIGJldHdlZW4gdGhlIHN0YXRl");
    sb.append("IGFuZCB0aGUgb2JqZWN0LgogIC8vIFdoZW4gdGhlIG1lbWJlciBmaWVsZCB3aXRoaW4gc3RhdGUgb2Yg");
    sb.append("bmFtZSBjaGFuZ2VzLCBjb3B5IHRoYXQgdmFsdWUgaW50byB0aGUgb2JqIGFuZCBydW4gcmVjb21wdXRl");
    sb.append("KCkKICBzZWxmLlkgPSBmdW5jdGlvbiAoc3RhdGUsIG9iaiwgbmFtZSwgcmVjb21wdXRlKSB7CiAgICB2");
    sb.append("YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICBy");
    sb.append("ZWNvbXB1dGUoKTsKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfTsKCiAg");
    sb.append("c2VsZi5ZMiA9IGZ1bmN0aW9uIChzdGF0ZSwgciwga2V5LCBuYW1lLCByZWNvbXB1dGUpIHsKICAgIHZh");
    sb.append("ciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG9iaiA9IHIuX1trZXldOwogICAgICBv");
    sb.append("YmpbbmFtZV0gPSB2YWx1ZTsKICAgICAgcmVjb21wdXRlKG9iaik7CiAgICAgIHJldHVybiB0cnVlOwog");
    sb.append("ICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBSVU5USU1FOiBi");
    sb.append("dWlsZCBhbiByeG9iagogIHNlbGYuUlggPSBmdW5jdGlvbiAodmFycykgewogICAgdmFyIG8gPSB7fTsK");
    sb.append("ICAgIG8uXyA9IHt9OwogICAgZm9yICh2YXIgayA9IDA7IGsgPCB2YXJzLmxlbmd0aDsgaysrKSB7CiAg");
    sb.append("ICAgIG8uX1t2YXJzW2tdXSA9IHt9OwogICAgfQogICAgby5fXyA9IGZ1bmN0aW9uKCkge307CiAgICBy");
    sb.append("ZXR1cm4gbzsKICB9OwoKICAvLyBSVU5USU1FIHwgSnVzdCBzdWJzY3JpYmVlIHZhbHVlIHRvIHRoZSBv");
    sb.append("YmplY3QgZmllbGQgb2YgbmFtZSAobm8tcmVjb21wdXRlKQogIHNlbGYuWVMgPSBmdW5jdGlvbiAoc3Rh");
    sb.append("dGUsIG9iaiwgbmFtZSkgewogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBvYmpb");
    sb.append("bmFtZV0gPSB2YWx1ZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRl");
    sb.append("LCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJTUUgfCAiVGV4dCIKICBzZWxmLlQgPSBmdW5jdGlv");
    sb.append("biAodHgpIHsKICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0eCk7CiAgfTsKCiAgLy8g");
    sb.append("Y29udmVydCBhIHZhbHVlIGludG8gYSBib29sZWFuCiAgc2VsZi5CID0gZnVuY3Rpb24odmFsKSB7CiAg");
    sb.append("ICBpZiAodmFsID09PSB0cnVlKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIHZh");
    sb.append("bCA9PSAidHJ1ZSI7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx2aWV3LXdyaXRlIG5hbWU9IiIgdmFsdWU9");
    sb.append("IiI+CiAgc2VsZi5WVyA9IGZ1bmN0aW9uKHN0YXRlLCBuYW1lLCByeE9iaikgewogICAgcnhPYmouX18g");
    sb.append("PSBkZWJvdW5jZSg1MCwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgdmFyIHZh");
    sb.append("bHVlID0gcnhPYmoudmFsdWU7CiAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24iKSB7");
    sb.append("CiAgICAgICAgb2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvYmpbbmFt");
    sb.append("ZV0gPSB2YWx1ZTsKICAgICAgfQogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9i");
    sb.append("aik7CiAgICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsKICAgIH0pOwog");
    sb.append("IH07CgogIC8vIFJVTlRJTUUgfCA8bG9va3VwIHBhdGg9Li4uPgogIHNlbGYuTCA9IGZ1bmN0aW9uIChz");
    sb.append("dGF0ZSwgbmFtZSkgewogICAgdmFyIGRvbSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTsKICAg");
    sb.append("IHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgZG9tLm5vZGVWYWx1ZSA9IHZhbHVlOwog");
    sb.append("ICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICAgIHJldHVybiBkb207CiAgfTsK");
    sb.append("CiAgLy8gUlVOVElNRSB8IDxsb29rdXAgcGF0aD0uLi4gdHJhbnNmb3JtPSIkdHJhbnNmb3JtIiAvPgog");
    sb.append("IHNlbGYuTFQgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIHRyYW5zZm9ybSkgewogICAgdmFyIGRvbSA9");
    sb.append("IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTsKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUp");
    sb.append("IHsKICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHsKICAgICAgICBkb20ubm9kZVZhbHVlID0gdHJhbnNm");
    sb.append("b3JtKHZhbHVlKTsKICAgICAgfQogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsK");
    sb.append("ICAgIHJldHVybiBkb207CiAgfTsKCiAgc2VsZi5MaCA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSkgewog");
    sb.append("ICAgdmFyIGRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgIHZhciBzdWIgPSBm");
    sb.append("dW5jdGlvbiAodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHsKICAgICAgICBkb20uaW5u");
    sb.append("ZXJIVE1MID0gdmFsdWU7CiAgICAgIH0KICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1");
    sb.append("Yik7CiAgICByZXR1cm4gZG9tOwogIH07CgogIC8vIFJVTlRJTUUgfCA8bG9va3VwIHBhdGg9Li4uIHRy");
    sb.append("YW5zZm9ybT0iJHRyYW5zZm9ybSIgLz4KICBzZWxmLkxUZFQgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUs");
    sb.append("IHRyYW5zZm9ybSwgZnJlcSkgewogICAgdmFyIGRvbSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIi");
    sb.append("KTsKICAgIC8vIGNyZWF0ZSB0aGUgbmV4dXMgb2JqZWN0CiAgICB2YXIgb2JqID0ge307CiAgICBvYmou");
    sb.append("ZnJlcSA9IGZyZXE7CiAgICBvYmoudmFsdWUgPSAiIjsKCiAgICAvLyB1cGRhdGUgd2lsbCBleGVjdXRl");
    sb.append("IHRoZSB0cmFuc2Zvcm0gb24gdGhlIHZhbHVlCiAgICBvYmoudXBkYXRlID0gZnVuY3Rpb24oKSB7CiAg");
    sb.append("ICAgIGRvbS5ub2RlVmFsdWUgPSB0cmFuc2Zvcm0odGhpcy52YWx1ZSk7CiAgICB9LmJpbmQob2JqKTsK");
    sb.append("CiAgICAvLyBzdWJzY3JpcHRpb24gd2lsbCBzeW5jIHRoZSB2YWx1ZQogICAgdmFyIHN1YiA9IGZ1bmN0");
    sb.append("aW9uICh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAgICAgIHRoaXMudmFsdWUg");
    sb.append("PSB2YWx1ZTsKICAgICAgICB0aGlzLnVwZGF0ZSgpOwogICAgICB9CiAgICB9LmJpbmQob2JqKTsKCiAg");
    sb.append("ICAvLyByZWZyZXNoIHdpbGwgcmUtZXhlY3V0ZSB0aGUgdXBkYXRlIChhbmQgdGh1cyB0aGUgdHJhbnNm");
    sb.append("b3JtKQogICAgb2JqLnJlZnJlc2ggPSBmdW5jdGlvbigpIHsKICAgICAgdGhpcy51cGRhdGUoKTsKICAg");
    sb.append("ICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMoZG9tKSkgeyAvLyB3aWxsIHJ1biBzbyBsb25nIGFz");
    sb.append("IHRoZSBET00gY29udGFpbnMgdGhlIG5vZGUgd2UgbWFuaXB1bGF0ZWQKICAgICAgICB3aW5kb3cuc2V0");
    sb.append("VGltZW91dCh0aGlzLnJlZnJlc2gsIHRoaXMuZnJlcSk7CiAgICAgIH0KICAgIH0uYmluZChvYmopOwog");
    sb.append("ICAgLy8ga2ljayBvZmYgdGhlIGF1dG8gdHJhbnNmb3JtCiAgICB3aW5kb3cuc2V0VGltZW91dChvYmou");
    sb.append("cmVmcmVzaCwgZnJlcSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICByZXR1cm4g");
    sb.append("ZG9tOwogIH07CgogIC8vIFJVTlRJTUUgfCA8dGFnPgogIHNlbGYuRSA9IGZ1bmN0aW9uICh0YWcsIG5z");
    sb.append("KSB7CiAgICBpZiAobnMgPT0gdW5kZWZpbmVkIHx8IG5zID09IG51bGwpIHsKICAgICAgdmFyIGRvbSA9");
    sb.append("IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTsKICAgICAgaWYgKHRhZyA9PSAic2VsZWN0Iikgewog");
    sb.append("ICAgICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHsgZG9tLnJ4dmFs");
    sb.append("dWUgPSBkb20udmFsdWU7IH0pOwogICAgICB9CiAgICAgIHJldHVybiBkb207CiAgICB9IGVsc2Ugewog");
    sb.append("ICAgICB2YXIgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCB0YWcpOwogICAgICBy");
    sb.append("ZXN1bHQuc2V0QXR0cmlidXRlKCJ4bWxucyIsIG5zKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0K");
    sb.append("ICB9OwoKICAvLyBSVU5USU1FIHwgPHBpY2sgbmFtZT0uLi4+CiAgc2VsZi5QID0gZnVuY3Rpb24gKHBh");
    sb.append("cmVudCwgcHJpb3JTdGF0ZSwgcnhPYmosIGNoaWxkTWFrZXJDb25uZWN0ZWQsIGNoaWxkTWFrZXJEaXNj");
    sb.append("b25uZWN0ZWQsIGtlZXBPcGVuKSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICByeE9i");
    sb.append("ai5fXyA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCEoJ25hbWUnIGluIHJ4T2JqKSkgewogICAgICAg");
    sb.append("IHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5uYW1lID09IHJ4T2JqLm5hbWUpIHsKICAgICAg");
    sb.append("ICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNvID0gZ2V0X2Nvbm5lY3Rpb25fb2JqKHJ4T2JqLm5h");
    sb.append("bWUpOwogICAgICB0aGlzLm5hbWUgPSByeE9iai5uYW1lOwogICAgICBjby5jb25uZWN0ZWQoZnVuY3Rp");
    sb.append("b24gKGNzKSB7CiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWQgJiYga2VlcE9wZW4pIHsKICAgICAgICAg");
    sb.append("IHJldHVybjsKICAgICAgICB9CiAgICAgICAgbnVrZShwYXJlbnQpOwogICAgICAgIGZpcmVfdW5zdWIo");
    sb.append("dW5zdWIpOwogICAgICAgIHZhciBzdGF0ZSA9IHsKICAgICAgICAgIHNlcnZpY2U6IHByaW9yU3RhdGUu");
    sb.append("c2VydmljZSwKICAgICAgICAgIGRhdGE6IHsgY29ubmVjdGlvbjogY28sIHRyZWU6IGNvLnRyZWUsIGRl");
    sb.append("bHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAgICAgICB2aWV3OiBuZXdfZGVs");
    sb.append("dGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICAgICAgY3VycmVudDogImRhdGEiCiAgICAgICAg");
    sb.append("fTsKICAgICAgICBpZiAoY3MpIHsKICAgICAgICAgIHRoaXMucmVuZGVyZWQgPSB0cnVlOwogICAgICAg");
    sb.append("ICAgY2hpbGRNYWtlckNvbm5lY3RlZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICB9IGVsc2UgewogICAg");
    sb.append("ICAgICAgY2hpbGRNYWtlckRpc2Nvbm5lY3RlZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICB9CiAgICAg");
    sb.append("ICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgICAgLy8gVE9ETzogcmV0dXJuIGZh");
    sb.append("bHNlIHRvIHVuc3ViCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0uYmluZCh0aGlzKSk7CiAgICB9");
    sb.append("LmJpbmQoeyBuYW1lOiAiIiwgcmVuZGVyZWQ6ZmFsc2UgfSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0");
    sb.append("ZW1wbGF0ZSBuYW1lPSIuLi4iPgogIHNlbGYuVFAgPSBmdW5jdGlvbiAobmFtZSwgZm9vKSB7CiAgICB0");
    sb.append("ZW1wbGF0ZXNbbmFtZV0gPSBmb287CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0YWcgcng6dGVtcGxhdGU9");
    sb.append("JG5hbWU+CiAgc2VsZi5VVCA9IGZ1bmN0aW9uIChwYXJlbnQsIHN0YXRlLCBuYW1lLCBjaGlsZF9tYWtl");
    sb.append("cikgewogICAgdmFyIGZvbyA9IHRlbXBsYXRlc1tuYW1lXTsKICAgIGlmICh0eXBlb2YoZm9vKSA9PSAi");
    sb.append("ZnVuY3Rpb24iKSB7CiAgICAgIGZvbyhwYXJlbnQsIHN0YXRlLCBjaGlsZF9tYWtlcik7CiAgICB9IGVs");
    sb.append("c2UgewogICAgICBjb25zb2xlLmVycm9yKCJmYWlsZWQgdG8gZmluZCB0ZW1wbGF0ZTogIiArIG5hbWUp");
    sb.append("OwogICAgfQogIH07CgogIC8vIFJVTlRJTUUgfCA8dGFnIHJ4OnN3aXRjaD1wYXRoIC4uPgogIHNlbGYu");
    sb.append("U1cgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBuYW1lLCBjaGlsZHJlbk1ha2VyKSB7CiAg");
    sb.append("ICB2YXIgc3dzdCA9IHsgcHJpb3I6IG51bGwgfTsKICAgIGFkZF91bnN1Yihzd3N0KTsKICAgIHZhciBz");
    sb.append("dWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09IHRoaXMucHJpb3IpIHsKICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5wcmlvciA9IHZhbHVlOwogICAgICBmaXJlX3Vu");
    sb.append("c3ViKHRoaXMpOwogICAgICBudWtlKHBhcmVudCk7CiAgICAgIHZhciBzdGF0ZSA9IGZvcmsocHJpb3JT");
    sb.append("dGF0ZSk7CiAgICAgIGNoaWxkcmVuTWFrZXIocGFyZW50LCBzZWxmLnBEKHN0YXRlKSwgIiIgKyB2YWx1");
    sb.append("ZSk7CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdGhpcyk7CgogICAgfS5iaW5kKHN3c3QpOwog");
    sb.append("ICAgc3Vic2NyaWJlKHByaW9yU3RhdGUsIG5hbWUsIHN1Yik7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0");
    sb.append("YWcgcng6aXRlcmF0ZT1wYXRoIC4uLj4KICBzZWxmLklUID0gZnVuY3Rpb24gKHBhcmVudERvbSwgc3Rh");
    sb.append("dGUsIG5hbWUsIGV4cGFuZFZpZXcsIG1ha2VyKSB7CiAgICB2YXIgaXRfc3RhdGUgPSBzZWxmLnBJRShz");
    sb.append("dGF0ZSwgbmFtZSwgZXhwYW5kVmlldyk7CiAgICB2YXIgZG9tQnlLZXkgPSB7fTsKICAgIHZhciB2aWV3");
    sb.append("VW5TdWJCeUtleSA9IHt9OwogICAgdmFyIGtpbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFy");
    sb.append("IGtleSBpbiB2aWV3VW5TdWJCeUtleSkgewogICAgICAgIGZpcmVfdW5zdWIodmlld1VuU3ViQnlLZXlb");
    sb.append("a2V5XSk7CiAgICAgICAgZGVsZXRlIHZpZXdVblN1YkJ5S2V5W2tleV07CiAgICAgIH0KICAgICAgZm9y");
    sb.append("ICh2YXIga2V5IGluIGRvbUJ5S2V5KSB7CiAgICAgICAgZGVsZXRlIGRvbUJ5S2V5W2tleV07CiAgICAg");
    sb.append("IH0KICAgIH07CgogICAgdmFyIHN1YiA9IHsKICAgICAgIisiOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAg");
    sb.append("ICAgdmFyIG5ld19zdGF0ZSA9IGZvcmsoc2VsZi5wSUUoaXRfc3RhdGUsIGtleSwgZXhwYW5kVmlldykp");
    sb.append("OwogICAgICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgICAgICB2YXIgZG9tID0gbWFrZXIo");
    sb.append("bmV3X3N0YXRlKTsKICAgICAgICBkb21CeUtleVtrZXldID0gZG9tOwogICAgICAgIHZpZXdVblN1YkJ5");
    sb.append("S2V5W2tleV0gPSB1bnN1YjsKICAgICAgICBwYXJlbnREb20uYXBwZW5kKGRvbSk7CiAgICAgICAgdmFy");
    sb.append("IGl0ZW1fZGVsdGEgPSBuZXdfc3RhdGUuZGF0YS5kZWx0YTsKICAgICAgICBuZXdfc3RhdGUuZGF0YS5k");
    sb.append("ZWx0YSA9IHt9OwogICAgICAgIHN1YnNjcmliZV9zdGF0ZShuZXdfc3RhdGUsIHVuc3ViKTsKICAgICAg");
    sb.append("ICByZXR1cm4gaXRlbV9kZWx0YTsKICAgICAgfSwKICAgICAgIi0iOiBmdW5jdGlvbiAoa2V5KSB7CiAg");
    sb.append("ICAgICAgaWYgKGtleSBpbiBkb21CeUtleSkgewogICAgICAgICAgcGFyZW50RG9tLnJlbW92ZUNoaWxk");
    sb.append("KGRvbUJ5S2V5W2tleV0pOwogICAgICAgICAgZGVsZXRlIGRvbUJ5S2V5W2tleV07CiAgICAgICAgfQog");
    sb.append("ICAgICAgIGlmIChrZXkgaW4gdmlld1VuU3ViQnlLZXkpIHsKICAgICAgICAgIGZpcmVfdW5zdWIodmll");
    sb.append("d1VuU3ViQnlLZXlba2V5XSk7CiAgICAgICAgICBkZWxldGUgdmlld1VuU3ViQnlLZXlba2V5XTsKICAg");
    sb.append("ICAgICB9CiAgICAgIH0sCiAgICAgICJ+IjogZnVuY3Rpb24gKG9yZCkgewogICAgICAgIHZhciB2YWx1");
    sb.append("ZVRvU2V0ID0gZmFsc2U7CiAgICAgICAgLy8gdGhlIHZhbHVlcyBhcmUgZmlsbGluZyB1cCBBRlRFciB0");
    sb.append("aGUgdmFsdWUgd2FzIHNldCwKICAgICAgICAvLyBzbyBkZXRlY3QgdGhlIGFic2VuY2Ugb2YgYSB2YWx1");
    sb.append("ZSBhbG9uZyB3aXRoIHRoZSBleGlzdGVuY2Ugb2YgYSB2YWx1ZQogICAgICAgIGlmICghcGFyZW50RG9t");
    sb.append("LnZhbHVlICYmIHBhcmVudERvbS5yeHZhbHVlICE9ICIiKSB7CiAgICAgICAgICB2YWx1ZVRvU2V0ID0g");
    sb.append("cGFyZW50RG9tLnJ4dmFsdWU7CiAgICAgICAgICAvLyB0aGlzIHZhbHVlLCB3ZSB3YW50IHRvIHJlc3Rv");
    sb.append("cmUgb25jZQogICAgICAgIH0KICAgICAgICBudWtlKHBhcmVudERvbSk7CiAgICAgICAgaWYgKG9yZCA9");
    sb.append("PSBudWxsKSB7CiAgICAgICAgICBraWxsKCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAg");
    sb.append("ICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb3JkLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBwYXJlbnRE");
    sb.append("b20uYXBwZW5kKGRvbUJ5S2V5W29yZFtrXV0pOwogICAgICAgIH0KICAgICAgICBpZiAodmFsdWVUb1Nl");
    sb.append("dCkgewogICAgICAgICAgcGFyZW50RG9tLnZhbHVlID0gdmFsdWVUb1NldDsKICAgICAgICB9CiAgICAg");
    sb.append("IH0KICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfTsKCiAgLy8gUlVOVElN");
    sb.append("RTogPHRhZyAuLi4gcng6bW9uaXRvcj0ic3RhdGUtcGF0aCIgcng6cmlzZT0iY29tbWFuZHMuLi4iIHJ4");
    sb.append("OmZhbGw9ImNvbW1hbmRzLi4uIgogIHNlbGYuTU4gPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgbmFtZSwg");
    sb.append("c2tpcEZpcnN0LCBkZWxheSkgewogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB3");
    sb.append("aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICB2YXIgbiA9IDA7CiAgICAgICAgdHJ5");
    sb.append("IHsKICAgICAgICAgIG4gPSB0eXBlb2YgKHZhbHVlKSA9PSAnbnVtYmVyJyA/IHZhbHVlIDogcGFyc2VJ");
    sb.append("bnQodmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGZhaWxlZFBhcnNpbmdOKSB7CiAgICAgICAgfQogICAg");
    sb.append("ICAgIGlmICh0aGlzLmZpcnN0KSB7CiAgICAgICAgICB0aGlzLmF0ID0gbjsKICAgICAgICAgIHRoaXMu");
    sb.append("Zmlyc3QgPSBmYWxzZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMu");
    sb.append("YXQgPCBuKSB7CiAgICAgICAgICB2YXIgZSA9IG5ldyBFdmVudCgicmlzZSIpOwogICAgICAgICAgZG9t");
    sb.append("LmRpc3BhdGNoRXZlbnQoZSk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmF0ID4gbikgewogICAgICAg");
    sb.append("ICAgdmFyIGUgPSBuZXcgRXZlbnQoImZhbGwiKTsKICAgICAgICAgIGRvbS5kaXNwYXRjaEV2ZW50KGUp");
    sb.append("OwogICAgICAgIH0KICAgICAgICB0aGlzLmF0ID0gbjsKICAgICAgfS5iaW5kKHRoaXMpLCB0aGlzLmRl");
    sb.append("bGF5KTsKICAgIH0uYmluZCh7YXQ6LTEsIGZpcnN0OnNraXBGaXJzdCwgZGVsYXk6ZGVsYXkgPyBkZWxh");
    sb.append("eSA6IDEwfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfTsKCiAgLy8gUlVOVElN");
    sb.append("RTogPHRhZyAuLi4gcng6cmVwZWF0PSQ+CiAgc2VsZi5SUCA9IGZ1bmN0aW9uIChwYXJlbnREb20sIHN0");
    sb.append("YXRlLCBuYW1lLCBleHBhbmRWaWV3LCBtYWtlcikgewogICAgdmFyIGl0X3N0YXRlID0gc2VsZi5wSUUo");
    sb.append("c3RhdGUsICIkIiArIG5hbWUsIGV4cGFuZFZpZXcpOwogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1");
    sb.append("ZSkgewogICAgICB2YXIgbiA9IDA7CiAgICAgIHRyeSB7CiAgICAgICAgbiA9IHR5cGVvZiAodmFsdWUp");
    sb.append("ID09ICdudW1iZXInID8gdmFsdWUgOiBwYXJzZUludCh2YWx1ZSk7CiAgICAgIH0gY2F0Y2ggKGZhaWxl");
    sb.append("ZFBhcnNpbmdOKSB7CiAgICAgIH0KICAgICAgd2hpbGUgKHRoaXMuYXQgPCBuIC0gMSkgewogICAgICAg");
    sb.append("IHRoaXMuYXQgKys7CiAgICAgICAgdGhpcy50cmFjayArKzsKICAgICAgICB2YXIgbmV3X3N0YXRlID0g");
    sb.append("Zm9yayhzZWxmLnBJRShpdF9zdGF0ZSwgdGhpcy50cmFjayArICIiLCBleHBhbmRWaWV3KSk7CiAgICAg");
    sb.append("ICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgICAgIHZhciBkb20gPSBtYWtlcihzZWxmLnBE");
    sb.append("KG5ld19zdGF0ZSkpOwogICAgICAgIHRoaXMuaXRlbXNbdGhpcy5hdF0gPSB7dW5zdWI6dW5zdWIsIGRv");
    sb.append("bTpkb219OwogICAgICAgIHBhcmVudERvbS5hcHBlbmQoZG9tKTsKICAgICAgICBpZiAoZXhwYW5kVmll");
    sb.append("dykgewogICAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXRoX3RvKG5ld19zdGF0ZS52aWV3");
    sb.append("LCB7IiRpbmRleCI6IHRoaXMudHJhY2t9KSk7CiAgICAgICAgfQogICAgICAgIHN1YnNjcmliZV9zdGF0");
    sb.append("ZShuZXdfc3RhdGUsIHVuc3ViKTsKICAgICAgfQogICAgICB3aGlsZSAodGhpcy5hdCA+PSBuICYmIHRo");
    sb.append("aXMuYXQgPj0gMCkgewogICAgICAgIGZpcmVfdW5zdWIodGhpcy5pdGVtc1t0aGlzLmF0XS51bnN1Yik7");
    sb.append("CiAgICAgICAgcGFyZW50RG9tLnJlbW92ZUNoaWxkKHRoaXMuaXRlbXNbdGhpcy5hdF0uZG9tKTsKICAg");
    sb.append("ICAgICB0aGlzLml0ZW1zW3RoaXMuYXRdID0gbnVsbDsKICAgICAgICBkZWxldGUgdGhpcy5pdGVtc1t0");
    sb.append("aGlzLmF0XTsKICAgICAgICB0aGlzLmF0LS07CiAgICAgIH0KICAgIH0uYmluZCh7aXRlbXM6W10sIGF0");
    sb.append("Oi0xLCB0cmFjazowfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfQogIHZhciBm");
    sb.append("aW5kID0gZnVuY3Rpb24gKHN0YXRlLCBjaGFubmVsLCBrZXksIHZhbHVlKSB7CiAgICBpZiAoY2hhbm5l");
    sb.append("bCBpbiBzdGF0ZVsiZGF0YSJdLmNvbm5lY3Rpb24ub3V0c3RhbmRpbmcpIHsKICAgICAgdmFyIGFyciA9");
    sb.append("IHN0YXRlWyJkYXRhIl0uY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVsXS5vcHRpb25zOwogICAg");
    sb.append("ICBmb3IgKHZhciBrID0gMDsgayA8IGFyci5sZW5ndGg7IGsrKykgewogICAgICAgIHZhciBzID0gYXJy");
    sb.append("W2tdOwogICAgICAgIGlmIChrZXkgaW4gcyAmJiBzW2tleV0gPT0gdmFsdWUpIHsKICAgICAgICAgIHJl");
    sb.append("dHVybiBzOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgIHJldHVybiBudWxsOwogICAgfQogIH07CgogIHZhciBjdXN0b21zID0ge307CgogIHNlbGYuUFJD");
    sb.append("VUFDID0gZnVuY3Rpb24gKG5hbWUsIGZvbykgewogICAgY3VzdG9tc1tuYW1lXSA9IGZvbzsKICB9OwoK");
    sb.append("ICBzZWxmLmV4Q0MgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgY3VzdG9tQ29tbWFuZE5hbWUp");
    sb.append("IHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChj");
    sb.append("dXN0b21Db21tYW5kTmFtZSBpbiBjdXN0b21zKSB7CiAgICAgICAgY3VzdG9tc1tjdXN0b21Db21tYW5k");
    sb.append("TmFtZV0oc3RhdGUsIGRvbSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIGN1c3RvbSBldmVudCBv");
    sb.append("biBmb3Jtczsgcng6c3VjY2Vzcz0iLi4uIgogIHZhciBmaXJlX3N1Y2Nlc3MgPSBmdW5jdGlvbiAoZm9y");
    sb.append("bSkgewogICAgZm9ybS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgic3VjY2VzcyIpKTsKICAgIGZvcm0u");
    sb.append("ZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInN1Ym1pdHRlZCIpKTsKICB9OwogIHNlbGYuZmlyZV9zdWNj");
    sb.append("ZXNzID0gZmlyZV9zdWNjZXNzOwoKICAvLyBjdXN0b20gZXZlbnQgb24gZm9ybXM7IHJ4OmZhaWxlZD0i");
    sb.append("Li4uIgogIHZhciBmaXJlX2ZhaWx1cmUgPSBmdW5jdGlvbiAoZG9tLCBtc2cpIHsKICAgIHZhciBlID0g");
    sb.append("bmV3IEV2ZW50KCJmYWlsdXJlIik7CiAgICBlLm1lc3NhZ2UgPSBtc2c7CiAgICBjb25zb2xlLmVycm9y");
    sb.append("KG1zZyk7CiAgICBkb20uZGlzcGF0Y2hFdmVudChlKTsKICB9OwogIHNlbGYuZmlyZV9mYWlsdXJlID0g");
    sb.append("ZmlyZV9mYWlsdXJlOwoKICBzZWxmLmFDQyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgY3VzdG9tQ29t");
    sb.append("bWFuZE5hbWUpIHsKICAgIHZhciBzaWduYWwgPSBmdW5jdGlvbiAobXNnKSB7CiAgICAgIGlmIChzaWdu");
    sb.append("YWwgPT0gbnVsbCkgewogICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgbXNnKTsKICAgICAgfQogICAgfTsKICAgIGZvcm0uYWRkRXZl");
    sb.append("bnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBpZiAoY3VzdG9tQ29tbWFu");
    sb.append("ZE5hbWUgaW4gY3VzdG9tcykgewogICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZh");
    sb.append("ciBvYmogPSBnZXRfZm9ybShmb3JtLCBmYWxzZSk7CiAgICAgICAgY3VzdG9tc1tjdXN0b21Db21tYW5k");
    sb.append("TmFtZV0ob2JqLCBzdGF0ZSwgc2lnbmFsLCBzZWxmKTsKICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7");
    sb.append("CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgdG8gZmluZCAn");
    sb.append("IiArIGN1c3RvbUNvbW1hbmROYW1lICsgIiciKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfTsKCiAg");
    sb.append("dmFyIG1ha2VfY2hvaWNlX2FycmF5ID0gZnVuY3Rpb24gKHN0YXRlLCBjaGFubmVsKSB7CiAgICB2YXIg");
    sb.append("Y2hvaWNlcyA9IHN0YXRlLmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwogICAgaWYgKCEoY2hhbm5lbCBp");
    sb.append("biBjaG9pY2VzKSkgewogICAgICBjaG9pY2VzW2NoYW5uZWxdID0ge307CiAgICB9CiAgICB2YXIgY2hv");
    sb.append("aWNlID0gY2hvaWNlc1tjaGFubmVsXTsKICAgIHZhciBhcnIgPSBbXTsKICAgIGZvciAodmFyIGlkIGlu");
    sb.append("IGNob2ljZSkgewogICAgICBhcnIucHVzaChjaG9pY2VbaWRdKTsKICAgIH0KICAgIHJldHVybiBhcnI7");
    sb.append("CiAgfQoKICBzZWxmLmV4RklOID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIGNoYW5uZWwpIHsK");
    sb.append("ICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhcnIg");
    sb.append("PSBtYWtlX2Nob2ljZV9hcnJheShzdGF0ZSwgY2hhbm5lbCk7CiAgICAgIHZhciBjbGVhciA9IGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICBkZWxldGUgc3RhdGUuZGF0YS5jb25uZWN0aW9uLmNob2ljZXNbY2hhbm5l");
    sb.append("bF07CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLm9uY2hvaWNlcyhjaGFubmVsLCB7fSk7CiAg");
    sb.append("ICAgIH07CiAgICAgIHN0YXRlLmRhdGEuY29ubmVjdGlvbi5wdHIuc2VuZChjaGFubmVsLCBhcnIsIHsK");
    sb.append("ICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBjbGVhcigpOwogICAg");
    sb.append("ICAgICAgY29uc29sZS5sb2coImZhaWxlZDoiICsgcmVhc29uKTsKICAgICAgICB9LAogICAgICAgIHN1");
    sb.append("Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBjbGVhcigpOwogICAgICAgICAgY29u");
    sb.append("c29sZS5sb2coIlN1Y2Nlc3N8IiArIHBheWxvYWQuc2VxKTsKICAgICAgICB9CiAgICAgIH0pOwogICAg");
    sb.append("fSk7CiAgfTsKCiAgc2VsZi5GSU4gPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBjaGFubmVs");
    sb.append("LCBzaG91bGRCZSwgX2V4cGFuZCwgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7CiAgICB2YXIgZmluYWxp");
    sb.append("emUgPSB7CiAgICAgIG93bmVyOiBwYXJlbnQsCiAgICAgIHNob3duOiBmYWxzZQogICAgfTsKICAgIGFk");
    sb.append("ZF91bnN1YihmaW5hbGl6ZSk7CgogICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9uIChzaG93KSB7CiAgICAg");
    sb.append("IGZpcmVfdW5zdWIoZmluYWxpemUpOwogICAgICBudWtlKHBhcmVudCk7CiAgICAgIHZhciBzdGF0ZSA9");
    sb.append("IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGlmIChzaG93ID09PSBzaG91bGRCZSkgewogICAgICAgIG1h");
    sb.append("a2VyVHJ1ZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYWtlckZhbHNlKHBh");
    sb.append("cmVudCwgc3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgZmluYWxpemUp");
    sb.append("OwogICAgfTsKCiAgICBmaW5hbGl6ZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvdXQg");
    sb.append("PSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVsXTsKICAgICAgaWYg");
    sb.append("KCEob3V0KSkgcmV0dXJuOwogICAgICB2YXIgYXJyID0gbWFrZV9jaG9pY2VfYXJyYXkocHJpb3JTdGF0");
    sb.append("ZSwgY2hhbm5lbCk7CiAgICAgIHZhciBldmFsID0gKCdtaW4nIGluIG91dCAmJiAnbWF4JyBpbiBvdXQp");
    sb.append("ID8gKG91dC5taW4gPD0gYXJyLmxlbmd0aCAmJiBhcnIubGVuZ3RoIDw9IG91dC5tYXgpIDogdHJ1ZTsK");
    sb.append("ICAgICAgaWYgKGZpbmFsaXplLmV2YWwgIT0gZXZhbCkgewogICAgICAgIGZpbmFsaXplLmV2YWwgPSBl");
    sb.append("dmFsOwogICAgICAgIGNoYW5nZShmaW5hbGl6ZS5ldmFsKTsKICAgICAgfQogICAgfTsKCiAgICBwcmlv");
    sb.append("clN0YXRlLmRhdGEuY29ubmVjdGlvbi5zdWJzY3JpYmVfY2hvaWNlKGNoYW5uZWwsIGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgZmluYWxpemUudXBkYXRlKCk7CiAgICAgIC8vIFRPRE86IHJldHVybiB3aGV0aGVyIG9y");
    sb.append("IG5vdCB0aGlzIG5lZWRzIHRvIGJlIGF4ZWQKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKICB9OwoK");
    sb.append("ICB2YXIgZm9ybV9vZiA9IGZ1bmN0aW9uKGRvbSkgewogICAgdmFyIG5leHQgPSBkb207CiAgICB3aGls");
    sb.append("ZSAobmV4dCAhPSBudWxsKSB7CiAgICAgIGlmIChuZXh0LnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PSAi");
    sb.append("Rk9STSIpIHsKICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgfQogICAgICBuZXh0ID0gbmV4dC5wYXJl");
    sb.append("bnRFbGVtZW50OwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgcmVnX2V2ZW50ID0gZnVu");
    sb.append("Y3Rpb24gKHN0YXRlLCBkb20sIHR5cGUsIHJ1bm5hYmxlKSB7CiAgICAvLyBUT0RPOiBjb25uZWN0ZWQv");
    sb.append("ZGlzY29ubmVjdGVkIGFzIHNwZWNpYWwgZXZlbnRzIHRvIGNvbnNpZGVyCiAgICBpZiAodHlwZSA9PSAi");
    sb.append("bG9hZCIpIHsKICAgICAgd2luZG93LnNldFRpbWVvdXQocnVubmFibGUsIDEpOwogICAgfSBlbHNlIGlm");
    sb.append("ICh0eXBlPT0ic3VibWl0IiB8fCB0eXBlPT0ic3VibWl0dGVkIikgewogICAgICB3aW5kb3cuc2V0VGlt");
    sb.append("ZW91dChmdW5jdGlvbigpIHsKICAgICAgICB2YXIgZm9ybSA9IGZvcm1fb2YoZG9tKTsKICAgICAgICBp");
    sb.append("ZiAoZm9ybSkgewogICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMoZG9tKSkgewogICAgICAgICAg");
    sb.append("ICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAg");
    sb.append("fSwgMSk7CiAgICB9IGVsc2UgaWYgKHR5cGUuc3RhcnRzV2l0aCgiZGVsYXk6IikpIHsKICAgICAgLy8g");
    sb.append("ZGVsYXkgd2lsbCBydW4gYWZ0ZXIgJGRlbGF5VGltZU1TIElGIHRoZSBkb20gZWxlbWVudCBpcyBzdGls");
    sb.append("bCB2aXNpYmxlIHRvIHRoZSBkb2N1bWVudAogICAgICB2YXIgZGVsYXlUaW1lTVMgPSBwYXJzZUludCh0");
    sb.append("eXBlLnN1YnN0cmluZyg2KSk7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAg");
    sb.append("ICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAgICAgICAgIHJ1bm5hYmxlKCk7");
    sb.append("CiAgICAgICAgfQogICAgICB9LCBkZWxheVRpbWVNUyk7CiAgICB9IGVsc2UgewogICAgICBkb20uYWRk");
    sb.append("RXZlbnRMaXN0ZW5lcih0eXBlLCBydW5uYWJsZSk7CiAgICB9CiAgfQoKCgogIC8vIFJVTlRJTUU6IDx0");
    sb.append("YWcgLi4gcng6ZXZlbnQ9Ii4uLiBzZXQ6bmFtZT12YWx1ZSAuLi4iPgogIHNlbGYuYlMgPSBmdW5jdGlv");
    sb.append("biAoZG9tLCBzdGF0ZSwgbmFtZSwgdmFsdWUpIHsKICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVu");
    sb.append("Y3Rpb24iKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcnVuOiBmdW5jdGlvbigpIHt9LCAvLyBkbyBu");
    sb.append("b3RoaW5nLCB0aGlzIGlzIGEgc2ltcGxlIG1lcmdlCiAgICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkgewog");
    sb.append("ICAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAgb2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAg");
    sb.append("ICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgICAgIHJldHVybiBk");
    sb.append("ZWx0YTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAg");
    sb.append("ICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywg");
    sb.append("b2JqKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBydW46IGZ1bmN0aW9uKCkge30sIC8vIGRvIG5vdGhp");
    sb.append("bmcsIHRoaXMgaXMgYSBzaW1wbGUgbWVyZ2UKICAgICAgICBtZXJnZTogZnVuY3Rpb24oKSB7IHJldHVy");
    sb.append("biBkZWx0YTsgfQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIG1lcmdlX2RlbHRhID0gZnVuY3Rpb24o");
    sb.append("YSwgYikgewogICAgaWYgKHR5cGVvZihhKSA9PSAib2JqZWN0IiAmJiB0eXBlb2YoYikgPT0gIm9iamVj");
    sb.append("dCIpIHsKICAgICAgdmFyIHJlc3VsdCA9IHt9OwogICAgICBmb3IgKHZhciBrIGluIGEpIHsKICAgICAg");
    sb.append("ICBpZiAoayBpbiBiKSB7CiAgICAgICAgICByZXN1bHRba10gPSBtZXJnZV9kZWx0YShhW2tdLCBiW2td");
    sb.append("KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0W2tdID0gYVtrXTsKICAgICAgICB9CiAg");
    sb.append("ICAgIH0KICAgICAgZm9yKHZhciBrIGluIGIpIHsKICAgICAgICBpZiAoIShrIGluIGEpKSB7CiAgICAg");
    sb.append("ICAgICByZXN1bHRba10gPSBiW2tdOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0");
    sb.append("OwogICAgfQogICAgcmV0dXJuIGE7CiAgfTsKICBzZWxmLk1EID0gbWVyZ2VfZGVsdGE7CgogIHNlbGYu");
    sb.append("b25CID0gZnVuY3Rpb24oZG9tLCB0eXBlLCBzdGF0ZSwgYXJyKSB7CiAgICByZWdfZXZlbnQoc3RhdGUs");
    sb.append("IGRvbSwgdHlwZSwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzdW0gPSB7fTsKICAgICAgZm9yICh2YXIg");
    sb.append("ayA9IDA7IGsgPCBhcnIubGVuZ3RoOyBrKyspIHsKICAgICAgICB2YXIgY21kID0gYXJyW2tdOwogICAg");
    sb.append("ICAgIGNtZC5ydW4oKTsKICAgICAgICB2YXIgdG9NZXJnZSA9IGNtZC5tZXJnZSgpCiAgICAgICAgc3Vt");
    sb.append("ID0gbWVyZ2VfZGVsdGEoc3VtLCB0b01lcmdlKTsKICAgICAgfQogICAgICBzdGF0ZS52aWV3LnRyZWUu");
    sb.append("dXBkYXRlKHN1bSk7CiAgICB9KTsKICB9OwoKICAvLyBjaG9vc2UKICBzZWxmLmV4Q0ggPSBmdW5jdGlv");
    sb.append("biAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgY2hhbm5lbCwga2V5KSB7CiAgICB2YXIgZGVjaWRlID0g");
    sb.append("eyB2YWx1ZTogbnVsbCB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgdmFyIHJlc3VsdCA9IGZpbmQoc3RhdGUsIGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVl");
    sb.append("KTsKICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7CiAgICAgICAgdmFyIGNob2ljZXMgPSBzdGF0ZS5k");
    sb.append("YXRhLmNvbm5lY3Rpb24uY2hvaWNlczsKICAgICAgICBpZiAoIShjaGFubmVsIGluIGNob2ljZXMpKSB7");
    sb.append("CiAgICAgICAgICBjaG9pY2VzW2NoYW5uZWxdID0ge307CiAgICAgICAgfQogICAgICAgIHZhciBjaG9p");
    sb.append("Y2UgPSBjaG9pY2VzW2NoYW5uZWxdOwogICAgICAgIHZhciB2YWxLZXkgPSByZXN1bHRba2V5XTsKICAg");
    sb.append("ICAgICBpZiAodmFsS2V5IGluIGNob2ljZSkgewogICAgICAgICAgZGVsZXRlIGNob2ljZVt2YWxLZXld");
    sb.append("OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjaG9pY2VbdmFsS2V5XSA9IHJlc3VsdDsKICAgICAg");
    sb.append("ICB9CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLm9uY2hvaWNlcyhjaGFubmVsLCBjaG9pY2Up");
    sb.append("OwogICAgICB9CiAgICB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVl");
    sb.append("KSB7CiAgICAgIGRlY2lkZS52YWx1ZSA9IHZhbHVlOwogICAgfSk7CiAgfTsKCiAgLy8gZGVjaWRlCiAg");
    sb.append("c2VsZi5leEQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgY2hhbm5lbCwga2V5KSB7");
    sb.append("CiAgICB2YXIgZGVjaWRlID0geyB2YWx1ZTogbnVsbCB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20s");
    sb.append("IHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHJlc3VsdCA9IGZpbmQoc3RhdGUsIGNoYW5uZWws");
    sb.append("IGtleSwgZGVjaWRlLnZhbHVlKTsKICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7CiAgICAgICAgbGV0");
    sb.append("IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0");
    sb.append("ci5zZW5kKGNoYW5uZWwsIHJlc3VsdCwgewogICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNv");
    sb.append("bikgewoKICAgICAgICAgIH0sCiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewog");
    sb.append("ICAgICAgICAgICBjb25zb2xlLmxvZygiU3VjY2Vzc3wiICsgcGF5bG9hZC5zZXEgKyAiO2xhdGVuY3k9");
    sb.append("IiArIChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0KSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAg");
    sb.append("ICAgIH0KICAgIH0pOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsK");
    sb.append("ICAgICAgZGVjaWRlLnZhbHVlID0gdmFsdWU7CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFn");
    sb.append("IC4uIHJ4OmV2ZW50PSIuLi4gZmlyZTpjaGFubmVsIC4uLiIgLi4uPgogIHNlbGYub25GUiA9IGZ1bmN0");
    sb.append("aW9uIChzdGF0ZSwgZG9tLCB0eXBlLCBjaGFubmVsKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwg");
    sb.append("dHlwZSwgZnVuY3Rpb24gKCkgewogICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyLnNlbmQoY2hh");
    sb.append("bm5lbCwge30sIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjb25zb2xl");
    sb.append("LmxvZygiU0VOVCAnIiArIGNoYW5uZWwgKyAiJyIpOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTog");
    sb.append("ZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgY29uc29sZS5sb2coIkZBSUxFRCBUTyBGSVJFICci");
    sb.append("ICsgY2hhbm5lbCArICInIERVRToiICsgcmVhc29uKTsgJycKICAgICAgICB9CiAgICAgIH0pOwogICAg");
    sb.append("fSk7CiAgfQoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZm9yY2UtYXV0aD1uYW1l");
    sb.append("LHRva2VuIC4uLiI+CiAgc2VsZi5vbkZPUkNFX0FVVEggPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBpZGVu");
    sb.append("dGl0eU5hbWUsIGlkZW50aXR5KSB7CiAgICByZWdfZXZlbnQobnVsbCwgZG9tLCB0eXBlLCBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IGlkZW50aXR5OwogICAgICBsb2Nh");
    sb.append("bFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgaWRlbnRpdHkpOwogICAg");
    sb.append("fSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHNldDpuYW1lPXZhbHVl");
    sb.append("IC4uLiI+CiAgc2VsZi5vblMgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgdmFsdWUp");
    sb.append("IHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBv");
    sb.append("YmogPSB7fTsKICAgICAgaWYgKHR5cGVvZiAodmFsdWUpID09ICJmdW5jdGlvbiIpIHsKICAgICAgICBv");
    sb.append("YmpbbmFtZV0gPSB2YWx1ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIG9ialtuYW1lXSA9IHZhbHVl");
    sb.append("OwogICAgICB9CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAg");
    sb.append("c3RhdGVbc3RhdGUuY3VycmVudF0udHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgfTsKCiAgLy8g");
    sb.append("UlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHRlOm5hbWUgLi4uIj4KICBzZWxmLm9uVE0gPSBm");
    sb.append("dW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgb3gsIG95KSB7CiAgICByZWdfZXZlbnQoc3Rh");
    sb.append("dGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAg");
    sb.append("b2JqW25hbWVdID0gewogICAgICAgIHg6ZXZlbnQuY2xpZW50WCArIHdpbmRvdy5zY3JvbGxYICsgb3gs");
    sb.append("CiAgICAgICAgeTpldmVudC5jbGllbnRZICsgd2luZG93LnNjcm9sbFkgKyBveQogICAgICB9OwogICAg");
    sb.append("ICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlW3N0YXRlLmN1");
    sb.append("cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcg");
    sb.append("Li4gcng6ZXZlbnQ9Ii4uLiB0ZTpuYW1lIC4uLiI+CiAgc2VsZi5vblRFID0gZnVuY3Rpb24gKGRvbSwg");
    sb.append("dHlwZSwgc3RhdGUsIG5hbWUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlv");
    sb.append("biAoZXZlbnQpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSBldmVudC5tZXNz");
    sb.append("YWdlOwogICAgICBpZiAoZXZlbnQubWVzc2FnZSkgewogICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8o");
    sb.append("c3RhdGUudmlldywgb2JqKTsKICAgICAgICBzdGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShk");
    sb.append("ZWx0YSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9");
    sb.append("Ii4uLiByZXNldCAuLi4iPgogIHNlbGYub1JTVCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlKSB7");
    sb.append("CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZh");
    sb.append("ciBmID0gZm9ybV9vZihkb20pOwogICAgICBpZiAoZiAhPSBudWxsKSB7CiAgICAgICAgZi5yZXNldCgp");
    sb.append("OwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4g");
    sb.append("c3VibWl0IC4uLiI+CiAgc2VsZi5vU0JNVCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlKSB7CiAg");
    sb.append("ICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBm");
    sb.append("ID0gZm9ybV9vZihkb20pOwogICAgICBpZiAoZiAhPSBudWxsKSB7CiAgICAgICAgdmFyIGUgPSBuZXcg");
    sb.append("U3VibWl0RXZlbnQoJ3N1Ym1pdCcsIHsKICAgICAgICAgICdidWJibGVzJyAgICA6IHRydWUsCiAgICAg");
    sb.append("ICAgICAnY2FuY2VsYWJsZScgOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgZi5kaXNwYXRjaEV2ZW50");
    sb.append("KGUpOwogICAgICB9CiAgICB9KTsKICB9OwoKICBzZWxmLm9OSyA9IGZ1bmN0aW9uIChkb20sIHR5cGUs");
    sb.append("IHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7");
    sb.append("CiAgICAgIHZhciBjdXIgPSBkb207CiAgICAgIHdoaWxlIChjdXIudGFnTmFtZS50b1VwcGVyQ2FzZSgp");
    sb.append("ICE9ICJOVUNMRUFSIikgewogICAgICAgIGN1ciA9IGN1ci5wYXJlbnRFbGVtZW50OwogICAgICB9CiAg");
    sb.append("ICAgIGlmIChjdXIgIT0gbnVsbCkgewogICAgICAgIG51a2UoY3VyKTsKICAgICAgfQogICAgfSk7CiAg");
    sb.append("fTsKCgogIHNlbGYub1VDSyA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlKSB7CiAgICByZWdfZXZl");
    sb.append("bnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGRvbS5jaGVja2VkID0g");
    sb.append("ZmFsc2U7CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZ290");
    sb.append("bzp1cmkgLi4uIj4KICBzZWxmLm9uR08gPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgdmFsdWUp");
    sb.append("IHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB1");
    sb.append("cmkgPSAodHlwZW9mICh2YWx1ZSkgPT0gImZ1bmN0aW9uIikgPyB2YWx1ZSgpIDogdmFsdWU7CiAgICAg");
    sb.append("IHNlbGYuZ290byh1cmksIGZhbHNlKTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4g");
    sb.append("cng6ZXZlbnQ9Ii4uLiB0b2dnbGU6bmFtZSAuLi4iPgogIHNlbGYub25UID0gZnVuY3Rpb24gKGRvbSwg");
    sb.append("dHlwZSwgc3RhdGUsIG5hbWUpIHsKICAgIHZhciBjYXB0dXJlZCA9IHsgdmFsdWU6IGZhbHNlIH07CiAg");
    sb.append("ICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgb2JqID0g");
    sb.append("e307CiAgICAgIG9ialtuYW1lXSA9ICFjYXB0dXJlZC52YWx1ZTsKICAgICAgdmFyIGRlbHRhID0gcGF0");
    sb.append("aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsK");
    sb.append("ICAgIH0pOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAg");
    sb.append("Y2FwdHVyZWQudmFsdWUgPSB2YWx1ZSA9PSB0cnVlOwogICAgfSk7CiAgfTsKCiAgdmFyIG9yZGVyX3Rv");
    sb.append("Z2dsZSA9IGZ1bmN0aW9uKHByaW9yLCB2YWwpIHsKICAgIHZhciBwYXJ0cyA9IHByaW9yLnNwbGl0KCIs");
    sb.append("Iik7CiAgICB2YXIgcHJlZml4ID0gJyc7CiAgICB2YXIgbmV4dCA9IFsiIl07CiAgICBmb3IgKHZhciBr");
    sb.append("ID0gMDsgayA8IHBhcnRzLmxlbmd0aDsgaysrKSB7CiAgICAgIGlmIChwYXJ0c1trXSA9PSAiIikgewog");
    sb.append("ICAgICAgIGNvbnRpbnVlOwogICAgICB9IGVsc2UgaWYgKHZhbCA9PSBwYXJ0c1trXSkgewogICAgICAg");
    sb.append("IHByZWZpeCA9ICctJzsKICAgICAgfSBlbHNlIGlmICgiLSIgKyB2YWwgPT1wYXJ0c1trXSkgewogICAg");
    sb.append("ICAgIHByZWZpeCA9ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIG5leHQucHVzaChwYXJ0c1trXSk7");
    sb.append("CiAgICAgIH0KICAgIH0KICAgIG5leHRbMF0gPSBwcmVmaXggKyB2YWw7CiAgICByZXR1cm4gbmV4dC5q");
    sb.append("b2luKCIsIik7CiAgfQoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gb3JkZXItdG9n");
    sb.append("Z2xlOm5hbWU9dmFsIC4uLiI+CiAgc2VsZi5vbk9UID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUs");
    sb.append("IG5hbWUsIHZhbCkgewogICAgdmFyIGNhcHR1cmVkID0geyB2YWx1ZTogIiIgfTsKICAgIHJlZ19ldmVu");
    sb.append("dChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAg");
    sb.append("b2JqW25hbWVdID0gb3JkZXJfdG9nZ2xlKGNhcHR1cmVkLnZhbHVlLCB2YWwpOwogICAgICB2YXIgZGVs");
    sb.append("dGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRy");
    sb.append("ZWUudXBkYXRlKGRlbHRhKTsKICAgIH0pOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBmdW5jdGlv");
    sb.append("biAodmFsdWUpIHsKICAgICAgY2FwdHVyZWQudmFsdWUgPSB2YWx1ZTsKICAgIH0pOwogIH07CgogIC8v");
    sb.append("IFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBkZWx0YTpuYW1lPWRpZmYiIC4uLiI+CiAgc2Vs");
    sb.append("Zi5vbkQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgZGlmZikgewogICAgdmFyIGNh");
    sb.append("cHR1cmVkID0geyB2YWx1ZTogMCB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSBjYXB0dXJlZC52YWx1");
    sb.append("ZSArIGRpZmY7CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAg");
    sb.append("c3RhdGVbc3RhdGUuY3VycmVudF0udHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgICBzdWJzY3Jp");
    sb.append("YmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBpZiAodHlwZW9mICh2YWx1ZSkg");
    sb.append("PT0gIm51bWJlciIpIHsKICAgICAgICBjYXB0dXJlZC52YWx1ZSA9IHZhbHVlOwogICAgICB9IGVsc2Ug");
    sb.append("ewogICAgICAgIHZhciB2YWwgPSBwYXJzZUZsb2F0KHZhbHVlKTsKICAgICAgICBpZiAoIWlzTmFOKHZh");
    sb.append("bCkpIHsKICAgICAgICAgIGNhcHR1cmVkLnZhbHVlID0gdmFsOwogICAgICAgIH0KICAgICAgfQogICAg");
    sb.append("fSk7CiAgfTsKICBzZWxmLkNTRU4gPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBldmFsU3Rh");
    sb.append("dGUsIGNoYW5uZWwsIGtleSwgbmFtZSwgc2hvdWxkQmUsIF9leHBhbmQsIG1ha2VyVHJ1ZSwgbWFrZXJG");
    sb.append("YWxzZSkgewogICAgdmFyIGNob3NlbiA9IHsKICAgICAgdmFsdWU6ICIiLAogICAgICBvd25lcjogcGFy");
    sb.append("ZW50LAogICAgICBzaG93bjogZmFsc2UsCiAgICAgIGV2YWw6IG51bGwKICAgIH07CiAgICBhZGRfdW5z");
    sb.append("dWIoY2hvc2VuKTsKICAgIHZhciBjaGFuZ2UgPSBmdW5jdGlvbiAoc2hvdykgewogICAgICBmaXJlX3Vu");
    sb.append("c3ViKGNob3Nlbik7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFyIHN0YXRlID0gZm9yayhwcmlv");
    sb.append("clN0YXRlKTsKICAgICAgaWYgKHNob3cgPT09IHNob3VsZEJlKSB7CiAgICAgICAgbWFrZXJUcnVlKHBh");
    sb.append("cmVudCwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIG1ha2VyRmFsc2UocGFyZW50LCBzdGF0");
    sb.append("ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCBjaG9zZW4pOwogICAgfTsKCiAg");
    sb.append("ICBjaG9zZW4udXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgb3V0ID0gcHJpb3JTdGF0ZS5k");
    sb.append("YXRhLmNvbm5lY3Rpb24ub3V0c3RhbmRpbmdbY2hhbm5lbF07CiAgICAgIGlmICghKG91dCkpIHJldHVy");
    sb.append("bjsKCiAgICAgIHZhciBjaG9pY2VzID0gcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24uY2hvaWNlczsK");
    sb.append("ICAgICAgaWYgKCEoY2hhbm5lbCBpbiBjaG9pY2VzKSkgewogICAgICAgIGNob2ljZXNbY2hhbm5lbF0g");
    sb.append("PSB7fTsKICAgICAgfQogICAgICB2YXIgY2hvaWNlID0gY2hvaWNlc1tjaGFubmVsXTsKICAgICAgdmFy");
    sb.append("IGV2YWwgPSBjaG9zZW4udmFsdWUgaW4gY2hvaWNlOwogICAgICBpZiAoY2hvc2VuLmV2YWwgIT0gZXZh");
    sb.append("bCkgewogICAgICAgIGNob3Nlbi5ldmFsID0gZXZhbDsKICAgICAgICBjaGFuZ2UoY2hvc2VuLmV2YWwp");
    sb.append("OwogICAgICB9CiAgICB9OwoKICAgIHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLnN1YnNjcmliZV9j");
    sb.append("aG9pY2UoY2hhbm5lbCwgZnVuY3Rpb24gKCkgewogICAgICBjaG9zZW4udXBkYXRlKCk7CiAgICAgIHJl");
    sb.append("dHVybiB0cnVlOwogICAgfSk7CgogICAgc3Vic2NyaWJlKGV2YWxTdGF0ZSwgbmFtZSwgZnVuY3Rpb24g");
    sb.append("KHZhbHVlKSB7CiAgICAgIGNob3Nlbi52YWx1ZSA9IHZhbHVlOwogICAgICBjaG9zZW4udXBkYXRlKCk7");
    sb.append("CiAgICB9KTsKICB9OwoKICBzZWxmLkRFID0gZnVuY3Rpb24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgZXZh");
    sb.append("bFN0YXRlLCBjaGFubmVsLCBrZXksIG5hbWUsIHNob3VsZEJlLCBfZXhwYW5kLCBtYWtlclRydWUsIG1h");
    sb.append("a2VyRmFsc2UpIHsKICAgIHZhciBkZWNpZGUgPSB7CiAgICAgIHZhbHVlOiAiIiwKICAgICAgb3duZXI6");
    sb.append("IHBhcmVudCwKICAgICAgc2hvd246IGZhbHNlLAogICAgICBldmFsOiBudWxsCiAgICB9OwogICAgYWRk");
    sb.append("X3Vuc3ViKGRlY2lkZSk7CiAgICB2YXIgY2hhbmdlID0gZnVuY3Rpb24gKHNob3cpIHsKICAgICAgZmly");
    sb.append("ZV91bnN1YihkZWNpZGUpOwogICAgICBudWtlKHBhcmVudCk7CiAgICAgIHZhciBzdGF0ZSA9IGZvcmso");
    sb.append("cHJpb3JTdGF0ZSk7CiAgICAgIGlmIChzaG93ID09PSBzaG91bGRCZSkgewogICAgICAgIG1ha2VyVHJ1");
    sb.append("ZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYWtlckZhbHNlKHBhcmVudCwg");
    sb.append("c3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgZGVjaWRlKTsKICAgIH07");
    sb.append("CgogICAgZGVjaWRlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGV2YWwgPSBmaW5kKHBy");
    sb.append("aW9yU3RhdGUsIGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKSAhPSBudWxsOwogICAgICBpZiAoZGVj");
    sb.append("aWRlLmV2YWwgIT0gZXZhbCkgewogICAgICAgIGRlY2lkZS5ldmFsID0gZXZhbDsKICAgICAgICBjaGFu");
    sb.append("Z2UoZGVjaWRlLmV2YWwpOwogICAgICB9CiAgICB9OwoKICAgIHByaW9yU3RhdGUuZGF0YS5jb25uZWN0");
    sb.append("aW9uLnN1YnNjcmliZShjaGFubmVsLCBmdW5jdGlvbiAoKSB7CiAgICAgIGRlY2lkZS51cGRhdGUoKTsK");
    sb.append("ICAgICAgLy8gVE9ETzogcmV0dXJuIHdoZXRoZXIgb3Igbm90IHRoaXMgbmVlZHMgdG8gYmUgYXhlZAog");
    sb.append("ICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwoKICAgIHN1YnNjcmliZShldmFsU3RhdGUsIG5hbWUsIGZ1");
    sb.append("bmN0aW9uICh2YWx1ZSkgewogICAgICBkZWNpZGUudmFsdWUgPSB2YWx1ZTsKICAgICAgZGVjaWRlLnVw");
    sb.append("ZGF0ZSgpOwogICAgfSk7CiAgfTsKCiAgdmFyIGNvbW1vbklmID0gZnVuY3Rpb24ocGFyZW50LCBvcmln");
    sb.append("aW5hbFN0YXRlLCBzaG91bGRCZSwgZXhwYW5kVmlldywgbWFrZXJUcnVlLCBtYWtlckZhbHNlLCBmb3Jj");
    sb.append("ZUhpZGluZykgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgaWYgKGZvcmNlSGlkaW5n");
    sb.append("KSB7CiAgICAgIHBhcmVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgfQogICAgcmV0dXJuIGZ1");
    sb.append("bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgc2hvdyA9ICh2YWx1ZSA/IHRydWUgOiBmYWxzZSkgPT09");
    sb.append("IHNob3VsZEJlOwogICAgICBpZiAodGhpcy5zaG93biA9PSBzaG93KSB7CiAgICAgICAgcmV0dXJuOwog");
    sb.append("ICAgICB9CiAgICAgIHRoaXMuc2hvd24gPSBzaG93OwogICAgICBudWtlKHBhcmVudCk7CiAgICAgIGZp");
    sb.append("cmVfdW5zdWIodW5zdWIpOwogICAgICB2YXIgbmV4dCA9IHNlbGYucEQoZm9yayhvcmlnaW5hbFN0YXRl");
    sb.append("KSk7CiAgICAgIGlmIChzaG93KSB7CiAgICAgICAgaWYgKGZvcmNlSGlkaW5nKSB7CiAgICAgICAgICBw");
    sb.append("YXJlbnQuc3R5bGUuZGlzcGxheSA9ICIiOwogICAgICAgIH0KICAgICAgICBtYWtlclRydWUocGFyZW50");
    sb.append("LCBuZXh0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoZm9yY2VIaWRpbmcpIHsKICAgICAgICAg");
    sb.append("IHBhcmVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBt");
    sb.append("YWtlckZhbHNlKHBhcmVudCwgbmV4dCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHN1YnNjcmliZV9z");
    sb.append("dGF0ZShuZXh0LCB1bnN1Yik7CiAgICB9LmJpbmQoeyBzaG93bjogJ25vJyB9KTsKICB9CgogIC8vIFJV");
    sb.append("TlRJTUUgfCByeDppZiAvIHJ4Omlmbm90ID0gInBhdGgxPXBhdGgyIgogIHNlbGYuSUZlcSA9IGZ1bmN0");
    sb.append("aW9uIChwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHF1ZXJ5U3RhdGVMZWZ0LCBuYW1lTGVmdCwgcXVlcnlT");
    sb.append("dGF0ZVJpZ2h0LCBuYW1lUmlnaHQsIHNob3VsZEJlLCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2Vy");
    sb.append("RmFsc2UsIGZvcmNlSGlkaW5nKSB7CiAgICB2YXIgY29tbW9uID0ge2xlZnQ6ZmFsc2UsIHJpZ2h0OnRy");
    sb.append("dWV9OwogICAgY29tbW9uLnMgPSBjb21tb25JZihwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHNob3VsZEJl");
    sb.append("LCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5nKTsKICAgIGNvbW1v");
    sb.append("bi5rID0gZGVib3VuY2UoNSwgZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucyh0aGlzLmxlZnQgPT0gdGhp");
    sb.append("cy5yaWdodCk7CiAgICB9LmJpbmQoY29tbW9uKSk7CiAgICBzdWJzY3JpYmUocXVlcnlTdGF0ZUxlZnQs");
    sb.append("IG5hbWVMZWZ0LCBmdW5jdGlvbiAobGVmdCkgewogICAgICB0aGlzLmxlZnQgPSBsZWZ0OwogICAgICB0");
    sb.append("aGlzLmsoKTsKICAgIH0uYmluZChjb21tb24pKQogICAgc3Vic2NyaWJlKHF1ZXJ5U3RhdGVSaWdodCwg");
    sb.append("bmFtZVJpZ2h0LCBmdW5jdGlvbiAocmlnaHQpIHsKICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0OwogICAg");
    sb.append("ICB0aGlzLmsoKTsKICAgIH0uYmluZChjb21tb24pKTsKICB9OwoKICAvKiogdGhlIGFib3ZlIHNwZWFr");
    sb.append("cyB0byBhIGRlZXAgcGF0dGVybi4gV2UgY291bGQgdGFrZSBhbnkgZXhwcmVzc2lvbiBhbmQgdGhlbiBs");
    sb.append("aW5lYXJpemUgaXQgaW50byByZWFjdGl2ZSBwYXJ0cywgYW5kIHRoZW4gYXNzZW1ibGUgYSBzdGF0ZW1l");
    sb.append("bnQgc3RhdGVtZW50IG9uIHRoZSBmbHkuIFdlIHNob3VsZCBsb29rIGludG8gdXNpbmcgdGhlIGNvbmRp");
    sb.append("dGlvbiBsYW5ndWFnZSBmb3IgdGhpcyAqLwoKICAvLyBSVU5USU1FIHwgcng6aWYgLyByeDppZm5vdCA9");
    sb.append("ICJwYXRoIgogIHNlbGYuSUYgPSBmdW5jdGlvbiAocGFyZW50LCBvcmlnaW5hbFN0YXRlLCBxdWVyeVN0");
    sb.append("YXRlLCBuYW1lLCBzaG91bGRCZSwgZXhwYW5kVmlldywgbWFrZXJUcnVlLCBtYWtlckZhbHNlLCBmb3Jj");
    sb.append("ZUhpZGluZykgewogICAgc3Vic2NyaWJlKHF1ZXJ5U3RhdGUsIG5hbWUsIGNvbW1vbklmKHBhcmVudCwg");
    sb.append("b3JpZ2luYWxTdGF0ZSwgc2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwg");
    sb.append("Zm9yY2VIaWRpbmcpKTsKICB9OwoKICAvLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1jb3B5OnBhdGgKICBz");
    sb.append("ZWxmLmFDUCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgbmFtZSkgewogICAgZm9ybS5hZGRFdmVudExp");
    sb.append("c3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgp");
    sb.append("OwogICAgICB2YXIgb2JqID0gZ2V0X2Zvcm0oZm9ybSwgZmFsc2UpOwogICAgICBpZiAobmFtZSAhPSAi");
    sb.append("LiIgJiYgbmFtZSAhPSAiIikgewogICAgICAgIHZhciBubyA9IHt9OwogICAgICAgIG5vW25hbWVdID0g");
    sb.append("b2JqOwogICAgICAgIG9iaiA9IG5vOwogICAgICB9CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3Rh");
    sb.append("dGUudmlldywgb2JqKTsKICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgIGZp");
    sb.append("cmVfc3VjY2Vzcyhmb3JtKTsKICAgIH0sIHRydWUpOwogIH07CgogIHNlbGYuVlNQID0gZnVuY3Rpb24o");
    sb.append("c3RhdGUsIHZhcnMpIHsKICAgIHZhciBzbSA9IHt9OwogICAgc20udmFycyA9IHZhcnM7CiAgICBzbS5s");
    sb.append("YXN0ID0ge307CiAgICBzbS5wYXJhbXMgPSAiIjsKICAgIHNtLm1vZGUgPSAicmVwbGFjZSI7CiAgICBz");
    sb.append("bS5waW5nID0gZGVib3VuY2UoNSwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBhcmdzID0gW107CiAgICAg");
    sb.append("IGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy52YXJzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgdmFyIGFy");
    sb.append("ZyA9IHRoaXMudmFyc1trXTsKICAgICAgICBpZiAoYXJnIGluIHRoaXMubGFzdCkgewogICAgICAgICAg");
    sb.append("YXJncy5wdXNoKGFyZyArICI9IiArIHRoaXMubGFzdFthcmddKTsKICAgICAgICB9CiAgICAgIH0KICAg");
    sb.append("ICAgdmFyIHJlc3VsdCA9ICI/IiArYXJncy5qb2luKCImIik7CiAgICAgIGlmIChyZXN1bHQgIT0gIj8i");
    sb.append("ICYmIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggIT09IHJlc3VsdCkgewogICAgICAgIHZhciBvYmogPSB7");
    sb.append("fTsKICAgICAgICBvYmoudmlld2VyX3NlYXJjaF9xdWVyeSA9IHJlc3VsdDsKICAgICAgICB2YXIgZGVs");
    sb.append("dGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0");
    sb.append("ZShkZWx0YSk7CiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCAiIiwgZml4SHJl");
    sb.append("Zih3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyByZXN1bHQpKTsKICAgICAgfQogICAgfS5iaW5kKHNt");
    sb.append("KSk7CiAgICBzdGF0ZS52aWV3LnRyZWUuc3Vic2NyaWJlKGZ1bmN0aW9uKHMpIHsKICAgICAgdGhpcy5s");
    sb.append("YXN0ID0gczsKICAgICAgdGhpcy5waW5nKCk7CiAgICB9LmJpbmQoc20pKTsKICB9OwoKICBzZWxmLkYg");
    sb.append("PSBmdW5jdGlvbihvLGspIHsKICAgIGlmIChrIGluIG8pIHsKICAgICAgcmV0dXJuIG9ba107CiAgICB9");
    sb.append("CiAgICByZXR1cm4gIiI7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxpbnB1dCAuLi4gcng6c3luYz1wYXRo");
    sb.append("IC4uLj4KICBzZWxmLlNZID0gZnVuY3Rpb24gKGVsLCBzdGF0ZSwgbmFtZSwgbXMpIHsKICAgIHZhciB0");
    sb.append("eXBlID0gKCJ0eXBlIiBpbiBlbCkgPyBlbC50eXBlLnRvVXBwZXJDYXNlKCkgOiAidGV4dCI7CiAgICB2");
    sb.append("YXIgc2lnbmFsID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2Jq");
    sb.append("W25hbWVdID0gdmFsdWU7CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsK");
    sb.append("ICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgIGlmICh0aGlzLmRlZHVwZSAh");
    sb.append("PSB2YWx1ZSkgewogICAgICAgIHRoaXMuZGVkdXBlID0gdmFsdWU7CiAgICAgICAgZWwuZGlzcGF0Y2hF");
    sb.append("dmVudChuZXcgRXZlbnQoImFmdGVyc3luYyIpKTsKICAgICAgfQogICAgfS5iaW5kKHtkZWR1cGU6IiJ9");
    sb.append("KTsKICAgIGlmICh0eXBlID09ICJDSEVDS0JPWCIpIHsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcign");
    sb.append("Y2hhbmdlJywgZGVib3VuY2UobXMsIGZ1bmN0aW9uICgpIHsKICAgICAgICBzaWduYWwoZWwuY2hlY2tl");
    sb.append("ZCA/IHRydWUgOiBmYWxzZSk7CiAgICAgIH0pKTsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICAgIHNpZ25hbChlbC5jaGVja2VkID8gdHJ1ZSA6IGZhbHNlKTsKICAgICAgfSwg");
    sb.append("MSk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gIlJBRElPIikgewogICAgICBlbC5hZGRFdmVudExpc3Rl");
    sb.append("bmVyKCdjaGFuZ2UnLCBkZWJvdW5jZShtcywgZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChlbC5jaGVj");
    sb.append("a2VkKSB7CiAgICAgICAgICBzaWduYWwoZWwudmFsdWUpOwogICAgICAgIH0KICAgICAgfSkpOwogICAg");
    sb.append("fSBlbHNlIHsKICAgICAgdmFyIGYgPSBkZWJvdW5jZShtcywgZnVuY3Rpb24gKCkgewogICAgICAgIHNp");
    sb.append("Z25hbChlbC52YWx1ZSk7CiAgICAgIH0pOwogICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2Un");
    sb.append("LCBmKTsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmKQogICAgICBlbC5vbmtleXVw");
    sb.append("ID0gZWwub25jaGFuZ2U7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAg");
    sb.append("ICBzaWduYWwoZWwudmFsdWUpOwogICAgICB9LCA1KTsKICAgIH0KICB9OwoKICB2YXIgZmlyc3RPY2N1");
    sb.append("ciA9IGZ1bmN0aW9uKGEsIGIpIHsKICAgIGlmIChhID4gMCAmJiBiID4gMCkgewogICAgICByZXR1cm4g");
    sb.append("TWF0aC5taW4oYSwgYik7CiAgICB9CiAgICBpZiAoYSA+IDApIHsKICAgICAgcmV0dXJuIGE7CiAgICB9");
    sb.append("IGVsc2UgewogICAgICByZXR1cm4gYjsKICAgIH0KICB9OwogIC8vIEhFTFBFUiB8IGV4dHJhY3QgYWxs");
    sb.append("IHRoZSBpbnB1dHMgZnJvbSB0aGUgZ2l2ZW4gZWxlbWVudCBhbmQgYnVpbGQgYW4gb2JqZWN0CiAgdmFy");
    sb.append("IGJ1aWxkX29iaiA9IGZ1bmN0aW9uIChlbCwgb2JqVG9JbnNlcnRJbnRvLCBhbGxvd19wYXNzd29yZHMs");
    sb.append("IGlzUm9vdCkgewogICAgaWYgKGVsLnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PSAiRk9STSIgJiYgIWlz");
    sb.append("Um9vdCkgewogICAgICAvLyBkb24ndCBjYXJlIGFib3V0IG5lc3RlZCBmb3JtcwogICAgICByZXR1cm47");
    sb.append("CiAgICB9CiAgICB2YXIgdXBwZXJUYWcgPSBlbC50YWdOYW1lLnRvVXBwZXJDYXNlKCk7CiAgICB2YXIg");
    sb.append("anVzdFNldCA9IHVwcGVyVGFnID09ICJURVhUQVJFQSIgfHwgdXBwZXJUYWcgPT0gIlNFTEVDVCI7CiAg");
    sb.append("ICB2YXIgaXNJbnB1dEJveCA9IHVwcGVyVGFnID09ICJJTlBVVCI7CiAgICB2YXIgaXNGaWVsZFNldCA9");
    sb.append("IHVwcGVyVGFnID09ICJGSUVMRFNFVCI7CiAgICB2YXIgaXNQdWxsID0gdXBwZXJUYWcgPT0gIlBVTExW");
    sb.append("QUxVRSI7CiAgICB2YXIgaGFzTmFtZSA9ICJuYW1lIiBpbiBlbDsKICAgIHZhciBpbnNlcnRBdCA9IG9i");
    sb.append("alRvSW5zZXJ0SW50bzsKICAgIC8vIHRoZSBhcHBseSBmdW5jdGlvbiBpcyBob3cgd2UgaW5qZWN0IHRo");
    sb.append("ZSB2YWx1ZSBpbnRvIHRoZSBvYmplY3QKICAgIHZhciBhcHBseSA9IGZ1bmN0aW9uICh2YWwpIHsgfTsK");
    sb.append("CiAgICB2YXIgbmFtZSA9ICIiOwogICAgaWYgKGhhc05hbWUgJiYgKGp1c3RTZXQgfHwgaXNJbnB1dEJv");
    sb.append("eCB8fCBpc0ZpZWxkU2V0IHx8IGlzUHVsbCkpIHsKICAgICAgbmFtZSA9IGVsLm5hbWU7CiAgICAgIGlm");
    sb.append("IChuYW1lID09ICIiKSB7IC8vIHRoaXMgaXMgYSBzcGVjaWFsIG5hbWUgZm9yIHRoaW5ncyB0aGF0IGRv");
    sb.append("bid0IGdldCBwaWNrZWQgdXAKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGtEb3RPclNs");
    sb.append("YXNoID0gZmlyc3RPY2N1cihuYW1lLmluZGV4T2YoJy4nKSwgbmFtZS5pbmRleE9mKCcvJykpOwogICAg");
    sb.append("ICB3aGlsZSAoa0RvdE9yU2xhc2ggPiAwKSB7CiAgICAgICAgdmFyIHBhciA9IG5hbWUuc3Vic3RyaW5n");
    sb.append("KDAsIGtEb3RPclNsYXNoKTsKICAgICAgICBpZiAoIShwYXIgaW4gaW5zZXJ0QXQpKSB7CiAgICAgICAg");
    sb.append("ICBpbnNlcnRBdFtwYXJdID0ge307CiAgICAgICAgfQogICAgICAgIGluc2VydEF0ID0gaW5zZXJ0QXRb");
    sb.append("cGFyXTsKICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoa0RvdE9yU2xhc2ggKyAxKTsKICAgICAg");
    sb.append("ICBrRG90T3JTbGFzaCA9IGZpcnN0T2NjdXIobmFtZS5pbmRleE9mKCcuJyksIG5hbWUuaW5kZXhPZign");
    sb.append("LycpKTsKICAgICAgfQoKICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoIisiKSkgewogICAgICAgIC8vIGhl");
    sb.append("cmUsIHdlIHB1c2ggdGhlIHZhbHVlIGludG8gdGhlIGFycmF5CiAgICAgICAgbmFtZSA9IG5hbWUuc3Vi");
    sb.append("c3RyaW5nKDAsIG5hbWUubGVuZ3RoIC0gMSk7CiAgICAgICAgYXBwbHkgPSBmdW5jdGlvbiAodikgewog");
    sb.append("ICAgICAgICAgaWYgKCEobmFtZSBpbiBpbnNlcnRBdCkpIHsKICAgICAgICAgICAgaW5zZXJ0QXRbbmFt");
    sb.append("ZV0gPSBbdl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpbnNlcnRBdFtuYW1lXS5wdXNo");
    sb.append("KHYpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gaGVyZSB3");
    sb.append("ZSBzZXQgdGhlIG9iamVjdAogICAgICAgIGFwcGx5ID0gZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIGlu");
    sb.append("c2VydEF0W25hbWVdID0gdjsKICAgICAgICB9OwogICAgICB9CiAgICB9CgogICAgaWYgKGlzUHVsbCkg");
    sb.append("ewogICAgICBhcHBseShlbC5wdWxsKCkpOwogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKGp1c3RT");
    sb.append("ZXQpIHsKICAgICAgYXBwbHkoZWwudmFsdWUpOwogICAgfSBlbHNlIGlmIChpc0ZpZWxkU2V0KSB7CiAg");
    sb.append("ICAgIHZhciBuZXh0T2JqZWN0ID0ge307CiAgICAgIGlmICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAg");
    sb.append("ICAgdmFyIGFyciA9IGVsLmNoaWxkcmVuOwogICAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAg");
    sb.append("ICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgICAgdmFyIGNoID0gZWwuY2hpbGRy");
    sb.append("ZW5ba107CiAgICAgICAgICBidWlsZF9vYmooY2gsIG5leHRPYmplY3QsIGFsbG93X3Bhc3N3b3Jkcywg");
    sb.append("ZmFsc2UpOwogICAgICAgIH0KICAgICAgfQogICAgICBhcHBseShuZXh0T2JqZWN0KTsKICAgIH0gZWxz");
    sb.append("ZSBpZiAoaXNJbnB1dEJveCkgewogICAgICB2YXIgdHlwZSA9ICgidHlwZSIgaW4gZWwpID8gZWwudHlw");
    sb.append("ZS50b1VwcGVyQ2FzZSgpIDogIlRFWFQiOwogICAgICBpZiAodHlwZSA9PSAiU1VCTUlUIiB8fCB0eXBl");
    sb.append("ID09ICJSRVNFVCIpIHJldHVybjsKICAgICAgaWYgKCh0eXBlID09ICJQQVNTV09SRCIgfHwgbmFtZSA9");
    sb.append("PSAicGFzc3dvcmQiKSAmJiAhYWxsb3dfcGFzc3dvcmRzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9");
    sb.append("CiAgICAgIGlmICh0eXBlID09ICJDSEVDS0JPWCIpIHsKICAgICAgICBhcHBseShlbC5jaGVja2VkID8g");
    sb.append("dHJ1ZSA6IGZhbHNlKTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJSQURJTyIpIHsKICAgICAgICBp");
    sb.append("ZiAoZWwuY2hlY2tlZCkgewogICAgICAgICAgYXBwbHkoZWwudmFsdWUpOwogICAgICAgIH0KICAgICAg");
    sb.append("fSBlbHNlIHsKICAgICAgICBhcHBseShlbC52YWx1ZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("IGlmICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAgICAgdmFyIGFyciA9IGVsLmNoaWxkcmVuOwogICAg");
    sb.append("ICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykg");
    sb.append("ewogICAgICAgICAgdmFyIGNoID0gZWwuY2hpbGRyZW5ba107CiAgICAgICAgICBidWlsZF9vYmooY2gs");
    sb.append("IG9ialRvSW5zZXJ0SW50bywgYWxsb3dfcGFzc3dvcmRzLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9");
    sb.append("CiAgICB9CiAgfTsKCiAgc2VsZi5CdWlsZEZvcm1PYmplY3QgPSBmdW5jdGlvbihmb3JtKSB7CiAgICB2");
    sb.append("YXIgb2JqID0ge307CiAgICBidWlsZF9vYmooZm9ybSwgb2JqLCBmYWxzZSwgdHJ1ZSk7CiAgICByZXR1");
    sb.append("cm4gb2JqOwogIH07CgogIC8vIEhFTFBFUiB8IHJldHVybiBhbiBvYmplY3Qgb2YgYWxsIHRoZSBpbnB1");
    sb.append("dHMgb2YgdGhlIGdpdmVuIGZvcm0gZWxlbWVudAogIHZhciBnZXRfZm9ybSA9IGZ1bmN0aW9uIChmb3Jt");
    sb.append("LCBhbGxvd19wYXNzd29yZHMpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIGJ1aWxkX29iaihmb3JtLCBv");
    sb.append("YmosIGFsbG93X3Bhc3N3b3JkcywgdHJ1ZSk7CiAgICByZXR1cm4gb2JqOwogIH07CgogIC8vIEhFTFBF");
    sb.append("UiB8IHJldHVybiBhIHBhc3N3b3JkIGZyb20gdGhlIGdpdmVuIGZvcm0KICB2YXIgZ2V0X3Bhc3N3b3Jk");
    sb.append("ID0gZnVuY3Rpb24gKGVsKSB7CiAgICBpZiAoZWwudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09ICJJTlBV");
    sb.append("VCIgJiYgKGVsLnR5cGUudG9VcHBlckNhc2UoKSA9PSAiUEFTU1dPUkQiIHx8IGVsLm5hbWUgPT0gInBh");
    sb.append("c3N3b3JkIikpIHsKICAgICAgcmV0dXJuIFtlbC5uYW1lLCBlbC52YWx1ZV07CiAgICB9CiAgICBpZiAo");
    sb.append("ImNoaWxkcmVuIiBpbiBlbCkgewogICAgICB2YXIgYXJyID0gZWwuY2hpbGRyZW47CiAgICAgIHZhciBu");
    sb.append("ID0gYXJyLmxlbmd0aDsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICB2");
    sb.append("YXIgY2ggPSBlbC5jaGlsZHJlbltrXTsKICAgICAgICB2YXIgcmVzdWx0ID0gZ2V0X3Bhc3N3b3JkKGNo");
    sb.append("KTsKICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gcmVzdWx0Owog");
    sb.append("ICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfTsKCiAgdmFyIHdyYXBwZXJz");
    sb.append("ID0ge307CiAgdmFyIHdyYXBwZXJzX29ubG9hZCA9IHt9OwogIHNlbGYuUFJXUCA9IGZ1bmN0aW9uIChu");
    sb.append("YW1lLCBmb28pIHsKICAgIHdyYXBwZXJzW25hbWVdID0gZm9vOwogICAgaWYgKG5hbWUgaW4gd3JhcHBl");
    sb.append("cnNfb25sb2FkKSB7CiAgICAgIHZhciB0b2xvYWQgPSB3cmFwcGVyc19vbmxvYWRbbmFtZV07CiAgICAg");
    sb.append("IGZvciAodmFyIGsgPSAwOyBrIDwgdG9sb2FkLmxlbmd0aDsgaysrKSB7CiAgICAgICAgdG9sb2FkW2td");
    sb.append("KCk7CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyA8Li4uIHJ4OndyYXA9Y29uc3QgPgogIHNlbGYuV1Ag");
    sb.append("PSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgbmFtZSwgcnhvYmosIGNoaWxkTWFrZXJXaXRoQ2FzZSkgewog");
    sb.append("ICAgaWYgKG5hbWUgaW4gd3JhcHBlcnMpIHsKICAgICAgd3JhcHBlcnNbbmFtZV0oZG9tLCBzdGF0ZSwg");
    sb.append("cnhvYmosIGNoaWxkTWFrZXJXaXRoQ2FzZSwgc2VsZik7CiAgICB9IGVsc2UgewogICAgICB2YXIgbG9h");
    sb.append("ZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHdyYXBwZXJzW25hbWVdKGRvbSwgc3RhdGUsIHJ4b2Jq");
    sb.append("LCBjaGlsZE1ha2VyV2l0aENhc2UsIHNlbGYpOwogICAgICB9OwogICAgICBpZiAobmFtZSBpbiB3cmFw");
    sb.append("cGVyc19vbmxvYWQpIHsKICAgICAgICB3cmFwcGVyc19vbmxvYWRbbmFtZV0ucHVzaChsb2FkZXIpOwog");
    sb.append("ICAgICB9IGVsc2UgewogICAgICAgIHdyYXBwZXJzX29ubG9hZFtuYW1lXSA9IFtsb2FkZXJdOwogICAg");
    sb.append("ICB9CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJlZ2lzdGVyIHRoZSBwYWdlIGZvciB0aGUgdXJp");
    sb.append("IHRvIHRoZSBnaXZlbiBmb28oKS4KICBzZWxmLlBHID0gZnVuY3Rpb24gKHVyaSwgZm9vKSB7CiAgICB2");
    sb.append("YXIgaGVhZCA9IHJvdXRlcjsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdXJpLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgIHZhciBwYXJ0ID0gdXJpW2tdOwogICAgICBpZiAoIShwYXJ0IGluIGhlYWQpKSB7CiAgICAg");
    sb.append("ICAgaGVhZFtwYXJ0XSA9IHt9OwogICAgICB9CiAgICAgIGhlYWQgPSBoZWFkW3BhcnRdOwogICAgfQog");
    sb.append("ICAgaGVhZFsiQCJdID0gZm9vOwogIH07CgogIHZhciByb3V0ZSA9IGZ1bmN0aW9uIChwYXJ0cywgYXQs");
    sb.append("IGhlYWQsIHZpZXcpIHsKICAgIGlmIChhdCA8IHBhcnRzLmxlbmd0aCkgewogICAgICBpZiAoIm51bWJl");
    sb.append("ciIgaW4gaGVhZCkgewogICAgICAgIHZhciBuZWNrID0gaGVhZFsibnVtYmVyIl07CiAgICAgICAgdmFy");
    sb.append("IHZhbCA9IHBhcnNlRmxvYXQocGFydHNbYXRdKTsKICAgICAgICBpZiAoIWlzTmFOKHZhbCkpIHsKICAg");
    sb.append("ICAgICAgIGZvciAodmFyIGJyYW5jaCBpbiBuZWNrKSB7CiAgICAgICAgICAgIHZpZXdbYnJhbmNoXSA9");
    sb.append("IHZhbDsKICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IHJvdXRlKHBhcnRzLCBhdCArIDEsIG5lY2tb");
    sb.append("YnJhbmNoXSwgdmlldyk7CiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUgIT09IG51bGwpIHsKICAgICAg");
    sb.append("ICAgICAgICByZXR1cm4gY2FuZGlkYXRlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRlbGV0ZSB2");
    sb.append("aWV3W2JyYW5jaF07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICgidGV4dCIg");
    sb.append("aW4gaGVhZCkgewogICAgICAgIHZhciBuZWNrID0gaGVhZFsidGV4dCJdOwogICAgICAgIHZhciB2YWwg");
    sb.append("PSBwYXJ0c1thdF07CiAgICAgICAgZm9yICh2YXIgYnJhbmNoIGluIG5lY2spIHsKICAgICAgICAgIHZp");
    sb.append("ZXdbYnJhbmNoXSA9IHZhbDsKICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSByb3V0ZShwYXJ0cywgYXQg");
    sb.append("KyAxLCBuZWNrW2JyYW5jaF0sIHZpZXcpOwogICAgICAgICAgaWYgKGNhbmRpZGF0ZSAhPT0gbnVsbCkg");
    sb.append("ewogICAgICAgICAgICByZXR1cm4gY2FuZGlkYXRlOwogICAgICAgICAgfQogICAgICAgICAgZGVsZXRl");
    sb.append("IHZpZXdbYnJhbmNoXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCJmaXhlZCIgaW4gaGVhZCkg");
    sb.append("ewogICAgICAgIHZhciBuZWNrID0gaGVhZFsiZml4ZWQiXTsKICAgICAgICBmb3IgKHZhciBicmFuY2gg");
    sb.append("aW4gbmVjaykgewogICAgICAgICAgaWYgKGJyYW5jaCA9PSBwYXJ0c1thdF0pIHsKICAgICAgICAgICAg");
    sb.append("dmFyIGNhbmRpZGF0ZSA9IHJvdXRlKHBhcnRzLCBhdCArIDEsIG5lY2tbYnJhbmNoXSwgdmlldyk7CiAg");
    sb.append("ICAgICAgICAgIGlmIChjYW5kaWRhdGUgIT09IG51bGwpIHsKICAgICAgICAgICAgICByZXR1cm4gY2Fu");
    sb.append("ZGlkYXRlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9IGVs");
    sb.append("c2UgewogICAgICBpZiAoIkAiIGluIGhlYWQpIHsKICAgICAgICByZXR1cm4gaGVhZFsiQCJdOwogICAg");
    sb.append("ICB9CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9OwoKCiAgc2VsZi5yZXN1bWVfdXJpID0gIi8iOwog");
    sb.append("IHNlbGYuZ2F0ZXMgPSBbXTsKICAvKiogUlVOVElNRSB8IDxnYXRlLWV4aXQgZ3VhcmQ9InJlYWQiIHNl");
    sb.append("dD0iIj4gKi8KICBzZWxmLklHID0gZnVuY3Rpb24oc3RhdGVSZWFkLCByZWFkLCBzdGF0ZVdyaXRlLCB3");
    sb.append("cml0ZSkgewogICAgdmFyIHNtID0gewogICAgICB2YWx1ZTogZmFsc2UsCiAgICAgIHJ1bjogZnVuY3Rp");
    sb.append("b24oKSB7CiAgICAgICAgaWYgKHRoaXMudmFsdWUpIHsKICAgICAgICAgIHZhciBvYmogPSB7fTsKICAg");
    sb.append("ICAgICAgIG9ialt3cml0ZV0gPSB0cnVlOwogICAgICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0");
    sb.append("ZVdyaXRlLnZpZXcsIG9iaik7CiAgICAgICAgICBzdGF0ZVdyaXRlLnZpZXcudHJlZS51cGRhdGUoZGVs");
    sb.append("dGEpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsK");
    sb.append("ICAgICAgfSwKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGVSZWFkLCByZWFkLCBmdW5jdGlvbih2YWx1");
    sb.append("ZSkgewogICAgICBzbS52YWx1ZSA9IHZhbHVlOwogICAgfSk7CiAgICBzZWxmLmdhdGVzLnB1c2goc20p");
    sb.append("OwogIH07CiAgc2VsZi5nb3RvID0gZnVuY3Rpb24gKHVyaSwgbm93KSB7CiAgICBzZWxmLnJlc3VtZV91");
    sb.append("cmkgPSB1cmk7CiAgICB2YXIgYmxvY2tlZCA9IGZhbHNlOwogICAgZm9yICh2YXIgayA9IDA7IGsgPCBz");
    sb.append("ZWxmLmdhdGVzLmxlbmd0aDsgaysrKSB7CiAgICAgIGlmIChzZWxmLmdhdGVzW2tdLnJ1bigpKSB7CiAg");
    sb.append("ICAgICAgYmxvY2tlZCA9IHRydWU7CiAgICAgIH0KICAgIH0KICAgIGlmIChibG9ja2VkKSB7CiAgICAg");
    sb.append("IHJldHVybjsKICAgIH0KICAgIGlmIChub3cpIHsKICAgICAgc2VsZi5nb3RvX25vdyh1cmkpOwogICAg");
    sb.append("fSBlbHNlIHsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYu");
    sb.append("Z290b19ub3codXJpKTsKICAgICAgfSwgMSk7CiAgICB9CiAgfTsKICAvLyBSVU5USU1FOiA8dGFnIC4u");
    sb.append("LiByeDpldmVudD0iLi4uIHJlc3VtZSAuLi4iPi4uCiAgc2VsZi5iUiA9IGZ1bmN0aW9uKCkgewogICAg");
    sb.append("cmV0dXJuIHsKICAgICAgcnVuOiBmdW5jdGlvbigpIHsKICAgICAgICBzZWxmLmdhdGVzID0gW107CiAg");
    sb.append("ICAgICAgc2VsZi5nb3RvKHNlbGYucmVzdW1lX3VyaSwgZmFsc2UpOwogICAgICB9LAogICAgICBtZXJn");
    sb.append("ZTogZnVuY3Rpb24oKSB7fQogICAgfTsKICB9OwogIHNlbGYuZ290b19ub3cgPSBmdW5jdGlvbih1cmkp");
    sb.append("IHsKICAgIGlmICh1cmkuc3RhcnRzV2l0aCgiLyIpKSB7CiAgICAgIHNlbGYucnVuKGRvY3VtZW50LmJv");
    sb.append("ZHksIHVyaSwgdHJ1ZSk7CiAgICB9IGVsc2UgewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGZp");
    sb.append("eEhyZWYodXJpKTsKICAgIH0KICB9OwoKICB2YXIgdXJsQmFzZTY0VG9VaW50OEFycmF5ID0gZnVuY3Rp");
    sb.append("b24oYmFzZTY0KSB7CiAgICB2YXIgcmF3RGF0YSA9IHdpbmRvdy5hdG9iKGJhc2U2NCk7CiAgICB2YXIg");
    sb.append("b3V0cHV0QXJyYXkgPSBuZXcgVWludDhBcnJheShyYXdEYXRhLmxlbmd0aCk7CiAgICBmb3IgKHZhciBp");
    sb.append("ID0gMDsgaSA8IHJhd0RhdGEubGVuZ3RoOyArK2kpIHsKICAgICAgb3V0cHV0QXJyYXlbaV0gPSByYXdE");
    sb.append("YXRhLmNoYXJDb2RlQXQoaSk7CiAgICB9CiAgICByZXR1cm4gb3V0cHV0QXJyYXk7CiAgfQoKICB2YXIg");
    sb.append("c2V0dXBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAocmVnaXN0cmF0aW9uLCB2YXBpZFB1YmxpY0tleSwg");
    sb.append("aWRlbnRpdHksIGlkZW50aXR5TmFtZSwgdmVyc2lvbikgewogICAgcmVnaXN0cmF0aW9uLnB1c2hNYW5h");
    sb.append("Z2VyCiAgICAuZ2V0U3Vic2NyaXB0aW9uKCkudGhlbihhc3luYyBmdW5jdGlvbiAoc3Vic2NyaXB0aW9u");
    sb.append("KSB7CiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikgewogICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlv");
    sb.append("bjsKICAgICAgICB9CiAgICAgICAgY29uc3QgY29udmVydGVkVmFwaWRLZXkgPSB1cmxCYXNlNjRUb1Vp");
    sb.append("bnQ4QXJyYXkodmFwaWRQdWJsaWNLZXkpOwogICAgICAgIHJldHVybiByZWdpc3RyYXRpb24ucHVzaE1h");
    sb.append("bmFnZXIuc3Vic2NyaWJlKHsKICAgICAgICAgIHVzZXJWaXNpYmxlT25seTogdHJ1ZSwKICAgICAgICAg");
    sb.append("IGFwcGxpY2F0aW9uU2VydmVyS2V5OiBjb252ZXJ0ZWRWYXBpZEtleQogICAgICAgIH0pOwogICAgfSku");
    sb.append("dGhlbihmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBoYXZlIGFu");
    sb.append("IGVuZHBvaW50IHNhdmVkIHJlbGF0ZWQgdG8gdGhlIHJpZ2h0IHZlcnNpb24KICAgICAgdmFyIHB1c2hL");
    sb.append("ZXlMb2NhbCA9ICJwdXNoX2VuZHBvaW50XyIgKyBpZGVudGl0eU5hbWU7CiAgICAgIGlmIChsb2NhbFN0");
    sb.append("b3JhZ2UuZ2V0SXRlbSgicHVzaF93b3JrZXJfdmVyc2lvbiIpICE9IHZlcnNpb24pIHsKICAgICAgICBs");
    sb.append("b2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwdXNoS2V5TG9jYWwpOwogICAgICAgIGxvY2FsU3RvcmFnZS5z");
    sb.append("ZXRJdGVtKCJwdXNoX3dvcmtlcl92ZXJzaW9uIiwgdmVyc2lvbik7CiAgICAgIH0KICAgICAgdmFyIHN1");
    sb.append("YiA9IHN1YnNjcmlwdGlvbi50b0pTT04oKTsKICAgICAgc3ViWydAbWV0aG9kJ10gPSAnd2VicHVzaCc7");
    sb.append("CiAgICAgIHN1YlsnQHRpbWUnXSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB2YXIgdmFsID0g");
    sb.append("bG9jYWxTdG9yYWdlLmdldEl0ZW0ocHVzaEtleUxvY2FsKTsKICAgICAgaWYgKHZhbCkgewogICAgICAg");
    sb.append("IGlmICh2YWwgPT0gc3ViLmVuZHBvaW50KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygicmV1c2luZyBl");
    sb.append("bmRwb2ludDoiICsgc3ViLmVuZHBvaW50KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAg");
    sb.append("IH0KICAgICAgdmFyIGRldmljZSA9IHt9OwogICAgICBkZXZpY2UubW9kZSA9ICd3ZWInCiAgICAgIGlm");
    sb.append("ICh3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkg");
    sb.append("ewogICAgICAgIGRldmljZS51YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50OwogICAgICB9CiAg");
    sb.append("ICAgIGNvbm5lY3Rpb24uUHVzaFJlZ2lzdGVyKGlkZW50aXR5LCBzZWxmLmRvbWFpbiwgc3ViLCBkZXZp");
    sb.append("Y2UsIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5z");
    sb.append("ZXRJdGVtKHB1c2hLZXlMb2NhbCwgc3ViLmVuZHBvaW50KTsKICAgICAgICB9LAogICAgICAgIGZhaWx1");
    sb.append("cmU6IGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgICAgY29uc29sZS5lcnJvcigiRmFpbGVkIHRvIHJl");
    sb.append("Z2lzdGVyIHN1YnNjcmlwdGlvbiB0byBBZGFtYToiICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH0p");
    sb.append("OwogICAgfSk7CiAgfQoKICB2YXIgc2V0dXBQdXNoID0gZnVuY3Rpb24ocGF0aCwgdmFwaWRQdWJsaWNL");
    sb.append("ZXksIGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pIHsKICAgIG5hdmlnYXRvci5zZXJ2aWNl");
    sb.append("V29ya2VyLmdldFJlZ2lzdHJhdGlvbnMoKS50aGVuKGZ1bmN0aW9uKHJlZ2lzdHJhdGlvbnMpIHsKICAg");
    sb.append("ICAgdmFyIGZvdW5kID0gZmFsc2U7CiAgICAgIGZvcihsZXQgcmVnaXN0cmF0aW9uIG9mIHJlZ2lzdHJh");
    sb.append("dGlvbnMpIHsKICAgICAgICBpZiAocmVnaXN0cmF0aW9uLmFjdGl2ZSkgewogICAgICAgICAgaWYgKCFy");
    sb.append("ZWdpc3RyYXRpb24uYWN0aXZlLnNjcmlwdFVSTC5lbmRzV2l0aChwYXRoKSkgewogICAgICAgICAgICBy");
    sb.append("ZWdpc3RyYXRpb24udW5yZWdpc3RlcigpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm91");
    sb.append("bmQgPSB0cnVlOwogICAgICAgICAgICBzZXR1cFN1YnNjcmlwdGlvbihyZWdpc3RyYXRpb24sIHZhcGlk");
    sb.append("UHVibGljS2V5LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9uKTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICB9CiAgICAgIH0KICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgIG5hdmlnYXRvci5zZXJ2aWNl");
    sb.append("V29ya2VyLnJlZ2lzdGVyKHBhdGgpOwogICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5");
    sb.append("LnRoZW4oZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbikgewogICAgICAgICAgc2V0dXBTdWJzY3JpcHRpb24o");
    sb.append("cmVnaXN0cmF0aW9uLCB2YXBpZFB1YmxpY0tleSwgaWRlbnRpdHksIGlkZW50aXR5TmFtZSwgdmVyc2lv");
    sb.append("bik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgc2VsZi53b3JrZXIgPSBmdW5jdGlv");
    sb.append("bihpZGVudGl0eU5hbWUsIHBhdGgsIHZlcnNpb24pIHsKICAgIHRyeSB7CiAgICAgIGFmdGVySGF2ZUlk");
    sb.append("ZW50aXR5KGlkZW50aXR5TmFtZSwgZnVuY3Rpb24oaWRlbnRpdHkpIHsKICAgICAgICBjb25uZWN0aW9u");
    sb.append("LkRvbWFpbkdldFZhcGlkUHVibGljS2V5KGlkZW50aXR5LCBzZWxmLmRvbWFpbiwgewogICAgICAgICAg");
    sb.append("c3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgc2V0dXBQdXNoKHBhdGgsIHJl");
    sb.append("c3BvbnNlLnB1YmxpY0tleSwgaWRlbnRpdHksIGlkZW50aXR5TmFtZSwgdmVyc2lvbik7CiAgICAgICAg");
    sb.append("ICB9LAogICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICBjb25z");
    sb.append("b2xlLmVycm9yKCJmYWlsZWQgdG8gZ2V0IHB1YmxpYy1rZXk6IiArIHJlYXNvbik7CiAgICAgICAgICB9");
    sb.append("CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9IGNhdGNoIChleCkgewogICAgICBjb25zb2xlLmVycm9y");
    sb.append("KCJmYWlsZWQgdG8gaW5pdGlhbGl6ZSB3b3JrZXIiLCBleCk7CiAgICB9CiAgfTsKCiAgc2VsZi5pbml0");
    sb.append("ID0gZnVuY3Rpb24gKCkgewogICAgc2VsZi5ydW4oZG9jdW1lbnQuYm9keSwgZml4UGF0aCh3aW5kb3cu");
    sb.append("bG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgd2luZG93LmxvY2F0aW9u");
    sb.append("Lmhhc2gpLCBmYWxzZSk7CiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uIChwKSB7CiAgICAg");
    sb.append("IHNlbGYucnVuKGRvY3VtZW50LmJvZHksIGZpeFBhdGgod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsg");
    sb.append("d2luZG93LmxvY2F0aW9uLnNlYXJjaCArIHdpbmRvdy5sb2NhdGlvbi5oYXNoKSwgZmFsc2UpOwogICAg");
    sb.append("fTsKICB9OwoKICBzZWxmLmN1cnJlbnRWaWV3ZXJJZCA9IDA7CiAgLy8gQVBJIHwgUnVuIHRoZSBwYWdl");
    sb.append("IGluIHRoZSBnaXZlbiBwbGFjZQogIHNlbGYucnVuID0gZnVuY3Rpb24gKHdoZXJlLCByYXdQYXRoLCBw");
    sb.append("dXNoKSB7CiAgICB2YXIgcGF0aCA9IHJhd1BhdGg7CiAgICB3aGlsZSAocGF0aC5lbmRzV2l0aCgiLyIp");
    sb.append("ICYmIHBhdGggIT0gIi8iKSB7CiAgICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxlbmd0");
    sb.append("aCAtIDEpOwogICAgfQogICAgZm9yIChjb25LZXkgaW4gY29ubmVjdGlvbnMpIHsKICAgICAgY29ubmVj");
    sb.append("dGlvbnNbY29uS2V5XS50cmVlLm51a2UoKTsKICAgICAgY29ubmVjdGlvbnNbY29uS2V5XS5udWtlKCk7");
    sb.append("CiAgICB9CiAgICB2YXIgc2VhcmNoID0gIiI7CiAgICB2YXIga1F1ZXN0aW9uID0gcGF0aC5pbmRleE9m");
    sb.append("KCc/Jyk7CiAgICBpZiAoa1F1ZXN0aW9uID4gMCkgewogICAgICBzZWFyY2ggPSBwYXRoLnN1YnN0cmlu");
    sb.append("ZyhrUXVlc3Rpb24pOwogICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwga1F1ZXN0aW9uKTsKICAg");
    sb.append("IH0KICAgIHZhciBwYXJ0cyA9IChwYXRoLnN0YXJ0c1dpdGgoIi8iKSA/IHBhdGguc3Vic3RyaW5nKDEp");
    sb.append("IDogcGF0aCkuc3BsaXQoIi8iKTsKICAgIHZhciBpbml0ID0ge307CiAgICBzZWxmLmN1cnJlbnRWaWV3");
    sb.append("ZXJJZCsrOwogICAgaW5pdC52aWV3ZXJfY3VycmVudF9wYWdlX2lkID0gc2VsZi5jdXJyZW50Vmlld2Vy");
    sb.append("SWQ7CiAgICB0cnkgewogICAgICBpbml0LnZpZXdlcl90aW1lem9uZSA9IEludGwuRGF0ZVRpbWVGb3Jt");
    sb.append("YXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTsKICAgICAgaW5pdC52aWV3ZXJfbGFuZ3VhZ2Ug");
    sb.append("PSBuYXZpZ2F0b3IubGFuZ3VhZ2U7CiAgICB9IGNhdGNoIChicm93c2VyQmFkKSB7CiAgICAgIC8vIHdl");
    sb.append("IGp1c3QgZG9uJ3Qgc2VlIHRoZSB2aWV3c3RhdGUgaWYgd2UgZG9uJ3QgaGF2ZSB0aGVzZSBhdmFpbGFi");
    sb.append("bGUKICAgIH0KICAgIGluaXQudmlld2VyX3NlYXJjaF9xdWVyeSA9ICIiOwogICAgaWYgKHNlYXJjaCAh");
    sb.append("PSAiPyIpIHsKICAgICAgaW5pdC52aWV3ZXJfc2VhcmNoX3F1ZXJ5ID0gc2VhcmNoOwogICAgICBjb25z");
    sb.append("dCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNlYXJjaC5zdWJzdHJpbmcoMSkpOwogICAgICB2");
    sb.append("YXIga0l0ID0gcGFyYW1zLmtleXMoKTsKICAgICAgdmFyIHAgPSBrSXQubmV4dCgpOwogICAgICB3aGls");
    sb.append("ZSAoIXAuZG9uZSkgewogICAgICAgIGluaXRbcC52YWx1ZV0gPSBwYXJhbXMuZ2V0KHAudmFsdWUpOwog");
    sb.append("ICAgICAgIHAgPSBrSXQubmV4dCgpOwogICAgICB9CiAgICB9CiAgICB2YXIgZm9vID0gcm91dGUocGFy");
    sb.append("dHMsIDAsIHJvdXRlciwgaW5pdCk7CiAgICBudWtlKHdoZXJlKTsKICAgIGlmIChmb28gIT0gbnVsbCkg");
    sb.append("ewogICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7CiAgICAgIHZhciBzdGF0ZSA9IHsgc2VydmljZTog");
    sb.append("Y29ubmVjdGlvbiwgZGF0YTogbnVsbCwgdmlldzogZnJlc2god2hlcmUpLCBjdXJyZW50OiAidmlldyIg");
    sb.append("fTsKICAgICAgc2VsZi5fX2N1cnJlbnQgPSBzdGF0ZTsKICAgICAgc3RhdGUudmlldy5pbml0ID0gaW5p");
    sb.append("dDsKICAgICAgc2VsZi5nYXRlcyA9IFtdOwogICAgICBzZWxmLnJlc3VtZV91cmkgPSBwYXRoOwogICAg");
    sb.append("ICBmb28od2hlcmUsIHN0YXRlKTsKICAgICAgc3RhdGUudmlldy50cmVlLnN1YnNjcmliZShzdGF0ZS52");
    sb.append("aWV3LmRlbHRhKTsKICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShpbml0KTsKICAgICAgaWYgKHB1");
    sb.append("c2gpIHsKICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe21lcmdlOmZhbHNlfSwgIiIsIGZp");
    sb.append("eEhyZWYocGF0aCkgKyBzZWFyY2gpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAocGF0aCAh");
    sb.append("PSAiLzQwNCIpIHsKICAgICAgICBzZWxmLnJ1bih3aGVyZSwgIi80MDQiKTsKICAgICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgICAvLyBkZWZhdWx0IDQwNAogICAgICB9CiAgICB9CiAgICB3aGVyZS5hcHBlbmRDaGlsZChj");
    sb.append("b25uZWN0aW9uTW9uaXRvckRvbSk7CiAgfTsKCiAgdmFyIGlkZW50aXRpZXMgPSB7fTsKCiAgc2VsZi5T");
    sb.append("SUdOT1VUID0gZnVuY3Rpb24gKCkgewogICAgaWRlbnRpdGllcyA9IHt9OwogICAgZm9yICh2YXIgaWRl");
    sb.append("bnRpdHlOYW1lIGluIGlkZW50aXRpZXMpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImlk");
    sb.append("ZW50aXR5XyIgKyBpZGVudGl0eU5hbWUpOwogICAgfQogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0o");
    sb.append("ImlkZW50aXR5X2RlZmF1bHQiKTsKICAgIHZhciBheGUgPSBbXTsKICAgIGZvciAodmFyIGNpZCBpbiBj");
    sb.append("b25uZWN0aW9ucykgewogICAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tjaWRdOwogICAgICBpZiAoY28u");
    sb.append("cHRyICE9IG51bGwpIHsKICAgICAgICBjby5wdHIuZW5kKHsgc3VjY2VzczogZnVuY3Rpb24gKCkgeyB9");
    sb.append("LCBmYWlsdXJlOiBmdW5jdGlvbiAoKSB7IH0gfSk7CiAgICAgIH0KICAgICAgYXhlLnB1c2goY2lkKTsK");
    sb.append("ICAgIH0KICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXhlLmxlbmd0aDsgaysrKSB7CiAgICAgIGRlbGV0");
    sb.append("ZSBjb25uZWN0aW9uc1theGVba11dOwogICAgfQogIH07CgogIHNlbGYuR09PR0xFX1NJR05fT04gPSBm");
    sb.append("dW5jdGlvbiAoYWNjZXNzVG9rZW4pIHsKICAgIGNvbm5lY3Rpb24uSW5pdENvbnZlcnRHb29nbGVVc2Vy");
    sb.append("KGFjY2Vzc1Rva2VuLCB7CiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAg");
    sb.append("aWRlbnRpdGllc1siZGVmYXVsdCJdID0gcGF5bG9hZC5pZGVudGl0eTsKICAgICAgICBsb2NhbFN0b3Jh");
    sb.append("Z2Uuc2V0SXRlbSgiaWRlbnRpdHlfZGVmYXVsdCIsIHBheWxvYWQuaWRlbnRpdHkpOwogICAgICAgIHNl");
    sb.append("bGYuZ290bygiLyIsIGZhbHNlKTsKICAgICAgfSwKICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNv");
    sb.append("bikgewogICAgICAgIGNvbnNvbGUubG9nKCJHb29nbGUgZmFpbHVyZTogIiArIHJlYXNvbik7CiAgICAg");
    sb.append("IH0KICAgIH0pOwogIH07CgogIC8qKiBSVU5USU1FIHwgcmVkaXJlY3QgdG8gYSBwYWdlIHdpdGggc3Rh");
    sb.append("dGUgKi8KICBzZWxmLmFSRHAgPSBmdW5jdGlvbiAoc3RhdGUsIHB1bGxlcikgewogICAgcmV0dXJuIGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgdmFyIHVyaSA9IHB1bGxlcihzdGF0ZS52aWV3LmluaXQpOwogICAgICBy");
    sb.append("ZXR1cm4gdXJpOwogICAgfTsKICB9OwoKICAvKiogUlVOVElNRSB8IHJlZGlyZWN0IHRvIGEgc3RhdGlj");
    sb.append("IHBhZ2UgKi8KICBzZWxmLmFSRHogPSBmdW5jdGlvbiAocmF3KSB7CiAgICByZXR1cm4gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICByZXR1cm4gcmF3OwogICAgfQogIH07CgogIHZhciBpZGVudGl0eUV2ZW50cyA9IHt9");
    sb.append("OwogIHZhciBhZnRlckhhdmVJZGVudGl0eSA9IGZ1bmN0aW9uKGlkZW50aXR5TmFtZSwgY2FsbGJhY2sp");
    sb.append("IHsKICAgIGlkZW50aXR5RXZlbnRzW2lkZW50aXR5TmFtZV0gPSBjYWxsYmFjazsKICB9OwoKICAvKiog");
    sb.append("Zm9yIGN1c3RvbSBlbGVtZW50cyB0byBsZWFybiBvZiB0aGUgaWRlbnRpdHkgKi8KICBzZWxmLklEID0g");
    sb.append("ZnVuY3Rpb24gKGlkZW50aXR5TmFtZSwgcmVkaXJlY3RUb0Z1bmMpIHsKICAgIGlmIChpZGVudGl0eU5h");
    sb.append("bWUgPT09IHRydWUpIHsKICAgICAgaWRlbnRpdHlOYW1lID0gImRlZmF1bHQiOwogICAgfQogICAgLy8g");
    sb.append("SUYgaWRlbnRpdHkgY29udGFpbnMgZG90cwogICAgdmFyIGlkZW50aXR5ID0gbnVsbDsKICAgIHZhciBj");
    sb.append("bGVhbnVwID0gZnVuY3Rpb24gKCkgewogICAgfTsKCiAgICB2YXIgdmFsID0gbG9jYWxTdG9yYWdlLmdl");
    sb.append("dEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUpOwogICAgaWYgKHZhbCkgewogICAgICBpZGVu");
    sb.append("dGl0aWVzW2lkZW50aXR5TmFtZV0gPSB2YWw7CiAgICB9CgogICAgaWYgKGlkZW50aXR5TmFtZS5zdGFy");
    sb.append("dHNXaXRoKCJkaXJlY3Q6IikpIHsKICAgICAgLy8gVXNlLCBhcyBpcwogICAgICBpZGVudGl0eSA9IGlk");
    sb.append("ZW50aXR5TmFtZS5zdWJzdHJpbmcoNyk7CiAgICB9IGVsc2UgaWYgKGlkZW50aXR5TmFtZSBpbiBpZGVu");
    sb.append("dGl0aWVzKSB7CiAgICAgIGlkZW50aXR5ID0gaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdOwogICAgICBj");
    sb.append("bGVhbnVwID0gZnVuY3Rpb24gKCkgewogICAgICAgIGRlbGV0ZSBpZGVudGl0aWVzW2lkZW50aXR5TmFt");
    sb.append("ZV07CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5h");
    sb.append("bWUpOwogICAgICAgIHNlbGYuZ290byhyZWRpcmVjdFRvRnVuYygpLCBmYWxzZSk7CiAgICAgIH07CiAg");
    sb.append("ICB9IGVsc2UgewogICAgICAvLyB3aGF0ZXZlciBwYWdlIHdlIGFyZSwgbmVlZHMgdG8gZGllIHdoaWNo");
    sb.append("IG1lYW5zIHdlIG5lZWQgdG8gbnVrZSBldmVyeXRoaW5nIQogICAgICB3aW5kb3cuc2V0VGltZW91dChm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgICAgc2VsZi5nb3RvKHJlZGlyZWN0VG9GdW5jKCksIGZhbHNlKTsKICAg");
    sb.append("ICAgfSwgMTApOwogICAgICByZXR1cm4geyBhYm9ydDogdHJ1ZSB9OwogICAgfQogICAgaWYgKGlkZW50");
    sb.append("aXR5TmFtZSBpbiBpZGVudGl0eUV2ZW50cykgewogICAgICBpZGVudGl0eUV2ZW50c1tpZGVudGl0eU5h");
    sb.append("bWVdKGlkZW50aXR5KTsKICAgICAgZGVsZXRlIGlkZW50aXR5RXZlbnRzW2lkZW50aXR5TmFtZV07CiAg");
    sb.append("ICB9CiAgICByZXR1cm4geyBhYm9ydDogZmFsc2UsIGNsZWFudXA6IGNsZWFudXAsIGlkZW50aXR5OiBp");
    sb.append("ZGVudGl0eSB9OwogIH07CgogIC8qIEZvciBjdXN0b20gY2FsbGJhY2tzIHRvIHJlZGlyZWN0IGFuZCBp");
    sb.append("bnZhbGlkYXRlIElEIGZhaWx1cmVzICovCiAgc2VsZi5GSURDTCA9IGZ1bmN0aW9uIChjYWxsYmFjaywg");
    sb.append("bG9va3VwKSB7CiAgICByZXR1cm4gewogICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAg");
    sb.append("ICAgICAgY2FsbGJhY2suc3VjY2VzcyhyZXN1bHQpOwogICAgICB9LAogICAgICBuZXh0OiBmdW5jdGlv");
    sb.append("biAoaXRlbSkgewogICAgICAgIGNhbGxiYWNrLm5leHQoaXRlbSk7CiAgICAgIH0sCiAgICAgIGNvbXBs");
    sb.append("ZXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgY2FsbGJhY2suY29tcGxldGUoKTsKICAgICAgfSwKICAg");
    sb.append("ICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIGNhbGxiYWNrLmZhaWx1cmUocmVh");
    sb.append("c29uKTsKICAgICAgICBpZiAocmVhc29uID09IDQwMzQwMyB8fCByZWFzb24gPT0gNDAzNTAwIHx8IHJl");
    sb.append("YXNvbiA9PSAxODQzMzMpIHsKICAgICAgICAgIGxvb2t1cC5jbGVhbnVwKCk7CiAgICAgICAgfQogICAg");
    sb.append("ICB9CiAgICB9OwogIH07CgogIHZhciBjdXN0b21EYXRhU291cmNlcyA9IHt9OwoKICAvKiogcHJvdmlk");
    sb.append("ZSBjdXN0b20gZGF0YSAqLwogIHNlbGYuUFJDVURBID0gZnVuY3Rpb24gKG5hbWUsIGZvbykgewogICAg");
    sb.append("Y3VzdG9tRGF0YVNvdXJjZXNbbmFtZV0gPSBmb287CiAgfTsKCiAgLy8gPGN1c3RvbWRhdGEgc3JjPXNy");
    sb.append("YyAocGFyYW1ldGVyOng9eSkqID4KICBzZWxmLkNVREEgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0");
    sb.append("YXRlLCBzcmMsIHJ4b2JqLCByZWRpcmVjdFRvLCBjaGlsZE1ha2VyKSB7CiAgICB2YXIgdW5zdWIgPSBt");
    sb.append("YWtlX3Vuc3ViKCk7CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDEwLCBmdW5jdGlvbiAoKSB7CiAgICAg");
    sb.append("IGZpcmVfdW5zdWIodW5zdWIpOwogICAgICBudWtlKHBhcmVudCk7CiAgICAgIHZhciBjdXN0b21UcmVl");
    sb.append("ID0gZmFsc2U7CiAgICAgIGlmIChzcmMgaW4gY3VzdG9tRGF0YVNvdXJjZXMpIHsKICAgICAgICB2YXIg");
    sb.append("Y29ucyA9IGN1c3RvbURhdGFTb3VyY2VzW3NyY107CiAgICAgICAgaWYgKHR5cGVvZiAoY29ucykgPT0g");
    sb.append("ImZ1bmN0aW9uIikgewogICAgICAgICAgY3VzdG9tVHJlZSA9IGNvbnMocnhvYmosIHByaW9yU3RhdGUs");
    sb.append("IHJlZGlyZWN0VG8sIHNlbGYpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIWN1c3RvbVRyZWUp");
    sb.append("IHsKICAgICAgICBjdXN0b21UcmVlID0gbmV3IEFkYW1hVHJlZSgpOwogICAgICB9CiAgICAgIHZhciBz");
    sb.append("dGF0ZSA9IHsKICAgICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2UsCiAgICAgICAgZGF0YTog");
    sb.append("eyBjb25uZWN0aW9uOiBwcmlvclN0YXRlLmNvbm5lY3Rpb24sIHRyZWU6IGN1c3RvbVRyZWUsIGRlbHRh");
    sb.append("OiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAgICAgdmlldzogbmV3X2RlbHRhX2Nv");
    sb.append("cHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICBjdXJyZW50OiAiZGF0YSIKICAgICAgfTsKICAgICAg");
    sb.append("Y2hpbGRNYWtlcihzdGF0ZSk7CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAg");
    sb.append("fSk7CiAgfTsKCiAgLy8gPHRpdGxlIHZhbHVlPSIuLi4iIC8+CiAgc2VsZi5TVCA9IGZ1bmN0aW9uIChy");
    sb.append("eG9iaikgewogICAgaWYgKHJ4b2JqLnZhbHVlKSB7CiAgICAgIGRvY3VtZW50LnRpdGxlID0gcnhvYmou");
    sb.append("dmFsdWU7CiAgICB9CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDUsIGZ1bmN0aW9uICgpIHsKICAgICAg");
    sb.append("aWYgKHJ4b2JqLnZhbHVlKSB7CiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSByeG9iai52YWx1ZTsKICAg");
    sb.append("ICAgfQogICAgfSk7CiAgfTsKCiAgLy8gPHZpZXdzeW5jPgogIHNlbGYuVlN5ID0gZnVuY3Rpb24gKHBh");
    sb.append("cmVudCwgcHJpb3JTdGF0ZSwgYXZhaWwsIG5vdGF2YWlsKSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vu");
    sb.append("c3ViKCk7CiAgICBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5zdWJzY3JpYmVfc3luYyhmdW5jdGlv");
    sb.append("biAoc3luY2VkKSB7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAg");
    sb.append("ICAgIHZhciBzdGF0ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGlmIChzeW5jZWQpIHsKICAgICAg");
    sb.append("ICBhdmFpbChwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBub3RhdmFpbChwYXJl");
    sb.append("bnQsIHN0YXRlKTsKICAgICAgfQogICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsKICAg");
    sb.append("ICAgLy8gVE9ETzogcmV0dXJuIGZhbHNlIHRvIHVuc3ViCiAgICAgIHJldHVybiB0cnVlOwogICAgfSk7");
    sb.append("CiAgfTsKCiAgdmFyIGJpbmRfcmVzcG9uZGVyID0gZnVuY3Rpb24gKGNvLCBjbGVhbnVwLCByZXRyeV9z");
    sb.append("bSkgewogICAgcmV0cnlfc20udW5leHBlY3RlZF9lcnJvcnMgPSAwOwogICAgcmV0cnlfc20uYmFja29m");
    sb.append("ZiA9IDE7CiAgICByZXR1cm4gewogICAgICBuZXh0OiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAg");
    sb.append("IGNvLmRlYnVnZ2VyKHBheWxvYWQpOwogICAgICAgIGNvLnNldF9jb25uZWN0ZWQodHJ1ZSk7CiAgICAg");
    sb.append("ICAgcmV0cnlfc20udW5leHBlY3RlZF9lcnJvcnMgPSAwOwogICAgICAgIHJldHJ5X3NtLmJhY2tvZmYg");
    sb.append("PSAxOwogICAgICAgIGlmICgiZGF0YSIgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgY28udHJl");
    sb.append("ZS51cGRhdGUocGF5bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgICB9CiAgICAgICAgaWYgKCJvdXRzdGFu");
    sb.append("ZGluZyIgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgY28ub25kZWNpZGUocGF5bG9hZC5kZWx0");
    sb.append("YS5vdXRzdGFuZGluZyk7CiAgICAgICAgfQogICAgICAgIGlmICgndmlld3N0YXRlJyBpbiBwYXlsb2Fk");
    sb.append("LmRlbHRhKSB7CiAgICAgICAgICBjby52aWV3c3RhdGV0cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLnZp");
    sb.append("ZXdzdGF0ZSk7CiAgICAgICAgfQogICAgICAgIGlmICgnbG9nJyBpbiBwYXlsb2FkLmRlbHRhKSB7CiAg");
    sb.append("ICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkLmRlbHRhLmxvZyk7CiAgICAgICAgfQogICAgICAgIGlm");
    sb.append("ICgndmlld3BvcnQnIGluIHBheWxvYWQuZGVsdGEgJiYgJ21lc3NhZ2UnIGluIHBheWxvYWQuZGVsdGEp");
    sb.append("IHsKICAgICAgICAgIHZhciB2aWV3cG9ydCA9IHBheWxvYWQuZGVsdGEudmlld3BvcnQ7CiAgICAgICAg");
    sb.append("ICBpZiAodmlld3BvcnQgaW4gY28uaGFuZGxlcnMpIHsKICAgICAgICAgICAgY28uaGFuZGxlcnNbdmll");
    sb.append("d3BvcnRdKHBheWxvYWQuZGVsdGEubWVzc2FnZSwgY28pOwogICAgICAgICAgfQogICAgICAgIH0KICAg");
    sb.append("ICAgICBpZiAoJ3ZpZXctc3RhdGUtZmlsdGVyJyBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICB2");
    sb.append("YXIgZmlsdGVyID0ge307CiAgICAgICAgICB2YXIga2V5cyA9IHBheWxvYWQuZGVsdGFbJ3ZpZXctc3Rh");
    sb.append("dGUtZmlsdGVyJ107CiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGtleXMubGVuZ3RoOyBrKysp");
    sb.append("IHsKICAgICAgICAgICAgZmlsdGVyW2tleXNba11dID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IGNvLmZpbHRlciA9IGZpbHRlcjsKICAgICAgICAgIGNvLmhhc19maWx0ZXIgPSB0cnVlOwogICAgICAg");
    sb.append("IH0KICAgICAgICBpZiAoJ2dvdG8nIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIHNlbGYuZ290");
    sb.append("byhwYXlsb2FkLmRlbHRhLmdvdG8sIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNvbXBs");
    sb.append("ZXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gc2hvdWxkbid0IHJlYWxpc3RpY2FsbHkgaGFwcGVu");
    sb.append("IFRPRE86IHZhbGlkYXRlIDwtIHRydXRoCiAgICAgICAgY28uc2V0X2Nvbm5lY3RlZChmYWxzZSk7CiAg");
    sb.append("ICAgICAgY28ucHRyID0gbnVsbDsKICAgICAgfSwKICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNv");
    sb.append("bikgewogICAgICAgIC8vIHJlZ2lzdGVyIHRoZSBmYWlsdXJlCiAgICAgICAgY28uc2V0X2Nvbm5lY3Rl");
    sb.append("ZChmYWxzZSk7CiAgICAgICAgY28ucHRyID0gbnVsbDsKICAgICAgICBpZiAocmVhc29uID09IDQwMzQw");
    sb.append("MyB8fCByZWFzb24gPT0gNDAzNTAwIHx8IHJlYXNvbiA9PSAxODQzMzMpIHsKICAgICAgICAgIGNsZWFu");
    sb.append("dXAoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gaXMgaXQgYW4gZXhwZWN0");
    sb.append("ZWQgZXJyb3IgdGhhdCB3aWxsIGhhcHBlbiBhIGJ1bmNoPwogICAgICAgIHZhciBleHBlY3RlZF9lcnJv");
    sb.append("ciA9IHJlYXNvbiA9PSA5OTk7CiAgICAgICAgLy8gZG8gd2Ugbm90IGtub3cgYWJvdXQgYW4gZXJyb3Ig");
    sb.append("dGhhdCBoYXBwZW5zIGEgYnVuY2g/IGlmIHNvLCB0aGVuIGxldCdzIGF0IGxlYXN0IHRyeSBhZ2FpbiBh");
    sb.append("IG51bWJlciBvZiBmaW5pdGUgdGltZXMuCiAgICAgICAgdmFyIGJsaW5kX3JldHJ5ID0gcmV0cnlfc20u");
    sb.append("dW5leHBlY3RlZF9lcnJvcnMgPCAxNjsKICAgICAgICBpZiAoYmxpbmRfcmV0cnkpIHsKICAgICAgICAg");
    sb.append("IHJldHJ5X3NtLnVuZXhwZWN0ZWRfZXJyb3JzKys7CiAgICAgICAgfQogICAgICAgIC8vIHJldHJ5IG9u");
    sb.append("IGVpdGhlciBjYXNlCiAgICAgICAgaWYgKGV4cGVjdGVkX2Vycm9yIHx8IGJsaW5kX3JldHJ5KSB7CiAg");
    sb.append("ICAgICAgICByZXRyeV9zbS5iYWNrb2ZmID0gTWF0aC5jZWlsKE1hdGgubWluKHJldHJ5X3NtLmJhY2tv");
    sb.append("ZmYgKyBNYXRoLnJhbmRvbSgpICogcmV0cnlfc20uYmFja29mZiArIChibGluZF9yZXRyeSA/IDEyNSA6");
    sb.append("IDEpLCAyNTAwKSk7CiAgICAgICAgICBpZiAoZXhwZWN0ZWRfZXJyb3IpIHsKICAgICAgICAgICAgLy8g");
    sb.append("dGhlIGV4cGVjdGVkIGVycm9yIGlzIGEgY29ubmVjdGlvbiBldmVudCwgc28gd2UgcHJvdGVjdCB0aGUg");
    sb.append("c2VydmljZSBhbmQganVtcCBiYWNrLW9mZiByaWdodCB0byBuZWFyIG1heCBvdmVyIGEgbmljZSBzcHJl");
    sb.append("YWQKICAgICAgICAgICAgcmV0cnlfc20uYmFja29mZiA9IE1hdGgubWluKDEyNTAsIHJldHJ5X3NtLmJh");
    sb.append("Y2tvZmYpICsgTWF0aC5yYW5kb20oKSAqIDEyNTA7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZXhw");
    sb.append("ZWN0ZWRfZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coImNvbm5lY3QtbG9zc3xyZXRyeWlu");
    sb.append("Zy4uLiAoIiArIHJldHJ5X3NtLmJhY2tvZmYgKyAiKTsgcmVhc29uPSIgKyByZWFzb24gKyAoYmxpbmRf");
    sb.append("cmV0cnkgPyAiIFtibGluZF0iIDogIiIpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNv");
    sb.append("bnNvbGUubG9nKCJjb25uZWN0LWZhaWx1cmV8cmV0cnlpbmcuLi4gKCIgKyByZXRyeV9zbS5iYWNrb2Zm");
    sb.append("ICsgIik7IHJlYXNvbj0iICsgcmVhc29uICsgKGJsaW5kX3JldHJ5ID8gIiBbYmxpbmRdIiA6ICIiKSk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgICAvLyBUT0RPOiBuZWVkIGEgZGlmZmVyZW50IGZlZWRiYWNrIG1l");
    sb.append("Y2hhbmlzbSAobWF5YmUgYSBudW1iZXIgdW5kZXIgdGhlIHdpZmkgaWNvbj8pCiAgICAgICAgICB3aW5k");
    sb.append("b3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0cnlfc20uZ28oKTsKICAgICAg");
    sb.append("ICAgIH0sIHJldHJ5X3NtLmJhY2tvZmYpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xl");
    sb.append("LmxvZygiZ2F2ZSB1cCBjb25uZWN0aW9uOyIgKyBjby5sYWJlbCArICI7IHJlYXNvbj0iICsgcmVhc29u");
    sb.append("KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIgc2V0dXBfY28gPSBmdW5jdGlvbihk");
    sb.append("ZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKSB7CiAgICBjby52aWV3c3RhdGV0cmVlID0gc3RhdGUudmll");
    sb.append("dy50cmVlOwogICAgdmFyIHN5bmNfdHJlZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgLy8gbGV0J3MgY29w");
    sb.append("eSBvdXQgdGhlIHRyZWUgZnJvbSB0aGUgdmlld3N0YXRlCiAgICAgIHZhciBuZXdfdHJlZSA9IHNhZmVf");
    sb.append("ZmlsdGVyKHN0YXRlLnZpZXcudHJlZS5jb3B5KCkpOwoKICAgICAgLy8gaWYgd2UgaGF2ZSBnb3QgYSBm");
    sb.append("aWx0ZXIgZnJvbSB0aGUgc2VydmVyLCB0aGVuIGxldCdzIGZpbHRlcgogICAgICBpZiAoY28uaGFzX2Zp");
    sb.append("bHRlcikgewogICAgICAgIC8vIHJlY29uc3RydWN0IHRoZSBuZXcgdmlldyBiYXNlZCBvbiB0aGUgaW50");
    sb.append("ZXJzZWN0aW9uIG9mIHRoZSBmaWx0ZXIgYW5kIHRoZSBuZXcgc3RhdGUKICAgICAgICB2YXIgZmlsdGVy");
    sb.append("ZWQgPSB7fTsKICAgICAgICBmb3IgKHZhciBrIGluIG5ld190cmVlKSB7CiAgICAgICAgICBpZiAoY28u");
    sb.append("ZmlsdGVyW2tdKSB7CiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0gbmV3X3RyZWVba107CiAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgfQogICAgICAgIC8vIGFzc3VtZSB0aGUgbmV3IHRyZWUKICAgICAgICBuZXdfdHJl");
    sb.append("ZSA9IGZpbHRlcmVkOwogICAgICB9CiAgICAgIC8vIGlmIHRoZSBjbG9uZSAoaS5lLiBzdHJpbmdpZmll");
    sb.append("ZCB2ZXJzaW9uKSBpcyB0aGUgc2FtZSBhcyB3aGF0IHdlIGxhc3Qgc2VudCwgdGhlbiBkb24ndCBzZW5k");
    sb.append("IGFueXRoaW5nCiAgICAgIHZhciBwcmlvcl9jbG9uZSA9IEpTT04uc3RyaW5naWZ5KG5ld190cmVlKTsK");
    sb.append("ICAgICAgaWYgKHByaW9yX2Nsb25lID09IGNvLnZpZXdzdGF0ZV9jbG9uZSkgewogICAgICAgIHJldHVy");
    sb.append("bjsKICAgICAgfQogICAgICBjby52aWV3c3RhdGVfc2VudCA9IGZhbHNlOwogICAgICBjby52c3NlcSsr");
    sb.append("OwogICAgICBjby5zeW5jKCk7CiAgICAgIHZhciBzeW5jZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAg");
    sb.append("aWYgKGNvLnZzc2VxID09IHRoaXMuYm91bmQpIHsKICAgICAgICAgIGNvLnZpZXdzdGF0ZV9zZW50ID0g");
    sb.append("dHJ1ZTsKICAgICAgICAgIGNvLnN5bmMoKTsKICAgICAgICB9CiAgICAgIH0uYmluZCh7IGJvdW5kOiBj");
    sb.append("by52c3NlcSB9KTsKICAgICAgY28udmlld3N0YXRlX2Nsb25lID0gSlNPTi5zdHJpbmdpZnkobmV3X3Ry");
    sb.append("ZWUpOwogICAgICBjby5wdHIudXBkYXRlKG5ld190cmVlLCB7IHN1Y2Nlc3M6IHN5bmNlZCwgZmFpbHVy");
    sb.append("ZTogc3luY2VkIH0pOwogICAgfTsKICAgIHZhciBiaW5kID0gZnVuY3Rpb24gKHNlbmROb3cpIHsKICAg");
    sb.append("ICAgdW5zdWIudmlldyA9IHN0YXRlLnZpZXcudHJlZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgewogICAg");
    sb.append("ICAgIGlmIChjby5wdHIgPT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAg");
    sb.append("ICBzeW5jX3RyZWUoKTsKICAgICAgfSk7CiAgICAgIGlmIChzZW5kTm93KSB7CiAgICAgICAgc3luY190");
    sb.append("cmVlKCk7CiAgICAgIH0KICAgIH07CiAgICBpZiAoY28ucHRyICE9IG51bGwgJiYgY28uYm91bmQgPT0g");
    sb.append("ZGVzaXJlZCkgewogICAgICBiaW5kKHRydWUpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBp");
    sb.append("ZiAoY28ucHRyICE9IG51bGwpIHsKICAgICAgY28ucHRyLmVuZCh7IHN1Y2Nlc3M6IGZ1bmN0aW9uICgp");
    sb.append("IHsgfSwgZmFpbHVyZTogZnVuY3Rpb24gKCkgeyB9IH0pOwogICAgICBjby5wdHIgPSBudWxsOwogICAg");
    sb.append("fQogICAgcmV0dXJuIGJpbmQ7CiAgfTsKCiAgLy8gPGNvbm5lY3Rpb24gYmlsbGluZyAuLi4+CiAgc2Vs");
    sb.append("Zi5CQ09OTkVDVCA9IGZ1bmN0aW9uIChzdGF0ZSwgcnhvYmopIHsKICAgIHZhciB1bnN1YiA9IHsKICAg");
    sb.append("ICAgdmlldzogZnVuY3Rpb24gKCkgewogICAgICB9CiAgICB9OwogICAgcnhvYmouX18gPSBkZWJvdW5j");
    sb.append("ZSg1LCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghKCduYW1lJyBpbiByeG9iaikpIHsKICAgICAgICBy");
    sb.append("ZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGlkTG9va3VwID0gc2VsZi5JRChyeG9iai5pZGVudGl0eSwg");
    sb.append("ZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhvYmoucmVkaXJlY3Q7IH0pOwogICAgICBpZiAoaWRMb29rdXAu");
    sb.append("YWJvcnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNvID0gZ2V0X2Nvbm5lY3Rp");
    sb.append("b25fb2JqKHJ4b2JqLm5hbWUpOwogICAgICB2YXIgZGVzaXJlZCA9ICI6YmlsbGluZzoiICsgaWRMb29r");
    sb.append("dXAuaWRlbnRpdHk7CiAgICAgIHZhciBiaW5kID0gc2V0dXBfY28oZGVzaXJlZCwgdW5zdWIsIGNvLCBz");
    sb.append("dGF0ZSk7CiAgICAgIGlmIChiaW5kID09PSBmYWxzZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQog");
    sb.append("ICAgICBjby5ib3VuZCA9IGRlc2lyZWQ7CiAgICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50");
    sb.append("aXR5OwogICAgICB2YXIgY2xlYW51cCA9IGlkTG9va3VwLmNsZWFudXA7CiAgICAgIHVuc3ViLnZpZXco");
    sb.append("KTsKICAgICAgY28uaWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAgY28uaGFuZGxlcnMgPSB7fTsKICAg");
    sb.append("ICAgY28udmlld3N0YXRlX3NlbnQgPSB0cnVlOwogICAgICBjby5sYWJlbCA9ICJCaWxsaW5nIFsgIiAr");
    sb.append("IHJ4b2JqLm5hbWUgKyAiXSI7CiAgICAgIGNvLnZpYV9iaWxsaW5nID0gdHJ1ZTsKICAgICAgY28udmlh");
    sb.append("X2RvbWFpbiA9IGZhbHNlOwogICAgICB2YXIgcmV0cnlfc20gPSB7fTsKICAgICAgcmV0cnlfc20ucmVz");
    sb.append("cG9uZGVyID0gYmluZF9yZXNwb25kZXIoY28sIGNsZWFudXAsIHJldHJ5X3NtKTsKICAgICAgcmV0cnlf");
    sb.append("c20uZ28gPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBiaWFzIHRvIG5vdGhpbmcgbmV3CiAgICAgICAg");
    sb.append("Y28udmlld3N0YXRlX2Nsb25lID0gInt9IjsKICAgICAgICBjby5wdHIgPSBjb25uZWN0aW9uLkJpbGxp");
    sb.append("bmdDb25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5LCByZXRyeV9zbS5yZXNwb25kZXIpOwogICAgICB9Owog");
    sb.append("ICAgICByZXRyeV9zbS5nbygpOwogICAgICBjby50cmVlLnVwZGF0ZSh7fSk7CiAgICAgIGJpbmQoZmFs");
    sb.append("c2UpOwogICAgfSk7CiAgfTsKCiAgc2VsZi5kb21haW4gPSBsb2NhdGlvbi5ob3N0bmFtZTsKICBzZWxm");
    sb.append("Lmhvc3QgPSBsb2NhdGlvbi5ob3N0OwogIHNlbGYucHJvdG9jb2wgPSBsb2NhdGlvbi5wcm90b2NvbDsK");
    sb.append("CiAgc2VsZi5tb2JpbGVJbml0ID0gZnVuY3Rpb24ob3ZlcnJpZGVEb21haW4pIHsKICAgIHNlbGYuZG9t");
    sb.append("YWluID0gb3ZlcnJpZGVEb21haW47CiAgICBzZWxmLmhvc3QgPSBvdmVycmlkZURvbWFpbjsKICAgIHNl");
    sb.append("bGYucHJvdG9jb2wgPSAiaHR0cHMiOwogIH07CgogIC8vIDxjb25uZWN0aW9uIHVzZS1kb21haW4gLi4u");
    sb.append("PgogIHNlbGYuRENPTk5FQ1QgPSBmdW5jdGlvbiAoc3RhdGUsIHJ4b2JqKSB7CiAgICB2YXIgdW5zdWIg");
    sb.append("PSB7CiAgICAgIHZpZXc6IGZ1bmN0aW9uICgpIHsKICAgICAgfQogICAgfTsKICAgIHJ4b2JqLl9fID0g");
    sb.append("ZGVib3VuY2UoNSwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoISgnbmFtZScgaW4gcnhvYmopKSB7CiAg");
    sb.append("ICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQocnhvYmouaWRl");
    sb.append("bnRpdHksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0OyB9KTsKICAgICAgaWYgKGlk");
    sb.append("TG9va3VwLmFib3J0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBjbyA9IGdldF9j");
    sb.append("b25uZWN0aW9uX29iaihyeG9iai5uYW1lKTsKICAgICAgdmFyIGRvbWFpbiA9IHNlbGYuZG9tYWluOwog");
    sb.append("ICAgICB2YXIgZGVzaXJlZCA9IGRvbWFpbiArIGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2YXIgYmlu");
    sb.append("ZCA9IHNldHVwX2NvKGRlc2lyZWQsIHVuc3ViLCBjbywgc3RhdGUpOwogICAgICBpZiAoYmluZCA9PT0g");
    sb.append("ZmFsc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY28uYm91bmQgPSBkZXNpcmVkOwoK");
    sb.append("ICAgICAgdmFyIGlkZW50aXR5ID0gaWRMb29rdXAuaWRlbnRpdHk7CiAgICAgIHZhciBjbGVhbnVwID0g");
    sb.append("aWRMb29rdXAuY2xlYW51cDsKICAgICAgdW5zdWIudmlldygpOwogICAgICBjby5pZGVudGl0eSA9IGlk");
    sb.append("ZW50aXR5OwogICAgICBjby5oYW5kbGVycyA9IHt9OwogICAgICBjby52aWV3c3RhdGVfc2VudCA9IHRy");
    sb.append("dWU7CiAgICAgIGNvLmxhYmVsID0gIkRvbWFpbjoiICsgZG9tYWluICsgIiBbICIgKyByeG9iai5uYW1l");
    sb.append("ICsgIl0iOwogICAgICBjby52aWFfZG9tYWluID0gdHJ1ZTsKICAgICAgY28udmlhX2JpbGxpbmcgPSBm");
    sb.append("YWxzZTsKICAgICAgY28uZG9tYWluID0gZG9tYWluOwogICAgICB2YXIgcmV0cnlfc20gPSB7fTsKICAg");
    sb.append("ICAgcmV0cnlfc20ucmVzcG9uZGVyID0gYmluZF9yZXNwb25kZXIoY28sIGNsZWFudXAsIHJldHJ5X3Nt");
    sb.append("KTsKICAgICAgcmV0cnlfc20uZ28gPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBiaWFzIHRvIG5vdGhp");
    sb.append("bmcgbmV3CiAgICAgICAgY28udmlld3N0YXRlX2Nsb25lID0gInt9IjsKICAgICAgICBjby5wdHIgPSBj");
    sb.append("b25uZWN0aW9uLkNvbm5lY3Rpb25DcmVhdGVWaWFEb21haW4oaWRlbnRpdHksIGRvbWFpbiwgc2FmZV9m");
    sb.append("aWx0ZXIoc3RhdGUudmlldy50cmVlLmNvcHkoKSksIHJldHJ5X3NtLnJlc3BvbmRlcik7CiAgICAgIH07");
    sb.append("CiAgICAgIHJldHJ5X3NtLmdvKCk7CiAgICAgIGNvLnRyZWUudXBkYXRlKHt9KTsKICAgICAgYmluZChm");
    sb.append("YWxzZSk7CiAgICB9KTsKICB9OwoKICAvLyA8Y29ubmVjdGlvbiAuLi4+CiAgc2VsZi5DT05ORUNUID0g");
    sb.append("ZnVuY3Rpb24gKHN0YXRlLCByeG9iaikgewogICAgdmFyIHVuc3ViID0gewogICAgICB2aWV3OiBmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICAgIH0KICAgIH07CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDUsIGZ1bmN0aW9u");
    sb.append("ICgpIHsKICAgICAgdmFyIHZhbGlkID0gJ2tleScgaW4gcnhvYmogJiYgJ3NwYWNlJyBpbiByeG9iaiAm");
    sb.append("JiAnbmFtZScgaW4gcnhvYmo7CiAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICByZXR1cm47CiAgICAg");
    sb.append("IH0KICAgICAgdmFyIGlkTG9va3VwID0gc2VsZi5JRChyeG9iai5pZGVudGl0eSwgZnVuY3Rpb24gKCkg");
    sb.append("eyByZXR1cm4gcnhvYmoucmVkaXJlY3Q7IH0pOwogICAgICBpZiAoaWRMb29rdXAuYWJvcnQpIHsKICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNvID0gZ2V0X2Nvbm5lY3Rpb25fb2JqKHJ4b2Jq");
    sb.append("Lm5hbWUpOwogICAgICB2YXIgZGVzaXJlZCA9IHJ4b2JqLnNwYWNlICsgIi8iICsgcnhvYmoua2V5ICsg");
    sb.append("Ii8iICsgaWRMb29rdXAuaWRlbnRpdHk7IC8vIFRPRE86IG5lZWQgc29tZSBraW5kIG9mIGhhc2hpbmcg");
    sb.append("ZnVuY3Rpb24gaGVyZQogICAgICB2YXIgYmluZCA9IHNldHVwX2NvKGRlc2lyZWQsIHVuc3ViLCBjbywg");
    sb.append("c3RhdGUpOwogICAgICBpZiAoYmluZCA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0K");
    sb.append("ICAgICAgY28uYm91bmQgPSBkZXNpcmVkOwoKICAgICAgdmFyIGlkZW50aXR5ID0gaWRMb29rdXAuaWRl");
    sb.append("bnRpdHk7CiAgICAgIHZhciBjbGVhbnVwID0gaWRMb29rdXAuY2xlYW51cDsKICAgICAgdW5zdWIudmll");
    sb.append("dygpOwogICAgICBjby5zcGFjZSA9IHJ4b2JqLnNwYWNlOwogICAgICBjby5rZXkgPSByeG9iai5rZXk7");
    sb.append("CiAgICAgIGNvLmlkZW50aXR5ID0gaWRlbnRpdHk7CiAgICAgIGNvLmhhbmRsZXJzID0ge307CiAgICAg");
    sb.append("IGNvLnZpZXdzdGF0ZV9zZW50ID0gdHJ1ZTsKICAgICAgY28ubGFiZWwgPSBjby5zcGFjZSArICIvIiAr");
    sb.append("IGNvLmtleSArICIgWyAiICsgcnhvYmoubmFtZSArICJdIjsKICAgICAgY28udmlhX2RvbWFpbiA9IGZh");
    sb.append("bHNlOwogICAgICBjby52aWFfYmlsbGluZyA9IGZhbHNlOwogICAgICB2YXIgcmV0cnlfc20gPSB7fTsK");
    sb.append("ICAgICAgcmV0cnlfc20ucmVzcG9uZGVyID0gYmluZF9yZXNwb25kZXIoY28sIGNsZWFudXAsIHJldHJ5");
    sb.append("X3NtKTsKICAgICAgcmV0cnlfc20uZ28gPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBiaWFzIHRvIG5v");
    sb.append("dGhpbmcgbmV3CiAgICAgICAgY28udmlld3N0YXRlX2Nsb25lID0gInt9IjsKICAgICAgICBjby5wdHIg");
    sb.append("PSBjb25uZWN0aW9uLkNvbm5lY3Rpb25DcmVhdGUoaWRlbnRpdHksIHJ4b2JqLnNwYWNlLCByeG9iai5r");
    sb.append("ZXksIHNhZmVfZmlsdGVyKHN0YXRlLnZpZXcudHJlZS5jb3B5KCkpLCByZXRyeV9zbS5yZXNwb25kZXIp");
    sb.append("OwogICAgICB9OwogICAgICByZXRyeV9zbS5nbygpOwogICAgICBjby50cmVlLnVwZGF0ZSh7fSk7CiAg");
    sb.append("ICAgIGJpbmQoZmFsc2UpOwogICAgfSk7CiAgfTsKCiAgc2VsZi5JTlRFUk5BTCA9IGZ1bmN0aW9uIChw");
    sb.append("cmlvclN0YXRlKSB7CiAgICByZXR1cm4gewogICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2Us");
    sb.append("CiAgICAgIGRhdGE6IHsgY29ubmVjdGlvbjogbnVsbCwgdHJlZTogbmV3IEFkYW1hVHJlZSgpLCBkZWx0");
    sb.append("YToge30sIHBhcmVudDogbnVsbCwgcGF0aDogbnVsbCB9LAogICAgICB2aWV3OiBuZXdfZGVsdGFfY29w");
    sb.append("eShwcmlvclN0YXRlLnZpZXcpLAogICAgICBjdXJyZW50OiAiZGF0YSIKICAgIH07CiAgfTsKCiAgdmFy");
    sb.append("IHJlY2FsbF9lbWFpbCA9IGZ1bmN0aW9uIChlbCkgewogICAgaWYgKGVsLnRhZ05hbWUudG9VcHBlckNh");
    sb.append("c2UoKSA9PSAiSU5QVVQiKSB7CiAgICAgIGlmICgiZW1haWwiID09IGVsLnR5cGUgJiYgImVtYWlsIiA9");
    sb.append("PSBlbC5uYW1lKSB7CiAgICAgICAgZWwudmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiZW1haWxf");
    sb.append("cmVtZW1iZXIiKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKCJjaGlsZHJlbiIgaW4gZWwp");
    sb.append("IHsKICAgICAgICB2YXIgYXJyID0gZWwuY2hpbGRyZW47CiAgICAgICAgdmFyIG4gPSBhcnIubGVuZ3Ro");
    sb.append("OwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgICByZWNhbGxfZW1h");
    sb.append("aWwoZWwuY2hpbGRyZW5ba10pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIHNlbGYuYVVQ");
    sb.append("ID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICB2YXIgaWRM");
    sb.append("b29rdXAgPSBzZWxmLklEKGlkZW50aXR5TmFtZSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhvYmoucnhf");
    sb.append("Zm9yd2FyZDsgfSk7IC8vIFRPRE86IG1ha2Ugcnh2YXIKICAgIGlmIChpZExvb2t1cC5hYm9ydCkgewog");
    sb.append("ICAgICByZXR1cm47CiAgICB9CiAgICBmb3JtLmFjdGlvbiA9ICJodHRwczovLyIgKyBBZGFtYS5Qcm9k");
    sb.append("dWN0aW9uICsgIi9+dXBsb2FkIjsKICAgIGZvcm0ubWV0aG9kID0gInBvc3QiOwogICAgZm9ybS5lbmN0");
    sb.append("eXBlID0gIm11bHRpcGFydC9mb3JtLWRhdGEiOwogICAgdmFyIGlkZW50aXR5SW5wdXQgPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgaWRlbnRpdHlJbnB1dC50eXBlID0gImhpZGRlbiI7");
    sb.append("CiAgICBpZGVudGl0eUlucHV0Lm5hbWUgPSAiaWRlbnRpdHkiOwogICAgaWRlbnRpdHlJbnB1dC52YWx1");
    sb.append("ZSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgZm9ybS5hcHBlbmRDaGlsZChpZGVudGl0eUlucHV0KTsK");
    sb.append("ICAgIHZhciBpZnJhbWVUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsKICAg");
    sb.append("IGlmcmFtZVRhcmdldC5uYW1lID0gIlVQTE9BRF8iICsgTWF0aC5yYW5kb20oKTsKICAgIGlmcmFtZVRh");
    sb.append("cmdldC53aWR0aCA9ICIxIjsKICAgIGlmcmFtZVRhcmdldC5oZWlnaHQgPSAiMSI7CgogICAgZm9ybS5h");
    sb.append("cHBlbmRDaGlsZChpZnJhbWVUYXJnZXQpOwogICAgZm9ybS50YXJnZXQgPSBpZnJhbWVUYXJnZXQubmFt");
    sb.append("ZTsKICB9OwoKICBzZWxmLmFEVVAgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwg");
    sb.append("cnhvYmopIHsKICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQoaWRlbnRpdHlOYW1lLCBmdW5jdGlvbiAo");
    sb.append("KSB7IHJldHVybiByeG9iai5yeF9mb3J3YXJkOyB9KTsgLy8gVE9ETzogbWFrZSByeHZhcgogICAgaWYg");
    sb.append("KGlkTG9va3VwLmFib3J0KSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGZvcm0uYWN0aW9uID0gc2Vs");
    sb.append("Zi5wcm90b2NvbCArICIvLyIgKyBzZWxmLmhvc3QgKyAiL351cGxvYWQiOwogICAgZm9ybS5tZXRob2Qg");
    sb.append("PSAicG9zdCI7CiAgICBmb3JtLmVuY3R5cGUgPSAibXVsdGlwYXJ0L2Zvcm0tZGF0YSI7CiAgICB7CiAg");
    sb.append("ICAgIHZhciBpZGVudGl0eUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAg");
    sb.append("ICAgaWRlbnRpdHlJbnB1dC50eXBlID0gImhpZGRlbiI7CiAgICAgIGlkZW50aXR5SW5wdXQubmFtZSA9");
    sb.append("ICJpZGVudGl0eSI7CiAgICAgIGlkZW50aXR5SW5wdXQudmFsdWUgPSBpZExvb2t1cC5pZGVudGl0eTsK");
    sb.append("ICAgICAgZm9ybS5hcHBlbmRDaGlsZChpZGVudGl0eUlucHV0KTsKICAgIH0KICAgIHsKICAgICAgdmFy");
    sb.append("IGRvbWFpbklucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgZG9tYWlu");
    sb.append("SW5wdXQudHlwZSA9ICJoaWRkZW4iOwogICAgICBkb21haW5JbnB1dC5uYW1lID0gImRvbWFpbiI7CiAg");
    sb.append("ICAgIGRvbWFpbklucHV0LnZhbHVlID0gc2VsZi5kb21haW47CiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQo");
    sb.append("ZG9tYWluSW5wdXQpOwogICAgfQogICAgdmFyIGlmcmFtZVRhcmdldCA9IGRvY3VtZW50LmNyZWF0ZUVs");
    sb.append("ZW1lbnQoImlmcmFtZSIpOwogICAgaWZyYW1lVGFyZ2V0Lm5hbWUgPSAiVVBMT0FEXyIgKyBNYXRoLnJh");
    sb.append("bmRvbSgpOwogICAgaWZyYW1lVGFyZ2V0LndpZHRoID0gIjEiOwogICAgaWZyYW1lVGFyZ2V0LmhlaWdo");
    sb.append("dCA9ICIxIjsKICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWZyYW1lVGFyZ2V0KTsKICAgIGZvcm0udGFyZ2V0");
    sb.append("ID0gaWZyYW1lVGFyZ2V0Lm5hbWU7CiAgfTsKCiAgdmFyIHN0YXNoX2lkZW50aXR5ID0gZnVuY3Rpb24o");
    sb.append("bmFtZSwgaWRlbnRpdHksIGNvbm5lY3Rpb24pIHsKICAgIHZhciByZXEgPSB7fTsKICAgIHJlcVsnbmFt");
    sb.append("ZSddID0gbmFtZTsKICAgIHJlcVsnaWRlbnRpdHknXSA9IGlkZW50aXR5OwogICAgcmVxWydtYXgtYWdl");
    sb.append("J10gPSA1NTI5NjAwOwoKICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgeGh0");
    sb.append("dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5yZWFkeVN0");
    sb.append("YXRlID09IDQpIHsKICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBjb25u");
    sb.append("ZWN0aW9uLklkZW50aXR5U3Rhc2goaWRlbnRpdHksIG5hbWUsIHsKICAgICAgICAgICAgc3VjY2Vzczog");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgLy8gVEhJUyBIQVMgRFJBR09OUyBVTlRJTCBBIEZVTEwg");
    sb.append("UFJPRFVDVElPTiBERVBMT1lNRU5UCiAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0o");
    sb.append("ImlkZW50aXR5XyIgKyBuYW1lLCAiY29va2llOiIgKyBuYW1lKTsKICAgICAgICAgICAgfSwKICAgICAg");
    sb.append("ICAgICAgZmFpbHVyZTogZnVuY3Rpb24oeHl6KSB7CgogICAgICAgICAgICB9CiAgICAgICAgICB9KTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICB4aHR0cC5vcGVuKCJQVVQiLCBzZWxmLnByb3RvY29s");
    sb.append("ICsgIi8vIiArIHNlbGYuaG9zdCArICIvfnN0YXNoLyIgKyBEYXRlLm5vdygpLCB0cnVlKTsKICAgIHho");
    sb.append("dHRwLndpdGhDcmVkZW50aWFscyA9IHRydWU7CiAgICB4aHR0cC5zZW5kKEpTT04uc3RyaW5naWZ5KHJl");
    sb.append("cSkpOwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9tYWluOnNpZ24taW4KICBzZWxmLmFk");
    sb.append("RFNPID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICByeG9i");
    sb.append("ai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywg");
    sb.append("ZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9");
    sb.append("IGdldF9mb3JtKGZvcm0sIHRydWUpOwogICAgICB2YXIgc20gPSB7YXR0ZW1wdHM6MH07CiAgICAgIHNt");
    sb.append("LnJlc3BvbmRlciA9IHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAg");
    sb.append("ICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdID0gcGF5bG9hZC5pZGVudGl0eTsKICAgICAgICAgIGxv");
    sb.append("Y2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlOYW1lLCBwYXlsb2FkLmlkZW50");
    sb.append("aXR5KTsKICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0");
    sb.append("eSwgY29ubmVjdGlvbik7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAg");
    sb.append("ICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1");
    sb.append("Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7");
    sb.append("CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6");
    sb.append("IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9OwogICAgICBjb25uZWN0aW9uLkRvY3VtZW50QXV0");
    sb.append("aG9yaXplRG9tYWluKHNlbGYuZG9tYWluLCByZXEudXNlcm5hbWUsIHJlcS5wYXNzd29yZCwgc20ucmVz");
    sb.append("cG9uZGVyKTsKICAgIH0sIHRydWUpOwogIH0KCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1kb2N1bWVu");
    sb.append("dDpzaWduLWluCiAgc2VsZi5hRFNPID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUs");
    sb.append("IHJ4b2JqKSB7CiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZlbnRM");
    sb.append("aXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQo");
    sb.append("KTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtKGZvcm0sIHRydWUpOwogICAgICBjb25uZWN0aW9uLkRv");
    sb.append("Y3VtZW50QXV0aG9yaXplKHJlcS5zcGFjZSwgcmVxLmtleSwgcmVxLnVzZXJuYW1lLCByZXEucGFzc3dv");
    sb.append("cmQsIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgaWRlbnRp");
    sb.append("dGllc1tpZGVudGl0eU5hbWVdID0gcGF5bG9hZC5pZGVudGl0eTsKICAgICAgICAgIGxvY2FsU3RvcmFn");
    sb.append("ZS5zZXRJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlOYW1lLCBwYXlsb2FkLmlkZW50aXR5KTsKICAg");
    sb.append("ICAgICAgIC8vIFRPRE86IGJsb3cgYXdheSBjb25uZWN0aW9ucwogICAgICAgICAgc2VsZi5nb3RvKHJ4");
    sb.append("b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsKICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAg");
    sb.append("ICB9LAogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGZpcmVfZmFp");
    sb.append("bHVyZShmb3JtLCAiRmFpbGVkIHNpZ25pbmcgaW50byBkb2N1bWVudDoiICsgcmVhc29uKTsKICAgICAg");
    sb.append("ICB9CiAgICAgIH0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249");
    sb.append("ZG9tYWluOnNpZ24taW4tcmVzZXQKICBzZWxmLmFkRFNPciA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwg");
    sb.append("aWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7IH07CiAgICBm");
    sb.append("b3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnBy");
    sb.append("ZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybShmb3JtLCB0cnVlKTsKICAgICAg");
    sb.append("Y29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZURvbWFpbldpdGhSZXNldChzZWxmLmRvbWFpbiwgcmVx");
    sb.append("LnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHJlcS5uZXdfcGFzc3dvcmQsewogICAgICAgIHN1Y2Nlc3M6");
    sb.append("IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV0gPSBw");
    sb.append("YXlsb2FkLmlkZW50aXR5OwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkZW50aXR5XyIg");
    sb.append("KyBpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHkpOwogICAgICAgICAgLy8gVE9ETzogYmxvdyBh");
    sb.append("d2F5IGNvbm5lY3Rpb25zCiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2Up");
    sb.append("OwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTog");
    sb.append("ZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2ln");
    sb.append("bmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0");
    sb.append("cnVlKTsKICB9CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9jdW1lbnQ6c2lnbi1pbi1yZXNldAog");
    sb.append("IHNlbGYuYURTT3IgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsK");
    sb.append("ICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9OwogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdz");
    sb.append("dWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2");
    sb.append("YXIgcmVxID0gZ2V0X2Zvcm0oZm9ybSwgdHJ1ZSk7CiAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRBdXRo");
    sb.append("b3JpemVXaXRoUmVzZXQocmVxLnNwYWNlLCByZXEua2V5LCByZXEudXNlcm5hbWUsIHJlcS5wYXNzd29y");
    sb.append("ZCwgcmVxLm5ld19wYXNzd29yZCx7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsK");
    sb.append("ICAgICAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxvYWQuaWRlbnRpdHk7CiAgICAg");
    sb.append("ICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgcGF5bG9h");
    sb.append("ZC5pZGVudGl0eSk7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAgICAg");
    sb.append("ICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nl");
    sb.append("c3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAg");
    sb.append("ICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6IiAr");
    sb.append("IHJlYXNvbik7CiAgICAgICAgfQogICAgICB9LCB0cnVlKTsKICAgIH0pOwogIH07CgogIHNlbGYuYXV0");
    sb.append("b2dlbmlkID0gMTsKICBzZWxmLlggPSBmdW5jdGlvbigpIHsKICAgIHNlbGYuYXV0b2dlbmlkKys7CiAg");
    sb.append("ICByZXR1cm4gJ3gnICsgc2VsZi5hdXRvZ2VuaWQ7CiAgfTsKCiAgdmFyIHRyYW5zZm9ybXMgPSB7fTsK");
    sb.append("ICB0cmFuc2Zvcm1zWydwcmluY2lwYWwuYWdlbnQnXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguYWdl");
    sb.append("bnQ7IH07CiAgdHJhbnNmb3Jtc1sncHJpbmNpcGFsLmF1dGhvcml0eSddID0gZnVuY3Rpb24oeCkgeyBy");
    sb.append("ZXR1cm4geC5hdXRob3JpdHk7IH07CiAgdHJhbnNmb3Jtc1sndHJpbSddID0gZnVuY3Rpb24oeCkgeyBy");
    sb.append("ZXR1cm4gKCcnICsgeCkudHJpbSgpOyB9OwogIHRyYW5zZm9ybXNbJ3VwcGVyJ10gPSBmdW5jdGlvbih4");
    sb.append("KSB7IHJldHVybiAoJycgKyB4KS50b1VwcGVyQ2FzZSgpOyB9OwogIHRyYW5zZm9ybXNbJ2xvd2VyJ10g");
    sb.append("PSBmdW5jdGlvbih4KSB7IHJldHVybiAoJycgKyB4KS50b0xvd2VyQ2FzZSgpOyB9OwogIHRyYW5zZm9y");
    sb.append("bXNbJ2lzX2VtcHR5X3N0ciddID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geCA9PSAiIjsgfTsKICB0cmFu");
    sb.append("c2Zvcm1zWydpc19ub3RfZW1wdHlfc3RyJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiB4ICE9ICIiOyB9");
    sb.append("OwogIHRyYW5zZm9ybXNbJ2pzb25pZnknXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIEpTT04uc3RyaW5n");
    sb.append("aWZ5KHgpOyB9OwogIHRyYW5zZm9ybXNbJ3RpbWVfbm93J10gPSBmdW5jdGlvbih4KSB7IHJldHVybiBE");
    sb.append("YXRlLm5vdygpICsgIiI7IH07CiAgdHJhbnNmb3Jtc1snc2l6ZV9ieXRlcyddID0gZnVuY3Rpb24oeHJh");
    sb.append("dykgewogICAgdmFyIHggPSAwLjA7CiAgICBpZiAodHlwZW9mKHhyYXcpID09ICdudW1iZXInKSB7CiAg");
    sb.append("ICAgIHggPSB4cmF3OwogICAgfSBlbHNlIHsKICAgICAgdHJ5IHsKICAgICAgICB4ID0gcGFyc2VGbG9h");
    sb.append("dCh4cmF3KTsKICAgICAgfSBjYXRjaCAoZXgpIHsKCiAgICAgIH0KICAgIH0KICAgIHZhciBpdmFsID0g");
    sb.append("TWF0aC5mbG9vcih4KTsKICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4gaXZhbCArICIg");
    sb.append("QiI7CiAgICB9CiAgICBpdmFsIC89IDEwMjQ7CiAgICBpZiAoaXZhbCA8IDEwMjQpIHsKICAgICAgcmV0");
    sb.append("dXJuIE1hdGgucm91bmQoaXZhbCAqIDEwKSAvIDEwLjAgKyAiIEtCIjsKICAgIH0KICAgIGl2YWwgLz0g");
    sb.append("MTAyNDsKICAgIGlmIChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4gTWF0aC5yb3VuZChpdmFsICog");
    sb.append("MTApIC8gMTAuMCArICIgTUIiOwogICAgfQogICAgaXZhbCAvPSAxMDI0OwogICAgaWYgKGl2YWwgPCAx");
    sb.append("MDI0KSB7CiAgICAgIHJldHVybiBNYXRoLnJvdW5kKGl2YWwgKiAxMCkgLyAxMC4wICsgIiBHQiI7CiAg");
    sb.append("ICB9CiAgfQogIHRyYW5zZm9ybXNbJ3Z1bGdhcl9mcmFjdGlvbiddID0gZnVuY3Rpb24oeHJhdykgewog");
    sb.append("ICAgdmFyIHggPSAwLjA7CiAgICBpZiAodHlwZW9mKHhyYXcpID09ICdudW1iZXInKSB7CiAgICAgIHgg");
    sb.append("PSB4cmF3OwogICAgfSBlbHNlIHsKICAgICAgdHJ5IHsKICAgICAgICB4ID0gcGFyc2VGbG9hdCh4cmF3");
    sb.append("KTsKICAgICAgfSBjYXRjaCAoZXgpIHsKCiAgICAgIH0KICAgIH0KICAgIHZhciBpdmFsID0gTWF0aC5m");
    sb.append("bG9vcih4KTsKICAgIHZhciBjaGFuZ2UgPSB4IC0gaXZhbDsKICAgIHZhciBzdWZmaXggPSAiIjsKICAg");
    sb.append("IGlmIChjaGFuZ2UgPD0gMC4wNjI1KSB7CiAgICAgIC8vIDAKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9");
    sb.append("IDAuMTg3NSkgewogICAgICBzdWZmaXggPSAi4oWbIjsKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9IDAu");
    sb.append("MzEyNSkgewogICAgICBzdWZmaXggPSAiwrwiOwogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC40Mzc1");
    sb.append("KSB7CiAgICAgIHN1ZmZpeCA9ICLihZwiOwogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC41NjI1KSB7");
    sb.append("CiAgICAgIHN1ZmZpeCA9ICLCvSI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjY4NzUpIHsKICAg");
    sb.append("ICAgc3VmZml4ID0gIuKFnSI7CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjgxMjUpIHsKICAgICAg");
    sb.append("c3VmZml4ID0gIsK+IjsgLy8gMy80CiAgICB9IGVsc2UgaWYgKGNoYW5nZSA8PSAwLjkzNzUpIHsKICAg");
    sb.append("ICAgc3VmZml4ID0gIuKFniI7CiAgICB9IC8vIGVsc2UgMQogICAgcmV0dXJuIGl2YWwgKyBzdWZmaXg7");
    sb.append("CiAgfQogIHRyYW5zZm9ybXNbJ3RpbWVfYWdvJ10gPSBmdW5jdGlvbihkdCkgewogICAgLy8gb25seSB0");
    sb.append("cmFuc2Zvcm0gc3RyaW5ncwogICAgaWYgKHR5cGVvZiAoZHQpID09ICJzdHJpbmciKSB7CiAgICAgIC8v");
    sb.append("IGxldCdzIHN0cmlwIG91dCBldmVyeXRoaW5nIGFmdGVyIHRoZSBicmFja2V0cwogICAgICB2YXIgcyA9");
    sb.append("IGR0OwogICAgICB2YXIgayA9IHMuaW5kZXhPZignWycpOwogICAgICBpZiAoayA+PSAwKSB7CiAgICAg");
    sb.append("ICAgcyA9IHMuc3Vic3RyaW5nKDAsIGspOwogICAgICB9CiAgICAgIHZhciBkID0gRGF0ZS5wYXJzZShz");
    sb.append("KTsKICAgICAgaWYgKE51bWJlci5pc05hTihkKSkgewogICAgICAgIC8vIGl0IGlzbid0IGEgbnVtYmVy");
    sb.append("LCBzbyB3ZSBkaWRuJ3QgZ2V0IGEgZGF0ZSBzdGFtcDsgZGVmYXVsdCB0byB0aGUgaW5wdXQKICAgICAg");
    sb.append("ICByZXR1cm4gZHQ7CiAgICAgIH0KICAgICAgLy8gd2UgYXJlIGludGVyZXN0ZWQgaW4gcHJvZHVjaW5n");
    sb.append("IGEgc3RyaW5nIGxpa2UgIlggbWludXRlcyBhZ28iLCBzbyBzdGFydCB3aXRoIHNlY29uZHMKICAgICAg");
    sb.append("dmFyIGRlbHRhID0gKERhdGUubm93KCkgLSBkKS8xMDAwOyAvLyBzZWNvbmRzOwogICAgICBpZiAoZGVs");
    sb.append("dGEgPCA2MCkgewogICAgICAgIHJldHVybiAiTGVzcyB0aGFuIGEgbWludXRlIGFnbyI7CiAgICAgIH0K");
    sb.append("ICAgICAgLy8gaXQgd2Fzbid0IDkwIHNlY29uZHMgYWdvIG9yIGxlc3MsIHNvIGxldCdzIHJlZmluZSB0");
    sb.append("b3dhcmRzIG1pbnV0ZXMKICAgICAgZGVsdGEgLz0gNjA7IC8vIG5vdyBpdCBpcyBtaW51dGVzCiAgICAg");
    sb.append("IGlmIChkZWx0YSA8IDYwKSB7CiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoZGVsdGEpICsgIiBtaW51");
    sb.append("dGVzIGFnbyI7CiAgICAgIH0KICAgICAgaWYgKGRlbHRhID4gMi42MjhlKzcpIHsKICAgICAgICByZXR1");
    sb.append("cm4gIk5ldmVyIjsKICAgICAgfQogICAgICAvLyBpdCB3YXNuJ3QgOTAgbWludXRlcyBhZ28sIHNvIGxl");
    sb.append("dCdzIGp1c3QgcHV0IHRoZSB0aW1lIHN0YW1wIHVwCiAgICAgIHZhciBkdGhlbiA9IG5ldyBEYXRlKGQp");
    sb.append("OwogICAgICB2YXIgZG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgIGlmIChkdGhlbi50b0xvY2FsZURhdGVT");
    sb.append("dHJpbmcoKSAhPSBkbm93LnRvTG9jYWxlRGF0ZVN0cmluZygpKSB7CiAgICAgICAgcmV0dXJuIGR0aGVu");
    sb.append("LnRvTG9jYWxlRGF0ZVN0cmluZygpICsgIiAiICsgZHRoZW4udG9Mb2NhbGVUaW1lU3RyaW5nKCk7CiAg");
    sb.append("ICAgIH0KICAgICAgcmV0dXJuIGR0aGVuLnRvTG9jYWxlVGltZVN0cmluZygpOwogICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgLy8gZG8gbm90aGluZwogICAgICByZXR1cm4gZHQ7CiAgICB9CiAgfTsKCiAgdHJhbnNmb3Jt");
    sb.append("c1sndGltZSddID0gZnVuY3Rpb24oZHQpIHsKICAgICAgICAvLyBvbmx5IHRyYW5zZm9ybSBzdHJpbmdz");
    sb.append("CiAgICBpZiAodHlwZW9mIChkdCkgPT0gInN0cmluZyIpIHsKICAgICAgLy8gbGV0J3Mgc3RyaXAgb3V0");
    sb.append("IGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGJyYWNrZXRzCiAgICAgIHZhciBzID0gZHQ7CiAgICAgIHZhciBr");
    sb.append("ID0gcy5pbmRleE9mKCdbJyk7CiAgICAgIGlmIChrID49IDApIHsKICAgICAgICBzID0gcy5zdWJzdHJp");
    sb.append("bmcoMCwgayk7CiAgICAgIH0KCiAgICAgIC8vIENvbnZlcnQgc3RyaW5nIHRvIHRpbWUgZm9ybWF0CiAg");
    sb.append("ICAgIHZhciB0ID0gZHQuaW5kZXhPZigiOiIpOwogICAgICBpZiAodCA8IDApIHsKICAgICAgICByZXR1");
    sb.append("cm4gZHQ7CiAgICAgIH0KICAgICAgdmFyIGggPSBkdC5zcGxpdCgiOiIpWzBdOwogICAgICB2YXIgaG91");
    sb.append("cnMgPSBoOwogICAgICBpZiAoaC5sZW5ndGggPiAyKSB7CiAgICAgICAgaG91cnMgPSBoLnN1YnN0cmlu");
    sb.append("ZyhoLmxlbmd0aCAtIDIsIGgubGVuZ3RoKTsgLy8gdHJpbSBsZWZ0IGluIGNhc2Ugb2YgZGF0ZXRpbWUK");
    sb.append("ICAgICAgfQogICAgICB2YXIgQW1PclBtID0gaG91cnMgPj0gMTIgPyAncG0nIDogJ2FtJzsKICAgICAg");
    sb.append("aG91cnMgPSAoaG91cnMgJSAxMikgfHwgMTI7CiAgICAgIHZhciBtID0gZHQuc3BsaXQoIjoiKVsxXQog");
    sb.append("ICAgICB2YXIgbWludXRlcyA9IG07CiAgICAgIGlmIChtLmxlbmd0aCA+IDIpIHsKICAgICAgICBtaW51");
    sb.append("dGVzID0gbS5zdWJzdHJpbmcoMCwyKTsgLy8gdHJpbSByaWdodCBpbiBjYXNlIG9mIGRhdGV0aW1lCiAg");
    sb.append("ICAgIH0KCiAgICAgIHJldHVybiBob3VycyArICI6IiArIG1pbnV0ZXMgKyAiICIgKyBBbU9yUG07IAog");
    sb.append("ICAgfSBlbHNlIHsKICAgICAgLy8gZG8gbm90aGluZwogICAgICByZXR1cm4gZHQ7CiAgICB9CiAgfTsK");
    sb.append("CiAgc2VsZi5SVFIgPSBmdW5jdGlvbihuYW1lLCB0cmFuc2Zvcm0pIHsKICAgIHRyYW5zZm9ybXNbbmFt");
    sb.append("ZV0gPSB0cmFuc2Zvcm07CiAgfTsKICBzZWxmLnJlZ2lzdGVyVHJhbnNmb3JtID0gc2VsZi5SVFI7Cgog");
    sb.append("IC8vIHtibGFofG5hbWV9CiAgc2VsZi5UUiA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgIGlmIChuYW1lIGlu");
    sb.append("IHRyYW5zZm9ybXMpIHsKICAgICAgcmV0dXJuIHRyYW5zZm9ybXNbbmFtZV07CiAgICB9CiAgICByZXR1");
    sb.append("cm4gZnVuY3Rpb24oeCkgeyByZXR1cm4geDsgfTsKICB9OwoKICAvLyBUT0RPCiAgdmFyIHZhbGlkYXRv");
    sb.append("cnMgPSB7fTsKICBzZWxmLlJWID0gZnVuY3Rpb24obmFtZSwgdmFsaWRhdG9yKSB7CiAgICB2YWxpZGF0");
    sb.append("b3JzW25hbWVdID0gdmFsaWRhdG9yOwogIH07CiAgc2VsZi5yZWdpc3RlclZhbGlkYXRvciA9IHNlbGYu");
    sb.append("UlY7CgogIHZhciBjb21tb25QdXQgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwg");
    sb.append("cnhvYmosIHVybGZhY3RvcnkpIHsKICAgIC8vIFdJUAogICAgcnhvYmouX18gPSBmdW5jdGlvbiAoKSB7");
    sb.append("IH07CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAg");
    sb.append("ICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybShmb3JtLCBmYWxz");
    sb.append("ZSk7CiAgICAgIC8vIFRPRE86IHRoaXMgYXNzdW1lcyBleGFjdGx5IG9uZSBwYXNzd29yZCBpbiB0aGUg");
    sb.append("cm9vdCBtZXNzYWdlCiAgICAgIHZhciBwd3MgPSBnZXRfcGFzc3dvcmQoZm9ybSk7CgogICAgICB2YXIg");
    sb.append("bmV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdXJsID0gdXJsZmFjdG9yeShyeG9iaik7CiAg");
    sb.append("ICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgeGh0dHAub25yZWFk");
    sb.append("eXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9");
    sb.append("PSA0KSB7CiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICB2");
    sb.append("YXIgdHlwZSA9IHRoaXMuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpOwogICAgICAgICAg");
    sb.append("ICAgIGlmICh0eXBlID09ICJ0ZXh0L2Vycm9yIikgewogICAgICAgICAgICAgICAgZmlyZV9mYWlsdXJl");
    sb.append("KGZvcm0sIHRoaXMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAg");
    sb.append("ICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gImFwcGxpY2F0aW9uL2pzb24iKSB7CiAgICAgICAgICAgICAg");
    sb.append("ICB2YXIgcGF5bG9hZCA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAg");
    sb.append("ICAgaWYgKCdpZGVudGl0eScgaW4gcGF5bG9hZCkgewogICAgICAgICAgICAgICAgICBpZGVudGl0aWVz");
    sb.append("W2lkZW50aXR5TmFtZV0gPSBwYXlsb2FkLmlkZW50aXR5OwogICAgICAgICAgICAgICAgICBsb2NhbFN0");
    sb.append("b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7");
    sb.append("CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYuZ290byhy");
    sb.append("eG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwog");
    sb.append("ICAgICAgICAgICAgIGZvcm0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInN1Ym1pdHRlZCIpKTsKICAg");
    sb.append("ICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0");
    sb.append("byBjb21tdW5pY2F0ZSB0byBzZXJ2ZXIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAg");
    sb.append("IH07CiAgICAgICAgeGh0dHAub3BlbigiUFVUIiwgdXJsLCB0cnVlKTsKICAgICAgICB4aHR0cC53aXRo");
    sb.append("Q3JlZGVudGlhbHMgPSB0cnVlOwogICAgICAgIHhodHRwLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxKSk7");
    sb.append("CiAgICAgIH07CgogICAgICBpZiAocHdzICE9PSBudWxsKSB7CiAgICAgICAgY29ubmVjdGlvbi5Eb2N1");
    sb.append("bWVudHNIYXNoUGFzc3dvcmQocHdzWzFdLCB7CiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaGFz");
    sb.append("aGVkX3B3KSB7CiAgICAgICAgICAgIHJlcVtwd3NbMF1dID0gaGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsK");
    sb.append("ICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWxlZDogZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0byBoYXNoIHBhc3N3b3Jk");
    sb.append("Iik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dCgpOwog");
    sb.append("ICAgICB9CiAgICB9LCB0cnVlKTsKICB9CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9tYWluOnB1");
    sb.append("dAogIHNlbGYuYWREUFVUID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2Jq");
    sb.append("KSB7CiAgICBjb21tb25QdXQoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmosIGZ1bmN0aW9u");
    sb.append("IChyeG9iaikgeyByZXR1cm4gc2VsZi5wcm90b2NvbCArICIvLyIgKyBzZWxmLmhvc3QgKyAiLyIgKyBy");
    sb.append("eG9iai5wYXRoOyB9KQogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9jdW1lbnQ6cHV0CiAg");
    sb.append("c2VsZi5hRFBVVCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewog");
    sb.append("ICAgY29tbW9uUHV0KGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqLCBmdW5jdGlvbiAocnhv");
    sb.append("YmopIHsgcmV0dXJuICJodHRwczovLyIgKyBjb25uZWN0aW9uLmhvc3QgKyAiLyIgKyByeG9iai5zcGFj");
    sb.append("ZSArICIvIiArIHJ4b2JqLmtleSArICIvIiArIHJ4b2JqLnBhdGg7IH0pCiAgfTsKCiAgLy8gUlVOVElN");
    sb.append("RSB8IHJ4OmFjdGlvbj1hZGFtYTpzaWduLWluCiAgc2VsZi5hU08gPSBmdW5jdGlvbiAoZm9ybSwgc3Rh");
    sb.append("dGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9Owog");
    sb.append("ICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICByZWNhbGxfZW1haWwoZm9ybSk7");
    sb.append("CiAgICB9LCAxKTsKICAgIC8vIFRPRE86IHB1bGwgZW1haWwgb3V0IG9mIHRoaW4gYWlyCiAgICBmb3Jt");
    sb.append("LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZl");
    sb.append("bnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybShmb3JtLCB0cnVlKTsKICAgICAgaWYg");
    sb.append("KHJlcS5yZW1lbWJlcikgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJlbWFpbF9yZW1lbWJl");
    sb.append("ciIsIHJlcS5lbWFpbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0o");
    sb.append("ImVtYWlsX3JlbWVtYmVyIiwgIiIpOwogICAgICB9CiAgICAgIGNvbm5lY3Rpb24uQWNjb3VudExvZ2lu");
    sb.append("KHJlcS5lbWFpbCwgcmVxLnBhc3N3b3JkLCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxv");
    sb.append("YWQpIHsKICAgICAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxvYWQuaWRlbnRpdHk7");
    sb.append("CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwg");
    sb.append("cGF5bG9hZC5pZGVudGl0eSk7CiAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFs");
    sb.append("c2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVy");
    sb.append("ZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJBY2NvdW50");
    sb.append("TG9naW4gRmFpbGVkOiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0cnVlKTsK");
    sb.append("ICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWFkYW1hOnNpZ24tdXAKICBzZWxmLmFTVSA9IGZ1");
    sb.append("bmN0aW9uIChmb3JtLCBzdGF0ZSwgZm9yd2FyZFRvKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIo");
    sb.append("J3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAg");
    sb.append("IHZhciByZXEgPSBnZXRfZm9ybShmb3JtKTsKICAgICAgY29ubmVjdGlvbi5Jbml0U2V0dXBBY2NvdW50");
    sb.append("KHJlcS5lbWFpbCwgewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgvKiBwYXlsb2FkICovKSB7CiAg");
    sb.append("ICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZW1haWwiLCByZXEuZW1haWwpOwogICAgICAgICAg");
    sb.append("c2VsZi5nb3RvKGZvcndhcmRUbywgZmFsc2UpOwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwog");
    sb.append("ICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmly");
    sb.append("ZV9mYWlsdXJlKGZvcm0sICJJbml0U2V0dXBBY2NvdW50IEZhaWxlZDoiICsgcmVhc29uKTsKICAgICAg");
    sb.append("ICB9CiAgICAgIH0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1h");
    sb.append("ZGFtYTpzZXQtcGFzc3dvcmQKICBzZWxmLmFTUCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgZm9yd2Fy");
    sb.append("ZFRvKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsK");
    sb.append("ICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybShmb3JtLCB0");
    sb.append("cnVlKTsKICAgICAgaWYgKCEoImVtYWlsIiBpbiByZXEpKSB7CiAgICAgICAgcmVxLmVtYWlsID0gbG9j");
    sb.append("YWxTdG9yYWdlLmdldEl0ZW0oImVtYWlsIik7CiAgICAgIH0KICAgICAgY29ubmVjdGlvbi5Jbml0Q29t");
    sb.append("cGxldGVBY2NvdW50KHJlcS5lbWFpbCwgZmFsc2UsIHJlcS5jb2RlLCB7CiAgICAgICAgc3VjY2Vzczog");
    sb.append("ZnVuY3Rpb24gKGluaXQpIHsKICAgICAgICAgIHZhciBpZGVudGl0eSA9IGluaXQuaWRlbnRpdHk7CiAg");
    sb.append("ICAgICAgICBjb25uZWN0aW9uLkFjY291bnRTZXRQYXNzd29yZChpbml0LmlkZW50aXR5LCByZXEucGFz");
    sb.append("c3dvcmQsIHsKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGxv");
    sb.append("Y2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV9kZWZhdWx0IiwgaWRlbnRpdHkpOwogICAgICAgICAg");
    sb.append("ICAgIHNlbGYuZ290byhmb3J3YXJkVG8sIGZhbHNlKTsKICAgICAgICAgICAgICBmaXJlX3N1Y2Nlc3Mo");
    sb.append("Zm9ybSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24p");
    sb.append("IHsKICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBBY2NvdW50U2V0UGFzc3dv");
    sb.append("cmQ6IiArIHJlYXNvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAg");
    sb.append("ICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0s");
    sb.append("ICJGYWlsZWQgSW5pdENvbXBsZXRlQWNjb3VudDoiICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH0p");
    sb.append("OwogICAgfSwgdHJ1ZSk7CiAgfTsKCgogIHZhciBoeWRyYXRlX2Zvcm0gPSBmdW5jdGlvbihlbCwgaW5w");
    sb.append("dXQpIHsKICAgIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvVXBwZXJDYXNlKCk7CiAgICB2YXIgaXNTZXR0");
    sb.append("YWJsZSA9IHRhZyA9PSAiU0VMRUNUIiB8fCB0YWcgPT0gIklOUFVUIiB8fCB0YWcgPT0gIkhJRERFTiI7");
    sb.append("CiAgICBpZiAoJ25hbWUnIGluIGVsICYmIGlzU2V0dGFibGUpIHsKICAgICAgdmFyIG5hbWUgPSBlbC5u");
    sb.append("YW1lOwogICAgICB2YXIgcGF5bG9hZCA9IGlucHV0OwogICAgICB2YXIga0RvdE9yU2xhc2ggPSBmaXJz");
    sb.append("dE9jY3VyKG5hbWUuaW5kZXhPZignLicpLCBuYW1lLmluZGV4T2YoJy8nKSk7CiAgICAgIHdoaWxlIChr");
    sb.append("RG90T3JTbGFzaCA+IDApIHsKICAgICAgICB2YXIgaXRlbSA9IG5hbWUuc3Vic3RyaW5nKDAsIGtEb3RP");
    sb.append("clNsYXNoKTsKICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoa0RvdE9yU2xhc2ggKyAxKTsKICAg");
    sb.append("ICAgICBpZiAoaXRlbSBpbiBwYXlsb2FkKSB7CiAgICAgICAgICBwYXlsb2FkID0gcGF5bG9hZFtpdGVt");
    sb.append("XTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBrRG90");
    sb.append("T3JTbGFzaCA9IGZpcnN0T2NjdXIobmFtZS5pbmRleE9mKCcuJyksIG5hbWUuaW5kZXhPZignLycpKTsK");
    sb.append("ICAgICAgfQogICAgICBpZiAobmFtZSBpbiBwYXlsb2FkKSB7CiAgICAgICAgdmFyIHR5cGUgPSBlbC50");
    sb.append("eXBlLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgaWYgKHR5cGUgPT0gIkNIRUNLQk9YIikgewogICAgICAg");
    sb.append("ICAgZWwuY2hlY2tlZCA9IHBheWxvYWRbbmFtZV0gPT0gInRydWUiIHx8IHBheWxvYWRbbmFtZV0gPT09");
    sb.append("IHRydWUgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJSQURJTyIpIHsK");
    sb.append("ICAgICAgICAgIGlmIChwYXlsb2FkW25hbWVdID09IGVsLnZhbHVlKSB7CiAgICAgICAgICAgIGVsLmNo");
    sb.append("ZWNrZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlbC52YWx1");
    sb.append("ZSA9IHBheWxvYWRbbmFtZV07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoImNoaWxkcmVu");
    sb.append("IiBpbiBlbCkgewogICAgICB2YXIgYXJyID0gZWwuY2hpbGRyZW47CiAgICAgIHZhciBuID0gYXJyLmxl");
    sb.append("bmd0aDsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICB2YXIgY2ggPSBl");
    sb.append("bC5jaGlsZHJlbltrXTsKICAgICAgICBoeWRyYXRlX2Zvcm0oY2gsIGlucHV0KTsKICAgICAgfQogICAg");
    sb.append("fQogIH0KCgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb246Y29weS1mb3JtOiR0YXJnZXQtaWQKICBzZWxm");
    sb.append("LmFDRiA9IGZ1bmN0aW9uKGZvcm0sIHRhcmdldEZvcm1JZCkgewogICAgZm9ybS5hZGRFdmVudExpc3Rl");
    sb.append("bmVyKCdzdWJtaXQnLCBmdW5jdGlvbihldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAg");
    sb.append("ICAgIHZhciBpbnB1dCA9IGdldF9mb3JtKGZvcm0sIGZhbHNlKTsKICAgICAgdmFyIHRhcmdldCA9IGRv");
    sb.append("Y3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldEZvcm1JZCk7CiAgICAgIGlmICh0YXJnZXQpIHsKICAg");
    sb.append("ICAgICBoeWRyYXRlX2Zvcm0odGFyZ2V0LCBpbnB1dCk7CiAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0p");
    sb.append("CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJmYWlsZWQgdG8gZmluZCBm");
    sb.append("b3JtIGJ5IGlkICciICsgdGFyZ2V0Rm9ybUlkICsgIiciKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7CiAg");
    sb.append("fTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1zZW5kOiRjaGFubmVsCiAgc2VsZi5hU0QgPSBmdW5j");
    sb.append("dGlvbiAoZm9ybSwgc3RhdGUsIGNoYW5uZWwpIHsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3Vi");
    sb.append("bWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFy");
    sb.append("IG1zZyA9IGdldF9mb3JtKGZvcm0sIGZhbHNlKTsKICAgICAgaWYgKGV2dC5zdWJtaXR0ZXIpIHsKICAg");
    sb.append("ICAgICB2YXIgcyA9IGV2dC5zdWJtaXR0ZXI7CiAgICAgICAgaWYgKHMubmFtZSAmJiBzLnZhbHVlKSB7");
    sb.append("CiAgICAgICAgICBpZiAocy52YWx1ZSA9PSAidHJ1ZSIpIHsgcy52YWx1ZSA9IHRydWU7IH0KICAgICAg");
    sb.append("ICAgIGVsc2UgaWYgKHMudmFsdWUgPT0gImZhbHNlIikgeyBzLnZhbHVlID0gZmFsc2U7IH0KICAgICAg");
    sb.append("ICAgIG1zZ1tzLm5hbWVdID0gcy52YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gVE9ETzog");
    sb.append("cGFzcyB0aHJvdWdoIHRoZSBkZWJ1Z2dlcgogICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyLnNl");
    sb.append("bmQoY2hhbm5lbCwgbXNnLCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKC8qIHBheWxvYWQgKi8p");
    sb.append("IHsKICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6");
    sb.append("IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiU2VuZCBmYWls");
    sb.append("ZWQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIHRydWUpOwogIH07CiAgLy8g");
    sb.append("PHRvZG90YXNrPmRlc2NyaXB0aW9uPC90b2RvdGFzaz4KICBzZWxmLlRBU0sgPSBmdW5jdGlvbihwZG9t");
    sb.append("LCBpZCwgc2VjdGlvbiwgZGVzY3JpcHRpb24pIHsKICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3Jl");
    sb.append("YXRlRWxlbWVudCgiZGl2Iik7CiAgICBlbGVtZW50LmlubmVySFRNTCA9ICImIzk3NDQ7ICIgKyBkZXNj");
    sb.append("cmlwdGlvbiArICIgKCAiICsgc2VjdGlvbiArICIpIDxiciAvPiI7CiAgICBwZG9tLmFwcGVuZENoaWxk");
    sb.append("KGVsZW1lbnQpOwogIH07CiAgLy8gUlVOVElNRTogcHJlLWNvbXByZXNzaW9uIGZvciBzZXR0aW5nIGFu");
    sb.append("IGF0dHJpYnV0ZQogIC8vICJkLnNldEF0dHJpYnV0ZShhLHYpOyIgLS0+CiAgLy8gJC5TQShkLGEsdik7");
    sb.append("IgogIHNlbGYuU0EgPSBmdW5jdGlvbihkb20sIGF0dHIsIHZhbHVlKSB7CiAgICBkb20uc2V0QXR0cmli");
    sb.append("dXRlKGF0dHIsIHZhbHVlKTsKICB9OwogIC8vIGZvciBzZWxlY3RzCiAgLy8gZC52YWx1ZT0kdmFsdWU7");
    sb.append("CiAgLy8gJC5TVihkLCR2YWx1ZSk7CiAgc2VsZi5TViA9IGZ1bmN0aW9uKGRvbSwgdmFsdWUpIHsKICAg");
    sb.append("IGRvbS52YWx1ZSA9IHZhbHVlOwogICAgZG9tLnJ4dmFsdWUgPSB2YWx1ZTsKICB9OwogIHNlbGYubWVy");
    sb.append("Z2VHb3RvID0gZnVuY3Rpb24oaHJlZiwgc3RhdGUpIHsKICAgIHZhciBwYXJ0cyA9IChocmVmLnN0YXJ0");
    sb.append("c1dpdGgoIi8iKSA/IGhyZWYuc3Vic3RyaW5nKDEpIDogaHJlZikuc3BsaXQoIi8iKTsKICAgIHZhciBt");
    sb.append("ZXJnZUluaXQgPSB7fTsKICAgIGlmIChyb3V0ZShwYXJ0cywgMCwgcm91dGVyLCBtZXJnZUluaXQpKSB7");
    sb.append("CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUobWVyZ2VJbml0KTsKICAgIH0KICB9OwogIC8vIFJV");
    sb.append("TlRJTUUgfCA8Li4uIGhyZWY9IiIgLi4uPgogIHNlbGYuSFJFRiA9IGZ1bmN0aW9uIChkb20sIHN0YXRl");
    sb.append("LCBocmVmLCBtZXJnZSkgewogICAgZG9tLnNldEF0dHJpYnV0ZSgiaHJlZiIsIGZpeEhyZWYoaHJlZikp");
    sb.append("OwogICAgZG9tLm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIHZhciB0cmltSHJlZiA9IGhy");
    sb.append("ZWY7CiAgICAgIGlmICh0cmltSHJlZi5zdGFydHNXaXRoKCIvIikpIHsKICAgICAgICB0cmltSHJlZiA9");
    sb.append("IHRyaW1IcmVmLnN1YnN0cmluZygxKTsKICAgICAgfQogICAgICB2YXIga1EgPSB0cmltSHJlZi5pbmRl");
    sb.append("eE9mKCc/Jyk7CiAgICAgIGlmIChrUSA+IDApIHsKICAgICAgICB0cmltSHJlZiA9IHRyaW1IcmVmLnN1");
    sb.append("YnN0cmluZygwLCBrUSk7CiAgICAgIH0KICAgICAgdmFyIHBhcnRzID0gdHJpbUhyZWYuc3BsaXQoIi8i");
    sb.append("KTsKICAgICAgdmFyIG1lcmdlSW5pdCA9IHt9OwogICAgICBpZiAocm91dGUocGFydHMsIDAsIHJvdXRl");
    sb.append("ciwgbWVyZ2VJbml0KSkgewogICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGlmICht");
    sb.append("ZXJnZSkgewogICAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShtZXJnZUluaXQpOwogICAgICAg");
    sb.append("ICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHttZXJnZTp0cnVlfSwgIiIsIGZpeEhyZWYoaHJlZikp");
    sb.append("OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLmdvdG8oaHJlZiwgdHJ1ZSk7CiAgICAgICAg");
    sb.append("fQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CiAg");
    sb.append("fTsKICAvLyBSVU5USU1FIHwgPC4uLiBjbGFzcz0iIiAuLi4+CiAgc2VsZi5BQyA9IGZ1bmN0aW9uIChk");
    sb.append("b20sIHZhbHVlKSB7CiAgICBkb20uc2V0QXR0cmlidXRlKCJjbGFzcyIsIHZhbHVlKTsKICB9OwogIHNl");
    sb.append("bGYuQUNMQVNTID0gZnVuY3Rpb24gKGRvbSwgdmFsdWUpIHsgLy8gdG8gZGVwcmVjYXRlIGluIHRoZSBm");
    sb.append("dXR1cmUKICAgIGRvbS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgdmFsdWUpOwogIH07CiAgLy8gUlVOVElN");
    sb.append("RSB8IDwuLi4gc3JjPSIiIC4uLj4KICBzZWxmLkFTUkMgPSBmdW5jdGlvbiAoZG9tLCB2YWx1ZSkgewog");
    sb.append("ICAgZG9tLnNldEF0dHJpYnV0ZSgic3JjIiwgdmFsdWUpOwogIH07CiAgd2luZG93LnJ4aHRtbCA9IHNl");
    sb.append("bGY7CiAgcmV0dXJuIHNlbGY7Cn0pKCk7Cg==");
    return sb.toString();
  }
  public static final String CONNECTION = new String(Base64.getDecoder().decode(make_connection()), StandardCharsets.UTF_8);
  private static String make_connection() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoKICogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG91dGxp");
    sb.append("bmVkIGluIHRoZQogKiBmaWxlICdMSUNFTlNFJyAoaXQncyBkdWFsIGxpY2Vuc2VkKSBsb2NhdGVkIGlu");
    sb.append("IHRoZSByb290IGRpcmVjdG9yeQogKiBuZWFyIHRoZSBSRUFETUUubWQgd2hpY2ggeW91IHNob3VsZCBh");
    sb.append("bHNvIHJlYWQuIEZvciBtb3JlIGluZm9ybWF0aW9uCiAqIGFib3V0IHRoZSBwcm9qZWN0IHdoaWNoIG93");
    sb.append("bnMgdGhpcyBmaWxlLCBzZWUgaHR0cHM6Ly93d3cuYWRhbWEtcGxhdGZvcm0uY29tLyAuCiAqCiAqIChj");
    sb.append("KSAyMDIxIC0gMjAyMyBieSBBZGFtYSBQbGF0Zm9ybSBJbml0aWF0aXZlLCBMTEMKICovCi8qKiBUaGUg");
    sb.append("V2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gQWRhbWEgKi8KY2xhc3MgV2ViU29ja2V0QWRhbWFDb25uZWN0");
    sb.append("aW9uIHsKICBjb25zdHJ1Y3Rvcihob3N0KSB7CiAgICAvLyBvbiBmYWlsdXJlLCB3ZSBiYWNrLW9mZiB3");
    sb.append("aXRoIHRoaXMgbWlsbGlzZWNvbmRzCiAgICB0aGlzLmJhY2tvZmYgPSAxOwogICAgLy8gdGhlIGhvc3Qg");
    sb.append("d2UgYXJlIGNvbm5lY3RpbmcgdG8KICAgIHRoaXMuaG9zdCA9IGhvc3Q7CiAgICAvLyBmb3JtIHRoZSBV");
    sb.append("Ukwgb2YgdGhlIGhvc3QKICAgIHRoaXMudXJsID0gIndzczovLyIgKyBob3N0ICsgIi9+cyI7CiAgICAv");
    sb.append("LyBpcyB0aGUgY29ubmVjdGlvbiBjb25uZWN0ZWQKICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAg");
    sb.append("ICAvLyBUT0RPCiAgICB0aGlzLmFzc2V0cyA9IHRydWU7CiAgICAvLyBpcyB0aGUgY29ubmVjdGlvbiBk");
    sb.append("ZWFkCiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIC8vIHRoZSBtYXhpbXVtIHBlcmlvZCBvZiB0aW1l");
    sb.append("IGJldHdlZW4gd2FpdGluZyBmb3IgYSByZXRyeQogICAgdGhpcy5tYXhpbXVtX2JhY2tvZmYgPSA1MDAw");
    sb.append("OwogICAgLy8gd2hlbiB0aGUgY29ubmVjdGlvbiB0aW1lcyBvdXQgZnJvbSB0aGUgc2VydmVyLCBob3cg");
    sb.append("bG9uZyB0byB3YWl0IHVudGlsIHdlIHJlY29ubmVjdAogICAgdGhpcy5yZXNldF9iYWNrb2ZmID0gMTAw");
    sb.append("MDsKICAgIC8vIHRoZSBhY3R1YWwgd2Vic29ja2V0CiAgICB0aGlzLnNvY2tldCA9IG51bGw7CiAgICAv");
    sb.append("LyB3aGF0IGhhcHBlbnMgd2hlbiB0aGUgc3RhdHVzIGNoYW5nZXMKICAgIHRoaXMub25zdGF0dXNjaGFu");
    sb.append("Z2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7IH07CiAgICAvLyB3aGF0IGhhcHBlbnMgd2hlbiB3ZSBsZWFy");
    sb.append("biB0aGUgbGF0ZW5jeQogICAgdGhpcy5vbnBpbmcgPSBmdW5jdGlvbiAoc2Vjb25kcywgbGF0ZW5jeSkg");
    sb.append("eyB9OwogICAgLy8gaXMgYSByZXRyeSBzY2hlZHVsZWQKICAgIHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7");
    sb.append("CiAgICAvLyBjYWxsYmFjayBtYXBwaW5nCiAgICB0aGlzLmNhbGxiYWNrcyA9IG5ldyBNYXAoKTsKICAg");
    sb.append("IC8vIGlkIGdlbmVyYXRpb24KICAgIHRoaXMubmV4dElkID0gMDsKICAgIC8vIGV2ZW50cyB0byBleGVj");
    sb.append("dXRlIG9uIHJlY29ubmVjdAogICAgdGhpcy5vbnJlY29ubmVjdCA9IG5ldyBNYXAoKTsKICB9CgogIC8q");
    sb.append("KiBzdG9wIHRoZSBjb25uZWN0aW9uICovCiAgc3RvcCgpIHsKICAgIHRoaXMuZGVhZCA9IHRydWU7CiAg");
    sb.append("ICBpZiAodGhpcy5zb2NrZXQgIT09IG51bGwpIHsKICAgICAgdGhpcy5zb2NrZXQuY2xvc2UoKTsKICAg");
    sb.append("IH0KICB9CgogIC8qKiBwcml2YXRlOiByZXRyeSB0aGUgY29ubmVjdGlvbiAqLwogIF9yZXRyeSgpIHsK");
    sb.append("ICAgIC8vIG51bGwgb3V0IHRoZSBzb2NrZXQKICAgIHRoaXMuc29ja2V0ID0gbnVsbDsKICAgIC8vIGlm");
    sb.append("IHdlIGFyZSBjb25uZWN0ZWQsIHRyYW5zaXRpb24gdGhlIHN0YXR1cwogICAgaWYgKHRoaXMuY29ubmVj");
    sb.append("dGVkKSB7CiAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAgICAgIHRoaXMub25zdGF0dXNjaGFu");
    sb.append("Z2UoZmFsc2UpOwogICAgICB0aGlzLmNhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChjYiwgaWQpIHsK");
    sb.append("ICAgICAgICBjYih7ZmFpbHVyZTo5OTl9KTsKICAgICAgfSk7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNr");
    sb.append("cy5jbGVhcigpOwogICAgLy8gaWYgd2UgYXJlIGRlYWQsIHRoZW4gZG9uJ3QgYWN0dWFsbHkgcmV0cnkK");
    sb.append("ICAgIGlmICh0aGlzLmRlYWQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgLy8gbWFrZSBzdXJlCiAg");
    sb.append("ICBpZiAoIXRoaXMuc2NoZWR1bGVkKSB7CiAgICAgIC8vIHNjaGVkdWxlIGEgcmV0cnk7IGZpcnN0IGNv");
    sb.append("bXB1dGUgaG93IGxvbmcgdG8gdGFrZQogICAgICAvLyBjb21wdXRlIGhvdyBsb25nIHdlIG5lZWQgdG8g");
    sb.append("d2FpdAogICAgICB2YXIgaGFsdmVBZnRlclNjaGVkdWxlID0gZmFsc2U7CiAgICAgIHRoaXMuYmFja29m");
    sb.append("ZiArPSBNYXRoLnJhbmRvbSgpICogdGhpcy5iYWNrb2ZmOwogICAgICBpZiAodGhpcy5iYWNrb2ZmID4g");
    sb.append("dGhpcy5tYXhpbXVtX2JhY2tvZmYpIHsKICAgICAgICB0aGlzLmJhY2tvZmYgPSB0aGlzLm1heGltdW1f");
    sb.append("YmFja29mZjsKICAgICAgICBoYWx2ZUFmdGVyU2NoZWR1bGUgPSB0cnVlOwogICAgICB9CgogICAgICAv");
    sb.append("LyBzY2hlZHVsZSBpdAogICAgICB0aGlzLnNjaGVkdWxlZCA9IHRydWU7CiAgICAgIHZhciBzZWxmID0g");
    sb.append("dGhpczsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2VsZi5zdGFydCgpOwog");
    sb.append("ICAgICB9LCB0aGlzLmJhY2tvZmYpOwoKICAgICAgLy8gd2UganVzdCBzY2hlZHVsZWQgaXQgZm9yIHRo");
    sb.append("ZSBtYXhpbXVtIGJhY2tvZmYgdGltZSwgbGV0J3MgcmVkdWNlIHRoZSBiYWNrb2ZmIHNvIHRoZSBuZXh0");
    sb.append("IG9uZSB3aWxsIGhhdmUgc29tZSBqaXR0ZXIKICAgICAgaWYgKGhhbHZlQWZ0ZXJTY2hlZHVsZSkgewog");
    sb.append("ICAgICAgIHRoaXMuYmFja29mZiAvPSAyLjA7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKiBzdGFydCB0");
    sb.append("aGUgY29ubmVjdGlvbiAqLwogIHN0YXJ0KCkgewogICAgLy8gcmVzZXQgdGhlIHN0YXRlCiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB0aGlzLnNjaGVkdWxlZCA9IGZhbHNlOwogICAgdGhpcy5kZWFkID0gZmFs");
    sb.append("c2U7CiAgICAvLyBjcmVhdGUgdGhlIHNvY2tldCBhbmQgYmluZCBldmVudCBoYW5kbGVycwogICAgdGhp");
    sb.append("cy5zb2NrZXQgPSBuZXcgV2ViU29ja2V0KHRoaXMudXJsKTsKICAgIHRoaXMuc29ja2V0Lm9ubWVzc2Fn");
    sb.append("ZSA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZShldmVudC5k");
    sb.append("YXRhKTsKICAgICAgLy8gYSBtZXNzYWdlIGFycml2ZWQsIGlzIGl0IGEgY29ubmVjdGlvbiBzaWduYWwK");
    sb.append("ICAgICAgaWYgKCJwaW5nIiBpbiByZXN1bHQpIHsKICAgICAgICBzZWxmLm9ucGluZyhyZXN1bHQucGlu");
    sb.append("ZywgcmVzdWx0LmxhdGVuY3kpOwogICAgICAgIHJlc3VsdC5wb25nID0gbmV3IERhdGUoKS5nZXRUaW1l");
    sb.append("KCkgLyAxMDAwLjA7CiAgICAgICAgc2VsZi5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShyZXN1bHQp");
    sb.append("KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCJzdGF0dXMiIGluIHJlc3VsdCkgewog");
    sb.append("ICAgICAgIC8vIGhleSwgYXJlIHdlIGNvbm5lY3RlZD8KICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyAh");
    sb.append("PSAiY29ubmVjdGVkIikgewogICAgICAgICAgLy8gbm9wZSwgT0ssIGxldCdzIG1ha2UgdGhpcyBhIGRl");
    sb.append("YWQgc29ja2V0CiAgICAgICAgICBzZWxmLnNvY2tldC5jbG9zZSgpOwogICAgICAgICAgc2VsZi5zb2Nr");
    sb.append("ZXQgPSBudWxsOwogICAgICAgICAgc2VsZi5iYWNrb2ZmID0gc2VsZi5yZXNldF9iYWNrb2ZmOwogICAg");
    sb.append("ICAgICAgc2VsZi5fcmV0cnkoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8g");
    sb.append("dGVsbCB0aGUgY2xpZW50IHRoYXQgd2UgYXJlIGdvb2QhCiAgICAgICAgc2VsZi5iYWNrb2ZmID0gMTsK");
    sb.append("ICAgICAgICBzZWxmLmNvbm5lY3RlZCA9IHRydWU7CiAgICAgICAgc2VsZi5hc3NldHMgPSByZXN1bHQu");
    sb.append("YXNzZXRzOwogICAgICAgIHNlbGYub25zdGF0dXNjaGFuZ2UodHJ1ZSk7CiAgICAgICAgc2VsZi5fcmVj");
    sb.append("b25uZWN0KCk7CiAgICAgICAgc2VsZi5Db25maWd1cmVNYWtlT3JHZXRBc3NldEtleSh7CiAgICAgICAg");
    sb.append("ICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAg");
    sb.append("ICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICAgIHhodHRwLm9w");
    sb.append("ZW4oIkdFVCIsICJodHRwczovLyIgKyBzZWxmLmhvc3QgKyAiL35wIiArIHBheWxvYWQuYXNzZXRLZXks");
    sb.append("IHRydWUpOwogICAgICAgICAgICAgIHhodHRwLndpdGhDcmVkZW50aWFscyA9IHRydWU7CiAgICAgICAg");
    sb.append("ICAgICAgeGh0dHAuc2VuZCgpOwogICAgICAgICAgICB9IGNhdGNoIChleCkgewogICAgICAgICAgICAg");
    sb.append("IGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1");
    sb.append("cmU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAg");
    sb.append("ICAgIH0KICAgICAgLy8gdGhlIHJlc3VsdCB3YXMgYSBmYWlsdXJlLi4uCiAgICAgIGlmICgiZmFpbHVy");
    sb.append("ZSIgaW4gcmVzdWx0KSB7CiAgICAgICAgLy8gZmluZCB0aGUgY2FsbGJhY2ssIHRoZW4gaW52b2tlIGl0");
    sb.append("IChhbmQgY2xlYW4gdXApCiAgICAgICAgaWYgKHNlbGYuY2FsbGJhY2tzLmhhcyhyZXN1bHQuZmFpbHVy");
    sb.append("ZSkpIHsKICAgICAgICAgIHZhciBjYiA9IHNlbGYuY2FsbGJhY2tzLmdldChyZXN1bHQuZmFpbHVyZSk7");
    sb.append("CiAgICAgICAgICBpZiAoY2IpIHsKICAgICAgICAgICAgc2VsZi5jYWxsYmFja3MuZGVsZXRlKHJlc3Vs");
    sb.append("dC5mYWlsdXJlKTsKICAgICAgICAgICAgY2IocmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAg");
    sb.append("ICAgIH0gZWxzZSBpZiAoImRlbGl2ZXIiIGluIHJlc3VsdCkgewogICAgICAgIC8vIG90aGVyd2lzZSwg");
    sb.append("d2UgaGF2ZSBhIHN1Y2Nlc3MsIHNvIGxldCdzIGZpbmQgdGhlIGNhbGxiYWNrLCBhbmQgaWYgbmVlZCBi");
    sb.append("ZSBjbGVhbiB1cAogICAgICAgIGlmIChzZWxmLmNhbGxiYWNrcy5oYXMocmVzdWx0LmRlbGl2ZXIpKSB7");
    sb.append("CiAgICAgICAgICB2YXIgY2IgPSBzZWxmLmNhbGxiYWNrcy5nZXQocmVzdWx0LmRlbGl2ZXIpOwogICAg");
    sb.append("ICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkgewogICAgICAgICAgICAg");
    sb.append("IHNlbGYuY2FsbGJhY2tzLmRlbGV0ZShyZXN1bHQuZGVsaXZlcik7CiAgICAgICAgICAgIH0KICAgICAg");
    sb.append("ICAgICAgY2IocmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICB0");
    sb.append("aGlzLnNvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIC8vIGxldCdzIHJldHJ5");
    sb.append("Li4uIG9yIHNob3VsZCB3ZSBub3QKICAgICAgc2VsZi5fcmV0cnkoKTsKICAgIH07CiAgICB0aGlzLnNv");
    sb.append("Y2tldC5vbmVycm9yID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIC8vIHNvbWV0aGluZyBiYWQgaGFw");
    sb.append("cGVuZWQsIGxldCdzIHJldHJ5CiAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICB9OwogIH0KCiAgLyoqIHBy");
    sb.append("aXZhdGU6IHNlbmQgYSByYXcgbWVzc2FnZSAqLwogIF93cml0ZShyZXF1ZXN0LCBjYWxsYmFjaykgewog");
    sb.append("ICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlz");
    sb.append("LmNhbGxiYWNrcy5zZXQocmVxdWVzdC5pZCwgY2FsbGJhY2spOwogICAgdGhpcy5zb2NrZXQuc2VuZChK");
    sb.append("U09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKiBhcGk6IHdh");
    sb.append("aXQgZm9yIGEgY29ubmVjdGlvbiAqLwogIGFzeW5jIHdhaXRfY29ubmVjdGVkKCkgewogICAgaWYgKHRo");
    sb.append("aXMuY29ubmVjdGVkKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZ29vZCkgewog");
    sb.append("ICAgICAgIGdvb2QodHJ1ZSk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNlbGYgPSB0");
    sb.append("aGlzOwogICAgICB2YXIgcHJpb3IgPSB0aGlzLm9uc3RhdHVzY2hhbmdlOwogICAgICByZXR1cm4gbmV3");
    sb.append("IFByb21pc2UoZnVuY3Rpb24gKGdvb2QpIHsKICAgICAgICBzZWxmLm9uc3RhdHVzY2hhbmdlID0gZnVu");
    sb.append("Y3Rpb24gKHN0YXR1cykgewogICAgICAgICAgcHJpb3Ioc3RhdHVzKTsKICAgICAgICAgIGlmIChzdGF0");
    sb.append("dXMpIHsKICAgICAgICAgICAgZ29vZCh0cnVlKTsKICAgICAgICAgICAgc2VsZi5vbnN0YXR1c2NoYW5n");
    sb.append("ZSA9IHByaW9yOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0KCiAgX3Jl");
    sb.append("Y29ubmVjdCgpIHsKICAgIHRoaXMub25yZWNvbm5lY3QuZm9yRWFjaChmdW5jdGlvbiAoc20sIGlkKSB7");
    sb.append("CiAgICAgIHNtLl9fcmV0cnkoKTsKICAgIH0pOwogIH0KCiAgLyoqIGV4ZWN1dGUgYSByZXF1ZXNlIHJl");
    sb.append("c3BvbnNlIHdpdGggdGhlIGdpdmVuIHN0YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfcnIoc20pIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHNtLmZpcnN0ID0gdHJ1ZTsKICAgIGlmICghc2VsZi5fd3Jp");
    sb.append("dGUoc20ucmVxdWVzdCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmIChzbS5maXJzdCkgewog");
    sb.append("ICAgICAgIHNtLmZpcnN0ID0gZmFsc2U7CiAgICAgICAgaWYgKCJmYWlsdXJlIiBpbiByZXNwb25zZSkg");
    sb.append("ewogICAgICAgICAgaWYgKCdmYWlsdXJlJyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20u");
    sb.append("cmVzcG9uZGVyLmZhaWx1cmUocmVzcG9uc2UucmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgICAgaWYgKCdzdWNjZXNzJyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAg");
    sb.append("c20ucmVzcG9uZGVyLnN1Y2Nlc3MocmVzcG9uc2UucmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAg");
    sb.append("IH0KICAgICAgfQogICAgICBzZWxmLm9ucmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICB9KSkgewog");
    sb.append("ICAgICBzZWxmLm9ucmVjb25uZWN0LnNldChzbS5pZCwgc20pOwogICAgICBzbS5fX3JldHJ5ID0gZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHNtKTsKICAgICAgfTsKICAgICAgcmV0");
    sb.append("dXJuIHNtOwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICAvKiogZXhlY3V0ZSBhIHN0cmVhbSBy");
    sb.append("ZXF1ZXN0IHdpdGggdGhlIGdpdmVuIHN0YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfc3RyZWFtKHNt");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICBzZWxmLl93cml0ZShzbS5yZXF1ZXN0LCBmdW5jdGlv");
    sb.append("biAocmVzcG9uc2UpIHsKICAgICAgaWYgKCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgIGlm");
    sb.append("ICgnZmFpbHVyZScgaW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuZmFpbHVy");
    sb.append("ZShyZXNwb25zZS5yZWFzb24pOwogICAgICAgIH0KICAgICAgICBzZWxmLm9ucmVjb25uZWN0LmRlbGV0");
    sb.append("ZShzbS5pZCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5yZXNwb25z");
    sb.append("ZSkgewogICAgICAgIGlmICgnbmV4dCcgaW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNw");
    sb.append("b25kZXIubmV4dChyZXNwb25zZS5yZXNwb25zZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChy");
    sb.append("ZXNwb25zZS5kb25lKSB7CiAgICAgICAgaWYgKCdjb21wbGV0ZScgaW4gc20ucmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgICAgICBzbS5yZXNwb25kZXIuY29tcGxldGUoKTsKICAgICAgICB9CiAgICAgICAgc2VsZi5vbnJl");
    sb.append("Y29ubmVjdC5kZWxldGUoc20uaWQpOwogICAgICB9CiAgICB9KTsKICAgIHNlbGYub25yZWNvbm5lY3Qu");
    sb.append("c2V0KHNtLmlkLCBzbSk7CiAgICBzbS5fX3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9zdHJlYW0oc20pOwogICAgfTsKICAgIHJldHVybiBzbTsKICB9CgogIF9faWQoKSB7CiAg");
    sb.append("ICB0aGlzLm5leHRJZCsrOwogICAgcmV0dXJuIHRoaXMubmV4dElkOwogIH0KCiAgLyoqW0JFR0lOLUlO");
    sb.append("Vk9LRV0qKi8KICBJbml0U2V0dXBBY2NvdW50KGVtYWlsLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxm");
    sb.append("ID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVj");
    sb.append("dXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAg");
    sb.append("cmVxdWVzdDogeyJtZXRob2QiOiJpbml0L3NldHVwLWFjY291bnQiLCAiaWQiOnBhcklkLCAiZW1haWwi");
    sb.append("OiBlbWFpbH0KICAgIH0pOwogIH0KICBJbml0Q29udmVydEdvb2dsZVVzZXIoYWNjZXNzVG9rZW4sIHJl");
    sb.append("c3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7");
    sb.append("CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3Bv");
    sb.append("bmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImluaXQvY29udmVydC1nb29n");
    sb.append("bGUtdXNlciIsICJpZCI6cGFySWQsICJhY2Nlc3MtdG9rZW4iOiBhY2Nlc3NUb2tlbn0KICAgIH0pOwog");
    sb.append("IH0KICBJbml0Q29tcGxldGVBY2NvdW50KGVtYWlsLCByZXZva2UsIGNvZGUsIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImluaXQvY29tcGxldGUtYWNjb3VudCIsICJpZCI6");
    sb.append("cGFySWQsICJlbWFpbCI6IGVtYWlsLCAicmV2b2tlIjogcmV2b2tlLCAiY29kZSI6IGNvZGV9CiAgICB9");
    sb.append("KTsKICB9CiAgRGVpbml0KGlkZW50aXR5LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJkZWluaXQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAgIH0p");
    sb.append("OwogIH0KICBBY2NvdW50U2V0UGFzc3dvcmQoaWRlbnRpdHksIHBhc3N3b3JkLCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3Bv");
    sb.append("bmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhY2NvdW50L3NldC1wYXNzd29yZCIsICJpZCI6");
    sb.append("cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAicGFzc3dvcmQiOiBwYXNzd29yZH0KICAgIH0pOwog");
    sb.append("IH0KICBBY2NvdW50R2V0UGF5bWVudFBsYW4oaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFjY291bnQvZ2V0LXBheW1lbnQtcGxhbiIsICJpZCI6cGFySWQs");
    sb.append("ICJpZGVudGl0eSI6IGlkZW50aXR5fQogICAgfSk7CiAgfQogIEFjY291bnRMb2dpbihlbWFpbCwgcGFz");
    sb.append("c3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAg");
    sb.append("ICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFjY291bnQv");
    sb.append("bG9naW4iLCAiaWQiOnBhcklkLCAiZW1haWwiOiBlbWFpbCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAg");
    sb.append("ICB9KTsKICB9CiAgUHJvYmUoaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlz");
    sb.append("OwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0");
    sb.append("OiB7Im1ldGhvZCI6InByb2JlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9");
    sb.append("KTsKICB9CiAgU3RhdHMocmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFy");
    sb.append("SWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBp");
    sb.append("ZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhv");
    sb.append("ZCI6InN0YXRzIiwgImlkIjpwYXJJZH0KICAgIH0pOwogIH0KICBJZGVudGl0eUhhc2goaWRlbnRpdHks");
    sb.append("IHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lk");
    sb.append("KCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJl");
    sb.append("c3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImlkZW50aXR5L2hhc2gi");
    sb.append("LCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBJZGVudGl0eVN0");
    sb.append("YXNoKGlkZW50aXR5LCBuYW1lLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZh");
    sb.append("ciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("aWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRo");
    sb.append("b2QiOiJpZGVudGl0eS9zdGFzaCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibmFt");
    sb.append("ZSI6IG5hbWV9CiAgICB9KTsKICB9CiAgQXV0aG9yaXR5Q3JlYXRlKGlkZW50aXR5LCByZXNwb25kZXIp");
    sb.append("IHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0");
    sb.append("dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJl");
    sb.append("c3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdXRob3JpdHkvY3JlYXRlIiwgImlkIjpw");
    sb.append("YXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgQXV0aG9yaXR5U2V0KGlkZW50");
    sb.append("aXR5LCBhdXRob3JpdHksIGtleVN0b3JlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJhdXRob3JpdHkvc2V0IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHks");
    sb.append("ICJhdXRob3JpdHkiOiBhdXRob3JpdHksICJrZXktc3RvcmUiOiBrZXlTdG9yZX0KICAgIH0pOwogIH0K");
    sb.append("ICBBdXRob3JpdHlHZXQoaWRlbnRpdHksIGF1dGhvcml0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2Vs");
    sb.append("ZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhl");
    sb.append("Y3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAg");
    sb.append("IHJlcXVlc3Q6IHsibWV0aG9kIjoiYXV0aG9yaXR5L2dldCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6");
    sb.append("IGlkZW50aXR5LCAiYXV0aG9yaXR5IjogYXV0aG9yaXR5fQogICAgfSk7CiAgfQogIEF1dGhvcml0eUxp");
    sb.append("c3QoaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJhdXRob3JpdHkvbGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQogICAgfSk7");
    sb.append("CiAgfQogIEF1dGhvcml0eURlc3Ryb3koaWRlbnRpdHksIGF1dGhvcml0eSwgcmVzcG9uZGVyKSB7CiAg");
    sb.append("ICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBz");
    sb.append("ZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25k");
    sb.append("ZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXV0aG9yaXR5L2Rlc3Ryb3kiLCAiaWQiOnBhcklk");
    sb.append("LCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImF1dGhvcml0eSI6IGF1dGhvcml0eX0KICAgIH0pOwogIH0K");
    sb.append("ICBTcGFjZUNyZWF0ZShpZGVudGl0eSwgc3BhY2UsIHRlbXBsYXRlLCByZXNwb25kZXIpIHsKICAgIHZh");
    sb.append("ciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwK");
    sb.append("ICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9jcmVhdGUiLCAiaWQiOnBhcklkLCAiaWRlbnRp");
    sb.append("dHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJ0ZW1wbGF0ZSI6IHRlbXBsYXRlfQogICAgfSk7");
    sb.append("CiAgfQogIFNwYWNlR2VuZXJhdGVLZXkoaWRlbnRpdHksIHNwYWNlLCByZXNwb25kZXIpIHsKICAgIHZh");
    sb.append("ciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwK");
    sb.append("ICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9nZW5lcmF0ZS1rZXkiLCAiaWQiOnBhcklkLCAi");
    sb.append("aWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VHZXQo");
    sb.append("aWRlbnRpdHksIHNwYWNlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJzcGFjZS9nZXQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3Bh");
    sb.append("Y2V9CiAgICB9KTsKICB9CiAgU3BhY2VTZXQoaWRlbnRpdHksIHNwYWNlLCBwbGFuLCByZXNwb25kZXIp");
    sb.append("IHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0");
    sb.append("dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJl");
    sb.append("c3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9zZXQiLCAiaWQiOnBhcklkLCAi");
    sb.append("aWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJwbGFuIjogcGxhbn0KICAgIH0pOwog");
    sb.append("IH0KICBTcGFjZVJlZGVwbG95S2ljayhpZGVudGl0eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFy");
    sb.append("IHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5f");
    sb.append("X2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAog");
    sb.append("ICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL3JlZGVwbG95LWtpY2siLCAiaWQiOnBhcklkLCAi");
    sb.append("aWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VTZXRS");
    sb.append("eGh0bWwoaWRlbnRpdHksIHNwYWNlLCByeGh0bWwsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0");
    sb.append("aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVf");
    sb.append("cnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6InNwYWNlL3NldC1yeGh0bWwiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBp");
    sb.append("ZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJyeGh0bWwiOiByeGh0bWx9CiAgICB9KTsKICB9CiAgU3Bh");
    sb.append("Y2VHZXRSeGh0bWwoaWRlbnRpdHksIHNwYWNlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhp");
    sb.append("czsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3Jy");
    sb.append("KHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVz");
    sb.append("dDogeyJtZXRob2QiOiJzcGFjZS9nZXQtcnhodG1sIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRl");
    sb.append("bnRpdHksICJzcGFjZSI6IHNwYWNlfQogICAgfSk7CiAgfQogIFNwYWNlU2V0UG9saWN5KGlkZW50aXR5");
    sb.append("LCBzcGFjZSwgYWNjZXNzUG9saWN5LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJt");
    sb.append("ZXRob2QiOiJzcGFjZS9zZXQtcG9saWN5IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHks");
    sb.append("ICJzcGFjZSI6IHNwYWNlLCAiYWNjZXNzLXBvbGljeSI6IGFjY2Vzc1BvbGljeX0KICAgIH0pOwogIH0K");
    sb.append("ICBTcGFjZUdldFBvbGljeShpZGVudGl0eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL2dldC1wb2xpY3kiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHki");
    sb.append("OiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VNZXRyaWNzKGlkZW50");
    sb.append("aXR5LCBzcGFjZSwgcHJlZml4LCBtZXRyaWNRdWVyeSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9");
    sb.append("IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0");
    sb.append("ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJl");
    sb.append("cXVlc3Q6IHsibWV0aG9kIjoic3BhY2UvbWV0cmljcyIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlk");
    sb.append("ZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgInByZWZpeCI6IHByZWZpeCwgIm1ldHJpYy1xdWVyeSI6IG1l");
    sb.append("dHJpY1F1ZXJ5fQogICAgfSk7CiAgfQogIFNwYWNlRGVsZXRlKGlkZW50aXR5LCBzcGFjZSwgcmVzcG9u");
    sb.append("ZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("IHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVy");
    sb.append("OiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2UvZGVsZXRlIiwgImlkIjpw");
    sb.append("YXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlfQogICAgfSk7CiAgfQogIFNw");
    sb.append("YWNlU2V0Um9sZShpZGVudGl0eSwgc3BhY2UsIGVtYWlsLCByb2xlLCByZXNwb25kZXIpIHsKICAgIHZh");
    sb.append("ciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwK");
    sb.append("ICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9zZXQtcm9sZSIsICJpZCI6cGFySWQsICJpZGVu");
    sb.append("dGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgImVtYWlsIjogZW1haWwsICJyb2xlIjogcm9s");
    sb.append("ZX0KICAgIH0pOwogIH0KICBTcGFjZUxpc3REZXZlbG9wZXJzKGlkZW50aXR5LCBzcGFjZSwgcmVzcG9u");
    sb.append("ZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("IHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3Bv");
    sb.append("bmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL2xpc3QtZGV2ZWxv");
    sb.append("cGVycyIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZX0KICAg");
    sb.append("IH0pOwogIH0KICBTcGFjZVJlZmxlY3QoaWRlbnRpdHksIHNwYWNlLCBrZXksIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL3JlZmxlY3QiLCAiaWQiOnBhcklkLCAi");
    sb.append("aWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9");
    sb.append("CiAgU3BhY2VMaXN0KGlkZW50aXR5LCBtYXJrZXIsIGxpbWl0LCByZXNwb25kZXIpIHsKICAgIHZhciBz");
    sb.append("ZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19l");
    sb.append("eGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIs");
    sb.append("CiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2UvbGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0");
    sb.append("eSI6IGlkZW50aXR5LCAibWFya2VyIjogbWFya2VyLCAibGltaXQiOiBsaW1pdH0KICAgIH0pOwogIH0K");
    sb.append("ICBQdXNoUmVnaXN0ZXIoaWRlbnRpdHksIGRvbWFpbiwgc3Vic2NyaXB0aW9uLCBkZXZpY2VJbmZvLCBy");
    sb.append("ZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNw");
    sb.append("b25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJwdXNoL3JlZ2lzdGVyIiwg");
    sb.append("ImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW4sICJzdWJzY3Jp");
    sb.append("cHRpb24iOiBzdWJzY3JpcHRpb24sICJkZXZpY2UtaW5mbyI6IGRldmljZUluZm99CiAgICB9KTsKICB9");
    sb.append("CiAgRG9tYWluTWFwKGlkZW50aXR5LCBkb21haW4sIHNwYWNlLCBjZXJ0aWZpY2F0ZSwgcmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiBy");
    sb.append("ZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9tYWluL21hcCIsICJpZCI6cGFySWQs");
    sb.append("ICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAic3BhY2UiOiBzcGFjZSwgImNl");
    sb.append("cnRpZmljYXRlIjogY2VydGlmaWNhdGV9CiAgICB9KTsKICB9CiAgRG9tYWluUmVmbGVjdChpZGVudGl0");
    sb.append("eSwgZG9tYWluLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9");
    sb.append("IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklk");
    sb.append("LAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb21h");
    sb.append("aW4vcmVmbGVjdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9t");
    sb.append("YWlufQogICAgfSk7CiAgfQogIERvbWFpbk1hcERvY3VtZW50KGlkZW50aXR5LCBkb21haW4sIHNwYWNl");
    sb.append("LCBrZXksIHJvdXRlLCBjZXJ0aWZpY2F0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7");
    sb.append("CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6");
    sb.append("IHsibWV0aG9kIjoiZG9tYWluL21hcC1kb2N1bWVudCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlk");
    sb.append("ZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAic3BhY2UiOiBzcGFjZSwgImtleSI6IGtleSwgInJvdXRl");
    sb.append("Ijogcm91dGUsICJjZXJ0aWZpY2F0ZSI6IGNlcnRpZmljYXRlfQogICAgfSk7CiAgfQogIERvbWFpbkxp");
    sb.append("c3QoaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJkb21haW4vbGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQogICAgfSk7CiAg");
    sb.append("fQogIERvbWFpbkxpc3RCeVNwYWNlKGlkZW50aXR5LCBzcGFjZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9saXN0LWJ5LXNwYWNlIiwgImlkIjpwYXJJ");
    sb.append("ZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlfQogICAgfSk7CiAgfQogIERvbWFp");
    sb.append("bkdldFZhcGlkUHVibGljS2V5KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9nZXQtdmFwaWQtcHVibGljLWtleSIsICJpZCI6cGFy");
    sb.append("SWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWlufQogICAgfSk7CiAgfQogIERv");
    sb.append("bWFpblVubWFwKGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlz");
    sb.append("OwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0");
    sb.append("OiB7Im1ldGhvZCI6ImRvbWFpbi91bm1hcCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5");
    sb.append("LCAiZG9tYWluIjogZG9tYWlufQogICAgfSk7CiAgfQogIERvbWFpbkdldChpZGVudGl0eSwgZG9tYWlu");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb21haW4vZ2V0Iiwg");
    sb.append("ImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW59CiAgICB9KTsK");
    sb.append("ICB9CiAgRG9jdW1lbnRBdXRob3JpemUoc3BhY2UsIGtleSwgdXNlcm5hbWUsIHBhc3N3b3JkLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemUi");
    sb.append("LCAiaWQiOnBhcklkLCAic3BhY2UiOiBzcGFjZSwgImtleSI6IGtleSwgInVzZXJuYW1lIjogdXNlcm5h");
    sb.append("bWUsICJwYXNzd29yZCI6IHBhc3N3b3JkfQogICAgfSk7CiAgfQogIERvY3VtZW50QXV0aG9yaXplRG9t");
    sb.append("YWluKGRvbWFpbiwgdXNlcm5hbWUsIHBhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0g");
    sb.append("dGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRl");
    sb.append("X3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVx");
    sb.append("dWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemUtZG9tYWluIiwgImlkIjpwYXJJZCwgImRv");
    sb.append("bWFpbiI6IGRvbWFpbiwgInVzZXJuYW1lIjogdXNlcm5hbWUsICJwYXNzd29yZCI6IHBhc3N3b3JkfQog");
    sb.append("ICAgfSk7CiAgfQogIERvY3VtZW50QXV0aG9yaXplV2l0aFJlc2V0KHNwYWNlLCBrZXksIHVzZXJuYW1l");
    sb.append("LCBwYXNzd29yZCwgbmV3X3Bhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemUtd2l0aC1yZXNldCIsICJpZCI6cGFySWQsICJzcGFj");
    sb.append("ZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFz");
    sb.append("c3dvcmQsICJuZXdfcGFzc3dvcmQiOiBuZXdfcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRB");
    sb.append("dXRob3JpemVEb21haW5XaXRoUmVzZXQoZG9tYWluLCB1c2VybmFtZSwgcGFzc3dvcmQsIG5ld19wYXNz");
    sb.append("d29yZCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxm");
    sb.append("Ll9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAg");
    sb.append("ICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQv");
    sb.append("YXV0aG9yaXplLWRvbWFpbi13aXRoLXJlc2V0IiwgImlkIjpwYXJJZCwgImRvbWFpbiI6IGRvbWFpbiwg");
    sb.append("InVzZXJuYW1lIjogdXNlcm5hbWUsICJwYXNzd29yZCI6IHBhc3N3b3JkLCAibmV3X3Bhc3N3b3JkIjog");
    sb.append("bmV3X3Bhc3N3b3JkfQogICAgfSk7CiAgfQogIERvY3VtZW50Q3JlYXRlKGlkZW50aXR5LCBzcGFjZSwg");
    sb.append("a2V5LCBlbnRyb3B5LCBhcmcsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFy");
    sb.append("IHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBp");
    sb.append("ZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhv");
    sb.append("ZCI6ImRvY3VtZW50L2NyZWF0ZSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3Bh");
    sb.append("Y2UiOiBzcGFjZSwgImtleSI6IGtleSwgImVudHJvcHkiOiBlbnRyb3B5LCAiYXJnIjogYXJnfQogICAg");
    sb.append("fSk7CiAgfQogIERvY3VtZW50RGVsZXRlKGlkZW50aXR5LCBzcGFjZSwga2V5LCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3Bv");
    sb.append("bmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9kZWxldGUiLCAiaWQiOnBhcklk");
    sb.append("LCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXl9CiAgICB9KTsK");
    sb.append("ICB9CiAgRG9jdW1lbnRMaXN0KGlkZW50aXR5LCBzcGFjZSwgbWFya2VyLCBsaW1pdCwgcmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2xpc3QiLCAiaWQi");
    sb.append("OnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJtYXJrZXIiOiBtYXJr");
    sb.append("ZXIsICJsaW1pdCI6IGxpbWl0fQogICAgfSk7CiAgfQogIE1lc3NhZ2VEaXJlY3RTZW5kKGlkZW50aXR5");
    sb.append("LCBzcGFjZSwga2V5LCBjaGFubmVsLCBtZXNzYWdlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0g");
    sb.append("dGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRl");
    sb.append("X3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVx");
    sb.append("dWVzdDogeyJtZXRob2QiOiJtZXNzYWdlL2RpcmVjdC1zZW5kIiwgImlkIjpwYXJJZCwgImlkZW50aXR5");
    sb.append("IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiY2hhbm5lbCI6IGNoYW5uZWws");
    sb.append("ICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBNZXNzYWdlRGlyZWN0U2VuZE9uY2UoaWRl");
    sb.append("bnRpdHksIHNwYWNlLCBrZXksIGRlZHVwZSwgY2hhbm5lbCwgbWVzc2FnZSwgcmVzcG9uZGVyKSB7CiAg");
    sb.append("ICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBz");
    sb.append("ZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25k");
    sb.append("ZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoibWVzc2FnZS9kaXJlY3Qtc2VuZC1vbmNlIiwgImlk");
    sb.append("IjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAi");
    sb.append("ZGVkdXBlIjogZGVkdXBlLCAiY2hhbm5lbCI6IGNoYW5uZWwsICJtZXNzYWdlIjogbWVzc2FnZX0KICAg");
    sb.append("IH0pOwogIH0KICBDb25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5LCBzcGFjZSwga2V5LCB2aWV3ZXJTdGF0");
    sb.append("ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9f");
    sb.append("aWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAg");
    sb.append("ICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImNvbm5lY3Rp");
    sb.append("b24vY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNl");
    sb.append("LCAia2V5Ijoga2V5LCAidmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9LAogICAgICBzZW5kOiBmdW5j");
    sb.append("dGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBz");
    sb.append("ZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQs");
    sb.append("CiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0");
    sb.append("aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFu");
    sb.append("bmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAg");
    sb.append("ICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJl");
    sb.append("c3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19l");
    sb.append("eGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVz");
    sb.append("cG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwg");
    sb.append("aWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAicGFzc3dv");
    sb.append("cmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAgICAgICB9KTsKICAg");
    sb.append("ICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5uZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3Vi");
    sb.append("UmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5f");
    sb.append("X2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJS");
    sb.append("ZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vc2VuZC1vbmNl");
    sb.append("IiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgImRlZHVw");
    sb.append("ZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBj");
    sb.append("YW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAg");
    sb.append("ICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5jdGlvbihhc3NldElkLCBmaWxlbmFtZSwg");
    sb.append("Y29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsK");
    sb.append("ICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7");
    sb.append("CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAg");
    sb.append("ICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9hdHRhY2giLCBpZDogc3ViSWQsICJj");
    sb.append("b25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJZCwgImZpbGVuYW1lIjogZmlsZW5hbWUs");
    sb.append("ICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUiOiBzaXplLCAiZGlnZXN0LW1kNSI6IGRp");
    sb.append("Z2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEzODR9CiAgICAgICAgfSk7CiAgICAgIH0s");
    sb.append("CiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUsIHN1YlJlc3BvbmRlcikgewogICAgICAg");
    sb.append("IHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("ICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAg");
    sb.append("cmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rp");
    sb.append("b24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9CiAgICAgICAgfSk7CiAgICAgIH0s");
    sb.append("CiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAog");
    sb.append("ICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhv");
    sb.append("ZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAgICAgICAg");
    sb.append("fSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBDb25uZWN0aW9uQ3JlYXRlVmlhRG9tYWluKGlkZW50aXR5");
    sb.append("LCBkb21haW4sIHZpZXdlclN0YXRlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7");
    sb.append("CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6");
    sb.append("IHsibWV0aG9kIjoiY29ubmVjdGlvbi9jcmVhdGUtdmlhLWRvbWFpbiIsICJpZCI6cGFySWQsICJpZGVu");
    sb.append("dGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3Rh");
    sb.append("dGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsK");
    sb.append("ICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7");
    sb.append("CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAg");
    sb.append("ICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAiY29u");
    sb.append("bmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3Jk");
    sb.append("LCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAg");
    sb.append("ICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJj");
    sb.append("b25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2VybmFt");
    sb.append("ZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNz");
    sb.append("d29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5uZWws");
    sb.append("IGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAg");
    sb.append("ICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDog");
    sb.append("ImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFu");
    sb.append("bmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAg");
    sb.append("IH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewogICAg");
    sb.append("ICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAg");
    sb.append("ICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQsICJj");
    sb.append("b25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5jdGlv");
    sb.append("bihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0U2hh");
    sb.append("Mzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAg");
    sb.append("ICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25k");
    sb.append("ZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9h");
    sb.append("dHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJZCwg");
    sb.append("ImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUiOiBz");
    sb.append("aXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEzODR9");
    sb.append("CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUsIHN1");
    sb.append("YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3Vi");
    sb.append("UmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0ZSIs");
    sb.append("IGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9");
    sb.append("CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAg");
    sb.append("ICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAg");
    sb.append("ICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVj");
    sb.append("dGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBEb2N1bWVudHNIYXNo");
    sb.append("UGFzc3dvcmQocGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFy");
    sb.append("IHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBp");
    sb.append("ZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhv");
    sb.append("ZCI6ImRvY3VtZW50cy9oYXNoLXBhc3N3b3JkIiwgImlkIjpwYXJJZCwgInBhc3N3b3JkIjogcGFzc3dv");
    sb.append("cmR9CiAgICB9KTsKICB9CiAgQmlsbGluZ0Nvbm5lY3Rpb25DcmVhdGUoaWRlbnRpdHksIHJlc3BvbmRl");
    sb.append("cikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICBy");
    sb.append("ZXR1cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJiaWxsaW5nLWNvbm5lY3Rpb24v");
    sb.append("Y3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9LAogICAgICBzZW5kOiBmdW5j");
    sb.append("dGlvbihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBz");
    sb.append("ZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQs");
    sb.append("CiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0");
    sb.append("aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFu");
    sb.append("bmVsIjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAg");
    sb.append("ICBwYXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJl");
    sb.append("c3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19l");
    sb.append("eGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVz");
    sb.append("cG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwg");
    sb.append("aWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAicGFzc3dv");
    sb.append("cmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAgICAgICB9KTsKICAg");
    sb.append("ICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5uZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3Vi");
    sb.append("UmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5f");
    sb.append("X2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJS");
    sb.append("ZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vc2VuZC1vbmNl");
    sb.append("IiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgImRlZHVw");
    sb.append("ZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBj");
    sb.append("YW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAg");
    sb.append("ICAgICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5jdGlvbihhc3NldElkLCBmaWxlbmFtZSwg");
    sb.append("Y29udGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsK");
    sb.append("ICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7");
    sb.append("CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAg");
    sb.append("ICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9hdHRhY2giLCBpZDogc3ViSWQsICJj");
    sb.append("b25uZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJZCwgImZpbGVuYW1lIjogZmlsZW5hbWUs");
    sb.append("ICJjb250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUiOiBzaXplLCAiZGlnZXN0LW1kNSI6IGRp");
    sb.append("Z2VzdE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEzODR9CiAgICAgICAgfSk7CiAgICAgIH0s");
    sb.append("CiAgICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUsIHN1YlJlc3BvbmRlcikgewogICAgICAg");
    sb.append("IHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("ICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAg");
    sb.append("cmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rp");
    sb.append("b24iOnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9CiAgICAgICAgfSk7CiAgICAgIH0s");
    sb.append("CiAgICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAog");
    sb.append("ICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhv");
    sb.append("ZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAgICAgICAg");
    sb.append("fSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBDb25maWd1cmVNYWtlT3JHZXRBc3NldEtleShyZXNwb25k");
    sb.append("ZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAg");
    sb.append("cmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6");
    sb.append("IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJjb25maWd1cmUvbWFrZS1vci1nZXQt");
    sb.append("YXNzZXQta2V5IiwgImlkIjpwYXJJZH0KICAgIH0pOwogIH0KICBBdHRhY2htZW50U3RhcnQoaWRlbnRp");
    sb.append("dHksIHNwYWNlLCBrZXksIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImF0dGFjaG1lbnQvc3RhcnQiLCAiaWQiOnBhcklkLCAi");
    sb.append("aWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJmaWxlbmFtZSI6");
    sb.append("IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29udGVudFR5cGV9LAogICAgICBhcHBlbmQ6IGZ1bmN0");
    sb.append("aW9uKGNodW5rTWQ1LCBiYXNlNjRCeXRlcywgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1Yklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1");
    sb.append("YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7");
    sb.append("IG1ldGhvZDogImF0dGFjaG1lbnQvYXBwZW5kIiwgaWQ6IHN1YklkLCAidXBsb2FkIjpwYXJJZCwgImNo");
    sb.append("dW5rLW1kNSI6IGNodW5rTWQ1LCAiYmFzZTY0LWJ5dGVzIjogYmFzZTY0Qnl0ZXN9CiAgICAgICAgfSk7");
    sb.append("CiAgICAgIH0sCiAgICAgIGZpbmlzaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFy");
    sb.append("IHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAg");
    sb.append("aWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1");
    sb.append("ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvZmluaXNoIiwgaWQ6IHN1YklkLCAidXBsb2FkIjpwYXJJ");
    sb.append("ZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQogIEF0dGFjaG1lbnRTdGFydEJ5RG9tYWlu");
    sb.append("KGlkZW50aXR5LCBkb21haW4sIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgcmVzcG9uZGVyKSB7CiAgICB2");
    sb.append("YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxm");
    sb.append("Ll9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImF0dGFjaG1lbnQvc3RhcnQtYnktZG9tYWluIiwg");
    sb.append("ImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW4sICJmaWxlbmFt");
    sb.append("ZSI6IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29udGVudFR5cGV9LAogICAgICBhcHBlbmQ6IGZ1");
    sb.append("bmN0aW9uKGNodW5rTWQ1LCBiYXNlNjRCeXRlcywgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1");
    sb.append("YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6");
    sb.append("IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0");
    sb.append("OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvYXBwZW5kIiwgaWQ6IHN1YklkLCAidXBsb2FkIjpwYXJJZCwg");
    sb.append("ImNodW5rLW1kNSI6IGNodW5rTWQ1LCAiYmFzZTY0LWJ5dGVzIjogYmFzZTY0Qnl0ZXN9CiAgICAgICAg");
    sb.append("fSk7CiAgICAgIH0sCiAgICAgIGZpbmlzaDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAg");
    sb.append("dmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAg");
    sb.append("ICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICBy");
    sb.append("ZXF1ZXN0OiB7IG1ldGhvZDogImF0dGFjaG1lbnQvZmluaXNoIiwgaWQ6IHN1YklkLCAidXBsb2FkIjpw");
    sb.append("YXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQoKICAvKipbRU5ELUlOVk9LRV0qKi8K");
    sb.append("fQoKdmFyIEFkYW1hID0gewogIFByb2R1Y3Rpb246ICJhd3MtdXMtZWFzdC0yLmFkYW1hLXBsYXRmb3Jt");
    sb.append("LmNvbSIsCiAgQmV0YTogImJldGEuYWRhbWEtcGxhdGZvcm0uY29tIiwKICBDb25uZWN0aW9uOiBXZWJT");
    sb.append("b2NrZXRBZGFtYUNvbm5lY3Rpb24KfTsK");
    return sb.toString();
  }
  public static final String WORKER = new String(Base64.getDecoder().decode(make_worker()), StandardCharsets.UTF_8);
  private static String make_worker() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyogQWRhbWEgd29ya2VyOiBoYW5kbGUgc2ltcGxlIHB1c2ggbm90aWZpY2F0aW9ucyAqLwpzZWxmLmFk");
    sb.append("ZEV2ZW50TGlzdGVuZXIoJ3B1c2gnLCBmdW5jdGlvbihldmVudCkgewogIGlmIChldmVudC5kYXRhKSB7");
    sb.append("CiAgICB2YXIganNvbiA9IGV2ZW50LmRhdGEuanNvbigpOwogICAgaWYgKGpzb24pIHsKICAgICAgdmFy");
    sb.append("IG9wdGlvbnMgPSB7CiAgICAgICAgYm9keToganNvbi5ib2R5ID8ganNvbi5ib2R5IDogIkdlbmVyaWMg");
    sb.append("UHVzaCBCb2R5IiwKICAgICAgfTsKICAgICAgaWYgKGpzb24uaWNvbikgewogICAgICAgIG9wdGlvbnMu");
    sb.append("aWNvbiA9IGpzb24uaWNvbjsKICAgICAgfQogICAgICBldmVudC53YWl0VW50aWwoc2VsZi5yZWdpc3Ry");
    sb.append("YXRpb24uc2hvd05vdGlmaWNhdGlvbihqc29uLnRpdGxlID8ganNvbi50aXRsZSA6ICJHZW5lcmljIFB1");
    sb.append("c2ggVGl0bGUiLCBvcHRpb25zKSk7CiAgICB9CiAgfQp9KTs=");
    return sb.toString();
  }
}
