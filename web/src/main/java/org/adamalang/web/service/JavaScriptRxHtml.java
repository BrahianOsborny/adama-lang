/*
 * This file is subject to the terms and conditions outlined in the file 'LICENSE' (hint: it's MIT); this file is located in the root directory near the README.md which you should also read.
 *
 * This file is part of the 'Adama' project which is a programming language and document store for board games; however, it can be so much more.
 *
 * See https://www.adama-platform.com/ for more information.
 *
 * (c) 2020 - 2022 by Jeffrey M. Barber ( http://jeffrey.io )
 */
package org.adamalang.web.service;

import java.util.Base64;

public class JavaScriptRxHtml {
  public static final byte[] RXHTML_JS_BYTES = Base64.getDecoder().decode(make());
  private static String make() {
    StringBuilder sb = new StringBuilder();
    sb.append("ZnVuY3Rpb24gQWRhbWFUcmVlU2ltcGxlKCkgew0KICB2YXIgaWQgPSAwOw0KDQogIHZhciByb290ID0g");
    sb.append("e307DQogIHZhciBhbGxfc3Vic2NyaXB0aW9ucyA9IHt9Ow0KDQogIHZhciBjbG9uZV9vYmplY3QgPSBm");
    sb.append("dW5jdGlvbiAob2JqKSB7DQogICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgew0KICAgICAgdmFyIG5l");
    sb.append("eHQgPSBbXTsNCiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2JqLmxlbmd0aDsgaysrKSB7DQogICAg");
    sb.append("ICAgIG5leHQucHVzaChjbG9uZV9vYmplY3Qob2JqW2tdKSk7DQogICAgICB9DQogICAgICByZXR1cm4g");
    sb.append("bmV4dDsNCiAgICB9IGVsc2UgaWYgKHR5cGVvZiAob2JqKSA9PSAnb2JqZWN0Jykgew0KICAgICAgdmFy");
    sb.append("IG5leHQgPSB7fTsNCiAgICAgIGZvciAoa2V5IGluIG9iaikgew0KICAgICAgICBpZiAoa2V5WzBdID09");
    sb.append("ICcjJyB8fCBrZXkgPT0gIl9fa2V5IiB8fCBrZXkgPT0gIkBvIikgY29udGludWU7DQogICAgICAgIG5l");
    sb.append("eHRba2V5XSA9IGNsb25lX29iamVjdChvYmpba2V5XSk7DQogICAgICB9DQogICAgICByZXR1cm4gbmV4");
    sb.append("dDsNCiAgICB9IGVsc2Ugew0KICAgICAgcmV0dXJuIG9iajsNCiAgICB9DQogIH07DQoNCiAgdGhpcy5u");
    sb.append("dWtlID0gZnVuY3Rpb24gKCkgew0KICAgIHRoaXMuYWxsX3N1YnNjcmlwdGlvbnMgPSB7fTsNCiAgfQ0K");
    sb.append("DQogIHRoaXMuY29weSA9IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gY2xvbmVfb2JqZWN0KHJvb3Qp");
    sb.append("Ow0KICB9DQoNCiAgdGhpcy5zdHIgPSBmdW5jdGlvbiAoKSB7DQogICAgcmV0dXJuIEpTT04uc3RyaW5n");
    sb.append("aWZ5KHJvb3QpOw0KICB9Ow0KDQogIC8vIGZpbHRlciB0aGUgc3Vic2NyaXB0aW9ucyB0byB0aGUgb25l");
    sb.append("cyB0aGF0IGhhdmUgdGhlIGtleQ0KICB2YXIgc3ViID0gZnVuY3Rpb24gKHMsIGtleSkgew0KICAgIC8v");
    sb.append("IGlmIHdlIGhhdmUgbm90aGluZywgdGhlbiB3ZSByZXR1cm4gbm90aGluZw0KICAgIGlmIChzLmxlbmd0");
    sb.append("aCA9PSAwKSB7DQogICAgICByZXR1cm4gczsNCiAgICB9DQogICAgLy8gbWFrZSBhIG5ldyBhcnJheQ0K");
    sb.append("ICAgIHZhciBuID0gW107DQogICAgZm9yICh2YXIgayA9IDA7IGsgPCBzLmxlbmd0aDsgaysrKSB7IC8v");
    sb.append("IHN1Y2ggdGhhdCBldmVyeSBlbGVtZW50DQogICAgICBpZiAoa2V5IGluIHNba10pIHsgLy8gd2hpY2gg");
    sb.append("Y29udGFpbnMgdGhlIGtleQ0KICAgICAgICBuLnB1c2goc1trXVtrZXldKTsgLy8gaXMgYWRkZWQgdG8g");
    sb.append("dGhlIG5ldyBhcnJheQ0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gbjsNCiAgfTsNCg0KICAvLyBm");
    sb.append("aXJlIGV2ZW50cyBhdCB0aGUgY3VycmVudCBzdWJzY3JpcHRpb24NCiAgdmFyIGZpcmUgPSBmdW5jdGlv");
    sb.append("biAocywgdmFsdWUpIHsNCiAgICAvLyBmb3IgZWFjaCBzdWJzY3JpcHRpb24NCiAgICBmb3IgKHZhciBq");
    sb.append("ID0gMDsgaiA8IHMubGVuZ3RoOyBqKyspIHsNCiAgICAgIHZhciB2ID0gc1tqXTsNCiAgICAgIC8vIGlm");
    sb.append("IGl0IGhhcyBldmVudHMNCiAgICAgIGlmICgnQGUnIGluIHYpIHsNCiAgICAgICAgLy8gZmlyZSBlYWNo");
    sb.append("IGV2ZW50DQogICAgICAgIHZhciBldnRzID0gdlsnQGUnXTsNCiAgICAgICAgZm9yICh2YXIgayA9IDA7");
    sb.append("IGsgPCBldnRzLmxlbmd0aDsgaysrKSB7DQogICAgICAgICAgZXZ0c1trXSh2YWx1ZSk7DQogICAgICAg");
    sb.append("IH0NCiAgICAgIH0NCiAgICB9DQogIH07DQoNCiAgdmFyIHdlYXZlID0gZnVuY3Rpb24gKHMsIGNhbGxi");
    sb.append("YWNrLCBrZXkpIHsNCiAgICBpZiAoQXJyYXkuaXNBcnJheShjYWxsYmFjaykpIHsNCiAgICAgIGZvciAo");
    sb.append("dmFyIGsgPSAwOyBrIDwgY2FsbGJhY2subGVuZ3RoOyBrKyspIHsNCiAgICAgICAgd2VhdmUocywgY2Fs");
    sb.append("bGJhY2tba10sIGtleSk7DQogICAgICB9DQogICAgfSBlbHNlIGlmICh0eXBlb2YgKGNhbGxiYWNrKSA9");
    sb.append("PSAnZnVuY3Rpb24nKSB7DQogICAgICBpZiAoIShrZXkgaW4gcykpIHsNCiAgICAgICAgc1trZXldID0g");
    sb.append("e307DQogICAgICB9DQogICAgICB2YXIgc2sgPSBzW2tleV07DQogICAgICBpZiAoISgnQGUnIGluIHNr");
    sb.append("KSkgew0KICAgICAgICBza1snQGUnXSA9IFtjYWxsYmFja107DQogICAgICB9IGVsc2Ugew0KICAgICAg");
    sb.append("ICBza1snQGUnXS5wdXNoKGNhbGxiYWNrKTsNCiAgICAgIH0NCiAgICB9IGVsc2UgaWYgKHR5cGVvZiAo");
    sb.append("Y2FsbGJhY2spID09ICdvYmplY3QnKSB7DQogICAgICBpZiAoIShrZXkgaW4gcykpIHsNCiAgICAgICAg");
    sb.append("c1trZXldID0ge307DQogICAgICB9DQogICAgICB2YXIgc2sgPSBzW2tleV07DQogICAgICBmb3IgKHZh");
    sb.append("ciBjayBpbiBjYWxsYmFjaykgew0KICAgICAgICBpZiAoY2sgPT0gJ0BlJykgew0KICAgICAgICAgIHdl");
    sb.append("YXZlKHMsIGNhbGxiYWNrW2NrXSwga2V5KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB3ZWF2");
    sb.append("ZShzaywgY2FsbGJhY2tbY2tdLCBjayk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH07DQoN");
    sb.append("CiAgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhZGRpdGlvbg0KICB2YXIgZmlyZV9hZGQgPSBmdW5jdGlv");
    sb.append("biAocywga2V5KSB7DQogICAgZm9yICh2YXIgaiA9IDA7IGogPCBzLmxlbmd0aDsgaisrKSB7IC8vIGZv");
    sb.append("ciBlYWNoIHN1YnNjcmlwdGlvbg0KICAgICAgdmFyIHYgPSBzW2pdOw0KICAgICAgaWYgKCcrJyBpbiB2");
    sb.append("KSB7IC8vIGlmIHRoZSBzdWJzY3JpcHRpb24gaGFzIHRoZSBhYmlsaXR5IHRvIGFkZCBuZXcgb2JqZWN0");
    sb.append("cw0KICAgICAgICB2YXIgdmEgPSB2WycrJ107DQogICAgICAgIGlmICgnQGUnIGluIHZhKSB7IC8vIGlm");
    sb.append("IGFyZSBldmVudHMgYXNzb2NpYXRlZCB0byAnKycNCiAgICAgICAgICB2YXIgZXZhID0gdmFbJ0BlJ107");
    sb.append("DQogICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBldmEubGVuZ3RoOyBrKyspIHsgLy8gZm9yIGVh");
    sb.append("Y2ggJysnIGFiaWxpdHkNCiAgICAgICAgICAgIHdlYXZlKHYsIGV2YVtrXShrZXkpLCBrZXkpOw0KICAg");
    sb.append("ICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIC8vIGZpcmUgYSBkZWxl");
    sb.append("dGUgbWVzc2FnZSBmb3IgdGhlIGdpdmVuIGtleQ0KICB2YXIgZmlyZV9kZWwgPSBmdW5jdGlvbiAocywg");
    sb.append("a2V5KSB7DQogICAgZm9yICh2YXIgaiA9IDA7IGogPCBzLmxlbmd0aDsgaisrKSB7IC8vIGZvciBlYWNo");
    sb.append("IHN1YnNjcmlwdGlvbg0KICAgICAgdmFyIHYgPSBzW2pdOw0KICAgICAgaWYgKCctJyBpbiB2KSB7IC8v");
    sb.append("IGlmIHRoZSBzdWJzY3JpcHRpb24gaGFzIHRoZSBhYmlsaXR5IHRvIGRlbGV0ZSBwcmlvciBrZXlzDQog");
    sb.append("ICAgICAgIHZhciB2YSA9IHZbJy0nXTsNCiAgICAgICAgaWYgKCdAZScgaW4gdmEpIHsgLy8gaWYgYXJl");
    sb.append("IGV2ZW50cyBhc3NvY2lhdGVkIHRvICctJw0KICAgICAgICAgIHZhciBldmEgPSB2YVsnQGUnXTsNCiAg");
    sb.append("ICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV2YS5sZW5ndGg7IGsrKykgeyAvLyBmb3IgZWFjaCAn");
    sb.append("LScgYWJpbGl0eQ0KICAgICAgICAgICAgZXZhW2tdKGtleSk7IC8vIGV2YWx1YXRlIHRoZSAnLScNCiAg");
    sb.append("ICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICAvLyBhIGRlbGV0ZSBv");
    sb.append("ZiBhIHRyZWUgaGFzIGJlZW4gZGV0ZWN0ZWQsIGxldCdzIA0KICB2YXIgZGVsID0gZnVuY3Rpb24gKHMp");
    sb.append("IHsNCiAgICAvLyBpZiB0aGUgc3Vic2NyaXB0aW9ucyBpcyBhbiBhcnJheSwgdGhlbiBkZWxldGUgYWxs");
    sb.append("IGNoaWxkcmVuDQogICAgaWYgKEFycmF5LmlzQXJyYXkocykpIHsNCiAgICAgIHZhciBuID0gcy5sZW5n");
    sb.append("dGg7DQogICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgew0KICAgICAgICBkZWwoc1trXSk7");
    sb.append("DQogICAgICB9DQogICAgfSBlbHNlIGlmICh0eXBlb2YgKHMpID09ICdvYmplY3QnKSB7IC8vIG90aGVy");
    sb.append("d2lzZSwgaXRlcmF0ZSBvdmVyIHRoZSBrZXlzDQogICAgICBmb3IgKHZhciBrZXkgaW4gcykgew0KICAg");
    sb.append("ICAgICB2YXIgY2ggPSBzW2tleV07DQogICAgICAgIGlmIChrZXkgPT0gJ0BlJykgeyAvLyB3ZSBoYXZl");
    sb.append("IGV2ZW50cywgc28gbGV0J3Mgc2VuZCB0aG9zZSBldmVudHMuLi4NCiAgICAgICAgICBmb3IgKHZhciBq");
    sb.append("ID0gMDsgaiA8IGNoLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICBjaFtqXShudWxsKTsgLy8gYSBu");
    sb.append("dWxsIHRvIGluZGljYXRlIGRlbGV0aW9uDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgeyAvLyBy");
    sb.append("ZWN1cnNlIGludG8gdGhlIGNoaWxkIGZpZWxkDQogICAgICAgICAgZGVsKGNoKTsNCiAgICAgICAgfQ0K");
    sb.append("ICAgICAgfQ0KICAgIH0NCiAgfTsNCg0KICAvLyBkZWxldGUgdGhlIGdpdmVuIGtleSB3aXRoaW4gdGhl");
    sb.append("IHN1YnNjcmlwdGlvbg0KICB2YXIgZGVsX2tleSA9IGZ1bmN0aW9uIChzLCBrZXkpIHsNCiAgICBpZiAo");
    sb.append("QXJyYXkuaXNBcnJheShzKSkgeyAvLyBpZiB3ZSBoYXZlIGFuIGFycmF5IG9mIHN1YnNjcmlwdGlvbnMs");
    sb.append("IHRoZW4gc2ltcGx5IHJlcGVhdA0KICAgICAgdmFyIG4gPSBzLmxlbmd0aDsNCiAgICAgIGZvciAodmFy");
    sb.append("IGsgPSAwOyBrIDwgbjsgaysrKSB7DQogICAgICAgIGRlbF9rZXkoc1trXSwga2V5KTsgLy8gZm9yIGVh");
    sb.append("Y2ggZWxlbWVudA0KICAgICAgfQ0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChzKSA9PSAnb2JqZWN0Jykg");
    sb.append("eyAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWJjcmlwdGlvbiBjYWxsYmFjaw0KICAgICAgaWYgKGtl");
    sb.append("eSBpbiBzKSB7IC8vIGlmIHRoZSBrZXkgaXMgaW4gdGhlIHN1YnNjcmlwdGlvbiBjYWxsYmFjaw0KICAg");
    sb.append("ICAgICBkZWxldGUgc1trZXldOyAvLyBkZWxldGUgaXQNCiAgICAgIH0NCiAgICB9DQogIH07DQoNCiAg");
    sb.append("Ly8gbWVyZ2UgdGhlIGdpdmVuIGRlbHRhIGludG8gdGhlIHRyZWUgYW5kIGZpcmUgc3Vic2NyaXB0aW9u");
    sb.append("cyAocykNCiAgdmFyIG1lcmdlID0gZnVuY3Rpb24gKHRyZWUsIGRlbHRhLCBzKSB7DQogICAgZm9yICh2");
    sb.append("YXIga2V5IGluIGRlbHRhKSB7IC8vIGZvciBlYWNoIGJpdCBvZiBkYXRhIHdpdGhpbiB0aGUgdHJlZQ0K");
    sb.append("ICAgICAgdmFyIGVLZXkgPSAnIycgKyBrZXk7IC8vIGNvbXB1dGUgdGhlIHNlY3JldCBkYXRhIHBhdGgN");
    sb.append("CiAgICAgIHZhciBwcmlvciA9IHRyZWVba2V5XTsgLy8gZmluZCB0aGUgcHJpb3Igc3RhdGUgd2l0aGlu");
    sb.append("IHRoZSB0cmVlDQogICAgICB2YXIgbmV4dCA9IGRlbHRhW2tleV07IC8vIGJyaW5nIHRoZSBjaGFuZ2Ug");
    sb.append("cHJlc2VudCBmb3IgdGhlIGN1cnJlbnQga2V5DQogICAgICBpZiAobmV4dCA9PSBudWxsKSB7IC8vIHRo");
    sb.append("ZSBpdGVtIGlzIGdvaW5nIHBvb2YNCiAgICAgICAgLy8gdGhlIHByaW9yIHZhbHVlIGlzIGFuIGFycmF5");
    sb.append("LCBzbyB3ZSBtYXkgaGF2ZSBzb21lIHNwZWNpYWwgdGhpbmdzIGFzc29jaWF0ZSB3aXRoIGl0DQogICAg");
    sb.append("ICAgIGlmIChBcnJheS5pc0FycmF5KHByaW9yKSkgeyAvLyBVTlRFU1QNCiAgICAgICAgICBpZiAoZUtl");
    sb.append("eSBpbiB0cmVlKSB7DQogICAgICAgICAgICBkZWwoc3ViKHMsIGVLZXkpKTsNCiAgICAgICAgICB9DQog");
    sb.append("ICAgICAgICAgZGVsZXRlIHRyZWVbZUtleV07DQogICAgICAgIH0NCiAgICAgICAgZGVsKHN1YihzLCBr");
    sb.append("ZXkpKTsgLy8gaXNzdWUgYSBkZWxldGUgZm9yIGFsbCB0aGUgc3Vic2NyaXB0aW9ucyBmb3IgdGhlIGtp");
    sb.append("ZA0KICAgICAgICBkZWxldGUgdHJlZVtrZXldOyAvLyBkZWxldGUgdGhlIGRhdGEgaW4gdGhlIHRyZWUN");
    sb.append("CiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICh0eXBlb2YgKG5leHQpID09ICdvYmplY3QnICYmICFB");
    sb.append("cnJheS5pc0FycmF5KG5leHQpKSB7IC8vIGlmIHRoZSBkZWx0YSBpcyBhbiBvYmplY3QNCiAgICAgICAg");
    sb.append("ICB2YXIgYXJyID0gQXJyYXkuaXNBcnJheShwcmlvcikgfHwgJ0BvJyBpbiBuZXh0IHx8ICdAcycgaW4g");
    sb.append("bmV4dDsgLy8gZGV0ZWN0IGlmIHdlIG5lZWQgdG8gdXNlIGFycmF5IGxvZ2ljDQogICAgICAgICAgaWYg");
    sb.append("KGFycikgeyAvLyB3ZSBoYXZlIGRldGVjdGVkIGFuIGFycmF5DQogICAgICAgICAgICBpZiAoIShrZXkg");
    sb.append("aW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSB0cmVlIGhhcyBhbiBlbXB0eSBhcnJheQ0K");
    sb.append("ICAgICAgICAgICAgICB0cmVlW2tleV0gPSBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlm");
    sb.append("ICghKGVLZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSBzZWNyZXQgZGF0YSBleGlz");
    sb.append("dHMgYXMgd2VsbA0KICAgICAgICAgICAgICB0cmVlW2VLZXldID0ge307DQogICAgICAgICAgICAgIGlm");
    sb.append("ICgnQG8nIGluIG5leHQpIHsgLy8gaWYgd2UgaGF2ZSBhIGJ1bmNoIG9mIGtleXMsIHRoZW4gbGV0J3Mg");
    sb.append("bWFrZSBzdXJlIHRvIHByZXNlcnZlIHRoYXQgZm9yIG1ha2VfZGVsdGENCiAgICAgICAgICAgICAgICB0");
    sb.append("cmVlW2VLZXldWydAbyddID0gdHJ1ZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB0cmVl");
    sb.append("W2VLZXldLl9fa2V5ID0ga2V5OyAvLyBhbm5vdGF0ZSB0aGUgbmV3IGl0ZW0gd2l0aCB0aGUgZ2l2ZW4g");
    sb.append("a2V5DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgZUJhc2UgPSB0cmVlW2VLZXldOyAvLyBn");
    sb.append("ZXQgdGhlIHNlY3JldCAoYW5kIHJlYWwpIGRhdGEgZm9yIHRoZSBvYmplY3QgaW4gcXVlc3Rpb24NCiAg");
    sb.append("ICAgICAgICAgIHZhciBlU3ViID0gc3ViKHMsIGtleSk7IC8vIHNjb3BlIHRoZSBzdWJzY3JpcHRpb24g");
    sb.append("dG8gdGhlIGtleQ0KICAgICAgICAgICAgdmFyIG9yZGVyaW5nID0gbnVsbDsgLy8gZGV0ZWN0aW9uIG9m");
    sb.append("IGlmIHdlIGhhdmUgQG8gb3JkZXJpbmcgdG8gcmVvcmRlciB0aGUgdmFsdWVzDQogICAgICAgICAgICB2");
    sb.append("YXIgcmVzaXplID0gbnVsbDsgLy8gZGV0ZWN0aW9uIG9mIGFuIGFycmF5IHdpdGhvdXQgX19rZXkNCiAg");
    sb.append("ICAgICAgICAgIHZhciBkZWxheSA9IHt9OyAvLyB3ZSBkZWxheSBhbGwgZXZlbnRzIHN1Y2ggdGhhdCB0");
    sb.append("aGUgYXJyYXkgY2FuIGJlIGJ1aWx0IGZvciBpbmxpbmUgbWFrZV9kZWx0YSBjYWxscyB0byB3b3JrDQog");
    sb.append("ICAgICAgICAgICBmb3IgKHZhciBhS2V5IGluIG5leHQpIHsgLy8gZm9yIGVhY2ggZmllbGQgd2l0aGlu");
    sb.append("IHRoZSBkaWZmZXJlbmNlDQogICAgICAgICAgICAgIHZhciB2YWwgPSBuZXh0W2FLZXldOw0KICAgICAg");
    sb.append("ICAgICAgICBpZiAoYUtleSA9PSAnQG8nKSB7IC8vIHRoZSB2YWx1ZSBpcyBhIG5ldyBvcmRlcmluZyBv");
    sb.append("ZiB0aGUgYXJyYXkNCiAgICAgICAgICAgICAgICBvcmRlcmluZyA9IHZhbDsNCiAgICAgICAgICAgICAg");
    sb.append("fSBlbHNlIGlmIChhS2V5ID09ICdAcycpIHsgLy8gdGhlIHZhbHVlIGlzIGEgcmVzaXplIG9mIHRoZSBh");
    sb.append("cnJheQ0KICAgICAgICAgICAgICAgIHJlc2l6ZSA9IHZhbDsNCiAgICAgICAgICAgICAgfSBlbHNlIGlm");
    sb.append("ICh2YWwgPT0gbnVsbCkgeyAvLyBkZWxldGUgdGhlIGVsZW1lbnQNCiAgICAgICAgICAgICAgICBpZiAo");
    sb.append("YUtleSBpbiBlQmFzZSkgeyAvLyBpZiBpdCBleGlzdHMgd2l0aGluIHRoZSBzZWNyZXQga2V5DQogICAg");
    sb.append("ICAgICAgICAgICAgICBkZWxheVthS2V5XSA9IGZ1bmN0aW9uICh4KSB7DQogICAgICAgICAgICAgICAg");
    sb.append("ICAgIGRlbChzdWIoZVN1YiwgeCkpOyAvLyBpc3N1ZSBkZWxldGVzDQogICAgICAgICAgICAgICAgICAg");
    sb.append("IGRlbGV0ZSBlQmFzZVt4XTsgLy8gZGVsZXRlIHRoZSB2YWx1ZQ0KICAgICAgICAgICAgICAgICAgICBk");
    sb.append("ZWxfa2V5KGVTdWIsIHgpOyAvLyBkZWxldGUgdGhlIGtleXMgZnJvbSB0aGUgb2JqZWN0DQogICAgICAg");
    sb.append("ICAgICAgICAgICAgIGZpcmVfZGVsKGVTdWIsIHgpOw0KICAgICAgICAgICAgICAgICAgfTsNCiAgICAg");
    sb.append("ICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHdlIGhhdmUgZGF0YQ0KICAgICAg");
    sb.append("ICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRoZSBkYXRhIGRpZG4ndCBleGlzdCwg");
    sb.append("c28gZmlyZSBhbiBhZGRpdGlvbiB0byBleHRlbmQgdGhlIHN1YnNjcmlwdGlvbnMNCiAgICAgICAgICAg");
    sb.append("ICAgICAgIGZpcmVfYWRkKGVTdWIsIGFLZXkpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg");
    sb.append("ICAgICB2YXIgblZhbCA9IG5leHRbYUtleV07IC8vIGdldCB0aGUgbmV3IHZhbHVlDQogICAgICAgICAg");
    sb.append("ICAgICAgaWYgKHR5cGVvZiAoblZhbCkgPT0gJ29iamVjdCcpIHsgLy8gaWYgdGhlIG5ldyB2YWx1ZSBp");
    sb.append("cyBhbiBvYmplY3QNCiAgICAgICAgICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRo");
    sb.append("ZW4gbWFrZSBzdXJlIHRoZSBuZXcgaXRlbSBpcyB3aXRoaW4gdGhlIHNlY3JldCB0cmVlDQogICAgICAg");
    sb.append("ICAgICAgICAgICAgIGVCYXNlW2FLZXldID0ge307DQogICAgICAgICAgICAgICAgICAgIGVCYXNlW2FL");
    sb.append("ZXldLl9fa2V5ID0gYUtleTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIGRl");
    sb.append("bGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsNCiAgICAgICAgICAgICAgICAgICAgbWVyZ2UoZUJhc2Vb");
    sb.append("eF0sIG5leHRbeF0sIHN1YihlU3ViLCB4KSk7IC8vIHJlY3Vyc2U6IG1lcmdlIHRoZSBkaWZmZXJlbmNl");
    sb.append("IGludG8gdGhlIHNlY3JldCB0cmVlIGFuZCBwdWJsaXNoIHRvIGFsbCBlbGVtZW50IHN1YnNjcmlwdGlv");
    sb.append("bnMNCiAgICAgICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgeCksIGVCYXNlW3hdKTsNCiAgICAg");
    sb.append("ICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCBzZXQg");
    sb.append("dGhlIHZhbHVlIGludG8gdGhlIHRyZWUNCiAgICAgICAgICAgICAgICAgIGVCYXNlW2FLZXldID0gblZh");
    sb.append("bDsNCiAgICAgICAgICAgICAgICAgIGRlbGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsNCiAgICAgICAg");
    sb.append("ICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgeCksIGVCYXNlW3hdKTsNCiAgICAgICAgICAgICAgICAg");
    sb.append("IH07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIGFuZCB0ZWxsIGV2ZXJ5b25l");
    sb.append("IHRoZSBuZXcgdmFsdWUgZm9yIHRoaXMgDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAg");
    sb.append("ICAgICAgICAgIHZhciBiZWZvcmUgPSB0cmVlW2tleV07IC8vIHN0YXNoIGEgcG9pbnRlciB0byB0aGUg");
    sb.append("YXJyYXkNCiAgICAgICAgICAgIHZhciBkZWxheU9yZGVyID0gW107DQoNCiAgICAgICAgICAgIGlmIChv");
    sb.append("cmRlcmluZyAhPSBudWxsKSB7IC8vIGFuIG9yZGVyaW5nIGNoYW5nZSBpcyBoYXBwZW5pbmcNCiAgICAg");
    sb.append("ICAgICAgICAgdmFyIGFmdGVyID0gW107IC8vIHdlIHdpbGwgcmVidWlsZCB0aGUgYXJyYXkgaGVyZQ0K");
    sb.append("ICAgICAgICAgICAgICB2YXIgbXNnID0gW107IC8vIGFuZCByZWNvcmQgdGhlIGtleXMgaGVyZQ0KICAg");
    sb.append("ICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG9yZGVyaW5nLmxlbmd0aDsgaysrKSB7IC8vIGZv");
    sb.append("ciBlYWNoIG9yZGVyaW5nIGluc3RydWN0aW9uDQogICAgICAgICAgICAgICAgdmFyIGluc3RyID0gb3Jk");
    sb.append("ZXJpbmdba107DQogICAgICAgICAgICAgICAgdmFyIHR5cGVfaW5zdHIgPSB0eXBlb2YgKGluc3RyKTsN");
    sb.append("CiAgICAgICAgICAgICAgICBpZiAodHlwZV9pbnN0ciA9PSAic3RyaW5nIiB8fCB0eXBlX2luc3RyID09");
    sb.append("ICJudW1iZXIiKSB7IC8vIGlmIHRoZSBpbnN0cnVjdGlvbiByZWZlcnMgdG8gYW4gaXRlbQ0KICAgICAg");
    sb.append("ICAgICAgICAgICAgYWZ0ZXIucHVzaChlQmFzZVtpbnN0cl0pOyAvLyBwdXNoIHRoZSBpdGVtIGludG8g");
    sb.append("dGhlIG5ldyBhcnJheQ0KICAgICAgICAgICAgICAgICAgbXNnLnB1c2goIiIgKyBpbnN0cik7IC8vIHJl");
    sb.append("Y29yZCB0aGUga2V5IG9mIHRoZSBpdGVtDQogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3");
    sb.append("aXNlLCB0aGUgaW5zdHJ1Y3Rpb24gaXMgYSByYW5nZQ0KICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0");
    sb.append("ID0gaW5zdHJbMF07DQogICAgICAgICAgICAgICAgICB2YXIgZW5kID0gaW5zdHJbMV07DQogICAgICAg");
    sb.append("ICAgICAgICAgICBmb3IgKHZhciBqID0gc3RhcnQ7IGogPD0gZW5kOyBqKyspIHsgLy8gaXRlcmF0ZSBv");
    sb.append("dmVyIHRoZSByYW5nZSBhbmQgY29weQ0KICAgICAgICAgICAgICAgICAgICBhZnRlci5wdXNoKGJlZm9y");
    sb.append("ZVtqXSk7IC8vIHRoZSBpdGVtcyBmcm9tIHRoZSBwcmV2aW91cyBjb3B5DQogICAgICAgICAgICAgICAg");
    sb.append("ICAgIG1zZy5wdXNoKGJlZm9yZVtqXS5fX2tleSk7IC8vIGFuZCBhbm5vdGF0ZSB0aGUga2V5cw0KICAg");
    sb.append("ICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAg");
    sb.append("ICAgICAgICBkZWxheU9yZGVyLnB1c2goZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGZpcmUo");
    sb.append("c3ViKGVTdWIsICJ+IiksIG1zZyk7IC8vIHRlbGwgc3Vic2NyaXB0aW9ucyBhYm91dCB0aGUgbmV3IG9y");
    sb.append("ZGVyaW5nDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB0cmVlW2tleV0gPSBhZnRlcjsN");
    sb.append("CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzaXplICE9IG51bGwpIHsgLy8gYWx0ZXJuYXRpdmVseSwg");
    sb.append("YW4gYXJyYXkgd2l0aG91dCBrZXlzIGlzIGJlaW5nIHJlc2l6ZWQNCiAgICAgICAgICAgICAgdmFyIGFm");
    sb.append("dGVyID0gW107DQogICAgICAgICAgICAgIHZhciBtc2cgPSBbXTsNCiAgICAgICAgICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCByZXNpemU7IGsrKykgeyAvLyB3ZSByZWJ1aWxkIHRoZSBhcnJheQ0KICAgICAg");
    sb.append("ICAgICAgICAgIGFmdGVyW2tdID0gYmVmb3JlW2tdOw0KICAgICAgICAgICAgICAgIG1zZy5wdXNoKCcn");
    sb.append("ICsgayk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgZGVsYXlPcmRlci5wdXNoKGZ1bmN0");
    sb.append("aW9uICgpIHsNCiAgICAgICAgICAgICAgICBmaXJlKHN1YihlU3ViLCAifiIpLCBtc2cpOyAvLyB0ZWxs");
    sb.append("IHN1YnNjcmlwdGlvbnMgYWJvdXQgdGhlIG5ldyBvcmRlcmluZw0KICAgICAgICAgICAgICB9KTsNCiAg");
    sb.append("ICAgICAgICAgICAgdHJlZVtrZXldID0gYWZ0ZXI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBm");
    sb.append("b3IgKGFLZXkgaW4gZGVsYXkpIHsNCiAgICAgICAgICAgICAgZGVsYXlbYUtleV0oYUtleSk7DQogICAg");
    sb.append("ICAgICAgICB9DQogICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGRlbGF5T3JkZXI7IGsrKykg");
    sb.append("ew0KICAgICAgICAgICAgICBkZWxheU9yZGVyW2tdKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAg");
    sb.append("ICBmaXJlKGVTdWIsIHRyZWVba2V5XSk7IC8vIHRlbGwgZXZlcnlvbmUgYWJvdXQgdGhlIG5ldyB2YWx1");
    sb.append("ZQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoIShrZXkgaW4gdHJlZSkgfHwgdHlw");
    sb.append("ZW9mICh0cmVlW2tleV0pICE9ICdvYmplY3QnKSB7DQogICAgICAgICAgICAgIHRyZWVba2V5XSA9IHt9");
    sb.append("Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGUgPSBzdWIocywga2V5KTsNCiAgICAgICAg");
    sb.append("ICAgIG1lcmdlKHRyZWVba2V5XSwgbmV4dCwgZSk7DQogICAgICAgICAgICBmaXJlKGUsIHRyZWVba2V5");
    sb.append("XSk7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgeyAvLyBub3QgYW4gb2JqZWN0LCBzbyBpdCBp");
    sb.append("cyBhIHZhbHVlDQogICAgICAgICAgdHJlZVtrZXldID0gbmV4dDsgLy8gc3Rhc2ggdGhlIG5ldyB2YWx1");
    sb.append("ZQ0KICAgICAgICAgIGZpcmUoc3ViKHMsIGtleSksIG5leHQpOyAvLyBhbmQgdGVsbCBldmVyeW9uZSBh");
    sb.append("Ym91dCBpdA0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIGZpcmUocywgdHJlZSk7DQogIH07");
    sb.append("DQoNCiAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoZGVsdGEpIHsNCiAgICB2YXIgZmxhdCA9IFtdOyAv");
    sb.append("LyBmbGF0dGVuIHRoZSBzdWJjcmlwdGlvbnMgb2JqZWN0cw0KICAgIGZvciAodmFyIGsgaW4gYWxsX3N1");
    sb.append("YnNjcmlwdGlvbnMpIHsNCiAgICAgIGZsYXQucHVzaChhbGxfc3Vic2NyaXB0aW9uc1trXSk7DQogICAg");
    sb.append("fQ0KICAgIG1lcmdlKHJvb3QsIGRlbHRhLCBmbGF0KTsgLy8gZXhlY3V0ZSB0aGUgbWVyZ2UgYW5kIGZp");
    sb.append("cmUgZXZlbnRzDQogIH07DQoNCiAgLy8gZml4IHRoZSBjYWxsYmFjayBzdHJ1Y3R1cmUgZnJvbSB0aGUg");
    sb.append("dXNlcidzIGhhcHB5IGxhbmQgdG8gdGhlIHJpZ29yIG9mIHRoZSBmb3JtYXQgbmVlZGVkDQogIHZhciB0");
    sb.append("cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHN1Yikgew0KICAg");
    sb.append("IGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrKSkgeyAvLyBpZiB0aGUgY2FsbGJhY2sgaXMgYW4gYXJy");
    sb.append("YXksIHRoZW4gZmxhdHRlbiB0aGUgYXJyYXkgaW50byB0aGUgbmV3IG9iamVjdA0KICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBjYWxsYmFjay5sZW5ndGg7IGsrKykgew0KICAgICAgICB0cmFuc2Zvcm1fY2Fs");
    sb.append("bGJhY2tfaW50b19zdWIoY2FsbGJhY2tba10sIHN1Yik7DQogICAgICB9DQogICAgfSBlbHNlIGlmICh0");
    sb.append("eXBlb2YgKGNhbGxiYWNrKSA9PSAnb2JqZWN0JykgeyAvLyBvaCwgdGhlIGNhbGxiYWNrIGlzIGFuIG9i");
    sb.append("amVjdA0KICAgICAgZm9yICh2YXIga2V5IGluIGNhbGxiYWNrKSB7IC8vIGl0ZXJhdGUgb3ZlciBlYWNo");
    sb.append("IGtleQ0KICAgICAgICBpZiAoa2V5ID09ICdAZScpIHsgLy8gZm9yY2UgdGhlIGZ1bmN0aW9ucyB0byBt");
    sb.append("ZXJnZSB0b2dldGhlcg0KICAgICAgICAgIHRyYW5zZm9ybV9jYWxsYmFja19pbnRvX3N1YihjYWxsYmFj");
    sb.append("a1trZXldLCBzdWIpOw0KICAgICAgICB9IGVsc2UgeyAvLyBub3JtYWwgZmxvdw0KICAgICAgICAgIGlm");
    sb.append("ICghKGtleSBpbiBzdWIpKSB7IC8vIGRpdmUgaW50byB0aGUgb2JqZWN0IGFuZCBtYWtlIHN1cmUgdGhl");
    sb.append("IHN1YnNjcmlwdGlvbiBoYXMgdGhlIGZpZWxkDQogICAgICAgICAgICBzdWJba2V5XSA9IHt9Ow0KICAg");
    sb.append("ICAgICAgIH0NCiAgICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIoY2FsbGJhY2tba2V5");
    sb.append("XSwgc3ViW2tleV0pOyAvLyByZWN1cnNlIGFuZCBwYWlyIHRoZSBldmVudHMgdG8gdGhlIG5ldyBzdWJz");
    sb.append("Y3JpcHRpb24NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxsYmFj");
    sb.append("aykgPT0gJ2Z1bmN0aW9uJykgeyAvLyBpdCdzIGEgZnVuY3Rpb24NCiAgICAgIGlmICghKCdAZScgaW4g");
    sb.append("c3ViKSkgeyAvLyBsZXQncyBlbnN1cmUgdGhlcmUgaXMgYW4gZXZlbnQgbGlzdA0KICAgICAgICBzdWJb");
    sb.append("J0BlJ10gPSBbY2FsbGJhY2tdOw0KICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCBqdXN0IGFkZCBp");
    sb.append("dA0KICAgICAgICBzdWJbJ0BlJ10ucHVzaChjYWxsYmFjayk7DQogICAgICB9DQogICAgfQ0KICB9DQoN");
    sb.append("CiAgLy8gY29udmVydCB0aGUgdHJlZSB0byBhIGRlbHRhOyB0aGlzIHRyZWUgaXMgYXNzdW1lZCB0byBo");
    sb.append("YXZlIGJlZW4gbWVyZ2VkIGFscmVhZHkNCiAgdmFyIG1ha2VfZGVsdGEgPSBmdW5jdGlvbiAoc3QpIHsN");
    sb.append("CiAgICB2YXIgZGVsdGEgPSB7fTsgLy8gdGhlIGRlbHRhIHRvIGNvbnN0cnVjdA0KICAgIGZvciAodmFy");
    sb.append("IGsgaW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhpbiB0aGUgb2JqZWN0DQogICAgICBpZiAoa1sw");
    sb.append("XSA9PSAnIycgfHwgayA9PSAiQG8iIHx8IGsgPT0gIl9fa2V5IikgY29udGludWU7IC8vIHNraXAgdGhl");
    sb.append("c2UNCiAgICAgIHZhciB2ID0gc3Rba107DQogICAgICBpZiAoKCcjJyArIGspIGluIHN0KSB7IC8vIHRo");
    sb.append("ZSByZXN1bHQgaXMgYW4gYXJyYXkNCiAgICAgICAgdmFyIGQgPSB7fTsNCiAgICAgICAgaWYgKCdAbycg");
    sb.append("aW4gc3RbJyMnICsga10pIHsgLy8gYW5kIHdlIGhhdmUgYSBzcGVjaWZpYyBvcmRlcmluZyB0byBtZW1v");
    sb.append("aXplDQogICAgICAgICAgdmFyIG8gPSBbXTsNCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHYu");
    sb.append("bGVuZ3RoOyBqKyspIHsgLy8gY29weSB0aGUgZWxlbWVudHMgZnJvbSB0aGUgYXJyYXkNCiAgICAgICAg");
    sb.append("ICAgIHZhciB2aiA9IHZbal07DQogICAgICAgICAgICBkW3ZqLl9fa2V5XSA9IG1ha2VfZGVsdGEodmop");
    sb.append("OyAvLyB1c2luZyB0aGUgX19rZXkgZW1iZWRkZWQgaW4gdGhlIG9iamVjdA0KICAgICAgICAgICAgby5w");
    sb.append("dXNoKHZbal0uX19rZXkpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBkWydAbyddID0gbzsNCiAgICAg");
    sb.append("ICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlOyByZWNvcmQgdGhlIHNpemUgYXMgd2UgcmVjdXJzZQ0KICAg");
    sb.append("ICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgZFsn");
    sb.append("JyArIGpdID0gbWFrZV9kZWx0YSh2W2pdKTsNCiAgICAgICAgICB9DQogICAgICAgICAgZFsnQHMnXSA9");
    sb.append("IHYubGVuZ3RoOw0KICAgICAgICB9DQogICAgICAgIGRlbHRhW2tdID0gZDsNCiAgICAgIH0gZWxzZSBp");
    sb.append("ZiAodHlwZW9mICh2KSA9PSAnb2JqZWN0JykgeyAvLyBpdCdzIGp1c3QgYW4gb2JqZWN0LCBzbyByZWN1");
    sb.append("cnNlIGRpcmVjdGx5DQogICAgICAgIGRlbHRhW2tdID0gbWFrZV9kZWx0YSh2KTsNCiAgICAgIH0gZWxz");
    sb.append("ZSB7IC8vIGZpbmFsbHksIGl0IGlzIGEgdmFsdWUgc28ganVzdCBzZXQgaXQNCiAgICAgICAgZGVsdGFb");
    sb.append("a10gPSB2Ow0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gZGVsdGE7DQogIH07DQoNCiAgLy8gYHN1");
    sb.append("YnNjcmliZWAgdGhlIGdpdmVuIHN0cnVjdHVyYWwgY2FsbGJhY2sNCiAgdGhpcy5zdWJzY3JpYmUgPSBm");
    sb.append("dW5jdGlvbiAoY2FsbGJhY2spIHsNCiAgICB2YXIgc3ViID0ge307DQogICAgdHJhbnNmb3JtX2NhbGxi");
    sb.append("YWNrX2ludG9fc3ViKGNhbGxiYWNrLCBzdWIpOyAgLy8gdHJhbnNmb3JtIHRoZSBjYWxsYmFjayBpbnRv");
    sb.append("IGEgc2FmZSBjYWxsYmFjaw0KICAgIHZhciBkZWx0YSA9IG1ha2VfZGVsdGEocm9vdCk7DQogICAgbWVy");
    sb.append("Z2Uoe30sIGRlbHRhLCBbc3ViXSk7IC8vIGV4ZWN1dGUgdGhlIGNhbGxiYWNrIG5vdyBvbiBhIGNhbGxi");
    sb.append("YWNrIG9mIGFsbCBkYXRhIHRvIGZpcmUgZXZlbnRzIGFuZCBmaWxsIHRoZSBzdWJzY3JpcHRpb24gb2Jq");
    sb.append("ZWN0DQogICAgdmFyIFMgPSAiIiArIGlkKys7IC8vIGNyZWF0ZSBhbiBpZCBmb3IgdGhlIHN1YnNjcmlw");
    sb.append("dGlvbg0KICAgIGFsbF9zdWJzY3JpcHRpb25zW1NdID0gc3ViOyAvLyByZWNvcmQgdGhlIHN1YnNjcmlw");
    sb.append("dGlvbg0KICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IC8vIHJldHVybiBhIG1ldGhvZCB0byB1bnN1YnNj");
    sb.append("cmliZQ0KICAgICAgZGVsZXRlIGFsbF9zdWJzY3JpcHRpb25zW1NdOw0KICAgIH07DQogIH07DQp9DQoN");
    sb.append("CnZhciBSeEhUTUwgPSAoZnVuY3Rpb24gKCkgew0KICB2YXIgc2VsZiA9IHt9Ow0KDQogIHZhciB0ZW1w");
    sb.append("bGF0ZXMgPSB7fTsNCiAgdmFyIHJvdXRlciA9IHt9Ow0KICB2YXIgY29ubmVjdGlvbiA9IG5ldyBBZGFt");
    sb.append("YS5Db25uZWN0aW9uKEFkYW1hLlByb2R1Y3Rpb24pOw0KICB2YXIgY29ubmVjdGlvbnMgPSB7fTsNCg0K");
    sb.append("ICBjb25uZWN0aW9uLnN0YXJ0KCk7DQoNCiAgY29uc29sZS5sb2cod2luZG93LmxvY2F0aW9uLmhvc3Ru");
    sb.append("YW1lKTsNCiAgY29uc29sZS5sb2cod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTsNCg0KICB2YXIgcm9v");
    sb.append("dFJlcGxhY2UgPSAiLyI7DQogIHZhciBmaXhQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHsgcmV0dXJuIHBh");
    sb.append("dGg7IH07DQogIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUuZW5kc1dpdGgoIi5hZGFtYS1wbGF0");
    sb.append("Zm9ybS5jb20iKSAmJiAhd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmVuZHNXaXRoKCJpZGUuYWRhbWEt");
    sb.append("cGxhdGZvcm0uY29tIikpIHsNCiAgICB2YXIgcGFydHMgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUu");
    sb.append("c3BsaXQoIi8iKTsNCiAgICByb290UmVwbGFjZSA9IFtwYXJ0c1swXSwgcGFydHNbMV0sIHBhcnRzWzJd");
    sb.append("LCAiIl0uam9pbigiLyIpOw0KICAgIHZhciBvZmZzZXQgPSBwYXJ0c1swXS5sZW5ndGggKyBwYXJ0c1sx");
    sb.append("XS5sZW5ndGggKyBwYXJ0c1syXS5sZW5ndGggKyAyOw0KICAgIGZpeFBhdGggPSBmdW5jdGlvbiAocGF0");
    sb.append("aCkgeyByZXR1cm4gcGF0aC5zdWJzdHJpbmcob2Zmc2V0KTsgfQ0KICB9DQoNCiAgdmFyIGZpeEhyZWYg");
    sb.append("PSBmdW5jdGlvbiAoaHJlZikgew0KICAgIGlmIChocmVmLnN0YXJ0c1dpdGgoJy8nKSkgew0KICAgICAg");
    sb.append("cmV0dXJuIHJvb3RSZXBsYWNlICsgaHJlZi5zdWJzdHJpbmcoMSk7DQogICAgfQ0KICAgIHJldHVybiBo");
    sb.append("cmVmOw0KICB9DQoNCg0KICB2YXIgZ2V0X2Nvbm5lY3Rpb25fb2JqID0gZnVuY3Rpb24gKG5hbWUpIHsN");
    sb.append("CiAgICBpZiAobmFtZSBpbiBjb25uZWN0aW9ucykgew0KICAgICAgcmV0dXJuIGNvbm5lY3Rpb25zW25h");
    sb.append("bWVdOw0KICAgIH0gZWxzZSB7DQogICAgICB2YXIgb2JqID0gew0KICAgICAgICBuYW1lOiBuYW1lLA0K");
    sb.append("ICAgICAgICBwdHI6IG51bGwsDQogICAgICAgIHRyZWU6IG5ldyBBZGFtYVRyZWVTaW1wbGUoKSwNCiAg");
    sb.append("ICAgICAgb3V0c3RhbmRpbmc6IHt9LA0KICAgICAgICBkZWNpc2lvbnM6IHt9LA0KICAgICAgICBpZDog");
    sb.append("MA0KICAgICAgfTsNCiAgICAgIG9iai5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoY2hhbm5lbCwgY2FsbGJh");
    sb.append("Y2spIHsNCiAgICAgICAgdmFyIHMgPSBjaGFubmVsICsgInwiICsgdGhpcy5pZCsrOw0KICAgICAgICB0");
    sb.append("aGlzLmRlY2lzaW9uc1tzXSA9IGNhbGxiYWNrOw0KICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgew0K");
    sb.append("ICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlY2lzaW9uc1tzXTsNCiAgICAgICAgfS5iaW5kKHRoaXMpOw0K");
    sb.append("ICAgICAgfS5iaW5kKG9iaik7DQogICAgICBvYmoub25kZWNpZGUgPSBmdW5jdGlvbiAob3V0c3RhbmRp");
    sb.append("bmcpIHsNCiAgICAgICAgZm9yICh2YXIgY2ggaW4gb2JqLm91dHN0YW5kaW5nKSB7DQogICAgICAgICAg");
    sb.append("b2JqLm91dHN0YW5kaW5nW2NoXSA9IHsgb3B0aW9uczogW10gfTsNCiAgICAgICAgfQ0KICAgICAgICB2");
    sb.append("YXIgbiA9IG91dHN0YW5kaW5nLmxlbmd0aDsNCiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBr");
    sb.append("KyspIHsNCiAgICAgICAgICB2YXIgbyA9IG91dHN0YW5kaW5nW2tdOw0KICAgICAgICAgIG9iai5vdXRz");
    sb.append("dGFuZGluZ1tvLmNoYW5uZWxdID0gbzsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBjaCBpbiBv");
    sb.append("Ymoub3V0c3RhbmRpbmcpIHsNCiAgICAgICAgICBmb3IgKHZhciBzdWIgaW4gb2JqLmRlY2lzaW9ucykg");
    sb.append("ew0KICAgICAgICAgICAgaWYgKHN1Yi5zdGFydHNXaXRoKGNoICsgInwiKSkgew0KICAgICAgICAgICAg");
    sb.append("ICBvYmouZGVjaXNpb25zW3N1Yl0oKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAg");
    sb.append("IH0NCiAgICAgIH07DQogICAgICBjb25uZWN0aW9uc1tuYW1lXSA9IG9iajsNCiAgICAgIHJldHVybiBv");
    sb.append("Ymo7DQogICAgfQ0KICB9Ow0KDQogIHNlbGYubWFrZSA9IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4g");
    sb.append("bmV3IEFkYW1hVHJlZVNpbXBsZSgpOw0KICB9Ow0KDQogIC8vIEhFTFBFUiB8IHN1YnNjcmliZSB0aGUg");
    sb.append("Z2l2ZW4gJ3N1YicgdG8gY2hhbmdlcyB3aXRoaW4gc3RhdGUgZm9yIHRoZSBnaXZlbiBmaWVsZCBuYW1l");
    sb.append("ZCBuYW1lDQogIHZhciBzdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIHN1Yikgew0KICAg");
    sb.append("IHZhciBzcyA9IHNlbGYucEkoc3RhdGUsIG5hbWUpOw0KICAgIHZhciBzID0gc3Nbc3MuY3VycmVudF07");
    sb.append("DQogICAgaWYgKCdAZScgaW4gcy5kZWx0YSkgew0KICAgICAgcy5kZWx0YVsnQGUnXS5wdXNoKHN1Yik7");
    sb.append("DQogICAgfSBlbHNlIHsNCiAgICAgIHMuZGVsdGFbJ0BlJ10gPSBbc3ViXTsNCiAgICB9DQogIH07DQoN");
    sb.append("CiAgLy8gSEVMUEVSIHwgY3JlYXRlIGZyZXNoIHN0YXRlDQogIHZhciBmcmVzaCA9IGZ1bmN0aW9uICh3");
    sb.append("aGVyZSkgew0KICAgIHJldHVybiB7DQogICAgICB0cmVlOiBuZXcgQWRhbWFUcmVlU2ltcGxlKCksDQog");
    sb.append("ICAgICBkZWx0YToge30sDQogICAgICBwYXJlbnQ6IG51bGwsDQogICAgICBwYXRoOiBudWxsLA0KICAg");
    sb.append("ICAgd2hlcmU6IHdoZXJlDQogICAgfTsNCiAgfTsNCg0KICAvLyBIRUxQRVIgfCBjcmVhdGUgYSBuZXcg");
    sb.append("ZGVsdGEgY29weSBmcm9tIHRoZSBnaXZlbiBzcGVjaWZpYyBzdGF0ZSAoaS5lLiBlaXRoZXIgZGF0YSBv");
    sb.append("ciB2aWV3KQ0KICB2YXIgbmV3X2RlbHRhX2NvcHkgPSBmdW5jdGlvbiAoc3MpIHsNCiAgICBpZiAoc3Mg");
    sb.append("PT0gbnVsbCkgew0KICAgICAgcmV0dXJuIG51bGw7DQogICAgfQ0KICAgIHZhciBwYXJlbnQgPSBudWxs");
    sb.append("Ow0KICAgIGlmIChzcy5wYXJlbnQgIT0gbnVsbCkgew0KICAgICAgcGFyZW50ID0gbmV3X2RlbHRhX2Nv");
    sb.append("cHkoc3MucGFyZW50KTsNCiAgICB9DQogICAgdmFyIG5ld19kZWx0YSA9IHt9Ow0KICAgIGlmIChwYXJl");
    sb.append("bnQgIT0gbnVsbCkgew0KICAgICAgcGFyZW50LmRlbHRhW3NzLnBhdGhdID0gbmV3X2RlbHRhOw0KICAg");
    sb.append("IH0NCiAgICByZXR1cm4geyB0cmVlOiBzcy50cmVlLCBwYXJlbnQ6IHBhcmVudCwgZGVsdGE6IG5ld19k");
    sb.append("ZWx0YSwgcGF0aDogc3MucGF0aCB9Ow0KICB9Ow0KDQogIC8vIEhFTFBFUiB8IGNvbnN0cnVjdCBhIHBh");
    sb.append("dGggdG8NCiAgdmFyIHBhdGhfdG8gPSBmdW5jdGlvbiAoc3MsIG9iaikgew0KICAgIGlmIChzcy5wYXJl");
    sb.append("bnQgIT0gbnVsbCkgew0KICAgICAgdmFyIHBhcmVudCA9IHBhdGhfdG8oc3MucGFyZW50LCB7fSk7DQog");
    sb.append("ICAgICBwYXJlbnRbc3MucGF0aF0gPSBvYmo7DQogICAgICByZXR1cm4gcGFyZW50Ow0KICAgIH0gZWxz");
    sb.append("ZSB7DQogICAgICByZXR1cm4gb2JqOw0KICAgIH0NCiAgfTsNCg0KICAvLyBIRUxQRVIgfCBnZXQgdGhl");
    sb.append("IHJvb3Qgb2YgdGhlIHNwZWNpZmljIHN0YXRlIChpLmUuIGVpdGhlciB0aGUgZGF0YSdzIHJvb3Qgb3Ig");
    sb.append("dGhlIHZpZXcncyByb290KQ0KICB2YXIgcm9vdF9vZiA9IGZ1bmN0aW9uIChzcykgew0KICAgIHZhciB4");
    sb.append("ID0gc3M7DQogICAgd2hpbGUgKHgucGFyZW50ICE9IG51bGwpIHsNCiAgICAgIHggPSB4LnBhcmVudDsN");
    sb.append("CiAgICB9DQogICAgcmV0dXJuIHg7DQogIH0NCg0KICAvLyBIRUxQRVIgfCByZW1vdmUgYWxsIHRoZSBj");
    sb.append("aGlsZHJlbiBmcm9tIHRoZSBnaXZlbiBET00gbm9kZQ0KICB2YXIgbnVrZSA9IGZ1bmN0aW9uIChwYXJl");
    sb.append("bnQpIHsNCiAgICB2YXIgbGFzdCA9IHBhcmVudC5sYXN0Q2hpbGQ7DQogICAgd2hpbGUgKGxhc3QpIHsN");
    sb.append("CiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChsYXN0KTsNCiAgICAgIGxhc3QgPSBwYXJlbnQubGFzdENo");
    sb.append("aWxkOw0KICAgIH0NCiAgfTsNCg0KICAvLyBIRUxQRVI6IGRlYm91bmNlIHRoZSBnaXZlbiBmdW5jdGlv");
    sb.append("bmFsIHdoZW4gcmFwaWQgZnVuY3Rpb24gc3ByZWFkIGlzIGV4cGVjdGVkDQogIHZhciBkZWJvdW5jZSA9");
    sb.append("IGZ1bmN0aW9uIChtcywgZm9vKSB7DQogICAgdmFyIHN0YXR1cyA9IHsgaW5mbGlnaHQ6IGZhbHNlLCB0");
    sb.append("aW1lb3V0OiBudWxsIH07DQogICAgc3RhdHVzLmluZmxpZ2h0ID0gZmFsc2U7DQogICAgcmV0dXJuIGZ1");
    sb.append("bmN0aW9uICgpIHsNCiAgICAgIGlmICghc3RhdHVzLmluZmxpZ2h0KSB7DQogICAgICAgIHN0YXR1cy5p");
    sb.append("bmZsaWdodCA9IHRydWU7DQogICAgICAgIHN0YXR1cy50aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQo");
    sb.append("ZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHN0YXR1cy5pbmZsaWdodCA9IGZhbHNlOw0KICAgICAgICAg");
    sb.append("IHN0YXR1cy50aW1lb3V0ID0gbnVsbDsNCiAgICAgICAgICBmb28oKTsNCiAgICAgICAgfSwgbXMgLyog");
    sb.append("bXMgKi8pOyAvLyBkZWJvdW5jZSB0aGUgcGFyYW1ldGVycw0KICAgICAgfQ0KICAgIH07DQogIH07DQoN");
    sb.append("CiAgLy8gSEVMUEVSIHwgcHJlcGFyZSBhIGZyZWUgdW5zdWJzY3JpYmUgb2JqZWN0DQogIHZhciBtYWtl");
    sb.append("X3Vuc3ViID0gZnVuY3Rpb24gKCkgew0KICAgIHJldHVybiB7IF9fZGF0YTogZnVuY3Rpb24gKCkgeyB9");
    sb.append("LCBfX3ZpZXc6IGZ1bmN0aW9uICgpIHsgfSB9Ow0KICB9Ow0KDQogIC8vIEhFTFBFUiB8IGF1Z21lbnQg");
    sb.append("YW4gZXhpc3Rpbmcgb2JqZWN0IHdpdGggdW5zdWJzY3JpYmUgZGF0YQ0KICB2YXIgYWRkX3Vuc3ViID0g");
    sb.append("ZnVuY3Rpb24gKG9iaikgew0KICAgIG9iai5fX2RhdGEgPSBmdW5jdGlvbiAoKSB7IH07DQogICAgb2Jq");
    sb.append("Ll9fdmlldyA9IGZ1bmN0aW9uICgpIHsgfTsNCiAgfQ0KDQogIC8vIEhFTFBFUiB8IGZpcmUgdGhlIHVu");
    sb.append("c3Vic2NyaWJlIGNhbGxzIHdpdGhpbiBhbiBvYmplY3QNCiAgdmFyIGZpcmVfdW5zdWIgPSBmdW5jdGlv");
    sb.append("biAodW5zdWIpIHsNCiAgICB1bnN1Yi5fX2RhdGEoKTsNCiAgICB1bnN1Yi5fX3ZpZXcoKTsNCiAgfQ0K");
    sb.append("DQogIC8vIEhFTFBFUiB8IHN1YnNjcmliZSB0byBzdGF0ZSBhbmQgcG9wdWxhdGUgdW5zdWJzY3JpYmUg");
    sb.append("b2JqZWN0DQogIHZhciBzdWJzY3JpYmVfc3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUsIHVuc3ViKSB7DQog");
    sb.append("ICAgaWYgKHN0YXRlLmRhdGEgIT0gbnVsbCkgew0KICAgICAgdW5zdWIuX19kYXRhID0gc3RhdGUuZGF0");
    sb.append("YS50cmVlLnN1YnNjcmliZShyb290X29mKHN0YXRlLmRhdGEpLmRlbHRhKTsNCiAgICB9IGVsc2Ugew0K");
    sb.append("ICAgICAgdW5zdWIuX19kYXRhID0gZnVuY3Rpb24gKCkgeyB9Ow0KICAgIH0NCiAgICBpZiAoc3RhdGUu");
    sb.append("dmlldyAhPSBudWxsKSB7DQogICAgICB1bnN1Yi5fX3ZpZXcgPSBzdGF0ZS52aWV3LnRyZWUuc3Vic2Ny");
    sb.append("aWJlKHJvb3Rfb2Yoc3RhdGUudmlldykuZGVsdGEpOw0KICAgIH0gZWxzZSB7DQogICAgICB1bnN1Yi5f");
    sb.append("X3ZpZXcgPSBmdW5jdGlvbiAoKSB7IH07DQogICAgfQ0KICB9Ow0KDQogIHZhciBzdWJzY3JpYmVfdmll");
    sb.append("dyA9IGZ1bmN0aW9uIChzdGF0ZSwgdW5zdWIpIHsNCiAgICBpZiAoc3RhdGUudmlldyAhPSBudWxsKSB7");
    sb.append("DQogICAgICB1bnN1Yi5fX3ZpZXcgPSBzdGF0ZS52aWV3LnRyZWUuc3Vic2NyaWJlKHJvb3Rfb2Yoc3Rh");
    sb.append("dGUudmlldykuZGVsdGEpOw0KICAgIH0gZWxzZSB7DQogICAgICB1bnN1Yi5fX3ZpZXcgPSBmdW5jdGlv");
    sb.append("biAoKSB7IH07DQogICAgfQ0KICB9Ow0KDQogIC8vIFJVTlRJTUUgfCBTd2l0Y2ggdG8gdGhlIHZpZXcg");
    sb.append("b2JqZWN0DQogIHNlbGYucFYgPSBmdW5jdGlvbiAoc3RhdGUpIHsNCiAgICByZXR1cm4geyBzZXJ2aWNl");
    sb.append("OiBzdGF0ZS5zZXJ2aWNlLCBkYXRhOiBzdGF0ZS5kYXRhLCB2aWV3OiBzdGF0ZS52aWV3LCBjdXJyZW50");
    sb.append("OiAndmlldycgfTsNCiAgfTsNCg0KICAvLyBSVU5USU1FIHwgU3dpdGNoIHRvIHRoZSBkYXRhIG9iamVj");
    sb.append("dA0KICBzZWxmLnBEID0gZnVuY3Rpb24gKHN0YXRlKSB7DQogICAgcmV0dXJuIHsgc2VydmljZTogc3Rh");
    sb.append("dGUuc2VydmljZSwgZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogJ2Rh");
    sb.append("dGEnIH07DQogIH07DQoNCiAgLy8gUlVOVElNRSB8IFN3aXRjaCB0byB0aGUgcm9vdCBvYmplY3QgLyAo");
    sb.append("Um9vdCkNCiAgc2VsZi5wUiA9IGZ1bmN0aW9uIChzdGF0ZSkgew0KICAgIHZhciBuZXh0ID0geyBzZXJ2");
    sb.append("aWNlOiBzdGF0ZS5zZXJ2aWNlLCBkYXRhOiBzdGF0ZS5kYXRhLCB2aWV3OiBzdGF0ZS52aWV3LCBjdXJy");
    sb.append("ZW50OiBzdGF0ZS5jdXJyZW50IH07DQogICAgdmFyIHByaW9yID0gbmV4dFtzdGF0ZS5jdXJyZW50XTsN");
    sb.append("CiAgICB3aGlsZSAocHJpb3IucGFyZW50ICE9IG51bGwpIHsNCiAgICAgIGlmIChwcmlvci5wYXJlbnQg");
    sb.append("PT0gbnVsbCkgew0KICAgICAgICBuZXh0W3N0YXRlLmN1cnJlbnRdDQogICAgICAgIHJldHVybiBwcmlv");
    sb.append("cjsNCiAgICAgIH0NCiAgICAgIHByaW9yID0gcHJpb3IucGFyZW50Ow0KICAgIH0NCiAgICBuZXh0W3N0");
    sb.append("YXRlLmN1cnJlbnRdID0gcHJpb3I7DQogICAgcmV0dXJuIG5leHQ7DQogIH07DQoNCiAgLy8gUlVOVElN");
    sb.append("RSB8IC4uLyAoVXApDQogIHNlbGYucFUgPSBmdW5jdGlvbiAoc3RhdGUpIHsNCiAgICB2YXIgbmV4dCA9");
    sb.append("IHsgc2VydmljZTogc3RhdGUuc2VydmljZSwgZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmll");
    sb.append("dywgY3VycmVudDogc3RhdGUuY3VycmVudCB9Ow0KICAgIHZhciBwcmlvciA9IG5leHRbc3RhdGUuY3Vy");
    sb.append("cmVudF07DQogICAgaWYgKHByaW9yLnBhcmVudCAhPSBudWxsKSB7DQogICAgICBuZXh0W3N0YXRlLmN1");
    sb.append("cnJlbnRdID0gcHJpb3I7DQogICAgfQ0KICAgIHJldHVybiBuZXh0Ow0KICB9Ow0KDQogIC8vIFJVTlRJ");
    sb.append("TUUgfCBkaXZlIG9uZSBsZXZlbCBJbnRvIHBhdGgxL3BhdGgyLy4uLi4vcGF0aE4NCiAgc2VsZi5wSSA9");
    sb.append("IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSkgew0KICAgIHZhciBwcmlvciA9IHN0YXRlW3N0YXRlLmN1cnJl");
    sb.append("bnRdOw0KICAgIGlmICghKG5hbWUgaW4gcHJpb3IuZGVsdGEpKSB7DQogICAgICBwcmlvci5kZWx0YVtu");
    sb.append("YW1lXSA9IHt9Ow0KICAgIH0NCiAgICB2YXIgbmV4dCA9IHsgc2VydmljZTogc3RhdGUuc2VydmljZSwg");
    sb.append("ZGF0YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogc3RhdGUuY3VycmVudCB9");
    sb.append("Ow0KICAgIG5leHRbc3RhdGUuY3VycmVudF0gPSB7DQogICAgICB0cmVlOiBwcmlvci50cmVlLA0KICAg");
    sb.append("ICAgZGVsdGE6IHByaW9yLmRlbHRhW25hbWVdLA0KICAgICAgcGFyZW50OiBwcmlvciwNCiAgICAgIHBh");
    sb.append("dGg6IG5hbWUsDQogICAgfTsNCiAgICBpZiAobmV4dC5jdXJyZW50ID09ICJkYXRhIikgew0KICAgICAg");
    sb.append("bmV4dC5kYXRhLmNvbm5lY3Rpb24gPSBwcmlvci5jb25uZWN0aW9uOw0KICAgIH0NCiAgICByZXR1cm4g");
    sb.append("bmV4dDsNCiAgfTsNCg0KICAvLyBSVU5USU1FIHwgZXh0ZW5kIHRoZSBnaXZlbiBzdGF0ZSB3aXRoIHRo");
    sb.append("ZSB2aWV3IGhhdmluZyBhIHNlcGVyYXRlIGNoaWxkDQogIHNlbGYucEVWID0gZnVuY3Rpb24gKHN0YXRl");
    sb.append("LCBuYW1lKSB7DQogICAgaWYgKCEobmFtZSBpbiBzdGF0ZS52aWV3LmRlbHRhKSkgew0KICAgICAgc3Rh");
    sb.append("dGUudmlldy5kZWx0YVtuYW1lXSA9IHt9Ow0KICAgIH0NCiAgICByZXR1cm4gew0KICAgICAgc2Vydmlj");
    sb.append("ZTogc3RhdGUuc2VydmljZSwNCiAgICAgIGRhdGE6IHN0YXRlLmRhdGEsDQogICAgICB2aWV3OiB7DQog");
    sb.append("ICAgICAgIHRyZWU6IHN0YXRlLnZpZXcudHJlZSwNCiAgICAgICAgZGVsdGE6IHN0YXRlLnZpZXcuZGVs");
    sb.append("dGFbbmFtZV0sDQogICAgICAgIHBhcmVudDogc3RhdGUudmlldywNCiAgICAgICAgcGF0aDogbmFtZSwN");
    sb.append("CiAgICAgIH0sDQogICAgICBjdXJyZW50OiBzdGF0ZS5jdXJyZW50DQogICAgfTsNCiAgfTsNCg0KICB2");
    sb.append("YXIgZm9yayA9IGZ1bmN0aW9uIChwcmlvclN0YXRlKSB7DQogICAgdmFyIHN0YXRlID0gew0KICAgICAg");
    sb.append("c2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNlLA0KICAgICAgZGF0YTogbmV3X2RlbHRhX2NvcHkocHJp");
    sb.append("b3JTdGF0ZS5kYXRhKSwNCiAgICAgIHZpZXc6IG5ld19kZWx0YV9jb3B5KHByaW9yU3RhdGUudmlldyks");
    sb.append("DQogICAgICBjdXJyZW50OiBwcmlvclN0YXRlLmN1cnJlbnQNCiAgICB9Ow0KICAgIGlmIChzdGF0ZS5k");
    sb.append("YXRhICE9IG51bGwpIHsNCiAgICAgIHN0YXRlLmRhdGEuY29ubmVjdGlvbiA9IHByaW9yU3RhdGUuZGF0");
    sb.append("YS5jb25uZWN0aW9uOw0KICAgIH0NCiAgICByZXR1cm4gc3RhdGU7DQogIH0NCg0KICAvLyBSVU5USU1F");
    sb.append("IHwgc3Vic2NyaWJlIGJldHdlZW4gdGhlIHN0YXRlIGFuZCB0aGUgb2JqZWN0Lg0KICAvLyBXaGVuIHRo");
    sb.append("ZSBtZW1iZXIgZmllbGQgd2l0aGluIHN0YXRlIG9mIG5hbWUgY2hhbmdlcywgY29weSB0aGF0IHZhbHVl");
    sb.append("IGludG8gdGhlIG9iaiBhbmQgcnVuIHJlY29tcHV0ZSgpDQogIHNlbGYuWSA9IGZ1bmN0aW9uIChzdGF0");
    sb.append("ZSwgb2JqLCBuYW1lLCByZWNvbXB1dGUpIHsNCiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7");
    sb.append("DQogICAgICBvYmpbbmFtZV0gPSB2YWx1ZTsNCiAgICAgIHJlY29tcHV0ZSgpOw0KICAgIH07DQogICAg");
    sb.append("c3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOw0KICB9Ow0KDQogIC8vIFJVTlRJTUUgfCBKdXN0IHN1");
    sb.append("YnNjcmliZWUgdmFsdWUgdG8gdGhlIG9iamVjdCBmaWVsZCBvZiBuYW1lIChuby1yZWNvbXB1dGUpDQog");
    sb.append("IHNlbGYuWVMgPSBmdW5jdGlvbiAoc3RhdGUsIG9iaiwgbmFtZSkgew0KICAgIHZhciBzdWIgPSBmdW5j");
    sb.append("dGlvbiAodmFsdWUpIHsNCiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOw0KICAgIH07DQogICAgc3Vic2Ny");
    sb.append("aWJlKHN0YXRlLCBuYW1lLCBzdWIpOw0KICB9Ow0KDQogIC8vIFJVTlRJTUUgfCAiVGV4dCINCiAgc2Vs");
    sb.append("Zi5UID0gZnVuY3Rpb24gKHR4KSB7DQogICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHR4");
    sb.append("KTsNCiAgfTsNCg0KICAvLyBSVU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLj4NCiAgc2VsZi5MID0gZnVu");
    sb.append("Y3Rpb24gKHN0YXRlLCBuYW1lKSB7DQogICAgdmFyIGRvbSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2Rl");
    sb.append("KCIiKTsNCiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7IGRvbS5ub2RlVmFsdWUgPSB2YWx1");
    sb.append("ZTsgfTsNCiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7DQogICAgcmV0dXJuIGRvbTsNCiAg");
    sb.append("fTsNCg0KICAvLyBSVU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLiB0cmFuc2Zvcm09IiR0cmFuc2Zvcm0i");
    sb.append("IC8+DQogIHNlbGYuTFQgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIHRyYW5zZm9ybSkgew0KICAgIHZh");
    sb.append("ciBkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7DQogICAgdmFyIHN1YiA9IGZ1bmN0aW9u");
    sb.append("ICh2YWx1ZSkgeyBkb20ubm9kZVZhbHVlID0gdHJhbnNmb3JtKHZhbHVlKTsgfTsNCiAgICBzdWJzY3Jp");
    sb.append("YmUoc3RhdGUsIG5hbWUsIHN1Yik7DQogICAgcmV0dXJuIGRvbTsNCiAgfTsNCg0KICAvLyBSVU5USU1F");
    sb.append("IHwgPHRhZz4NCiAgc2VsZi5FID0gZnVuY3Rpb24gKHRhZywgbnMpIHsNCiAgICBpZiAobnMgPT0gdW5k");
    sb.append("ZWZpbmVkIHx8IG5zID09IG51bGwpIHsNCiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KHRhZyk7DQogICAgfSBlbHNlIHsNCiAgICAgIHZhciByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVt");
    sb.append("ZW50TlMobnMsIHRhZyk7DQogICAgICByZXN1bHQuc2V0QXR0cmlidXRlKCd4bWxucycsIG5zKTsNCiAg");
    sb.append("ICAgIHJldHVybiByZXN1bHQ7DQogICAgfQ0KICB9Ow0KDQogIC8vIFJVTlRJTUUgfCA8cGljayBuYW1l");
    sb.append("PS4uLj4NCiAgc2VsZi5QID0gZnVuY3Rpb24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgcnhPYmosIGNoaWxk");
    sb.append("TWFrZXIpIHsNCiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7DQogICAgcnhPYmouX18gPSBmdW5j");
    sb.append("dGlvbiAoKSB7DQogICAgICBpZiAodGhpcy5uYW1lID09IHJ4T2JqLm5hbWUpIHsgcmV0dXJuOyB9DQog");
    sb.append("ICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsNCiAgICAgIHRoaXMubmFtZSA9IHJ4T2JqLm5hbWU7DQogICAg");
    sb.append("ICBudWtlKHBhcmVudCk7DQogICAgICB2YXIgY28gPSBnZXRfY29ubmVjdGlvbl9vYmoocnhPYmoubmFt");
    sb.append("ZSk7DQogICAgICB2YXIgc3RhdGUgPSB7DQogICAgICAgIHNlcnZpY2U6IHByaW9yU3RhdGUuc2Vydmlj");
    sb.append("ZSwNCiAgICAgICAgZGF0YTogeyBjb25uZWN0aW9uOiBjbywgdHJlZTogY28udHJlZSwgZGVsdGE6IHt9");
    sb.append("LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwNCiAgICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHko");
    sb.append("cHJpb3JTdGF0ZS52aWV3KSwNCiAgICAgICAgY3VycmVudDogJ2RhdGEnDQogICAgICB9Ow0KICAgICAg");
    sb.append("Y2hpbGRNYWtlcihzdGF0ZSk7DQogICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsNCiAg");
    sb.append("ICB9LmJpbmQoeyBuYW1lOiAiIiB9KTsNCiAgfTsNCg0KICAvLyBSVU5USU1FIHwgPHRlbXBsYXRlIG5h");
    sb.append("bWU9Ii4uLiI+DQogIHNlbGYuVFAgPSBmdW5jdGlvbiAobmFtZSwgZm9vKSB7DQogICAgdGVtcGxhdGVz");
    sb.append("W25hbWVdID0gZm9vOw0KICB9Ow0KDQogIC8vIFJVTlRJTUUgfCA8Li4uIGhyZWY9IiIgLi4uPg0KICBz");
    sb.append("ZWxmLkhSRUYgPSBmdW5jdGlvbiAoZG9tLCBocmVmKSB7DQogICAgZG9tLnNldEF0dHJpYnV0ZSgnaHJl");
    sb.append("ZicsIGZpeEhyZWYoaHJlZikpOw0KICAgIGRvbS5vbmNsaWNrID0gZnVuY3Rpb24gKGV2dCkgew0KICAg");
    sb.append("ICAgdmFyIHBhcnRzID0gKGhyZWYuc3RhcnRzV2l0aCgiLyIpID8gaHJlZi5zdWJzdHJpbmcoMSkgOiBo");
    sb.append("cmVmKS5zcGxpdCgiLyIpOw0KICAgICAgaWYgKHJvdXRlKHBhcnRzLCAwLCByb3V0ZXIsIHt9KSkgew0K");
    sb.append("ICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgc2VsZi5ydW4oZG9jdW1lbnQuYm9k");
    sb.append("eSwgaHJlZiwgdHJ1ZSk7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIHJldHVy");
    sb.append("biB0cnVlOw0KICAgIH07DQogIH07DQogIC8vIFJVTlRJTUUgfCA8Li4uIGNsYXNzPSIiIC4uLj4NCiAg");
    sb.append("c2VsZi5BQ0xBU1MgPSBmdW5jdGlvbiAoZG9tLCB2YWx1ZSkgew0KICAgIGRvbS5zZXRBdHRyaWJ1dGUo");
    sb.append("J2NsYXNzJywgdmFsdWUpOw0KICB9Ow0KICAvLyBSVU5USU1FIHwgPC4uLiBzcmM9IiIgLi4uPg0KICBz");
    sb.append("ZWxmLkFTUkMgPSBmdW5jdGlvbiAoZG9tLCB2YWx1ZSkgew0KICAgIGRvbS5zZXRBdHRyaWJ1dGUoJ3Ny");
    sb.append("YycsIHZhbHVlKTsNCiAgfTsNCg0KICAvLyBSVU5USU1FIHwgPHRhZyByeDp0ZW1wbGF0ZT0kbmFtZT4N");
    sb.append("CiAgc2VsZi5VVCA9IGZ1bmN0aW9uIChwYXJlbnQsIHN0YXRlLCBuYW1lLCBjaGlsZF9tYWtlcikgew0K");
    sb.append("ICAgIHZhciBmb28gPSB0ZW1wbGF0ZXNbbmFtZV07DQogICAgZm9vKHBhcmVudCwgc3RhdGUsIGNoaWxk");
    sb.append("X21ha2VyKTsNCiAgfTsNCg0KICAvLyBSVU5USU1FIHwgPHRhZyByeDpzd2l0Y2g9cGF0aCAuLj4NCiAg");
    sb.append("c2VsZi5TVyA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIG5hbWUsIGNoaWxkcmVuTWFrZXIp");
    sb.append("IHsNCiAgICB2YXIgc3dzdCA9IHsgcHJpb3I6IG51bGwgfTsNCiAgICBhZGRfdW5zdWIoc3dzdCk7DQog");
    sb.append("ICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgew0KICAgICAgaWYgKHZhbHVlID09IHRoaXMucHJp");
    sb.append("b3IpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy5wcmlvciA9IHZhbHVlOw0K");
    sb.append("ICAgICAgZmlyZV91bnN1Yih0aGlzKTsNCiAgICAgIG51a2UocGFyZW50KTsNCiAgICAgIHZhciBzdGF0");
    sb.append("ZSA9IGZvcmsocHJpb3JTdGF0ZSk7DQogICAgICBjaGlsZHJlbk1ha2VyKHBhcmVudCwgc3RhdGUsICcn");
    sb.append("ICsgdmFsdWUpOw0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB0aGlzKTsNCg0KICAgIH0uYmlu");
    sb.append("ZChzd3N0KTsNCiAgICBzdWJzY3JpYmUocHJpb3JTdGF0ZSwgbmFtZSwgc3ViKTsNCiAgfTsNCg0KICAv");
    sb.append("LyBSVU5USU1FIHwgPHRhZyByeDppdGVyYXRlPXBhdGggLi4uPg0KICBzZWxmLklUID0gZnVuY3Rpb24g");
    sb.append("KHBhcmVudERvbSwgc3RhdGUsIG5hbWUsIGV4cGFuZFZpZXcsIG1ha2VyKSB7DQogICAgdmFyIGl0X3N0");
    sb.append("YXRlID0gc2VsZi5wSShzdGF0ZSwgbmFtZSk7DQogICAgdmFyIGRvbUJ5S2V5ID0ge307DQogICAgdmFy");
    sb.append("IHZpZXdVblN1YkJ5S2V5ID0ge307DQoNCiAgICB2YXIgc3ViID0gew0KICAgICAgJysnOiBmdW5jdGlv");
    sb.append("biAoa2V5KSB7DQogICAgICAgIC8vIFRPRE86IHZpZXcgcHJvcGFnYXRlcyBkb24ndCB3b3JrIGhlcmUN");
    sb.append("CiAgICAgICAgdmFyIG5ld19zdGF0ZSA9IHNlbGYucEkoaXRfc3RhdGUsIGtleSk7DQogICAgICAgIGlm");
    sb.append("IChleHBhbmRWaWV3KSB7DQogICAgICAgICAgbmV3X3N0YXRlID0gc2VsZi5wRVYoaXRfc3RhdGUsIGtl");
    sb.append("eSk7DQogICAgICAgIH0NCiAgICAgICAgbmV3X3N0YXRlID0gew0KICAgICAgICAgIHNlcnZpY2U6IG5l");
    sb.append("d19zdGF0ZS5zZXJ2aWNlLA0KICAgICAgICAgIGRhdGE6IG5ld19zdGF0ZS5kYXRhLA0KICAgICAgICAg");
    sb.append("IHZpZXc6IG5ld19kZWx0YV9jb3B5KG5ld19zdGF0ZS52aWV3KSwNCiAgICAgICAgICBjdXJyZW50OiBu");
    sb.append("ZXdfc3RhdGUuY3VycmVudA0KICAgICAgICB9Ow0KDQogICAgICAgIHZhciB1bnN1YiA9IG1ha2VfdW5z");
    sb.append("dWIoKTsNCiAgICAgICAgdmFyIGRvbSA9IG1ha2VyKG5ld19zdGF0ZSk7DQogICAgICAgIGRvbUJ5S2V5");
    sb.append("W2tleV0gPSBkb207DQogICAgICAgIHZpZXdVblN1YkJ5S2V5W2tleV0gPSB1bnN1YjsNCiAgICAgICAg");
    sb.append("cGFyZW50RG9tLmFwcGVuZChkb20pOw0KICAgICAgICBzdWJzY3JpYmVfdmlldyhuZXdfc3RhdGUsIHVu");
    sb.append("c3ViKTsNCiAgICAgICAgcmV0dXJuIG5ld19zdGF0ZVtuZXdfc3RhdGUuY3VycmVudF0uZGVsdGE7DQog");
    sb.append("ICAgICB9LA0KICAgICAgJy0nOiBmdW5jdGlvbiAoa2V5KSB7DQogICAgICAgIGlmIChrZXkgaW4gZG9t");
    sb.append("QnlLZXkpIHsNCiAgICAgICAgICBwYXJlbnREb20ucmVtb3ZlQ2hpbGQoZG9tQnlLZXlba2V5XSk7DQog");
    sb.append("ICAgICAgICAgZGVsZXRlIGRvbUJ5S2V5W2tleV07DQogICAgICAgIH0NCiAgICAgICAgaWYgKGtleSBp");
    sb.append("biB2aWV3VW5TdWJCeUtleSkgew0KICAgICAgICAgIGZpcmVfdW5zdWIodmlld1VuU3ViQnlLZXlba2V5");
    sb.append("XSk7DQogICAgICAgICAgZGVsZXRlIHZpZXdVblN1YkJ5S2V5W2tleV07DQogICAgICAgIH0NCiAgICAg");
    sb.append("IH0sDQogICAgICAnfic6IGZ1bmN0aW9uIChvcmQpIHsNCiAgICAgICAgbnVrZShwYXJlbnREb20pOw0K");
    sb.append("ICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG9yZC5sZW5ndGg7IGsrKykgew0KICAgICAgICAgIHBh");
    sb.append("cmVudERvbS5hcHBlbmQoZG9tQnlLZXlbb3JkW2tdXSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9");
    sb.append("Ow0KICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsNCiAgfTsNCg0KICB2YXIgZmluZCA9IGZ1");
    sb.append("bmN0aW9uIChzdGF0ZSwgY2hhbm5lbCwga2V5LCB2YWx1ZSkgew0KICAgIGlmIChjaGFubmVsIGluIHN0");
    sb.append("YXRlWydkYXRhJ10uY29ubmVjdGlvbi5vdXRzdGFuZGluZykgew0KICAgICAgdmFyIGFyciA9IHN0YXRl");
    sb.append("WydkYXRhJ10uY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVsXS5vcHRpb25zOw0KICAgICAgZm9y");
    sb.append("ICh2YXIgayA9IDA7IGsgPCBhcnIubGVuZ3RoOyBrKyspIHsNCiAgICAgICAgdmFyIHMgPSBhcnJba107");
    sb.append("DQogICAgICAgIGlmIChrZXkgaW4gcyAmJiBzW2tleV0gPT0gdmFsdWUpIHsNCiAgICAgICAgICByZXR1");
    sb.append("cm4gczsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIG51bGw7DQogICAgfSBlbHNlIHsN");
    sb.append("CiAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCiAgfTsNCg0KICB2YXIgY3VzdG9tcyA9IHt9Ow0KDQog");
    sb.append("IHNlbGYuUFJDVUFDID0gZnVuY3Rpb24gKG5hbWUsIGZvbykgew0KICAgIGN1c3RvbXNbbmFtZV0gPSBm");
    sb.append("b287DQogIH07DQoNCiAgc2VsZi5leENDID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIGN1c3Rv");
    sb.append("bUNvbW1hbmROYW1lKSB7DQogICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24gKCkg");
    sb.append("ew0KICAgICAgaWYgKGN1c3RvbUNvbW1hbmROYW1lIGluIGN1c3RvbXMpIHsNCiAgICAgICAgY3VzdG9t");
    sb.append("c1tjdXN0b21Db21tYW5kTmFtZV0oKTsNCiAgICAgIH0NCiAgICB9KTsNCiAgfTsNCg0KICBzZWxmLmFD");
    sb.append("QyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgY3VzdG9tQ29tbWFuZE5hbWUsIHN0YXR1c1Zhcikgew0K");
    sb.append("ICAgIHZhciBzaWduYWwgPSBtYWtlX2ZhaWx1cmVfc2lnbmFsKHN0YXRlLCBzdGF0dXNWYXIpOw0KICAg");
    sb.append("IGZvcm0ub25zdWJtaXQgPSBmdW5jdGlvbiAoZXZ0KSB7DQogICAgICBpZiAoY3VzdG9tQ29tbWFuZE5h");
    sb.append("bWUgaW4gY3VzdG9tcykgew0KICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgdmFy");
    sb.append("IG9iaiA9IGdldF9mb3JtKGZvcm0pOw0KICAgICAgICBjdXN0b21zW2N1c3RvbUNvbW1hbmROYW1lXShv");
    sb.append("YmosIHN0YXRlLCBzaWduYWwsIHNlbGYpOw0KICAgICAgfQ0KICAgIH07DQogIH07DQoNCiAgc2VsZi5l");
    sb.append("eEQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgY2hhbm5lbCwga2V5KSB7DQogICAg");
    sb.append("dmFyIGRlY2lkZSA9IHsgdmFsdWU6IG51bGwgfTsNCiAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcih0eXBl");
    sb.append("LCBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgcmVzdWx0ID0gZmluZChzdGF0ZSwgY2hhbm5lbCwga2V5");
    sb.append("LCBkZWNpZGUudmFsdWUpOw0KICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7DQogICAgICAgIGxldCBz");
    sb.append("dGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOw0KICAgICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRy");
    sb.append("LnNlbmQoY2hhbm5lbCwgcmVzdWx0LCB7DQogICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNv");
    sb.append("bikgew0KDQogICAgICAgICAgfSwNCiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkg");
    sb.append("ew0KICAgICAgICAgICAgY29uc29sZS5sb2coIlN1Y2Nlc3N8IiArIHBheWxvYWQuc2VxICsgIjtsYXRl");
    sb.append("bmN5PSIgKyAocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydCkpOw0KICAgICAgICAgIH0NCiAgICAgICAg");
    sb.append("fSk7DQogICAgICB9DQogICAgfSk7DQogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBmdW5jdGlvbiAo");
    sb.append("dmFsdWUpIHsgZGVjaWRlLnZhbHVlID0gdmFsdWU7IH0pOw0KICB9Ow0KDQogIC8vIFJVTlRJTUU6IDx0");
    sb.append("YWcgLi4gcng6ZXZlbnQ9Ii4uLiBzZXQ6bmFtZT12YWx1ZSAuLi4iPg0KICBzZWxmLm9uUyA9IGZ1bmN0");
    sb.append("aW9uIChkb20sIHR5cGUsIHN0YXRlLCBuYW1lLCB2YWx1ZSkgew0KICAgIHZhciBydW5uYWJsZSA9IGZ1");
    sb.append("bmN0aW9uICgpIHsNCiAgICAgIHZhciBvYmogPSB7fTsNCiAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9");
    sb.append("PSAnZnVuY3Rpb24nKSB7DQogICAgICAgIG9ialtuYW1lXSA9IHZhbHVlKCk7DQogICAgICB9IGVsc2Ug");
    sb.append("ew0KICAgICAgICBvYmpbbmFtZV0gPSB2YWx1ZTsNCiAgICAgIH0NCiAgICAgIHZhciBkZWx0YSA9IHBh");
    sb.append("dGhfdG8oc3RhdGUsIG9iaik7DQogICAgICBzdGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShk");
    sb.append("ZWx0YSk7DQogICAgfTsNCiAgICBpZiAodHlwZSA9PSAnbG9hZCcpIHsNCiAgICAgIHdpbmRvdy5zZXRU");
    sb.append("aW1lb3V0KHJ1bm5hYmxlLCAxKTsNCiAgICB9IGVsc2Ugew0KICAgICAgZG9tLmFkZEV2ZW50TGlzdGVu");
    sb.append("ZXIodHlwZSwgcnVubmFibGUpOw0KICAgIH0NCiAgfTsNCg0KICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4");
    sb.append("OmV2ZW50PSIuLi4gdG9nZ2xlOm5hbWUgLi4uIj4NCiAgc2VsZi5vblQgPSBmdW5jdGlvbiAoZG9tLCB0");
    sb.append("eXBlLCBzdGF0ZSwgbmFtZSkgew0KICAgIHZhciBjYXB0dXJlZCA9IHsgdmFsdWU6IGZhbHNlIH07DQog");
    sb.append("ICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIG9iaiA9");
    sb.append("IHt9Ow0KICAgICAgb2JqW25hbWVdID0gIWNhcHR1cmVkLnZhbHVlOw0KICAgICAgdmFyIGRlbHRhID0g");
    sb.append("cGF0aF90byhzdGF0ZSwgb2JqKTsNCiAgICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRl");
    sb.append("KGRlbHRhKTsNCiAgICB9KTsNCiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1");
    sb.append("ZSkgew0KICAgICAgY2FwdHVyZWQudmFsdWUgPSB2YWx1ZSA9PSB0cnVlOw0KICAgIH0pOw0KICB9Ow0K");
    sb.append("DQogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBkZWx0YTpuYW1lPWRpZmYiIC4uLiI+");
    sb.append("DQogIHNlbGYub25EID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG5hbWUsIGRpZmYpIHsNCiAg");
    sb.append("ICB2YXIgY2FwdHVyZWQgPSB7IHZhbHVlOiAwIH07DQogICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIodHlw");
    sb.append("ZSwgZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIG9iaiA9IHt9Ow0KICAgICAgb2JqW25hbWVdID0gY2Fw");
    sb.append("dHVyZWQudmFsdWUgKyBkaWZmOw0KICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZSwgb2JqKTsN");
    sb.append("CiAgICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsNCiAgICB9KTsNCiAg");
    sb.append("ICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgew0KICAgICAgaWYgKHR5cGVv");
    sb.append("ZiAodmFsdWUpID09ICJudW1iZXIiKSB7DQogICAgICAgIGNhcHR1cmVkLnZhbHVlID0gdmFsdWU7DQog");
    sb.append("ICAgICB9IGVsc2Ugew0KICAgICAgICB2YXIgdmFsID0gcGFyc2VGbG9hdCh2YWx1ZSk7DQogICAgICAg");
    sb.append("IGlmICghaXNOYU4odmFsKSkgew0KICAgICAgICAgIGNhcHR1cmVkLnZhbHVlID0gdmFsOw0KICAgICAg");
    sb.append("ICB9DQogICAgICB9DQogICAgfSk7DQogIH07DQoNCiAgc2VsZi5ERSA9IGZ1bmN0aW9uIChwYXJlbnQs");
    sb.append("IHByaW9yU3RhdGUsIGV2YWxTdGF0ZSwgY2hhbm5lbCwga2V5LCBuYW1lLCBzaG91bGRCZSwgX2V4cGFu");
    sb.append("ZCwgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7DQogICAgdmFyIGRlY2lkZSA9IHsNCiAgICAgIHZhbHVl");
    sb.append("OiAnJywNCiAgICAgIG93bmVyOiBwYXJlbnQsDQogICAgICBzaG93bjogZmFsc2UsDQogICAgICBldmFs");
    sb.append("OiBudWxsLA0KICAgIH07DQogICAgYWRkX3Vuc3ViKGRlY2lkZSk7DQogICAgdmFyIGNoYW5nZSA9IGZ1");
    sb.append("bmN0aW9uIChzaG93KSB7DQogICAgICBmaXJlX3Vuc3ViKGRlY2lkZSk7DQogICAgICBudWtlKHBhcmVu");
    sb.append("dCk7DQogICAgICB2YXIgc3RhdGUgPSBmb3JrKHByaW9yU3RhdGUpOw0KICAgICAgaWYgKHNob3cgPT09");
    sb.append("IHNob3VsZEJlKSB7DQogICAgICAgIG1ha2VyVHJ1ZShwYXJlbnQsIHN0YXRlKTsNCiAgICAgIH0gZWxz");
    sb.append("ZSB7DQogICAgICAgIG1ha2VyRmFsc2UocGFyZW50LCBzdGF0ZSk7DQogICAgICB9DQogICAgICBzdWJz");
    sb.append("Y3JpYmVfc3RhdGUoc3RhdGUsIGRlY2lkZSk7DQogICAgfTsNCg0KICAgIGRlY2lkZS51cGRhdGUgPSBm");
    sb.append("dW5jdGlvbiAoKSB7DQogICAgICB2YXIgZXZhbCA9IGZpbmQocHJpb3JTdGF0ZSwgY2hhbm5lbCwga2V5");
    sb.append("LCBkZWNpZGUudmFsdWUpICE9IG51bGw7DQogICAgICBpZiAoZGVjaWRlLmV2YWwgIT0gZXZhbCkgew0K");
    sb.append("ICAgICAgICBkZWNpZGUuZXZhbCA9IGV2YWw7DQogICAgICAgIGNoYW5nZShkZWNpZGUuZXZhbCk7DQog");
    sb.append("ICAgICB9DQogICAgfTsNCg0KICAgIHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLnN1YnNjcmliZShj");
    sb.append("aGFubmVsLCBmdW5jdGlvbiAoKSB7DQogICAgICBkZWNpZGUudXBkYXRlKCk7DQogICAgfSk7DQoNCiAg");
    sb.append("ICBzdWJzY3JpYmUoZXZhbFN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFsdWUpIHsNCiAgICAgIGRlY2lk");
    sb.append("ZS52YWx1ZSA9IHZhbHVlOw0KICAgICAgZGVjaWRlLnVwZGF0ZSgpOw0KICAgIH0pOw0KICB9Ow0KDQog");
    sb.append("IHNlbGYuSUYgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBuYW1lLCBzaG91bGRCZSwgZXhw");
    sb.append("YW5kVmlldywgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7DQogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1");
    sb.append("YigpOw0KICAgIHZhciBzZXQgPSBmdW5jdGlvbiAodmFsdWUpIHsNCiAgICAgIHZhciBzaG93ID0gKHZh");
    sb.append("bHVlID8gdHJ1ZSA6IGZhbHNlKSA9PT0gc2hvdWxkQmU7DQogICAgICBpZiAodGhpcy5zaG93biA9PSBz");
    sb.append("aG93KSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHRoaXMuc2hvd24gPSBzaG93Ow0K");
    sb.append("ICAgICAgbnVrZShwYXJlbnQpOw0KICAgICAgZmlyZV91bnN1Yih1bnN1Yik7DQogICAgICB2YXIgc3Rh");
    sb.append("dGUgPSBmb3JrKHByaW9yU3RhdGUpOw0KICAgICAgdmFyIG5leHQgPSBzdGF0ZTsNCiAgICAgIGlmICh0");
    sb.append("eXBlb2YgKHZhbHVlKSA9PSAnb2JqZWN0Jykgew0KICAgICAgICBuZXh0ID0gc2VsZi5wSShuZXh0LCBu");
    sb.append("YW1lKTsNCiAgICAgICAgaWYgKGV4cGFuZFZpZXcpIHsNCiAgICAgICAgICBuZXh0ID0gc2VsZi5wRVYo");
    sb.append("bmV4dCwgbmFtZSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChzaG93KSB7DQogICAgICAg");
    sb.append("IG1ha2VyVHJ1ZShwYXJlbnQsIG5leHQpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWFrZXJGYWxz");
    sb.append("ZShwYXJlbnQsIG5leHQpOw0KICAgICAgfQ0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1");
    sb.append("Yik7DQogICAgfS5iaW5kKHsgc2hvd246IHNob3VsZEJlIH0pOw0KICAgIHNldCghc2hvdWxkQmUpOw0K");
    sb.append("ICAgIHN1YnNjcmliZShwcmlvclN0YXRlLCBuYW1lLCBzZXQpOw0KICB9Ow0KDQogIC8vLyBSVU5USU1F");
    sb.append("IHwgcng6YWN0aW9uPWNvcHk6cGF0aA0KICBzZWxmLmFDUCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwg");
    sb.append("bmFtZSkgew0KICAgIGZvcm0ub25zdWJtaXQgPSBmdW5jdGlvbiAoZXZ0KSB7DQogICAgICBldnQucHJl");
    sb.append("dmVudERlZmF1bHQoKTsNCiAgICAgIHZhciBvYmogPSBnZXRfZm9ybShmb3JtKTsNCiAgICAgIGlmIChu");
    sb.append("YW1lICE9ICIuIiAmJiBuYW1lICE9ICIiKSB7DQogICAgICAgIHZhciBubyA9IHt9Ow0KICAgICAgICBu");
    sb.append("b1tuYW1lXSA9IG9iajsNCiAgICAgICAgb2JqID0gbm87DQogICAgICB9DQogICAgICB2YXIgZGVsdGEg");
    sb.append("PSBwYXRoX3RvKHN0YXRlLCBvYmopOw0KICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7");
    sb.append("DQogICAgfTsNCiAgfTsNCg0KICAvLyBSVU5USU1FIHwgPGlucHV0IC4uLiByeDpzeW5jPXBhdGggLi4u");
    sb.append("Pg0KICBzZWxmLlNZID0gZnVuY3Rpb24gKGVsLCBzdGF0ZSwgbmFtZSwgbXMpIHsNCiAgICB2YXIgdHlw");
    sb.append("ZSA9ICgndHlwZScgaW4gZWwpID8gZWwudHlwZS50b1VwcGVyQ2FzZSgpIDogJ3RleHQnOw0KICAgIHZh");
    sb.append("ciBzaWduYWwgPSBmdW5jdGlvbiAodmFsdWUpIHsNCiAgICAgIHZhciBvYmogPSB7fTsNCiAgICAgIG9i");
    sb.append("altuYW1lXSA9IGVsLnZhbHVlOw0KICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZSwgb2JqKTsN");
    sb.append("CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoZGVsdGEpOw0KICAgIH07DQogICAgaWYgKHR5cGUg");
    sb.append("PT0gIkNIRUNLQk9YIikgew0KICAgICAgZWwub25jaGFuZ2UgPSBkZWJvdW5jZShtcywgZnVuY3Rpb24g");
    sb.append("KGV2dCkgew0KICAgICAgICBzaWduYWwoZWwuY2hlY2tlZCA/IHRydWUgOiBmYWxzZSk7DQogICAgICB9");
    sb.append("KTsNCiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gIlJBRElPIikgew0KICAgICAgZWwub25jaGFuZ2UgPSBk");
    sb.append("ZWJvdW5jZShtcywgZnVuY3Rpb24gKGV2dCkgew0KICAgICAgICBpZiAoZWwuY2hlY2tlZCkgew0KICAg");
    sb.append("ICAgICAgIHNpZ25hbChlbC52YWx1ZSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0gZWxzZSB7");
    sb.append("DQogICAgICBlbC5vbmNoYW5nZSA9IGRlYm91bmNlKG1zLCBmdW5jdGlvbiAoZXZ0KSB7DQogICAgICAg");
    sb.append("IHNpZ25hbChlbC52YWx1ZSk7DQogICAgICB9KTsNCiAgICAgIGVsLm9ua2V5dXAgPSBlbC5vbmNoYW5n");
    sb.append("ZTsNCiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgc2lnbmFsKGVs");
    sb.append("LnZhbHVlKTsNCiAgICAgIH0sIDEpOw0KICAgIH0NCiAgfTsNCg0KICAvLyBIRUxQRVIgfCBleHRyYWN0");
    sb.append("IGFsbCB0aGUgaW5wdXRzIGZyb20gdGhlIGdpdmVuIGVsZW1lbnQgYW5kIGJ1aWxkIGFuIG9iamVjdA0K");
    sb.append("ICB2YXIgYnVpbGRfb2JqID0gZnVuY3Rpb24gKGVsLCBvYmopIHsNCiAgICBpZiAoZWwudGFnTmFtZS50");
    sb.append("b1VwcGVyQ2FzZSgpID09ICJURVhUQVJFQSIpIHsNCiAgICAgIG9ialtlbC5uYW1lXSA9IGVsLnZhbHVl");
    sb.append("Ow0KICAgIH0gZWxzZSBpZiAoZWwudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09ICJTRUxFQ1QiKSB7DQog");
    sb.append("ICAgICBvYmpbZWwubmFtZV0gPSBlbC52YWx1ZTsNCiAgICB9IGVsc2UgaWYgKGVsLnRhZ05hbWUudG9V");
    sb.append("cHBlckNhc2UoKSA9PSAiSU5QVVQiKSB7DQogICAgICB2YXIgdHlwZSA9ICgndHlwZScgaW4gZWwpID8g");
    sb.append("ZWwudHlwZS50b1VwcGVyQ2FzZSgpIDogJ3RleHQnOw0KICAgICAgaWYgKHR5cGUgPT0gIlNVQk1JVCIg");
    sb.append("fHwgdHlwZSA9PSAiUkVTRVQiKSByZXR1cm47DQogICAgICBpZiAoJ25hbWUnIGluIGVsKSB7DQogICAg");
    sb.append("ICAgIHZhciBuYW1lID0gZWwubmFtZTsNCiAgICAgICAgdmFyIGluc2VydEF0ID0gb2JqOw0KICAgICAg");
    sb.append("ICB2YXIgcHVzaCA9IG5hbWUuZW5kc1dpdGgoIltdIik7DQogICAgICAgIGlmIChwdXNoKSB7DQogICAg");
    sb.append("ICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDAsIG5hbWUubGVuZ3RoIC0gMik7DQogICAgICAgICAgaWYg");
    sb.append("KG5hbWUgaW4gaW5zZXJ0QXQpIHsNCiAgICAgICAgICAgIGluc2VydEF0W25hbWVdID0gW107DQogICAg");
    sb.append("ICAgICAgfQ0KICAgICAgICAgIGluc2VydEF0ID0gaW5zZXJ0QXRbbmFtZV07DQogICAgICAgICAgaWYg");
    sb.append("KHR5cGUgPT0gIkNIRUNLQk9YIikgew0KICAgICAgICAgICAgaW5zZXJ0QXQucHVzaChlbC5jaGVja2Vk");
    sb.append("ID8gdHJ1ZSA6IGZhbHNlKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gIlJBRElPIikgew0K");
    sb.append("ICAgICAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHsNCiAgICAgICAgICAgICAgaW5zZXJ0QXQucHVzaChl");
    sb.append("bC52YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlu");
    sb.append("c2VydEF0LnB1c2goZWwudmFsdWUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAg");
    sb.append("ICAgICBpZiAodHlwZSA9PSAiQ0hFQ0tCT1giKSB7DQogICAgICAgICAgICBpbnNlcnRBdFtuYW1lXSA9");
    sb.append("IGVsLmNoZWNrZWQgPyB0cnVlIDogZmFsc2U7DQogICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJS");
    sb.append("QURJTyIpIHsNCiAgICAgICAgICAgIGlmIChlbC5jaGVja2VkKSB7DQogICAgICAgICAgICAgIGluc2Vy");
    sb.append("dEF0W25hbWVdID0gZWwudmFsdWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAg");
    sb.append("ICAgICAgICAgIGluc2VydEF0W25hbWVdID0gZWwudmFsdWU7DQogICAgICAgICAgfQ0KICAgICAgICB9");
    sb.append("DQogICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgIGlmICgnY2hpbGRyZW4nIGluIGVsKSB7DQogICAg");
    sb.append("ICAgIHZhciBhcnIgPSBlbC5jaGlsZHJlbjsNCiAgICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOw0KICAg");
    sb.append("ICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgew0KICAgICAgICAgIHZhciBjaCA9IGVsLmNo");
    sb.append("aWxkcmVuW2tdOw0KICAgICAgICAgIGJ1aWxkX29iaihjaCwgb2JqKTsNCiAgICAgICAgfQ0KICAgICAg");
    sb.append("fQ0KICAgIH0NCiAgfTsNCg0KICAvLyBIRUxQRVIgfCByZXR1cm4gYW4gb2JqZWN0IG9mIGFsbCB0aGUg");
    sb.append("aW5wdXRzIG9mIHRoZSBnaXZlbiBmb3JtIGVsZW1lbnQNCiAgdmFyIGdldF9mb3JtID0gZnVuY3Rpb24g");
    sb.append("KGZvcm0pIHsNCiAgICB2YXIgb2JqID0ge307DQogICAgYnVpbGRfb2JqKGZvcm0sIG9iaik7DQogICAg");
    sb.append("cmV0dXJuIG9iajsNCiAgfTsNCg0KICAvLyBIRUxQRVIgfCBjcmVhdGUgYSBzaWduYWwgZm9yIHdoZW4g");
    sb.append("dGhpbmdzIGZhaWw7IHRoaXMgd2lsbCB3cml0ZSBpbnRvIHRoZSB0aGUgdmlldw0KICB2YXIgbWFrZV9m");
    sb.append("YWlsdXJlX3NpZ25hbCA9IGZ1bmN0aW9uIChzdGF0ZSwgZmFpbHVyZVZhcikgew0KICAgIHJldHVybiBm");
    sb.append("dW5jdGlvbiAoZmFpbCkgew0KICAgICAgdmFyIG9iaiA9IHt9Ow0KICAgICAgb2JqW2ZhaWx1cmVWYXJd");
    sb.append("ID0gZmFpbDsNCiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc2VsZi5wVihzdGF0ZSksIG9iaik7DQog");
    sb.append("ICAgICBjb25zb2xlLmxvZyhkZWx0YSk7DQogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRh");
    sb.append("KTsNCiAgICB9Ow0KICB9Ow0KDQogIC8qKg0KIC8kJCQkJCQkJCAvJCQkJCQkICAvJCQkJCQkJCAgIC8k");
    sb.append("JCQkJCQgDQp8X18gICQkX18vLyQkX18gICQkfCAkJF9fICAkJCAvJCRfXyAgJCQNCiAgIHwgJCQgIHwg");
    sb.append("JCQgIFwgJCR8ICQkICBcICQkfCAkJCAgXCAkJA0KICAgfCAkJCAgfCAkJCAgfCAkJHwgJCQgIHwgJCR8");
    sb.append("ICQkICB8ICQkDQogICB8ICQkICB8ICQkICB8ICQkfCAkJCAgfCAkJHwgJCQgIHwgJCQNCiAgIHwgJCQg");
    sb.append("IHwgJCQgIHwgJCR8ICQkICB8ICQkfCAkJCAgfCAkJA0KICAgfCAkJCAgfCAgJCQkJCQkL3wgJCQkJCQk");
    sb.append("JC98ICAkJCQkJCQvDQogICB8X18vICAgXF9fX19fXy8gfF9fX19fX18vICBcX19fX19fLyANCiAgICAg");
    sb.append("ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovDQoNCiAgLy8gUlVOVElNRSB8IHJlZ2lz");
    sb.append("dGVyIHRoZSBwYWdlIGZvciB0aGUgdXJpIHRvIHRoZSBnaXZlbiBmb28oKS4NCiAgc2VsZi5QRyA9IGZ1");
    sb.append("bmN0aW9uICh1cmksIGZvbykgew0KICAgIHZhciBoZWFkID0gcm91dGVyOw0KICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgdXJpLmxlbmd0aDsgaysrKSB7DQogICAgICB2YXIgcGFydCA9IHVyaVtrXTsNCiAgICAg");
    sb.append("IGlmICghKHBhcnQgaW4gaGVhZCkpIHsNCiAgICAgICAgaGVhZFtwYXJ0XSA9IHt9Ow0KICAgICAgfQ0K");
    sb.append("ICAgICAgaGVhZCA9IGhlYWRbcGFydF07DQogICAgfQ0KICAgIGhlYWRbJ0AnXSA9IGZvbzsNCiAgfTsN");
    sb.append("Cg0KICB2YXIgcm91dGUgPSBmdW5jdGlvbiAocGFydHMsIGF0LCBoZWFkLCB2aWV3KSB7DQogICAgaWYg");
    sb.append("KGF0IDwgcGFydHMubGVuZ3RoKSB7DQogICAgICBpZiAoJ251bWJlcicgaW4gaGVhZCkgew0KICAgICAg");
    sb.append("ICB2YXIgbmVjayA9IGhlYWRbJ251bWJlciddOw0KICAgICAgICB2YXIgdmFsID0gcGFyc2VGbG9hdChw");
    sb.append("YXJ0c1thdF0pOw0KICAgICAgICBpZiAoIWlzTmFOKHZhbCkpIHsNCiAgICAgICAgICBmb3IgKHZhciBi");
    sb.append("cmFuY2ggaW4gbmVjaykgew0KICAgICAgICAgICAgdmlld1ticmFuY2hdID0gdmFsOw0KICAgICAgICAg");
    sb.append("ICAgdmFyIGNhbmRpZGF0ZSA9IHJvdXRlKHBhcnRzLCBhdCArIDEsIG5lY2tbYnJhbmNoXSwgdmlldyk7");
    sb.append("DQogICAgICAgICAgICBpZiAoY2FuZGlkYXRlICE9PSBudWxsKSB7DQogICAgICAgICAgICAgIHJldHVy");
    sb.append("biBjYW5kaWRhdGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBkZWxldGUgdmlld1ticmFuY2hd");
    sb.append("Ow0KICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICAgIH0NCiAgICAgIGlmICgndGV4dCcgaW4gaGVh");
    sb.append("ZCkgew0KICAgICAgICB2YXIgbmVjayA9IGhlYWRbJ3RleHQnXTsNCiAgICAgICAgdmFyIHZhbCA9IHBh");
    sb.append("cnRzW2F0XTsNCiAgICAgICAgZm9yICh2YXIgYnJhbmNoIGluIG5lY2spIHsNCiAgICAgICAgICB2aWV3");
    sb.append("W2JyYW5jaF0gPSB2YWw7DQogICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IHJvdXRlKHBhcnRzLCBhdCAr");
    sb.append("IDEsIG5lY2tbYnJhbmNoXSwgdmlldyk7DQogICAgICAgICAgaWYgKGNhbmRpZGF0ZSAhPT0gbnVsbCkg");
    sb.append("ew0KICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTsNCiAgICAgICAgICB9DQogICAgICAgICAgZGVs");
    sb.append("ZXRlIHZpZXdbYnJhbmNoXTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKCdmaXhlZCcgaW4g");
    sb.append("aGVhZCkgew0KICAgICAgICB2YXIgbmVjayA9IGhlYWRbJ2ZpeGVkJ107DQogICAgICAgIGZvciAodmFy");
    sb.append("IGJyYW5jaCBpbiBuZWNrKSB7DQogICAgICAgICAgaWYgKGJyYW5jaCA9PSBwYXJ0c1thdF0pIHsNCiAg");
    sb.append("ICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSByb3V0ZShwYXJ0cywgYXQgKyAxLCBuZWNrW2JyYW5jaF0s");
    sb.append("IHZpZXcpOw0KICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZSAhPT0gbnVsbCkgew0KICAgICAgICAgICAg");
    sb.append("ICByZXR1cm4gY2FuZGlkYXRlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0K");
    sb.append("ICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICBpZiAoJ0AnIGluIGhlYWQpIHsNCiAgICAgICAgcmV0");
    sb.append("dXJuIGhlYWRbJ0AnXTsNCiAgICAgIH0NCiAgICB9DQogIH07DQoNCiAgc2VsZi5nb3RvID0gZnVuY3Rp");
    sb.append("b24gKHZpZXdTdGF0ZSwgdXJpKSB7DQogICAgLy8gVE9ETzogZmlndXJlIG91dCBhIGJldHRlciBtb2Rl");
    sb.append("bC4NCiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICBpZiAodXJpLnN0YXJ0");
    sb.append("c1dpdGgoIi8iKSkgew0KICAgICAgICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5LCB1cmksIHRydWUpOw0K");
    sb.append("ICAgICAgfSBlbHNlIHsNCiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBmaXhIcmVmKHVyaSk7");
    sb.append("DQogICAgICB9DQogICAgfSwgMTApOw0KICB9Ow0KDQogIHNlbGYuaW5pdCA9IGZ1bmN0aW9uICgpIHsN");
    sb.append("CiAgICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5LCBmaXhQYXRoKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFt");
    sb.append("ZSArIHdpbmRvdy5sb2NhdGlvbi5oYXNoKSwgZmFsc2UpOw0KICAgIHdpbmRvdy5vbnBvcHN0YXRlID0g");
    sb.append("ZnVuY3Rpb24gKCkgew0KICAgICAgY29uc29sZS5sb2coInBvcHN0YXRlOiIgKyBmaXhQYXRoKHdpbmRv");
    sb.append("dy5sb2NhdGlvbi5wYXRobmFtZSkpOw0KICAgICAgc2VsZi5ydW4oZG9jdW1lbnQuYm9keSwgZml4UGF0");
    sb.append("aCh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uaGFzaCksIGZhbHNlKTsN");
    sb.append("CiAgICB9Ow0KICB9Ow0KDQogIC8vIEFQSSB8IFJ1biB0aGUgcGFnZSBpbiB0aGUgZ2l2ZW4gcGxhY2UN");
    sb.append("CiAgc2VsZi5ydW4gPSBmdW5jdGlvbiAod2hlcmUsIHBhdGgsIHB1c2gpIHsNCiAgICBmb3IgKGNvbktl");
    sb.append("eSBpbiBjb25uZWN0aW9ucykgew0KICAgICAgY29ubmVjdGlvbnNbY29uS2V5XS50cmVlLm51a2UoKTsN");
    sb.append("CiAgICB9DQogICAgdmFyIHBhcnRzID0gKHBhdGguc3RhcnRzV2l0aCgiLyIpID8gcGF0aC5zdWJzdHJp");
    sb.append("bmcoMSkgOiBwYXRoKS5zcGxpdCgiLyIpOw0KICAgIHZhciBpbml0ID0geyAnc2Vzc2lvbl9pZCc6ICJS");
    sb.append("IiArIE1hdGgucmFuZG9tKCkgfTsNCiAgICB2YXIgZm9vID0gcm91dGUocGFydHMsIDAsIHJvdXRlciwg");
    sb.append("aW5pdCk7DQogICAgaWYgKGZvbyAhPSBudWxsKSB7DQogICAgICBudWtlKHdoZXJlKTsNCiAgICAgIHZh");
    sb.append("ciBzdGF0ZSA9IHsgc2VydmljZTogY29ubmVjdGlvbiwgZGF0YTogbnVsbCwgdmlldzogZnJlc2god2hl");
    sb.append("cmUpLCBjdXJyZW50OiAndmlldycgfTsNCiAgICAgIGZvbyh3aGVyZSwgc3RhdGUpOw0KICAgICAgc3Rh");
    sb.append("dGUudmlldy50cmVlLnN1YnNjcmliZShzdGF0ZS52aWV3LmRlbHRhKTsNCiAgICAgIHN0YXRlLnZpZXcu");
    sb.append("dHJlZS51cGRhdGUoaW5pdCk7DQogICAgICBpZiAocHVzaCkgew0KICAgICAgICB3aW5kb3cuaGlzdG9y");
    sb.append("eS5wdXNoU3RhdGUoe30sICcnLCBmaXhIcmVmKHBhdGgpKTsNCiAgICAgIH0NCiAgICB9IGVsc2Ugew0K");
    sb.append("ICAgICAgaWYgKHBhdGggIT0gIi80MDQiKSB7DQogICAgICAgIHNlbGYucnVuKHdoZXJlLCAiLzQwNCIp");
    sb.append("Ow0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8gZGVmYXVsdCA0MDQNCiAgICAgIH0NCiAgICB9DQog");
    sb.append("IH07DQoNCiAgdmFyIGlkZW50aXRpZXMgPSB7fTsNCg0KICBzZWxmLlNJR05PVVQgPSBmdW5jdGlvbiAo");
    sb.append("KSB7DQogICAgaWRlbnRpdGllcyA9IHt9Ow0KICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJpZGVu");
    sb.append("dGl0eV9kZWZhdWx0Iik7DQogICAgdmFyIGF4ZSA9IFtdOw0KICAgIGZvciAodmFyIGNpZCBpbiBjb25u");
    sb.append("ZWN0aW9ucykgew0KICAgICAgdmFyIGNvID0gY29ubmVjdGlvbnNbY2lkXTsNCiAgICAgIGlmIChjby5w");
    sb.append("dHIgIT0gbnVsbCkgew0KICAgICAgICBjby5wdHIuZW5kKCk7DQogICAgICB9DQogICAgICBheGUucHVz");
    sb.append("aChjaWQpOw0KICAgIH0NCiAgICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgew0K");
    sb.append("ICAgICAgZGVsZXRlIGNvbm5lY3Rpb25zW2F4ZVtrXV07DQogICAgfQ0KDQogICAgc2VsZi5nb3RvKG51");
    sb.append("bGwsICcvJyk7DQogIH07DQoNCiAgc2VsZi5HT09HTEVfU0lHTl9PTiA9IGZ1bmN0aW9uIChhY2Nlc3NU");
    sb.append("b2tlbikgew0KICAgIGNvbm5lY3Rpb24uSW5pdENvbnZlcnRHb29nbGVVc2VyKGFjY2Vzc1Rva2VuLCB7");
    sb.append("DQogICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgew0KICAgICAgICBpZGVudGl0aWVzWydk");
    sb.append("ZWZhdWx0J10gPSBwYXlsb2FkLmlkZW50aXR5Ow0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgi");
    sb.append("aWRlbnRpdHlfZGVmYXVsdCIsIHBheWxvYWQuaWRlbnRpdHkpOw0KICAgICAgICBzZWxmLmdvdG8obnVs");
    sb.append("bCwgJy8nKTsNCiAgICAgIH0sDQogICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7DQogICAg");
    sb.append("ICAgIGNvbnNvbGUubG9nKCJHb29nbGUgZmFpbHVyZTogIiArIHJlYXNvbik7DQogICAgICB9DQogICAg");
    sb.append("fSk7DQogIH07DQoNCiAgLyoqIGZvciBjdXN0b20gZWxlbWVudHMgdG8gbGVhcm4gb2YgdGhlIGlkZW50");
    sb.append("aXR5ICovDQogIHNlbGYuSUQgPSBmdW5jdGlvbiAoaWRlbnRpdHlOYW1lLCByZWRpcmVjdFRvKSB7DQog");
    sb.append("ICAgaWYgKGlkZW50aXR5TmFtZSA9PT0gdHJ1ZSkgew0KICAgICAgaWRlbnRpdHlOYW1lID0gImRlZmF1");
    sb.append("bHQiOw0KICAgIH0NCiAgICAvLyBJRiBpZGVudGl0eSBjb250YWlucyBkb3RzDQogICAgdmFyIGlkZW50");
    sb.append("aXR5ID0gbnVsbDsNCiAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uICgpIHsgfTsNCg0KICAgIHZhciB2");
    sb.append("YWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSk7DQogICAg");
    sb.append("aWYgKHZhbCkgew0KICAgICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdID0gdmFsOw0KICAgIH0NCg0K");
    sb.append("ICAgIGlmIChpZGVudGl0eU5hbWUuc3RhcnRzV2l0aCgiZGlyZWN0OiIpKSB7DQogICAgICAvLyBVc2Us");
    sb.append("IGFzIGlzDQogICAgICBpZGVudGl0eSA9IGlkZW50aXR5TmFtZS5zdWJzdHIoNyk7DQogICAgICBjb25z");
    sb.append("b2xlLmxvZygidG9Vc2U6IiArIGlkZW50aXR5KTsNCiAgICB9IGVsc2UgaWYgKGlkZW50aXR5TmFtZSBp");
    sb.append("biBpZGVudGl0aWVzKSB7DQogICAgICBpZGVudGl0eSA9IGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXTsN");
    sb.append("CiAgICAgIGNsZWFudXAgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGRlbGV0ZSBpZGVudGl0aWVzW2lk");
    sb.append("ZW50aXR5TmFtZV07DQogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJpZGVudGl0eV8iICsg");
    sb.append("aWRlbnRpdHlOYW1lKTsNCiAgICAgIH07DQogICAgfSBlbHNlIHsNCiAgICAgIC8vIHdoYXRldmVyIHBh");
    sb.append("Z2Ugd2UgYXJlLCBuZWVkcyB0byBkaWUgd2hpY2ggbWVhbnMgd2UgbmVlZCB0byBudWtlIGV2ZXJ5dGhp");
    sb.append("bmchDQogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICAgIC8vIFRPRE86");
    sb.append("IHRoaXMgYXNzdW1lcyBhIGZ1bGwgYXBwIGdvZXMgdG8gdGhlIHdpbmRvdw0KICAgICAgICBzZWxmLmdv");
    sb.append("dG8obnVsbCwgcmVkaXJlY3RUbyk7DQogICAgICB9LCAxMCk7DQogICAgICByZXR1cm4geyBhYm9ydDog");
    sb.append("dHJ1ZSB9Ow0KICAgIH0NCg0KICAgIHJldHVybiB7IGFib3J0OiBmYWxzZSwgY2xlYW51cDogY2xlYW51");
    sb.append("cCwgaWRlbnRpdHk6IGlkZW50aXR5IH07DQogIH07DQoNCiAgdmFyIGN1c3RvbURhdGFTb3VyY2VzID0g");
    sb.append("e307DQoNCiAgLyoqIHByb3ZpZGUgY3VzdG9tIGRhdGEgKi8NCiAgc2VsZi5QUkNVREEgPSBmdW5jdGlv");
    sb.append("biAobmFtZSwgZm9vKSB7DQogICAgY3VzdG9tRGF0YVNvdXJjZXNbbmFtZV0gPSBmb287DQogIH07DQoN");
    sb.append("CiAgLy8gPGN1c3RvbWRhdGEgc3JjPXNyYyAocGFyYW1ldGVyOng9eSkqID4NCiAgc2VsZi5DVURBID0g");
    sb.append("ZnVuY3Rpb24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgc3JjLCByeG9iaiwgcmVkaXJlY3RUbywgY2hpbGRN");
    sb.append("YWtlcikgew0KICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsNCiAgICByeG9iai5fXyA9IGRlYm91");
    sb.append("bmNlKDEwLCBmdW5jdGlvbiAoKSB7DQogICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsNCiAgICAgIG51a2Uo");
    sb.append("cGFyZW50KTsNCiAgICAgIHZhciBjdXN0b21UcmVlID0gZmFsc2U7DQogICAgICBpZiAoc3JjIGluIGN1");
    sb.append("c3RvbURhdGFTb3VyY2VzKSB7DQogICAgICAgIHZhciBjb25zID0gY3VzdG9tRGF0YVNvdXJjZXNbc3Jj");
    sb.append("XTsNCiAgICAgICAgaWYgKHR5cGVvZiAoY29ucykgPT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgIGN1");
    sb.append("c3RvbVRyZWUgPSBjb25zKHJ4b2JqLCBwcmlvclN0YXRlLCByZWRpcmVjdFRvLCBzZWxmKTsNCiAgICAg");
    sb.append("ICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKCFjdXN0b21UcmVlKSB7DQogICAgICAgIGN1c3RvbVRyZWUg");
    sb.append("PSBuZXcgQWRhbWFUcmVlU2ltcGxlKCk7DQogICAgICB9DQogICAgICB2YXIgc3RhdGUgPSB7DQogICAg");
    sb.append("ICAgIHNlcnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwNCiAgICAgICAgZGF0YTogeyBjb25uZWN0aW9u");
    sb.append("OiBwcmlvclN0YXRlLmNvbm5lY3Rpb24sIHRyZWU6IGN1c3RvbVRyZWUsIGRlbHRhOiB7fSwgcGFyZW50");
    sb.append("OiBudWxsLCBwYXRoOiBudWxsIH0sDQogICAgICAgIHZpZXc6IG5ld19kZWx0YV9jb3B5KHByaW9yU3Rh");
    sb.append("dGUudmlldyksDQogICAgICAgIGN1cnJlbnQ6ICdkYXRhJw0KICAgICAgfTsNCiAgICAgIGNoaWxkTWFr");
    sb.append("ZXIoc3RhdGUpOw0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7DQogICAgfSk7DQog");
    sb.append("IH07DQoNCiAgLy8gPHRpdGxlIHZhbHVlPSIuLi4iIC8+DQogIHNlbGYuU1QgPSBmdW5jdGlvbihyeG9i");
    sb.append("aikgew0KICAgIGRvY3VtZW50LnRpdGxlID0gcnhvYmoudmFsdWU7DQogICAgcnhvYmouX18gPSBkZWJv");
    sb.append("dW5jZSgxLCBmdW5jdGlvbiAoKSB7DQogICAgICBkb2N1bWVudC50aXRsZSA9IHJ4b2JqLnZhbHVlOw0K");
    sb.append("ICAgIH0pOw0KICB9DQoNCiAgLy8gPGNvbm5lY3Rpb24gLi4uPg0KICBzZWxmLkNPTk5FQ1QgPSBmdW5j");
    sb.append("dGlvbiAoc3RhdGUsIHJ4b2JqLCByZWRpcmVjdFRvKSB7DQogICAgdmFyIHVuc3ViID0geyB2aWV3OiBm");
    sb.append("dW5jdGlvbiAoKSB7IH0gfTsNCiAgICByeG9iai5fXyA9IGRlYm91bmNlKDEwLCBmdW5jdGlvbiAoKSB7");
    sb.append("DQogICAgICB2YXIgY28gPSBnZXRfY29ubmVjdGlvbl9vYmoocnhvYmoubmFtZSk7DQogICAgICB2YXIg");
    sb.append("ZGVzaXJlZCA9IHJ4b2JqLnNwYWNlICsgIi8iICsgcnhvYmoua2V5Ow0KICAgICAgdmFyIGJpbmQgPSBm");
    sb.append("dW5jdGlvbiAoc2VuZE5vdykgew0KICAgICAgICBjby5zcGFjZSA9IHJ4b2JqLnNwYWNlOw0KICAgICAg");
    sb.append("ICBjby5rZXkgPSByeG9iai5rZXk7DQogICAgICAgIHVuc3ViLnZpZXcgPSBzdGF0ZS52aWV3LnRyZWUu");
    sb.append("c3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAoY28ucHRyID09IG51bGwpIHsNCiAg");
    sb.append("ICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQogICAgICAgICAgY28ucHRyLnVwZGF0ZShzdGF0");
    sb.append("ZS52aWV3LnRyZWUuY29weSgpLCB7DQogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7IH0s");
    sb.append("DQogICAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAoKSB7IH0NCiAgICAgICAgICB9KTsNCiAgICAg");
    sb.append("ICAgfSk7DQogICAgICAgIGlmIChzZW5kTm93KSB7DQogICAgICAgICAgY29uc29sZS5sb2coc3RhdGUu");
    sb.append("dmlldy50cmVlLnN0cigpKTsNCiAgICAgICAgICBjby5wdHIudXBkYXRlKHN0YXRlLnZpZXcudHJlZS5j");
    sb.append("b3B5KCksIHsNCiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHsgfSwNCiAgICAgICAgICAg");
    sb.append("IGZhaWx1cmU6IGZ1bmN0aW9uICgpIHsgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9");
    sb.append("Ow0KICAgICAgaWYgKGNvLnB0ciAhPSBudWxsICYmIGNvLmJvdW5kID09IGRlc2lyZWQpIHsNCiAgICAg");
    sb.append("ICAgYmluZCh0cnVlKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgaWYgKGNvLnB0ciAh");
    sb.append("PSBudWxsKSB7DQogICAgICAgIGNvLnB0ci5lbmQoKTsNCiAgICAgIH0NCiAgICAgIGNvLmJvdW5kID0g");
    sb.append("ZGVzaXJlZDsNCiAgICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQocnhvYmouaWRlbnRpdHksIHJlZGly");
    sb.append("ZWN0VG8pOw0KICAgICAgaWYgKGlkTG9va3VwLmFib3J0KSB7DQogICAgICAgIHJldHVybjsNCiAgICAg");
    sb.append("IH0NCiAgICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5Ow0KICAgICAgdmFyIGNsZWFu");
    sb.append("dXAgPSBpZExvb2t1cC5jbGVhbnVwOw0KICAgICAgdW5zdWIudmlldygpOw0KICAgICAgdmFyIHZ3ID0g");
    sb.append("c3RhdGUudmlldy50cmVlLmNvcHkoKTsNCiAgICAgIGNvLnB0ciA9IGNvbm5lY3Rpb24uQ29ubmVjdGlv");
    sb.append("bkNyZWF0ZShpZGVudGl0eSwgcnhvYmouc3BhY2UsIHJ4b2JqLmtleSwgdncsIHsNCiAgICAgICAgbmV4");
    sb.append("dDogZnVuY3Rpb24gKHBheWxvYWQpIHsNCiAgICAgICAgICBpZiAoJ2RhdGEnIGluIHBheWxvYWQuZGVs");
    sb.append("dGEpIHsNCiAgICAgICAgICAgIGNvLnRyZWUudXBkYXRlKHBheWxvYWQuZGVsdGEuZGF0YSk7DQogICAg");
    sb.append("ICAgICAgfQ0KICAgICAgICAgIGlmICgnb3V0c3RhbmRpbmcnIGluIHBheWxvYWQuZGVsdGEpIHsNCiAg");
    sb.append("ICAgICAgICAgIGNvLm9uZGVjaWRlKHBheWxvYWQuZGVsdGEub3V0c3RhbmRpbmcpOw0KICAgICAgICAg");
    sb.append("IH0NCiAgICAgICAgfSwNCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgew0KICAgICAg");
    sb.append("ICAgIC8vIFRPRE86IGlmIG5vdCBhdXRob3JpemVkDQogICAgICAgICAgLyoNCiAgICAgICAgICBpZiAo");
    sb.append("ZmFsc2UpIHsNCiAgICAgICAgICAgIGNsZWFudXAoKTsNCiAgICAgICAgICB9DQogICAgICAgICAgKi8N");
    sb.append("CiAgICAgICAgICBjby5wdHIgPSBudWxsOw0KICAgICAgICAgIC8vIFRPRE86IHNjaGVkdWxlIGEgcmV0");
    sb.append("cnk/IGludm9rZTogIHJ4b2JqLl9fKCk7DQogICAgICAgIH0sDQogICAgICB9KTsNCiAgICAgIGJpbmQo");
    sb.append("ZmFsc2UpOw0KICAgIH0pOw0KICB9Ow0KDQogIHNlbGYuSU5URVJOQUwgPSBmdW5jdGlvbiAocHJpb3JT");
    sb.append("dGF0ZSkgew0KICAgIHJldHVybiB7DQogICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2UsDQog");
    sb.append("ICAgICBkYXRhOiB7IGNvbm5lY3Rpb246IG51bGwsIHRyZWU6IG5ldyBBZGFtYVRyZWVTaW1wbGUoKSwg");
    sb.append("ZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwNCiAgICAgIHZpZXc6IG5ld19kZWx0");
    sb.append("YV9jb3B5KHByaW9yU3RhdGUudmlldyksDQogICAgICBjdXJyZW50OiAnZGF0YScNCiAgICB9Ow0KICB9");
    sb.append("Ow0KDQogIHZhciByZWNhbGxfZW1haWwgPSBmdW5jdGlvbiAoZWwpIHsNCiAgICBpZiAoZWwudGFnTmFt");
    sb.append("ZS50b1VwcGVyQ2FzZSgpID09ICJJTlBVVCIpIHsNCiAgICAgIGlmICgiZW1haWwiID09IGVsLnR5cGUg");
    sb.append("JiYgImVtYWlsIiA9PSBlbC5uYW1lKSB7DQogICAgICAgIGVsLnZhbHVlID0gbG9jYWxTdG9yYWdlLmdl");
    sb.append("dEl0ZW0oImVtYWlsX3JlbWVtYmVyIik7DQogICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgIGlmICgn");
    sb.append("Y2hpbGRyZW4nIGluIGVsKSB7DQogICAgICAgIHZhciBhcnIgPSBlbC5jaGlsZHJlbjsNCiAgICAgICAg");
    sb.append("dmFyIG4gPSBhcnIubGVuZ3RoOw0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgew0K");
    sb.append("ICAgICAgICAgIHJlY2FsbF9lbWFpbChlbC5jaGlsZHJlbltrXSk7DQogICAgICAgIH0NCiAgICAgIH0N");
    sb.append("CiAgICB9DQogIH07DQoNCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1hZGFtYTpzaWduLWluDQogIHNl");
    sb.append("bGYuYVNPID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIGZhaWx1cmVWYXIsIGZv");
    sb.append("cndhcmRUbykgew0KICAgIHZhciBzaWduYWwgPSBtYWtlX2ZhaWx1cmVfc2lnbmFsKHN0YXRlLCBmYWls");
    sb.append("dXJlVmFyKTsNCiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAgICByZWNhbGxf");
    sb.append("ZW1haWwoZm9ybSk7DQogICAgfSwgMSk7DQogICAgZm9ybS5vbnN1Ym1pdCA9IGZ1bmN0aW9uIChldnQp");
    sb.append("IHsNCiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgdmFyIHJlcSA9IGdldF9mb3JtKGZv");
    sb.append("cm0pOw0KICAgICAgaWYgKHJlcS5yZW1lbWJlcikgew0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRl");
    sb.append("bSgiZW1haWxfcmVtZW1iZXIiLCByZXEuZW1haWwpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbG9j");
    sb.append("YWxTdG9yYWdlLnNldEl0ZW0oImVtYWlsX3JlbWVtYmVyIiwgIiIpOw0KICAgICAgfQ0KICAgICAgY29u");
    sb.append("bmVjdGlvbi5BY2NvdW50TG9naW4ocmVxLmVtYWlsLCByZXEucGFzc3dvcmQsIHsNCiAgICAgICAgc3Vj");
    sb.append("Y2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsNCiAgICAgICAgICBzaWduYWwoZmFsc2UpOw0KICAgICAg");
    sb.append("ICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxvYWQuaWRlbnRpdHk7DQogICAgICAgICAg");
    sb.append("bG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRl");
    sb.append("bnRpdHkpOw0KICAgICAgICAgIHNlbGYuZ290byhzdGF0ZS52aWV3LCBmb3J3YXJkVG8pOw0KICAgICAg");
    sb.append("ICB9LA0KICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAoY29kZSkgew0KICAgICAgICAgIHNpZ25hbCh0");
    sb.append("cnVlKTsNCiAgICAgICAgICAvLyBUT0RPOiBzb3J0IG91dCBjb25zb2xlIGxvZ2dpbmcNCiAgICAgICAg");
    sb.append("ICBjb25zb2xlLmxvZygiRkFJTFVSRToiICsgY29kZSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAg");
    sb.append("IH07DQogIH07DQoNCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1hZGFtYTpzaWduLXVwDQogIHNlbGYu");
    sb.append("YVNVID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBmYWlsdXJlVmFyLCBmb3J3YXJkVG8pIHsNCiAgICB2");
    sb.append("YXIgc2lnbmFsID0gbWFrZV9mYWlsdXJlX3NpZ25hbChzdGF0ZSwgZmFpbHVyZVZhcik7DQogICAgZm9y");
    sb.append("bS5vbnN1Ym1pdCA9IGZ1bmN0aW9uIChldnQpIHsNCiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOw0K");
    sb.append("ICAgICAgdmFyIHJlcSA9IGdldF9mb3JtKGZvcm0pOw0KICAgICAgY29ubmVjdGlvbi5Jbml0U2V0dXBB");
    sb.append("Y2NvdW50KHJlcS5lbWFpbCwgew0KICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgew0K");
    sb.append("ICAgICAgICAgIHNpZ25hbChmYWxzZSk7DQogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImVt");
    sb.append("YWlsIiwgcmVxLmVtYWlsKTsNCiAgICAgICAgICBzZWxmLmdvdG8oc3RhdGUudmlldywgZm9yd2FyZFRv");
    sb.append("KTsNCiAgICAgICAgfSwNCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKGNvZGUpIHsNCiAgICAgICAg");
    sb.append("ICBzaWduYWwodHJ1ZSk7DQogICAgICAgICAgY29uc29sZS5sb2coIkZBSUxVUkU6Iik7DQogICAgICAg");
    sb.append("IH0NCiAgICAgIH0pOw0KICAgIH07DQogIH07DQoNCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1hZGFt");
    sb.append("YTpzZXQtcGFzc3dvcmQNCiAgc2VsZi5hU1AgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGZhaWx1cmVW");
    sb.append("YXIsIGZvcndhcmRUbykgew0KICAgIHZhciBzaWduYWwgPSBtYWtlX2ZhaWx1cmVfc2lnbmFsKHN0YXRl");
    sb.append("LCBmYWlsdXJlVmFyKTsNCiAgICBmb3JtLm9uc3VibWl0ID0gZnVuY3Rpb24gKGV2dCkgew0KICAgICAg");
    sb.append("ZXZ0LnByZXZlbnREZWZhdWx0KCk7DQogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm0oZm9ybSk7DQogICAg");
    sb.append("ICBpZiAoISgnZW1haWwnIGluIHJlcSkpIHsNCiAgICAgICAgcmVxLmVtYWlsID0gbG9jYWxTdG9yYWdl");
    sb.append("LmdldEl0ZW0oJ2VtYWlsJyk7DQogICAgICB9DQogICAgICBjb25uZWN0aW9uLkluaXRDb21wbGV0ZUFj");
    sb.append("Y291bnQocmVxLmVtYWlsLCBmYWxzZSwgcmVxLmNvZGUsIHsNCiAgICAgICAgc3VjY2VzczogZnVuY3Rp");
    sb.append("b24gKGluaXQpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhpbml0KTsNCiAgICAgICAgICB2YXIgaWRl");
    sb.append("bnRpdHkgPSBpbml0LmlkZW50aXR5Ow0KICAgICAgICAgIGNvbm5lY3Rpb24uQWNjb3VudFNldFBhc3N3");
    sb.append("b3JkKGluaXQuaWRlbnRpdHksIHJlcS5wYXNzd29yZCwgew0KICAgICAgICAgICAgc3VjY2VzczogZnVu");
    sb.append("Y3Rpb24gKCkgew0KICAgICAgICAgICAgICBzaWduYWwoZmFsc2UpOw0KICAgICAgICAgICAgICBsb2Nh");
    sb.append("bFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfZGVmYXVsdCIsIGlkZW50aXR5KTsNCiAgICAgICAgICAg");
    sb.append("ICAgc2VsZi5nb3RvKHN0YXRlLnZpZXcsIGZvcndhcmRUbyk7DQogICAgICAgICAgICB9LA0KICAgICAg");
    sb.append("ICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgew0KICAgICAgICAgICAgICBzaWduYWwodHJ1");
    sb.append("ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQoNCiAgICAgICAgfSwNCiAgICAgICAgZmFp");
    sb.append("bHVyZTogZnVuY3Rpb24gKHJlYXNvbikgew0KICAgICAgICAgIHNpZ25hbCh0cnVlKTsNCiAgICAgICAg");
    sb.append("fQ0KICAgICAgfSk7DQogICAgfTsNCiAgfTsNCg0KICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPXNlbmQ6");
    sb.append("JGNoYW5uZWwNCiAgc2VsZi5hU0QgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGNoYW5uZWwsIGZhaWx1");
    sb.append("cmVWYXIpIHsNCiAgICB2YXIgc2lnbmFsID0gbWFrZV9mYWlsdXJlX3NpZ25hbChzdGF0ZSwgZmFpbHVy");
    sb.append("ZVZhcik7DQogICAgZm9ybS5vbnN1Ym1pdCA9IGZ1bmN0aW9uIChldnQpIHsNCiAgICAgIGV2dC5wcmV2");
    sb.append("ZW50RGVmYXVsdCgpOw0KICAgICAgdmFyIHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7DQogICAgICBz");
    sb.append("dGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbCwgZ2V0X2Zvcm0oZm9ybSksIHsNCiAg");
    sb.append("ICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsNCiAgICAgICAgICBzaWduYWwoZmFsc2Up");
    sb.append("Ow0KICAgICAgICAgIGNvbnNvbGUubG9nKCJTdWNjZXNzfCIgKyBwYXlsb2FkLnNlcSArICI7bGF0ZW5j");
    sb.append("eT0iICsgKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQpKTsgLy8gVE9ETzogZ3JhcGggaXQNCiAgICAg");
    sb.append("ICAgfSwNCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgew0KICAgICAgICAgIHNpZ25h");
    sb.append("bCh0cnVlKTsNCiAgICAgICAgICBjb25zb2xlLmxvZygiRkFJTFVSRSBUTyBTRU5EOiAiICsgcmVhc29u");
    sb.append("KTsgLy8gVE9ETzogbG9nIGl0DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH07DQogIH07DQoNCiAg");
    sb.append("d2luZG93LnJ4aHRtbCA9IHNlbGY7DQogIHJldHVybiBzZWxmOw0KfSkoKTs=");
    return sb.toString();
  }
}
