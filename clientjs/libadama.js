function AdamaTree(){function i(e){if(Array.isArray(e))for(var t=[],n=0;n<e.length;n++)t.push(i(e[n]));else{if("object"!=typeof e)return e;t={};for(key in e)"#"!=key[0]&&"__key"!=key&&"@o"!=key&&(t[key]=i(e[key]))}return t}function E(e,t){if(0==e.length)return e;for(var n=[],i=0;i<e.length;i++)t in e[i]&&n.push(e[i][t]);return n}function D(e,t){for(var n=0;n<e.length;n++){var i=e[n];if("@e"in i)for(var r=i["@e"],o=0;o<r.length;o++)r[o](t)}}function N(e,t,n){for(var i in t){var r="#"+i,o=e[i],a=t[i];if(null==a)Array.isArray(o)&&(r in e&&L(E(n,r)),delete e[r]),L(E(n,i)),delete e[i];else if("object"!=typeof a||Array.isArray(a))e[i]=a,D(E(n,i),a);else if(Array.isArray(o)||"@o"in a||"@s"in a){i in e||(e[i]=[]),r in e||(e[r]={},"@o"in a&&(e[r]["@o"]=!0),e[r].__key=i);var c,u=e[r],s=E(n,i),d=null,l=null,f={};for(c in a){var h=a[c];if("@o"==c)d=h;else if("@s"==c)l=h;else if(null==h)c in u&&(f[c]=function(e){L(E(s,e)),delete u[e],P(s,e);for(var t=s,n=e,i=0;i<t.length;i++){var r=t[i];if("-"in r){r=r["-"];if("@e"in r)for(var o=r["@e"],a=0;a<o.length;a++)o[a](n)}}});else{if(!(c in u)){w=g=y=m=_=void 0;for(var p=s,v=c,_=0;_<p.length;_++){var m=p[_];if("+"in m){var y=m["+"];if("@e"in y)for(var g=y["@e"],w=0;w<g.length;w++)U(m,g[w](v),v)}}}h=a[c];"object"==typeof h?(c in u||(u[c]={},u[c].__key=c),f[c]=function(e){N(u[e],a[e],E(s,e)),D(E(s,e),u[e])}):(u[c]=h,f[c]=function(e){D(E(s,e),u[e])})}}var b=e[i],k=[];if(null!=d){for(var x=[],S=[],A=0;A<d.length;A++){var C=d[A],q=typeof C;if("string"==q||"number"==q)x.push(u[C]),S.push(""+C);else for(var q=C[0],I=C[1],T=q;T<=I;T++)x.push(b[T]),S.push(b[T].__key)}k.push(function(){D(E(s,"~"),S)}),e[i]=x}else if(null!=l){for(x=[],S=[],A=0;A<l;A++)x[A]=b[A],S.push(""+A);k.push(function(){D(E(s,"~"),S)}),e[i]=x}for(c in f)f[c](c);for(A=0;A<k;A++)k[A]();D(s,e[i])}else{i in e&&"object"==typeof e[i]||(e[i]={});o=E(n,i);N(e[i],a,o),D(o,e[i])}}D(n,e)}function r(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)r(e[n],t);else if("object"==typeof e)for(var i in e)"@e"==i?r(e[i],t):(i in t||(t[i]={}),r(e[i],t[i]));else"function"==typeof e&&("@e"in t?t["@e"].push(e):t["@e"]=[e])}function u(e){var t,n={};for(t in e)if("#"!=t[0]&&"@o"!=t&&"__key"!=t){var i=e[t];if("#"+t in e){var r={};if("@o"in e["#"+t]){for(var o=[],a=0;a<i.length;a++){var c=i[a];r[c.__key]=u(c),o.push(i[a].__key)}r["@o"]=o}else{for(a=0;a<i.length;a++)r[""+a]=u(i[a]);r["@s"]=i.length}n[t]=r}else n[t]="object"==typeof i?u(i):i}return n}var o=0,a={},c={},U=(this.nuke=function(){this.all_subscriptions={}},this.copy=function(){return i(a)},this.str=function(){return JSON.stringify(a)},function(e,t,n){if(Array.isArray(t))for(var i=0;i<t.length;i++)U(e,t[i],n);else if("function"==typeof t)n in e||(e[n]={}),"@e"in(o=e[n])?o["@e"].push(t):o["@e"]=[t];else if("object"==typeof t){n in e||(e[n]={});var r,o=e[n];for(r in t)"@e"==r?U(e,t[r],n):U(o,t[r],r)}}),L=function(e){if(Array.isArray(e))for(var t=e.length,n=0;n<t;n++)L(e[n]);else if("object"==typeof e)for(var i in e){var r=e[i];if("@e"==i)for(var o=0;o<r.length;o++)r[o](null);else L(r)}},P=function(e,t){if(Array.isArray(e))for(var n=e.length,i=0;i<n;i++)P(e[i],t);else"object"==typeof e&&t in e&&delete e[t]};this.update=function(e){var t,n=[];for(t in c)n.push(c[t]);N(a,e,n)};this.subscribe=function(e){var t={},e=(r(e,t),u(a)),n=(N({},e,[t]),""+o++);return c[n]=t,function(){delete c[n]}}}class WebSocketAdamaConnection{constructor(e){this.backoff=1,this.host=e,this.url="wss://"+e+"/~s",this.connected=!1,this.assets=!0,this.dead=!1,this.maximum_backoff=5e3,this.reset_backoff=1e3,this.socket=null,this.onstatuschange=function(e){},this.onping=function(e,t){},this.scheduled=!1,this.callbacks=new Map,this.nextId=0,this.onreconnect=new Map}stop(){this.dead=!0,null!==this.socket&&this.socket.close()}_retry(){var e,t;this.socket=null,this.connected&&(this.connected=!1,this.onstatuschange(!1)),this.callbacks.clear(),this.dead||this.scheduled||(e=!1,this.backoff+=Math.random()*this.backoff,this.backoff>this.maximum_backoff&&(this.backoff=this.maximum_backoff,e=!0),this.scheduled=!0,t=this,setTimeout(function(){t.start()},this.backoff),e&&(this.backoff/=2))}start(){var n=this;this.scheduled=!1,this.dead=!1,this.socket=new WebSocket(this.url),this.socket.onmessage=function(e){var t,e=JSON.parse(e.data);{if(!("ping"in e))return"status"in e?"connected"!=e.status?(n.socket.close(),n.socket=null,n.backoff=n.reset_backoff,void n._retry()):(n.backoff=1,n.connected=!0,n.assets=e.assets,n.onstatuschange(!0),n._reconnect(),void n.ConfigureMakeOrGetAssetKey({success:function(e){try{var t=new XMLHttpRequest;t.open("GET","https://"+n.host+"/~p"+e.assetKey,!0),t.withCredentials=!0,t.send()}catch(e){console.log(e)}},failure:function(){}})):void("failure"in e?n.callbacks.has(e.failure)&&(t=n.callbacks.get(e.failure))&&(n.callbacks.delete(e.failure),t(e)):"deliver"in e&&n.callbacks.has(e.deliver)&&(t=n.callbacks.get(e.deliver))&&(e.done&&n.callbacks.delete(e.deliver),t(e)));n.onping(e.ping,e.latency),e.pong=(new Date).getTime()/1e3,n.socket.send(JSON.stringify(e))}},this.socket.onclose=function(e){n._retry()},this.socket.onerror=function(e){n._retry()}}_write(e,t){this.connected?(this.callbacks.set(e.id,t),this.socket.send(JSON.stringify(e))):t({failure:600,reason:9999})}async wait_connected(){var n,i;return this.connected?new Promise(function(e){e(!0)}):(i=(n=this).onstatuschange,new Promise(function(t){n.onstatuschange=function(e){i(e),e&&(t(!0),n.onstatuschange=i)}}))}_reconnect(){this.onreconnect.forEach(function(e,t){e.__retry()})}__execute_rr(t){var n=this;return t.first=!0,n._write(t.request,function(e){t.first&&(t.first=!1,"failure"in e?"failure"in t.responder&&t.responder.failure(e.reason):"success"in t.responder&&t.responder.success(e.response)),n.onreconnect.delete(t.id)}),n.onreconnect.set(t.id,t),t.__retry=function(){n.__execute_rr(t)},t}__execute_stream(t){var n=this;return n._write(t.request,function(e){"failure"in e?("failure"in t.responder&&t.responder.failure(e.reason),n.onreconnect.delete(t.id)):(e.response&&"next"in t.responder&&t.responder.next(e.response),e.done&&("complete"in t.responder&&t.responder.complete(),n.onreconnect.delete(t.id)))}),n.onreconnect.set(t.id,t),t.__retry=function(){n.__execute_stream(t)},t}__id(){return this.nextId++,this.nextId}InitSetupAccount(e,t){var n=this.__id();return this.__execute_rr({id:n,responder:t,request:{method:"init/setup-account",id:n,email:e}})}InitConvertGoogleUser(e,t){var n=this.__id();return this.__execute_rr({id:n,responder:t,request:{method:"init/convert-google-user",id:n,"access-token":e}})}InitCompleteAccount(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"init/complete-account",id:r,email:e,revoke:t,code:n}})}AccountSetPassword(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"account/set-password",id:i,identity:e,password:t}})}AccountLogin(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"account/login",id:i,email:e,password:t}})}Probe(e,t){var n=this.__id();return this.__execute_rr({id:n,responder:t,request:{method:"probe",id:n,identity:e}})}AuthorityCreate(e,t){var n=this.__id();return this.__execute_rr({id:n,responder:t,request:{method:"authority/create",id:n,identity:e}})}AuthoritySet(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"authority/set",id:r,identity:e,authority:t,"key-store":n}})}AuthorityGet(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"authority/get",id:i,identity:e,authority:t}})}AuthorityList(e,t){var n=this.__id();return this.__execute_stream({id:n,responder:t,request:{method:"authority/list",id:n,identity:e}})}AuthorityDestroy(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"authority/destroy",id:i,identity:e,authority:t}})}SpaceCreate(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"space/create",id:r,identity:e,space:t,template:n}})}SpaceGenerateKey(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"space/generate-key",id:i,identity:e,space:t}})}SpaceUsage(e,t,n,i){var r=this.__id();return this.__execute_stream({id:r,responder:i,request:{method:"space/usage",id:r,identity:e,space:t,limit:n}})}SpaceGet(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"space/get",id:i,identity:e,space:t}})}SpaceSet(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"space/set",id:r,identity:e,space:t,plan:n}})}SpaceSetRxhtml(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"space/set-rxhtml",id:r,identity:e,space:t,rxhtml:n}})}SpaceGetRxhtml(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"space/get-rxhtml",id:i,identity:e,space:t}})}SpaceDelete(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"space/delete",id:i,identity:e,space:t}})}SpaceSetRole(e,t,n,i,r){var o=this.__id();return this.__execute_rr({id:o,responder:r,request:{method:"space/set-role",id:o,identity:e,space:t,email:n,role:i}})}SpaceReflect(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"space/reflect",id:r,identity:e,space:t,key:n}})}SpaceList(e,t,n,i){var r=this.__id();return this.__execute_stream({id:r,responder:i,request:{method:"space/list",id:r,identity:e,marker:t,limit:n}})}DomainMap(e,t,n,i,r){var o=this.__id();return this.__execute_rr({id:o,responder:r,request:{method:"domain/map",id:o,identity:e,domain:t,space:n,certificate:i}})}DomainUnmap(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"domain/unmap",id:i,identity:e,domain:t}})}DomainGet(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"domain/get",id:i,identity:e,domain:t}})}DocumentCreate(e,t,n,i,r,o){var a=this.__id();return this.__execute_rr({id:a,responder:o,request:{method:"document/create",id:a,identity:e,space:t,key:n,entropy:i,arg:r}})}DocumentList(e,t,n,i,r){var o=this.__id();return this.__execute_stream({id:o,responder:r,request:{method:"document/list",id:o,identity:e,space:t,marker:n,limit:i}})}ConnectionCreate(e,t,n,i,r){var u=this,s=u.__id();return u.__execute_stream({id:s,responder:r,request:{method:"connection/create",id:s,identity:e,space:t,key:n,"viewer-state":i},send:function(e,t,n){var i=u.__id();u.__execute_rr({id:i,responder:n,request:{method:"connection/send",id:i,connection:s,channel:e,message:t}})},sendOnce:function(e,t,n,i){var r=u.__id();u.__execute_rr({id:r,responder:i,request:{method:"connection/send-once",id:r,connection:s,channel:e,dedupe:t,message:n}})},canAttach:function(e){var t=u.__id();u.__execute_rr({id:t,responder:e,request:{method:"connection/can-attach",id:t,connection:s}})},attach:function(e,t,n,i,r,o,a){var c=u.__id();u.__execute_rr({id:c,responder:a,request:{method:"connection/attach",id:c,connection:s,"asset-id":e,filename:t,"content-type":n,size:i,"digest-md5":r,"digest-sha384":o}})},update:function(e,t){var n=u.__id();u.__execute_rr({id:n,responder:t,request:{method:"connection/update",id:n,connection:s,"viewer-state":e}})},end:function(e){var t=u.__id();u.__execute_rr({id:t,responder:e,request:{method:"connection/end",id:t,connection:s}})}})}ConfigureMakeOrGetAssetKey(e){var t=this.__id();return this.__execute_rr({id:t,responder:e,request:{method:"configure/make-or-get-asset-key",id:t}})}AttachmentStart(e,t,n,i,r,o){var a=this,c=a.__id();return a.__execute_stream({id:c,responder:o,request:{method:"attachment/start",id:c,identity:e,space:t,key:n,filename:i,"content-type":r},append:function(e,t,n){var i=a.__id();a.__execute_rr({id:i,responder:n,request:{method:"attachment/append",id:i,upload:c,"chunk-md5":e,"base64-bytes":t}})},finish:function(e){var t=a.__id();a.__execute_rr({id:t,responder:e,request:{method:"attachment/finish",id:t,upload:c}})}})}}var Adama={Production:"aws-us-east-2.adama-platform.com",Connection:WebSocketAdamaConnection},RxHTML=function(){function o(e){return e.startsWith("/")?S+e.substring(1):e}function u(e){var d;return e in k?k[e]:((d={name:e,ptr:null,tree:new AdamaTree,outstanding:{},decisions:{},resets:{},id:0}).subscribe_any=function(e){var t="-|"+this.id++;return this.decisions[t]=e,function(){delete this.decisions[t]}.bind(this)}.bind(d),d.subscribe=function(e,t){var n=e+"|"+this.id++;return this.decisions[n]=t,function(){delete this.decisions[n]}.bind(this)}.bind(d),d.subscribe_reset=function(e){var t="reset|"+this.id++;return this.resets[t]=e,function(){delete this.resets[t]}.bind(this)}.bind(d),d.ondecide=function(e){var t,n=[];for(t in d.resets)(0,d.resets[t])()||n.push(t);for(var i=0;i<n.length;i++)delete d.resets[n[i]];for(r in d.outstanding)d.outstanding[r]={options:[]};for(var r,o=e.length,i=0;i<o;i++){var a=e[i];d.outstanding[a.channel]=a}for(r in d.outstanding){var c,u=d.outstanding[r],s=[];for(c in d.decisions)!c.startsWith(r+"|")&&!c.startsWith("-|")||d.decisions[c](u,r)||s.push(c);for(i=0;i<s.length;i++)delete d.decisions[s[i]]}},k[e]=d)}function f(e,t,n){e=w.pI(e,t),"@e"in(t=e[e.current]).delta?t.delta["@e"].push(n):t.delta["@e"]=[n]}function d(e){if(null==e)return null;var t=null,n={};return null!=(t=null!=e.parent?d(e.parent):t)&&(t.delta[e.path]=n),{tree:e.tree,parent:t,delta:n,path:e.path}}function l(e){for(var t=e;null!=t.parent;)t=t.parent;return t}function h(e){for(var t=e.lastChild;t;)e.removeChild(t),t=e.lastChild}function s(e,t){var n={inflight:!1,timeout:null,inflight:!1};return function(){n.inflight||(n.inflight=!0,n.timeout=window.setTimeout(function(){n.inflight=!1,n.timeout=null,t()},e))}}function p(){return{__data:function(){},__view:function(){}}}function v(e){e.__data=function(){},e.__view=function(){}}function _(e){e.__data(),e.__view()}function m(e,t){null!=e.data?t.__data=e.data.tree.subscribe(l(e.data).delta):t.__data=function(){},null!=e.view?t.__view=e.view.tree.subscribe(l(e.view).delta):t.__view=function(){}}function y(e){var t={service:e.service,data:d(e.data),view:d(e.view),current:e.current};return null!=t.data&&(t.data.connection=e.data.connection),t}function g(e,t,n,i){if(t in e.data.connection.outstanding)for(var r=e.data.connection.outstanding[t].options,o=0;o<r.length;o++){var a=r[o];if(n in a&&a[n]==i)return a}return null}function a(e){if("INPUT"==e.tagName.toUpperCase())"email"==e.type&&"email"==e.name&&(e.value=localStorage.getItem("email_remember"));else if("children"in e)for(var t=e.children.length,n=0;n<t;n++)a(e.children[n])}var e,t,w={},r={},c={},b=new Adama.Connection(Adama.Production),k={},x=document.createElement("div"),n=document.createElement("span"),i=document.createElement("span"),S=(b.onstatuschange=function(e){i.innerHTML=e?"Yes":"No",e?b.onping=function(e,t){1<=t&&(n.innerHTML=""+t)}:(n.innerHTML="",b.onping=function(e,t){})},x.appendChild(i),x.appendChild(n),x.style="position:fixed; bottom:0px; right:0px",b.start(),"/"),A=function(e){return e},C=(window.location.hostname.endsWith(".adama-platform.com")&&!window.location.hostname.endsWith("ide.adama-platform.com")&&(e=window.location.pathname.split("/"),S=[e[0],e[1],e[2],""].join("/"),t=e[0].length+e[1].length+e[2].length+2,A=function(e){return e.substring(t)}),w.make=function(){return new AdamaTree},function(e,t){var n;return null!=e.parent?((n=C(e.parent,{}))[e.path]=t,n):t}),q=(w.pV=function(e){return{service:e.service,data:e.data,view:e.view,current:"view"}},w.pD=function(e){return{service:e.service,data:e.data,view:e.view,current:"data"}},w.pR=function(e){for(var t={service:e.service,data:e.data,view:e.view,current:e.current},n=t[e.current];null!=n.parent;){if(null==n.parent)return t[e.current],n;n=n.parent}return t[e.current]=n,t},w.pU=function(e){var t={service:e.service,data:e.data,view:e.view,current:e.current},n=t[e.current];return null!=n.parent&&(t[e.current]=n),t},w.pI=function(e,t){var n=e[e.current],i=(t in n.delta||(n.delta[t]={}),{service:e.service,data:e.data,view:e.view,current:e.current});return i[e.current]={tree:n.tree,delta:n.delta[t],parent:n,path:t},"data"==i.current&&(i.data.connection=n.connection),i},w.pEV=function(e,t){return t in e.view.delta||(e.view.delta[t]={}),{service:e.service,data:e.data,view:{tree:e.view.tree,delta:e.view.delta[t],parent:e.view,path:t},current:e.current}},w.Y=function(e,t,n,i){f(e,n,function(e){t[n]=e,i()})},w.YS=function(e,t,n){f(e,n,function(e){t[n]=e})},w.T=function(e){return document.createTextNode(e)},w.L=function(e,t){var n=document.createTextNode("");return f(e,t,function(e){n.nodeValue=e}),n},w.LT=function(e,t,n){var i=document.createTextNode("");return f(e,t,function(e){i.nodeValue=n(e)}),i},w.E=function(e,t){return null==t?document.createElement(e):((e=document.createElementNS(t,e)).setAttribute("xmlns",t),e)},w.P=function(t,n,i,r){var o=p();i.__=function(){var e;"name"in i&&this.name!=i.name&&(_(o),this.name=i.name,h(t),e=u(i.name),e={service:n.service,data:{connection:e,tree:e.tree,delta:{},parent:null,path:null},view:d(n.view),current:"data"},r(e),m(e,o))}.bind({name:""})},w.TP=function(e,t){r[e]=t},w.HREF=function(e,n){e.setAttribute("href",o(n)),e.onclick=function(e){var t=(n.startsWith("/")?n.substring(1):n).split("/");return!N(t,0,c,{})||(e.preventDefault(),w.run(document.body,n,!0),!1)}},w.ACLASS=function(e,t){e.setAttribute("class",t)},w.ASRC=function(e,t){e.setAttribute("src",t)},w.UT=function(e,t,n,i){(0,r[n])(e,t,i)},w.SW=function(n,i,e,r){var t={prior:null},t=(v(t),function(e){var t;e!=this.prior&&(this.prior=e,_(this),h(n),t=y(i),r(n,t,""+e),m(t,this))}.bind(t));f(i,e,t)},w.IT=function(r,e,t,o,a){var c=w.pI(e,t),u={},s={};f(e,t,{"+":function(e){var t=w.pI(c,e),n=(t={service:(t=o?w.pEV(c,e):t).service,data:t.data,view:d(t.view),current:t.current},p()),i=a(t);return u[e]=i,s[e]=n,r.append(i),e=n,null!=(i=t).view?e.__view=i.view.tree.subscribe(l(i.view).delta):e.__view=function(){},t[t.current].delta},"-":function(e){e in u&&(r.removeChild(u[e]),delete u[e]),e in s&&(_(s[e]),delete s[e])},"~":function(e){h(r);for(var t=0;t<e.length;t++)r.append(u[e[t]])}})},{}),I=(w.PRCUAC=function(e,t){q[e]=t},w.exCC=function(e,t,n,i){e.addEventListener(t,function(){i in q&&q[i]()})},w.aCC=function(t,n,i,e){var r=E(n,e);t.onsubmit=function(e){i in q&&(e.preventDefault(),e=T(t),q[i](e,n,r,w))}},w.exD=function(e,t,n,i,r,o){var a={value:null};e.addEventListener(t,function(){var e=g(n,r,o,a.value);if(null!=e){let t=performance.now();n.data.connection.ptr.send(r,e,{failure:function(e){},success:function(e){console.log("Success|"+e.seq+";latency="+(performance.now()-t))}})}}),f(n,i,function(e){a.value=e})},w.onS=function(e,t,n,i,r){function o(){(e={})[i]="function"==typeof r?r():r;var e=C(n,e);n[n.current].tree.update(e)}"load"==t?window.setTimeout(o,1):e.addEventListener(t,o)},w.onT=function(e,t,n,i){var r={value:!1};e.addEventListener(t,function(){var e={},e=(e[i]=!r.value,C(n,e));n[n.current].tree.update(e)}),f(n,i,function(e){r.value=1==e})},w.onD=function(e,t,n,i,r){var o={value:0};e.addEventListener(t,function(){var e={},e=(e[i]=o.value+r,C(n,e));n[n.current].tree.update(e)}),f(n,i,function(e){"number"==typeof e?o.value=e:(e=parseFloat(e),isNaN(e)||(o.value=e))})},w.DE=function(n,i,e,r,o,t,a,c,u,s){var d={value:"",owner:n,shown:!1,eval:null};v(d);d.update=function(){var e,t=null!=g(i,r,o,d.value);d.eval!=t&&(d.eval=t,t=d.eval,_(d),h(n),e=y(i),(t===a?u:s)(n,e),m(e,d))},i.data.connection.subscribe(r,function(){return d.update(),!0}),f(e,t,function(e){d.value=e,d.update()})},w.IF=function(r,o,a,c,u,s,d){var l=p(),e=function(e){var t,n,i=!!e===c;this.shown!=i&&(this.shown=i,h(r),_(l),n=t=y(o),"object"==typeof e&&(n=w.pI(n,a),u&&(n=w.pEV(n,a))),(i?s:d)(r,n),m(t,l))}.bind({shown:c});e(!c),f(o,a,e)},w.aCP=function(n,i,r){n.onsubmit=function(e){e.preventDefault();var e=T(n),t=("."!=r&&""!=r&&((t={})[r]=e,e=t),C(i,e));i.view.tree.update(t)}},w.SY=function(n,i,r,e){function t(e){(t={})[r]=n.value;var t=C(i,t);i.view.tree.update(t)}var o="type"in n?n.type.toUpperCase():"text";"CHECKBOX"==o?n.onchange=s(e,function(e){t(n.checked)}):"RADIO"==o?n.onchange=s(e,function(e){n.checked&&t(n.value)}):(n.onchange=s(e,function(e){t(n.value)}),n.onkeyup=n.onchange,window.setTimeout(function(){t(n.value)},1))},function(e,t){if("TEXTAREA"==e.tagName.toUpperCase())t[e.name]=e.value;else if("SELECT"==e.tagName.toUpperCase())t[e.name]=e.value;else if("INPUT"==e.tagName.toUpperCase()){var n,i,r="type"in e?e.type.toUpperCase():"text";"SUBMIT"!=r&&"RESET"!=r&&"name"in e&&(i=t,(n=e.name).endsWith("[]")?((n=n.substr(0,n.length-2))in i&&(i[n]=[]),i=i[n],"CHECKBOX"==r?i.push(!!e.checked):"RADIO"==r&&!e.checked||i.push(e.value)):"CHECKBOX"==r?i[n]=!!e.checked:"RADIO"==r&&!e.checked||(i[n]=e.value))}else if("children"in e)for(var o=e.children.length,a=0;a<o;a++){var c=e.children[a];I(c,t)}}),T=function(e){var t={};return I(e,t),t},E=function(n,i){return function(e){var t={},e=(t[i]=e,C(w.pV(n),t));n.view.tree.update(e)}},D={},N=(w.PRWP=function(e,t){D[e]=t},w.WP=function(e,t,n,i){D[n](e,t,i,w)},w.PG=function(e,t){for(var n=c,i=0;i<e.length;i++){var r=e[i];r in n||(n[r]={}),n=n[r]}n["@"]=t},function(e,t,n,i){if(t<e.length){if("number"in n){var r=n.number,o=parseFloat(e[t]);if(!isNaN(o))for(var a in r){if(i[a]=o,null!==(c=N(e,t+1,r[a],i)))return c;delete i[a]}}if("text"in n){r=n.text,o=e[t];for(a in r){if(i[a]=o,null!==(c=N(e,t+1,r[a],i)))return c;delete i[a]}}var c;if("fixed"in n)for(a in r=n.fixed)if(a==e[t])if(null!==(c=N(e,t+1,r[a],i)))return c}else if("@"in n)return n["@"]}),U=(w.goto=function(e,t){window.setTimeout(function(){t.startsWith("/")?w.run(document.body,t,!0):window.location.href=o(t)},10)},w.init=function(){w.run(document.body,A(window.location.pathname+window.location.hash),!1),window.onpopstate=function(){w.run(document.body,A(window.location.pathname+window.location.hash),!1)}},w.run=function(e,t,n){for(conKey in k)k[conKey].tree.nuke();var i=(t.startsWith("/")?t.substring(1):t).split("/"),r={session_id:"R"+Math.random()},i=N(i,0,c,r);h(e),null!=i?(i(e,i={service:b,data:null,view:(i=e,{tree:new AdamaTree,delta:{},parent:null,path:null,where:i}),current:"view"}),i.view.tree.subscribe(i.view.delta),i.view.tree.update(r),n&&window.history.pushState({},"",o(t))):"/404"!=t&&w.run(e,"/404"),e.appendChild(x)},{}),L=(w.SIGNOUT=function(){U={},localStorage.removeItem("identity_default");var e,t=[];for(e in k){var n=k[e];null!=n.ptr&&n.ptr.end({success:function(){},failure:function(){}}),t.push(e)}for(var i=0;i<t.length;i++)delete k[t[i]];w.goto(null,"/")},w.GOOGLE_SIGN_ON=function(e){b.InitConvertGoogleUser(e,{success:function(e){U.default=e.identity,localStorage.setItem("identity_default",e.identity),w.goto(null,"/")},failure:function(e){console.log("Google failure: "+e)}})},w.ID=function(e,t){!0===e&&(e="default");var n=null,i=function(){},r=localStorage.getItem("identity_"+e);if(r&&(U[e]=r),e.startsWith("direct:"))n=e.substr(7),console.log("toUse:"+n);else{if(!(e in U))return window.setTimeout(function(){w.goto(null,t)},10),{abort:!0};n=U[e],i=function(){delete U[e],localStorage.removeItem("identity_"+e)}}return{abort:!1,cleanup:i,identity:n}},{});w.PRCUDA=function(e,t){L[e]=t},w.CUDA=function(n,i,r,o,a,c){var u=p();o.__=s(10,function(){_(u),h(n);var e=!1,t=(r in L&&("function"==typeof(t=L[r])&&(e=t(o,i,a,w))),e=e||new AdamaTree,{service:i.service,data:{connection:i.connection,tree:e,delta:{},parent:null,path:null},view:d(i.view),current:"data"});c(t),m(t,u)})},w.ST=function(e){document.title=e.value,e.__=s(1,function(){document.title=e.value})},w.CONNECT=function(r,o,a){var c={view:function(){}};o.__=s(10,function(){var t,e,n,i;"key"in o&&"space"in o&&"name"in o&&(t=u(o.name),i=o.space+"/"+o.key,e=function(e){c.view=r.view.tree.subscribe(function(){null!=t.ptr&&t.ptr.update(r.view.tree.copy(),{success:function(){},failure:function(){}})}),e&&t.ptr.update(r.view.tree.copy(),{success:function(){},failure:function(){}})},null!=t.ptr&&t.bound==i?e(!0):(t.space=o.space,t.key=o.key,null!=t.ptr&&(t.ptr.end({success:function(){},failure:function(){}}),t.ptr=null),t.bound=i,(i=w.ID(o.identity,a)).abort||(n=i.identity,i.cleanup,c.view(),i=r.view.tree.copy(),t.ptr=b.ConnectionCreate(n,o.space,o.key,i,{next:function(e){"data"in e.delta&&t.tree.update(e.delta.data),"outstanding"in e.delta&&t.ondecide(e.delta.outstanding)},complete:function(){},failure:function(e){t.ptr=null,console.log("Document Failure: "+e)}}),t.tree.update({}),e(!1))))})},w.INTERNAL=function(e){return{service:e.service,data:{connection:null,tree:new AdamaTree,delta:{},parent:null,path:null},view:d(e.view),current:"data"}};return w.aUP=function(e,t,n,i,r){var n=w.ID(n,r);n.abort||(e.action="https://aws-us-east-2.adama-platform.com/~upload",e.method="post",e.enctype="multipart/form-data",(r=document.createElement("input")).type="hidden",r.name="identity",r.value=n.identity,e.appendChild(r),(n=document.createElement("iframe")).name="UPLOAD_"+Math.random(),e.appendChild(n),e.target=n.name)},w.aSO=function(t,n,i,e,r){var o=E(n,e);window.setTimeout(function(){a(t)},1),t.onsubmit=function(e){e.preventDefault();e=T(t);e.remember?localStorage.setItem("email_remember",e.email):localStorage.setItem("email_remember",""),b.AccountLogin(e.email,e.password,{success:function(e){o(!1),U[i]=e.identity,localStorage.setItem("identity_"+i,e.identity),w.goto(n.view,r)},failure:function(e){o(!0),console.log("Sign in failure:"+e)}})}},w.aSU=function(n,i,e,r){var o=E(i,e);n.onsubmit=function(e){e.preventDefault();var t=T(n);b.InitSetupAccount(t.email,{success:function(e){o(!1),localStorage.setItem("email",t.email),w.goto(i.view,r)},failure:function(e){o(!0),console.log("Sign up failure:")}})}},w.aSP=function(t,i,e,r){var o=E(i,e);t.onsubmit=function(e){e.preventDefault();var n=T(t);"email"in n||(n.email=localStorage.getItem("email")),b.InitCompleteAccount(n.email,!1,n.code,{success:function(e){var t=e.identity;b.AccountSetPassword(e.identity,n.password,{success:function(){o(!1),localStorage.setItem("identity_default",t),w.goto(i.view,r)},failure:function(e){o(!0)}})},failure:function(e){o(!0)}})}},w.aSD=function(n,i,r,e){var o=E(i,e);n.onsubmit=function(e){e.preventDefault();var t=performance.now();i.data.connection.ptr.send(r,T(n),{success:function(e){o(!1),console.log("Success|"+e.seq+";latency="+(performance.now()-t))},failure:function(e){o(!0),console.log("Send failure:"+e)}})}},window.rxhtml=w}();
