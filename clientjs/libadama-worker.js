console.log("adama worker started"),self.addEventListener("push",function(t){if(t.data){var i=t.data.json();if(i){var o={body:i.body||"Generic Push Body"},n=(i.icon&&(o.icon=i.icon),{});if(i.url&&(n.url=i.url),o.data=n,t.waitUntil(self.registration.showNotification(i.title||"Generic Push Title",o)),"number"==typeof i.badge&&navigator.setAppBadge)try{t.waitUntil(navigator.setAppBadge(i.badge))}catch(t){}}}}),self.addEventListener("notificationclick",function(t){var l,e;t.notification&&t.notification.data&&t.notification.data.url&&(l=self.location.protocol+"//"+self.location.host+t.notification.data.url,e=self.location.protocol+"//"+self.location.host,console.log("got:"+l),t.notification.close(),t.waitUntil(clients.matchAll({type:"window"}).then(t=>{var i=null,o=null;console.log(t);for(var n=0;n<t.length;n++){var a=t[n];if(console.log("client:"+a.url+";"+l),a.url===l&&"focus"in a)return a.focus();a.url.startsWith(l)&&"navigate"in a&&(i=a),a.url.startsWith(e)&&"navigate"in a&&(o=a)}return null!=i?i.navigate(l):null!=o?o.navigate(l):clients.openWindow?clients.openWindow(l):void 0})))});
